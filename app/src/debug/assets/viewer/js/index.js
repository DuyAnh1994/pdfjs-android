// node_modules/pdfjs-dist/build/pdf.mjs
var __webpack_require__ = {};
(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
      }
    }
  };
})();
(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();
var __webpack_exports__ = globalThis.pdfjsLib = {};
__webpack_require__.d(__webpack_exports__, {
  AbortException: () => (
    /* reexport */
    AbortException
  ),
  AnnotationEditorLayer: () => (
    /* reexport */
    AnnotationEditorLayer
  ),
  AnnotationEditorParamsType: () => (
    /* reexport */
    AnnotationEditorParamsType
  ),
  AnnotationEditorType: () => (
    /* reexport */
    AnnotationEditorType
  ),
  AnnotationEditorUIManager: () => (
    /* reexport */
    AnnotationEditorUIManager
  ),
  AnnotationLayer: () => (
    /* reexport */
    AnnotationLayer
  ),
  AnnotationMode: () => (
    /* reexport */
    AnnotationMode
  ),
  AnnotationType: () => (
    /* reexport */
    AnnotationType
  ),
  ColorPicker: () => (
    /* reexport */
    ColorPicker
  ),
  DOMSVGFactory: () => (
    /* reexport */
    DOMSVGFactory
  ),
  DrawLayer: () => (
    /* reexport */
    DrawLayer
  ),
  FeatureTest: () => (
    /* reexport */
    util_FeatureTest
  ),
  GlobalWorkerOptions: () => (
    /* reexport */
    GlobalWorkerOptions
  ),
  ImageKind: () => (
    /* reexport */
    util_ImageKind
  ),
  InvalidPDFException: () => (
    /* reexport */
    InvalidPDFException
  ),
  MathClamp: () => (
    /* reexport */
    MathClamp
  ),
  OPS: () => (
    /* reexport */
    OPS
  ),
  OutputScale: () => (
    /* reexport */
    OutputScale
  ),
  PDFDataRangeTransport: () => (
    /* reexport */
    PDFDataRangeTransport
  ),
  PDFDateString: () => (
    /* reexport */
    PDFDateString
  ),
  PDFWorker: () => (
    /* reexport */
    PDFWorker
  ),
  PasswordResponses: () => (
    /* reexport */
    PasswordResponses
  ),
  PermissionFlag: () => (
    /* reexport */
    PermissionFlag
  ),
  PixelsPerInch: () => (
    /* reexport */
    PixelsPerInch
  ),
  RenderingCancelledException: () => (
    /* reexport */
    RenderingCancelledException
  ),
  ResponseException: () => (
    /* reexport */
    ResponseException
  ),
  SignatureExtractor: () => (
    /* reexport */
    SignatureExtractor
  ),
  SupportedImageMimeTypes: () => (
    /* reexport */
    SupportedImageMimeTypes
  ),
  TextLayer: () => (
    /* reexport */
    TextLayer
  ),
  TouchManager: () => (
    /* reexport */
    TouchManager
  ),
  Util: () => (
    /* reexport */
    Util
  ),
  VerbosityLevel: () => (
    /* reexport */
    VerbosityLevel
  ),
  XfaLayer: () => (
    /* reexport */
    XfaLayer
  ),
  build: () => (
    /* reexport */
    build
  ),
  createValidAbsoluteUrl: () => (
    /* reexport */
    createValidAbsoluteUrl
  ),
  fetchData: () => (
    /* reexport */
    fetchData
  ),
  getDocument: () => (
    /* reexport */
    getDocument
  ),
  getFilenameFromUrl: () => (
    /* reexport */
    getFilenameFromUrl
  ),
  getPdfFilenameFromUrl: () => (
    /* reexport */
    getPdfFilenameFromUrl
  ),
  getUuid: () => (
    /* reexport */
    getUuid
  ),
  getXfaPageViewport: () => (
    /* reexport */
    getXfaPageViewport
  ),
  isDataScheme: () => (
    /* reexport */
    isDataScheme
  ),
  isPdfFile: () => (
    /* reexport */
    isPdfFile
  ),
  isValidExplicitDest: () => (
    /* reexport */
    isValidExplicitDest
  ),
  noContextMenu: () => (
    /* reexport */
    noContextMenu
  ),
  normalizeUnicode: () => (
    /* reexport */
    normalizeUnicode
  ),
  setLayerDimensions: () => (
    /* reexport */
    setLayerDimensions
  ),
  shadow: () => (
    /* reexport */
    shadow
  ),
  stopEvent: () => (
    /* reexport */
    stopEvent
  ),
  version: () => (
    /* reexport */
    version
  )
});
var isNodeJS = typeof process === "object" && process + "" === "[object process]" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== "browser");
var IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];
var FONT_IDENTITY_MATRIX = [1e-3, 0, 0, 1e-3, 0, 0];
var LINE_FACTOR = 1.35;
var LINE_DESCENT_FACTOR = 0.35;
var BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;
var RenderingIntentFlag = {
  ANY: 1,
  DISPLAY: 2,
  PRINT: 4,
  SAVE: 8,
  ANNOTATIONS_FORMS: 16,
  ANNOTATIONS_STORAGE: 32,
  ANNOTATIONS_DISABLE: 64,
  IS_EDITING: 128,
  OPLIST: 256
};
var AnnotationMode = {
  DISABLE: 0,
  ENABLE: 1,
  ENABLE_FORMS: 2,
  ENABLE_STORAGE: 3
};
var AnnotationEditorPrefix = "pdfjs_internal_editor_";
var AnnotationEditorType = {
  DISABLE: -1,
  NONE: 0,
  FREETEXT: 3,
  HIGHLIGHT: 9,
  STAMP: 13,
  INK: 15,
  SIGNATURE: 101
};
var AnnotationEditorParamsType = {
  RESIZE: 1,
  CREATE: 2,
  FREETEXT_SIZE: 11,
  FREETEXT_COLOR: 12,
  FREETEXT_OPACITY: 13,
  INK_COLOR: 21,
  INK_THICKNESS: 22,
  INK_OPACITY: 23,
  HIGHLIGHT_COLOR: 31,
  HIGHLIGHT_DEFAULT_COLOR: 32,
  HIGHLIGHT_THICKNESS: 33,
  HIGHLIGHT_FREE: 34,
  HIGHLIGHT_SHOW_ALL: 35,
  DRAW_STEP: 41
};
var PermissionFlag = {
  PRINT: 4,
  MODIFY_CONTENTS: 8,
  COPY: 16,
  MODIFY_ANNOTATIONS: 32,
  FILL_INTERACTIVE_FORMS: 256,
  COPY_FOR_ACCESSIBILITY: 512,
  ASSEMBLE: 1024,
  PRINT_HIGH_QUALITY: 2048
};
var TextRenderingMode = {
  FILL: 0,
  STROKE: 1,
  FILL_STROKE: 2,
  INVISIBLE: 3,
  FILL_ADD_TO_PATH: 4,
  STROKE_ADD_TO_PATH: 5,
  FILL_STROKE_ADD_TO_PATH: 6,
  ADD_TO_PATH: 7,
  FILL_STROKE_MASK: 3,
  ADD_TO_PATH_FLAG: 4
};
var util_ImageKind = {
  GRAYSCALE_1BPP: 1,
  RGB_24BPP: 2,
  RGBA_32BPP: 3
};
var AnnotationType = {
  TEXT: 1,
  LINK: 2,
  FREETEXT: 3,
  LINE: 4,
  SQUARE: 5,
  CIRCLE: 6,
  POLYGON: 7,
  POLYLINE: 8,
  HIGHLIGHT: 9,
  UNDERLINE: 10,
  SQUIGGLY: 11,
  STRIKEOUT: 12,
  STAMP: 13,
  CARET: 14,
  INK: 15,
  POPUP: 16,
  FILEATTACHMENT: 17,
  SOUND: 18,
  MOVIE: 19,
  WIDGET: 20,
  SCREEN: 21,
  PRINTERMARK: 22,
  TRAPNET: 23,
  WATERMARK: 24,
  THREED: 25,
  REDACT: 26
};
var AnnotationBorderStyleType = {
  SOLID: 1,
  DASHED: 2,
  BEVELED: 3,
  INSET: 4,
  UNDERLINE: 5
};
var VerbosityLevel = {
  ERRORS: 0,
  WARNINGS: 1,
  INFOS: 5
};
var OPS = {
  dependency: 1,
  setLineWidth: 2,
  setLineCap: 3,
  setLineJoin: 4,
  setMiterLimit: 5,
  setDash: 6,
  setRenderingIntent: 7,
  setFlatness: 8,
  setGState: 9,
  save: 10,
  restore: 11,
  transform: 12,
  moveTo: 13,
  lineTo: 14,
  curveTo: 15,
  curveTo2: 16,
  curveTo3: 17,
  closePath: 18,
  rectangle: 19,
  stroke: 20,
  closeStroke: 21,
  fill: 22,
  eoFill: 23,
  fillStroke: 24,
  eoFillStroke: 25,
  closeFillStroke: 26,
  closeEOFillStroke: 27,
  endPath: 28,
  clip: 29,
  eoClip: 30,
  beginText: 31,
  endText: 32,
  setCharSpacing: 33,
  setWordSpacing: 34,
  setHScale: 35,
  setLeading: 36,
  setFont: 37,
  setTextRenderingMode: 38,
  setTextRise: 39,
  moveText: 40,
  setLeadingMoveText: 41,
  setTextMatrix: 42,
  nextLine: 43,
  showText: 44,
  showSpacedText: 45,
  nextLineShowText: 46,
  nextLineSetSpacingShowText: 47,
  setCharWidth: 48,
  setCharWidthAndBounds: 49,
  setStrokeColorSpace: 50,
  setFillColorSpace: 51,
  setStrokeColor: 52,
  setStrokeColorN: 53,
  setFillColor: 54,
  setFillColorN: 55,
  setStrokeGray: 56,
  setFillGray: 57,
  setStrokeRGBColor: 58,
  setFillRGBColor: 59,
  setStrokeCMYKColor: 60,
  setFillCMYKColor: 61,
  shadingFill: 62,
  beginInlineImage: 63,
  beginImageData: 64,
  endInlineImage: 65,
  paintXObject: 66,
  markPoint: 67,
  markPointProps: 68,
  beginMarkedContent: 69,
  beginMarkedContentProps: 70,
  endMarkedContent: 71,
  beginCompat: 72,
  endCompat: 73,
  paintFormXObjectBegin: 74,
  paintFormXObjectEnd: 75,
  beginGroup: 76,
  endGroup: 77,
  beginAnnotation: 80,
  endAnnotation: 81,
  paintImageMaskXObject: 83,
  paintImageMaskXObjectGroup: 84,
  paintImageXObject: 85,
  paintInlineImageXObject: 86,
  paintInlineImageXObjectGroup: 87,
  paintImageXObjectRepeat: 88,
  paintImageMaskXObjectRepeat: 89,
  paintSolidColorImageMask: 90,
  constructPath: 91,
  setStrokeTransparent: 92,
  setFillTransparent: 93
};
var DrawOPS = {
  moveTo: 0,
  lineTo: 1,
  curveTo: 2,
  closePath: 3
};
var PasswordResponses = {
  NEED_PASSWORD: 1,
  INCORRECT_PASSWORD: 2
};
var verbosity = VerbosityLevel.WARNINGS;
function setVerbosityLevel(level) {
  if (Number.isInteger(level)) {
    verbosity = level;
  }
}
function getVerbosityLevel() {
  return verbosity;
}
function info(msg) {
  if (verbosity >= VerbosityLevel.INFOS) {
    console.log(`Info: ${msg}`);
  }
}
function warn(msg) {
  if (verbosity >= VerbosityLevel.WARNINGS) {
    console.log(`Warning: ${msg}`);
  }
}
function unreachable(msg) {
  throw new Error(msg);
}
function assert(cond, msg) {
  if (!cond) {
    unreachable(msg);
  }
}
function _isValidProtocol(url) {
  switch (url?.protocol) {
    case "http:":
    case "https:":
    case "ftp:":
    case "mailto:":
    case "tel:":
      return true;
    default:
      return false;
  }
}
function createValidAbsoluteUrl(url, baseUrl = null, options = null) {
  if (!url) {
    return null;
  }
  if (options && typeof url === "string") {
    if (options.addDefaultProtocol && url.startsWith("www.")) {
      const dots = url.match(/\./g);
      if (dots?.length >= 2) {
        url = `http://${url}`;
      }
    }
    if (options.tryConvertEncoding) {
      try {
        url = stringToUTF8String(url);
      } catch {
      }
    }
  }
  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);
  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;
}
function shadow(obj, prop, value, nonSerializable = false) {
  Object.defineProperty(obj, prop, {
    value,
    enumerable: !nonSerializable,
    configurable: true,
    writable: false
  });
  return value;
}
var BaseException = function BaseExceptionClosure() {
  function BaseException2(message, name) {
    this.message = message;
    this.name = name;
  }
  BaseException2.prototype = new Error();
  BaseException2.constructor = BaseException2;
  return BaseException2;
}();
var PasswordException = class extends BaseException {
  constructor(msg, code) {
    super(msg, "PasswordException");
    this.code = code;
  }
};
var UnknownErrorException = class extends BaseException {
  constructor(msg, details) {
    super(msg, "UnknownErrorException");
    this.details = details;
  }
};
var InvalidPDFException = class extends BaseException {
  constructor(msg) {
    super(msg, "InvalidPDFException");
  }
};
var ResponseException = class extends BaseException {
  constructor(msg, status, missing) {
    super(msg, "ResponseException");
    this.status = status;
    this.missing = missing;
  }
};
var FormatError = class extends BaseException {
  constructor(msg) {
    super(msg, "FormatError");
  }
};
var AbortException = class extends BaseException {
  constructor(msg) {
    super(msg, "AbortException");
  }
};
function bytesToString(bytes) {
  if (typeof bytes !== "object" || bytes?.length === void 0) {
    unreachable("Invalid argument for bytesToString");
  }
  const length = bytes.length;
  const MAX_ARGUMENT_COUNT = 8192;
  if (length < MAX_ARGUMENT_COUNT) {
    return String.fromCharCode.apply(null, bytes);
  }
  const strBuf = [];
  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {
    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);
    const chunk = bytes.subarray(i, chunkEnd);
    strBuf.push(String.fromCharCode.apply(null, chunk));
  }
  return strBuf.join("");
}
function stringToBytes(str) {
  if (typeof str !== "string") {
    unreachable("Invalid argument for stringToBytes");
  }
  const length = str.length;
  const bytes = new Uint8Array(length);
  for (let i = 0; i < length; ++i) {
    bytes[i] = str.charCodeAt(i) & 255;
  }
  return bytes;
}
function string32(value) {
  return String.fromCharCode(value >> 24 & 255, value >> 16 & 255, value >> 8 & 255, value & 255);
}
function objectFromMap(map) {
  const obj = /* @__PURE__ */ Object.create(null);
  for (const [key, value] of map) {
    obj[key] = value;
  }
  return obj;
}
function isLittleEndian() {
  const buffer8 = new Uint8Array(4);
  buffer8[0] = 1;
  const view32 = new Uint32Array(buffer8.buffer, 0, 1);
  return view32[0] === 1;
}
function isEvalSupported() {
  try {
    new Function("");
    return true;
  } catch {
    return false;
  }
}
var util_FeatureTest = class {
  static get isLittleEndian() {
    return shadow(this, "isLittleEndian", isLittleEndian());
  }
  static get isEvalSupported() {
    return shadow(this, "isEvalSupported", isEvalSupported());
  }
  static get isOffscreenCanvasSupported() {
    return shadow(this, "isOffscreenCanvasSupported", typeof OffscreenCanvas !== "undefined");
  }
  static get isImageDecoderSupported() {
    return shadow(this, "isImageDecoderSupported", typeof ImageDecoder !== "undefined");
  }
  static get platform() {
    if (typeof navigator !== "undefined" && typeof navigator?.platform === "string" && typeof navigator?.userAgent === "string") {
      const {
        platform,
        userAgent
      } = navigator;
      return shadow(this, "platform", {
        isAndroid: userAgent.includes("Android"),
        isLinux: platform.includes("Linux"),
        isMac: platform.includes("Mac"),
        isWindows: platform.includes("Win"),
        isFirefox: userAgent.includes("Firefox")
      });
    }
    return shadow(this, "platform", {
      isAndroid: false,
      isLinux: false,
      isMac: false,
      isWindows: false,
      isFirefox: false
    });
  }
  static get isCSSRoundSupported() {
    return shadow(this, "isCSSRoundSupported", globalThis.CSS?.supports?.("width: round(1.5px, 1px)"));
  }
};
var hexNumbers = Array.from(Array(256).keys(), (n) => n.toString(16).padStart(2, "0"));
var Util = class {
  static makeHexColor(r, g, b) {
    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;
  }
  static transform(m1, m2) {
    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];
  }
  static applyTransform(p, m) {
    const xt = p[0] * m[0] + p[1] * m[2] + m[4];
    const yt = p[0] * m[1] + p[1] * m[3] + m[5];
    return [xt, yt];
  }
  static applyInverseTransform(p, m) {
    const d = m[0] * m[3] - m[1] * m[2];
    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;
    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;
    return [xt, yt];
  }
  static getAxialAlignedBoundingBox(r, m) {
    const p1 = this.applyTransform(r, m);
    const p2 = this.applyTransform(r.slice(2, 4), m);
    const p3 = this.applyTransform([r[0], r[3]], m);
    const p4 = this.applyTransform([r[2], r[1]], m);
    return [Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1])];
  }
  static inverseTransform(m) {
    const d = m[0] * m[3] - m[1] * m[2];
    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];
  }
  static singularValueDecompose2dScale(m) {
    const transpose = [m[0], m[2], m[1], m[3]];
    const a = m[0] * transpose[0] + m[1] * transpose[2];
    const b = m[0] * transpose[1] + m[1] * transpose[3];
    const c = m[2] * transpose[0] + m[3] * transpose[2];
    const d = m[2] * transpose[1] + m[3] * transpose[3];
    const first = (a + d) / 2;
    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;
    const sx = first + second || 1;
    const sy = first - second || 1;
    return [Math.sqrt(sx), Math.sqrt(sy)];
  }
  static normalizeRect(rect) {
    const r = rect.slice(0);
    if (rect[0] > rect[2]) {
      r[0] = rect[2];
      r[2] = rect[0];
    }
    if (rect[1] > rect[3]) {
      r[1] = rect[3];
      r[3] = rect[1];
    }
    return r;
  }
  static intersect(rect1, rect2) {
    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));
    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));
    if (xLow > xHigh) {
      return null;
    }
    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));
    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));
    if (yLow > yHigh) {
      return null;
    }
    return [xLow, yLow, xHigh, yHigh];
  }
  static pointBoundingBox(x, y, minMax) {
    minMax[0] = Math.min(minMax[0], x);
    minMax[1] = Math.min(minMax[1], y);
    minMax[2] = Math.max(minMax[2], x);
    minMax[3] = Math.max(minMax[3], y);
  }
  static rectBoundingBox(x0, y0, x1, y1, minMax) {
    minMax[0] = Math.min(minMax[0], x0, x1);
    minMax[1] = Math.min(minMax[1], y0, y1);
    minMax[2] = Math.max(minMax[2], x0, x1);
    minMax[3] = Math.max(minMax[3], y0, y1);
  }
  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {
    if (t <= 0 || t >= 1) {
      return;
    }
    const mt = 1 - t;
    const tt = t * t;
    const ttt = tt * t;
    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;
    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;
    minMax[0] = Math.min(minMax[0], x);
    minMax[1] = Math.min(minMax[1], y);
    minMax[2] = Math.max(minMax[2], x);
    minMax[3] = Math.max(minMax[3], y);
  }
  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {
    if (Math.abs(a) < 1e-12) {
      if (Math.abs(b) >= 1e-12) {
        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);
      }
      return;
    }
    const delta = b ** 2 - 4 * c * a;
    if (delta < 0) {
      return;
    }
    const sqrtDelta = Math.sqrt(delta);
    const a2 = 2 * a;
    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);
    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);
  }
  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {
    minMax[0] = Math.min(minMax[0], x0, x3);
    minMax[1] = Math.min(minMax[1], y0, y3);
    minMax[2] = Math.max(minMax[2], x0, x3);
    minMax[3] = Math.max(minMax[3], y0, y3);
    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);
    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);
  }
};
function stringToUTF8String(str) {
  return decodeURIComponent(escape(str));
}
var NormalizeRegex = null;
var NormalizationMap = null;
function normalizeUnicode(str) {
  if (!NormalizeRegex) {
    NormalizeRegex = /([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu;
    NormalizationMap = /* @__PURE__ */ new Map([["\uFB05", "\u017Ft"]]);
  }
  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize("NFKC") : NormalizationMap.get(p2));
}
function getUuid() {
  if (typeof crypto.randomUUID === "function") {
    return crypto.randomUUID();
  }
  const buf = new Uint8Array(32);
  crypto.getRandomValues(buf);
  return bytesToString(buf);
}
var AnnotationPrefix = "pdfjs_internal_id_";
function _isValidExplicitDest(validRef, validName, dest) {
  if (!Array.isArray(dest) || dest.length < 2) {
    return false;
  }
  const [page, zoom, ...args] = dest;
  if (!validRef(page) && !Number.isInteger(page)) {
    return false;
  }
  if (!validName(zoom)) {
    return false;
  }
  const argsLen = args.length;
  let allowNull = true;
  switch (zoom.name) {
    case "XYZ":
      if (argsLen < 2 || argsLen > 3) {
        return false;
      }
      break;
    case "Fit":
    case "FitB":
      return argsLen === 0;
    case "FitH":
    case "FitBH":
    case "FitV":
    case "FitBV":
      if (argsLen > 1) {
        return false;
      }
      break;
    case "FitR":
      if (argsLen !== 4) {
        return false;
      }
      allowNull = false;
      break;
    default:
      return false;
  }
  for (const arg of args) {
    if (typeof arg === "number" || allowNull && arg === null) {
      continue;
    }
    return false;
  }
  return true;
}
function MathClamp(v, min, max) {
  return Math.min(Math.max(v, min), max);
}
function toBase64Util(arr) {
  if (Uint8Array.prototype.toBase64) {
    return arr.toBase64();
  }
  return btoa(bytesToString(arr));
}
function fromBase64Util(str) {
  if (Uint8Array.fromBase64) {
    return Uint8Array.fromBase64(str);
  }
  return stringToBytes(atob(str));
}
if (typeof Promise.try !== "function") {
  Promise.try = function(fn, ...args) {
    return new Promise((resolve) => {
      resolve(fn(...args));
    });
  };
}
if (typeof Math.sumPrecise !== "function") {
  Math.sumPrecise = function(numbers) {
    return numbers.reduce((a, b) => a + b, 0);
  };
}
var SVG_NS = "http://www.w3.org/2000/svg";
var PixelsPerInch = class {
  static CSS = 96;
  static PDF = 72;
  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;
};
async function fetchData(url, type = "text") {
  if (isValidFetchUrl(url, document.baseURI)) {
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(response.statusText);
    }
    switch (type) {
      case "arraybuffer":
        return response.arrayBuffer();
      case "blob":
        return response.blob();
      case "json":
        return response.json();
    }
    return response.text();
  }
  return new Promise((resolve, reject) => {
    const request = new XMLHttpRequest();
    request.open("GET", url, true);
    request.responseType = type;
    request.onreadystatechange = () => {
      if (request.readyState !== XMLHttpRequest.DONE) {
        return;
      }
      if (request.status === 200 || request.status === 0) {
        switch (type) {
          case "arraybuffer":
          case "blob":
          case "json":
            resolve(request.response);
            return;
        }
        resolve(request.responseText);
        return;
      }
      reject(new Error(request.statusText));
    };
    request.send(null);
  });
}
var PageViewport = class _PageViewport {
  constructor({
    viewBox,
    userUnit,
    scale,
    rotation,
    offsetX = 0,
    offsetY = 0,
    dontFlip = false
  }) {
    this.viewBox = viewBox;
    this.userUnit = userUnit;
    this.scale = scale;
    this.rotation = rotation;
    this.offsetX = offsetX;
    this.offsetY = offsetY;
    scale *= userUnit;
    const centerX = (viewBox[2] + viewBox[0]) / 2;
    const centerY = (viewBox[3] + viewBox[1]) / 2;
    let rotateA, rotateB, rotateC, rotateD;
    rotation %= 360;
    if (rotation < 0) {
      rotation += 360;
    }
    switch (rotation) {
      case 180:
        rotateA = -1;
        rotateB = 0;
        rotateC = 0;
        rotateD = 1;
        break;
      case 90:
        rotateA = 0;
        rotateB = 1;
        rotateC = 1;
        rotateD = 0;
        break;
      case 270:
        rotateA = 0;
        rotateB = -1;
        rotateC = -1;
        rotateD = 0;
        break;
      case 0:
        rotateA = 1;
        rotateB = 0;
        rotateC = 0;
        rotateD = -1;
        break;
      default:
        throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.");
    }
    if (dontFlip) {
      rotateC = -rotateC;
      rotateD = -rotateD;
    }
    let offsetCanvasX, offsetCanvasY;
    let width, height;
    if (rotateA === 0) {
      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;
      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;
      width = (viewBox[3] - viewBox[1]) * scale;
      height = (viewBox[2] - viewBox[0]) * scale;
    } else {
      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;
      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;
      width = (viewBox[2] - viewBox[0]) * scale;
      height = (viewBox[3] - viewBox[1]) * scale;
    }
    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];
    this.width = width;
    this.height = height;
  }
  get rawDims() {
    const dims = this.viewBox;
    return shadow(this, "rawDims", {
      pageWidth: dims[2] - dims[0],
      pageHeight: dims[3] - dims[1],
      pageX: dims[0],
      pageY: dims[1]
    });
  }
  clone({
    scale = this.scale,
    rotation = this.rotation,
    offsetX = this.offsetX,
    offsetY = this.offsetY,
    dontFlip = false
  } = {}) {
    return new _PageViewport({
      viewBox: this.viewBox.slice(),
      userUnit: this.userUnit,
      scale,
      rotation,
      offsetX,
      offsetY,
      dontFlip
    });
  }
  convertToViewportPoint(x, y) {
    return Util.applyTransform([x, y], this.transform);
  }
  convertToViewportRectangle(rect) {
    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);
    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);
    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];
  }
  convertToPdfPoint(x, y) {
    return Util.applyInverseTransform([x, y], this.transform);
  }
};
var RenderingCancelledException = class extends BaseException {
  constructor(msg, extraDelay = 0) {
    super(msg, "RenderingCancelledException");
    this.extraDelay = extraDelay;
  }
};
function isDataScheme(url) {
  const ii = url.length;
  let i = 0;
  while (i < ii && url[i].trim() === "") {
    i++;
  }
  return url.substring(i, i + 5).toLowerCase() === "data:";
}
function isPdfFile(filename) {
  return typeof filename === "string" && /\.pdf$/i.test(filename);
}
function getFilenameFromUrl(url) {
  [url] = url.split(/[#?]/, 1);
  return url.substring(url.lastIndexOf("/") + 1);
}
function getPdfFilenameFromUrl(url, defaultFilename = "document.pdf") {
  if (typeof url !== "string") {
    return defaultFilename;
  }
  if (isDataScheme(url)) {
    warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.');
    return defaultFilename;
  }
  const reURI = /^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;
  const reFilename = /[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i;
  const splitURI = reURI.exec(url);
  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);
  if (suggestedFilename) {
    suggestedFilename = suggestedFilename[0];
    if (suggestedFilename.includes("%")) {
      try {
        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];
      } catch {
      }
    }
  }
  return suggestedFilename || defaultFilename;
}
var StatTimer = class {
  started = /* @__PURE__ */ Object.create(null);
  times = [];
  time(name) {
    if (name in this.started) {
      warn(`Timer is already running for ${name}`);
    }
    this.started[name] = Date.now();
  }
  timeEnd(name) {
    if (!(name in this.started)) {
      warn(`Timer has not been started for ${name}`);
    }
    this.times.push({
      name,
      start: this.started[name],
      end: Date.now()
    });
    delete this.started[name];
  }
  toString() {
    const outBuf = [];
    let longest = 0;
    for (const {
      name
    } of this.times) {
      longest = Math.max(name.length, longest);
    }
    for (const {
      name,
      start,
      end
    } of this.times) {
      outBuf.push(`${name.padEnd(longest)} ${end - start}ms
`);
    }
    return outBuf.join("");
  }
};
function isValidFetchUrl(url, baseUrl) {
  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);
  return res?.protocol === "http:" || res?.protocol === "https:";
}
function noContextMenu(e) {
  e.preventDefault();
}
function stopEvent(e) {
  e.preventDefault();
  e.stopPropagation();
}
var PDFDateString = class {
  static #regex;
  static toDateObject(input) {
    if (!input || typeof input !== "string") {
      return null;
    }
    this.#regex ||= new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");
    const matches = this.#regex.exec(input);
    if (!matches) {
      return null;
    }
    const year = parseInt(matches[1], 10);
    let month = parseInt(matches[2], 10);
    month = month >= 1 && month <= 12 ? month - 1 : 0;
    let day = parseInt(matches[3], 10);
    day = day >= 1 && day <= 31 ? day : 1;
    let hour = parseInt(matches[4], 10);
    hour = hour >= 0 && hour <= 23 ? hour : 0;
    let minute = parseInt(matches[5], 10);
    minute = minute >= 0 && minute <= 59 ? minute : 0;
    let second = parseInt(matches[6], 10);
    second = second >= 0 && second <= 59 ? second : 0;
    const universalTimeRelation = matches[7] || "Z";
    let offsetHour = parseInt(matches[8], 10);
    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;
    let offsetMinute = parseInt(matches[9], 10) || 0;
    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;
    if (universalTimeRelation === "-") {
      hour += offsetHour;
      minute += offsetMinute;
    } else if (universalTimeRelation === "+") {
      hour -= offsetHour;
      minute -= offsetMinute;
    }
    return new Date(Date.UTC(year, month, day, hour, minute, second));
  }
};
function getXfaPageViewport(xfaPage, {
  scale = 1,
  rotation = 0
}) {
  const {
    width,
    height
  } = xfaPage.attributes.style;
  const viewBox = [0, 0, parseInt(width), parseInt(height)];
  return new PageViewport({
    viewBox,
    userUnit: 1,
    scale,
    rotation
  });
}
function getRGB(color) {
  if (color.startsWith("#")) {
    const colorRGB = parseInt(color.slice(1), 16);
    return [(colorRGB & 16711680) >> 16, (colorRGB & 65280) >> 8, colorRGB & 255];
  }
  if (color.startsWith("rgb(")) {
    return color.slice(4, -1).split(",").map((x) => parseInt(x));
  }
  if (color.startsWith("rgba(")) {
    return color.slice(5, -1).split(",").map((x) => parseInt(x)).slice(0, 3);
  }
  warn(`Not a valid color format: "${color}"`);
  return [0, 0, 0];
}
function getColorValues(colors) {
  const span = document.createElement("span");
  span.style.visibility = "hidden";
  document.body.append(span);
  for (const name of colors.keys()) {
    span.style.color = name;
    const computedColor = window.getComputedStyle(span).color;
    colors.set(name, getRGB(computedColor));
  }
  span.remove();
}
function getCurrentTransform(ctx) {
  const {
    a,
    b,
    c,
    d,
    e,
    f
  } = ctx.getTransform();
  return [a, b, c, d, e, f];
}
function getCurrentTransformInverse(ctx) {
  const {
    a,
    b,
    c,
    d,
    e,
    f
  } = ctx.getTransform().invertSelf();
  return [a, b, c, d, e, f];
}
function setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {
  if (viewport instanceof PageViewport) {
    const {
      pageWidth,
      pageHeight
    } = viewport.rawDims;
    const {
      style
    } = div;
    const useRound = util_FeatureTest.isCSSRoundSupported;
    const w = `var(--total-scale-factor) * ${pageWidth}px`, h = `var(--total-scale-factor) * ${pageHeight}px`;
    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`, heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;
    if (!mustFlip || viewport.rotation % 180 === 0) {
      style.width = widthStr;
      style.height = heightStr;
    } else {
      style.width = heightStr;
      style.height = widthStr;
    }
  }
  if (mustRotate) {
    div.setAttribute("data-main-rotation", viewport.rotation);
  }
}
var OutputScale = class _OutputScale {
  constructor() {
    const {
      pixelRatio
    } = _OutputScale;
    this.sx = pixelRatio;
    this.sy = pixelRatio;
  }
  get scaled() {
    return this.sx !== 1 || this.sy !== 1;
  }
  get symmetric() {
    return this.sx === this.sy;
  }
  limitCanvas(width, height, maxPixels, maxDim) {
    let maxAreaScale = Infinity, maxWidthScale = Infinity, maxHeightScale = Infinity;
    if (maxPixels > 0) {
      maxAreaScale = Math.sqrt(maxPixels / (width * height));
    }
    if (maxDim !== -1) {
      maxWidthScale = maxDim / width;
      maxHeightScale = maxDim / height;
    }
    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);
    if (this.sx > maxScale || this.sy > maxScale) {
      this.sx = maxScale;
      this.sy = maxScale;
      return true;
    }
    return false;
  }
  static get pixelRatio() {
    return globalThis.devicePixelRatio || 1;
  }
};
var SupportedImageMimeTypes = ["image/apng", "image/avif", "image/bmp", "image/gif", "image/jpeg", "image/png", "image/svg+xml", "image/webp", "image/x-icon"];
var EditorToolbar = class _EditorToolbar {
  #toolbar = null;
  #colorPicker = null;
  #editor;
  #buttons = null;
  #altText = null;
  #signatureDescriptionButton = null;
  static #l10nRemove = null;
  constructor(editor) {
    this.#editor = editor;
    _EditorToolbar.#l10nRemove ||= Object.freeze({
      freetext: "pdfjs-editor-remove-freetext-button",
      highlight: "pdfjs-editor-remove-highlight-button",
      ink: "pdfjs-editor-remove-ink-button",
      stamp: "pdfjs-editor-remove-stamp-button",
      signature: "pdfjs-editor-remove-signature-button"
    });
  }
  render() {
    const editToolbar = this.#toolbar = document.createElement("div");
    editToolbar.classList.add("editToolbar", "hidden");
    editToolbar.setAttribute("role", "toolbar");
    const signal = this.#editor._uiManager._signal;
    editToolbar.addEventListener("contextmenu", noContextMenu, {
      signal
    });
    editToolbar.addEventListener("pointerdown", _EditorToolbar.#pointerDown, {
      signal
    });
    const buttons = this.#buttons = document.createElement("div");
    buttons.className = "buttons";
    editToolbar.append(buttons);
    const position = this.#editor.toolbarPosition;
    if (position) {
      const {
        style
      } = editToolbar;
      const x = this.#editor._uiManager.direction === "ltr" ? 1 - position[0] : position[0];
      style.insetInlineEnd = `${100 * x}%`;
      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;
    }
    this.#addDeleteButton();
    return editToolbar;
  }
  get div() {
    return this.#toolbar;
  }
  static #pointerDown(e) {
    e.stopPropagation();
  }
  #focusIn(e) {
    this.#editor._focusEventsAllowed = false;
    stopEvent(e);
  }
  #focusOut(e) {
    this.#editor._focusEventsAllowed = true;
    stopEvent(e);
  }
  #addListenersToElement(element) {
    const signal = this.#editor._uiManager._signal;
    element.addEventListener("focusin", this.#focusIn.bind(this), {
      capture: true,
      signal
    });
    element.addEventListener("focusout", this.#focusOut.bind(this), {
      capture: true,
      signal
    });
    element.addEventListener("contextmenu", noContextMenu, {
      signal
    });
  }
  hide() {
    this.#toolbar.classList.add("hidden");
    this.#colorPicker?.hideDropdown();
  }
  show() {
    this.#toolbar.classList.remove("hidden");
    this.#altText?.shown();
  }
  #addDeleteButton() {
    const {
      editorType,
      _uiManager
    } = this.#editor;
    const button = document.createElement("button");
    button.className = "delete";
    button.tabIndex = 0;
    button.setAttribute("data-l10n-id", _EditorToolbar.#l10nRemove[editorType]);
    this.#addListenersToElement(button);
    button.addEventListener("click", (e) => {
      _uiManager.delete();
    }, {
      signal: _uiManager._signal
    });
    this.#buttons.append(button);
  }
  get #divider() {
    const divider = document.createElement("div");
    divider.className = "divider";
    return divider;
  }
  async addAltText(altText) {
    const button = await altText.render();
    this.#addListenersToElement(button);
    this.#buttons.prepend(button, this.#divider);
    this.#altText = altText;
  }
  addColorPicker(colorPicker) {
    this.#colorPicker = colorPicker;
    const button = colorPicker.renderButton();
    this.#addListenersToElement(button);
    this.#buttons.prepend(button, this.#divider);
  }
  async addEditSignatureButton(signatureManager) {
    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);
    this.#addListenersToElement(button);
    this.#buttons.prepend(button, this.#divider);
  }
  updateEditSignatureButton(description) {
    if (this.#signatureDescriptionButton) {
      this.#signatureDescriptionButton.title = description;
    }
  }
  remove() {
    this.#toolbar.remove();
    this.#colorPicker?.destroy();
    this.#colorPicker = null;
  }
};
var HighlightToolbar = class {
  #buttons = null;
  #toolbar = null;
  #uiManager;
  constructor(uiManager) {
    this.#uiManager = uiManager;
  }
  #render() {
    const editToolbar = this.#toolbar = document.createElement("div");
    editToolbar.className = "editToolbar";
    editToolbar.setAttribute("role", "toolbar");
    editToolbar.addEventListener("contextmenu", noContextMenu, {
      signal: this.#uiManager._signal
    });
    const buttons = this.#buttons = document.createElement("div");
    buttons.className = "buttons";
    editToolbar.append(buttons);
    this.#addHighlightButton();
    return editToolbar;
  }
  #getLastPoint(boxes, isLTR) {
    let lastY = 0;
    let lastX = 0;
    for (const box of boxes) {
      const y = box.y + box.height;
      if (y < lastY) {
        continue;
      }
      const x = box.x + (isLTR ? box.width : 0);
      if (y > lastY) {
        lastX = x;
        lastY = y;
        continue;
      }
      if (isLTR) {
        if (x > lastX) {
          lastX = x;
        }
      } else if (x < lastX) {
        lastX = x;
      }
    }
    return [isLTR ? 1 - lastX : lastX, lastY];
  }
  show(parent, boxes, isLTR) {
    const [x, y] = this.#getLastPoint(boxes, isLTR);
    const {
      style
    } = this.#toolbar ||= this.#render();
    parent.append(this.#toolbar);
    style.insetInlineEnd = `${100 * x}%`;
    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;
  }
  hide() {
    this.#toolbar.remove();
  }
  #addHighlightButton() {
    const button = document.createElement("button");
    button.className = "highlightButton";
    button.tabIndex = 0;
    button.setAttribute("data-l10n-id", `pdfjs-highlight-floating-button1`);
    const span = document.createElement("span");
    button.append(span);
    span.className = "visuallyHidden";
    span.setAttribute("data-l10n-id", "pdfjs-highlight-floating-button-label");
    const signal = this.#uiManager._signal;
    button.addEventListener("contextmenu", noContextMenu, {
      signal
    });
    button.addEventListener("click", () => {
      this.#uiManager.highlightSelection("floating_button");
    }, {
      signal
    });
    this.#buttons.append(button);
  }
};
function bindEvents(obj, element, names) {
  for (const name of names) {
    element.addEventListener(name, obj[name].bind(obj));
  }
}
var IdManager = class {
  #id = 0;
  get id() {
    return `${AnnotationEditorPrefix}${this.#id++}`;
  }
};
var ImageManager = class _ImageManager {
  #baseId = getUuid();
  #id = 0;
  #cache = null;
  static get _isSVGFittingCanvas() {
    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>`;
    const canvas2 = new OffscreenCanvas(1, 3);
    const ctx = canvas2.getContext("2d", {
      willReadFrequently: true
    });
    const image = new Image();
    image.src = svg;
    const promise = image.decode().then(() => {
      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);
      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;
    });
    return shadow(this, "_isSVGFittingCanvas", promise);
  }
  async #get(key, rawData) {
    this.#cache ||= /* @__PURE__ */ new Map();
    let data = this.#cache.get(key);
    if (data === null) {
      return null;
    }
    if (data?.bitmap) {
      data.refCounter += 1;
      return data;
    }
    try {
      data ||= {
        bitmap: null,
        id: `image_${this.#baseId}_${this.#id++}`,
        refCounter: 0,
        isSvg: false
      };
      let image;
      if (typeof rawData === "string") {
        data.url = rawData;
        image = await fetchData(rawData, "blob");
      } else if (rawData instanceof File) {
        image = data.file = rawData;
      } else if (rawData instanceof Blob) {
        image = rawData;
      }
      if (image.type === "image/svg+xml") {
        const mustRemoveAspectRatioPromise = _ImageManager._isSVGFittingCanvas;
        const fileReader = new FileReader();
        const imageElement = new Image();
        const imagePromise = new Promise((resolve, reject) => {
          imageElement.onload = () => {
            data.bitmap = imageElement;
            data.isSvg = true;
            resolve();
          };
          fileReader.onload = async () => {
            const url = data.svgUrl = fileReader.result;
            imageElement.src = await mustRemoveAspectRatioPromise ? `${url}#svgView(preserveAspectRatio(none))` : url;
          };
          imageElement.onerror = fileReader.onerror = reject;
        });
        fileReader.readAsDataURL(image);
        await imagePromise;
      } else {
        data.bitmap = await createImageBitmap(image);
      }
      data.refCounter = 1;
    } catch (e) {
      warn(e);
      data = null;
    }
    this.#cache.set(key, data);
    if (data) {
      this.#cache.set(data.id, data);
    }
    return data;
  }
  async getFromFile(file) {
    const {
      lastModified,
      name,
      size,
      type
    } = file;
    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);
  }
  async getFromUrl(url) {
    return this.#get(url, url);
  }
  async getFromBlob(id, blobPromise) {
    const blob = await blobPromise;
    return this.#get(id, blob);
  }
  async getFromId(id) {
    this.#cache ||= /* @__PURE__ */ new Map();
    const data = this.#cache.get(id);
    if (!data) {
      return null;
    }
    if (data.bitmap) {
      data.refCounter += 1;
      return data;
    }
    if (data.file) {
      return this.getFromFile(data.file);
    }
    if (data.blobPromise) {
      const {
        blobPromise
      } = data;
      delete data.blobPromise;
      return this.getFromBlob(data.id, blobPromise);
    }
    return this.getFromUrl(data.url);
  }
  getFromCanvas(id, canvas2) {
    this.#cache ||= /* @__PURE__ */ new Map();
    let data = this.#cache.get(id);
    if (data?.bitmap) {
      data.refCounter += 1;
      return data;
    }
    const offscreen = new OffscreenCanvas(canvas2.width, canvas2.height);
    const ctx = offscreen.getContext("2d");
    ctx.drawImage(canvas2, 0, 0);
    data = {
      bitmap: offscreen.transferToImageBitmap(),
      id: `image_${this.#baseId}_${this.#id++}`,
      refCounter: 1,
      isSvg: false
    };
    this.#cache.set(id, data);
    this.#cache.set(data.id, data);
    return data;
  }
  getSvgUrl(id) {
    const data = this.#cache.get(id);
    if (!data?.isSvg) {
      return null;
    }
    return data.svgUrl;
  }
  deleteId(id) {
    this.#cache ||= /* @__PURE__ */ new Map();
    const data = this.#cache.get(id);
    if (!data) {
      return;
    }
    data.refCounter -= 1;
    if (data.refCounter !== 0) {
      return;
    }
    const {
      bitmap
    } = data;
    if (!data.url && !data.file) {
      const canvas2 = new OffscreenCanvas(bitmap.width, bitmap.height);
      const ctx = canvas2.getContext("bitmaprenderer");
      ctx.transferFromImageBitmap(bitmap);
      data.blobPromise = canvas2.convertToBlob();
    }
    bitmap.close?.();
    data.bitmap = null;
  }
  isValidId(id) {
    return id.startsWith(`image_${this.#baseId}_`);
  }
};
var CommandManager = class {
  #commands = [];
  #locked = false;
  #maxSize;
  #position = -1;
  constructor(maxSize = 128) {
    this.#maxSize = maxSize;
  }
  add({
    cmd,
    undo,
    post,
    mustExec,
    type = NaN,
    overwriteIfSameType = false,
    keepUndo = false
  }) {
    if (mustExec) {
      cmd();
    }
    if (this.#locked) {
      return;
    }
    const save = {
      cmd,
      undo,
      post,
      type
    };
    if (this.#position === -1) {
      if (this.#commands.length > 0) {
        this.#commands.length = 0;
      }
      this.#position = 0;
      this.#commands.push(save);
      return;
    }
    if (overwriteIfSameType && this.#commands[this.#position].type === type) {
      if (keepUndo) {
        save.undo = this.#commands[this.#position].undo;
      }
      this.#commands[this.#position] = save;
      return;
    }
    const next = this.#position + 1;
    if (next === this.#maxSize) {
      this.#commands.splice(0, 1);
    } else {
      this.#position = next;
      if (next < this.#commands.length) {
        this.#commands.splice(next);
      }
    }
    this.#commands.push(save);
  }
  undo() {
    if (this.#position === -1) {
      return;
    }
    this.#locked = true;
    const {
      undo,
      post
    } = this.#commands[this.#position];
    undo();
    post?.();
    this.#locked = false;
    this.#position -= 1;
  }
  redo() {
    if (this.#position < this.#commands.length - 1) {
      this.#position += 1;
      this.#locked = true;
      const {
        cmd,
        post
      } = this.#commands[this.#position];
      cmd();
      post?.();
      this.#locked = false;
    }
  }
  hasSomethingToUndo() {
    return this.#position !== -1;
  }
  hasSomethingToRedo() {
    return this.#position < this.#commands.length - 1;
  }
  cleanType(type) {
    if (this.#position === -1) {
      return;
    }
    for (let i = this.#position; i >= 0; i--) {
      if (this.#commands[i].type !== type) {
        this.#commands.splice(i + 1, this.#position - i);
        this.#position = i;
        return;
      }
    }
    this.#commands.length = 0;
    this.#position = -1;
  }
  destroy() {
    this.#commands = null;
  }
};
var KeyboardManager = class {
  constructor(callbacks) {
    this.buffer = [];
    this.callbacks = /* @__PURE__ */ new Map();
    this.allKeys = /* @__PURE__ */ new Set();
    const {
      isMac
    } = util_FeatureTest.platform;
    for (const [keys, callback, options = {}] of callbacks) {
      for (const key of keys) {
        const isMacKey = key.startsWith("mac+");
        if (isMac && isMacKey) {
          this.callbacks.set(key.slice(4), {
            callback,
            options
          });
          this.allKeys.add(key.split("+").at(-1));
        } else if (!isMac && !isMacKey) {
          this.callbacks.set(key, {
            callback,
            options
          });
          this.allKeys.add(key.split("+").at(-1));
        }
      }
    }
  }
  #serialize(event) {
    if (event.altKey) {
      this.buffer.push("alt");
    }
    if (event.ctrlKey) {
      this.buffer.push("ctrl");
    }
    if (event.metaKey) {
      this.buffer.push("meta");
    }
    if (event.shiftKey) {
      this.buffer.push("shift");
    }
    this.buffer.push(event.key);
    const str = this.buffer.join("+");
    this.buffer.length = 0;
    return str;
  }
  exec(self, event) {
    if (!this.allKeys.has(event.key)) {
      return;
    }
    const info2 = this.callbacks.get(this.#serialize(event));
    if (!info2) {
      return;
    }
    const {
      callback,
      options: {
        bubbles = false,
        args = [],
        checker = null
      }
    } = info2;
    if (checker && !checker(self, event)) {
      return;
    }
    callback.bind(self, ...args, event)();
    if (!bubbles) {
      stopEvent(event);
    }
  }
};
var ColorManager = class _ColorManager {
  static _colorsMapping = /* @__PURE__ */ new Map([["CanvasText", [0, 0, 0]], ["Canvas", [255, 255, 255]]]);
  get _colors() {
    const colors = /* @__PURE__ */ new Map([["CanvasText", null], ["Canvas", null]]);
    getColorValues(colors);
    return shadow(this, "_colors", colors);
  }
  convert(color) {
    const rgb = getRGB(color);
    if (!window.matchMedia("(forced-colors: active)").matches) {
      return rgb;
    }
    for (const [name, RGB] of this._colors) {
      if (RGB.every((x, i) => x === rgb[i])) {
        return _ColorManager._colorsMapping.get(name);
      }
    }
    return rgb;
  }
  getHexCode(name) {
    const rgb = this._colors.get(name);
    if (!rgb) {
      return name;
    }
    return Util.makeHexColor(...rgb);
  }
};
var AnnotationEditorUIManager = class _AnnotationEditorUIManager {
  #abortController = new AbortController();
  #activeEditor = null;
  #allEditors = /* @__PURE__ */ new Map();
  #allLayers = /* @__PURE__ */ new Map();
  #altTextManager = null;
  #annotationStorage = null;
  #changedExistingAnnotations = null;
  #commandManager = new CommandManager();
  #copyPasteAC = null;
  #currentDrawingSession = null;
  #currentPageIndex = 0;
  #deletedAnnotationsElementIds = /* @__PURE__ */ new Set();
  #draggingEditors = null;
  #editorTypes = null;
  #editorsToRescale = /* @__PURE__ */ new Set();
  _editorUndoBar = null;
  #enableHighlightFloatingButton = false;
  #enableUpdatedAddImage = false;
  #enableNewAltTextWhenAddingImage = false;
  #filterFactory = null;
  #focusMainContainerTimeoutId = null;
  #focusManagerAC = null;
  #highlightColors = null;
  #highlightWhenShiftUp = false;
  #highlightToolbar = null;
  #idManager = new IdManager();
  #isEnabled = false;
  #isWaiting = false;
  #keyboardManagerAC = null;
  #lastActiveElement = null;
  #mainHighlightColorPicker = null;
  #missingCanvases = null;
  #mlManager = null;
  #mode = AnnotationEditorType.NONE;
  #selectedEditors = /* @__PURE__ */ new Set();
  #selectedTextNode = null;
  #signatureManager = null;
  #pageColors = null;
  #showAllStates = null;
  #previousStates = {
    isEditing: false,
    isEmpty: true,
    hasSomethingToUndo: false,
    hasSomethingToRedo: false,
    hasSelectedEditor: false,
    hasSelectedText: false
  };
  #translation = [0, 0];
  #translationTimeoutId = null;
  #container = null;
  #viewer = null;
  #updateModeCapability = null;
  static TRANSLATE_SMALL = 1;
  static TRANSLATE_BIG = 10;
  static get _keyboardManager() {
    const proto = _AnnotationEditorUIManager.prototype;
    const arrowChecker = (self) => self.#container.contains(document.activeElement) && document.activeElement.tagName !== "BUTTON" && self.hasSomethingToControl();
    const textInputChecker = (_self, {
      target: el
    }) => {
      if (el instanceof HTMLInputElement) {
        const {
          type
        } = el;
        return type !== "text" && type !== "number";
      }
      return true;
    };
    const small = this.TRANSLATE_SMALL;
    const big = this.TRANSLATE_BIG;
    return shadow(this, "_keyboardManager", new KeyboardManager([[["ctrl+a", "mac+meta+a"], proto.selectAll, {
      checker: textInputChecker
    }], [["ctrl+z", "mac+meta+z"], proto.undo, {
      checker: textInputChecker
    }], [["ctrl+y", "ctrl+shift+z", "mac+meta+shift+z", "ctrl+shift+Z", "mac+meta+shift+Z"], proto.redo, {
      checker: textInputChecker
    }], [["Backspace", "alt+Backspace", "ctrl+Backspace", "shift+Backspace", "mac+Backspace", "mac+alt+Backspace", "mac+ctrl+Backspace", "Delete", "ctrl+Delete", "shift+Delete", "mac+Delete"], proto.delete, {
      checker: textInputChecker
    }], [["Enter", "mac+Enter"], proto.addNewEditorFromKeyboard, {
      checker: (self, {
        target: el
      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled
    }], [[" ", "mac+ "], proto.addNewEditorFromKeyboard, {
      checker: (self, {
        target: el
      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)
    }], [["Escape", "mac+Escape"], proto.unselectAll], [["ArrowLeft", "mac+ArrowLeft"], proto.translateSelectedEditors, {
      args: [-small, 0],
      checker: arrowChecker
    }], [["ctrl+ArrowLeft", "mac+shift+ArrowLeft"], proto.translateSelectedEditors, {
      args: [-big, 0],
      checker: arrowChecker
    }], [["ArrowRight", "mac+ArrowRight"], proto.translateSelectedEditors, {
      args: [small, 0],
      checker: arrowChecker
    }], [["ctrl+ArrowRight", "mac+shift+ArrowRight"], proto.translateSelectedEditors, {
      args: [big, 0],
      checker: arrowChecker
    }], [["ArrowUp", "mac+ArrowUp"], proto.translateSelectedEditors, {
      args: [0, -small],
      checker: arrowChecker
    }], [["ctrl+ArrowUp", "mac+shift+ArrowUp"], proto.translateSelectedEditors, {
      args: [0, -big],
      checker: arrowChecker
    }], [["ArrowDown", "mac+ArrowDown"], proto.translateSelectedEditors, {
      args: [0, small],
      checker: arrowChecker
    }], [["ctrl+ArrowDown", "mac+shift+ArrowDown"], proto.translateSelectedEditors, {
      args: [0, big],
      checker: arrowChecker
    }]]));
  }
  constructor(container2, viewer, altTextManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {
    const signal = this._signal = this.#abortController.signal;
    this.#container = container2;
    this.#viewer = viewer;
    this.#altTextManager = altTextManager;
    this.#signatureManager = signatureManager;
    this._eventBus = eventBus;
    eventBus._on("editingaction", this.onEditingAction.bind(this), {
      signal
    });
    eventBus._on("pagechanging", this.onPageChanging.bind(this), {
      signal
    });
    eventBus._on("scalechanging", this.onScaleChanging.bind(this), {
      signal
    });
    eventBus._on("rotationchanging", this.onRotationChanging.bind(this), {
      signal
    });
    eventBus._on("setpreference", this.onSetPreference.bind(this), {
      signal
    });
    eventBus._on("switchannotationeditorparams", (evt) => this.updateParams(evt.type, evt.value), {
      signal
    });
    this.#addSelectionListener();
    this.#addDragAndDropListeners();
    this.#addKeyboardManager();
    this.#annotationStorage = pdfDocument.annotationStorage;
    this.#filterFactory = pdfDocument.filterFactory;
    this.#pageColors = pageColors;
    this.#highlightColors = highlightColors || null;
    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;
    this.#enableUpdatedAddImage = enableUpdatedAddImage;
    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;
    this.#mlManager = mlManager || null;
    this.viewParameters = {
      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,
      rotation: 0
    };
    this.isShiftKeyDown = false;
    this._editorUndoBar = editorUndoBar || null;
    this._supportsPinchToZoom = supportsPinchToZoom !== false;
  }
  destroy() {
    this.#updateModeCapability?.resolve();
    this.#updateModeCapability = null;
    this.#abortController?.abort();
    this.#abortController = null;
    this._signal = null;
    for (const layer of this.#allLayers.values()) {
      layer.destroy();
    }
    this.#allLayers.clear();
    this.#allEditors.clear();
    this.#editorsToRescale.clear();
    this.#missingCanvases?.clear();
    this.#activeEditor = null;
    this.#selectedEditors.clear();
    this.#commandManager.destroy();
    this.#altTextManager?.destroy();
    this.#signatureManager?.destroy();
    this.#highlightToolbar?.hide();
    this.#highlightToolbar = null;
    this.#mainHighlightColorPicker?.destroy();
    this.#mainHighlightColorPicker = null;
    if (this.#focusMainContainerTimeoutId) {
      clearTimeout(this.#focusMainContainerTimeoutId);
      this.#focusMainContainerTimeoutId = null;
    }
    if (this.#translationTimeoutId) {
      clearTimeout(this.#translationTimeoutId);
      this.#translationTimeoutId = null;
    }
    this._editorUndoBar?.destroy();
  }
  combinedSignal(ac) {
    return AbortSignal.any([this._signal, ac.signal]);
  }
  get mlManager() {
    return this.#mlManager;
  }
  get useNewAltTextFlow() {
    return this.#enableUpdatedAddImage;
  }
  get useNewAltTextWhenAddingImage() {
    return this.#enableNewAltTextWhenAddingImage;
  }
  get hcmFilter() {
    return shadow(this, "hcmFilter", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : "none");
  }
  get direction() {
    return shadow(this, "direction", getComputedStyle(this.#container).direction);
  }
  get highlightColors() {
    return shadow(this, "highlightColors", this.#highlightColors ? new Map(this.#highlightColors.split(",").map((pair) => pair.split("=").map((x) => x.trim()))) : null);
  }
  get highlightColorNames() {
    return shadow(this, "highlightColorNames", this.highlightColors ? new Map(Array.from(this.highlightColors, (e) => e.reverse())) : null);
  }
  setCurrentDrawingSession(layer) {
    if (layer) {
      this.unselectAll();
      this.disableUserSelect(true);
    } else {
      this.disableUserSelect(false);
    }
    this.#currentDrawingSession = layer;
  }
  setMainHighlightColorPicker(colorPicker) {
    this.#mainHighlightColorPicker = colorPicker;
  }
  editAltText(editor, firstTime = false) {
    this.#altTextManager?.editAltText(this, editor, firstTime);
  }
  getSignature(editor) {
    this.#signatureManager?.getSignature({
      uiManager: this,
      editor
    });
  }
  get signatureManager() {
    return this.#signatureManager;
  }
  switchToMode(mode, callback) {
    this._eventBus.on("annotationeditormodechanged", callback, {
      once: true,
      signal: this._signal
    });
    this._eventBus.dispatch("showannotationeditorui", {
      source: this,
      mode
    });
  }
  setPreference(name, value) {
    this._eventBus.dispatch("setpreference", {
      source: this,
      name,
      value
    });
  }
  onSetPreference({
    name,
    value
  }) {
    switch (name) {
      case "enableNewAltTextWhenAddingImage":
        this.#enableNewAltTextWhenAddingImage = value;
        break;
    }
  }
  onPageChanging({
    pageNumber
  }) {
    this.#currentPageIndex = pageNumber - 1;
  }
  focusMainContainer() {
    this.#container.focus();
  }
  findParent(x, y) {
    for (const layer of this.#allLayers.values()) {
      const {
        x: layerX,
        y: layerY,
        width,
        height
      } = layer.div.getBoundingClientRect();
      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {
        return layer;
      }
    }
    return null;
  }
  disableUserSelect(value = false) {
    this.#viewer.classList.toggle("noUserSelect", value);
  }
  addShouldRescale(editor) {
    this.#editorsToRescale.add(editor);
  }
  removeShouldRescale(editor) {
    this.#editorsToRescale.delete(editor);
  }
  onScaleChanging({
    scale
  }) {
    this.commitOrRemove();
    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;
    for (const editor of this.#editorsToRescale) {
      editor.onScaleChanging();
    }
    this.#currentDrawingSession?.onScaleChanging();
  }
  onRotationChanging({
    pagesRotation
  }) {
    this.commitOrRemove();
    this.viewParameters.rotation = pagesRotation;
  }
  #getAnchorElementForSelection({
    anchorNode
  }) {
    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;
  }
  #getLayerForTextLayer(textLayer) {
    const {
      currentLayer
    } = this;
    if (currentLayer.hasTextLayer(textLayer)) {
      return currentLayer;
    }
    for (const layer of this.#allLayers.values()) {
      if (layer.hasTextLayer(textLayer)) {
        return layer;
      }
    }
    return null;
  }
  highlightSelection(methodOfCreation = "") {
    const selection = document.getSelection();
    if (!selection || selection.isCollapsed) {
      return;
    }
    const {
      anchorNode,
      anchorOffset,
      focusNode,
      focusOffset
    } = selection;
    const text = selection.toString();
    const anchorElement = this.#getAnchorElementForSelection(selection);
    const textLayer = anchorElement.closest(".textLayer");
    const boxes = this.getSelectionBoxes(textLayer);
    if (!boxes) {
      return;
    }
    selection.empty();
    const layer = this.#getLayerForTextLayer(textLayer);
    const isNoneMode = this.#mode === AnnotationEditorType.NONE;
    const callback = () => {
      layer?.createAndAddNewEditor({
        x: 0,
        y: 0
      }, false, {
        methodOfCreation,
        boxes,
        anchorNode,
        anchorOffset,
        focusNode,
        focusOffset,
        text
      });
      if (isNoneMode) {
        this.showAllEditors("highlight", true, true);
      }
    };
    if (isNoneMode) {
      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);
      return;
    }
    callback();
  }
  #displayHighlightToolbar() {
    const selection = document.getSelection();
    if (!selection || selection.isCollapsed) {
      return;
    }
    const anchorElement = this.#getAnchorElementForSelection(selection);
    const textLayer = anchorElement.closest(".textLayer");
    const boxes = this.getSelectionBoxes(textLayer);
    if (!boxes) {
      return;
    }
    this.#highlightToolbar ||= new HighlightToolbar(this);
    this.#highlightToolbar.show(textLayer, boxes, this.direction === "ltr");
  }
  addToAnnotationStorage(editor) {
    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {
      this.#annotationStorage.setValue(editor.id, editor);
    }
  }
  #selectionChange() {
    const selection = document.getSelection();
    if (!selection || selection.isCollapsed) {
      if (this.#selectedTextNode) {
        this.#highlightToolbar?.hide();
        this.#selectedTextNode = null;
        this.#dispatchUpdateStates({
          hasSelectedText: false
        });
      }
      return;
    }
    const {
      anchorNode
    } = selection;
    if (anchorNode === this.#selectedTextNode) {
      return;
    }
    const anchorElement = this.#getAnchorElementForSelection(selection);
    const textLayer = anchorElement.closest(".textLayer");
    if (!textLayer) {
      if (this.#selectedTextNode) {
        this.#highlightToolbar?.hide();
        this.#selectedTextNode = null;
        this.#dispatchUpdateStates({
          hasSelectedText: false
        });
      }
      return;
    }
    this.#highlightToolbar?.hide();
    this.#selectedTextNode = anchorNode;
    this.#dispatchUpdateStates({
      hasSelectedText: true
    });
    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {
      return;
    }
    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {
      this.showAllEditors("highlight", true, true);
    }
    this.#highlightWhenShiftUp = this.isShiftKeyDown;
    if (!this.isShiftKeyDown) {
      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;
      activeLayer?.toggleDrawing();
      const ac = new AbortController();
      const signal = this.combinedSignal(ac);
      const pointerup = (e) => {
        if (e.type === "pointerup" && e.button !== 0) {
          return;
        }
        ac.abort();
        activeLayer?.toggleDrawing(true);
        if (e.type === "pointerup") {
          this.#onSelectEnd("main_toolbar");
        }
      };
      window.addEventListener("pointerup", pointerup, {
        signal
      });
      window.addEventListener("blur", pointerup, {
        signal
      });
    }
  }
  #onSelectEnd(methodOfCreation = "") {
    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {
      this.highlightSelection(methodOfCreation);
    } else if (this.#enableHighlightFloatingButton) {
      this.#displayHighlightToolbar();
    }
  }
  #addSelectionListener() {
    document.addEventListener("selectionchange", this.#selectionChange.bind(this), {
      signal: this._signal
    });
  }
  #addFocusManager() {
    if (this.#focusManagerAC) {
      return;
    }
    this.#focusManagerAC = new AbortController();
    const signal = this.combinedSignal(this.#focusManagerAC);
    window.addEventListener("focus", this.focus.bind(this), {
      signal
    });
    window.addEventListener("blur", this.blur.bind(this), {
      signal
    });
  }
  #removeFocusManager() {
    this.#focusManagerAC?.abort();
    this.#focusManagerAC = null;
  }
  blur() {
    this.isShiftKeyDown = false;
    if (this.#highlightWhenShiftUp) {
      this.#highlightWhenShiftUp = false;
      this.#onSelectEnd("main_toolbar");
    }
    if (!this.hasSelection) {
      return;
    }
    const {
      activeElement
    } = document;
    for (const editor of this.#selectedEditors) {
      if (editor.div.contains(activeElement)) {
        this.#lastActiveElement = [editor, activeElement];
        editor._focusEventsAllowed = false;
        break;
      }
    }
  }
  focus() {
    if (!this.#lastActiveElement) {
      return;
    }
    const [lastEditor, lastActiveElement] = this.#lastActiveElement;
    this.#lastActiveElement = null;
    lastActiveElement.addEventListener("focusin", () => {
      lastEditor._focusEventsAllowed = true;
    }, {
      once: true,
      signal: this._signal
    });
    lastActiveElement.focus();
  }
  #addKeyboardManager() {
    if (this.#keyboardManagerAC) {
      return;
    }
    this.#keyboardManagerAC = new AbortController();
    const signal = this.combinedSignal(this.#keyboardManagerAC);
    window.addEventListener("keydown", this.keydown.bind(this), {
      signal
    });
    window.addEventListener("keyup", this.keyup.bind(this), {
      signal
    });
  }
  #removeKeyboardManager() {
    this.#keyboardManagerAC?.abort();
    this.#keyboardManagerAC = null;
  }
  #addCopyPasteListeners() {
    if (this.#copyPasteAC) {
      return;
    }
    this.#copyPasteAC = new AbortController();
    const signal = this.combinedSignal(this.#copyPasteAC);
    document.addEventListener("copy", this.copy.bind(this), {
      signal
    });
    document.addEventListener("cut", this.cut.bind(this), {
      signal
    });
    document.addEventListener("paste", this.paste.bind(this), {
      signal
    });
  }
  #removeCopyPasteListeners() {
    this.#copyPasteAC?.abort();
    this.#copyPasteAC = null;
  }
  #addDragAndDropListeners() {
    const signal = this._signal;
    document.addEventListener("dragover", this.dragOver.bind(this), {
      signal
    });
    document.addEventListener("drop", this.drop.bind(this), {
      signal
    });
  }
  addEditListeners() {
    this.#addKeyboardManager();
    this.#addCopyPasteListeners();
  }
  removeEditListeners() {
    this.#removeKeyboardManager();
    this.#removeCopyPasteListeners();
  }
  dragOver(event) {
    for (const {
      type
    } of event.dataTransfer.items) {
      for (const editorType of this.#editorTypes) {
        if (editorType.isHandlingMimeForPasting(type)) {
          event.dataTransfer.dropEffect = "copy";
          event.preventDefault();
          return;
        }
      }
    }
  }
  drop(event) {
    for (const item of event.dataTransfer.items) {
      for (const editorType of this.#editorTypes) {
        if (editorType.isHandlingMimeForPasting(item.type)) {
          editorType.paste(item, this.currentLayer);
          event.preventDefault();
          return;
        }
      }
    }
  }
  copy(event) {
    event.preventDefault();
    this.#activeEditor?.commitOrRemove();
    if (!this.hasSelection) {
      return;
    }
    const editors = [];
    for (const editor of this.#selectedEditors) {
      const serialized = editor.serialize(true);
      if (serialized) {
        editors.push(serialized);
      }
    }
    if (editors.length === 0) {
      return;
    }
    event.clipboardData.setData("application/pdfjs", JSON.stringify(editors));
  }
  cut(event) {
    this.copy(event);
    this.delete();
  }
  async paste(event) {
    event.preventDefault();
    const {
      clipboardData
    } = event;
    for (const item of clipboardData.items) {
      for (const editorType of this.#editorTypes) {
        if (editorType.isHandlingMimeForPasting(item.type)) {
          editorType.paste(item, this.currentLayer);
          return;
        }
      }
    }
    let data = clipboardData.getData("application/pdfjs");
    if (!data) {
      return;
    }
    try {
      data = JSON.parse(data);
    } catch (ex) {
      warn(`paste: "${ex.message}".`);
      return;
    }
    if (!Array.isArray(data)) {
      return;
    }
    this.unselectAll();
    const layer = this.currentLayer;
    try {
      const newEditors = [];
      for (const editor of data) {
        const deserializedEditor = await layer.deserialize(editor);
        if (!deserializedEditor) {
          return;
        }
        newEditors.push(deserializedEditor);
      }
      const cmd = () => {
        for (const editor of newEditors) {
          this.#addEditorToLayer(editor);
        }
        this.#selectEditors(newEditors);
      };
      const undo = () => {
        for (const editor of newEditors) {
          editor.remove();
        }
      };
      this.addCommands({
        cmd,
        undo,
        mustExec: true
      });
    } catch (ex) {
      warn(`paste: "${ex.message}".`);
    }
  }
  keydown(event) {
    if (!this.isShiftKeyDown && event.key === "Shift") {
      this.isShiftKeyDown = true;
    }
    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {
      _AnnotationEditorUIManager._keyboardManager.exec(this, event);
    }
  }
  keyup(event) {
    if (this.isShiftKeyDown && event.key === "Shift") {
      this.isShiftKeyDown = false;
      if (this.#highlightWhenShiftUp) {
        this.#highlightWhenShiftUp = false;
        this.#onSelectEnd("main_toolbar");
      }
    }
  }
  onEditingAction({
    name
  }) {
    switch (name) {
      case "undo":
      case "redo":
      case "delete":
      case "selectAll":
        this[name]();
        break;
      case "highlightSelection":
        this.highlightSelection("context_menu");
        break;
    }
  }
  #dispatchUpdateStates(details) {
    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);
    if (hasChanged) {
      this._eventBus.dispatch("annotationeditorstateschanged", {
        source: this,
        details: Object.assign(this.#previousStates, details)
      });
      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {
        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);
      }
    }
  }
  #dispatchUpdateUI(details) {
    this._eventBus.dispatch("annotationeditorparamschanged", {
      source: this,
      details
    });
  }
  setEditingState(isEditing) {
    if (isEditing) {
      this.#addFocusManager();
      this.#addCopyPasteListeners();
      this.#dispatchUpdateStates({
        isEditing: this.#mode !== AnnotationEditorType.NONE,
        isEmpty: this.#isEmpty(),
        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),
        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),
        hasSelectedEditor: false
      });
    } else {
      this.#removeFocusManager();
      this.#removeCopyPasteListeners();
      this.#dispatchUpdateStates({
        isEditing: false
      });
      this.disableUserSelect(false);
    }
  }
  registerEditorTypes(types) {
    if (this.#editorTypes) {
      return;
    }
    this.#editorTypes = types;
    for (const editorType of this.#editorTypes) {
      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);
    }
  }
  getId() {
    return this.#idManager.id;
  }
  get currentLayer() {
    return this.#allLayers.get(this.#currentPageIndex);
  }
  getLayer(pageIndex) {
    return this.#allLayers.get(pageIndex);
  }
  get currentPageIndex() {
    return this.#currentPageIndex;
  }
  addLayer(layer) {
    this.#allLayers.set(layer.pageIndex, layer);
    if (this.#isEnabled) {
      layer.enable();
    } else {
      layer.disable();
    }
  }
  removeLayer(layer) {
    this.#allLayers.delete(layer.pageIndex);
  }
  async updateMode(mode, editId = null, isFromKeyboard = false) {
    if (this.#mode === mode) {
      return;
    }
    if (this.#updateModeCapability) {
      await this.#updateModeCapability.promise;
      if (!this.#updateModeCapability) {
        return;
      }
    }
    this.#updateModeCapability = Promise.withResolvers();
    this.#mode = mode;
    if (mode === AnnotationEditorType.NONE) {
      this.setEditingState(false);
      this.#disableAll();
      this._editorUndoBar?.hide();
      this.#updateModeCapability.resolve();
      return;
    }
    if (mode === AnnotationEditorType.SIGNATURE) {
      await this.#signatureManager?.loadSignatures();
    }
    this.setEditingState(true);
    await this.#enableAll();
    this.unselectAll();
    for (const layer of this.#allLayers.values()) {
      layer.updateMode(mode);
    }
    if (!editId) {
      if (isFromKeyboard) {
        this.addNewEditorFromKeyboard();
      }
      this.#updateModeCapability.resolve();
      return;
    }
    for (const editor of this.#allEditors.values()) {
      if (editor.annotationElementId === editId) {
        this.setSelected(editor);
        editor.enterInEditMode();
      } else {
        editor.unselect();
      }
    }
    this.#updateModeCapability.resolve();
  }
  addNewEditorFromKeyboard() {
    if (this.currentLayer.canCreateNewEmptyEditor()) {
      this.currentLayer.addNewEditor();
    }
  }
  updateToolbar(mode) {
    if (mode === this.#mode) {
      return;
    }
    this._eventBus.dispatch("switchannotationeditormode", {
      source: this,
      mode
    });
  }
  updateParams(type, value) {
    if (!this.#editorTypes) {
      return;
    }
    switch (type) {
      case AnnotationEditorParamsType.CREATE:
        this.currentLayer.addNewEditor(value);
        return;
      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:
        this.#mainHighlightColorPicker?.updateColor(value);
        break;
      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:
        this._eventBus.dispatch("reporttelemetry", {
          source: this,
          details: {
            type: "editing",
            data: {
              type: "highlight",
              action: "toggle_visibility"
            }
          }
        });
        (this.#showAllStates ||= /* @__PURE__ */ new Map()).set(type, value);
        this.showAllEditors("highlight", value);
        break;
    }
    for (const editor of this.#selectedEditors) {
      editor.updateParams(type, value);
    }
    for (const editorType of this.#editorTypes) {
      editorType.updateDefaultParams(type, value);
    }
  }
  showAllEditors(type, visible, updateButton = false) {
    for (const editor of this.#allEditors.values()) {
      if (editor.editorType === type) {
        editor.show(visible);
      }
    }
    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;
    if (state !== visible) {
      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);
    }
  }
  enableWaiting(mustWait = false) {
    if (this.#isWaiting === mustWait) {
      return;
    }
    this.#isWaiting = mustWait;
    for (const layer of this.#allLayers.values()) {
      if (mustWait) {
        layer.disableClick();
      } else {
        layer.enableClick();
      }
      layer.div.classList.toggle("waiting", mustWait);
    }
  }
  async #enableAll() {
    if (!this.#isEnabled) {
      this.#isEnabled = true;
      const promises = [];
      for (const layer of this.#allLayers.values()) {
        promises.push(layer.enable());
      }
      await Promise.all(promises);
      for (const editor of this.#allEditors.values()) {
        editor.enable();
      }
    }
  }
  #disableAll() {
    this.unselectAll();
    if (this.#isEnabled) {
      this.#isEnabled = false;
      for (const layer of this.#allLayers.values()) {
        layer.disable();
      }
      for (const editor of this.#allEditors.values()) {
        editor.disable();
      }
    }
  }
  getEditors(pageIndex) {
    const editors = [];
    for (const editor of this.#allEditors.values()) {
      if (editor.pageIndex === pageIndex) {
        editors.push(editor);
      }
    }
    return editors;
  }
  getEditor(id) {
    return this.#allEditors.get(id);
  }
  addEditor(editor) {
    this.#allEditors.set(editor.id, editor);
  }
  removeEditor(editor) {
    if (editor.div.contains(document.activeElement)) {
      if (this.#focusMainContainerTimeoutId) {
        clearTimeout(this.#focusMainContainerTimeoutId);
      }
      this.#focusMainContainerTimeoutId = setTimeout(() => {
        this.focusMainContainer();
        this.#focusMainContainerTimeoutId = null;
      }, 0);
    }
    this.#allEditors.delete(editor.id);
    if (editor.annotationElementId) {
      this.#missingCanvases?.delete(editor.annotationElementId);
    }
    this.unselect(editor);
    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {
      this.#annotationStorage?.remove(editor.id);
    }
  }
  addDeletedAnnotationElement(editor) {
    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);
    this.addChangedExistingAnnotation(editor);
    editor.deleted = true;
  }
  isDeletedAnnotationElement(annotationElementId) {
    return this.#deletedAnnotationsElementIds.has(annotationElementId);
  }
  removeDeletedAnnotationElement(editor) {
    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);
    this.removeChangedExistingAnnotation(editor);
    editor.deleted = false;
  }
  #addEditorToLayer(editor) {
    const layer = this.#allLayers.get(editor.pageIndex);
    if (layer) {
      layer.addOrRebuild(editor);
    } else {
      this.addEditor(editor);
      this.addToAnnotationStorage(editor);
    }
  }
  setActiveEditor(editor) {
    if (this.#activeEditor === editor) {
      return;
    }
    this.#activeEditor = editor;
    if (editor) {
      this.#dispatchUpdateUI(editor.propertiesToUpdate);
    }
  }
  get #lastSelectedEditor() {
    let ed = null;
    for (ed of this.#selectedEditors) {
    }
    return ed;
  }
  updateUI(editor) {
    if (this.#lastSelectedEditor === editor) {
      this.#dispatchUpdateUI(editor.propertiesToUpdate);
    }
  }
  updateUIForDefaultProperties(editorType) {
    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);
  }
  toggleSelected(editor) {
    if (this.#selectedEditors.has(editor)) {
      this.#selectedEditors.delete(editor);
      editor.unselect();
      this.#dispatchUpdateStates({
        hasSelectedEditor: this.hasSelection
      });
      return;
    }
    this.#selectedEditors.add(editor);
    editor.select();
    this.#dispatchUpdateUI(editor.propertiesToUpdate);
    this.#dispatchUpdateStates({
      hasSelectedEditor: true
    });
  }
  setSelected(editor) {
    this.#currentDrawingSession?.commitOrRemove();
    for (const ed of this.#selectedEditors) {
      if (ed !== editor) {
        ed.unselect();
      }
    }
    this.#selectedEditors.clear();
    this.#selectedEditors.add(editor);
    editor.select();
    this.#dispatchUpdateUI(editor.propertiesToUpdate);
    this.#dispatchUpdateStates({
      hasSelectedEditor: true
    });
  }
  isSelected(editor) {
    return this.#selectedEditors.has(editor);
  }
  get firstSelectedEditor() {
    return this.#selectedEditors.values().next().value;
  }
  unselect(editor) {
    editor.unselect();
    this.#selectedEditors.delete(editor);
    this.#dispatchUpdateStates({
      hasSelectedEditor: this.hasSelection
    });
  }
  get hasSelection() {
    return this.#selectedEditors.size !== 0;
  }
  get isEnterHandled() {
    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;
  }
  undo() {
    this.#commandManager.undo();
    this.#dispatchUpdateStates({
      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),
      hasSomethingToRedo: true,
      isEmpty: this.#isEmpty()
    });
    this._editorUndoBar?.hide();
  }
  redo() {
    this.#commandManager.redo();
    this.#dispatchUpdateStates({
      hasSomethingToUndo: true,
      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),
      isEmpty: this.#isEmpty()
    });
  }
  addCommands(params) {
    this.#commandManager.add(params);
    this.#dispatchUpdateStates({
      hasSomethingToUndo: true,
      hasSomethingToRedo: false,
      isEmpty: this.#isEmpty()
    });
  }
  cleanUndoStack(type) {
    this.#commandManager.cleanType(type);
  }
  #isEmpty() {
    if (this.#allEditors.size === 0) {
      return true;
    }
    if (this.#allEditors.size === 1) {
      for (const editor of this.#allEditors.values()) {
        return editor.isEmpty();
      }
    }
    return false;
  }
  delete() {
    this.commitOrRemove();
    const drawingEditor = this.currentLayer?.endDrawingSession(true);
    if (!this.hasSelection && !drawingEditor) {
      return;
    }
    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];
    const cmd = () => {
      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);
      for (const editor of editors) {
        editor.remove();
      }
    };
    const undo = () => {
      for (const editor of editors) {
        this.#addEditorToLayer(editor);
      }
    };
    this.addCommands({
      cmd,
      undo,
      mustExec: true
    });
  }
  commitOrRemove() {
    this.#activeEditor?.commitOrRemove();
  }
  hasSomethingToControl() {
    return this.#activeEditor || this.hasSelection;
  }
  #selectEditors(editors) {
    for (const editor of this.#selectedEditors) {
      editor.unselect();
    }
    this.#selectedEditors.clear();
    for (const editor of editors) {
      if (editor.isEmpty()) {
        continue;
      }
      this.#selectedEditors.add(editor);
      editor.select();
    }
    this.#dispatchUpdateStates({
      hasSelectedEditor: this.hasSelection
    });
  }
  selectAll() {
    for (const editor of this.#selectedEditors) {
      editor.commit();
    }
    this.#selectEditors(this.#allEditors.values());
  }
  unselectAll() {
    if (this.#activeEditor) {
      this.#activeEditor.commitOrRemove();
      if (this.#mode !== AnnotationEditorType.NONE) {
        return;
      }
    }
    if (this.#currentDrawingSession?.commitOrRemove()) {
      return;
    }
    if (!this.hasSelection) {
      return;
    }
    for (const editor of this.#selectedEditors) {
      editor.unselect();
    }
    this.#selectedEditors.clear();
    this.#dispatchUpdateStates({
      hasSelectedEditor: false
    });
  }
  translateSelectedEditors(x, y, noCommit = false) {
    if (!noCommit) {
      this.commitOrRemove();
    }
    if (!this.hasSelection) {
      return;
    }
    this.#translation[0] += x;
    this.#translation[1] += y;
    const [totalX, totalY] = this.#translation;
    const editors = [...this.#selectedEditors];
    const TIME_TO_WAIT = 1e3;
    if (this.#translationTimeoutId) {
      clearTimeout(this.#translationTimeoutId);
    }
    this.#translationTimeoutId = setTimeout(() => {
      this.#translationTimeoutId = null;
      this.#translation[0] = this.#translation[1] = 0;
      this.addCommands({
        cmd: () => {
          for (const editor of editors) {
            if (this.#allEditors.has(editor.id)) {
              editor.translateInPage(totalX, totalY);
              editor.translationDone();
            }
          }
        },
        undo: () => {
          for (const editor of editors) {
            if (this.#allEditors.has(editor.id)) {
              editor.translateInPage(-totalX, -totalY);
              editor.translationDone();
            }
          }
        },
        mustExec: false
      });
    }, TIME_TO_WAIT);
    for (const editor of editors) {
      editor.translateInPage(x, y);
      editor.translationDone();
    }
  }
  setUpDragSession() {
    if (!this.hasSelection) {
      return;
    }
    this.disableUserSelect(true);
    this.#draggingEditors = /* @__PURE__ */ new Map();
    for (const editor of this.#selectedEditors) {
      this.#draggingEditors.set(editor, {
        savedX: editor.x,
        savedY: editor.y,
        savedPageIndex: editor.pageIndex,
        newX: 0,
        newY: 0,
        newPageIndex: -1
      });
    }
  }
  endDragSession() {
    if (!this.#draggingEditors) {
      return false;
    }
    this.disableUserSelect(false);
    const map = this.#draggingEditors;
    this.#draggingEditors = null;
    let mustBeAddedInUndoStack = false;
    for (const [{
      x,
      y,
      pageIndex
    }, value] of map) {
      value.newX = x;
      value.newY = y;
      value.newPageIndex = pageIndex;
      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;
    }
    if (!mustBeAddedInUndoStack) {
      return false;
    }
    const move = (editor, x, y, pageIndex) => {
      if (this.#allEditors.has(editor.id)) {
        const parent = this.#allLayers.get(pageIndex);
        if (parent) {
          editor._setParentAndPosition(parent, x, y);
        } else {
          editor.pageIndex = pageIndex;
          editor.x = x;
          editor.y = y;
        }
      }
    };
    this.addCommands({
      cmd: () => {
        for (const [editor, {
          newX,
          newY,
          newPageIndex
        }] of map) {
          move(editor, newX, newY, newPageIndex);
        }
      },
      undo: () => {
        for (const [editor, {
          savedX,
          savedY,
          savedPageIndex
        }] of map) {
          move(editor, savedX, savedY, savedPageIndex);
        }
      },
      mustExec: true
    });
    return true;
  }
  dragSelectedEditors(tx, ty) {
    if (!this.#draggingEditors) {
      return;
    }
    for (const editor of this.#draggingEditors.keys()) {
      editor.drag(tx, ty);
    }
  }
  rebuild(editor) {
    if (editor.parent === null) {
      const parent = this.getLayer(editor.pageIndex);
      if (parent) {
        parent.changeParent(editor);
        parent.addOrRebuild(editor);
      } else {
        this.addEditor(editor);
        this.addToAnnotationStorage(editor);
        editor.rebuild();
      }
    } else {
      editor.parent.addOrRebuild(editor);
    }
  }
  get isEditorHandlingKeyboard() {
    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();
  }
  isActive(editor) {
    return this.#activeEditor === editor;
  }
  getActive() {
    return this.#activeEditor;
  }
  getMode() {
    return this.#mode;
  }
  get imageManager() {
    return shadow(this, "imageManager", new ImageManager());
  }
  getSelectionBoxes(textLayer) {
    if (!textLayer) {
      return null;
    }
    const selection = document.getSelection();
    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {
      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {
        return null;
      }
    }
    const {
      x: layerX,
      y: layerY,
      width: parentWidth,
      height: parentHeight
    } = textLayer.getBoundingClientRect();
    let rotator;
    switch (textLayer.getAttribute("data-main-rotation")) {
      case "90":
        rotator = (x, y, w, h) => ({
          x: (y - layerY) / parentHeight,
          y: 1 - (x + w - layerX) / parentWidth,
          width: h / parentHeight,
          height: w / parentWidth
        });
        break;
      case "180":
        rotator = (x, y, w, h) => ({
          x: 1 - (x + w - layerX) / parentWidth,
          y: 1 - (y + h - layerY) / parentHeight,
          width: w / parentWidth,
          height: h / parentHeight
        });
        break;
      case "270":
        rotator = (x, y, w, h) => ({
          x: 1 - (y + h - layerY) / parentHeight,
          y: (x - layerX) / parentWidth,
          width: h / parentHeight,
          height: w / parentWidth
        });
        break;
      default:
        rotator = (x, y, w, h) => ({
          x: (x - layerX) / parentWidth,
          y: (y - layerY) / parentHeight,
          width: w / parentWidth,
          height: h / parentHeight
        });
        break;
    }
    const boxes = [];
    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {
      const range = selection.getRangeAt(i);
      if (range.collapsed) {
        continue;
      }
      for (const {
        x,
        y,
        width,
        height
      } of range.getClientRects()) {
        if (width === 0 || height === 0) {
          continue;
        }
        boxes.push(rotator(x, y, width, height));
      }
    }
    return boxes.length === 0 ? null : boxes;
  }
  addChangedExistingAnnotation({
    annotationElementId,
    id
  }) {
    (this.#changedExistingAnnotations ||= /* @__PURE__ */ new Map()).set(annotationElementId, id);
  }
  removeChangedExistingAnnotation({
    annotationElementId
  }) {
    this.#changedExistingAnnotations?.delete(annotationElementId);
  }
  renderAnnotationElement(annotation) {
    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);
    if (!editorId) {
      return;
    }
    const editor = this.#annotationStorage.getRawValue(editorId);
    if (!editor) {
      return;
    }
    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {
      return;
    }
    editor.renderAnnotationElement(annotation);
  }
  setMissingCanvas(annotationId, annotationElementId, canvas2) {
    const editor = this.#missingCanvases?.get(annotationId);
    if (!editor) {
      return;
    }
    editor.setCanvas(annotationElementId, canvas2);
    this.#missingCanvases.delete(annotationId);
  }
  addMissingCanvas(annotationId, editor) {
    (this.#missingCanvases ||= /* @__PURE__ */ new Map()).set(annotationId, editor);
  }
};
var AltText = class _AltText {
  #altText = null;
  #altTextDecorative = false;
  #altTextButton = null;
  #altTextButtonLabel = null;
  #altTextTooltip = null;
  #altTextTooltipTimeout = null;
  #altTextWasFromKeyBoard = false;
  #badge = null;
  #editor = null;
  #guessedText = null;
  #textWithDisclaimer = null;
  #useNewAltTextFlow = false;
  static #l10nNewButton = null;
  static _l10n = null;
  constructor(editor) {
    this.#editor = editor;
    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;
    _AltText.#l10nNewButton ||= Object.freeze({
      added: "pdfjs-editor-new-alt-text-added-button",
      "added-label": "pdfjs-editor-new-alt-text-added-button-label",
      missing: "pdfjs-editor-new-alt-text-missing-button",
      "missing-label": "pdfjs-editor-new-alt-text-missing-button-label",
      review: "pdfjs-editor-new-alt-text-to-review-button",
      "review-label": "pdfjs-editor-new-alt-text-to-review-button-label"
    });
  }
  static initialize(l10n) {
    _AltText._l10n ??= l10n;
  }
  async render() {
    const altText = this.#altTextButton = document.createElement("button");
    altText.className = "altText";
    altText.tabIndex = "0";
    const label = this.#altTextButtonLabel = document.createElement("span");
    altText.append(label);
    if (this.#useNewAltTextFlow) {
      altText.classList.add("new");
      altText.setAttribute("data-l10n-id", _AltText.#l10nNewButton.missing);
      label.setAttribute("data-l10n-id", _AltText.#l10nNewButton["missing-label"]);
    } else {
      altText.setAttribute("data-l10n-id", "pdfjs-editor-alt-text-button");
      label.setAttribute("data-l10n-id", "pdfjs-editor-alt-text-button-label");
    }
    const signal = this.#editor._uiManager._signal;
    altText.addEventListener("contextmenu", noContextMenu, {
      signal
    });
    altText.addEventListener("pointerdown", (event) => event.stopPropagation(), {
      signal
    });
    const onClick = (event) => {
      event.preventDefault();
      this.#editor._uiManager.editAltText(this.#editor);
      if (this.#useNewAltTextFlow) {
        this.#editor._reportTelemetry({
          action: "pdfjs.image.alt_text.image_status_label_clicked",
          data: {
            label: this.#label
          }
        });
      }
    };
    altText.addEventListener("click", onClick, {
      capture: true,
      signal
    });
    altText.addEventListener("keydown", (event) => {
      if (event.target === altText && event.key === "Enter") {
        this.#altTextWasFromKeyBoard = true;
        onClick(event);
      }
    }, {
      signal
    });
    await this.#setState();
    return altText;
  }
  get #label() {
    return this.#altText && "added" || this.#altText === null && this.guessedText && "review" || "missing";
  }
  finish() {
    if (!this.#altTextButton) {
      return;
    }
    this.#altTextButton.focus({
      focusVisible: this.#altTextWasFromKeyBoard
    });
    this.#altTextWasFromKeyBoard = false;
  }
  isEmpty() {
    if (this.#useNewAltTextFlow) {
      return this.#altText === null;
    }
    return !this.#altText && !this.#altTextDecorative;
  }
  hasData() {
    if (this.#useNewAltTextFlow) {
      return this.#altText !== null || !!this.#guessedText;
    }
    return this.isEmpty();
  }
  get guessedText() {
    return this.#guessedText;
  }
  async setGuessedText(guessedText) {
    if (this.#altText !== null) {
      return;
    }
    this.#guessedText = guessedText;
    this.#textWithDisclaimer = await _AltText._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer", {
      generatedAltText: guessedText
    });
    this.#setState();
  }
  toggleAltTextBadge(visibility = false) {
    if (!this.#useNewAltTextFlow || this.#altText) {
      this.#badge?.remove();
      this.#badge = null;
      return;
    }
    if (!this.#badge) {
      const badge = this.#badge = document.createElement("div");
      badge.className = "noAltTextBadge";
      this.#editor.div.append(badge);
    }
    this.#badge.classList.toggle("hidden", !visibility);
  }
  serialize(isForCopying) {
    let altText = this.#altText;
    if (!isForCopying && this.#guessedText === altText) {
      altText = this.#textWithDisclaimer;
    }
    return {
      altText,
      decorative: this.#altTextDecorative,
      guessedText: this.#guessedText,
      textWithDisclaimer: this.#textWithDisclaimer
    };
  }
  get data() {
    return {
      altText: this.#altText,
      decorative: this.#altTextDecorative
    };
  }
  set data({
    altText,
    decorative,
    guessedText,
    textWithDisclaimer,
    cancel = false
  }) {
    if (guessedText) {
      this.#guessedText = guessedText;
      this.#textWithDisclaimer = textWithDisclaimer;
    }
    if (this.#altText === altText && this.#altTextDecorative === decorative) {
      return;
    }
    if (!cancel) {
      this.#altText = altText;
      this.#altTextDecorative = decorative;
    }
    this.#setState();
  }
  toggle(enabled = false) {
    if (!this.#altTextButton) {
      return;
    }
    if (!enabled && this.#altTextTooltipTimeout) {
      clearTimeout(this.#altTextTooltipTimeout);
      this.#altTextTooltipTimeout = null;
    }
    this.#altTextButton.disabled = !enabled;
  }
  shown() {
    this.#editor._reportTelemetry({
      action: "pdfjs.image.alt_text.image_status_label_displayed",
      data: {
        label: this.#label
      }
    });
  }
  destroy() {
    this.#altTextButton?.remove();
    this.#altTextButton = null;
    this.#altTextButtonLabel = null;
    this.#altTextTooltip = null;
    this.#badge?.remove();
    this.#badge = null;
  }
  async #setState() {
    const button = this.#altTextButton;
    if (!button) {
      return;
    }
    if (this.#useNewAltTextFlow) {
      button.classList.toggle("done", !!this.#altText);
      button.setAttribute("data-l10n-id", _AltText.#l10nNewButton[this.#label]);
      this.#altTextButtonLabel?.setAttribute("data-l10n-id", _AltText.#l10nNewButton[`${this.#label}-label`]);
      if (!this.#altText) {
        this.#altTextTooltip?.remove();
        return;
      }
    } else {
      if (!this.#altText && !this.#altTextDecorative) {
        button.classList.remove("done");
        this.#altTextTooltip?.remove();
        return;
      }
      button.classList.add("done");
      button.setAttribute("data-l10n-id", "pdfjs-editor-alt-text-edit-button");
    }
    let tooltip = this.#altTextTooltip;
    if (!tooltip) {
      this.#altTextTooltip = tooltip = document.createElement("span");
      tooltip.className = "tooltip";
      tooltip.setAttribute("role", "tooltip");
      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;
      const DELAY_TO_SHOW_TOOLTIP = 100;
      const signal = this.#editor._uiManager._signal;
      signal.addEventListener("abort", () => {
        clearTimeout(this.#altTextTooltipTimeout);
        this.#altTextTooltipTimeout = null;
      }, {
        once: true
      });
      button.addEventListener("mouseenter", () => {
        this.#altTextTooltipTimeout = setTimeout(() => {
          this.#altTextTooltipTimeout = null;
          this.#altTextTooltip.classList.add("show");
          this.#editor._reportTelemetry({
            action: "alt_text_tooltip"
          });
        }, DELAY_TO_SHOW_TOOLTIP);
      }, {
        signal
      });
      button.addEventListener("mouseleave", () => {
        if (this.#altTextTooltipTimeout) {
          clearTimeout(this.#altTextTooltipTimeout);
          this.#altTextTooltipTimeout = null;
        }
        this.#altTextTooltip?.classList.remove("show");
      }, {
        signal
      });
    }
    if (this.#altTextDecorative) {
      tooltip.setAttribute("data-l10n-id", "pdfjs-editor-alt-text-decorative-tooltip");
    } else {
      tooltip.removeAttribute("data-l10n-id");
      tooltip.textContent = this.#altText;
    }
    if (!tooltip.parentNode) {
      button.append(tooltip);
    }
    const element = this.#editor.getElementForAltText();
    element?.setAttribute("aria-describedby", tooltip.id);
  }
};
var TouchManager = class _TouchManager {
  #container;
  #isPinching = false;
  #isPinchingStopped = null;
  #isPinchingDisabled;
  #onPinchStart;
  #onPinching;
  #onPinchEnd;
  #pointerDownAC = null;
  #signal;
  #touchInfo = null;
  #touchManagerAC;
  #touchMoveAC = null;
  constructor({
    container: container2,
    isPinchingDisabled = null,
    isPinchingStopped = null,
    onPinchStart = null,
    onPinching = null,
    onPinchEnd = null,
    signal
  }) {
    this.#container = container2;
    this.#isPinchingStopped = isPinchingStopped;
    this.#isPinchingDisabled = isPinchingDisabled;
    this.#onPinchStart = onPinchStart;
    this.#onPinching = onPinching;
    this.#onPinchEnd = onPinchEnd;
    this.#touchManagerAC = new AbortController();
    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);
    container2.addEventListener("touchstart", this.#onTouchStart.bind(this), {
      passive: false,
      signal: this.#signal
    });
  }
  get MIN_TOUCH_DISTANCE_TO_PINCH() {
    return 35 / OutputScale.pixelRatio;
  }
  #onTouchStart(evt) {
    if (this.#isPinchingDisabled?.()) {
      return;
    }
    if (evt.touches.length === 1) {
      if (this.#pointerDownAC) {
        return;
      }
      const pointerDownAC = this.#pointerDownAC = new AbortController();
      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);
      const container2 = this.#container;
      const opts = {
        capture: true,
        signal,
        passive: false
      };
      const cancelPointerDown = (e) => {
        if (e.pointerType === "touch") {
          this.#pointerDownAC?.abort();
          this.#pointerDownAC = null;
        }
      };
      container2.addEventListener("pointerdown", (e) => {
        if (e.pointerType === "touch") {
          stopEvent(e);
          cancelPointerDown(e);
        }
      }, opts);
      container2.addEventListener("pointerup", cancelPointerDown, opts);
      container2.addEventListener("pointercancel", cancelPointerDown, opts);
      return;
    }
    if (!this.#touchMoveAC) {
      this.#touchMoveAC = new AbortController();
      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);
      const container2 = this.#container;
      const opt = {
        signal,
        capture: false,
        passive: false
      };
      container2.addEventListener("touchmove", this.#onTouchMove.bind(this), opt);
      const onTouchEnd = this.#onTouchEnd.bind(this);
      container2.addEventListener("touchend", onTouchEnd, opt);
      container2.addEventListener("touchcancel", onTouchEnd, opt);
      opt.capture = true;
      container2.addEventListener("pointerdown", stopEvent, opt);
      container2.addEventListener("pointermove", stopEvent, opt);
      container2.addEventListener("pointercancel", stopEvent, opt);
      container2.addEventListener("pointerup", stopEvent, opt);
      this.#onPinchStart?.();
    }
    stopEvent(evt);
    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {
      this.#touchInfo = null;
      return;
    }
    let [touch0, touch1] = evt.touches;
    if (touch0.identifier > touch1.identifier) {
      [touch0, touch1] = [touch1, touch0];
    }
    this.#touchInfo = {
      touch0X: touch0.screenX,
      touch0Y: touch0.screenY,
      touch1X: touch1.screenX,
      touch1Y: touch1.screenY
    };
  }
  #onTouchMove(evt) {
    if (!this.#touchInfo || evt.touches.length !== 2) {
      return;
    }
    stopEvent(evt);
    let [touch0, touch1] = evt.touches;
    if (touch0.identifier > touch1.identifier) {
      [touch0, touch1] = [touch1, touch0];
    }
    const {
      screenX: screen0X,
      screenY: screen0Y
    } = touch0;
    const {
      screenX: screen1X,
      screenY: screen1Y
    } = touch1;
    const touchInfo = this.#touchInfo;
    const {
      touch0X: pTouch0X,
      touch0Y: pTouch0Y,
      touch1X: pTouch1X,
      touch1Y: pTouch1Y
    } = touchInfo;
    const prevGapX = pTouch1X - pTouch0X;
    const prevGapY = pTouch1Y - pTouch0Y;
    const currGapX = screen1X - screen0X;
    const currGapY = screen1Y - screen0Y;
    const distance = Math.hypot(currGapX, currGapY) || 1;
    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;
    if (!this.#isPinching && Math.abs(pDistance - distance) <= _TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {
      return;
    }
    touchInfo.touch0X = screen0X;
    touchInfo.touch0Y = screen0Y;
    touchInfo.touch1X = screen1X;
    touchInfo.touch1Y = screen1Y;
    if (!this.#isPinching) {
      this.#isPinching = true;
      return;
    }
    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];
    this.#onPinching?.(origin, pDistance, distance);
  }
  #onTouchEnd(evt) {
    if (evt.touches.length >= 2) {
      return;
    }
    this.#touchMoveAC.abort();
    this.#touchMoveAC = null;
    this.#onPinchEnd?.();
    if (!this.#touchInfo) {
      return;
    }
    stopEvent(evt);
    this.#touchInfo = null;
    this.#isPinching = false;
  }
  destroy() {
    this.#touchManagerAC?.abort();
    this.#touchManagerAC = null;
    this.#pointerDownAC?.abort();
    this.#pointerDownAC = null;
  }
};
var AnnotationEditor = class _AnnotationEditor {
  #accessibilityData = null;
  #allResizerDivs = null;
  #altText = null;
  #disabled = false;
  #dragPointerId = null;
  #dragPointerType = "";
  #keepAspectRatio = false;
  #resizersDiv = null;
  #lastPointerCoords = null;
  #savedDimensions = null;
  #focusAC = null;
  #focusedResizerName = "";
  #hasBeenClicked = false;
  #initialRect = null;
  #isEditing = false;
  #isInEditMode = false;
  #isResizerEnabledForKeyboard = false;
  #moveInDOMTimeout = null;
  #prevDragX = 0;
  #prevDragY = 0;
  #telemetryTimeouts = null;
  #touchManager = null;
  _isCopy = false;
  _editToolbar = null;
  _initialOptions = /* @__PURE__ */ Object.create(null);
  _initialData = null;
  _isVisible = true;
  _uiManager = null;
  _focusEventsAllowed = true;
  static _l10n = null;
  static _l10nResizer = null;
  #isDraggable = false;
  #zIndex = _AnnotationEditor._zIndex++;
  static _borderLineWidth = -1;
  static _colorManager = new ColorManager();
  static _zIndex = 1;
  static _telemetryTimeout = 1e3;
  static get _resizerKeyboardManager() {
    const resize = _AnnotationEditor.prototype._resizeWithKeyboard;
    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;
    const big = AnnotationEditorUIManager.TRANSLATE_BIG;
    return shadow(this, "_resizerKeyboardManager", new KeyboardManager([[["ArrowLeft", "mac+ArrowLeft"], resize, {
      args: [-small, 0]
    }], [["ctrl+ArrowLeft", "mac+shift+ArrowLeft"], resize, {
      args: [-big, 0]
    }], [["ArrowRight", "mac+ArrowRight"], resize, {
      args: [small, 0]
    }], [["ctrl+ArrowRight", "mac+shift+ArrowRight"], resize, {
      args: [big, 0]
    }], [["ArrowUp", "mac+ArrowUp"], resize, {
      args: [0, -small]
    }], [["ctrl+ArrowUp", "mac+shift+ArrowUp"], resize, {
      args: [0, -big]
    }], [["ArrowDown", "mac+ArrowDown"], resize, {
      args: [0, small]
    }], [["ctrl+ArrowDown", "mac+shift+ArrowDown"], resize, {
      args: [0, big]
    }], [["Escape", "mac+Escape"], _AnnotationEditor.prototype._stopResizingWithKeyboard]]));
  }
  constructor(parameters) {
    this.parent = parameters.parent;
    this.id = parameters.id;
    this.width = this.height = null;
    this.pageIndex = parameters.parent.pageIndex;
    this.name = parameters.name;
    this.div = null;
    this._uiManager = parameters.uiManager;
    this.annotationElementId = null;
    this._willKeepAspectRatio = false;
    this._initialOptions.isCentered = parameters.isCentered;
    this._structTreeParentId = null;
    const {
      rotation,
      rawDims: {
        pageWidth,
        pageHeight,
        pageX,
        pageY
      }
    } = this.parent.viewport;
    this.rotation = rotation;
    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;
    this.pageDimensions = [pageWidth, pageHeight];
    this.pageTranslation = [pageX, pageY];
    const [width, height] = this.parentDimensions;
    this.x = parameters.x / width;
    this.y = parameters.y / height;
    this.isAttachedToDOM = false;
    this.deleted = false;
  }
  get editorType() {
    return Object.getPrototypeOf(this).constructor._type;
  }
  static get isDrawer() {
    return false;
  }
  static get _defaultLineColor() {
    return shadow(this, "_defaultLineColor", this._colorManager.getHexCode("CanvasText"));
  }
  static deleteAnnotationElement(editor) {
    const fakeEditor = new FakeEditor({
      id: editor.parent.getNextId(),
      parent: editor.parent,
      uiManager: editor._uiManager
    });
    fakeEditor.annotationElementId = editor.annotationElementId;
    fakeEditor.deleted = true;
    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);
  }
  static initialize(l10n, _uiManager) {
    _AnnotationEditor._l10n ??= l10n;
    _AnnotationEditor._l10nResizer ||= Object.freeze({
      topLeft: "pdfjs-editor-resizer-top-left",
      topMiddle: "pdfjs-editor-resizer-top-middle",
      topRight: "pdfjs-editor-resizer-top-right",
      middleRight: "pdfjs-editor-resizer-middle-right",
      bottomRight: "pdfjs-editor-resizer-bottom-right",
      bottomMiddle: "pdfjs-editor-resizer-bottom-middle",
      bottomLeft: "pdfjs-editor-resizer-bottom-left",
      middleLeft: "pdfjs-editor-resizer-middle-left"
    });
    if (_AnnotationEditor._borderLineWidth !== -1) {
      return;
    }
    const style = getComputedStyle(document.documentElement);
    _AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue("--outline-width")) || 0;
  }
  static updateDefaultParams(_type, _value) {
  }
  static get defaultPropertiesToUpdate() {
    return [];
  }
  static isHandlingMimeForPasting(mime) {
    return false;
  }
  static paste(item, parent) {
    unreachable("Not implemented");
  }
  get propertiesToUpdate() {
    return [];
  }
  get _isDraggable() {
    return this.#isDraggable;
  }
  set _isDraggable(value) {
    this.#isDraggable = value;
    this.div?.classList.toggle("draggable", value);
  }
  get isEnterHandled() {
    return true;
  }
  center() {
    const [pageWidth, pageHeight] = this.pageDimensions;
    switch (this.parentRotation) {
      case 90:
        this.x -= this.height * pageHeight / (pageWidth * 2);
        this.y += this.width * pageWidth / (pageHeight * 2);
        break;
      case 180:
        this.x += this.width / 2;
        this.y += this.height / 2;
        break;
      case 270:
        this.x += this.height * pageHeight / (pageWidth * 2);
        this.y -= this.width * pageWidth / (pageHeight * 2);
        break;
      default:
        this.x -= this.width / 2;
        this.y -= this.height / 2;
        break;
    }
    this.fixAndSetPosition();
  }
  addCommands(params) {
    this._uiManager.addCommands(params);
  }
  get currentLayer() {
    return this._uiManager.currentLayer;
  }
  setInBackground() {
    this.div.style.zIndex = 0;
  }
  setInForeground() {
    this.div.style.zIndex = this.#zIndex;
  }
  setParent(parent) {
    if (parent !== null) {
      this.pageIndex = parent.pageIndex;
      this.pageDimensions = parent.pageDimensions;
    } else {
      this.#stopResizing();
    }
    this.parent = parent;
  }
  focusin(event) {
    if (!this._focusEventsAllowed) {
      return;
    }
    if (!this.#hasBeenClicked) {
      this.parent.setSelected(this);
    } else {
      this.#hasBeenClicked = false;
    }
  }
  focusout(event) {
    if (!this._focusEventsAllowed) {
      return;
    }
    if (!this.isAttachedToDOM) {
      return;
    }
    const target = event.relatedTarget;
    if (target?.closest(`#${this.id}`)) {
      return;
    }
    event.preventDefault();
    if (!this.parent?.isMultipleSelection) {
      this.commitOrRemove();
    }
  }
  commitOrRemove() {
    if (this.isEmpty()) {
      this.remove();
    } else {
      this.commit();
    }
  }
  commit() {
    this.addToAnnotationStorage();
  }
  addToAnnotationStorage() {
    this._uiManager.addToAnnotationStorage(this);
  }
  setAt(x, y, tx, ty) {
    const [width, height] = this.parentDimensions;
    [tx, ty] = this.screenToPageTranslation(tx, ty);
    this.x = (x + tx) / width;
    this.y = (y + ty) / height;
    this.fixAndSetPosition();
  }
  _moveAfterPaste(baseX, baseY) {
    const [parentWidth, parentHeight] = this.parentDimensions;
    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);
    this._onTranslated();
  }
  #translate([width, height], x, y) {
    [x, y] = this.screenToPageTranslation(x, y);
    this.x += x / width;
    this.y += y / height;
    this._onTranslating(this.x, this.y);
    this.fixAndSetPosition();
  }
  translate(x, y) {
    this.#translate(this.parentDimensions, x, y);
  }
  translateInPage(x, y) {
    this.#initialRect ||= [this.x, this.y, this.width, this.height];
    this.#translate(this.pageDimensions, x, y);
    this.div.scrollIntoView({
      block: "nearest"
    });
  }
  translationDone() {
    this._onTranslated(this.x, this.y);
  }
  drag(tx, ty) {
    this.#initialRect ||= [this.x, this.y, this.width, this.height];
    const {
      div,
      parentDimensions: [parentWidth, parentHeight]
    } = this;
    this.x += tx / parentWidth;
    this.y += ty / parentHeight;
    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {
      const {
        x: x2,
        y: y2
      } = this.div.getBoundingClientRect();
      if (this.parent.findNewParent(this, x2, y2)) {
        this.x -= Math.floor(this.x);
        this.y -= Math.floor(this.y);
      }
    }
    let {
      x,
      y
    } = this;
    const [bx, by] = this.getBaseTranslation();
    x += bx;
    y += by;
    const {
      style
    } = div;
    style.left = `${(100 * x).toFixed(2)}%`;
    style.top = `${(100 * y).toFixed(2)}%`;
    this._onTranslating(x, y);
    div.scrollIntoView({
      block: "nearest"
    });
  }
  _onTranslating(x, y) {
  }
  _onTranslated(x, y) {
  }
  get _hasBeenMoved() {
    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);
  }
  get _hasBeenResized() {
    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);
  }
  getBaseTranslation() {
    const [parentWidth, parentHeight] = this.parentDimensions;
    const {
      _borderLineWidth
    } = _AnnotationEditor;
    const x = _borderLineWidth / parentWidth;
    const y = _borderLineWidth / parentHeight;
    switch (this.rotation) {
      case 90:
        return [-x, y];
      case 180:
        return [x, y];
      case 270:
        return [x, -y];
      default:
        return [-x, -y];
    }
  }
  get _mustFixPosition() {
    return true;
  }
  fixAndSetPosition(rotation = this.rotation) {
    const {
      div: {
        style
      },
      pageDimensions: [pageWidth, pageHeight]
    } = this;
    let {
      x,
      y,
      width,
      height
    } = this;
    width *= pageWidth;
    height *= pageHeight;
    x *= pageWidth;
    y *= pageHeight;
    if (this._mustFixPosition) {
      switch (rotation) {
        case 0:
          x = MathClamp(x, 0, pageWidth - width);
          y = MathClamp(y, 0, pageHeight - height);
          break;
        case 90:
          x = MathClamp(x, 0, pageWidth - height);
          y = MathClamp(y, width, pageHeight);
          break;
        case 180:
          x = MathClamp(x, width, pageWidth);
          y = MathClamp(y, height, pageHeight);
          break;
        case 270:
          x = MathClamp(x, height, pageWidth);
          y = MathClamp(y, 0, pageHeight - width);
          break;
      }
    }
    this.x = x /= pageWidth;
    this.y = y /= pageHeight;
    const [bx, by] = this.getBaseTranslation();
    x += bx;
    y += by;
    style.left = `${(100 * x).toFixed(2)}%`;
    style.top = `${(100 * y).toFixed(2)}%`;
    this.moveInDOM();
  }
  static #rotatePoint(x, y, angle) {
    switch (angle) {
      case 90:
        return [y, -x];
      case 180:
        return [-x, -y];
      case 270:
        return [-y, x];
      default:
        return [x, y];
    }
  }
  screenToPageTranslation(x, y) {
    return _AnnotationEditor.#rotatePoint(x, y, this.parentRotation);
  }
  pageTranslationToScreen(x, y) {
    return _AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);
  }
  #getRotationMatrix(rotation) {
    switch (rotation) {
      case 90: {
        const [pageWidth, pageHeight] = this.pageDimensions;
        return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];
      }
      case 180:
        return [-1, 0, 0, -1];
      case 270: {
        const [pageWidth, pageHeight] = this.pageDimensions;
        return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];
      }
      default:
        return [1, 0, 0, 1];
    }
  }
  get parentScale() {
    return this._uiManager.viewParameters.realScale;
  }
  get parentRotation() {
    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;
  }
  get parentDimensions() {
    const {
      parentScale,
      pageDimensions: [pageWidth, pageHeight]
    } = this;
    return [pageWidth * parentScale, pageHeight * parentScale];
  }
  setDims(width, height) {
    const [parentWidth, parentHeight] = this.parentDimensions;
    const {
      style
    } = this.div;
    style.width = `${(100 * width / parentWidth).toFixed(2)}%`;
    if (!this.#keepAspectRatio) {
      style.height = `${(100 * height / parentHeight).toFixed(2)}%`;
    }
  }
  fixDims() {
    const {
      style
    } = this.div;
    const {
      height,
      width
    } = style;
    const widthPercent = width.endsWith("%");
    const heightPercent = !this.#keepAspectRatio && height.endsWith("%");
    if (widthPercent && heightPercent) {
      return;
    }
    const [parentWidth, parentHeight] = this.parentDimensions;
    if (!widthPercent) {
      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;
    }
    if (!this.#keepAspectRatio && !heightPercent) {
      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;
    }
  }
  getInitialTranslation() {
    return [0, 0];
  }
  #createResizers() {
    if (this.#resizersDiv) {
      return;
    }
    this.#resizersDiv = document.createElement("div");
    this.#resizersDiv.classList.add("resizers");
    const classes = this._willKeepAspectRatio ? ["topLeft", "topRight", "bottomRight", "bottomLeft"] : ["topLeft", "topMiddle", "topRight", "middleRight", "bottomRight", "bottomMiddle", "bottomLeft", "middleLeft"];
    const signal = this._uiManager._signal;
    for (const name of classes) {
      const div = document.createElement("div");
      this.#resizersDiv.append(div);
      div.classList.add("resizer", name);
      div.setAttribute("data-resizer-name", name);
      div.addEventListener("pointerdown", this.#resizerPointerdown.bind(this, name), {
        signal
      });
      div.addEventListener("contextmenu", noContextMenu, {
        signal
      });
      div.tabIndex = -1;
    }
    this.div.prepend(this.#resizersDiv);
  }
  #resizerPointerdown(name, event) {
    event.preventDefault();
    const {
      isMac
    } = util_FeatureTest.platform;
    if (event.button !== 0 || event.ctrlKey && isMac) {
      return;
    }
    this.#altText?.toggle(false);
    const savedDraggable = this._isDraggable;
    this._isDraggable = false;
    this.#lastPointerCoords = [event.screenX, event.screenY];
    const ac = new AbortController();
    const signal = this._uiManager.combinedSignal(ac);
    this.parent.togglePointerEvents(false);
    window.addEventListener("pointermove", this.#resizerPointermove.bind(this, name), {
      passive: true,
      capture: true,
      signal
    });
    window.addEventListener("touchmove", stopEvent, {
      passive: false,
      signal
    });
    window.addEventListener("contextmenu", noContextMenu, {
      signal
    });
    this.#savedDimensions = {
      savedX: this.x,
      savedY: this.y,
      savedWidth: this.width,
      savedHeight: this.height
    };
    const savedParentCursor = this.parent.div.style.cursor;
    const savedCursor = this.div.style.cursor;
    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;
    const pointerUpCallback = () => {
      ac.abort();
      this.parent.togglePointerEvents(true);
      this.#altText?.toggle(true);
      this._isDraggable = savedDraggable;
      this.parent.div.style.cursor = savedParentCursor;
      this.div.style.cursor = savedCursor;
      this.#addResizeToUndoStack();
    };
    window.addEventListener("pointerup", pointerUpCallback, {
      signal
    });
    window.addEventListener("blur", pointerUpCallback, {
      signal
    });
  }
  #resize(x, y, width, height) {
    this.width = width;
    this.height = height;
    this.x = x;
    this.y = y;
    const [parentWidth, parentHeight] = this.parentDimensions;
    this.setDims(parentWidth * width, parentHeight * height);
    this.fixAndSetPosition();
    this._onResized();
  }
  _onResized() {
  }
  #addResizeToUndoStack() {
    if (!this.#savedDimensions) {
      return;
    }
    const {
      savedX,
      savedY,
      savedWidth,
      savedHeight
    } = this.#savedDimensions;
    this.#savedDimensions = null;
    const newX = this.x;
    const newY = this.y;
    const newWidth = this.width;
    const newHeight = this.height;
    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {
      return;
    }
    this.addCommands({
      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),
      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),
      mustExec: true
    });
  }
  static _round(x) {
    return Math.round(x * 1e4) / 1e4;
  }
  #resizerPointermove(name, event) {
    const [parentWidth, parentHeight] = this.parentDimensions;
    const savedX = this.x;
    const savedY = this.y;
    const savedWidth = this.width;
    const savedHeight = this.height;
    const minWidth = _AnnotationEditor.MIN_SIZE / parentWidth;
    const minHeight = _AnnotationEditor.MIN_SIZE / parentHeight;
    const rotationMatrix = this.#getRotationMatrix(this.rotation);
    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];
    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);
    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];
    let getPoint;
    let getOpposite;
    let isDiagonal = false;
    let isHorizontal = false;
    switch (name) {
      case "topLeft":
        isDiagonal = true;
        getPoint = (w, h) => [0, 0];
        getOpposite = (w, h) => [w, h];
        break;
      case "topMiddle":
        getPoint = (w, h) => [w / 2, 0];
        getOpposite = (w, h) => [w / 2, h];
        break;
      case "topRight":
        isDiagonal = true;
        getPoint = (w, h) => [w, 0];
        getOpposite = (w, h) => [0, h];
        break;
      case "middleRight":
        isHorizontal = true;
        getPoint = (w, h) => [w, h / 2];
        getOpposite = (w, h) => [0, h / 2];
        break;
      case "bottomRight":
        isDiagonal = true;
        getPoint = (w, h) => [w, h];
        getOpposite = (w, h) => [0, 0];
        break;
      case "bottomMiddle":
        getPoint = (w, h) => [w / 2, h];
        getOpposite = (w, h) => [w / 2, 0];
        break;
      case "bottomLeft":
        isDiagonal = true;
        getPoint = (w, h) => [0, h];
        getOpposite = (w, h) => [w, 0];
        break;
      case "middleLeft":
        isHorizontal = true;
        getPoint = (w, h) => [0, h / 2];
        getOpposite = (w, h) => [w, h / 2];
        break;
    }
    const point = getPoint(savedWidth, savedHeight);
    const oppositePoint = getOpposite(savedWidth, savedHeight);
    let transfOppositePoint = transf(...oppositePoint);
    const oppositeX = _AnnotationEditor._round(savedX + transfOppositePoint[0]);
    const oppositeY = _AnnotationEditor._round(savedY + transfOppositePoint[1]);
    let ratioX = 1;
    let ratioY = 1;
    let deltaX, deltaY;
    if (!event.fromKeyboard) {
      const {
        screenX,
        screenY
      } = event;
      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;
      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);
      this.#lastPointerCoords[0] = screenX;
      this.#lastPointerCoords[1] = screenY;
    } else {
      ({
        deltaX,
        deltaY
      } = event);
    }
    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);
    if (isDiagonal) {
      const oldDiag = Math.hypot(savedWidth, savedHeight);
      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);
    } else if (isHorizontal) {
      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;
    } else {
      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;
    }
    const newWidth = _AnnotationEditor._round(savedWidth * ratioX);
    const newHeight = _AnnotationEditor._round(savedHeight * ratioY);
    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));
    const newX = oppositeX - transfOppositePoint[0];
    const newY = oppositeY - transfOppositePoint[1];
    this.#initialRect ||= [this.x, this.y, this.width, this.height];
    this.width = newWidth;
    this.height = newHeight;
    this.x = newX;
    this.y = newY;
    this.setDims(parentWidth * newWidth, parentHeight * newHeight);
    this.fixAndSetPosition();
    this._onResizing();
  }
  _onResizing() {
  }
  altTextFinish() {
    this.#altText?.finish();
  }
  async addEditToolbar() {
    if (this._editToolbar || this.#isInEditMode) {
      return this._editToolbar;
    }
    this._editToolbar = new EditorToolbar(this);
    this.div.append(this._editToolbar.render());
    if (this.#altText) {
      await this._editToolbar.addAltText(this.#altText);
    }
    return this._editToolbar;
  }
  removeEditToolbar() {
    if (!this._editToolbar) {
      return;
    }
    this._editToolbar.remove();
    this._editToolbar = null;
    this.#altText?.destroy();
  }
  addContainer(container2) {
    const editToolbarDiv = this._editToolbar?.div;
    if (editToolbarDiv) {
      editToolbarDiv.before(container2);
    } else {
      this.div.append(container2);
    }
  }
  getClientDimensions() {
    return this.div.getBoundingClientRect();
  }
  async addAltTextButton() {
    if (this.#altText) {
      return;
    }
    AltText.initialize(_AnnotationEditor._l10n);
    this.#altText = new AltText(this);
    if (this.#accessibilityData) {
      this.#altText.data = this.#accessibilityData;
      this.#accessibilityData = null;
    }
    await this.addEditToolbar();
  }
  get altTextData() {
    return this.#altText?.data;
  }
  set altTextData(data) {
    if (!this.#altText) {
      return;
    }
    this.#altText.data = data;
  }
  get guessedAltText() {
    return this.#altText?.guessedText;
  }
  async setGuessedAltText(text) {
    await this.#altText?.setGuessedText(text);
  }
  serializeAltText(isForCopying) {
    return this.#altText?.serialize(isForCopying);
  }
  hasAltText() {
    return !!this.#altText && !this.#altText.isEmpty();
  }
  hasAltTextData() {
    return this.#altText?.hasData() ?? false;
  }
  render() {
    const div = this.div = document.createElement("div");
    div.setAttribute("data-editor-rotation", (360 - this.rotation) % 360);
    div.className = this.name;
    div.setAttribute("id", this.id);
    div.tabIndex = this.#disabled ? -1 : 0;
    div.setAttribute("role", "application");
    if (this.defaultL10nId) {
      div.setAttribute("data-l10n-id", this.defaultL10nId);
    }
    if (!this._isVisible) {
      div.classList.add("hidden");
    }
    this.setInForeground();
    this.#addFocusListeners();
    const [parentWidth, parentHeight] = this.parentDimensions;
    if (this.parentRotation % 180 !== 0) {
      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;
      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;
    }
    const [tx, ty] = this.getInitialTranslation();
    this.translate(tx, ty);
    bindEvents(this, div, ["keydown", "pointerdown"]);
    if (this.isResizable && this._uiManager._supportsPinchToZoom) {
      this.#touchManager ||= new TouchManager({
        container: div,
        isPinchingDisabled: () => !this.isSelected,
        onPinchStart: this.#touchPinchStartCallback.bind(this),
        onPinching: this.#touchPinchCallback.bind(this),
        onPinchEnd: this.#touchPinchEndCallback.bind(this),
        signal: this._uiManager._signal
      });
    }
    this._uiManager._editorUndoBar?.hide();
    return div;
  }
  #touchPinchStartCallback() {
    this.#savedDimensions = {
      savedX: this.x,
      savedY: this.y,
      savedWidth: this.width,
      savedHeight: this.height
    };
    this.#altText?.toggle(false);
    this.parent.togglePointerEvents(false);
  }
  #touchPinchCallback(_origin, prevDistance, distance) {
    const slowDownFactor = 0.7;
    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;
    if (factor === 1) {
      return;
    }
    const rotationMatrix = this.#getRotationMatrix(this.rotation);
    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];
    const [parentWidth, parentHeight] = this.parentDimensions;
    const savedX = this.x;
    const savedY = this.y;
    const savedWidth = this.width;
    const savedHeight = this.height;
    const minWidth = _AnnotationEditor.MIN_SIZE / parentWidth;
    const minHeight = _AnnotationEditor.MIN_SIZE / parentHeight;
    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);
    const newWidth = _AnnotationEditor._round(savedWidth * factor);
    const newHeight = _AnnotationEditor._round(savedHeight * factor);
    if (newWidth === savedWidth && newHeight === savedHeight) {
      return;
    }
    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];
    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);
    const centerX = _AnnotationEditor._round(savedX + transfCenterPoint[0]);
    const centerY = _AnnotationEditor._round(savedY + transfCenterPoint[1]);
    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);
    this.x = centerX - newTransfCenterPoint[0];
    this.y = centerY - newTransfCenterPoint[1];
    this.width = newWidth;
    this.height = newHeight;
    this.setDims(parentWidth * newWidth, parentHeight * newHeight);
    this.fixAndSetPosition();
    this._onResizing();
  }
  #touchPinchEndCallback() {
    this.#altText?.toggle(true);
    this.parent.togglePointerEvents(true);
    this.#addResizeToUndoStack();
  }
  pointerdown(event) {
    const {
      isMac
    } = util_FeatureTest.platform;
    if (event.button !== 0 || event.ctrlKey && isMac) {
      event.preventDefault();
      return;
    }
    this.#hasBeenClicked = true;
    if (this._isDraggable) {
      this.#setUpDragSession(event);
      return;
    }
    this.#selectOnPointerEvent(event);
  }
  get isSelected() {
    return this._uiManager.isSelected(this);
  }
  #selectOnPointerEvent(event) {
    const {
      isMac
    } = util_FeatureTest.platform;
    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {
      this.parent.toggleSelected(this);
    } else {
      this.parent.setSelected(this);
    }
  }
  #setUpDragSession(event) {
    const {
      isSelected
    } = this;
    this._uiManager.setUpDragSession();
    let hasDraggingStarted = false;
    const ac = new AbortController();
    const signal = this._uiManager.combinedSignal(ac);
    const opts = {
      capture: true,
      passive: false,
      signal
    };
    const cancelDrag = (e) => {
      ac.abort();
      this.#dragPointerId = null;
      this.#hasBeenClicked = false;
      if (!this._uiManager.endDragSession()) {
        this.#selectOnPointerEvent(e);
      }
      if (hasDraggingStarted) {
        this._onStopDragging();
      }
    };
    if (isSelected) {
      this.#prevDragX = event.clientX;
      this.#prevDragY = event.clientY;
      this.#dragPointerId = event.pointerId;
      this.#dragPointerType = event.pointerType;
      window.addEventListener("pointermove", (e) => {
        if (!hasDraggingStarted) {
          hasDraggingStarted = true;
          this._onStartDragging();
        }
        const {
          clientX: x,
          clientY: y,
          pointerId
        } = e;
        if (pointerId !== this.#dragPointerId) {
          stopEvent(e);
          return;
        }
        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);
        this.#prevDragX = x;
        this.#prevDragY = y;
        this._uiManager.dragSelectedEditors(tx, ty);
      }, opts);
      window.addEventListener("touchmove", stopEvent, opts);
      window.addEventListener("pointerdown", (e) => {
        if (e.pointerType === this.#dragPointerType) {
          if (this.#touchManager || e.isPrimary) {
            cancelDrag(e);
          }
        }
        stopEvent(e);
      }, opts);
    }
    const pointerUpCallback = (e) => {
      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {
        cancelDrag(e);
        return;
      }
      stopEvent(e);
    };
    window.addEventListener("pointerup", pointerUpCallback, {
      signal
    });
    window.addEventListener("blur", pointerUpCallback, {
      signal
    });
  }
  _onStartDragging() {
  }
  _onStopDragging() {
  }
  moveInDOM() {
    if (this.#moveInDOMTimeout) {
      clearTimeout(this.#moveInDOMTimeout);
    }
    this.#moveInDOMTimeout = setTimeout(() => {
      this.#moveInDOMTimeout = null;
      this.parent?.moveEditorInDOM(this);
    }, 0);
  }
  _setParentAndPosition(parent, x, y) {
    parent.changeParent(this);
    this.x = x;
    this.y = y;
    this.fixAndSetPosition();
    this._onTranslated();
  }
  getRect(tx, ty, rotation = this.rotation) {
    const scale = this.parentScale;
    const [pageWidth, pageHeight] = this.pageDimensions;
    const [pageX, pageY] = this.pageTranslation;
    const shiftX = tx / scale;
    const shiftY = ty / scale;
    const x = this.x * pageWidth;
    const y = this.y * pageHeight;
    const width = this.width * pageWidth;
    const height = this.height * pageHeight;
    switch (rotation) {
      case 0:
        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];
      case 90:
        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];
      case 180:
        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];
      case 270:
        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];
      default:
        throw new Error("Invalid rotation");
    }
  }
  getRectInCurrentCoords(rect, pageHeight) {
    const [x1, y1, x2, y2] = rect;
    const width = x2 - x1;
    const height = y2 - y1;
    switch (this.rotation) {
      case 0:
        return [x1, pageHeight - y2, width, height];
      case 90:
        return [x1, pageHeight - y1, height, width];
      case 180:
        return [x2, pageHeight - y1, width, height];
      case 270:
        return [x2, pageHeight - y2, height, width];
      default:
        throw new Error("Invalid rotation");
    }
  }
  onceAdded(focus) {
  }
  isEmpty() {
    return false;
  }
  enableEditMode() {
    this.#isInEditMode = true;
  }
  disableEditMode() {
    this.#isInEditMode = false;
  }
  isInEditMode() {
    return this.#isInEditMode;
  }
  shouldGetKeyboardEvents() {
    return this.#isResizerEnabledForKeyboard;
  }
  needsToBeRebuilt() {
    return this.div && !this.isAttachedToDOM;
  }
  get isOnScreen() {
    const {
      top,
      left,
      bottom,
      right
    } = this.getClientDimensions();
    const {
      innerHeight,
      innerWidth
    } = window;
    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;
  }
  #addFocusListeners() {
    if (this.#focusAC || !this.div) {
      return;
    }
    this.#focusAC = new AbortController();
    const signal = this._uiManager.combinedSignal(this.#focusAC);
    this.div.addEventListener("focusin", this.focusin.bind(this), {
      signal
    });
    this.div.addEventListener("focusout", this.focusout.bind(this), {
      signal
    });
  }
  rebuild() {
    this.#addFocusListeners();
  }
  rotate(_angle) {
  }
  resize() {
  }
  serializeDeleted() {
    return {
      id: this.annotationElementId,
      deleted: true,
      pageIndex: this.pageIndex,
      popupRef: this._initialData?.popupRef || ""
    };
  }
  serialize(isForCopying = false, context = null) {
    unreachable("An editor must be serializable");
  }
  static async deserialize(data, parent, uiManager) {
    const editor = new this.prototype.constructor({
      parent,
      id: parent.getNextId(),
      uiManager
    });
    editor.rotation = data.rotation;
    editor.#accessibilityData = data.accessibilityData;
    editor._isCopy = data.isCopy || false;
    const [pageWidth, pageHeight] = editor.pageDimensions;
    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);
    editor.x = x / pageWidth;
    editor.y = y / pageHeight;
    editor.width = width / pageWidth;
    editor.height = height / pageHeight;
    return editor;
  }
  get hasBeenModified() {
    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);
  }
  remove() {
    this.#focusAC?.abort();
    this.#focusAC = null;
    if (!this.isEmpty()) {
      this.commit();
    }
    if (this.parent) {
      this.parent.remove(this);
    } else {
      this._uiManager.removeEditor(this);
    }
    if (this.#moveInDOMTimeout) {
      clearTimeout(this.#moveInDOMTimeout);
      this.#moveInDOMTimeout = null;
    }
    this.#stopResizing();
    this.removeEditToolbar();
    if (this.#telemetryTimeouts) {
      for (const timeout of this.#telemetryTimeouts.values()) {
        clearTimeout(timeout);
      }
      this.#telemetryTimeouts = null;
    }
    this.parent = null;
    this.#touchManager?.destroy();
    this.#touchManager = null;
  }
  get isResizable() {
    return false;
  }
  makeResizable() {
    if (this.isResizable) {
      this.#createResizers();
      this.#resizersDiv.classList.remove("hidden");
    }
  }
  get toolbarPosition() {
    return null;
  }
  keydown(event) {
    if (!this.isResizable || event.target !== this.div || event.key !== "Enter") {
      return;
    }
    this._uiManager.setSelected(this);
    this.#savedDimensions = {
      savedX: this.x,
      savedY: this.y,
      savedWidth: this.width,
      savedHeight: this.height
    };
    const children = this.#resizersDiv.children;
    if (!this.#allResizerDivs) {
      this.#allResizerDivs = Array.from(children);
      const boundResizerKeydown = this.#resizerKeydown.bind(this);
      const boundResizerBlur = this.#resizerBlur.bind(this);
      const signal = this._uiManager._signal;
      for (const div of this.#allResizerDivs) {
        const name = div.getAttribute("data-resizer-name");
        div.setAttribute("role", "spinbutton");
        div.addEventListener("keydown", boundResizerKeydown, {
          signal
        });
        div.addEventListener("blur", boundResizerBlur, {
          signal
        });
        div.addEventListener("focus", this.#resizerFocus.bind(this, name), {
          signal
        });
        div.setAttribute("data-l10n-id", _AnnotationEditor._l10nResizer[name]);
      }
    }
    const first = this.#allResizerDivs[0];
    let firstPosition = 0;
    for (const div of children) {
      if (div === first) {
        break;
      }
      firstPosition++;
    }
    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);
    if (nextFirstPosition !== firstPosition) {
      if (nextFirstPosition < firstPosition) {
        for (let i2 = 0; i2 < firstPosition - nextFirstPosition; i2++) {
          this.#resizersDiv.append(this.#resizersDiv.firstChild);
        }
      } else if (nextFirstPosition > firstPosition) {
        for (let i2 = 0; i2 < nextFirstPosition - firstPosition; i2++) {
          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);
        }
      }
      let i = 0;
      for (const child of children) {
        const div = this.#allResizerDivs[i++];
        const name = div.getAttribute("data-resizer-name");
        child.setAttribute("data-l10n-id", _AnnotationEditor._l10nResizer[name]);
      }
    }
    this.#setResizerTabIndex(0);
    this.#isResizerEnabledForKeyboard = true;
    this.#resizersDiv.firstChild.focus({
      focusVisible: true
    });
    event.preventDefault();
    event.stopImmediatePropagation();
  }
  #resizerKeydown(event) {
    _AnnotationEditor._resizerKeyboardManager.exec(this, event);
  }
  #resizerBlur(event) {
    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {
      this.#stopResizing();
    }
  }
  #resizerFocus(name) {
    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : "";
  }
  #setResizerTabIndex(value) {
    if (!this.#allResizerDivs) {
      return;
    }
    for (const div of this.#allResizerDivs) {
      div.tabIndex = value;
    }
  }
  _resizeWithKeyboard(x, y) {
    if (!this.#isResizerEnabledForKeyboard) {
      return;
    }
    this.#resizerPointermove(this.#focusedResizerName, {
      deltaX: x,
      deltaY: y,
      fromKeyboard: true
    });
  }
  #stopResizing() {
    this.#isResizerEnabledForKeyboard = false;
    this.#setResizerTabIndex(-1);
    this.#addResizeToUndoStack();
  }
  _stopResizingWithKeyboard() {
    this.#stopResizing();
    this.div.focus();
  }
  select() {
    this.makeResizable();
    this.div?.classList.add("selectedEditor");
    if (!this._editToolbar) {
      this.addEditToolbar().then(() => {
        if (this.div?.classList.contains("selectedEditor")) {
          this._editToolbar?.show();
        }
      });
      return;
    }
    this._editToolbar?.show();
    this.#altText?.toggleAltTextBadge(false);
  }
  unselect() {
    this.#resizersDiv?.classList.add("hidden");
    this.div?.classList.remove("selectedEditor");
    if (this.div?.contains(document.activeElement)) {
      this._uiManager.currentLayer.div.focus({
        preventScroll: true
      });
    }
    this._editToolbar?.hide();
    this.#altText?.toggleAltTextBadge(true);
  }
  updateParams(type, value) {
  }
  disableEditing() {
  }
  enableEditing() {
  }
  enterInEditMode() {
  }
  getElementForAltText() {
    return this.div;
  }
  get contentDiv() {
    return this.div;
  }
  get isEditing() {
    return this.#isEditing;
  }
  set isEditing(value) {
    this.#isEditing = value;
    if (!this.parent) {
      return;
    }
    if (value) {
      this.parent.setSelected(this);
      this.parent.setActiveEditor(this);
    } else {
      this.parent.setActiveEditor(null);
    }
  }
  setAspectRatio(width, height) {
    this.#keepAspectRatio = true;
    const aspectRatio = width / height;
    const {
      style
    } = this.div;
    style.aspectRatio = aspectRatio;
    style.height = "auto";
  }
  static get MIN_SIZE() {
    return 16;
  }
  static canCreateNewEmptyEditor() {
    return true;
  }
  get telemetryInitialData() {
    return {
      action: "added"
    };
  }
  get telemetryFinalData() {
    return null;
  }
  _reportTelemetry(data, mustWait = false) {
    if (mustWait) {
      this.#telemetryTimeouts ||= /* @__PURE__ */ new Map();
      const {
        action
      } = data;
      let timeout = this.#telemetryTimeouts.get(action);
      if (timeout) {
        clearTimeout(timeout);
      }
      timeout = setTimeout(() => {
        this._reportTelemetry(data);
        this.#telemetryTimeouts.delete(action);
        if (this.#telemetryTimeouts.size === 0) {
          this.#telemetryTimeouts = null;
        }
      }, _AnnotationEditor._telemetryTimeout);
      this.#telemetryTimeouts.set(action, timeout);
      return;
    }
    data.type ||= this.editorType;
    this._uiManager._eventBus.dispatch("reporttelemetry", {
      source: this,
      details: {
        type: "editing",
        data
      }
    });
  }
  show(visible = this._isVisible) {
    this.div.classList.toggle("hidden", !visible);
    this._isVisible = visible;
  }
  enable() {
    if (this.div) {
      this.div.tabIndex = 0;
    }
    this.#disabled = false;
  }
  disable() {
    if (this.div) {
      this.div.tabIndex = -1;
    }
    this.#disabled = true;
  }
  renderAnnotationElement(annotation) {
    let content = annotation.container.querySelector(".annotationContent");
    if (!content) {
      content = document.createElement("div");
      content.classList.add("annotationContent", this.editorType);
      annotation.container.prepend(content);
    } else if (content.nodeName === "CANVAS") {
      const canvas2 = content;
      content = document.createElement("div");
      content.classList.add("annotationContent", this.editorType);
      canvas2.before(content);
    }
    return content;
  }
  resetAnnotationElement(annotation) {
    const {
      firstChild
    } = annotation.container;
    if (firstChild?.nodeName === "DIV" && firstChild.classList.contains("annotationContent")) {
      firstChild.remove();
    }
  }
};
var FakeEditor = class extends AnnotationEditor {
  constructor(params) {
    super(params);
    this.annotationElementId = params.annotationElementId;
    this.deleted = true;
  }
  serialize() {
    return this.serializeDeleted();
  }
};
var SEED = 3285377520;
var MASK_HIGH = 4294901760;
var MASK_LOW = 65535;
var MurmurHash3_64 = class {
  constructor(seed) {
    this.h1 = seed ? seed & 4294967295 : SEED;
    this.h2 = seed ? seed & 4294967295 : SEED;
  }
  update(input) {
    let data, length;
    if (typeof input === "string") {
      data = new Uint8Array(input.length * 2);
      length = 0;
      for (let i = 0, ii = input.length; i < ii; i++) {
        const code = input.charCodeAt(i);
        if (code <= 255) {
          data[length++] = code;
        } else {
          data[length++] = code >>> 8;
          data[length++] = code & 255;
        }
      }
    } else if (ArrayBuffer.isView(input)) {
      data = input.slice();
      length = data.byteLength;
    } else {
      throw new Error("Invalid data format, must be a string or TypedArray.");
    }
    const blockCounts = length >> 2;
    const tailLength = length - blockCounts * 4;
    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);
    let k1 = 0, k2 = 0;
    let h1 = this.h1, h2 = this.h2;
    const C1 = 3432918353, C2 = 461845907;
    const C1_LOW = C1 & MASK_LOW, C2_LOW = C2 & MASK_LOW;
    for (let i = 0; i < blockCounts; i++) {
      if (i & 1) {
        k1 = dataUint32[i];
        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;
        k1 = k1 << 15 | k1 >>> 17;
        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;
        h1 ^= k1;
        h1 = h1 << 13 | h1 >>> 19;
        h1 = h1 * 5 + 3864292196;
      } else {
        k2 = dataUint32[i];
        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;
        k2 = k2 << 15 | k2 >>> 17;
        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;
        h2 ^= k2;
        h2 = h2 << 13 | h2 >>> 19;
        h2 = h2 * 5 + 3864292196;
      }
    }
    k1 = 0;
    switch (tailLength) {
      case 3:
        k1 ^= data[blockCounts * 4 + 2] << 16;
      case 2:
        k1 ^= data[blockCounts * 4 + 1] << 8;
      case 1:
        k1 ^= data[blockCounts * 4];
        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;
        k1 = k1 << 15 | k1 >>> 17;
        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;
        if (blockCounts & 1) {
          h1 ^= k1;
        } else {
          h2 ^= k1;
        }
    }
    this.h1 = h1;
    this.h2 = h2;
  }
  hexdigest() {
    let h1 = this.h1, h2 = this.h2;
    h1 ^= h2 >>> 1;
    h1 = h1 * 3981806797 & MASK_HIGH | h1 * 36045 & MASK_LOW;
    h2 = h2 * 4283543511 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 2950163797 & MASK_HIGH) >>> 16;
    h1 ^= h2 >>> 1;
    h1 = h1 * 444984403 & MASK_HIGH | h1 * 60499 & MASK_LOW;
    h2 = h2 * 3301882366 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 3120437893 & MASK_HIGH) >>> 16;
    h1 ^= h2 >>> 1;
    return (h1 >>> 0).toString(16).padStart(8, "0") + (h2 >>> 0).toString(16).padStart(8, "0");
  }
};
var SerializableEmpty = Object.freeze({
  map: null,
  hash: "",
  transfer: void 0
});
var AnnotationStorage = class {
  #modified = false;
  #modifiedIds = null;
  #storage = /* @__PURE__ */ new Map();
  constructor() {
    this.onSetModified = null;
    this.onResetModified = null;
    this.onAnnotationEditor = null;
  }
  getValue(key, defaultValue) {
    const value = this.#storage.get(key);
    if (value === void 0) {
      return defaultValue;
    }
    return Object.assign(defaultValue, value);
  }
  getRawValue(key) {
    return this.#storage.get(key);
  }
  remove(key) {
    this.#storage.delete(key);
    if (this.#storage.size === 0) {
      this.resetModified();
    }
    if (typeof this.onAnnotationEditor === "function") {
      for (const value of this.#storage.values()) {
        if (value instanceof AnnotationEditor) {
          return;
        }
      }
      this.onAnnotationEditor(null);
    }
  }
  setValue(key, value) {
    const obj = this.#storage.get(key);
    let modified = false;
    if (obj !== void 0) {
      for (const [entry, val] of Object.entries(value)) {
        if (obj[entry] !== val) {
          modified = true;
          obj[entry] = val;
        }
      }
    } else {
      modified = true;
      this.#storage.set(key, value);
    }
    if (modified) {
      this.#setModified();
    }
    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === "function") {
      this.onAnnotationEditor(value.constructor._type);
    }
  }
  has(key) {
    return this.#storage.has(key);
  }
  getAll() {
    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;
  }
  setAll(obj) {
    for (const [key, val] of Object.entries(obj)) {
      this.setValue(key, val);
    }
  }
  get size() {
    return this.#storage.size;
  }
  #setModified() {
    if (!this.#modified) {
      this.#modified = true;
      if (typeof this.onSetModified === "function") {
        this.onSetModified();
      }
    }
  }
  resetModified() {
    if (this.#modified) {
      this.#modified = false;
      if (typeof this.onResetModified === "function") {
        this.onResetModified();
      }
    }
  }
  get print() {
    return new PrintAnnotationStorage(this);
  }
  get serializable() {
    if (this.#storage.size === 0) {
      return SerializableEmpty;
    }
    const map = /* @__PURE__ */ new Map(), hash = new MurmurHash3_64(), transfer = [];
    const context = /* @__PURE__ */ Object.create(null);
    let hasBitmap = false;
    for (const [key, val] of this.#storage) {
      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;
      if (serialized) {
        map.set(key, serialized);
        hash.update(`${key}:${JSON.stringify(serialized)}`);
        hasBitmap ||= !!serialized.bitmap;
      }
    }
    if (hasBitmap) {
      for (const value of map.values()) {
        if (value.bitmap) {
          transfer.push(value.bitmap);
        }
      }
    }
    return map.size > 0 ? {
      map,
      hash: hash.hexdigest(),
      transfer
    } : SerializableEmpty;
  }
  get editorStats() {
    let stats = null;
    const typeToEditor = /* @__PURE__ */ new Map();
    for (const value of this.#storage.values()) {
      if (!(value instanceof AnnotationEditor)) {
        continue;
      }
      const editorStats = value.telemetryFinalData;
      if (!editorStats) {
        continue;
      }
      const {
        type
      } = editorStats;
      if (!typeToEditor.has(type)) {
        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);
      }
      stats ||= /* @__PURE__ */ Object.create(null);
      const map = stats[type] ||= /* @__PURE__ */ new Map();
      for (const [key, val] of Object.entries(editorStats)) {
        if (key === "type") {
          continue;
        }
        let counters = map.get(key);
        if (!counters) {
          counters = /* @__PURE__ */ new Map();
          map.set(key, counters);
        }
        const count = counters.get(val) ?? 0;
        counters.set(val, count + 1);
      }
    }
    for (const [type, editor] of typeToEditor) {
      stats[type] = editor.computeTelemetryFinalData(stats[type]);
    }
    return stats;
  }
  resetModifiedIds() {
    this.#modifiedIds = null;
  }
  get modifiedIds() {
    if (this.#modifiedIds) {
      return this.#modifiedIds;
    }
    const ids = [];
    for (const value of this.#storage.values()) {
      if (!(value instanceof AnnotationEditor) || !value.annotationElementId || !value.serialize()) {
        continue;
      }
      ids.push(value.annotationElementId);
    }
    return this.#modifiedIds = {
      ids: new Set(ids),
      hash: ids.join(",")
    };
  }
};
var PrintAnnotationStorage = class extends AnnotationStorage {
  #serializable;
  constructor(parent) {
    super();
    const {
      map,
      hash,
      transfer
    } = parent.serializable;
    const clone = structuredClone(map, transfer ? {
      transfer
    } : null);
    this.#serializable = {
      map: clone,
      hash,
      transfer
    };
  }
  get print() {
    unreachable("Should not call PrintAnnotationStorage.print");
  }
  get serializable() {
    return this.#serializable;
  }
  get modifiedIds() {
    return shadow(this, "modifiedIds", {
      ids: /* @__PURE__ */ new Set(),
      hash: ""
    });
  }
};
var FontLoader = class {
  #systemFonts = /* @__PURE__ */ new Set();
  constructor({
    ownerDocument = globalThis.document,
    styleElement = null
  }) {
    this._document = ownerDocument;
    this.nativeFontFaces = /* @__PURE__ */ new Set();
    this.styleElement = null;
    this.loadingRequests = [];
    this.loadTestFontId = 0;
  }
  addNativeFontFace(nativeFontFace) {
    this.nativeFontFaces.add(nativeFontFace);
    this._document.fonts.add(nativeFontFace);
  }
  removeNativeFontFace(nativeFontFace) {
    this.nativeFontFaces.delete(nativeFontFace);
    this._document.fonts.delete(nativeFontFace);
  }
  insertRule(rule) {
    if (!this.styleElement) {
      this.styleElement = this._document.createElement("style");
      this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement);
    }
    const styleSheet = this.styleElement.sheet;
    styleSheet.insertRule(rule, styleSheet.cssRules.length);
  }
  clear() {
    for (const nativeFontFace of this.nativeFontFaces) {
      this._document.fonts.delete(nativeFontFace);
    }
    this.nativeFontFaces.clear();
    this.#systemFonts.clear();
    if (this.styleElement) {
      this.styleElement.remove();
      this.styleElement = null;
    }
  }
  async loadSystemFont({
    systemFontInfo: info2,
    disableFontFace,
    _inspectFont
  }) {
    if (!info2 || this.#systemFonts.has(info2.loadedName)) {
      return;
    }
    assert(!disableFontFace, "loadSystemFont shouldn't be called when `disableFontFace` is set.");
    if (this.isFontLoadingAPISupported) {
      const {
        loadedName,
        src,
        style
      } = info2;
      const fontFace = new FontFace(loadedName, src, style);
      this.addNativeFontFace(fontFace);
      try {
        await fontFace.load();
        this.#systemFonts.add(loadedName);
        _inspectFont?.(info2);
      } catch {
        warn(`Cannot load system font: ${info2.baseFontName}, installing it could help to improve PDF rendering.`);
        this.removeNativeFontFace(fontFace);
      }
      return;
    }
    unreachable("Not implemented: loadSystemFont without the Font Loading API.");
  }
  async bind(font) {
    if (font.attached || font.missingFile && !font.systemFontInfo) {
      return;
    }
    font.attached = true;
    if (font.systemFontInfo) {
      await this.loadSystemFont(font);
      return;
    }
    if (this.isFontLoadingAPISupported) {
      const nativeFontFace = font.createNativeFontFace();
      if (nativeFontFace) {
        this.addNativeFontFace(nativeFontFace);
        try {
          await nativeFontFace.loaded;
        } catch (ex) {
          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);
          font.disableFontFace = true;
          throw ex;
        }
      }
      return;
    }
    const rule = font.createFontFaceRule();
    if (rule) {
      this.insertRule(rule);
      if (this.isSyncFontLoadingSupported) {
        return;
      }
      await new Promise((resolve) => {
        const request = this._queueLoadingCallback(resolve);
        this._prepareFontLoadEvent(font, request);
      });
    }
  }
  get isFontLoadingAPISupported() {
    const hasFonts = !!this._document?.fonts;
    return shadow(this, "isFontLoadingAPISupported", hasFonts);
  }
  get isSyncFontLoadingSupported() {
    return shadow(this, "isSyncFontLoadingSupported", isNodeJS || util_FeatureTest.platform.isFirefox);
  }
  _queueLoadingCallback(callback) {
    function completeRequest() {
      assert(!request.done, "completeRequest() cannot be called twice.");
      request.done = true;
      while (loadingRequests.length > 0 && loadingRequests[0].done) {
        const otherRequest = loadingRequests.shift();
        setTimeout(otherRequest.callback, 0);
      }
    }
    const {
      loadingRequests
    } = this;
    const request = {
      done: false,
      complete: completeRequest,
      callback
    };
    loadingRequests.push(request);
    return request;
  }
  get _loadTestFont() {
    const testFont = atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");
    return shadow(this, "_loadTestFont", testFont);
  }
  _prepareFontLoadEvent(font, request) {
    function int32(data2, offset) {
      return data2.charCodeAt(offset) << 24 | data2.charCodeAt(offset + 1) << 16 | data2.charCodeAt(offset + 2) << 8 | data2.charCodeAt(offset + 3) & 255;
    }
    function spliceString(s, offset, remove, insert) {
      const chunk1 = s.substring(0, offset);
      const chunk2 = s.substring(offset + remove);
      return chunk1 + insert + chunk2;
    }
    let i, ii;
    const canvas2 = this._document.createElement("canvas");
    canvas2.width = 1;
    canvas2.height = 1;
    const ctx = canvas2.getContext("2d");
    let called = 0;
    function isFontReady(name, callback) {
      if (++called > 30) {
        warn("Load test font never loaded.");
        callback();
        return;
      }
      ctx.font = "30px " + name;
      ctx.fillText(".", 0, 20);
      const imageData = ctx.getImageData(0, 0, 1, 1);
      if (imageData.data[3] > 0) {
        callback();
        return;
      }
      setTimeout(isFontReady.bind(null, name, callback));
    }
    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;
    let data = this._loadTestFont;
    const COMMENT_OFFSET = 976;
    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);
    const CFF_CHECKSUM_OFFSET = 16;
    const XXXX_VALUE = 1482184792;
    let checksum = int32(data, CFF_CHECKSUM_OFFSET);
    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {
      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;
    }
    if (i < loadTestFontId.length) {
      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + "XXX", i) | 0;
    }
    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));
    const url = `url(data:font/opentype;base64,${btoa(data)});`;
    const rule = `@font-face {font-family:"${loadTestFontId}";src:${url}}`;
    this.insertRule(rule);
    const div = this._document.createElement("div");
    div.style.visibility = "hidden";
    div.style.width = div.style.height = "10px";
    div.style.position = "absolute";
    div.style.top = div.style.left = "0px";
    for (const name of [font.loadedName, loadTestFontId]) {
      const span = this._document.createElement("span");
      span.textContent = "Hi";
      span.style.fontFamily = name;
      div.append(span);
    }
    this._document.body.append(div);
    isFontReady(loadTestFontId, () => {
      div.remove();
      request.complete();
    });
  }
};
var FontFaceObject = class {
  constructor(translatedData, inspectFont = null) {
    this.compiledGlyphs = /* @__PURE__ */ Object.create(null);
    for (const i in translatedData) {
      this[i] = translatedData[i];
    }
    this._inspectFont = inspectFont;
  }
  createNativeFontFace() {
    if (!this.data || this.disableFontFace) {
      return null;
    }
    let nativeFontFace;
    if (!this.cssFontInfo) {
      nativeFontFace = new FontFace(this.loadedName, this.data, {});
    } else {
      const css = {
        weight: this.cssFontInfo.fontWeight
      };
      if (this.cssFontInfo.italicAngle) {
        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;
      }
      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);
    }
    this._inspectFont?.(this);
    return nativeFontFace;
  }
  createFontFaceRule() {
    if (!this.data || this.disableFontFace) {
      return null;
    }
    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;
    let rule;
    if (!this.cssFontInfo) {
      rule = `@font-face {font-family:"${this.loadedName}";src:${url}}`;
    } else {
      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;
      if (this.cssFontInfo.italicAngle) {
        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;
      }
      rule = `@font-face {font-family:"${this.cssFontInfo.fontFamily}";${css}src:${url}}`;
    }
    this._inspectFont?.(this, url);
    return rule;
  }
  getPathGenerator(objs, character) {
    if (this.compiledGlyphs[character] !== void 0) {
      return this.compiledGlyphs[character];
    }
    const objId = this.loadedName + "_path_" + character;
    let cmds;
    try {
      cmds = objs.get(objId);
    } catch (ex) {
      warn(`getPathGenerator - ignoring character: "${ex}".`);
    }
    const path = new Path2D(cmds || "");
    if (!this.fontExtraProperties) {
      objs.delete(objId);
    }
    return this.compiledGlyphs[character] = path;
  }
};
var CallbackKind = {
  DATA: 1,
  ERROR: 2
};
var StreamKind = {
  CANCEL: 1,
  CANCEL_COMPLETE: 2,
  CLOSE: 3,
  ENQUEUE: 4,
  ERROR: 5,
  PULL: 6,
  PULL_COMPLETE: 7,
  START_COMPLETE: 8
};
function onFn() {
}
function wrapReason(ex) {
  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {
    return ex;
  }
  if (!(ex instanceof Error || typeof ex === "object" && ex !== null)) {
    unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.');
  }
  switch (ex.name) {
    case "AbortException":
      return new AbortException(ex.message);
    case "InvalidPDFException":
      return new InvalidPDFException(ex.message);
    case "PasswordException":
      return new PasswordException(ex.message, ex.code);
    case "ResponseException":
      return new ResponseException(ex.message, ex.status, ex.missing);
    case "UnknownErrorException":
      return new UnknownErrorException(ex.message, ex.details);
  }
  return new UnknownErrorException(ex.message, ex.toString());
}
var MessageHandler = class {
  #messageAC = new AbortController();
  constructor(sourceName, targetName, comObj) {
    this.sourceName = sourceName;
    this.targetName = targetName;
    this.comObj = comObj;
    this.callbackId = 1;
    this.streamId = 1;
    this.streamSinks = /* @__PURE__ */ Object.create(null);
    this.streamControllers = /* @__PURE__ */ Object.create(null);
    this.callbackCapabilities = /* @__PURE__ */ Object.create(null);
    this.actionHandler = /* @__PURE__ */ Object.create(null);
    comObj.addEventListener("message", this.#onMessage.bind(this), {
      signal: this.#messageAC.signal
    });
  }
  #onMessage({
    data
  }) {
    if (data.targetName !== this.sourceName) {
      return;
    }
    if (data.stream) {
      this.#processStreamMessage(data);
      return;
    }
    if (data.callback) {
      const callbackId = data.callbackId;
      const capability = this.callbackCapabilities[callbackId];
      if (!capability) {
        throw new Error(`Cannot resolve callback ${callbackId}`);
      }
      delete this.callbackCapabilities[callbackId];
      if (data.callback === CallbackKind.DATA) {
        capability.resolve(data.data);
      } else if (data.callback === CallbackKind.ERROR) {
        capability.reject(wrapReason(data.reason));
      } else {
        throw new Error("Unexpected callback case");
      }
      return;
    }
    const action = this.actionHandler[data.action];
    if (!action) {
      throw new Error(`Unknown action from worker: ${data.action}`);
    }
    if (data.callbackId) {
      const sourceName = this.sourceName, targetName = data.sourceName, comObj = this.comObj;
      Promise.try(action, data.data).then(function(result) {
        comObj.postMessage({
          sourceName,
          targetName,
          callback: CallbackKind.DATA,
          callbackId: data.callbackId,
          data: result
        });
      }, function(reason) {
        comObj.postMessage({
          sourceName,
          targetName,
          callback: CallbackKind.ERROR,
          callbackId: data.callbackId,
          reason: wrapReason(reason)
        });
      });
      return;
    }
    if (data.streamId) {
      this.#createStreamSink(data);
      return;
    }
    action(data.data);
  }
  on(actionName, handler) {
    const ah = this.actionHandler;
    if (ah[actionName]) {
      throw new Error(`There is already an actionName called "${actionName}"`);
    }
    ah[actionName] = handler;
  }
  send(actionName, data, transfers) {
    this.comObj.postMessage({
      sourceName: this.sourceName,
      targetName: this.targetName,
      action: actionName,
      data
    }, transfers);
  }
  sendWithPromise(actionName, data, transfers) {
    const callbackId = this.callbackId++;
    const capability = Promise.withResolvers();
    this.callbackCapabilities[callbackId] = capability;
    try {
      this.comObj.postMessage({
        sourceName: this.sourceName,
        targetName: this.targetName,
        action: actionName,
        callbackId,
        data
      }, transfers);
    } catch (ex) {
      capability.reject(ex);
    }
    return capability.promise;
  }
  sendWithStream(actionName, data, queueingStrategy, transfers) {
    const streamId = this.streamId++, sourceName = this.sourceName, targetName = this.targetName, comObj = this.comObj;
    return new ReadableStream({
      start: (controller) => {
        const startCapability = Promise.withResolvers();
        this.streamControllers[streamId] = {
          controller,
          startCall: startCapability,
          pullCall: null,
          cancelCall: null,
          isClosed: false
        };
        comObj.postMessage({
          sourceName,
          targetName,
          action: actionName,
          streamId,
          data,
          desiredSize: controller.desiredSize
        }, transfers);
        return startCapability.promise;
      },
      pull: (controller) => {
        const pullCapability = Promise.withResolvers();
        this.streamControllers[streamId].pullCall = pullCapability;
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.PULL,
          streamId,
          desiredSize: controller.desiredSize
        });
        return pullCapability.promise;
      },
      cancel: (reason) => {
        assert(reason instanceof Error, "cancel must have a valid reason");
        const cancelCapability = Promise.withResolvers();
        this.streamControllers[streamId].cancelCall = cancelCapability;
        this.streamControllers[streamId].isClosed = true;
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.CANCEL,
          streamId,
          reason: wrapReason(reason)
        });
        return cancelCapability.promise;
      }
    }, queueingStrategy);
  }
  #createStreamSink(data) {
    const streamId = data.streamId, sourceName = this.sourceName, targetName = data.sourceName, comObj = this.comObj;
    const self = this, action = this.actionHandler[data.action];
    const streamSink = {
      enqueue(chunk, size = 1, transfers) {
        if (this.isCancelled) {
          return;
        }
        const lastDesiredSize = this.desiredSize;
        this.desiredSize -= size;
        if (lastDesiredSize > 0 && this.desiredSize <= 0) {
          this.sinkCapability = Promise.withResolvers();
          this.ready = this.sinkCapability.promise;
        }
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.ENQUEUE,
          streamId,
          chunk
        }, transfers);
      },
      close() {
        if (this.isCancelled) {
          return;
        }
        this.isCancelled = true;
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.CLOSE,
          streamId
        });
        delete self.streamSinks[streamId];
      },
      error(reason) {
        assert(reason instanceof Error, "error must have a valid reason");
        if (this.isCancelled) {
          return;
        }
        this.isCancelled = true;
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.ERROR,
          streamId,
          reason: wrapReason(reason)
        });
      },
      sinkCapability: Promise.withResolvers(),
      onPull: null,
      onCancel: null,
      isCancelled: false,
      desiredSize: data.desiredSize,
      ready: null
    };
    streamSink.sinkCapability.resolve();
    streamSink.ready = streamSink.sinkCapability.promise;
    this.streamSinks[streamId] = streamSink;
    Promise.try(action, data.data, streamSink).then(function() {
      comObj.postMessage({
        sourceName,
        targetName,
        stream: StreamKind.START_COMPLETE,
        streamId,
        success: true
      });
    }, function(reason) {
      comObj.postMessage({
        sourceName,
        targetName,
        stream: StreamKind.START_COMPLETE,
        streamId,
        reason: wrapReason(reason)
      });
    });
  }
  #processStreamMessage(data) {
    const streamId = data.streamId, sourceName = this.sourceName, targetName = data.sourceName, comObj = this.comObj;
    const streamController = this.streamControllers[streamId], streamSink = this.streamSinks[streamId];
    switch (data.stream) {
      case StreamKind.START_COMPLETE:
        if (data.success) {
          streamController.startCall.resolve();
        } else {
          streamController.startCall.reject(wrapReason(data.reason));
        }
        break;
      case StreamKind.PULL_COMPLETE:
        if (data.success) {
          streamController.pullCall.resolve();
        } else {
          streamController.pullCall.reject(wrapReason(data.reason));
        }
        break;
      case StreamKind.PULL:
        if (!streamSink) {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.PULL_COMPLETE,
            streamId,
            success: true
          });
          break;
        }
        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {
          streamSink.sinkCapability.resolve();
        }
        streamSink.desiredSize = data.desiredSize;
        Promise.try(streamSink.onPull || onFn).then(function() {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.PULL_COMPLETE,
            streamId,
            success: true
          });
        }, function(reason) {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.PULL_COMPLETE,
            streamId,
            reason: wrapReason(reason)
          });
        });
        break;
      case StreamKind.ENQUEUE:
        assert(streamController, "enqueue should have stream controller");
        if (streamController.isClosed) {
          break;
        }
        streamController.controller.enqueue(data.chunk);
        break;
      case StreamKind.CLOSE:
        assert(streamController, "close should have stream controller");
        if (streamController.isClosed) {
          break;
        }
        streamController.isClosed = true;
        streamController.controller.close();
        this.#deleteStreamController(streamController, streamId);
        break;
      case StreamKind.ERROR:
        assert(streamController, "error should have stream controller");
        streamController.controller.error(wrapReason(data.reason));
        this.#deleteStreamController(streamController, streamId);
        break;
      case StreamKind.CANCEL_COMPLETE:
        if (data.success) {
          streamController.cancelCall.resolve();
        } else {
          streamController.cancelCall.reject(wrapReason(data.reason));
        }
        this.#deleteStreamController(streamController, streamId);
        break;
      case StreamKind.CANCEL:
        if (!streamSink) {
          break;
        }
        const dataReason = wrapReason(data.reason);
        Promise.try(streamSink.onCancel || onFn, dataReason).then(function() {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.CANCEL_COMPLETE,
            streamId,
            success: true
          });
        }, function(reason) {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.CANCEL_COMPLETE,
            streamId,
            reason: wrapReason(reason)
          });
        });
        streamSink.sinkCapability.reject(dataReason);
        streamSink.isCancelled = true;
        delete this.streamSinks[streamId];
        break;
      default:
        throw new Error("Unexpected stream case");
    }
  }
  async #deleteStreamController(streamController, streamId) {
    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);
    delete this.streamControllers[streamId];
  }
  destroy() {
    this.#messageAC?.abort();
    this.#messageAC = null;
  }
};
var BaseCanvasFactory = class {
  #enableHWA = false;
  constructor({
    enableHWA = false
  }) {
    this.#enableHWA = enableHWA;
  }
  create(width, height) {
    if (width <= 0 || height <= 0) {
      throw new Error("Invalid canvas size");
    }
    const canvas2 = this._createCanvas(width, height);
    return {
      canvas: canvas2,
      context: canvas2.getContext("2d", {
        willReadFrequently: !this.#enableHWA
      })
    };
  }
  reset(canvasAndContext, width, height) {
    if (!canvasAndContext.canvas) {
      throw new Error("Canvas is not specified");
    }
    if (width <= 0 || height <= 0) {
      throw new Error("Invalid canvas size");
    }
    canvasAndContext.canvas.width = width;
    canvasAndContext.canvas.height = height;
  }
  destroy(canvasAndContext) {
    if (!canvasAndContext.canvas) {
      throw new Error("Canvas is not specified");
    }
    canvasAndContext.canvas.width = 0;
    canvasAndContext.canvas.height = 0;
    canvasAndContext.canvas = null;
    canvasAndContext.context = null;
  }
  _createCanvas(width, height) {
    unreachable("Abstract method `_createCanvas` called.");
  }
};
var DOMCanvasFactory = class extends BaseCanvasFactory {
  constructor({
    ownerDocument = globalThis.document,
    enableHWA = false
  }) {
    super({
      enableHWA
    });
    this._document = ownerDocument;
  }
  _createCanvas(width, height) {
    const canvas2 = this._document.createElement("canvas");
    canvas2.width = width;
    canvas2.height = height;
    return canvas2;
  }
};
var BaseCMapReaderFactory = class {
  constructor({
    baseUrl = null,
    isCompressed = true
  }) {
    this.baseUrl = baseUrl;
    this.isCompressed = isCompressed;
  }
  async fetch({
    name
  }) {
    if (!this.baseUrl) {
      throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");
    }
    if (!name) {
      throw new Error("CMap name must be specified.");
    }
    const url = this.baseUrl + name + (this.isCompressed ? ".bcmap" : "");
    return this._fetch(url).then((cMapData) => ({
      cMapData,
      isCompressed: this.isCompressed
    })).catch((reason) => {
      throw new Error(`Unable to load ${this.isCompressed ? "binary " : ""}CMap at: ${url}`);
    });
  }
  async _fetch(url) {
    unreachable("Abstract method `_fetch` called.");
  }
};
var DOMCMapReaderFactory = class extends BaseCMapReaderFactory {
  async _fetch(url) {
    const data = await fetchData(url, this.isCompressed ? "arraybuffer" : "text");
    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);
  }
};
var BaseFilterFactory = class {
  addFilter(maps) {
    return "none";
  }
  addHCMFilter(fgColor, bgColor) {
    return "none";
  }
  addAlphaFilter(map) {
    return "none";
  }
  addLuminosityFilter(map) {
    return "none";
  }
  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {
    return "none";
  }
  destroy(keepHCM = false) {
  }
};
var DOMFilterFactory = class extends BaseFilterFactory {
  #baseUrl;
  #_cache;
  #_defs;
  #docId;
  #document;
  #_hcmCache;
  #id = 0;
  constructor({
    docId,
    ownerDocument = globalThis.document
  }) {
    super();
    this.#docId = docId;
    this.#document = ownerDocument;
  }
  get #cache() {
    return this.#_cache ||= /* @__PURE__ */ new Map();
  }
  get #hcmCache() {
    return this.#_hcmCache ||= /* @__PURE__ */ new Map();
  }
  get #defs() {
    if (!this.#_defs) {
      const div = this.#document.createElement("div");
      const {
        style
      } = div;
      style.visibility = "hidden";
      style.contain = "strict";
      style.width = style.height = 0;
      style.position = "absolute";
      style.top = style.left = 0;
      style.zIndex = -1;
      const svg = this.#document.createElementNS(SVG_NS, "svg");
      svg.setAttribute("width", 0);
      svg.setAttribute("height", 0);
      this.#_defs = this.#document.createElementNS(SVG_NS, "defs");
      div.append(svg);
      svg.append(this.#_defs);
      this.#document.body.append(div);
    }
    return this.#_defs;
  }
  #createTables(maps) {
    if (maps.length === 1) {
      const mapR2 = maps[0];
      const buffer = new Array(256);
      for (let i = 0; i < 256; i++) {
        buffer[i] = mapR2[i] / 255;
      }
      const table = buffer.join(",");
      return [table, table, table];
    }
    const [mapR, mapG, mapB] = maps;
    const bufferR = new Array(256);
    const bufferG = new Array(256);
    const bufferB = new Array(256);
    for (let i = 0; i < 256; i++) {
      bufferR[i] = mapR[i] / 255;
      bufferG[i] = mapG[i] / 255;
      bufferB[i] = mapB[i] / 255;
    }
    return [bufferR.join(","), bufferG.join(","), bufferB.join(",")];
  }
  #createUrl(id) {
    if (this.#baseUrl === void 0) {
      this.#baseUrl = "";
      const url = this.#document.URL;
      if (url !== this.#document.baseURI) {
        if (isDataScheme(url)) {
          warn('#createUrl: ignore "data:"-URL for performance reasons.');
        } else {
          this.#baseUrl = url.split("#", 1)[0];
        }
      }
    }
    return `url(${this.#baseUrl}#${id})`;
  }
  addFilter(maps) {
    if (!maps) {
      return "none";
    }
    let value = this.#cache.get(maps);
    if (value) {
      return value;
    }
    const [tableR, tableG, tableB] = this.#createTables(maps);
    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;
    value = this.#cache.get(key);
    if (value) {
      this.#cache.set(maps, value);
      return value;
    }
    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;
    const url = this.#createUrl(id);
    this.#cache.set(maps, url);
    this.#cache.set(key, url);
    const filter = this.#createFilter(id);
    this.#addTransferMapConversion(tableR, tableG, tableB, filter);
    return url;
  }
  addHCMFilter(fgColor, bgColor) {
    const key = `${fgColor}-${bgColor}`;
    const filterName = "base";
    let info2 = this.#hcmCache.get(filterName);
    if (info2?.key === key) {
      return info2.url;
    }
    if (info2) {
      info2.filter?.remove();
      info2.key = key;
      info2.url = "none";
      info2.filter = null;
    } else {
      info2 = {
        key,
        url: "none",
        filter: null
      };
      this.#hcmCache.set(filterName, info2);
    }
    if (!fgColor || !bgColor) {
      return info2.url;
    }
    const fgRGB = this.#getRGB(fgColor);
    fgColor = Util.makeHexColor(...fgRGB);
    const bgRGB = this.#getRGB(bgColor);
    bgColor = Util.makeHexColor(...bgRGB);
    this.#defs.style.color = "";
    if (fgColor === "#000000" && bgColor === "#ffffff" || fgColor === bgColor) {
      return info2.url;
    }
    const map = new Array(256);
    for (let i = 0; i <= 255; i++) {
      const x = i / 255;
      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;
    }
    const table = map.join(",");
    const id = `g_${this.#docId}_hcm_filter`;
    const filter = info2.filter = this.#createFilter(id);
    this.#addTransferMapConversion(table, table, table, filter);
    this.#addGrayConversion(filter);
    const getSteps = (c, n) => {
      const start = fgRGB[c] / 255;
      const end = bgRGB[c] / 255;
      const arr = new Array(n + 1);
      for (let i = 0; i <= n; i++) {
        arr[i] = start + i / n * (end - start);
      }
      return arr.join(",");
    };
    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);
    info2.url = this.#createUrl(id);
    return info2.url;
  }
  addAlphaFilter(map) {
    let value = this.#cache.get(map);
    if (value) {
      return value;
    }
    const [tableA] = this.#createTables([map]);
    const key = `alpha_${tableA}`;
    value = this.#cache.get(key);
    if (value) {
      this.#cache.set(map, value);
      return value;
    }
    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;
    const url = this.#createUrl(id);
    this.#cache.set(map, url);
    this.#cache.set(key, url);
    const filter = this.#createFilter(id);
    this.#addTransferMapAlphaConversion(tableA, filter);
    return url;
  }
  addLuminosityFilter(map) {
    let value = this.#cache.get(map || "luminosity");
    if (value) {
      return value;
    }
    let tableA, key;
    if (map) {
      [tableA] = this.#createTables([map]);
      key = `luminosity_${tableA}`;
    } else {
      key = "luminosity";
    }
    value = this.#cache.get(key);
    if (value) {
      this.#cache.set(map, value);
      return value;
    }
    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;
    const url = this.#createUrl(id);
    this.#cache.set(map, url);
    this.#cache.set(key, url);
    const filter = this.#createFilter(id);
    this.#addLuminosityConversion(filter);
    if (map) {
      this.#addTransferMapAlphaConversion(tableA, filter);
    }
    return url;
  }
  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {
    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;
    let info2 = this.#hcmCache.get(filterName);
    if (info2?.key === key) {
      return info2.url;
    }
    if (info2) {
      info2.filter?.remove();
      info2.key = key;
      info2.url = "none";
      info2.filter = null;
    } else {
      info2 = {
        key,
        url: "none",
        filter: null
      };
      this.#hcmCache.set(filterName, info2);
    }
    if (!fgColor || !bgColor) {
      return info2.url;
    }
    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));
    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);
    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);
    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));
    if (bgGray < fgGray) {
      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];
    }
    this.#defs.style.color = "";
    const getSteps = (fg, bg, n) => {
      const arr = new Array(256);
      const step = (bgGray - fgGray) / n;
      const newStart = fg / 255;
      const newStep = (bg - fg) / (255 * n);
      let prev = 0;
      for (let i = 0; i <= n; i++) {
        const k = Math.round(fgGray + i * step);
        const value = newStart + i * newStep;
        for (let j = prev; j <= k; j++) {
          arr[j] = value;
        }
        prev = k + 1;
      }
      for (let i = prev; i < 256; i++) {
        arr[i] = arr[prev - 1];
      }
      return arr.join(",");
    };
    const id = `g_${this.#docId}_hcm_${filterName}_filter`;
    const filter = info2.filter = this.#createFilter(id);
    this.#addGrayConversion(filter);
    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);
    info2.url = this.#createUrl(id);
    return info2.url;
  }
  destroy(keepHCM = false) {
    if (keepHCM && this.#_hcmCache?.size) {
      return;
    }
    this.#_defs?.parentNode.parentNode.remove();
    this.#_defs = null;
    this.#_cache?.clear();
    this.#_cache = null;
    this.#_hcmCache?.clear();
    this.#_hcmCache = null;
    this.#id = 0;
  }
  #addLuminosityConversion(filter) {
    const feColorMatrix = this.#document.createElementNS(SVG_NS, "feColorMatrix");
    feColorMatrix.setAttribute("type", "matrix");
    feColorMatrix.setAttribute("values", "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0");
    filter.append(feColorMatrix);
  }
  #addGrayConversion(filter) {
    const feColorMatrix = this.#document.createElementNS(SVG_NS, "feColorMatrix");
    feColorMatrix.setAttribute("type", "matrix");
    feColorMatrix.setAttribute("values", "0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0");
    filter.append(feColorMatrix);
  }
  #createFilter(id) {
    const filter = this.#document.createElementNS(SVG_NS, "filter");
    filter.setAttribute("color-interpolation-filters", "sRGB");
    filter.setAttribute("id", id);
    this.#defs.append(filter);
    return filter;
  }
  #appendFeFunc(feComponentTransfer, func, table) {
    const feFunc = this.#document.createElementNS(SVG_NS, func);
    feFunc.setAttribute("type", "discrete");
    feFunc.setAttribute("tableValues", table);
    feComponentTransfer.append(feFunc);
  }
  #addTransferMapConversion(rTable, gTable, bTable, filter) {
    const feComponentTransfer = this.#document.createElementNS(SVG_NS, "feComponentTransfer");
    filter.append(feComponentTransfer);
    this.#appendFeFunc(feComponentTransfer, "feFuncR", rTable);
    this.#appendFeFunc(feComponentTransfer, "feFuncG", gTable);
    this.#appendFeFunc(feComponentTransfer, "feFuncB", bTable);
  }
  #addTransferMapAlphaConversion(aTable, filter) {
    const feComponentTransfer = this.#document.createElementNS(SVG_NS, "feComponentTransfer");
    filter.append(feComponentTransfer);
    this.#appendFeFunc(feComponentTransfer, "feFuncA", aTable);
  }
  #getRGB(color) {
    this.#defs.style.color = color;
    return getRGB(getComputedStyle(this.#defs).getPropertyValue("color"));
  }
};
var BaseStandardFontDataFactory = class {
  constructor({
    baseUrl = null
  }) {
    this.baseUrl = baseUrl;
  }
  async fetch({
    filename
  }) {
    if (!this.baseUrl) {
      throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");
    }
    if (!filename) {
      throw new Error("Font filename must be specified.");
    }
    const url = `${this.baseUrl}${filename}`;
    return this._fetch(url).catch((reason) => {
      throw new Error(`Unable to load font data at: ${url}`);
    });
  }
  async _fetch(url) {
    unreachable("Abstract method `_fetch` called.");
  }
};
var DOMStandardFontDataFactory = class extends BaseStandardFontDataFactory {
  async _fetch(url) {
    const data = await fetchData(url, "arraybuffer");
    return new Uint8Array(data);
  }
};
var BaseWasmFactory = class {
  constructor({
    baseUrl = null
  }) {
    this.baseUrl = baseUrl;
  }
  async fetch({
    filename
  }) {
    if (!this.baseUrl) {
      throw new Error("Ensure that the `wasmUrl` API parameter is provided.");
    }
    if (!filename) {
      throw new Error("Wasm filename must be specified.");
    }
    const url = `${this.baseUrl}${filename}`;
    return this._fetch(url).catch((reason) => {
      throw new Error(`Unable to load wasm data at: ${url}`);
    });
  }
  async _fetch(url) {
    unreachable("Abstract method `_fetch` called.");
  }
};
var DOMWasmFactory = class extends BaseWasmFactory {
  async _fetch(url) {
    const data = await fetchData(url, "arraybuffer");
    return new Uint8Array(data);
  }
};
if (isNodeJS) {
  warn("Please use the `legacy` build in Node.js environments.");
}
async function node_utils_fetchData(url) {
  const fs = process.getBuiltinModule("fs");
  const data = await fs.promises.readFile(url);
  return new Uint8Array(data);
}
var NodeFilterFactory = class extends BaseFilterFactory {
};
var NodeCanvasFactory = class extends BaseCanvasFactory {
  _createCanvas(width, height) {
    const require2 = process.getBuiltinModule("module").createRequire(import.meta.url);
    const canvas2 = require2("@napi-rs/canvas");
    return canvas2.createCanvas(width, height);
  }
};
var NodeCMapReaderFactory = class extends BaseCMapReaderFactory {
  async _fetch(url) {
    return node_utils_fetchData(url);
  }
};
var NodeStandardFontDataFactory = class extends BaseStandardFontDataFactory {
  async _fetch(url) {
    return node_utils_fetchData(url);
  }
};
var NodeWasmFactory = class extends BaseWasmFactory {
  async _fetch(url) {
    return node_utils_fetchData(url);
  }
};
var PathType = {
  FILL: "Fill",
  STROKE: "Stroke",
  SHADING: "Shading"
};
function applyBoundingBox(ctx, bbox) {
  if (!bbox) {
    return;
  }
  const width = bbox[2] - bbox[0];
  const height = bbox[3] - bbox[1];
  const region = new Path2D();
  region.rect(bbox[0], bbox[1], width, height);
  ctx.clip(region);
}
var BaseShadingPattern = class {
  isModifyingCurrentTransform() {
    return false;
  }
  getPattern() {
    unreachable("Abstract method `getPattern` called.");
  }
};
var RadialAxialShadingPattern = class extends BaseShadingPattern {
  constructor(IR) {
    super();
    this._type = IR[1];
    this._bbox = IR[2];
    this._colorStops = IR[3];
    this._p0 = IR[4];
    this._p1 = IR[5];
    this._r0 = IR[6];
    this._r1 = IR[7];
    this.matrix = null;
  }
  _createGradient(ctx) {
    let grad;
    if (this._type === "axial") {
      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);
    } else if (this._type === "radial") {
      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);
    }
    for (const colorStop of this._colorStops) {
      grad.addColorStop(colorStop[0], colorStop[1]);
    }
    return grad;
  }
  getPattern(ctx, owner, inverse, pathType) {
    let pattern;
    if (pathType === PathType.STROKE || pathType === PathType.FILL) {
      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];
      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;
      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;
      const tmpCanvas = owner.cachedCanvases.getCanvas("pattern", width, height);
      const tmpCtx = tmpCanvas.context;
      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);
      tmpCtx.beginPath();
      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);
      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);
      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);
      tmpCtx.transform(...owner.baseTransform);
      if (this.matrix) {
        tmpCtx.transform(...this.matrix);
      }
      applyBoundingBox(tmpCtx, this._bbox);
      tmpCtx.fillStyle = this._createGradient(tmpCtx);
      tmpCtx.fill();
      pattern = ctx.createPattern(tmpCanvas.canvas, "no-repeat");
      const domMatrix = new DOMMatrix(inverse);
      pattern.setTransform(domMatrix);
    } else {
      applyBoundingBox(ctx, this._bbox);
      pattern = this._createGradient(ctx);
    }
    return pattern;
  }
};
function drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {
  const coords = context.coords, colors = context.colors;
  const bytes = data.data, rowSize = data.width * 4;
  let tmp;
  if (coords[p1 + 1] > coords[p2 + 1]) {
    tmp = p1;
    p1 = p2;
    p2 = tmp;
    tmp = c1;
    c1 = c2;
    c2 = tmp;
  }
  if (coords[p2 + 1] > coords[p3 + 1]) {
    tmp = p2;
    p2 = p3;
    p3 = tmp;
    tmp = c2;
    c2 = c3;
    c3 = tmp;
  }
  if (coords[p1 + 1] > coords[p2 + 1]) {
    tmp = p1;
    p1 = p2;
    p2 = tmp;
    tmp = c1;
    c1 = c2;
    c2 = tmp;
  }
  const x1 = (coords[p1] + context.offsetX) * context.scaleX;
  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;
  const x2 = (coords[p2] + context.offsetX) * context.scaleX;
  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;
  const x3 = (coords[p3] + context.offsetX) * context.scaleX;
  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;
  if (y1 >= y3) {
    return;
  }
  const c1r = colors[c1], c1g = colors[c1 + 1], c1b = colors[c1 + 2];
  const c2r = colors[c2], c2g = colors[c2 + 1], c2b = colors[c2 + 2];
  const c3r = colors[c3], c3g = colors[c3 + 1], c3b = colors[c3 + 2];
  const minY = Math.round(y1), maxY = Math.round(y3);
  let xa, car, cag, cab;
  let xb, cbr, cbg, cbb;
  for (let y = minY; y <= maxY; y++) {
    if (y < y2) {
      const k2 = y < y1 ? 0 : (y1 - y) / (y1 - y2);
      xa = x1 - (x1 - x2) * k2;
      car = c1r - (c1r - c2r) * k2;
      cag = c1g - (c1g - c2g) * k2;
      cab = c1b - (c1b - c2b) * k2;
    } else {
      let k2;
      if (y > y3) {
        k2 = 1;
      } else if (y2 === y3) {
        k2 = 0;
      } else {
        k2 = (y2 - y) / (y2 - y3);
      }
      xa = x2 - (x2 - x3) * k2;
      car = c2r - (c2r - c3r) * k2;
      cag = c2g - (c2g - c3g) * k2;
      cab = c2b - (c2b - c3b) * k2;
    }
    let k;
    if (y < y1) {
      k = 0;
    } else if (y > y3) {
      k = 1;
    } else {
      k = (y1 - y) / (y1 - y3);
    }
    xb = x1 - (x1 - x3) * k;
    cbr = c1r - (c1r - c3r) * k;
    cbg = c1g - (c1g - c3g) * k;
    cbb = c1b - (c1b - c3b) * k;
    const x1_ = Math.round(Math.min(xa, xb));
    const x2_ = Math.round(Math.max(xa, xb));
    let j = rowSize * y + x1_ * 4;
    for (let x = x1_; x <= x2_; x++) {
      k = (xa - x) / (xa - xb);
      if (k < 0) {
        k = 0;
      } else if (k > 1) {
        k = 1;
      }
      bytes[j++] = car - (car - cbr) * k | 0;
      bytes[j++] = cag - (cag - cbg) * k | 0;
      bytes[j++] = cab - (cab - cbb) * k | 0;
      bytes[j++] = 255;
    }
  }
}
function drawFigure(data, figure, context) {
  const ps = figure.coords;
  const cs = figure.colors;
  let i, ii;
  switch (figure.type) {
    case "lattice":
      const verticesPerRow = figure.verticesPerRow;
      const rows = Math.floor(ps.length / verticesPerRow) - 1;
      const cols = verticesPerRow - 1;
      for (i = 0; i < rows; i++) {
        let q = i * verticesPerRow;
        for (let j = 0; j < cols; j++, q++) {
          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);
          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);
        }
      }
      break;
    case "triangles":
      for (i = 0, ii = ps.length; i < ii; i += 3) {
        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);
      }
      break;
    default:
      throw new Error("illegal figure");
  }
}
var MeshShadingPattern = class extends BaseShadingPattern {
  constructor(IR) {
    super();
    this._coords = IR[2];
    this._colors = IR[3];
    this._figures = IR[4];
    this._bounds = IR[5];
    this._bbox = IR[6];
    this._background = IR[7];
    this.matrix = null;
  }
  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {
    const EXPECTED_SCALE = 1.1;
    const MAX_PATTERN_SIZE = 3e3;
    const BORDER_SIZE = 2;
    const offsetX = Math.floor(this._bounds[0]);
    const offsetY = Math.floor(this._bounds[1]);
    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;
    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;
    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);
    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);
    const scaleX = boundsWidth / width;
    const scaleY = boundsHeight / height;
    const context = {
      coords: this._coords,
      colors: this._colors,
      offsetX: -offsetX,
      offsetY: -offsetY,
      scaleX: 1 / scaleX,
      scaleY: 1 / scaleY
    };
    const paddedWidth = width + BORDER_SIZE * 2;
    const paddedHeight = height + BORDER_SIZE * 2;
    const tmpCanvas = cachedCanvases.getCanvas("mesh", paddedWidth, paddedHeight);
    const tmpCtx = tmpCanvas.context;
    const data = tmpCtx.createImageData(width, height);
    if (backgroundColor) {
      const bytes = data.data;
      for (let i = 0, ii = bytes.length; i < ii; i += 4) {
        bytes[i] = backgroundColor[0];
        bytes[i + 1] = backgroundColor[1];
        bytes[i + 2] = backgroundColor[2];
        bytes[i + 3] = 255;
      }
    }
    for (const figure of this._figures) {
      drawFigure(data, figure, context);
    }
    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);
    const canvas2 = tmpCanvas.canvas;
    return {
      canvas: canvas2,
      offsetX: offsetX - BORDER_SIZE * scaleX,
      offsetY: offsetY - BORDER_SIZE * scaleY,
      scaleX,
      scaleY
    };
  }
  isModifyingCurrentTransform() {
    return true;
  }
  getPattern(ctx, owner, inverse, pathType) {
    applyBoundingBox(ctx, this._bbox);
    let scale;
    if (pathType === PathType.SHADING) {
      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));
    } else {
      scale = Util.singularValueDecompose2dScale(owner.baseTransform);
      if (this.matrix) {
        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);
        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];
      }
    }
    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);
    if (pathType !== PathType.SHADING) {
      ctx.setTransform(...owner.baseTransform);
      if (this.matrix) {
        ctx.transform(...this.matrix);
      }
    }
    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);
    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);
    return ctx.createPattern(temporaryPatternCanvas.canvas, "no-repeat");
  }
};
var DummyShadingPattern = class extends BaseShadingPattern {
  getPattern() {
    return "hotpink";
  }
};
function getShadingPattern(IR) {
  switch (IR[0]) {
    case "RadialAxial":
      return new RadialAxialShadingPattern(IR);
    case "Mesh":
      return new MeshShadingPattern(IR);
    case "Dummy":
      return new DummyShadingPattern();
  }
  throw new Error(`Unknown IR type: ${IR[0]}`);
}
var PaintType = {
  COLORED: 1,
  UNCOLORED: 2
};
var TilingPattern = class _TilingPattern {
  static MAX_PATTERN_SIZE = 3e3;
  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {
    this.color = IR[1];
    this.operatorList = IR[2];
    this.matrix = IR[3];
    this.bbox = IR[4];
    this.xstep = IR[5];
    this.ystep = IR[6];
    this.paintType = IR[7];
    this.tilingType = IR[8];
    this.ctx = ctx;
    this.canvasGraphicsFactory = canvasGraphicsFactory;
    this.baseTransform = baseTransform;
  }
  createPatternCanvas(owner) {
    const {
      bbox,
      operatorList,
      paintType,
      tilingType,
      color,
      canvasGraphicsFactory
    } = this;
    let {
      xstep,
      ystep
    } = this;
    xstep = Math.abs(xstep);
    ystep = Math.abs(ystep);
    info("TilingType: " + tilingType);
    const x0 = bbox[0], y0 = bbox[1], x1 = bbox[2], y1 = bbox[3];
    const width = x1 - x0;
    const height = y1 - y0;
    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);
    const curMatrixScale = Util.singularValueDecompose2dScale(this.baseTransform);
    const combinedScaleX = matrixScale[0] * curMatrixScale[0];
    const combinedScaleY = matrixScale[1] * curMatrixScale[1];
    let canvasWidth = width, canvasHeight = height, redrawHorizontally = false, redrawVertically = false;
    const xScaledStep = Math.ceil(xstep * combinedScaleX);
    const yScaledStep = Math.ceil(ystep * combinedScaleY);
    const xScaledWidth = Math.ceil(width * combinedScaleX);
    const yScaledHeight = Math.ceil(height * combinedScaleY);
    if (xScaledStep >= xScaledWidth) {
      canvasWidth = xstep;
    } else {
      redrawHorizontally = true;
    }
    if (yScaledStep >= yScaledHeight) {
      canvasHeight = ystep;
    } else {
      redrawVertically = true;
    }
    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);
    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);
    const tmpCanvas = owner.cachedCanvases.getCanvas("pattern", dimx.size, dimy.size);
    const tmpCtx = tmpCanvas.context;
    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);
    graphics.groupLevel = owner.groupLevel;
    this.setFillAndStrokeStyleToContext(graphics, paintType, color);
    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);
    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);
    tmpCtx.save();
    this.clipBbox(graphics, x0, y0, x1, y1);
    graphics.baseTransform = getCurrentTransform(graphics.ctx);
    graphics.executeOperatorList(operatorList);
    graphics.endDrawing();
    tmpCtx.restore();
    if (redrawHorizontally || redrawVertically) {
      const image = tmpCanvas.canvas;
      if (redrawHorizontally) {
        canvasWidth = xstep;
      }
      if (redrawVertically) {
        canvasHeight = ystep;
      }
      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);
      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);
      const xSize = dimx2.size;
      const ySize = dimy2.size;
      const tmpCanvas2 = owner.cachedCanvases.getCanvas("pattern-workaround", xSize, ySize);
      const tmpCtx2 = tmpCanvas2.context;
      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;
      const jj = redrawVertically ? Math.floor(height / ystep) : 0;
      for (let i = 0; i <= ii; i++) {
        for (let j = 0; j <= jj; j++) {
          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);
        }
      }
      return {
        canvas: tmpCanvas2.canvas,
        scaleX: dimx2.scale,
        scaleY: dimy2.scale,
        offsetX: x0,
        offsetY: y0
      };
    }
    return {
      canvas: tmpCanvas.canvas,
      scaleX: dimx.scale,
      scaleY: dimy.scale,
      offsetX: x0,
      offsetY: y0
    };
  }
  getSizeAndScale(step, realOutputSize, scale) {
    const maxSize = Math.max(_TilingPattern.MAX_PATTERN_SIZE, realOutputSize);
    let size = Math.ceil(step * scale);
    if (size >= maxSize) {
      size = maxSize;
    } else {
      scale = size / step;
    }
    return {
      scale,
      size
    };
  }
  clipBbox(graphics, x0, y0, x1, y1) {
    const bboxWidth = x1 - x0;
    const bboxHeight = y1 - y0;
    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);
    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [x0, y0, x1, y1]);
    graphics.clip();
    graphics.endPath();
  }
  setFillAndStrokeStyleToContext(graphics, paintType, color) {
    const context = graphics.ctx, current = graphics.current;
    switch (paintType) {
      case PaintType.COLORED:
        const ctx = this.ctx;
        context.fillStyle = ctx.fillStyle;
        context.strokeStyle = ctx.strokeStyle;
        current.fillColor = ctx.fillStyle;
        current.strokeColor = ctx.strokeStyle;
        break;
      case PaintType.UNCOLORED:
        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);
        context.fillStyle = cssColor;
        context.strokeStyle = cssColor;
        current.fillColor = cssColor;
        current.strokeColor = cssColor;
        break;
      default:
        throw new FormatError(`Unsupported paint type: ${paintType}`);
    }
  }
  isModifyingCurrentTransform() {
    return false;
  }
  getPattern(ctx, owner, inverse, pathType) {
    let matrix = inverse;
    if (pathType !== PathType.SHADING) {
      matrix = Util.transform(matrix, owner.baseTransform);
      if (this.matrix) {
        matrix = Util.transform(matrix, this.matrix);
      }
    }
    const temporaryPatternCanvas = this.createPatternCanvas(owner);
    let domMatrix = new DOMMatrix(matrix);
    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);
    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);
    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, "repeat");
    pattern.setTransform(domMatrix);
    return pattern;
  }
};
function convertBlackAndWhiteToRGBA({
  src,
  srcPos = 0,
  dest,
  width,
  height,
  nonBlackColor = 4294967295,
  inverseDecode = false
}) {
  const black = util_FeatureTest.isLittleEndian ? 4278190080 : 255;
  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];
  const widthInSource = width >> 3;
  const widthRemainder = width & 7;
  const srcLength = src.length;
  dest = new Uint32Array(dest.buffer);
  let destPos = 0;
  for (let i = 0; i < height; i++) {
    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {
      const elem2 = srcPos < srcLength ? src[srcPos] : 255;
      dest[destPos++] = elem2 & 128 ? oneMapping : zeroMapping;
      dest[destPos++] = elem2 & 64 ? oneMapping : zeroMapping;
      dest[destPos++] = elem2 & 32 ? oneMapping : zeroMapping;
      dest[destPos++] = elem2 & 16 ? oneMapping : zeroMapping;
      dest[destPos++] = elem2 & 8 ? oneMapping : zeroMapping;
      dest[destPos++] = elem2 & 4 ? oneMapping : zeroMapping;
      dest[destPos++] = elem2 & 2 ? oneMapping : zeroMapping;
      dest[destPos++] = elem2 & 1 ? oneMapping : zeroMapping;
    }
    if (widthRemainder === 0) {
      continue;
    }
    const elem = srcPos < srcLength ? src[srcPos++] : 255;
    for (let j = 0; j < widthRemainder; j++) {
      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;
    }
  }
  return {
    srcPos,
    destPos
  };
}
var MIN_FONT_SIZE = 16;
var MAX_FONT_SIZE = 100;
var EXECUTION_TIME = 15;
var EXECUTION_STEPS = 10;
var MAX_SIZE_TO_COMPILE = 1e3;
var FULL_CHUNK_HEIGHT = 16;
var SCALE_MATRIX = new DOMMatrix();
function mirrorContextOperations(ctx, destCtx) {
  if (ctx._removeMirroring) {
    throw new Error("Context is already forwarding operations.");
  }
  ctx.__originalSave = ctx.save;
  ctx.__originalRestore = ctx.restore;
  ctx.__originalRotate = ctx.rotate;
  ctx.__originalScale = ctx.scale;
  ctx.__originalTranslate = ctx.translate;
  ctx.__originalTransform = ctx.transform;
  ctx.__originalSetTransform = ctx.setTransform;
  ctx.__originalResetTransform = ctx.resetTransform;
  ctx.__originalClip = ctx.clip;
  ctx.__originalMoveTo = ctx.moveTo;
  ctx.__originalLineTo = ctx.lineTo;
  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;
  ctx.__originalRect = ctx.rect;
  ctx.__originalClosePath = ctx.closePath;
  ctx.__originalBeginPath = ctx.beginPath;
  ctx._removeMirroring = () => {
    ctx.save = ctx.__originalSave;
    ctx.restore = ctx.__originalRestore;
    ctx.rotate = ctx.__originalRotate;
    ctx.scale = ctx.__originalScale;
    ctx.translate = ctx.__originalTranslate;
    ctx.transform = ctx.__originalTransform;
    ctx.setTransform = ctx.__originalSetTransform;
    ctx.resetTransform = ctx.__originalResetTransform;
    ctx.clip = ctx.__originalClip;
    ctx.moveTo = ctx.__originalMoveTo;
    ctx.lineTo = ctx.__originalLineTo;
    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;
    ctx.rect = ctx.__originalRect;
    ctx.closePath = ctx.__originalClosePath;
    ctx.beginPath = ctx.__originalBeginPath;
    delete ctx._removeMirroring;
  };
  ctx.save = function ctxSave() {
    destCtx.save();
    this.__originalSave();
  };
  ctx.restore = function ctxRestore() {
    destCtx.restore();
    this.__originalRestore();
  };
  ctx.translate = function ctxTranslate(x, y) {
    destCtx.translate(x, y);
    this.__originalTranslate(x, y);
  };
  ctx.scale = function ctxScale(x, y) {
    destCtx.scale(x, y);
    this.__originalScale(x, y);
  };
  ctx.transform = function ctxTransform(a, b, c, d, e, f) {
    destCtx.transform(a, b, c, d, e, f);
    this.__originalTransform(a, b, c, d, e, f);
  };
  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {
    destCtx.setTransform(a, b, c, d, e, f);
    this.__originalSetTransform(a, b, c, d, e, f);
  };
  ctx.resetTransform = function ctxResetTransform() {
    destCtx.resetTransform();
    this.__originalResetTransform();
  };
  ctx.rotate = function ctxRotate(angle) {
    destCtx.rotate(angle);
    this.__originalRotate(angle);
  };
  ctx.clip = function ctxRotate(rule) {
    destCtx.clip(rule);
    this.__originalClip(rule);
  };
  ctx.moveTo = function(x, y) {
    destCtx.moveTo(x, y);
    this.__originalMoveTo(x, y);
  };
  ctx.lineTo = function(x, y) {
    destCtx.lineTo(x, y);
    this.__originalLineTo(x, y);
  };
  ctx.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {
    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);
    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);
  };
  ctx.rect = function(x, y, width, height) {
    destCtx.rect(x, y, width, height);
    this.__originalRect(x, y, width, height);
  };
  ctx.closePath = function() {
    destCtx.closePath();
    this.__originalClosePath();
  };
  ctx.beginPath = function() {
    destCtx.beginPath();
    this.__originalBeginPath();
  };
}
var CachedCanvases = class {
  constructor(canvasFactory) {
    this.canvasFactory = canvasFactory;
    this.cache = /* @__PURE__ */ Object.create(null);
  }
  getCanvas(id, width, height) {
    let canvasEntry;
    if (this.cache[id] !== void 0) {
      canvasEntry = this.cache[id];
      this.canvasFactory.reset(canvasEntry, width, height);
    } else {
      canvasEntry = this.canvasFactory.create(width, height);
      this.cache[id] = canvasEntry;
    }
    return canvasEntry;
  }
  delete(id) {
    delete this.cache[id];
  }
  clear() {
    for (const id in this.cache) {
      const canvasEntry = this.cache[id];
      this.canvasFactory.destroy(canvasEntry);
      delete this.cache[id];
    }
  }
};
function drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {
  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);
  if (b === 0 && c === 0) {
    const tlX = destX * a + tx;
    const rTlX = Math.round(tlX);
    const tlY = destY * d + ty;
    const rTlY = Math.round(tlY);
    const brX = (destX + destW) * a + tx;
    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;
    const brY = (destY + destH) * d + ty;
    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;
    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);
    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);
    ctx.setTransform(a, b, c, d, tx, ty);
    return [rWidth, rHeight];
  }
  if (a === 0 && d === 0) {
    const tlX = destY * c + tx;
    const rTlX = Math.round(tlX);
    const tlY = destX * b + ty;
    const rTlY = Math.round(tlY);
    const brX = (destY + destH) * c + tx;
    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;
    const brY = (destX + destW) * b + ty;
    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;
    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);
    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);
    ctx.setTransform(a, b, c, d, tx, ty);
    return [rHeight, rWidth];
  }
  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);
  const scaleX = Math.hypot(a, b);
  const scaleY = Math.hypot(c, d);
  return [scaleX * destW, scaleY * destH];
}
function compileType3Glyph(imgData) {
  const {
    width,
    height
  } = imgData;
  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {
    return null;
  }
  const POINT_TO_PROCESS_LIMIT = 1e3;
  const POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);
  const width1 = width + 1;
  const points = new Uint8Array(width1 * (height + 1));
  let i, j, j0;
  const lineSize = width + 7 & ~7;
  const data = new Uint8Array(lineSize * height);
  let pos = 0;
  for (const elem of imgData.data) {
    let mask = 128;
    while (mask > 0) {
      data[pos++] = elem & mask ? 0 : 255;
      mask >>= 1;
    }
  }
  let count = 0;
  pos = 0;
  if (data[pos] !== 0) {
    points[0] = 1;
    ++count;
  }
  for (j = 1; j < width; j++) {
    if (data[pos] !== data[pos + 1]) {
      points[j] = data[pos] ? 2 : 1;
      ++count;
    }
    pos++;
  }
  if (data[pos] !== 0) {
    points[j] = 2;
    ++count;
  }
  for (i = 1; i < height; i++) {
    pos = i * lineSize;
    j0 = i * width1;
    if (data[pos - lineSize] !== data[pos]) {
      points[j0] = data[pos] ? 1 : 8;
      ++count;
    }
    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);
    for (j = 1; j < width; j++) {
      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);
      if (POINT_TYPES[sum]) {
        points[j0 + j] = POINT_TYPES[sum];
        ++count;
      }
      pos++;
    }
    if (data[pos - lineSize] !== data[pos]) {
      points[j0 + j] = data[pos] ? 2 : 4;
      ++count;
    }
    if (count > POINT_TO_PROCESS_LIMIT) {
      return null;
    }
  }
  pos = lineSize * (height - 1);
  j0 = i * width1;
  if (data[pos] !== 0) {
    points[j0] = 8;
    ++count;
  }
  for (j = 1; j < width; j++) {
    if (data[pos] !== data[pos + 1]) {
      points[j0 + j] = data[pos] ? 4 : 8;
      ++count;
    }
    pos++;
  }
  if (data[pos] !== 0) {
    points[j0 + j] = 4;
    ++count;
  }
  if (count > POINT_TO_PROCESS_LIMIT) {
    return null;
  }
  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);
  const path = new Path2D();
  const {
    a,
    b,
    c,
    d,
    e,
    f
  } = new DOMMatrix().scaleSelf(1 / width, -1 / height).translateSelf(0, -height);
  for (i = 0; count && i <= height; i++) {
    let p = i * width1;
    const end = p + width;
    while (p < end && !points[p]) {
      p++;
    }
    if (p === end) {
      continue;
    }
    let x = p % width1;
    let y = i;
    path.moveTo(a * x + c * y + e, b * x + d * y + f);
    const p0 = p;
    let type = points[p];
    do {
      const step = steps[type];
      do {
        p += step;
      } while (!points[p]);
      const pp = points[p];
      if (pp !== 5 && pp !== 10) {
        type = pp;
        points[p] = 0;
      } else {
        type = pp & 51 * type >> 4;
        points[p] &= type >> 2 | type << 2;
      }
      x = p % width1;
      y = p / width1 | 0;
      path.lineTo(a * x + c * y + e, b * x + d * y + f);
      if (!points[p]) {
        --count;
      }
    } while (p0 !== p);
    --i;
  }
  return path;
}
var CanvasExtraState = class {
  constructor(width, height) {
    this.alphaIsShape = false;
    this.fontSize = 0;
    this.fontSizeScale = 1;
    this.textMatrix = IDENTITY_MATRIX;
    this.textMatrixScale = 1;
    this.fontMatrix = FONT_IDENTITY_MATRIX;
    this.leading = 0;
    this.x = 0;
    this.y = 0;
    this.lineX = 0;
    this.lineY = 0;
    this.charSpacing = 0;
    this.wordSpacing = 0;
    this.textHScale = 1;
    this.textRenderingMode = TextRenderingMode.FILL;
    this.textRise = 0;
    this.fillColor = "#000000";
    this.strokeColor = "#000000";
    this.patternFill = false;
    this.patternStroke = false;
    this.fillAlpha = 1;
    this.strokeAlpha = 1;
    this.lineWidth = 1;
    this.activeSMask = null;
    this.transferMaps = "none";
    this.startNewPathAndClipBox([0, 0, width, height]);
  }
  clone() {
    const clone = Object.create(this);
    clone.clipBox = this.clipBox.slice();
    return clone;
  }
  updateRectMinMax(transform, rect) {
    const p1 = Util.applyTransform(rect, transform);
    const p2 = Util.applyTransform(rect.slice(2), transform);
    const p3 = Util.applyTransform([rect[0], rect[3]], transform);
    const p4 = Util.applyTransform([rect[2], rect[1]], transform);
    this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);
    this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);
    this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);
    this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);
  }
  getPathBoundingBox(pathType = PathType.FILL, transform = null) {
    const box = [this.minX, this.minY, this.maxX, this.maxY];
    if (pathType === PathType.STROKE) {
      if (!transform) {
        unreachable("Stroke bounding box must include transform.");
      }
      const scale = Util.singularValueDecompose2dScale(transform);
      const xStrokePad = scale[0] * this.lineWidth / 2;
      const yStrokePad = scale[1] * this.lineWidth / 2;
      box[0] -= xStrokePad;
      box[1] -= yStrokePad;
      box[2] += xStrokePad;
      box[3] += yStrokePad;
    }
    return box;
  }
  updateClipFromPath() {
    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());
    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);
  }
  isEmptyClip() {
    return this.minX === Infinity;
  }
  startNewPathAndClipBox(box) {
    this.clipBox = box;
    this.minX = Infinity;
    this.minY = Infinity;
    this.maxX = 0;
    this.maxY = 0;
  }
  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {
    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));
  }
};
function putBinaryImageData(ctx, imgData) {
  if (imgData instanceof ImageData) {
    ctx.putImageData(imgData, 0, 0);
    return;
  }
  const height = imgData.height, width = imgData.width;
  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;
  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;
  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;
  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);
  let srcPos = 0, destPos;
  const src = imgData.data;
  const dest = chunkImgData.data;
  let i, j, thisChunkHeight, elemsInThisChunk;
  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {
    const srcLength = src.byteLength;
    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);
    const dest32DataLength = dest32.length;
    const fullSrcDiff = width + 7 >> 3;
    const white = 4294967295;
    const black = util_FeatureTest.isLittleEndian ? 4278190080 : 255;
    for (i = 0; i < totalChunks; i++) {
      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;
      destPos = 0;
      for (j = 0; j < thisChunkHeight; j++) {
        const srcDiff = srcLength - srcPos;
        let k = 0;
        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;
        const kEndUnrolled = kEnd & ~7;
        let mask = 0;
        let srcByte = 0;
        for (; k < kEndUnrolled; k += 8) {
          srcByte = src[srcPos++];
          dest32[destPos++] = srcByte & 128 ? white : black;
          dest32[destPos++] = srcByte & 64 ? white : black;
          dest32[destPos++] = srcByte & 32 ? white : black;
          dest32[destPos++] = srcByte & 16 ? white : black;
          dest32[destPos++] = srcByte & 8 ? white : black;
          dest32[destPos++] = srcByte & 4 ? white : black;
          dest32[destPos++] = srcByte & 2 ? white : black;
          dest32[destPos++] = srcByte & 1 ? white : black;
        }
        for (; k < kEnd; k++) {
          if (mask === 0) {
            srcByte = src[srcPos++];
            mask = 128;
          }
          dest32[destPos++] = srcByte & mask ? white : black;
          mask >>= 1;
        }
      }
      while (destPos < dest32DataLength) {
        dest32[destPos++] = 0;
      }
      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);
    }
  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {
    j = 0;
    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;
    for (i = 0; i < fullChunks; i++) {
      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));
      srcPos += elemsInThisChunk;
      ctx.putImageData(chunkImgData, 0, j);
      j += FULL_CHUNK_HEIGHT;
    }
    if (i < totalChunks) {
      elemsInThisChunk = width * partialChunkHeight * 4;
      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));
      ctx.putImageData(chunkImgData, 0, j);
    }
  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {
    thisChunkHeight = FULL_CHUNK_HEIGHT;
    elemsInThisChunk = width * thisChunkHeight;
    for (i = 0; i < totalChunks; i++) {
      if (i >= fullChunks) {
        thisChunkHeight = partialChunkHeight;
        elemsInThisChunk = width * thisChunkHeight;
      }
      destPos = 0;
      for (j = elemsInThisChunk; j--; ) {
        dest[destPos++] = src[srcPos++];
        dest[destPos++] = src[srcPos++];
        dest[destPos++] = src[srcPos++];
        dest[destPos++] = 255;
      }
      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);
    }
  } else {
    throw new Error(`bad image kind: ${imgData.kind}`);
  }
}
function putBinaryImageMask(ctx, imgData) {
  if (imgData.bitmap) {
    ctx.drawImage(imgData.bitmap, 0, 0);
    return;
  }
  const height = imgData.height, width = imgData.width;
  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;
  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;
  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;
  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);
  let srcPos = 0;
  const src = imgData.data;
  const dest = chunkImgData.data;
  for (let i = 0; i < totalChunks; i++) {
    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;
    ({
      srcPos
    } = convertBlackAndWhiteToRGBA({
      src,
      srcPos,
      dest,
      width,
      height: thisChunkHeight,
      nonBlackColor: 0
    }));
    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);
  }
}
function copyCtxState(sourceCtx, destCtx) {
  const properties = ["strokeStyle", "fillStyle", "fillRule", "globalAlpha", "lineWidth", "lineCap", "lineJoin", "miterLimit", "globalCompositeOperation", "font", "filter"];
  for (const property of properties) {
    if (sourceCtx[property] !== void 0) {
      destCtx[property] = sourceCtx[property];
    }
  }
  if (sourceCtx.setLineDash !== void 0) {
    destCtx.setLineDash(sourceCtx.getLineDash());
    destCtx.lineDashOffset = sourceCtx.lineDashOffset;
  }
}
function resetCtxToDefault(ctx) {
  ctx.strokeStyle = ctx.fillStyle = "#000000";
  ctx.fillRule = "nonzero";
  ctx.globalAlpha = 1;
  ctx.lineWidth = 1;
  ctx.lineCap = "butt";
  ctx.lineJoin = "miter";
  ctx.miterLimit = 10;
  ctx.globalCompositeOperation = "source-over";
  ctx.font = "10px sans-serif";
  if (ctx.setLineDash !== void 0) {
    ctx.setLineDash([]);
    ctx.lineDashOffset = 0;
  }
  if (!isNodeJS) {
    const {
      filter
    } = ctx;
    if (filter !== "none" && filter !== "") {
      ctx.filter = "none";
    }
  }
}
function getImageSmoothingEnabled(transform, interpolate) {
  if (interpolate) {
    return true;
  }
  const scale = Util.singularValueDecompose2dScale(transform);
  scale[0] = Math.fround(scale[0]);
  scale[1] = Math.fround(scale[1]);
  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);
  return scale[0] <= actualScale && scale[1] <= actualScale;
}
var LINE_CAP_STYLES = ["butt", "round", "square"];
var LINE_JOIN_STYLES = ["miter", "round", "bevel"];
var NORMAL_CLIP = {};
var EO_CLIP = {};
var CanvasGraphics = class _CanvasGraphics {
  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {
    optionalContentConfig,
    markedContentStack = null
  }, annotationCanvasMap, pageColors) {
    this.ctx = canvasCtx;
    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);
    this.stateStack = [];
    this.pendingClip = null;
    this.pendingEOFill = false;
    this.res = null;
    this.xobjs = null;
    this.commonObjs = commonObjs;
    this.objs = objs;
    this.canvasFactory = canvasFactory;
    this.filterFactory = filterFactory;
    this.groupStack = [];
    this.processingType3 = null;
    this.baseTransform = null;
    this.baseTransformStack = [];
    this.groupLevel = 0;
    this.smaskStack = [];
    this.smaskCounter = 0;
    this.tempSMask = null;
    this.suspendedCtx = null;
    this.contentVisible = true;
    this.markedContentStack = markedContentStack || [];
    this.optionalContentConfig = optionalContentConfig;
    this.cachedCanvases = new CachedCanvases(this.canvasFactory);
    this.cachedPatterns = /* @__PURE__ */ new Map();
    this.annotationCanvasMap = annotationCanvasMap;
    this.viewportScale = 1;
    this.outputScaleX = 1;
    this.outputScaleY = 1;
    this.pageColors = pageColors;
    this._cachedScaleForStroking = [-1, 0];
    this._cachedGetSinglePixelWidth = null;
    this._cachedBitmapsMap = /* @__PURE__ */ new Map();
  }
  getObject(data, fallback = null) {
    if (typeof data === "string") {
      return data.startsWith("g_") ? this.commonObjs.get(data) : this.objs.get(data);
    }
    return fallback;
  }
  beginDrawing({
    transform,
    viewport,
    transparency = false,
    background = null
  }) {
    const width = this.ctx.canvas.width;
    const height = this.ctx.canvas.height;
    const savedFillStyle = this.ctx.fillStyle;
    this.ctx.fillStyle = background || "#ffffff";
    this.ctx.fillRect(0, 0, width, height);
    this.ctx.fillStyle = savedFillStyle;
    if (transparency) {
      const transparentCanvas = this.cachedCanvases.getCanvas("transparent", width, height);
      this.compositeCtx = this.ctx;
      this.transparentCanvas = transparentCanvas.canvas;
      this.ctx = transparentCanvas.context;
      this.ctx.save();
      this.ctx.transform(...getCurrentTransform(this.compositeCtx));
    }
    this.ctx.save();
    resetCtxToDefault(this.ctx);
    if (transform) {
      this.ctx.transform(...transform);
      this.outputScaleX = transform[0];
      this.outputScaleY = transform[0];
    }
    this.ctx.transform(...viewport.transform);
    this.viewportScale = viewport.scale;
    this.baseTransform = getCurrentTransform(this.ctx);
  }
  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {
    const argsArray = operatorList.argsArray;
    const fnArray = operatorList.fnArray;
    let i = executionStartIdx || 0;
    const argsArrayLen = argsArray.length;
    if (argsArrayLen === i) {
      return i;
    }
    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === "function";
    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;
    let steps = 0;
    const commonObjs = this.commonObjs;
    const objs = this.objs;
    let fnId;
    while (true) {
      if (stepper !== void 0 && i === stepper.nextBreakPoint) {
        stepper.breakIt(i, continueCallback);
        return i;
      }
      fnId = fnArray[i];
      if (fnId !== OPS.dependency) {
        this[fnId].apply(this, argsArray[i]);
      } else {
        for (const depObjId of argsArray[i]) {
          const objsPool = depObjId.startsWith("g_") ? commonObjs : objs;
          if (!objsPool.has(depObjId)) {
            objsPool.get(depObjId, continueCallback);
            return i;
          }
        }
      }
      i++;
      if (i === argsArrayLen) {
        return i;
      }
      if (chunkOperations && ++steps > EXECUTION_STEPS) {
        if (Date.now() > endTime) {
          continueCallback();
          return i;
        }
        steps = 0;
      }
    }
  }
  #restoreInitialState() {
    while (this.stateStack.length || this.inSMaskMode) {
      this.restore();
    }
    this.current.activeSMask = null;
    this.ctx.restore();
    if (this.transparentCanvas) {
      this.ctx = this.compositeCtx;
      this.ctx.save();
      this.ctx.setTransform(1, 0, 0, 1, 0, 0);
      this.ctx.drawImage(this.transparentCanvas, 0, 0);
      this.ctx.restore();
      this.transparentCanvas = null;
    }
  }
  endDrawing() {
    this.#restoreInitialState();
    this.cachedCanvases.clear();
    this.cachedPatterns.clear();
    for (const cache2 of this._cachedBitmapsMap.values()) {
      for (const canvas2 of cache2.values()) {
        if (typeof HTMLCanvasElement !== "undefined" && canvas2 instanceof HTMLCanvasElement) {
          canvas2.width = canvas2.height = 0;
        }
      }
      cache2.clear();
    }
    this._cachedBitmapsMap.clear();
    this.#drawFilter();
  }
  #drawFilter() {
    if (this.pageColors) {
      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);
      if (hcmFilterId !== "none") {
        const savedFilter = this.ctx.filter;
        this.ctx.filter = hcmFilterId;
        this.ctx.drawImage(this.ctx.canvas, 0, 0);
        this.ctx.filter = savedFilter;
      }
    }
  }
  _scaleImage(img, inverseTransform) {
    const width = img.width ?? img.displayWidth;
    const height = img.height ?? img.displayHeight;
    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);
    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);
    let paintWidth = width, paintHeight = height;
    let tmpCanvasId = "prescale1";
    let tmpCanvas, tmpCtx;
    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {
      let newWidth = paintWidth, newHeight = paintHeight;
      if (widthScale > 2 && paintWidth > 1) {
        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);
        widthScale /= paintWidth / newWidth;
      }
      if (heightScale > 2 && paintHeight > 1) {
        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;
        heightScale /= paintHeight / newHeight;
      }
      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);
      tmpCtx = tmpCanvas.context;
      tmpCtx.clearRect(0, 0, newWidth, newHeight);
      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);
      img = tmpCanvas.canvas;
      paintWidth = newWidth;
      paintHeight = newHeight;
      tmpCanvasId = tmpCanvasId === "prescale1" ? "prescale2" : "prescale1";
    }
    return {
      img,
      paintWidth,
      paintHeight
    };
  }
  _createMaskCanvas(img) {
    const ctx = this.ctx;
    const {
      width,
      height
    } = img;
    const fillColor = this.current.fillColor;
    const isPatternFill = this.current.patternFill;
    const currentTransform = getCurrentTransform(ctx);
    let cache2, cacheKey, scaled, maskCanvas;
    if ((img.bitmap || img.data) && img.count > 1) {
      const mainKey = img.bitmap || img.data.buffer;
      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);
      cache2 = this._cachedBitmapsMap.get(mainKey);
      if (!cache2) {
        cache2 = /* @__PURE__ */ new Map();
        this._cachedBitmapsMap.set(mainKey, cache2);
      }
      const cachedImage = cache2.get(cacheKey);
      if (cachedImage && !isPatternFill) {
        const offsetX2 = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);
        const offsetY2 = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);
        return {
          canvas: cachedImage,
          offsetX: offsetX2,
          offsetY: offsetY2
        };
      }
      scaled = cachedImage;
    }
    if (!scaled) {
      maskCanvas = this.cachedCanvases.getCanvas("maskCanvas", width, height);
      putBinaryImageMask(maskCanvas.context, img);
    }
    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);
    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);
    const [minX, minY, maxX, maxY] = Util.getAxialAlignedBoundingBox([0, 0, width, height], maskToCanvas);
    const drawnWidth = Math.round(maxX - minX) || 1;
    const drawnHeight = Math.round(maxY - minY) || 1;
    const fillCanvas = this.cachedCanvases.getCanvas("fillCanvas", drawnWidth, drawnHeight);
    const fillCtx = fillCanvas.context;
    const offsetX = minX;
    const offsetY = minY;
    fillCtx.translate(-offsetX, -offsetY);
    fillCtx.transform(...maskToCanvas);
    if (!scaled) {
      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));
      scaled = scaled.img;
      if (cache2 && isPatternFill) {
        cache2.set(cacheKey, scaled);
      }
    }
    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);
    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);
    fillCtx.globalCompositeOperation = "source-in";
    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);
    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;
    fillCtx.fillRect(0, 0, width, height);
    if (cache2 && !isPatternFill) {
      this.cachedCanvases.delete("fillCanvas");
      cache2.set(cacheKey, fillCanvas.canvas);
    }
    return {
      canvas: fillCanvas.canvas,
      offsetX: Math.round(offsetX),
      offsetY: Math.round(offsetY)
    };
  }
  setLineWidth(width) {
    if (width !== this.current.lineWidth) {
      this._cachedScaleForStroking[0] = -1;
    }
    this.current.lineWidth = width;
    this.ctx.lineWidth = width;
  }
  setLineCap(style) {
    this.ctx.lineCap = LINE_CAP_STYLES[style];
  }
  setLineJoin(style) {
    this.ctx.lineJoin = LINE_JOIN_STYLES[style];
  }
  setMiterLimit(limit) {
    this.ctx.miterLimit = limit;
  }
  setDash(dashArray, dashPhase) {
    const ctx = this.ctx;
    if (ctx.setLineDash !== void 0) {
      ctx.setLineDash(dashArray);
      ctx.lineDashOffset = dashPhase;
    }
  }
  setRenderingIntent(intent) {
  }
  setFlatness(flatness) {
  }
  setGState(states) {
    for (const [key, value] of states) {
      switch (key) {
        case "LW":
          this.setLineWidth(value);
          break;
        case "LC":
          this.setLineCap(value);
          break;
        case "LJ":
          this.setLineJoin(value);
          break;
        case "ML":
          this.setMiterLimit(value);
          break;
        case "D":
          this.setDash(value[0], value[1]);
          break;
        case "RI":
          this.setRenderingIntent(value);
          break;
        case "FL":
          this.setFlatness(value);
          break;
        case "Font":
          this.setFont(value[0], value[1]);
          break;
        case "CA":
          this.current.strokeAlpha = value;
          break;
        case "ca":
          this.ctx.globalAlpha = this.current.fillAlpha = value;
          break;
        case "BM":
          this.ctx.globalCompositeOperation = value;
          break;
        case "SMask":
          this.current.activeSMask = value ? this.tempSMask : null;
          this.tempSMask = null;
          this.checkSMaskState();
          break;
        case "TR":
          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);
          break;
      }
    }
  }
  get inSMaskMode() {
    return !!this.suspendedCtx;
  }
  checkSMaskState() {
    const inSMaskMode = this.inSMaskMode;
    if (this.current.activeSMask && !inSMaskMode) {
      this.beginSMaskMode();
    } else if (!this.current.activeSMask && inSMaskMode) {
      this.endSMaskMode();
    }
  }
  beginSMaskMode() {
    if (this.inSMaskMode) {
      throw new Error("beginSMaskMode called while already in smask mode");
    }
    const drawnWidth = this.ctx.canvas.width;
    const drawnHeight = this.ctx.canvas.height;
    const cacheId = "smaskGroupAt" + this.groupLevel;
    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);
    this.suspendedCtx = this.ctx;
    const ctx = this.ctx = scratchCanvas.context;
    ctx.setTransform(this.suspendedCtx.getTransform());
    copyCtxState(this.suspendedCtx, ctx);
    mirrorContextOperations(ctx, this.suspendedCtx);
    this.setGState([["BM", "source-over"]]);
  }
  endSMaskMode() {
    if (!this.inSMaskMode) {
      throw new Error("endSMaskMode called while not in smask mode");
    }
    this.ctx._removeMirroring();
    copyCtxState(this.ctx, this.suspendedCtx);
    this.ctx = this.suspendedCtx;
    this.suspendedCtx = null;
  }
  compose(dirtyBox) {
    if (!this.current.activeSMask) {
      return;
    }
    if (!dirtyBox) {
      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];
    } else {
      dirtyBox[0] = Math.floor(dirtyBox[0]);
      dirtyBox[1] = Math.floor(dirtyBox[1]);
      dirtyBox[2] = Math.ceil(dirtyBox[2]);
      dirtyBox[3] = Math.ceil(dirtyBox[3]);
    }
    const smask = this.current.activeSMask;
    const suspendedCtx = this.suspendedCtx;
    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);
    this.ctx.save();
    this.ctx.setTransform(1, 0, 0, 1, 0, 0);
    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);
    this.ctx.restore();
  }
  composeSMask(ctx, smask, layerCtx, layerBox) {
    const layerOffsetX = layerBox[0];
    const layerOffsetY = layerBox[1];
    const layerWidth = layerBox[2] - layerOffsetX;
    const layerHeight = layerBox[3] - layerOffsetY;
    if (layerWidth === 0 || layerHeight === 0) {
      return;
    }
    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);
    ctx.save();
    ctx.globalAlpha = 1;
    ctx.globalCompositeOperation = "source-over";
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.drawImage(layerCtx.canvas, 0, 0);
    ctx.restore();
  }
  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {
    let maskCanvas = maskCtx.canvas;
    let maskX = layerOffsetX - maskOffsetX;
    let maskY = layerOffsetY - maskOffsetY;
    if (backdrop) {
      const backdropRGB = Util.makeHexColor(...backdrop);
      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {
        const canvas2 = this.cachedCanvases.getCanvas("maskExtension", width, height);
        const ctx = canvas2.context;
        ctx.drawImage(maskCanvas, -maskX, -maskY);
        ctx.globalCompositeOperation = "destination-atop";
        ctx.fillStyle = backdropRGB;
        ctx.fillRect(0, 0, width, height);
        ctx.globalCompositeOperation = "source-over";
        maskCanvas = canvas2.canvas;
        maskX = maskY = 0;
      } else {
        maskCtx.save();
        maskCtx.globalAlpha = 1;
        maskCtx.setTransform(1, 0, 0, 1, 0, 0);
        const clip2 = new Path2D();
        clip2.rect(maskX, maskY, width, height);
        maskCtx.clip(clip2);
        maskCtx.globalCompositeOperation = "destination-atop";
        maskCtx.fillStyle = backdropRGB;
        maskCtx.fillRect(maskX, maskY, width, height);
        maskCtx.restore();
      }
    }
    layerCtx.save();
    layerCtx.globalAlpha = 1;
    layerCtx.setTransform(1, 0, 0, 1, 0, 0);
    if (subtype === "Alpha" && transferMap) {
      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);
    } else if (subtype === "Luminosity") {
      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);
    }
    const clip = new Path2D();
    clip.rect(layerOffsetX, layerOffsetY, width, height);
    layerCtx.clip(clip);
    layerCtx.globalCompositeOperation = "destination-in";
    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);
    layerCtx.restore();
  }
  save() {
    if (this.inSMaskMode) {
      copyCtxState(this.ctx, this.suspendedCtx);
    }
    this.ctx.save();
    const old = this.current;
    this.stateStack.push(old);
    this.current = old.clone();
  }
  restore() {
    if (this.stateStack.length === 0) {
      if (this.inSMaskMode) {
        this.endSMaskMode();
      }
      return;
    }
    this.current = this.stateStack.pop();
    this.ctx.restore();
    if (this.inSMaskMode) {
      copyCtxState(this.suspendedCtx, this.ctx);
    }
    this.checkSMaskState();
    this.pendingClip = null;
    this._cachedScaleForStroking[0] = -1;
    this._cachedGetSinglePixelWidth = null;
  }
  transform(a, b, c, d, e, f) {
    this.ctx.transform(a, b, c, d, e, f);
    this._cachedScaleForStroking[0] = -1;
    this._cachedGetSinglePixelWidth = null;
  }
  constructPath(op, data, minMax) {
    let [path] = data;
    if (!minMax) {
      path ||= data[0] = new Path2D();
      this[op](path);
      return;
    }
    if (!(path instanceof Path2D)) {
      const path2d = data[0] = new Path2D();
      for (let i = 0, ii = path.length; i < ii; ) {
        switch (path[i++]) {
          case DrawOPS.moveTo:
            path2d.moveTo(path[i++], path[i++]);
            break;
          case DrawOPS.lineTo:
            path2d.lineTo(path[i++], path[i++]);
            break;
          case DrawOPS.curveTo:
            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);
            break;
          case DrawOPS.closePath:
            path2d.closePath();
            break;
          default:
            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);
            break;
        }
      }
      path = path2d;
    }
    this.current.updateRectMinMax(getCurrentTransform(this.ctx), minMax);
    this[op](path);
  }
  closePath() {
    this.ctx.closePath();
  }
  stroke(path, consumePath = true) {
    const ctx = this.ctx;
    const strokeColor = this.current.strokeColor;
    ctx.globalAlpha = this.current.strokeAlpha;
    if (this.contentVisible) {
      if (typeof strokeColor === "object" && strokeColor?.getPattern) {
        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;
        ctx.save();
        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);
        if (baseTransform) {
          const newPath = new Path2D();
          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));
          path = newPath;
        }
        this.rescaleAndStroke(path, false);
        ctx.restore();
      } else {
        this.rescaleAndStroke(path, true);
      }
    }
    if (consumePath) {
      this.consumePath(path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));
    }
    ctx.globalAlpha = this.current.fillAlpha;
  }
  closeStroke(path) {
    this.stroke(path);
  }
  fill(path, consumePath = true) {
    const ctx = this.ctx;
    const fillColor = this.current.fillColor;
    const isPatternFill = this.current.patternFill;
    let needRestore = false;
    if (isPatternFill) {
      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;
      ctx.save();
      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);
      if (baseTransform) {
        const newPath = new Path2D();
        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));
        path = newPath;
      }
      needRestore = true;
    }
    const intersect = this.current.getClippedPathBoundingBox();
    if (this.contentVisible && intersect !== null) {
      if (this.pendingEOFill) {
        ctx.fill(path, "evenodd");
        this.pendingEOFill = false;
      } else {
        ctx.fill(path);
      }
    }
    if (needRestore) {
      ctx.restore();
    }
    if (consumePath) {
      this.consumePath(path, intersect);
    }
  }
  eoFill(path) {
    this.pendingEOFill = true;
    this.fill(path);
  }
  fillStroke(path) {
    this.fill(path, false);
    this.stroke(path, false);
    this.consumePath(path);
  }
  eoFillStroke(path) {
    this.pendingEOFill = true;
    this.fillStroke(path);
  }
  closeFillStroke(path) {
    this.fillStroke(path);
  }
  closeEOFillStroke(path) {
    this.pendingEOFill = true;
    this.fillStroke(path);
  }
  endPath(path) {
    this.consumePath(path);
  }
  clip() {
    this.pendingClip = NORMAL_CLIP;
  }
  eoClip() {
    this.pendingClip = EO_CLIP;
  }
  beginText() {
    this.current.textMatrix = IDENTITY_MATRIX;
    this.current.textMatrixScale = 1;
    this.current.x = this.current.lineX = 0;
    this.current.y = this.current.lineY = 0;
  }
  endText() {
    const paths = this.pendingTextPaths;
    const ctx = this.ctx;
    if (paths === void 0) {
      ctx.beginPath();
      return;
    }
    const newPath = new Path2D();
    const invTransf = ctx.getTransform().invertSelf();
    for (const {
      transform,
      x,
      y,
      fontSize,
      path
    } of paths) {
      newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));
    }
    ctx.clip(newPath);
    ctx.beginPath();
    delete this.pendingTextPaths;
  }
  setCharSpacing(spacing) {
    this.current.charSpacing = spacing;
  }
  setWordSpacing(spacing) {
    this.current.wordSpacing = spacing;
  }
  setHScale(scale) {
    this.current.textHScale = scale / 100;
  }
  setLeading(leading) {
    this.current.leading = -leading;
  }
  setFont(fontRefName, size) {
    const fontObj = this.commonObjs.get(fontRefName);
    const current = this.current;
    if (!fontObj) {
      throw new Error(`Can't find font for ${fontRefName}`);
    }
    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;
    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {
      warn("Invalid font matrix for font " + fontRefName);
    }
    if (size < 0) {
      size = -size;
      current.fontDirection = -1;
    } else {
      current.fontDirection = 1;
    }
    this.current.font = fontObj;
    this.current.fontSize = size;
    if (fontObj.isType3Font) {
      return;
    }
    const name = fontObj.loadedName || "sans-serif";
    const typeface = fontObj.systemFontInfo?.css || `"${name}", ${fontObj.fallbackName}`;
    let bold = "normal";
    if (fontObj.black) {
      bold = "900";
    } else if (fontObj.bold) {
      bold = "bold";
    }
    const italic = fontObj.italic ? "italic" : "normal";
    let browserFontSize = size;
    if (size < MIN_FONT_SIZE) {
      browserFontSize = MIN_FONT_SIZE;
    } else if (size > MAX_FONT_SIZE) {
      browserFontSize = MAX_FONT_SIZE;
    }
    this.current.fontSizeScale = size / browserFontSize;
    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;
  }
  setTextRenderingMode(mode) {
    this.current.textRenderingMode = mode;
  }
  setTextRise(rise) {
    this.current.textRise = rise;
  }
  moveText(x, y) {
    this.current.x = this.current.lineX += x;
    this.current.y = this.current.lineY += y;
  }
  setLeadingMoveText(x, y) {
    this.setLeading(-y);
    this.moveText(x, y);
  }
  setTextMatrix(a, b, c, d, e, f) {
    this.current.textMatrix = [a, b, c, d, e, f];
    this.current.textMatrixScale = Math.hypot(a, b);
    this.current.x = this.current.lineX = 0;
    this.current.y = this.current.lineY = 0;
  }
  nextLine() {
    this.moveText(0, this.current.leading);
  }
  #getScaledPath(path, currentTransform, transform) {
    const newPath = new Path2D();
    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));
    return newPath;
  }
  paintChar(character, x, y, patternFillTransform, patternStrokeTransform) {
    const ctx = this.ctx;
    const current = this.current;
    const font = current.font;
    const textRenderingMode = current.textRenderingMode;
    const fontSize = current.fontSize / current.fontSizeScale;
    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;
    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);
    const patternFill = current.patternFill && !font.missingFile;
    const patternStroke = current.patternStroke && !font.missingFile;
    let path;
    if (font.disableFontFace || isAddToPathSet || patternFill || patternStroke) {
      path = font.getPathGenerator(this.commonObjs, character);
    }
    if (font.disableFontFace || patternFill || patternStroke) {
      ctx.save();
      ctx.translate(x, y);
      ctx.scale(fontSize, -fontSize);
      let currentTransform;
      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {
        if (patternFillTransform) {
          currentTransform = ctx.getTransform();
          ctx.setTransform(...patternFillTransform);
          ctx.fill(this.#getScaledPath(path, currentTransform, patternFillTransform));
        } else {
          ctx.fill(path);
        }
      }
      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {
        if (patternStrokeTransform) {
          currentTransform ||= ctx.getTransform();
          ctx.setTransform(...patternStrokeTransform);
          const {
            a,
            b,
            c,
            d
          } = currentTransform;
          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);
          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);
          const [sx, sy] = Util.singularValueDecompose2dScale(transf);
          ctx.lineWidth *= Math.max(sx, sy) / fontSize;
          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));
        } else {
          ctx.lineWidth /= fontSize;
          ctx.stroke(path);
        }
      }
      ctx.restore();
    } else {
      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {
        ctx.fillText(character, x, y);
      }
      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {
        ctx.strokeText(character, x, y);
      }
    }
    if (isAddToPathSet) {
      const paths = this.pendingTextPaths ||= [];
      paths.push({
        transform: getCurrentTransform(ctx),
        x,
        y,
        fontSize,
        path
      });
    }
  }
  get isFontSubpixelAAEnabled() {
    const {
      context: ctx
    } = this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled", 10, 10);
    ctx.scale(1.5, 1);
    ctx.fillText("I", 0, 10);
    const data = ctx.getImageData(0, 0, 10, 10).data;
    let enabled = false;
    for (let i = 3; i < data.length; i += 4) {
      if (data[i] > 0 && data[i] < 255) {
        enabled = true;
        break;
      }
    }
    return shadow(this, "isFontSubpixelAAEnabled", enabled);
  }
  showText(glyphs) {
    const current = this.current;
    const font = current.font;
    if (font.isType3Font) {
      return this.showType3Text(glyphs);
    }
    const fontSize = current.fontSize;
    if (fontSize === 0) {
      return void 0;
    }
    const ctx = this.ctx;
    const fontSizeScale = current.fontSizeScale;
    const charSpacing = current.charSpacing;
    const wordSpacing = current.wordSpacing;
    const fontDirection = current.fontDirection;
    const textHScale = current.textHScale * fontDirection;
    const glyphsLength = glyphs.length;
    const vertical = font.vertical;
    const spacingDir = vertical ? 1 : -1;
    const defaultVMetrics = font.defaultVMetrics;
    const widthAdvanceScale = fontSize * current.fontMatrix[0];
    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;
    ctx.save();
    ctx.transform(...current.textMatrix);
    ctx.translate(current.x, current.y + current.textRise);
    if (fontDirection > 0) {
      ctx.scale(textHScale, -1);
    } else {
      ctx.scale(textHScale, 1);
    }
    let patternFillTransform, patternStrokeTransform;
    if (current.patternFill) {
      ctx.save();
      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);
      patternFillTransform = getCurrentTransform(ctx);
      ctx.restore();
      ctx.fillStyle = pattern;
    }
    if (current.patternStroke) {
      ctx.save();
      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);
      patternStrokeTransform = getCurrentTransform(ctx);
      ctx.restore();
      ctx.strokeStyle = pattern;
    }
    let lineWidth = current.lineWidth;
    const scale = current.textMatrixScale;
    if (scale === 0 || lineWidth === 0) {
      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;
      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {
        lineWidth = this.getSinglePixelWidth();
      }
    } else {
      lineWidth /= scale;
    }
    if (fontSizeScale !== 1) {
      ctx.scale(fontSizeScale, fontSizeScale);
      lineWidth /= fontSizeScale;
    }
    ctx.lineWidth = lineWidth;
    if (font.isInvalidPDFjsFont) {
      const chars = [];
      let width = 0;
      for (const glyph of glyphs) {
        chars.push(glyph.unicode);
        width += glyph.width;
      }
      ctx.fillText(chars.join(""), 0, 0);
      current.x += width * widthAdvanceScale * textHScale;
      ctx.restore();
      this.compose();
      return void 0;
    }
    let x = 0, i;
    for (i = 0; i < glyphsLength; ++i) {
      const glyph = glyphs[i];
      if (typeof glyph === "number") {
        x += spacingDir * glyph * fontSize / 1e3;
        continue;
      }
      let restoreNeeded = false;
      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;
      const character = glyph.fontChar;
      const accent = glyph.accent;
      let scaledX, scaledY;
      let width = glyph.width;
      if (vertical) {
        const vmetric = glyph.vmetric || defaultVMetrics;
        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;
        const vy = vmetric[2] * widthAdvanceScale;
        width = vmetric ? -vmetric[0] : width;
        scaledX = vx / fontSizeScale;
        scaledY = (x + vy) / fontSizeScale;
      } else {
        scaledX = x / fontSizeScale;
        scaledY = 0;
      }
      if (font.remeasure && width > 0) {
        const measuredWidth = ctx.measureText(character).width * 1e3 / fontSize * fontSizeScale;
        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {
          const characterScaleX = width / measuredWidth;
          restoreNeeded = true;
          ctx.save();
          ctx.scale(characterScaleX, 1);
          scaledX /= characterScaleX;
        } else if (width !== measuredWidth) {
          scaledX += (width - measuredWidth) / 2e3 * fontSize / fontSizeScale;
        }
      }
      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {
        if (simpleFillText && !accent) {
          ctx.fillText(character, scaledX, scaledY);
        } else {
          this.paintChar(character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);
          if (accent) {
            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;
            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;
            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);
          }
        }
      }
      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;
      x += charWidth;
      if (restoreNeeded) {
        ctx.restore();
      }
    }
    if (vertical) {
      current.y -= x;
    } else {
      current.x += x * textHScale;
    }
    ctx.restore();
    this.compose();
    return void 0;
  }
  showType3Text(glyphs) {
    const ctx = this.ctx;
    const current = this.current;
    const font = current.font;
    const fontSize = current.fontSize;
    const fontDirection = current.fontDirection;
    const spacingDir = font.vertical ? 1 : -1;
    const charSpacing = current.charSpacing;
    const wordSpacing = current.wordSpacing;
    const textHScale = current.textHScale * fontDirection;
    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;
    const glyphsLength = glyphs.length;
    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;
    let i, glyph, width, spacingLength;
    if (isTextInvisible || fontSize === 0) {
      return;
    }
    this._cachedScaleForStroking[0] = -1;
    this._cachedGetSinglePixelWidth = null;
    ctx.save();
    ctx.transform(...current.textMatrix);
    ctx.translate(current.x, current.y + current.textRise);
    ctx.scale(textHScale, fontDirection);
    for (i = 0; i < glyphsLength; ++i) {
      glyph = glyphs[i];
      if (typeof glyph === "number") {
        spacingLength = spacingDir * glyph * fontSize / 1e3;
        this.ctx.translate(spacingLength, 0);
        current.x += spacingLength * textHScale;
        continue;
      }
      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;
      const operatorList = font.charProcOperatorList[glyph.operatorListId];
      if (!operatorList) {
        warn(`Type3 character "${glyph.operatorListId}" is not available.`);
      } else if (this.contentVisible) {
        this.processingType3 = glyph;
        this.save();
        ctx.scale(fontSize, fontSize);
        ctx.transform(...fontMatrix);
        this.executeOperatorList(operatorList);
        this.restore();
      }
      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);
      width = transformed[0] * fontSize + spacing;
      ctx.translate(width, 0);
      current.x += width * textHScale;
    }
    ctx.restore();
    this.processingType3 = null;
  }
  setCharWidth(xWidth, yWidth) {
  }
  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {
    this.ctx.rect(llx, lly, urx - llx, ury - lly);
    this.ctx.clip();
    this.endPath();
  }
  getColorN_Pattern(IR) {
    let pattern;
    if (IR[0] === "TilingPattern") {
      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);
      const canvasGraphicsFactory = {
        createCanvasGraphics: (ctx) => new _CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {
          optionalContentConfig: this.optionalContentConfig,
          markedContentStack: this.markedContentStack
        })
      };
      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);
    } else {
      pattern = this._getPattern(IR[1], IR[2]);
    }
    return pattern;
  }
  setStrokeColorN() {
    this.current.strokeColor = this.getColorN_Pattern(arguments);
    this.current.patternStroke = true;
  }
  setFillColorN() {
    this.current.fillColor = this.getColorN_Pattern(arguments);
    this.current.patternFill = true;
  }
  setStrokeRGBColor(r, g, b) {
    this.ctx.strokeStyle = this.current.strokeColor = Util.makeHexColor(r, g, b);
    this.current.patternStroke = false;
  }
  setStrokeTransparent() {
    this.ctx.strokeStyle = this.current.strokeColor = "transparent";
    this.current.patternStroke = false;
  }
  setFillRGBColor(r, g, b) {
    this.ctx.fillStyle = this.current.fillColor = Util.makeHexColor(r, g, b);
    this.current.patternFill = false;
  }
  setFillTransparent() {
    this.ctx.fillStyle = this.current.fillColor = "transparent";
    this.current.patternFill = false;
  }
  _getPattern(objId, matrix = null) {
    let pattern;
    if (this.cachedPatterns.has(objId)) {
      pattern = this.cachedPatterns.get(objId);
    } else {
      pattern = getShadingPattern(this.getObject(objId));
      this.cachedPatterns.set(objId, pattern);
    }
    if (matrix) {
      pattern.matrix = matrix;
    }
    return pattern;
  }
  shadingFill(objId) {
    if (!this.contentVisible) {
      return;
    }
    const ctx = this.ctx;
    this.save();
    const pattern = this._getPattern(objId);
    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);
    const inv = getCurrentTransformInverse(ctx);
    if (inv) {
      const {
        width,
        height
      } = ctx.canvas;
      const [x0, y0, x1, y1] = Util.getAxialAlignedBoundingBox([0, 0, width, height], inv);
      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);
    } else {
      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);
    }
    this.compose(this.current.getClippedPathBoundingBox());
    this.restore();
  }
  beginInlineImage() {
    unreachable("Should not call beginInlineImage");
  }
  beginImageData() {
    unreachable("Should not call beginImageData");
  }
  paintFormXObjectBegin(matrix, bbox) {
    if (!this.contentVisible) {
      return;
    }
    this.save();
    this.baseTransformStack.push(this.baseTransform);
    if (matrix) {
      this.transform(...matrix);
    }
    this.baseTransform = getCurrentTransform(this.ctx);
    if (bbox) {
      const width = bbox[2] - bbox[0];
      const height = bbox[3] - bbox[1];
      this.ctx.rect(bbox[0], bbox[1], width, height);
      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);
      this.clip();
      this.endPath();
    }
  }
  paintFormXObjectEnd() {
    if (!this.contentVisible) {
      return;
    }
    this.restore();
    this.baseTransform = this.baseTransformStack.pop();
  }
  beginGroup(group) {
    if (!this.contentVisible) {
      return;
    }
    this.save();
    if (this.inSMaskMode) {
      this.endSMaskMode();
      this.current.activeSMask = null;
    }
    const currentCtx = this.ctx;
    if (!group.isolated) {
      info("TODO: Support non-isolated groups.");
    }
    if (group.knockout) {
      warn("Knockout groups not supported.");
    }
    const currentTransform = getCurrentTransform(currentCtx);
    if (group.matrix) {
      currentCtx.transform(...group.matrix);
    }
    if (!group.bbox) {
      throw new Error("Bounding box is required.");
    }
    let bounds = Util.getAxialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx));
    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];
    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];
    const offsetX = Math.floor(bounds[0]);
    const offsetY = Math.floor(bounds[1]);
    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);
    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);
    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);
    let cacheId = "groupAt" + this.groupLevel;
    if (group.smask) {
      cacheId += "_smask_" + this.smaskCounter++ % 2;
    }
    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);
    const groupCtx = scratchCanvas.context;
    groupCtx.translate(-offsetX, -offsetY);
    groupCtx.transform(...currentTransform);
    let clip = new Path2D();
    const [x0, y0, x1, y1] = group.bbox;
    clip.rect(x0, y0, x1 - x0, y1 - y0);
    if (group.matrix) {
      const path = new Path2D();
      path.addPath(clip, new DOMMatrix(group.matrix));
      clip = path;
    }
    groupCtx.clip(clip);
    if (group.smask) {
      this.smaskStack.push({
        canvas: scratchCanvas.canvas,
        context: groupCtx,
        offsetX,
        offsetY,
        subtype: group.smask.subtype,
        backdrop: group.smask.backdrop,
        transferMap: group.smask.transferMap || null,
        startTransformInverse: null
      });
    } else {
      currentCtx.setTransform(1, 0, 0, 1, 0, 0);
      currentCtx.translate(offsetX, offsetY);
      currentCtx.save();
    }
    copyCtxState(currentCtx, groupCtx);
    this.ctx = groupCtx;
    this.setGState([["BM", "source-over"], ["ca", 1], ["CA", 1]]);
    this.groupStack.push(currentCtx);
    this.groupLevel++;
  }
  endGroup(group) {
    if (!this.contentVisible) {
      return;
    }
    this.groupLevel--;
    const groupCtx = this.ctx;
    const ctx = this.groupStack.pop();
    this.ctx = ctx;
    this.ctx.imageSmoothingEnabled = false;
    if (group.smask) {
      this.tempSMask = this.smaskStack.pop();
      this.restore();
    } else {
      this.ctx.restore();
      const currentMtx = getCurrentTransform(this.ctx);
      this.restore();
      this.ctx.save();
      this.ctx.setTransform(...currentMtx);
      const dirtyBox = Util.getAxialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx);
      this.ctx.drawImage(groupCtx.canvas, 0, 0);
      this.ctx.restore();
      this.compose(dirtyBox);
    }
  }
  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {
    this.#restoreInitialState();
    resetCtxToDefault(this.ctx);
    this.ctx.save();
    this.save();
    if (this.baseTransform) {
      this.ctx.setTransform(...this.baseTransform);
    }
    if (rect) {
      const width = rect[2] - rect[0];
      const height = rect[3] - rect[1];
      if (hasOwnCanvas && this.annotationCanvasMap) {
        transform = transform.slice();
        transform[4] -= rect[0];
        transform[5] -= rect[1];
        rect = rect.slice();
        rect[0] = rect[1] = 0;
        rect[2] = width;
        rect[3] = height;
        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx));
        const {
          viewportScale
        } = this;
        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);
        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);
        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);
        const {
          canvas: canvas2,
          context
        } = this.annotationCanvas;
        this.annotationCanvasMap.set(id, canvas2);
        this.annotationCanvas.savedCtx = this.ctx;
        this.ctx = context;
        this.ctx.save();
        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);
        resetCtxToDefault(this.ctx);
      } else {
        resetCtxToDefault(this.ctx);
        this.endPath();
        this.ctx.rect(rect[0], rect[1], width, height);
        this.ctx.clip();
        this.ctx.beginPath();
      }
    }
    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);
    this.transform(...transform);
    this.transform(...matrix);
  }
  endAnnotation() {
    if (this.annotationCanvas) {
      this.ctx.restore();
      this.#drawFilter();
      this.ctx = this.annotationCanvas.savedCtx;
      delete this.annotationCanvas.savedCtx;
      delete this.annotationCanvas;
    }
  }
  paintImageMaskXObject(img) {
    if (!this.contentVisible) {
      return;
    }
    const count = img.count;
    img = this.getObject(img.data, img);
    img.count = count;
    const ctx = this.ctx;
    const glyph = this.processingType3;
    if (glyph) {
      if (glyph.compiled === void 0) {
        glyph.compiled = compileType3Glyph(img);
      }
      if (glyph.compiled) {
        ctx.fill(glyph.compiled);
        return;
      }
    }
    const mask = this._createMaskCanvas(img);
    const maskCanvas = mask.canvas;
    ctx.save();
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);
    ctx.restore();
    this.compose();
  }
  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {
    if (!this.contentVisible) {
      return;
    }
    img = this.getObject(img.data, img);
    const ctx = this.ctx;
    ctx.save();
    const currentTransform = getCurrentTransform(ctx);
    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);
    const mask = this._createMaskCanvas(img);
    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);
    for (let i = 0, ii = positions.length; i < ii; i += 2) {
      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);
      const [x, y] = Util.applyTransform([0, 0], trans);
      ctx.drawImage(mask.canvas, x, y);
    }
    ctx.restore();
    this.compose();
  }
  paintImageMaskXObjectGroup(images) {
    if (!this.contentVisible) {
      return;
    }
    const ctx = this.ctx;
    const fillColor = this.current.fillColor;
    const isPatternFill = this.current.patternFill;
    for (const image of images) {
      const {
        data,
        width,
        height,
        transform
      } = image;
      const maskCanvas = this.cachedCanvases.getCanvas("maskCanvas", width, height);
      const maskCtx = maskCanvas.context;
      maskCtx.save();
      const img = this.getObject(data, image);
      putBinaryImageMask(maskCtx, img);
      maskCtx.globalCompositeOperation = "source-in";
      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;
      maskCtx.fillRect(0, 0, width, height);
      maskCtx.restore();
      ctx.save();
      ctx.transform(...transform);
      ctx.scale(1, -1);
      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);
      ctx.restore();
    }
    this.compose();
  }
  paintImageXObject(objId) {
    if (!this.contentVisible) {
      return;
    }
    const imgData = this.getObject(objId);
    if (!imgData) {
      warn("Dependent image isn't ready yet");
      return;
    }
    this.paintInlineImageXObject(imgData);
  }
  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {
    if (!this.contentVisible) {
      return;
    }
    const imgData = this.getObject(objId);
    if (!imgData) {
      warn("Dependent image isn't ready yet");
      return;
    }
    const width = imgData.width;
    const height = imgData.height;
    const map = [];
    for (let i = 0, ii = positions.length; i < ii; i += 2) {
      map.push({
        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],
        x: 0,
        y: 0,
        w: width,
        h: height
      });
    }
    this.paintInlineImageXObjectGroup(imgData, map);
  }
  applyTransferMapsToCanvas(ctx) {
    if (this.current.transferMaps !== "none") {
      ctx.filter = this.current.transferMaps;
      ctx.drawImage(ctx.canvas, 0, 0);
      ctx.filter = "none";
    }
    return ctx.canvas;
  }
  applyTransferMapsToBitmap(imgData) {
    if (this.current.transferMaps === "none") {
      return imgData.bitmap;
    }
    const {
      bitmap,
      width,
      height
    } = imgData;
    const tmpCanvas = this.cachedCanvases.getCanvas("inlineImage", width, height);
    const tmpCtx = tmpCanvas.context;
    tmpCtx.filter = this.current.transferMaps;
    tmpCtx.drawImage(bitmap, 0, 0);
    tmpCtx.filter = "none";
    return tmpCanvas.canvas;
  }
  paintInlineImageXObject(imgData) {
    if (!this.contentVisible) {
      return;
    }
    const width = imgData.width;
    const height = imgData.height;
    const ctx = this.ctx;
    this.save();
    if (!isNodeJS) {
      const {
        filter
      } = ctx;
      if (filter !== "none" && filter !== "") {
        ctx.filter = "none";
      }
    }
    ctx.scale(1 / width, -1 / height);
    let imgToPaint;
    if (imgData.bitmap) {
      imgToPaint = this.applyTransferMapsToBitmap(imgData);
    } else if (typeof HTMLElement === "function" && imgData instanceof HTMLElement || !imgData.data) {
      imgToPaint = imgData;
    } else {
      const tmpCanvas = this.cachedCanvases.getCanvas("inlineImage", width, height);
      const tmpCtx = tmpCanvas.context;
      putBinaryImageData(tmpCtx, imgData);
      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);
    }
    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));
    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);
    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);
    this.compose();
    this.restore();
  }
  paintInlineImageXObjectGroup(imgData, map) {
    if (!this.contentVisible) {
      return;
    }
    const ctx = this.ctx;
    let imgToPaint;
    if (imgData.bitmap) {
      imgToPaint = imgData.bitmap;
    } else {
      const w = imgData.width;
      const h = imgData.height;
      const tmpCanvas = this.cachedCanvases.getCanvas("inlineImage", w, h);
      const tmpCtx = tmpCanvas.context;
      putBinaryImageData(tmpCtx, imgData);
      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);
    }
    for (const entry of map) {
      ctx.save();
      ctx.transform(...entry.transform);
      ctx.scale(1, -1);
      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);
      ctx.restore();
    }
    this.compose();
  }
  paintSolidColorImageMask() {
    if (!this.contentVisible) {
      return;
    }
    this.ctx.fillRect(0, 0, 1, 1);
    this.compose();
  }
  markPoint(tag) {
  }
  markPointProps(tag, properties) {
  }
  beginMarkedContent(tag) {
    this.markedContentStack.push({
      visible: true
    });
  }
  beginMarkedContentProps(tag, properties) {
    if (tag === "OC") {
      this.markedContentStack.push({
        visible: this.optionalContentConfig.isVisible(properties)
      });
    } else {
      this.markedContentStack.push({
        visible: true
      });
    }
    this.contentVisible = this.isContentVisible();
  }
  endMarkedContent() {
    this.markedContentStack.pop();
    this.contentVisible = this.isContentVisible();
  }
  beginCompat() {
  }
  endCompat() {
  }
  consumePath(path, clipBox) {
    const isEmpty = this.current.isEmptyClip();
    if (this.pendingClip) {
      this.current.updateClipFromPath();
    }
    if (!this.pendingClip) {
      this.compose(clipBox);
    }
    const ctx = this.ctx;
    if (this.pendingClip) {
      if (!isEmpty) {
        if (this.pendingClip === EO_CLIP) {
          ctx.clip(path, "evenodd");
        } else {
          ctx.clip(path);
        }
      }
      this.pendingClip = null;
    }
    this.current.startNewPathAndClipBox(this.current.clipBox);
    ctx.beginPath();
  }
  getSinglePixelWidth() {
    if (!this._cachedGetSinglePixelWidth) {
      const m = getCurrentTransform(this.ctx);
      if (m[1] === 0 && m[2] === 0) {
        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));
      } else {
        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);
        const normX = Math.hypot(m[0], m[2]);
        const normY = Math.hypot(m[1], m[3]);
        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;
      }
    }
    return this._cachedGetSinglePixelWidth;
  }
  getScaleForStroking() {
    if (this._cachedScaleForStroking[0] === -1) {
      const {
        lineWidth
      } = this.current;
      const {
        a,
        b,
        c,
        d
      } = this.ctx.getTransform();
      let scaleX, scaleY;
      if (b === 0 && c === 0) {
        const normX = Math.abs(a);
        const normY = Math.abs(d);
        if (normX === normY) {
          if (lineWidth === 0) {
            scaleX = scaleY = 1 / normX;
          } else {
            const scaledLineWidth = normX * lineWidth;
            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;
          }
        } else if (lineWidth === 0) {
          scaleX = 1 / normX;
          scaleY = 1 / normY;
        } else {
          const scaledXLineWidth = normX * lineWidth;
          const scaledYLineWidth = normY * lineWidth;
          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;
          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;
        }
      } else {
        const absDet = Math.abs(a * d - b * c);
        const normX = Math.hypot(a, b);
        const normY = Math.hypot(c, d);
        if (lineWidth === 0) {
          scaleX = normY / absDet;
          scaleY = normX / absDet;
        } else {
          const baseArea = lineWidth * absDet;
          scaleX = normY > baseArea ? normY / baseArea : 1;
          scaleY = normX > baseArea ? normX / baseArea : 1;
        }
      }
      this._cachedScaleForStroking[0] = scaleX;
      this._cachedScaleForStroking[1] = scaleY;
    }
    return this._cachedScaleForStroking;
  }
  rescaleAndStroke(path, saveRestore) {
    const {
      ctx,
      current: {
        lineWidth
      }
    } = this;
    const [scaleX, scaleY] = this.getScaleForStroking();
    if (scaleX === scaleY) {
      ctx.lineWidth = (lineWidth || 1) * scaleX;
      ctx.stroke(path);
      return;
    }
    const dashes = ctx.getLineDash();
    if (saveRestore) {
      ctx.save();
    }
    ctx.scale(scaleX, scaleY);
    SCALE_MATRIX.a = 1 / scaleX;
    SCALE_MATRIX.d = 1 / scaleY;
    const newPath = new Path2D();
    newPath.addPath(path, SCALE_MATRIX);
    if (dashes.length > 0) {
      const scale = Math.max(scaleX, scaleY);
      ctx.setLineDash(dashes.map((x) => x / scale));
      ctx.lineDashOffset /= scale;
    }
    ctx.lineWidth = lineWidth || 1;
    ctx.stroke(newPath);
    if (saveRestore) {
      ctx.restore();
    }
  }
  isContentVisible() {
    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {
      if (!this.markedContentStack[i].visible) {
        return false;
      }
    }
    return true;
  }
};
for (const op in OPS) {
  if (CanvasGraphics.prototype[op] !== void 0) {
    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];
  }
}
var GlobalWorkerOptions = class {
  static #port = null;
  static #src = "";
  static get workerPort() {
    return this.#port;
  }
  static set workerPort(val) {
    if (!(typeof Worker !== "undefined" && val instanceof Worker) && val !== null) {
      throw new Error("Invalid `workerPort` type.");
    }
    this.#port = val;
  }
  static get workerSrc() {
    return this.#src;
  }
  static set workerSrc(val) {
    if (typeof val !== "string") {
      throw new Error("Invalid `workerSrc` type.");
    }
    this.#src = val;
  }
};
var Metadata = class {
  #metadataMap;
  #data;
  constructor({
    parsedData,
    rawData
  }) {
    this.#metadataMap = parsedData;
    this.#data = rawData;
  }
  getRaw() {
    return this.#data;
  }
  get(name) {
    return this.#metadataMap.get(name) ?? null;
  }
  getAll() {
    return objectFromMap(this.#metadataMap);
  }
  has(name) {
    return this.#metadataMap.has(name);
  }
};
var INTERNAL = Symbol("INTERNAL");
var OptionalContentGroup = class {
  #isDisplay = false;
  #isPrint = false;
  #userSet = false;
  #visible = true;
  constructor(renderingIntent, {
    name,
    intent,
    usage,
    rbGroups
  }) {
    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);
    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);
    this.name = name;
    this.intent = intent;
    this.usage = usage;
    this.rbGroups = rbGroups;
  }
  get visible() {
    if (this.#userSet) {
      return this.#visible;
    }
    if (!this.#visible) {
      return false;
    }
    const {
      print,
      view
    } = this.usage;
    if (this.#isDisplay) {
      return view?.viewState !== "OFF";
    } else if (this.#isPrint) {
      return print?.printState !== "OFF";
    }
    return true;
  }
  _setVisible(internal, visible, userSet = false) {
    if (internal !== INTERNAL) {
      unreachable("Internal method `_setVisible` called.");
    }
    this.#userSet = userSet;
    this.#visible = visible;
  }
};
var OptionalContentConfig = class {
  #cachedGetHash = null;
  #groups = /* @__PURE__ */ new Map();
  #initialHash = null;
  #order = null;
  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {
    this.renderingIntent = renderingIntent;
    this.name = null;
    this.creator = null;
    if (data === null) {
      return;
    }
    this.name = data.name;
    this.creator = data.creator;
    this.#order = data.order;
    for (const group of data.groups) {
      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));
    }
    if (data.baseState === "OFF") {
      for (const group of this.#groups.values()) {
        group._setVisible(INTERNAL, false);
      }
    }
    for (const on of data.on) {
      this.#groups.get(on)._setVisible(INTERNAL, true);
    }
    for (const off of data.off) {
      this.#groups.get(off)._setVisible(INTERNAL, false);
    }
    this.#initialHash = this.getHash();
  }
  #evaluateVisibilityExpression(array) {
    const length = array.length;
    if (length < 2) {
      return true;
    }
    const operator = array[0];
    for (let i = 1; i < length; i++) {
      const element = array[i];
      let state;
      if (Array.isArray(element)) {
        state = this.#evaluateVisibilityExpression(element);
      } else if (this.#groups.has(element)) {
        state = this.#groups.get(element).visible;
      } else {
        warn(`Optional content group not found: ${element}`);
        return true;
      }
      switch (operator) {
        case "And":
          if (!state) {
            return false;
          }
          break;
        case "Or":
          if (state) {
            return true;
          }
          break;
        case "Not":
          return !state;
        default:
          return true;
      }
    }
    return operator === "And";
  }
  isVisible(group) {
    if (this.#groups.size === 0) {
      return true;
    }
    if (!group) {
      info("Optional content group not defined.");
      return true;
    }
    if (group.type === "OCG") {
      if (!this.#groups.has(group.id)) {
        warn(`Optional content group not found: ${group.id}`);
        return true;
      }
      return this.#groups.get(group.id).visible;
    } else if (group.type === "OCMD") {
      if (group.expression) {
        return this.#evaluateVisibilityExpression(group.expression);
      }
      if (!group.policy || group.policy === "AnyOn") {
        for (const id of group.ids) {
          if (!this.#groups.has(id)) {
            warn(`Optional content group not found: ${id}`);
            return true;
          }
          if (this.#groups.get(id).visible) {
            return true;
          }
        }
        return false;
      } else if (group.policy === "AllOn") {
        for (const id of group.ids) {
          if (!this.#groups.has(id)) {
            warn(`Optional content group not found: ${id}`);
            return true;
          }
          if (!this.#groups.get(id).visible) {
            return false;
          }
        }
        return true;
      } else if (group.policy === "AnyOff") {
        for (const id of group.ids) {
          if (!this.#groups.has(id)) {
            warn(`Optional content group not found: ${id}`);
            return true;
          }
          if (!this.#groups.get(id).visible) {
            return true;
          }
        }
        return false;
      } else if (group.policy === "AllOff") {
        for (const id of group.ids) {
          if (!this.#groups.has(id)) {
            warn(`Optional content group not found: ${id}`);
            return true;
          }
          if (this.#groups.get(id).visible) {
            return false;
          }
        }
        return true;
      }
      warn(`Unknown optional content policy ${group.policy}.`);
      return true;
    }
    warn(`Unknown group type ${group.type}.`);
    return true;
  }
  setVisibility(id, visible = true, preserveRB = true) {
    const group = this.#groups.get(id);
    if (!group) {
      warn(`Optional content group not found: ${id}`);
      return;
    }
    if (preserveRB && visible && group.rbGroups.length) {
      for (const rbGroup of group.rbGroups) {
        for (const otherId of rbGroup) {
          if (otherId !== id) {
            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);
          }
        }
      }
    }
    group._setVisible(INTERNAL, !!visible, true);
    this.#cachedGetHash = null;
  }
  setOCGState({
    state,
    preserveRB
  }) {
    let operator;
    for (const elem of state) {
      switch (elem) {
        case "ON":
        case "OFF":
        case "Toggle":
          operator = elem;
          continue;
      }
      const group = this.#groups.get(elem);
      if (!group) {
        continue;
      }
      switch (operator) {
        case "ON":
          this.setVisibility(elem, true, preserveRB);
          break;
        case "OFF":
          this.setVisibility(elem, false, preserveRB);
          break;
        case "Toggle":
          this.setVisibility(elem, !group.visible, preserveRB);
          break;
      }
    }
    this.#cachedGetHash = null;
  }
  get hasInitialVisibility() {
    return this.#initialHash === null || this.getHash() === this.#initialHash;
  }
  getOrder() {
    if (!this.#groups.size) {
      return null;
    }
    if (this.#order) {
      return this.#order.slice();
    }
    return [...this.#groups.keys()];
  }
  getGroups() {
    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;
  }
  getGroup(id) {
    return this.#groups.get(id) || null;
  }
  getHash() {
    if (this.#cachedGetHash !== null) {
      return this.#cachedGetHash;
    }
    const hash = new MurmurHash3_64();
    for (const [id, group] of this.#groups) {
      hash.update(`${id}:${group.visible}`);
    }
    return this.#cachedGetHash = hash.hexdigest();
  }
};
var PDFDataTransportStream = class {
  constructor(pdfDataRangeTransport, {
    disableRange = false,
    disableStream = false
  }) {
    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');
    const {
      length,
      initialData,
      progressiveDone,
      contentDispositionFilename
    } = pdfDataRangeTransport;
    this._queuedChunks = [];
    this._progressiveDone = progressiveDone;
    this._contentDispositionFilename = contentDispositionFilename;
    if (initialData?.length > 0) {
      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;
      this._queuedChunks.push(buffer);
    }
    this._pdfDataRangeTransport = pdfDataRangeTransport;
    this._isStreamingSupported = !disableStream;
    this._isRangeSupported = !disableRange;
    this._contentLength = length;
    this._fullRequestReader = null;
    this._rangeReaders = [];
    pdfDataRangeTransport.addRangeListener((begin, chunk) => {
      this._onReceiveData({
        begin,
        chunk
      });
    });
    pdfDataRangeTransport.addProgressListener((loaded, total) => {
      this._onProgress({
        loaded,
        total
      });
    });
    pdfDataRangeTransport.addProgressiveReadListener((chunk) => {
      this._onReceiveData({
        chunk
      });
    });
    pdfDataRangeTransport.addProgressiveDoneListener(() => {
      this._onProgressiveDone();
    });
    pdfDataRangeTransport.transportReady();
  }
  _onReceiveData({
    begin,
    chunk
  }) {
    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;
    if (begin === void 0) {
      if (this._fullRequestReader) {
        this._fullRequestReader._enqueue(buffer);
      } else {
        this._queuedChunks.push(buffer);
      }
    } else {
      const found = this._rangeReaders.some(function(rangeReader) {
        if (rangeReader._begin !== begin) {
          return false;
        }
        rangeReader._enqueue(buffer);
        return true;
      });
      assert(found, "_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.");
    }
  }
  get _progressiveDataLength() {
    return this._fullRequestReader?._loaded ?? 0;
  }
  _onProgress(evt) {
    if (evt.total === void 0) {
      this._rangeReaders[0]?.onProgress?.({
        loaded: evt.loaded
      });
    } else {
      this._fullRequestReader?.onProgress?.({
        loaded: evt.loaded,
        total: evt.total
      });
    }
  }
  _onProgressiveDone() {
    this._fullRequestReader?.progressiveDone();
    this._progressiveDone = true;
  }
  _removeRangeReader(reader) {
    const i = this._rangeReaders.indexOf(reader);
    if (i >= 0) {
      this._rangeReaders.splice(i, 1);
    }
  }
  getFullReader() {
    assert(!this._fullRequestReader, "PDFDataTransportStream.getFullReader can only be called once.");
    const queuedChunks = this._queuedChunks;
    this._queuedChunks = null;
    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);
  }
  getRangeReader(begin, end) {
    if (end <= this._progressiveDataLength) {
      return null;
    }
    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);
    this._pdfDataRangeTransport.requestDataRange(begin, end);
    this._rangeReaders.push(reader);
    return reader;
  }
  cancelAllRequests(reason) {
    this._fullRequestReader?.cancel(reason);
    for (const reader of this._rangeReaders.slice(0)) {
      reader.cancel(reason);
    }
    this._pdfDataRangeTransport.abort();
  }
};
var PDFDataTransportStreamReader = class {
  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {
    this._stream = stream;
    this._done = progressiveDone || false;
    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;
    this._queuedChunks = queuedChunks || [];
    this._loaded = 0;
    for (const chunk of this._queuedChunks) {
      this._loaded += chunk.byteLength;
    }
    this._requests = [];
    this._headersReady = Promise.resolve();
    stream._fullRequestReader = this;
    this.onProgress = null;
  }
  _enqueue(chunk) {
    if (this._done) {
      return;
    }
    if (this._requests.length > 0) {
      const requestCapability = this._requests.shift();
      requestCapability.resolve({
        value: chunk,
        done: false
      });
    } else {
      this._queuedChunks.push(chunk);
    }
    this._loaded += chunk.byteLength;
  }
  get headersReady() {
    return this._headersReady;
  }
  get filename() {
    return this._filename;
  }
  get isRangeSupported() {
    return this._stream._isRangeSupported;
  }
  get isStreamingSupported() {
    return this._stream._isStreamingSupported;
  }
  get contentLength() {
    return this._stream._contentLength;
  }
  async read() {
    if (this._queuedChunks.length > 0) {
      const chunk = this._queuedChunks.shift();
      return {
        value: chunk,
        done: false
      };
    }
    if (this._done) {
      return {
        value: void 0,
        done: true
      };
    }
    const requestCapability = Promise.withResolvers();
    this._requests.push(requestCapability);
    return requestCapability.promise;
  }
  cancel(reason) {
    this._done = true;
    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: void 0,
        done: true
      });
    }
    this._requests.length = 0;
  }
  progressiveDone() {
    if (this._done) {
      return;
    }
    this._done = true;
  }
};
var PDFDataTransportStreamRangeReader = class {
  constructor(stream, begin, end) {
    this._stream = stream;
    this._begin = begin;
    this._end = end;
    this._queuedChunk = null;
    this._requests = [];
    this._done = false;
    this.onProgress = null;
  }
  _enqueue(chunk) {
    if (this._done) {
      return;
    }
    if (this._requests.length === 0) {
      this._queuedChunk = chunk;
    } else {
      const requestsCapability = this._requests.shift();
      requestsCapability.resolve({
        value: chunk,
        done: false
      });
      for (const requestCapability of this._requests) {
        requestCapability.resolve({
          value: void 0,
          done: true
        });
      }
      this._requests.length = 0;
    }
    this._done = true;
    this._stream._removeRangeReader(this);
  }
  get isStreamingSupported() {
    return false;
  }
  async read() {
    if (this._queuedChunk) {
      const chunk = this._queuedChunk;
      this._queuedChunk = null;
      return {
        value: chunk,
        done: false
      };
    }
    if (this._done) {
      return {
        value: void 0,
        done: true
      };
    }
    const requestCapability = Promise.withResolvers();
    this._requests.push(requestCapability);
    return requestCapability.promise;
  }
  cancel(reason) {
    this._done = true;
    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: void 0,
        done: true
      });
    }
    this._requests.length = 0;
    this._stream._removeRangeReader(this);
  }
};
function getFilenameFromContentDispositionHeader(contentDisposition) {
  let needsEncodingFixup = true;
  let tmp = toParamRegExp("filename\\*", "i").exec(contentDisposition);
  if (tmp) {
    tmp = tmp[1];
    let filename = rfc2616unquote(tmp);
    filename = unescape(filename);
    filename = rfc5987decode(filename);
    filename = rfc2047decode(filename);
    return fixupEncoding(filename);
  }
  tmp = rfc2231getparam(contentDisposition);
  if (tmp) {
    const filename = rfc2047decode(tmp);
    return fixupEncoding(filename);
  }
  tmp = toParamRegExp("filename", "i").exec(contentDisposition);
  if (tmp) {
    tmp = tmp[1];
    let filename = rfc2616unquote(tmp);
    filename = rfc2047decode(filename);
    return fixupEncoding(filename);
  }
  function toParamRegExp(attributePattern, flags) {
    return new RegExp("(?:^|;)\\s*" + attributePattern + '\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)', flags);
  }
  function textdecode(encoding, value) {
    if (encoding) {
      if (!/^[\x00-\xFF]+$/.test(value)) {
        return value;
      }
      try {
        const decoder = new TextDecoder(encoding, {
          fatal: true
        });
        const buffer = stringToBytes(value);
        value = decoder.decode(buffer);
        needsEncodingFixup = false;
      } catch {
      }
    }
    return value;
  }
  function fixupEncoding(value) {
    if (needsEncodingFixup && /[\x80-\xff]/.test(value)) {
      value = textdecode("utf-8", value);
      if (needsEncodingFixup) {
        value = textdecode("iso-8859-1", value);
      }
    }
    return value;
  }
  function rfc2231getparam(contentDispositionStr) {
    const matches = [];
    let match;
    const iter = toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)", "ig");
    while ((match = iter.exec(contentDispositionStr)) !== null) {
      let [, n, quot, part] = match;
      n = parseInt(n, 10);
      if (n in matches) {
        if (n === 0) {
          break;
        }
        continue;
      }
      matches[n] = [quot, part];
    }
    const parts = [];
    for (let n = 0; n < matches.length; ++n) {
      if (!(n in matches)) {
        break;
      }
      let [quot, part] = matches[n];
      part = rfc2616unquote(part);
      if (quot) {
        part = unescape(part);
        if (n === 0) {
          part = rfc5987decode(part);
        }
      }
      parts.push(part);
    }
    return parts.join("");
  }
  function rfc2616unquote(value) {
    if (value.startsWith('"')) {
      const parts = value.slice(1).split('\\"');
      for (let i = 0; i < parts.length; ++i) {
        const quotindex = parts[i].indexOf('"');
        if (quotindex !== -1) {
          parts[i] = parts[i].slice(0, quotindex);
          parts.length = i + 1;
        }
        parts[i] = parts[i].replaceAll(/\\(.)/g, "$1");
      }
      value = parts.join('"');
    }
    return value;
  }
  function rfc5987decode(extvalue) {
    const encodingend = extvalue.indexOf("'");
    if (encodingend === -1) {
      return extvalue;
    }
    const encoding = extvalue.slice(0, encodingend);
    const langvalue = extvalue.slice(encodingend + 1);
    const value = langvalue.replace(/^[^']*'/, "");
    return textdecode(encoding, value);
  }
  function rfc2047decode(value) {
    if (!value.startsWith("=?") || /[\x00-\x19\x80-\xff]/.test(value)) {
      return value;
    }
    return value.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g, function(matches, charset, encoding, text) {
      if (encoding === "q" || encoding === "Q") {
        text = text.replaceAll("_", " ");
        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function(match, hex) {
          return String.fromCharCode(parseInt(hex, 16));
        });
        return textdecode(charset, text);
      }
      try {
        text = atob(text);
      } catch {
      }
      return textdecode(charset, text);
    });
  }
  return "";
}
function createHeaders(isHttp, httpHeaders) {
  const headers = new Headers();
  if (!isHttp || !httpHeaders || typeof httpHeaders !== "object") {
    return headers;
  }
  for (const key in httpHeaders) {
    const val = httpHeaders[key];
    if (val !== void 0) {
      headers.append(key, val);
    }
  }
  return headers;
}
function getResponseOrigin(url) {
  return URL.parse(url)?.origin ?? null;
}
function validateRangeRequestCapabilities({
  responseHeaders,
  isHttp,
  rangeChunkSize,
  disableRange
}) {
  const returnValues = {
    allowRangeRequests: false,
    suggestedLength: void 0
  };
  const length = parseInt(responseHeaders.get("Content-Length"), 10);
  if (!Number.isInteger(length)) {
    return returnValues;
  }
  returnValues.suggestedLength = length;
  if (length <= 2 * rangeChunkSize) {
    return returnValues;
  }
  if (disableRange || !isHttp) {
    return returnValues;
  }
  if (responseHeaders.get("Accept-Ranges") !== "bytes") {
    return returnValues;
  }
  const contentEncoding = responseHeaders.get("Content-Encoding") || "identity";
  if (contentEncoding !== "identity") {
    return returnValues;
  }
  returnValues.allowRangeRequests = true;
  return returnValues;
}
function extractFilenameFromHeader(responseHeaders) {
  const contentDisposition = responseHeaders.get("Content-Disposition");
  if (contentDisposition) {
    let filename = getFilenameFromContentDispositionHeader(contentDisposition);
    if (filename.includes("%")) {
      try {
        filename = decodeURIComponent(filename);
      } catch {
      }
    }
    if (isPdfFile(filename)) {
      return filename;
    }
  }
  return null;
}
function createResponseError(status, url) {
  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF "${url}".`, status, status === 404 || status === 0 && url.startsWith("file:"));
}
function validateResponseStatus(status) {
  return status === 200 || status === 206;
}
function createFetchOptions(headers, withCredentials, abortController) {
  return {
    method: "GET",
    headers,
    signal: abortController.signal,
    mode: "cors",
    credentials: withCredentials ? "include" : "same-origin",
    redirect: "follow"
  };
}
function getArrayBuffer(val) {
  if (val instanceof Uint8Array) {
    return val.buffer;
  }
  if (val instanceof ArrayBuffer) {
    return val;
  }
  warn(`getArrayBuffer - unexpected data format: ${val}`);
  return new Uint8Array(val).buffer;
}
var PDFFetchStream = class {
  _responseOrigin = null;
  constructor(source) {
    this.source = source;
    this.isHttp = /^https?:/i.test(source.url);
    this.headers = createHeaders(this.isHttp, source.httpHeaders);
    this._fullRequestReader = null;
    this._rangeRequestReaders = [];
  }
  get _progressiveDataLength() {
    return this._fullRequestReader?._loaded ?? 0;
  }
  getFullReader() {
    assert(!this._fullRequestReader, "PDFFetchStream.getFullReader can only be called once.");
    this._fullRequestReader = new PDFFetchStreamReader(this);
    return this._fullRequestReader;
  }
  getRangeReader(begin, end) {
    if (end <= this._progressiveDataLength) {
      return null;
    }
    const reader = new PDFFetchStreamRangeReader(this, begin, end);
    this._rangeRequestReaders.push(reader);
    return reader;
  }
  cancelAllRequests(reason) {
    this._fullRequestReader?.cancel(reason);
    for (const reader of this._rangeRequestReaders.slice(0)) {
      reader.cancel(reason);
    }
  }
};
var PDFFetchStreamReader = class {
  constructor(stream) {
    this._stream = stream;
    this._reader = null;
    this._loaded = 0;
    this._filename = null;
    const source = stream.source;
    this._withCredentials = source.withCredentials || false;
    this._contentLength = source.length;
    this._headersCapability = Promise.withResolvers();
    this._disableRange = source.disableRange || false;
    this._rangeChunkSize = source.rangeChunkSize;
    if (!this._rangeChunkSize && !this._disableRange) {
      this._disableRange = true;
    }
    this._abortController = new AbortController();
    this._isStreamingSupported = !source.disableStream;
    this._isRangeSupported = !source.disableRange;
    const headers = new Headers(stream.headers);
    const url = source.url;
    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then((response) => {
      stream._responseOrigin = getResponseOrigin(response.url);
      if (!validateResponseStatus(response.status)) {
        throw createResponseError(response.status, url);
      }
      this._reader = response.body.getReader();
      this._headersCapability.resolve();
      const responseHeaders = response.headers;
      const {
        allowRangeRequests,
        suggestedLength
      } = validateRangeRequestCapabilities({
        responseHeaders,
        isHttp: stream.isHttp,
        rangeChunkSize: this._rangeChunkSize,
        disableRange: this._disableRange
      });
      this._isRangeSupported = allowRangeRequests;
      this._contentLength = suggestedLength || this._contentLength;
      this._filename = extractFilenameFromHeader(responseHeaders);
      if (!this._isStreamingSupported && this._isRangeSupported) {
        this.cancel(new AbortException("Streaming is disabled."));
      }
    }).catch(this._headersCapability.reject);
    this.onProgress = null;
  }
  get headersReady() {
    return this._headersCapability.promise;
  }
  get filename() {
    return this._filename;
  }
  get contentLength() {
    return this._contentLength;
  }
  get isRangeSupported() {
    return this._isRangeSupported;
  }
  get isStreamingSupported() {
    return this._isStreamingSupported;
  }
  async read() {
    await this._headersCapability.promise;
    const {
      value,
      done
    } = await this._reader.read();
    if (done) {
      return {
        value,
        done
      };
    }
    this._loaded += value.byteLength;
    this.onProgress?.({
      loaded: this._loaded,
      total: this._contentLength
    });
    return {
      value: getArrayBuffer(value),
      done: false
    };
  }
  cancel(reason) {
    this._reader?.cancel(reason);
    this._abortController.abort();
  }
};
var PDFFetchStreamRangeReader = class {
  constructor(stream, begin, end) {
    this._stream = stream;
    this._reader = null;
    this._loaded = 0;
    const source = stream.source;
    this._withCredentials = source.withCredentials || false;
    this._readCapability = Promise.withResolvers();
    this._isStreamingSupported = !source.disableStream;
    this._abortController = new AbortController();
    const headers = new Headers(stream.headers);
    headers.append("Range", `bytes=${begin}-${end - 1}`);
    const url = source.url;
    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then((response) => {
      const responseOrigin = getResponseOrigin(response.url);
      if (responseOrigin !== stream._responseOrigin) {
        throw new Error(`Expected range response-origin "${responseOrigin}" to match "${stream._responseOrigin}".`);
      }
      if (!validateResponseStatus(response.status)) {
        throw createResponseError(response.status, url);
      }
      this._readCapability.resolve();
      this._reader = response.body.getReader();
    }).catch(this._readCapability.reject);
    this.onProgress = null;
  }
  get isStreamingSupported() {
    return this._isStreamingSupported;
  }
  async read() {
    await this._readCapability.promise;
    const {
      value,
      done
    } = await this._reader.read();
    if (done) {
      return {
        value,
        done
      };
    }
    this._loaded += value.byteLength;
    this.onProgress?.({
      loaded: this._loaded
    });
    return {
      value: getArrayBuffer(value),
      done: false
    };
  }
  cancel(reason) {
    this._reader?.cancel(reason);
    this._abortController.abort();
  }
};
var OK_RESPONSE = 200;
var PARTIAL_CONTENT_RESPONSE = 206;
function network_getArrayBuffer(xhr) {
  const data = xhr.response;
  if (typeof data !== "string") {
    return data;
  }
  return stringToBytes(data).buffer;
}
var NetworkManager = class {
  _responseOrigin = null;
  constructor({
    url,
    httpHeaders,
    withCredentials
  }) {
    this.url = url;
    this.isHttp = /^https?:/i.test(url);
    this.headers = createHeaders(this.isHttp, httpHeaders);
    this.withCredentials = withCredentials || false;
    this.currXhrId = 0;
    this.pendingRequests = /* @__PURE__ */ Object.create(null);
  }
  request(args) {
    const xhr = new XMLHttpRequest();
    const xhrId = this.currXhrId++;
    const pendingRequest = this.pendingRequests[xhrId] = {
      xhr
    };
    xhr.open("GET", this.url);
    xhr.withCredentials = this.withCredentials;
    for (const [key, val] of this.headers) {
      xhr.setRequestHeader(key, val);
    }
    if (this.isHttp && "begin" in args && "end" in args) {
      xhr.setRequestHeader("Range", `bytes=${args.begin}-${args.end - 1}`);
      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;
    } else {
      pendingRequest.expectedStatus = OK_RESPONSE;
    }
    xhr.responseType = "arraybuffer";
    assert(args.onError, "Expected `onError` callback to be provided.");
    xhr.onerror = () => {
      args.onError(xhr.status);
    };
    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);
    xhr.onprogress = this.onProgress.bind(this, xhrId);
    pendingRequest.onHeadersReceived = args.onHeadersReceived;
    pendingRequest.onDone = args.onDone;
    pendingRequest.onError = args.onError;
    pendingRequest.onProgress = args.onProgress;
    xhr.send(null);
    return xhrId;
  }
  onProgress(xhrId, evt) {
    const pendingRequest = this.pendingRequests[xhrId];
    if (!pendingRequest) {
      return;
    }
    pendingRequest.onProgress?.(evt);
  }
  onStateChange(xhrId, evt) {
    const pendingRequest = this.pendingRequests[xhrId];
    if (!pendingRequest) {
      return;
    }
    const xhr = pendingRequest.xhr;
    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {
      pendingRequest.onHeadersReceived();
      delete pendingRequest.onHeadersReceived;
    }
    if (xhr.readyState !== 4) {
      return;
    }
    if (!(xhrId in this.pendingRequests)) {
      return;
    }
    delete this.pendingRequests[xhrId];
    if (xhr.status === 0 && this.isHttp) {
      pendingRequest.onError(xhr.status);
      return;
    }
    const xhrStatus = xhr.status || OK_RESPONSE;
    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;
    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {
      pendingRequest.onError(xhr.status);
      return;
    }
    const chunk = network_getArrayBuffer(xhr);
    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {
      const rangeHeader = xhr.getResponseHeader("Content-Range");
      const matches = /bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);
      if (matches) {
        pendingRequest.onDone({
          begin: parseInt(matches[1], 10),
          chunk
        });
      } else {
        warn(`Missing or invalid "Content-Range" header.`);
        pendingRequest.onError(0);
      }
    } else if (chunk) {
      pendingRequest.onDone({
        begin: 0,
        chunk
      });
    } else {
      pendingRequest.onError(xhr.status);
    }
  }
  getRequestXhr(xhrId) {
    return this.pendingRequests[xhrId].xhr;
  }
  isPendingRequest(xhrId) {
    return xhrId in this.pendingRequests;
  }
  abortRequest(xhrId) {
    const xhr = this.pendingRequests[xhrId].xhr;
    delete this.pendingRequests[xhrId];
    xhr.abort();
  }
};
var PDFNetworkStream = class {
  constructor(source) {
    this._source = source;
    this._manager = new NetworkManager(source);
    this._rangeChunkSize = source.rangeChunkSize;
    this._fullRequestReader = null;
    this._rangeRequestReaders = [];
  }
  _onRangeRequestReaderClosed(reader) {
    const i = this._rangeRequestReaders.indexOf(reader);
    if (i >= 0) {
      this._rangeRequestReaders.splice(i, 1);
    }
  }
  getFullReader() {
    assert(!this._fullRequestReader, "PDFNetworkStream.getFullReader can only be called once.");
    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);
    return this._fullRequestReader;
  }
  getRangeReader(begin, end) {
    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);
    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);
    this._rangeRequestReaders.push(reader);
    return reader;
  }
  cancelAllRequests(reason) {
    this._fullRequestReader?.cancel(reason);
    for (const reader of this._rangeRequestReaders.slice(0)) {
      reader.cancel(reason);
    }
  }
};
var PDFNetworkStreamFullRequestReader = class {
  constructor(manager, source) {
    this._manager = manager;
    this._url = source.url;
    this._fullRequestId = manager.request({
      onHeadersReceived: this._onHeadersReceived.bind(this),
      onDone: this._onDone.bind(this),
      onError: this._onError.bind(this),
      onProgress: this._onProgress.bind(this)
    });
    this._headersCapability = Promise.withResolvers();
    this._disableRange = source.disableRange || false;
    this._contentLength = source.length;
    this._rangeChunkSize = source.rangeChunkSize;
    if (!this._rangeChunkSize && !this._disableRange) {
      this._disableRange = true;
    }
    this._isStreamingSupported = false;
    this._isRangeSupported = false;
    this._cachedChunks = [];
    this._requests = [];
    this._done = false;
    this._storedError = void 0;
    this._filename = null;
    this.onProgress = null;
  }
  _onHeadersReceived() {
    const fullRequestXhrId = this._fullRequestId;
    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);
    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);
    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();
    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\S ]+$/, "").split(/[\r\n]+/).map((x) => {
      const [key, ...val] = x.split(": ");
      return [key, val.join(": ")];
    }) : []);
    const {
      allowRangeRequests,
      suggestedLength
    } = validateRangeRequestCapabilities({
      responseHeaders,
      isHttp: this._manager.isHttp,
      rangeChunkSize: this._rangeChunkSize,
      disableRange: this._disableRange
    });
    if (allowRangeRequests) {
      this._isRangeSupported = true;
    }
    this._contentLength = suggestedLength || this._contentLength;
    this._filename = extractFilenameFromHeader(responseHeaders);
    if (this._isRangeSupported) {
      this._manager.abortRequest(fullRequestXhrId);
    }
    this._headersCapability.resolve();
  }
  _onDone(data) {
    if (data) {
      if (this._requests.length > 0) {
        const requestCapability = this._requests.shift();
        requestCapability.resolve({
          value: data.chunk,
          done: false
        });
      } else {
        this._cachedChunks.push(data.chunk);
      }
    }
    this._done = true;
    if (this._cachedChunks.length > 0) {
      return;
    }
    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: void 0,
        done: true
      });
    }
    this._requests.length = 0;
  }
  _onError(status) {
    this._storedError = createResponseError(status, this._url);
    this._headersCapability.reject(this._storedError);
    for (const requestCapability of this._requests) {
      requestCapability.reject(this._storedError);
    }
    this._requests.length = 0;
    this._cachedChunks.length = 0;
  }
  _onProgress(evt) {
    this.onProgress?.({
      loaded: evt.loaded,
      total: evt.lengthComputable ? evt.total : this._contentLength
    });
  }
  get filename() {
    return this._filename;
  }
  get isRangeSupported() {
    return this._isRangeSupported;
  }
  get isStreamingSupported() {
    return this._isStreamingSupported;
  }
  get contentLength() {
    return this._contentLength;
  }
  get headersReady() {
    return this._headersCapability.promise;
  }
  async read() {
    await this._headersCapability.promise;
    if (this._storedError) {
      throw this._storedError;
    }
    if (this._cachedChunks.length > 0) {
      const chunk = this._cachedChunks.shift();
      return {
        value: chunk,
        done: false
      };
    }
    if (this._done) {
      return {
        value: void 0,
        done: true
      };
    }
    const requestCapability = Promise.withResolvers();
    this._requests.push(requestCapability);
    return requestCapability.promise;
  }
  cancel(reason) {
    this._done = true;
    this._headersCapability.reject(reason);
    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: void 0,
        done: true
      });
    }
    this._requests.length = 0;
    if (this._manager.isPendingRequest(this._fullRequestId)) {
      this._manager.abortRequest(this._fullRequestId);
    }
    this._fullRequestReader = null;
  }
};
var PDFNetworkStreamRangeRequestReader = class {
  constructor(manager, begin, end) {
    this._manager = manager;
    this._url = manager.url;
    this._requestId = manager.request({
      begin,
      end,
      onHeadersReceived: this._onHeadersReceived.bind(this),
      onDone: this._onDone.bind(this),
      onError: this._onError.bind(this),
      onProgress: this._onProgress.bind(this)
    });
    this._requests = [];
    this._queuedChunk = null;
    this._done = false;
    this._storedError = void 0;
    this.onProgress = null;
    this.onClosed = null;
  }
  _onHeadersReceived() {
    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);
    if (responseOrigin !== this._manager._responseOrigin) {
      this._storedError = new Error(`Expected range response-origin "${responseOrigin}" to match "${this._manager._responseOrigin}".`);
      this._onError(0);
    }
  }
  _close() {
    this.onClosed?.(this);
  }
  _onDone(data) {
    const chunk = data.chunk;
    if (this._requests.length > 0) {
      const requestCapability = this._requests.shift();
      requestCapability.resolve({
        value: chunk,
        done: false
      });
    } else {
      this._queuedChunk = chunk;
    }
    this._done = true;
    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: void 0,
        done: true
      });
    }
    this._requests.length = 0;
    this._close();
  }
  _onError(status) {
    this._storedError ??= createResponseError(status, this._url);
    for (const requestCapability of this._requests) {
      requestCapability.reject(this._storedError);
    }
    this._requests.length = 0;
    this._queuedChunk = null;
  }
  _onProgress(evt) {
    if (!this.isStreamingSupported) {
      this.onProgress?.({
        loaded: evt.loaded
      });
    }
  }
  get isStreamingSupported() {
    return false;
  }
  async read() {
    if (this._storedError) {
      throw this._storedError;
    }
    if (this._queuedChunk !== null) {
      const chunk = this._queuedChunk;
      this._queuedChunk = null;
      return {
        value: chunk,
        done: false
      };
    }
    if (this._done) {
      return {
        value: void 0,
        done: true
      };
    }
    const requestCapability = Promise.withResolvers();
    this._requests.push(requestCapability);
    return requestCapability.promise;
  }
  cancel(reason) {
    this._done = true;
    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: void 0,
        done: true
      });
    }
    this._requests.length = 0;
    if (this._manager.isPendingRequest(this._requestId)) {
      this._manager.abortRequest(this._requestId);
    }
    this._close();
  }
};
var urlRegex = /^[a-z][a-z0-9\-+.]+:/i;
function parseUrlOrPath(sourceUrl) {
  if (urlRegex.test(sourceUrl)) {
    return new URL(sourceUrl);
  }
  const url = process.getBuiltinModule("url");
  return new URL(url.pathToFileURL(sourceUrl));
}
var PDFNodeStream = class {
  constructor(source) {
    this.source = source;
    this.url = parseUrlOrPath(source.url);
    assert(this.url.protocol === "file:", "PDFNodeStream only supports file:// URLs.");
    this._fullRequestReader = null;
    this._rangeRequestReaders = [];
  }
  get _progressiveDataLength() {
    return this._fullRequestReader?._loaded ?? 0;
  }
  getFullReader() {
    assert(!this._fullRequestReader, "PDFNodeStream.getFullReader can only be called once.");
    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);
    return this._fullRequestReader;
  }
  getRangeReader(start, end) {
    if (end <= this._progressiveDataLength) {
      return null;
    }
    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);
    this._rangeRequestReaders.push(rangeReader);
    return rangeReader;
  }
  cancelAllRequests(reason) {
    this._fullRequestReader?.cancel(reason);
    for (const reader of this._rangeRequestReaders.slice(0)) {
      reader.cancel(reason);
    }
  }
};
var PDFNodeStreamFsFullReader = class {
  constructor(stream) {
    this._url = stream.url;
    this._done = false;
    this._storedError = null;
    this.onProgress = null;
    const source = stream.source;
    this._contentLength = source.length;
    this._loaded = 0;
    this._filename = null;
    this._disableRange = source.disableRange || false;
    this._rangeChunkSize = source.rangeChunkSize;
    if (!this._rangeChunkSize && !this._disableRange) {
      this._disableRange = true;
    }
    this._isStreamingSupported = !source.disableStream;
    this._isRangeSupported = !source.disableRange;
    this._readableStream = null;
    this._readCapability = Promise.withResolvers();
    this._headersCapability = Promise.withResolvers();
    const fs = process.getBuiltinModule("fs");
    fs.promises.lstat(this._url).then((stat) => {
      this._contentLength = stat.size;
      this._setReadableStream(fs.createReadStream(this._url));
      this._headersCapability.resolve();
    }, (error) => {
      if (error.code === "ENOENT") {
        error = createResponseError(0, this._url.href);
      }
      this._storedError = error;
      this._headersCapability.reject(error);
    });
  }
  get headersReady() {
    return this._headersCapability.promise;
  }
  get filename() {
    return this._filename;
  }
  get contentLength() {
    return this._contentLength;
  }
  get isRangeSupported() {
    return this._isRangeSupported;
  }
  get isStreamingSupported() {
    return this._isStreamingSupported;
  }
  async read() {
    await this._readCapability.promise;
    if (this._done) {
      return {
        value: void 0,
        done: true
      };
    }
    if (this._storedError) {
      throw this._storedError;
    }
    const chunk = this._readableStream.read();
    if (chunk === null) {
      this._readCapability = Promise.withResolvers();
      return this.read();
    }
    this._loaded += chunk.length;
    this.onProgress?.({
      loaded: this._loaded,
      total: this._contentLength
    });
    const buffer = new Uint8Array(chunk).buffer;
    return {
      value: buffer,
      done: false
    };
  }
  cancel(reason) {
    if (!this._readableStream) {
      this._error(reason);
      return;
    }
    this._readableStream.destroy(reason);
  }
  _error(reason) {
    this._storedError = reason;
    this._readCapability.resolve();
  }
  _setReadableStream(readableStream) {
    this._readableStream = readableStream;
    readableStream.on("readable", () => {
      this._readCapability.resolve();
    });
    readableStream.on("end", () => {
      readableStream.destroy();
      this._done = true;
      this._readCapability.resolve();
    });
    readableStream.on("error", (reason) => {
      this._error(reason);
    });
    if (!this._isStreamingSupported && this._isRangeSupported) {
      this._error(new AbortException("streaming is disabled"));
    }
    if (this._storedError) {
      this._readableStream.destroy(this._storedError);
    }
  }
};
var PDFNodeStreamFsRangeReader = class {
  constructor(stream, start, end) {
    this._url = stream.url;
    this._done = false;
    this._storedError = null;
    this.onProgress = null;
    this._loaded = 0;
    this._readableStream = null;
    this._readCapability = Promise.withResolvers();
    const source = stream.source;
    this._isStreamingSupported = !source.disableStream;
    const fs = process.getBuiltinModule("fs");
    this._setReadableStream(fs.createReadStream(this._url, {
      start,
      end: end - 1
    }));
  }
  get isStreamingSupported() {
    return this._isStreamingSupported;
  }
  async read() {
    await this._readCapability.promise;
    if (this._done) {
      return {
        value: void 0,
        done: true
      };
    }
    if (this._storedError) {
      throw this._storedError;
    }
    const chunk = this._readableStream.read();
    if (chunk === null) {
      this._readCapability = Promise.withResolvers();
      return this.read();
    }
    this._loaded += chunk.length;
    this.onProgress?.({
      loaded: this._loaded
    });
    const buffer = new Uint8Array(chunk).buffer;
    return {
      value: buffer,
      done: false
    };
  }
  cancel(reason) {
    if (!this._readableStream) {
      this._error(reason);
      return;
    }
    this._readableStream.destroy(reason);
  }
  _error(reason) {
    this._storedError = reason;
    this._readCapability.resolve();
  }
  _setReadableStream(readableStream) {
    this._readableStream = readableStream;
    readableStream.on("readable", () => {
      this._readCapability.resolve();
    });
    readableStream.on("end", () => {
      readableStream.destroy();
      this._done = true;
      this._readCapability.resolve();
    });
    readableStream.on("error", (reason) => {
      this._error(reason);
    });
    if (this._storedError) {
      this._readableStream.destroy(this._storedError);
    }
  }
};
var MAX_TEXT_DIVS_TO_RENDER = 1e5;
var DEFAULT_FONT_SIZE = 30;
var TextLayer = class _TextLayer {
  #capability = Promise.withResolvers();
  #container = null;
  #disableProcessItems = false;
  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;
  #lang = null;
  #layoutTextParams = null;
  #pageHeight = 0;
  #pageWidth = 0;
  #reader = null;
  #rootContainer = null;
  #rotation = 0;
  #scale = 0;
  #styleCache = /* @__PURE__ */ Object.create(null);
  #textContentItemsStr = [];
  #textContentSource = null;
  #textDivs = [];
  #textDivProperties = /* @__PURE__ */ new WeakMap();
  #transform = null;
  static #ascentCache = /* @__PURE__ */ new Map();
  static #canvasContexts = /* @__PURE__ */ new Map();
  static #canvasCtxFonts = /* @__PURE__ */ new WeakMap();
  static #minFontSize = null;
  static #pendingTextLayers = /* @__PURE__ */ new Set();
  constructor({
    textContentSource,
    container: container2,
    viewport
  }) {
    if (textContentSource instanceof ReadableStream) {
      this.#textContentSource = textContentSource;
    } else if (typeof textContentSource === "object") {
      this.#textContentSource = new ReadableStream({
        start(controller) {
          controller.enqueue(textContentSource);
          controller.close();
        }
      });
    } else {
      throw new Error('No "textContentSource" parameter specified.');
    }
    this.#container = this.#rootContainer = container2;
    this.#scale = viewport.scale * OutputScale.pixelRatio;
    this.#rotation = viewport.rotation;
    this.#layoutTextParams = {
      div: null,
      properties: null,
      ctx: null
    };
    const {
      pageWidth,
      pageHeight,
      pageX,
      pageY
    } = viewport.rawDims;
    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];
    this.#pageWidth = pageWidth;
    this.#pageHeight = pageHeight;
    _TextLayer.#ensureMinFontSizeComputed();
    setLayerDimensions(container2, viewport);
    this.#capability.promise.finally(() => {
      _TextLayer.#pendingTextLayers.delete(this);
      this.#layoutTextParams = null;
      this.#styleCache = null;
    }).catch(() => {
    });
  }
  static get fontFamilyMap() {
    const {
      isWindows,
      isFirefox
    } = util_FeatureTest.platform;
    return shadow(this, "fontFamilyMap", /* @__PURE__ */ new Map([["sans-serif", `${isWindows && isFirefox ? "Calibri, " : ""}sans-serif`], ["monospace", `${isWindows && isFirefox ? "Lucida Console, " : ""}monospace`]]));
  }
  render() {
    const pump = () => {
      this.#reader.read().then(({
        value,
        done
      }) => {
        if (done) {
          this.#capability.resolve();
          return;
        }
        this.#lang ??= value.lang;
        Object.assign(this.#styleCache, value.styles);
        this.#processItems(value.items);
        pump();
      }, this.#capability.reject);
    };
    this.#reader = this.#textContentSource.getReader();
    _TextLayer.#pendingTextLayers.add(this);
    pump();
    return this.#capability.promise;
  }
  update({
    viewport,
    onBefore = null
  }) {
    const scale = viewport.scale * OutputScale.pixelRatio;
    const rotation = viewport.rotation;
    if (rotation !== this.#rotation) {
      onBefore?.();
      this.#rotation = rotation;
      setLayerDimensions(this.#rootContainer, {
        rotation
      });
    }
    if (scale !== this.#scale) {
      onBefore?.();
      this.#scale = scale;
      const params = {
        div: null,
        properties: null,
        ctx: _TextLayer.#getCtx(this.#lang)
      };
      for (const div of this.#textDivs) {
        params.properties = this.#textDivProperties.get(div);
        params.div = div;
        this.#layout(params);
      }
    }
  }
  cancel() {
    const abortEx = new AbortException("TextLayer task cancelled.");
    this.#reader?.cancel(abortEx).catch(() => {
    });
    this.#reader = null;
    this.#capability.reject(abortEx);
  }
  get textDivs() {
    return this.#textDivs;
  }
  get textContentItemsStr() {
    return this.#textContentItemsStr;
  }
  #processItems(items) {
    if (this.#disableProcessItems) {
      return;
    }
    this.#layoutTextParams.ctx ??= _TextLayer.#getCtx(this.#lang);
    const textDivs = this.#textDivs, textContentItemsStr = this.#textContentItemsStr;
    for (const item of items) {
      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {
        warn("Ignoring additional textDivs for performance reasons.");
        this.#disableProcessItems = true;
        return;
      }
      if (item.str === void 0) {
        if (item.type === "beginMarkedContentProps" || item.type === "beginMarkedContent") {
          const parent = this.#container;
          this.#container = document.createElement("span");
          this.#container.classList.add("markedContent");
          if (item.id !== null) {
            this.#container.setAttribute("id", `${item.id}`);
          }
          parent.append(this.#container);
        } else if (item.type === "endMarkedContent") {
          this.#container = this.#container.parentNode;
        }
        continue;
      }
      textContentItemsStr.push(item.str);
      this.#appendText(item);
    }
  }
  #appendText(geom) {
    const textDiv = document.createElement("span");
    const textDivProperties = {
      angle: 0,
      canvasWidth: 0,
      hasText: geom.str !== "",
      hasEOL: geom.hasEOL,
      fontSize: 0
    };
    this.#textDivs.push(textDiv);
    const tx = Util.transform(this.#transform, geom.transform);
    let angle = Math.atan2(tx[1], tx[0]);
    const style = this.#styleCache[geom.fontName];
    if (style.vertical) {
      angle += Math.PI / 2;
    }
    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;
    fontFamily = _TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;
    const fontHeight = Math.hypot(tx[2], tx[3]);
    const fontAscent = fontHeight * _TextLayer.#getAscent(fontFamily, style, this.#lang);
    let left, top;
    if (angle === 0) {
      left = tx[4];
      top = tx[5] - fontAscent;
    } else {
      left = tx[4] + fontAscent * Math.sin(angle);
      top = tx[5] - fontAscent * Math.cos(angle);
    }
    const scaleFactorStr = "calc(var(--total-scale-factor) *";
    const divStyle = textDiv.style;
    if (this.#container === this.#rootContainer) {
      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;
      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;
    } else {
      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;
      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;
    }
    divStyle.fontSize = `${scaleFactorStr}${(_TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;
    divStyle.fontFamily = fontFamily;
    textDivProperties.fontSize = fontHeight;
    textDiv.setAttribute("role", "presentation");
    textDiv.textContent = geom.str;
    textDiv.dir = geom.dir;
    if (this.#fontInspectorEnabled) {
      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;
    }
    if (angle !== 0) {
      textDivProperties.angle = angle * (180 / Math.PI);
    }
    let shouldScaleText = false;
    if (geom.str.length > 1) {
      shouldScaleText = true;
    } else if (geom.str !== " " && geom.transform[0] !== geom.transform[3]) {
      const absScaleX = Math.abs(geom.transform[0]), absScaleY = Math.abs(geom.transform[3]);
      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {
        shouldScaleText = true;
      }
    }
    if (shouldScaleText) {
      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;
    }
    this.#textDivProperties.set(textDiv, textDivProperties);
    this.#layoutTextParams.div = textDiv;
    this.#layoutTextParams.properties = textDivProperties;
    this.#layout(this.#layoutTextParams);
    if (textDivProperties.hasText) {
      this.#container.append(textDiv);
    }
    if (textDivProperties.hasEOL) {
      const br = document.createElement("br");
      br.setAttribute("role", "presentation");
      this.#container.append(br);
    }
  }
  #layout(params) {
    const {
      div,
      properties,
      ctx
    } = params;
    const {
      style
    } = div;
    let transform = "";
    if (_TextLayer.#minFontSize > 1) {
      transform = `scale(${1 / _TextLayer.#minFontSize})`;
    }
    if (properties.canvasWidth !== 0 && properties.hasText) {
      const {
        fontFamily
      } = style;
      const {
        canvasWidth,
        fontSize
      } = properties;
      _TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);
      const {
        width
      } = ctx.measureText(div.textContent);
      if (width > 0) {
        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;
      }
    }
    if (properties.angle !== 0) {
      transform = `rotate(${properties.angle}deg) ${transform}`;
    }
    if (transform.length > 0) {
      style.transform = transform;
    }
  }
  static cleanup() {
    if (this.#pendingTextLayers.size > 0) {
      return;
    }
    this.#ascentCache.clear();
    for (const {
      canvas: canvas2
    } of this.#canvasContexts.values()) {
      canvas2.remove();
    }
    this.#canvasContexts.clear();
  }
  static #getCtx(lang = null) {
    let ctx = this.#canvasContexts.get(lang ||= "");
    if (!ctx) {
      const canvas2 = document.createElement("canvas");
      canvas2.className = "hiddenCanvasElement";
      canvas2.lang = lang;
      document.body.append(canvas2);
      ctx = canvas2.getContext("2d", {
        alpha: false,
        willReadFrequently: true
      });
      this.#canvasContexts.set(lang, ctx);
      this.#canvasCtxFonts.set(ctx, {
        size: 0,
        family: ""
      });
    }
    return ctx;
  }
  static #ensureCtxFont(ctx, size, family) {
    const cached = this.#canvasCtxFonts.get(ctx);
    if (size === cached.size && family === cached.family) {
      return;
    }
    ctx.font = `${size}px ${family}`;
    cached.size = size;
    cached.family = family;
  }
  static #ensureMinFontSizeComputed() {
    if (this.#minFontSize !== null) {
      return;
    }
    const div = document.createElement("div");
    div.style.opacity = 0;
    div.style.lineHeight = 1;
    div.style.fontSize = "1px";
    div.style.position = "absolute";
    div.textContent = "X";
    document.body.append(div);
    this.#minFontSize = div.getBoundingClientRect().height;
    div.remove();
  }
  static #getAscent(fontFamily, style, lang) {
    const cachedAscent = this.#ascentCache.get(fontFamily);
    if (cachedAscent) {
      return cachedAscent;
    }
    const ctx = this.#getCtx(lang);
    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;
    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);
    const metrics = ctx.measureText("");
    const ascent = metrics.fontBoundingBoxAscent;
    const descent = Math.abs(metrics.fontBoundingBoxDescent);
    ctx.canvas.width = ctx.canvas.height = 0;
    let ratio = 0.8;
    if (ascent) {
      ratio = ascent / (ascent + descent);
    } else {
      if (util_FeatureTest.platform.isFirefox) {
        warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering.");
      }
      if (style.ascent) {
        ratio = style.ascent;
      } else if (style.descent) {
        ratio = 1 + style.descent;
      }
    }
    this.#ascentCache.set(fontFamily, ratio);
    return ratio;
  }
};
var XfaText = class _XfaText {
  static textContent(xfa) {
    const items = [];
    const output = {
      items,
      styles: /* @__PURE__ */ Object.create(null)
    };
    function walk(node) {
      if (!node) {
        return;
      }
      let str = null;
      const name = node.name;
      if (name === "#text") {
        str = node.value;
      } else if (!_XfaText.shouldBuildText(name)) {
        return;
      } else if (node?.attributes?.textContent) {
        str = node.attributes.textContent;
      } else if (node.value) {
        str = node.value;
      }
      if (str !== null) {
        items.push({
          str
        });
      }
      if (!node.children) {
        return;
      }
      for (const child of node.children) {
        walk(child);
      }
    }
    walk(xfa);
    return output;
  }
  static shouldBuildText(name) {
    return !(name === "textarea" || name === "input" || name === "option" || name === "select");
  }
};
var DEFAULT_RANGE_CHUNK_SIZE = 65536;
var RENDERING_CANCELLED_TIMEOUT = 100;
function getDocument(src = {}) {
  if (typeof src === "string" || src instanceof URL) {
    src = {
      url: src
    };
  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {
    src = {
      data: src
    };
  }
  const task2 = new PDFDocumentLoadingTask();
  const {
    docId
  } = task2;
  const url = src.url ? getUrlProp(src.url) : null;
  const data = src.data ? getDataProp(src.data) : null;
  const httpHeaders = src.httpHeaders || null;
  const withCredentials = src.withCredentials === true;
  const password = src.password ?? null;
  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;
  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : DEFAULT_RANGE_CHUNK_SIZE;
  let worker = src.worker instanceof PDFWorker ? src.worker : null;
  const verbosity2 = src.verbosity;
  const docBaseUrl = typeof src.docBaseUrl === "string" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;
  const cMapUrl = getFactoryUrlProp(src.cMapUrl);
  const cMapPacked = src.cMapPacked !== false;
  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);
  const iccUrl = getFactoryUrlProp(src.iccUrl);
  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);
  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);
  const wasmUrl = getFactoryUrlProp(src.wasmUrl);
  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);
  const ignoreErrors = src.stopAtErrors !== true;
  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;
  const isEvalSupported2 = src.isEvalSupported !== false;
  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === "boolean" ? src.isOffscreenCanvasSupported : !isNodeJS;
  const isImageDecoderSupported = typeof src.isImageDecoderSupported === "boolean" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);
  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;
  const disableFontFace = typeof src.disableFontFace === "boolean" ? src.disableFontFace : isNodeJS;
  const fontExtraProperties = src.fontExtraProperties === true;
  const enableXfa = src.enableXfa === true;
  const ownerDocument = src.ownerDocument || globalThis.document;
  const disableRange = src.disableRange === true;
  const disableStream = src.disableStream === true;
  const disableAutoFetch = src.disableAutoFetch === true;
  const pdfBug = src.pdfBug === true;
  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);
  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);
  const enableHWA = src.enableHWA === true;
  const useWasm = src.useWasm !== false;
  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;
  const useSystemFonts = typeof src.useSystemFonts === "boolean" ? src.useSystemFonts : !isNodeJS && !disableFontFace;
  const useWorkerFetch = typeof src.useWorkerFetch === "boolean" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));
  const styleElement = null;
  setVerbosityLevel(verbosity2);
  const transportFactory = {
    canvasFactory: new CanvasFactory({
      ownerDocument,
      enableHWA
    }),
    filterFactory: new FilterFactory({
      docId,
      ownerDocument
    }),
    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({
      baseUrl: cMapUrl,
      isCompressed: cMapPacked
    }),
    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({
      baseUrl: standardFontDataUrl
    }),
    wasmFactory: useWorkerFetch ? null : new WasmFactory({
      baseUrl: wasmUrl
    })
  };
  if (!worker) {
    const workerParams = {
      verbosity: verbosity2,
      port: GlobalWorkerOptions.workerPort
    };
    worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);
    task2._worker = worker;
  }
  const docParams = {
    docId,
    apiVersion: "5.1.91",
    data,
    password,
    disableAutoFetch,
    rangeChunkSize,
    length,
    docBaseUrl,
    enableXfa,
    evaluatorOptions: {
      maxImageSize,
      disableFontFace,
      ignoreErrors,
      isEvalSupported: isEvalSupported2,
      isOffscreenCanvasSupported,
      isImageDecoderSupported,
      canvasMaxAreaInBytes,
      fontExtraProperties,
      useSystemFonts,
      useWasm,
      useWorkerFetch,
      cMapUrl,
      iccUrl,
      standardFontDataUrl,
      wasmUrl
    }
  };
  const transportParams = {
    ownerDocument,
    pdfBug,
    styleElement,
    loadingParams: {
      disableAutoFetch,
      enableXfa
    }
  };
  worker.promise.then(function() {
    if (task2.destroyed) {
      throw new Error("Loading aborted");
    }
    if (worker.destroyed) {
      throw new Error("Worker was destroyed");
    }
    const workerIdPromise = worker.messageHandler.sendWithPromise("GetDocRequest", docParams, data ? [data.buffer] : null);
    let networkStream;
    if (rangeTransport) {
      networkStream = new PDFDataTransportStream(rangeTransport, {
        disableRange,
        disableStream
      });
    } else if (!data) {
      if (!url) {
        throw new Error("getDocument - no `url` parameter provided.");
      }
      let NetworkStream;
      if (isNodeJS) {
        if (isValidFetchUrl(url)) {
          if (typeof fetch === "undefined" || typeof Response === "undefined" || !("body" in Response.prototype)) {
            throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");
          }
          NetworkStream = PDFFetchStream;
        } else {
          NetworkStream = PDFNodeStream;
        }
      } else {
        NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : PDFNetworkStream;
      }
      networkStream = new NetworkStream({
        url,
        length,
        httpHeaders,
        withCredentials,
        rangeChunkSize,
        disableRange,
        disableStream
      });
    }
    return workerIdPromise.then((workerId) => {
      if (task2.destroyed) {
        throw new Error("Loading aborted");
      }
      if (worker.destroyed) {
        throw new Error("Worker was destroyed");
      }
      const messageHandler = new MessageHandler(docId, workerId, worker.port);
      const transport = new WorkerTransport(messageHandler, task2, networkStream, transportParams, transportFactory);
      task2._transport = transport;
      messageHandler.send("Ready", null);
    });
  }).catch(task2._capability.reject);
  return task2;
}
function getUrlProp(val) {
  if (val instanceof URL) {
    return val.href;
  }
  if (typeof val === "string") {
    if (isNodeJS) {
      return val;
    }
    const url = URL.parse(val, window.location);
    if (url) {
      return url.href;
    }
  }
  throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");
}
function getDataProp(val) {
  if (isNodeJS && typeof Buffer !== "undefined" && val instanceof Buffer) {
    throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");
  }
  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {
    return val;
  }
  if (typeof val === "string") {
    return stringToBytes(val);
  }
  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === "object" && !isNaN(val?.length)) {
    return new Uint8Array(val);
  }
  throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");
}
function getFactoryUrlProp(val) {
  if (typeof val !== "string") {
    return null;
  }
  if (val.endsWith("/")) {
    return val;
  }
  throw new Error(`Invalid factory url: "${val}" must include trailing slash.`);
}
var isRefProxy = (v) => typeof v === "object" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;
var isNameProxy = (v) => typeof v === "object" && typeof v?.name === "string";
var isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);
var PDFDocumentLoadingTask = class _PDFDocumentLoadingTask {
  static #docId = 0;
  _capability = Promise.withResolvers();
  _transport = null;
  _worker = null;
  docId = `d${_PDFDocumentLoadingTask.#docId++}`;
  destroyed = false;
  onPassword = null;
  onProgress = null;
  get promise() {
    return this._capability.promise;
  }
  async destroy() {
    this.destroyed = true;
    try {
      if (this._worker?.port) {
        this._worker._pendingDestroy = true;
      }
      await this._transport?.destroy();
    } catch (ex) {
      if (this._worker?.port) {
        delete this._worker._pendingDestroy;
      }
      throw ex;
    }
    this._transport = null;
    this._worker?.destroy();
    this._worker = null;
  }
  async getData() {
    return this._transport.getData();
  }
};
var PDFDataRangeTransport = class {
  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {
    this.length = length;
    this.initialData = initialData;
    this.progressiveDone = progressiveDone;
    this.contentDispositionFilename = contentDispositionFilename;
    this._rangeListeners = [];
    this._progressListeners = [];
    this._progressiveReadListeners = [];
    this._progressiveDoneListeners = [];
    this._readyCapability = Promise.withResolvers();
  }
  addRangeListener(listener) {
    this._rangeListeners.push(listener);
  }
  addProgressListener(listener) {
    this._progressListeners.push(listener);
  }
  addProgressiveReadListener(listener) {
    this._progressiveReadListeners.push(listener);
  }
  addProgressiveDoneListener(listener) {
    this._progressiveDoneListeners.push(listener);
  }
  onDataRange(begin, chunk) {
    for (const listener of this._rangeListeners) {
      listener(begin, chunk);
    }
  }
  onDataProgress(loaded, total) {
    this._readyCapability.promise.then(() => {
      for (const listener of this._progressListeners) {
        listener(loaded, total);
      }
    });
  }
  onDataProgressiveRead(chunk) {
    this._readyCapability.promise.then(() => {
      for (const listener of this._progressiveReadListeners) {
        listener(chunk);
      }
    });
  }
  onDataProgressiveDone() {
    this._readyCapability.promise.then(() => {
      for (const listener of this._progressiveDoneListeners) {
        listener();
      }
    });
  }
  transportReady() {
    this._readyCapability.resolve();
  }
  requestDataRange(begin, end) {
    unreachable("Abstract method PDFDataRangeTransport.requestDataRange");
  }
  abort() {
  }
};
var PDFDocumentProxy = class {
  constructor(pdfInfo, transport) {
    this._pdfInfo = pdfInfo;
    this._transport = transport;
  }
  get annotationStorage() {
    return this._transport.annotationStorage;
  }
  get canvasFactory() {
    return this._transport.canvasFactory;
  }
  get filterFactory() {
    return this._transport.filterFactory;
  }
  get numPages() {
    return this._pdfInfo.numPages;
  }
  get fingerprints() {
    return this._pdfInfo.fingerprints;
  }
  get isPureXfa() {
    return shadow(this, "isPureXfa", !!this._transport._htmlForXfa);
  }
  get allXfaHtml() {
    return this._transport._htmlForXfa;
  }
  getPage(pageNumber) {
    return this._transport.getPage(pageNumber);
  }
  getPageIndex(ref) {
    return this._transport.getPageIndex(ref);
  }
  getDestinations() {
    return this._transport.getDestinations();
  }
  getDestination(id) {
    return this._transport.getDestination(id);
  }
  getPageLabels() {
    return this._transport.getPageLabels();
  }
  getPageLayout() {
    return this._transport.getPageLayout();
  }
  getPageMode() {
    return this._transport.getPageMode();
  }
  getViewerPreferences() {
    return this._transport.getViewerPreferences();
  }
  getOpenAction() {
    return this._transport.getOpenAction();
  }
  getAttachments() {
    return this._transport.getAttachments();
  }
  getJSActions() {
    return this._transport.getDocJSActions();
  }
  getOutline() {
    return this._transport.getOutline();
  }
  getOptionalContentConfig({
    intent = "display"
  } = {}) {
    const {
      renderingIntent
    } = this._transport.getRenderingIntent(intent);
    return this._transport.getOptionalContentConfig(renderingIntent);
  }
  getPermissions() {
    return this._transport.getPermissions();
  }
  getMetadata() {
    return this._transport.getMetadata();
  }
  getMarkInfo() {
    return this._transport.getMarkInfo();
  }
  getData() {
    return this._transport.getData();
  }
  saveDocument() {
    return this._transport.saveDocument();
  }
  getDownloadInfo() {
    return this._transport.downloadInfoCapability.promise;
  }
  cleanup(keepLoadedFonts = false) {
    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);
  }
  destroy() {
    return this.loadingTask.destroy();
  }
  cachedPageNumber(ref) {
    return this._transport.cachedPageNumber(ref);
  }
  get loadingParams() {
    return this._transport.loadingParams;
  }
  get loadingTask() {
    return this._transport.loadingTask;
  }
  getFieldObjects() {
    return this._transport.getFieldObjects();
  }
  hasJSActions() {
    return this._transport.hasJSActions();
  }
  getCalculationOrderIds() {
    return this._transport.getCalculationOrderIds();
  }
};
var PDFPageProxy = class {
  #pendingCleanup = false;
  constructor(pageIndex, pageInfo, transport, pdfBug = false) {
    this._pageIndex = pageIndex;
    this._pageInfo = pageInfo;
    this._transport = transport;
    this._stats = pdfBug ? new StatTimer() : null;
    this._pdfBug = pdfBug;
    this.commonObjs = transport.commonObjs;
    this.objs = new PDFObjects();
    this._intentStates = /* @__PURE__ */ new Map();
    this.destroyed = false;
  }
  get pageNumber() {
    return this._pageIndex + 1;
  }
  get rotate() {
    return this._pageInfo.rotate;
  }
  get ref() {
    return this._pageInfo.ref;
  }
  get userUnit() {
    return this._pageInfo.userUnit;
  }
  get view() {
    return this._pageInfo.view;
  }
  getViewport({
    scale,
    rotation = this.rotate,
    offsetX = 0,
    offsetY = 0,
    dontFlip = false
  } = {}) {
    return new PageViewport({
      viewBox: this.view,
      userUnit: this.userUnit,
      scale,
      rotation,
      offsetX,
      offsetY,
      dontFlip
    });
  }
  getAnnotations({
    intent = "display"
  } = {}) {
    const {
      renderingIntent
    } = this._transport.getRenderingIntent(intent);
    return this._transport.getAnnotations(this._pageIndex, renderingIntent);
  }
  getJSActions() {
    return this._transport.getPageJSActions(this._pageIndex);
  }
  get filterFactory() {
    return this._transport.filterFactory;
  }
  get isPureXfa() {
    return shadow(this, "isPureXfa", !!this._transport._htmlForXfa);
  }
  async getXfa() {
    return this._transport._htmlForXfa?.children[this._pageIndex] || null;
  }
  render({
    canvasContext,
    viewport,
    intent = "display",
    annotationMode = AnnotationMode.ENABLE,
    transform = null,
    background = null,
    optionalContentConfigPromise = null,
    annotationCanvasMap = null,
    pageColors = null,
    printAnnotationStorage = null,
    isEditing = false
  }) {
    this._stats?.time("Overall");
    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);
    const {
      renderingIntent,
      cacheKey
    } = intentArgs;
    this.#pendingCleanup = false;
    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);
    let intentState = this._intentStates.get(cacheKey);
    if (!intentState) {
      intentState = /* @__PURE__ */ Object.create(null);
      this._intentStates.set(cacheKey, intentState);
    }
    if (intentState.streamReaderCancelTimeout) {
      clearTimeout(intentState.streamReaderCancelTimeout);
      intentState.streamReaderCancelTimeout = null;
    }
    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);
    if (!intentState.displayReadyCapability) {
      intentState.displayReadyCapability = Promise.withResolvers();
      intentState.operatorList = {
        fnArray: [],
        argsArray: [],
        lastChunk: false,
        separateAnnots: null
      };
      this._stats?.time("Page Request");
      this._pumpOperatorList(intentArgs);
    }
    const complete = (error) => {
      intentState.renderTasks.delete(internalRenderTask);
      if (intentPrint) {
        this.#pendingCleanup = true;
      }
      this.#tryCleanup();
      if (error) {
        internalRenderTask.capability.reject(error);
        this._abortOperatorList({
          intentState,
          reason: error instanceof Error ? error : new Error(error)
        });
      } else {
        internalRenderTask.capability.resolve();
      }
      if (this._stats) {
        this._stats.timeEnd("Rendering");
        this._stats.timeEnd("Overall");
        if (globalThis.Stats?.enabled) {
          globalThis.Stats.add(this.pageNumber, this._stats);
        }
      }
    };
    const internalRenderTask = new InternalRenderTask({
      callback: complete,
      params: {
        canvasContext,
        viewport,
        transform,
        background
      },
      objs: this.objs,
      commonObjs: this.commonObjs,
      annotationCanvasMap,
      operatorList: intentState.operatorList,
      pageIndex: this._pageIndex,
      canvasFactory: this._transport.canvasFactory,
      filterFactory: this._transport.filterFactory,
      useRequestAnimationFrame: !intentPrint,
      pdfBug: this._pdfBug,
      pageColors
    });
    (intentState.renderTasks ||= /* @__PURE__ */ new Set()).add(internalRenderTask);
    const renderTask = internalRenderTask.task;
    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {
      if (this.destroyed) {
        complete();
        return;
      }
      this._stats?.time("Rendering");
      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {
        throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");
      }
      internalRenderTask.initializeGraphics({
        transparency,
        optionalContentConfig
      });
      internalRenderTask.operatorListChanged();
    }).catch(complete);
    return renderTask;
  }
  getOperatorList({
    intent = "display",
    annotationMode = AnnotationMode.ENABLE,
    printAnnotationStorage = null,
    isEditing = false
  } = {}) {
    function operatorListChanged() {
      if (intentState.operatorList.lastChunk) {
        intentState.opListReadCapability.resolve(intentState.operatorList);
        intentState.renderTasks.delete(opListTask);
      }
    }
    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);
    let intentState = this._intentStates.get(intentArgs.cacheKey);
    if (!intentState) {
      intentState = /* @__PURE__ */ Object.create(null);
      this._intentStates.set(intentArgs.cacheKey, intentState);
    }
    let opListTask;
    if (!intentState.opListReadCapability) {
      opListTask = /* @__PURE__ */ Object.create(null);
      opListTask.operatorListChanged = operatorListChanged;
      intentState.opListReadCapability = Promise.withResolvers();
      (intentState.renderTasks ||= /* @__PURE__ */ new Set()).add(opListTask);
      intentState.operatorList = {
        fnArray: [],
        argsArray: [],
        lastChunk: false,
        separateAnnots: null
      };
      this._stats?.time("Page Request");
      this._pumpOperatorList(intentArgs);
    }
    return intentState.opListReadCapability.promise;
  }
  streamTextContent({
    includeMarkedContent = false,
    disableNormalization = false
  } = {}) {
    const TEXT_CONTENT_CHUNK_SIZE = 100;
    return this._transport.messageHandler.sendWithStream("GetTextContent", {
      pageIndex: this._pageIndex,
      includeMarkedContent: includeMarkedContent === true,
      disableNormalization: disableNormalization === true
    }, {
      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,
      size(textContent) {
        return textContent.items.length;
      }
    });
  }
  getTextContent(params = {}) {
    if (this._transport._htmlForXfa) {
      return this.getXfa().then((xfa) => XfaText.textContent(xfa));
    }
    const readableStream = this.streamTextContent(params);
    return new Promise(function(resolve, reject) {
      function pump() {
        reader.read().then(function({
          value,
          done
        }) {
          if (done) {
            resolve(textContent);
            return;
          }
          textContent.lang ??= value.lang;
          Object.assign(textContent.styles, value.styles);
          textContent.items.push(...value.items);
          pump();
        }, reject);
      }
      const reader = readableStream.getReader();
      const textContent = {
        items: [],
        styles: /* @__PURE__ */ Object.create(null),
        lang: null
      };
      pump();
    });
  }
  getStructTree() {
    return this._transport.getStructTree(this._pageIndex);
  }
  _destroy() {
    this.destroyed = true;
    const waitOn = [];
    for (const intentState of this._intentStates.values()) {
      this._abortOperatorList({
        intentState,
        reason: new Error("Page was destroyed."),
        force: true
      });
      if (intentState.opListReadCapability) {
        continue;
      }
      for (const internalRenderTask of intentState.renderTasks) {
        waitOn.push(internalRenderTask.completed);
        internalRenderTask.cancel();
      }
    }
    this.objs.clear();
    this.#pendingCleanup = false;
    return Promise.all(waitOn);
  }
  cleanup(resetStats = false) {
    this.#pendingCleanup = true;
    const success = this.#tryCleanup();
    if (resetStats && success) {
      this._stats &&= new StatTimer();
    }
    return success;
  }
  #tryCleanup() {
    if (!this.#pendingCleanup || this.destroyed) {
      return false;
    }
    for (const {
      renderTasks,
      operatorList
    } of this._intentStates.values()) {
      if (renderTasks.size > 0 || !operatorList.lastChunk) {
        return false;
      }
    }
    this._intentStates.clear();
    this.objs.clear();
    this.#pendingCleanup = false;
    return true;
  }
  _startRenderPage(transparency, cacheKey) {
    const intentState = this._intentStates.get(cacheKey);
    if (!intentState) {
      return;
    }
    this._stats?.timeEnd("Page Request");
    intentState.displayReadyCapability?.resolve(transparency);
  }
  _renderPageChunk(operatorListChunk, intentState) {
    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {
      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);
      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);
    }
    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;
    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;
    for (const internalRenderTask of intentState.renderTasks) {
      internalRenderTask.operatorListChanged();
    }
    if (operatorListChunk.lastChunk) {
      this.#tryCleanup();
    }
  }
  _pumpOperatorList({
    renderingIntent,
    cacheKey,
    annotationStorageSerializable,
    modifiedIds
  }) {
    const {
      map,
      transfer
    } = annotationStorageSerializable;
    const readableStream = this._transport.messageHandler.sendWithStream("GetOperatorList", {
      pageIndex: this._pageIndex,
      intent: renderingIntent,
      cacheKey,
      annotationStorage: map,
      modifiedIds
    }, transfer);
    const reader = readableStream.getReader();
    const intentState = this._intentStates.get(cacheKey);
    intentState.streamReader = reader;
    const pump = () => {
      reader.read().then(({
        value,
        done
      }) => {
        if (done) {
          intentState.streamReader = null;
          return;
        }
        if (this._transport.destroyed) {
          return;
        }
        this._renderPageChunk(value, intentState);
        pump();
      }, (reason) => {
        intentState.streamReader = null;
        if (this._transport.destroyed) {
          return;
        }
        if (intentState.operatorList) {
          intentState.operatorList.lastChunk = true;
          for (const internalRenderTask of intentState.renderTasks) {
            internalRenderTask.operatorListChanged();
          }
          this.#tryCleanup();
        }
        if (intentState.displayReadyCapability) {
          intentState.displayReadyCapability.reject(reason);
        } else if (intentState.opListReadCapability) {
          intentState.opListReadCapability.reject(reason);
        } else {
          throw reason;
        }
      });
    };
    pump();
  }
  _abortOperatorList({
    intentState,
    reason,
    force = false
  }) {
    if (!intentState.streamReader) {
      return;
    }
    if (intentState.streamReaderCancelTimeout) {
      clearTimeout(intentState.streamReaderCancelTimeout);
      intentState.streamReaderCancelTimeout = null;
    }
    if (!force) {
      if (intentState.renderTasks.size > 0) {
        return;
      }
      if (reason instanceof RenderingCancelledException) {
        let delay = RENDERING_CANCELLED_TIMEOUT;
        if (reason.extraDelay > 0 && reason.extraDelay < 1e3) {
          delay += reason.extraDelay;
        }
        intentState.streamReaderCancelTimeout = setTimeout(() => {
          intentState.streamReaderCancelTimeout = null;
          this._abortOperatorList({
            intentState,
            reason,
            force: true
          });
        }, delay);
        return;
      }
    }
    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {
    });
    intentState.streamReader = null;
    if (this._transport.destroyed) {
      return;
    }
    for (const [curCacheKey, curIntentState] of this._intentStates) {
      if (curIntentState === intentState) {
        this._intentStates.delete(curCacheKey);
        break;
      }
    }
    this.cleanup();
  }
  get stats() {
    return this._stats;
  }
};
var LoopbackPort = class {
  #listeners = /* @__PURE__ */ new Map();
  #deferred = Promise.resolve();
  postMessage(obj, transfer) {
    const event = {
      data: structuredClone(obj, transfer ? {
        transfer
      } : null)
    };
    this.#deferred.then(() => {
      for (const [listener] of this.#listeners) {
        listener.call(this, event);
      }
    });
  }
  addEventListener(name, listener, options = null) {
    let rmAbort = null;
    if (options?.signal instanceof AbortSignal) {
      const {
        signal
      } = options;
      if (signal.aborted) {
        warn("LoopbackPort - cannot use an `aborted` signal.");
        return;
      }
      const onAbort = () => this.removeEventListener(name, listener);
      rmAbort = () => signal.removeEventListener("abort", onAbort);
      signal.addEventListener("abort", onAbort);
    }
    this.#listeners.set(listener, rmAbort);
  }
  removeEventListener(name, listener) {
    const rmAbort = this.#listeners.get(listener);
    rmAbort?.();
    this.#listeners.delete(listener);
  }
  terminate() {
    for (const [, rmAbort] of this.#listeners) {
      rmAbort?.();
    }
    this.#listeners.clear();
  }
};
var PDFWorker = class _PDFWorker {
  static #fakeWorkerId = 0;
  static #isWorkerDisabled = false;
  static #workerPorts;
  static {
    if (isNodeJS) {
      this.#isWorkerDisabled = true;
      GlobalWorkerOptions.workerSrc ||= "./pdf.worker.mjs";
    }
    this._isSameOrigin = (baseUrl, otherUrl) => {
      const base = URL.parse(baseUrl);
      if (!base?.origin || base.origin === "null") {
        return false;
      }
      const other = new URL(otherUrl, base);
      return base.origin === other.origin;
    };
    this._createCDNWrapper = (url) => {
      const wrapper = `await import("${url}");`;
      return URL.createObjectURL(new Blob([wrapper], {
        type: "text/javascript"
      }));
    };
  }
  constructor({
    name = null,
    port = null,
    verbosity: verbosity2 = getVerbosityLevel()
  } = {}) {
    this.name = name;
    this.destroyed = false;
    this.verbosity = verbosity2;
    this._readyCapability = Promise.withResolvers();
    this._port = null;
    this._webWorker = null;
    this._messageHandler = null;
    if (port) {
      if (_PDFWorker.#workerPorts?.has(port)) {
        throw new Error("Cannot use more than one PDFWorker per port.");
      }
      (_PDFWorker.#workerPorts ||= /* @__PURE__ */ new WeakMap()).set(port, this);
      this._initializeFromPort(port);
      return;
    }
    this._initialize();
  }
  get promise() {
    return this._readyCapability.promise;
  }
  #resolve() {
    this._readyCapability.resolve();
    this._messageHandler.send("configure", {
      verbosity: this.verbosity
    });
  }
  get port() {
    return this._port;
  }
  get messageHandler() {
    return this._messageHandler;
  }
  _initializeFromPort(port) {
    this._port = port;
    this._messageHandler = new MessageHandler("main", "worker", port);
    this._messageHandler.on("ready", function() {
    });
    this.#resolve();
  }
  _initialize() {
    if (_PDFWorker.#isWorkerDisabled || _PDFWorker.#mainThreadWorkerMessageHandler) {
      this._setupFakeWorker();
      return;
    }
    let {
      workerSrc
    } = _PDFWorker;
    try {
      if (!_PDFWorker._isSameOrigin(window.location, workerSrc)) {
        workerSrc = _PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);
      }
      const worker = new Worker(workerSrc, {
        type: "module"
      });
      const messageHandler = new MessageHandler("main", "worker", worker);
      const terminateEarly = () => {
        ac.abort();
        messageHandler.destroy();
        worker.terminate();
        if (this.destroyed) {
          this._readyCapability.reject(new Error("Worker was destroyed"));
        } else {
          this._setupFakeWorker();
        }
      };
      const ac = new AbortController();
      worker.addEventListener("error", () => {
        if (!this._webWorker) {
          terminateEarly();
        }
      }, {
        signal: ac.signal
      });
      messageHandler.on("test", (data) => {
        ac.abort();
        if (this.destroyed || !data) {
          terminateEarly();
          return;
        }
        this._messageHandler = messageHandler;
        this._port = worker;
        this._webWorker = worker;
        this.#resolve();
      });
      messageHandler.on("ready", (data) => {
        ac.abort();
        if (this.destroyed) {
          terminateEarly();
          return;
        }
        try {
          sendTest();
        } catch {
          this._setupFakeWorker();
        }
      });
      const sendTest = () => {
        const testObj = new Uint8Array();
        messageHandler.send("test", testObj, [testObj.buffer]);
      };
      sendTest();
      return;
    } catch {
      info("The worker has been disabled.");
    }
    this._setupFakeWorker();
  }
  _setupFakeWorker() {
    if (!_PDFWorker.#isWorkerDisabled) {
      warn("Setting up fake worker.");
      _PDFWorker.#isWorkerDisabled = true;
    }
    _PDFWorker._setupFakeWorkerGlobal.then((WorkerMessageHandler) => {
      if (this.destroyed) {
        this._readyCapability.reject(new Error("Worker was destroyed"));
        return;
      }
      const port = new LoopbackPort();
      this._port = port;
      const id = `fake${_PDFWorker.#fakeWorkerId++}`;
      const workerHandler = new MessageHandler(id + "_worker", id, port);
      WorkerMessageHandler.setup(workerHandler, port);
      this._messageHandler = new MessageHandler(id, id + "_worker", port);
      this.#resolve();
    }).catch((reason) => {
      this._readyCapability.reject(new Error(`Setting up fake worker failed: "${reason.message}".`));
    });
  }
  destroy() {
    this.destroyed = true;
    this._webWorker?.terminate();
    this._webWorker = null;
    _PDFWorker.#workerPorts?.delete(this._port);
    this._port = null;
    this._messageHandler?.destroy();
    this._messageHandler = null;
  }
  static fromPort(params) {
    if (!params?.port) {
      throw new Error("PDFWorker.fromPort - invalid method signature.");
    }
    const cachedPort = this.#workerPorts?.get(params.port);
    if (cachedPort) {
      if (cachedPort._pendingDestroy) {
        throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");
      }
      return cachedPort;
    }
    return new _PDFWorker(params);
  }
  static get workerSrc() {
    if (GlobalWorkerOptions.workerSrc) {
      return GlobalWorkerOptions.workerSrc;
    }
    throw new Error('No "GlobalWorkerOptions.workerSrc" specified.');
  }
  static get #mainThreadWorkerMessageHandler() {
    try {
      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;
    } catch {
      return null;
    }
  }
  static get _setupFakeWorkerGlobal() {
    const loader = async () => {
      if (this.#mainThreadWorkerMessageHandler) {
        return this.#mainThreadWorkerMessageHandler;
      }
      const worker = await import(
        /*webpackIgnore: true*/
        /*@vite-ignore*/
        this.workerSrc
      );
      return worker.WorkerMessageHandler;
    };
    return shadow(this, "_setupFakeWorkerGlobal", loader());
  }
};
var WorkerTransport = class {
  #methodPromises = /* @__PURE__ */ new Map();
  #pageCache = /* @__PURE__ */ new Map();
  #pagePromises = /* @__PURE__ */ new Map();
  #pageRefCache = /* @__PURE__ */ new Map();
  #passwordCapability = null;
  constructor(messageHandler, loadingTask, networkStream, params, factory) {
    this.messageHandler = messageHandler;
    this.loadingTask = loadingTask;
    this.commonObjs = new PDFObjects();
    this.fontLoader = new FontLoader({
      ownerDocument: params.ownerDocument,
      styleElement: params.styleElement
    });
    this.loadingParams = params.loadingParams;
    this._params = params;
    this.canvasFactory = factory.canvasFactory;
    this.filterFactory = factory.filterFactory;
    this.cMapReaderFactory = factory.cMapReaderFactory;
    this.standardFontDataFactory = factory.standardFontDataFactory;
    this.wasmFactory = factory.wasmFactory;
    this.destroyed = false;
    this.destroyCapability = null;
    this._networkStream = networkStream;
    this._fullReader = null;
    this._lastProgress = null;
    this.downloadInfoCapability = Promise.withResolvers();
    this.setupMessageHandler();
  }
  #cacheSimpleMethod(name, data = null) {
    const cachedPromise = this.#methodPromises.get(name);
    if (cachedPromise) {
      return cachedPromise;
    }
    const promise = this.messageHandler.sendWithPromise(name, data);
    this.#methodPromises.set(name, promise);
    return promise;
  }
  get annotationStorage() {
    return shadow(this, "annotationStorage", new AnnotationStorage());
  }
  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {
    let renderingIntent = RenderingIntentFlag.DISPLAY;
    let annotationStorageSerializable = SerializableEmpty;
    switch (intent) {
      case "any":
        renderingIntent = RenderingIntentFlag.ANY;
        break;
      case "display":
        break;
      case "print":
        renderingIntent = RenderingIntentFlag.PRINT;
        break;
      default:
        warn(`getRenderingIntent - invalid intent: ${intent}`);
    }
    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;
    switch (annotationMode) {
      case AnnotationMode.DISABLE:
        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;
        break;
      case AnnotationMode.ENABLE:
        break;
      case AnnotationMode.ENABLE_FORMS:
        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;
        break;
      case AnnotationMode.ENABLE_STORAGE:
        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;
        annotationStorageSerializable = annotationStorage.serializable;
        break;
      default:
        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);
    }
    if (isEditing) {
      renderingIntent += RenderingIntentFlag.IS_EDITING;
    }
    if (isOpList) {
      renderingIntent += RenderingIntentFlag.OPLIST;
    }
    const {
      ids: modifiedIds,
      hash: modifiedIdsHash
    } = annotationStorage.modifiedIds;
    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];
    return {
      renderingIntent,
      cacheKey: cacheKeyBuf.join("_"),
      annotationStorageSerializable,
      modifiedIds
    };
  }
  destroy() {
    if (this.destroyCapability) {
      return this.destroyCapability.promise;
    }
    this.destroyed = true;
    this.destroyCapability = Promise.withResolvers();
    this.#passwordCapability?.reject(new Error("Worker was destroyed during onPassword callback"));
    const waitOn = [];
    for (const page of this.#pageCache.values()) {
      waitOn.push(page._destroy());
    }
    this.#pageCache.clear();
    this.#pagePromises.clear();
    this.#pageRefCache.clear();
    if (this.hasOwnProperty("annotationStorage")) {
      this.annotationStorage.resetModified();
    }
    const terminated = this.messageHandler.sendWithPromise("Terminate", null);
    waitOn.push(terminated);
    Promise.all(waitOn).then(() => {
      this.commonObjs.clear();
      this.fontLoader.clear();
      this.#methodPromises.clear();
      this.filterFactory.destroy();
      TextLayer.cleanup();
      this._networkStream?.cancelAllRequests(new AbortException("Worker was terminated."));
      this.messageHandler?.destroy();
      this.messageHandler = null;
      this.destroyCapability.resolve();
    }, this.destroyCapability.reject);
    return this.destroyCapability.promise;
  }
  setupMessageHandler() {
    const {
      messageHandler,
      loadingTask
    } = this;
    messageHandler.on("GetReader", (data, sink) => {
      assert(this._networkStream, "GetReader - no `IPDFStream` instance available.");
      this._fullReader = this._networkStream.getFullReader();
      this._fullReader.onProgress = (evt) => {
        this._lastProgress = {
          loaded: evt.loaded,
          total: evt.total
        };
      };
      sink.onPull = () => {
        this._fullReader.read().then(function({
          value,
          done
        }) {
          if (done) {
            sink.close();
            return;
          }
          assert(value instanceof ArrayBuffer, "GetReader - expected an ArrayBuffer.");
          sink.enqueue(new Uint8Array(value), 1, [value]);
        }).catch((reason) => {
          sink.error(reason);
        });
      };
      sink.onCancel = (reason) => {
        this._fullReader.cancel(reason);
        sink.ready.catch((readyReason) => {
          if (this.destroyed) {
            return;
          }
          throw readyReason;
        });
      };
    });
    messageHandler.on("ReaderHeadersReady", async (data) => {
      await this._fullReader.headersReady;
      const {
        isStreamingSupported,
        isRangeSupported,
        contentLength
      } = this._fullReader;
      if (!isStreamingSupported || !isRangeSupported) {
        if (this._lastProgress) {
          loadingTask.onProgress?.(this._lastProgress);
        }
        this._fullReader.onProgress = (evt) => {
          loadingTask.onProgress?.({
            loaded: evt.loaded,
            total: evt.total
          });
        };
      }
      return {
        isStreamingSupported,
        isRangeSupported,
        contentLength
      };
    });
    messageHandler.on("GetRangeReader", (data, sink) => {
      assert(this._networkStream, "GetRangeReader - no `IPDFStream` instance available.");
      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);
      if (!rangeReader) {
        sink.close();
        return;
      }
      sink.onPull = () => {
        rangeReader.read().then(function({
          value,
          done
        }) {
          if (done) {
            sink.close();
            return;
          }
          assert(value instanceof ArrayBuffer, "GetRangeReader - expected an ArrayBuffer.");
          sink.enqueue(new Uint8Array(value), 1, [value]);
        }).catch((reason) => {
          sink.error(reason);
        });
      };
      sink.onCancel = (reason) => {
        rangeReader.cancel(reason);
        sink.ready.catch((readyReason) => {
          if (this.destroyed) {
            return;
          }
          throw readyReason;
        });
      };
    });
    messageHandler.on("GetDoc", ({
      pdfInfo
    }) => {
      this._numPages = pdfInfo.numPages;
      this._htmlForXfa = pdfInfo.htmlForXfa;
      delete pdfInfo.htmlForXfa;
      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));
    });
    messageHandler.on("DocException", (ex) => {
      loadingTask._capability.reject(wrapReason(ex));
    });
    messageHandler.on("PasswordRequest", (ex) => {
      this.#passwordCapability = Promise.withResolvers();
      try {
        if (!loadingTask.onPassword) {
          throw wrapReason(ex);
        }
        const updatePassword = (password) => {
          if (password instanceof Error) {
            this.#passwordCapability.reject(password);
          } else {
            this.#passwordCapability.resolve({
              password
            });
          }
        };
        loadingTask.onPassword(updatePassword, ex.code);
      } catch (err) {
        this.#passwordCapability.reject(err);
      }
      return this.#passwordCapability.promise;
    });
    messageHandler.on("DataLoaded", (data) => {
      loadingTask.onProgress?.({
        loaded: data.length,
        total: data.length
      });
      this.downloadInfoCapability.resolve(data);
    });
    messageHandler.on("StartRenderPage", (data) => {
      if (this.destroyed) {
        return;
      }
      const page = this.#pageCache.get(data.pageIndex);
      page._startRenderPage(data.transparency, data.cacheKey);
    });
    messageHandler.on("commonobj", ([id, type, exportedData]) => {
      if (this.destroyed) {
        return null;
      }
      if (this.commonObjs.has(id)) {
        return null;
      }
      switch (type) {
        case "Font":
          if ("error" in exportedData) {
            const exportedError = exportedData.error;
            warn(`Error during font loading: ${exportedError}`);
            this.commonObjs.resolve(id, exportedError);
            break;
          }
          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font2, url) => globalThis.FontInspector.fontAdded(font2, url) : null;
          const font = new FontFaceObject(exportedData, inspectFont);
          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise("FontFallback", {
            id
          })).finally(() => {
            if (!font.fontExtraProperties && font.data) {
              font.data = null;
            }
            this.commonObjs.resolve(id, font);
          });
          break;
        case "CopyLocalImage":
          const {
            imageRef
          } = exportedData;
          assert(imageRef, "The imageRef must be defined.");
          for (const pageProxy of this.#pageCache.values()) {
            for (const [, data] of pageProxy.objs) {
              if (data?.ref !== imageRef) {
                continue;
              }
              if (!data.dataLen) {
                return null;
              }
              this.commonObjs.resolve(id, structuredClone(data));
              return data.dataLen;
            }
          }
          break;
        case "FontPath":
        case "Image":
        case "Pattern":
          this.commonObjs.resolve(id, exportedData);
          break;
        default:
          throw new Error(`Got unknown common object type ${type}`);
      }
      return null;
    });
    messageHandler.on("obj", ([id, pageIndex, type, imageData]) => {
      if (this.destroyed) {
        return;
      }
      const pageProxy = this.#pageCache.get(pageIndex);
      if (pageProxy.objs.has(id)) {
        return;
      }
      if (pageProxy._intentStates.size === 0) {
        imageData?.bitmap?.close();
        return;
      }
      switch (type) {
        case "Image":
        case "Pattern":
          pageProxy.objs.resolve(id, imageData);
          break;
        default:
          throw new Error(`Got unknown object type ${type}`);
      }
    });
    messageHandler.on("DocProgress", (data) => {
      if (this.destroyed) {
        return;
      }
      loadingTask.onProgress?.({
        loaded: data.loaded,
        total: data.total
      });
    });
    messageHandler.on("FetchBinaryData", async (data) => {
      if (this.destroyed) {
        throw new Error("Worker was destroyed.");
      }
      const factory = this[data.type];
      if (!factory) {
        throw new Error(`${data.type} not initialized, see the \`useWorkerFetch\` parameter.`);
      }
      return factory.fetch(data);
    });
  }
  getData() {
    return this.messageHandler.sendWithPromise("GetData", null);
  }
  saveDocument() {
    if (this.annotationStorage.size <= 0) {
      warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");
    }
    const {
      map,
      transfer
    } = this.annotationStorage.serializable;
    return this.messageHandler.sendWithPromise("SaveDocument", {
      isPureXfa: !!this._htmlForXfa,
      numPages: this._numPages,
      annotationStorage: map,
      filename: this._fullReader?.filename ?? null
    }, transfer).finally(() => {
      this.annotationStorage.resetModified();
    });
  }
  getPage(pageNumber) {
    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {
      return Promise.reject(new Error("Invalid page request."));
    }
    const pageIndex = pageNumber - 1, cachedPromise = this.#pagePromises.get(pageIndex);
    if (cachedPromise) {
      return cachedPromise;
    }
    const promise = this.messageHandler.sendWithPromise("GetPage", {
      pageIndex
    }).then((pageInfo) => {
      if (this.destroyed) {
        throw new Error("Transport destroyed");
      }
      if (pageInfo.refStr) {
        this.#pageRefCache.set(pageInfo.refStr, pageNumber);
      }
      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);
      this.#pageCache.set(pageIndex, page);
      return page;
    });
    this.#pagePromises.set(pageIndex, promise);
    return promise;
  }
  getPageIndex(ref) {
    if (!isRefProxy(ref)) {
      return Promise.reject(new Error("Invalid pageIndex request."));
    }
    return this.messageHandler.sendWithPromise("GetPageIndex", {
      num: ref.num,
      gen: ref.gen
    });
  }
  getAnnotations(pageIndex, intent) {
    return this.messageHandler.sendWithPromise("GetAnnotations", {
      pageIndex,
      intent
    });
  }
  getFieldObjects() {
    return this.#cacheSimpleMethod("GetFieldObjects");
  }
  hasJSActions() {
    return this.#cacheSimpleMethod("HasJSActions");
  }
  getCalculationOrderIds() {
    return this.messageHandler.sendWithPromise("GetCalculationOrderIds", null);
  }
  getDestinations() {
    return this.messageHandler.sendWithPromise("GetDestinations", null);
  }
  getDestination(id) {
    if (typeof id !== "string") {
      return Promise.reject(new Error("Invalid destination request."));
    }
    return this.messageHandler.sendWithPromise("GetDestination", {
      id
    });
  }
  getPageLabels() {
    return this.messageHandler.sendWithPromise("GetPageLabels", null);
  }
  getPageLayout() {
    return this.messageHandler.sendWithPromise("GetPageLayout", null);
  }
  getPageMode() {
    return this.messageHandler.sendWithPromise("GetPageMode", null);
  }
  getViewerPreferences() {
    return this.messageHandler.sendWithPromise("GetViewerPreferences", null);
  }
  getOpenAction() {
    return this.messageHandler.sendWithPromise("GetOpenAction", null);
  }
  getAttachments() {
    return this.messageHandler.sendWithPromise("GetAttachments", null);
  }
  getDocJSActions() {
    return this.#cacheSimpleMethod("GetDocJSActions");
  }
  getPageJSActions(pageIndex) {
    return this.messageHandler.sendWithPromise("GetPageJSActions", {
      pageIndex
    });
  }
  getStructTree(pageIndex) {
    return this.messageHandler.sendWithPromise("GetStructTree", {
      pageIndex
    });
  }
  getOutline() {
    return this.messageHandler.sendWithPromise("GetOutline", null);
  }
  getOptionalContentConfig(renderingIntent) {
    return this.#cacheSimpleMethod("GetOptionalContentConfig").then((data) => new OptionalContentConfig(data, renderingIntent));
  }
  getPermissions() {
    return this.messageHandler.sendWithPromise("GetPermissions", null);
  }
  getMetadata() {
    const name = "GetMetadata", cachedPromise = this.#methodPromises.get(name);
    if (cachedPromise) {
      return cachedPromise;
    }
    const promise = this.messageHandler.sendWithPromise(name, null).then((results) => ({
      info: results[0],
      metadata: results[1] ? new Metadata(results[1]) : null,
      contentDispositionFilename: this._fullReader?.filename ?? null,
      contentLength: this._fullReader?.contentLength ?? null
    }));
    this.#methodPromises.set(name, promise);
    return promise;
  }
  getMarkInfo() {
    return this.messageHandler.sendWithPromise("GetMarkInfo", null);
  }
  async startCleanup(keepLoadedFonts = false) {
    if (this.destroyed) {
      return;
    }
    await this.messageHandler.sendWithPromise("Cleanup", null);
    for (const page of this.#pageCache.values()) {
      const cleanupSuccessful = page.cleanup();
      if (!cleanupSuccessful) {
        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);
      }
    }
    this.commonObjs.clear();
    if (!keepLoadedFonts) {
      this.fontLoader.clear();
    }
    this.#methodPromises.clear();
    this.filterFactory.destroy(true);
    TextLayer.cleanup();
  }
  cachedPageNumber(ref) {
    if (!isRefProxy(ref)) {
      return null;
    }
    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;
    return this.#pageRefCache.get(refStr) ?? null;
  }
};
var INITIAL_DATA = Symbol("INITIAL_DATA");
var PDFObjects = class {
  #objs = /* @__PURE__ */ Object.create(null);
  #ensureObj(objId) {
    return this.#objs[objId] ||= {
      ...Promise.withResolvers(),
      data: INITIAL_DATA
    };
  }
  get(objId, callback = null) {
    if (callback) {
      const obj2 = this.#ensureObj(objId);
      obj2.promise.then(() => callback(obj2.data));
      return null;
    }
    const obj = this.#objs[objId];
    if (!obj || obj.data === INITIAL_DATA) {
      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);
    }
    return obj.data;
  }
  has(objId) {
    const obj = this.#objs[objId];
    return !!obj && obj.data !== INITIAL_DATA;
  }
  delete(objId) {
    const obj = this.#objs[objId];
    if (!obj || obj.data === INITIAL_DATA) {
      return false;
    }
    delete this.#objs[objId];
    return true;
  }
  resolve(objId, data = null) {
    const obj = this.#ensureObj(objId);
    obj.data = data;
    obj.resolve();
  }
  clear() {
    for (const objId in this.#objs) {
      const {
        data
      } = this.#objs[objId];
      data?.bitmap?.close();
    }
    this.#objs = /* @__PURE__ */ Object.create(null);
  }
  *[Symbol.iterator]() {
    for (const objId in this.#objs) {
      const {
        data
      } = this.#objs[objId];
      if (data === INITIAL_DATA) {
        continue;
      }
      yield [objId, data];
    }
  }
};
var RenderTask = class {
  #internalRenderTask = null;
  onContinue = null;
  onError = null;
  constructor(internalRenderTask) {
    this.#internalRenderTask = internalRenderTask;
  }
  get promise() {
    return this.#internalRenderTask.capability.promise;
  }
  cancel(extraDelay = 0) {
    this.#internalRenderTask.cancel(null, extraDelay);
  }
  get separateAnnots() {
    const {
      separateAnnots
    } = this.#internalRenderTask.operatorList;
    if (!separateAnnots) {
      return false;
    }
    const {
      annotationCanvasMap
    } = this.#internalRenderTask;
    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;
  }
};
var InternalRenderTask = class _InternalRenderTask {
  #rAF = null;
  static #canvasInUse = /* @__PURE__ */ new WeakSet();
  constructor({
    callback,
    params,
    objs,
    commonObjs,
    annotationCanvasMap,
    operatorList,
    pageIndex,
    canvasFactory,
    filterFactory,
    useRequestAnimationFrame = false,
    pdfBug = false,
    pageColors = null
  }) {
    this.callback = callback;
    this.params = params;
    this.objs = objs;
    this.commonObjs = commonObjs;
    this.annotationCanvasMap = annotationCanvasMap;
    this.operatorListIdx = null;
    this.operatorList = operatorList;
    this._pageIndex = pageIndex;
    this.canvasFactory = canvasFactory;
    this.filterFactory = filterFactory;
    this._pdfBug = pdfBug;
    this.pageColors = pageColors;
    this.running = false;
    this.graphicsReadyCallback = null;
    this.graphicsReady = false;
    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== "undefined";
    this.cancelled = false;
    this.capability = Promise.withResolvers();
    this.task = new RenderTask(this);
    this._cancelBound = this.cancel.bind(this);
    this._continueBound = this._continue.bind(this);
    this._scheduleNextBound = this._scheduleNext.bind(this);
    this._nextBound = this._next.bind(this);
    this._canvas = params.canvasContext.canvas;
  }
  get completed() {
    return this.capability.promise.catch(function() {
    });
  }
  initializeGraphics({
    transparency = false,
    optionalContentConfig
  }) {
    if (this.cancelled) {
      return;
    }
    if (this._canvas) {
      if (_InternalRenderTask.#canvasInUse.has(this._canvas)) {
        throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");
      }
      _InternalRenderTask.#canvasInUse.add(this._canvas);
    }
    if (this._pdfBug && globalThis.StepperManager?.enabled) {
      this.stepper = globalThis.StepperManager.create(this._pageIndex);
      this.stepper.init(this.operatorList);
      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();
    }
    const {
      canvasContext,
      viewport,
      transform,
      background
    } = this.params;
    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {
      optionalContentConfig
    }, this.annotationCanvasMap, this.pageColors);
    this.gfx.beginDrawing({
      transform,
      viewport,
      transparency,
      background
    });
    this.operatorListIdx = 0;
    this.graphicsReady = true;
    this.graphicsReadyCallback?.();
  }
  cancel(error = null, extraDelay = 0) {
    this.running = false;
    this.cancelled = true;
    this.gfx?.endDrawing();
    if (this.#rAF) {
      window.cancelAnimationFrame(this.#rAF);
      this.#rAF = null;
    }
    _InternalRenderTask.#canvasInUse.delete(this._canvas);
    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);
    this.callback(error);
    this.task.onError?.(error);
  }
  operatorListChanged() {
    if (!this.graphicsReady) {
      this.graphicsReadyCallback ||= this._continueBound;
      return;
    }
    this.stepper?.updateOperatorList(this.operatorList);
    if (this.running) {
      return;
    }
    this._continue();
  }
  _continue() {
    this.running = true;
    if (this.cancelled) {
      return;
    }
    if (this.task.onContinue) {
      this.task.onContinue(this._scheduleNextBound);
    } else {
      this._scheduleNext();
    }
  }
  _scheduleNext() {
    if (this._useRequestAnimationFrame) {
      this.#rAF = window.requestAnimationFrame(() => {
        this.#rAF = null;
        this._nextBound().catch(this._cancelBound);
      });
    } else {
      Promise.resolve().then(this._nextBound).catch(this._cancelBound);
    }
  }
  async _next() {
    if (this.cancelled) {
      return;
    }
    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);
    if (this.operatorListIdx === this.operatorList.argsArray.length) {
      this.running = false;
      if (this.operatorList.lastChunk) {
        this.gfx.endDrawing();
        _InternalRenderTask.#canvasInUse.delete(this._canvas);
        this.callback();
      }
    }
  }
};
var version = "5.1.91";
var build = "45cbe8bb0";
function makeColorComp(n) {
  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, "0");
}
function scaleAndClamp(x) {
  return Math.max(0, Math.min(255, 255 * x));
}
var ColorConverters = class {
  static CMYK_G([c, y, m, k]) {
    return ["G", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];
  }
  static G_CMYK([g]) {
    return ["CMYK", 0, 0, 0, 1 - g];
  }
  static G_RGB([g]) {
    return ["RGB", g, g, g];
  }
  static G_rgb([g]) {
    g = scaleAndClamp(g);
    return [g, g, g];
  }
  static G_HTML([g]) {
    const G = makeColorComp(g);
    return `#${G}${G}${G}`;
  }
  static RGB_G([r, g, b]) {
    return ["G", 0.3 * r + 0.59 * g + 0.11 * b];
  }
  static RGB_rgb(color) {
    return color.map(scaleAndClamp);
  }
  static RGB_HTML(color) {
    return `#${color.map(makeColorComp).join("")}`;
  }
  static T_HTML() {
    return "#00000000";
  }
  static T_rgb() {
    return [null];
  }
  static CMYK_RGB([c, y, m, k]) {
    return ["RGB", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];
  }
  static CMYK_rgb([c, y, m, k]) {
    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];
  }
  static CMYK_HTML(components) {
    const rgb = this.CMYK_RGB(components).slice(1);
    return this.RGB_HTML(rgb);
  }
  static RGB_CMYK([r, g, b]) {
    const c = 1 - r;
    const m = 1 - g;
    const y = 1 - b;
    const k = Math.min(c, m, y);
    return ["CMYK", c, m, y, k];
  }
};
var BaseSVGFactory = class {
  create(width, height, skipDimensions = false) {
    if (width <= 0 || height <= 0) {
      throw new Error("Invalid SVG dimensions");
    }
    const svg = this._createSVG("svg:svg");
    svg.setAttribute("version", "1.1");
    if (!skipDimensions) {
      svg.setAttribute("width", `${width}px`);
      svg.setAttribute("height", `${height}px`);
    }
    svg.setAttribute("preserveAspectRatio", "none");
    svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
    return svg;
  }
  createElement(type) {
    if (typeof type !== "string") {
      throw new Error("Invalid SVG element type");
    }
    return this._createSVG(type);
  }
  _createSVG(type) {
    unreachable("Abstract method `_createSVG` called.");
  }
};
var DOMSVGFactory = class extends BaseSVGFactory {
  _createSVG(type) {
    return document.createElementNS(SVG_NS, type);
  }
};
var XfaLayer = class {
  static setupStorage(html, id, element, storage, intent) {
    const storedData = storage.getValue(id, {
      value: null
    });
    switch (element.name) {
      case "textarea":
        if (storedData.value !== null) {
          html.textContent = storedData.value;
        }
        if (intent === "print") {
          break;
        }
        html.addEventListener("input", (event) => {
          storage.setValue(id, {
            value: event.target.value
          });
        });
        break;
      case "input":
        if (element.attributes.type === "radio" || element.attributes.type === "checkbox") {
          if (storedData.value === element.attributes.xfaOn) {
            html.setAttribute("checked", true);
          } else if (storedData.value === element.attributes.xfaOff) {
            html.removeAttribute("checked");
          }
          if (intent === "print") {
            break;
          }
          html.addEventListener("change", (event) => {
            storage.setValue(id, {
              value: event.target.checked ? event.target.getAttribute("xfaOn") : event.target.getAttribute("xfaOff")
            });
          });
        } else {
          if (storedData.value !== null) {
            html.setAttribute("value", storedData.value);
          }
          if (intent === "print") {
            break;
          }
          html.addEventListener("input", (event) => {
            storage.setValue(id, {
              value: event.target.value
            });
          });
        }
        break;
      case "select":
        if (storedData.value !== null) {
          html.setAttribute("value", storedData.value);
          for (const option of element.children) {
            if (option.attributes.value === storedData.value) {
              option.attributes.selected = true;
            } else if (option.attributes.hasOwnProperty("selected")) {
              delete option.attributes.selected;
            }
          }
        }
        html.addEventListener("input", (event) => {
          const options = event.target.options;
          const value = options.selectedIndex === -1 ? "" : options[options.selectedIndex].value;
          storage.setValue(id, {
            value
          });
        });
        break;
    }
  }
  static setAttributes({
    html,
    element,
    storage = null,
    intent,
    linkService
  }) {
    const {
      attributes
    } = element;
    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;
    if (attributes.type === "radio") {
      attributes.name = `${attributes.name}-${intent}`;
    }
    for (const [key, value] of Object.entries(attributes)) {
      if (value === null || value === void 0) {
        continue;
      }
      switch (key) {
        case "class":
          if (value.length) {
            html.setAttribute(key, value.join(" "));
          }
          break;
        case "dataId":
          break;
        case "id":
          html.setAttribute("data-element-id", value);
          break;
        case "style":
          Object.assign(html.style, value);
          break;
        case "textContent":
          html.textContent = value;
          break;
        default:
          if (!isHTMLAnchorElement || key !== "href" && key !== "newWindow") {
            html.setAttribute(key, value);
          }
      }
    }
    if (isHTMLAnchorElement) {
      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);
    }
    if (storage && attributes.dataId) {
      this.setupStorage(html, attributes.dataId, element, storage);
    }
  }
  static render(parameters) {
    const storage = parameters.annotationStorage;
    const linkService = parameters.linkService;
    const root = parameters.xfaHtml;
    const intent = parameters.intent || "display";
    const rootHtml = document.createElement(root.name);
    if (root.attributes) {
      this.setAttributes({
        html: rootHtml,
        element: root,
        intent,
        linkService
      });
    }
    const isNotForRichText = intent !== "richText";
    const rootDiv = parameters.div;
    rootDiv.append(rootHtml);
    if (parameters.viewport) {
      const transform = `matrix(${parameters.viewport.transform.join(",")})`;
      rootDiv.style.transform = transform;
    }
    if (isNotForRichText) {
      rootDiv.setAttribute("class", "xfaLayer xfaFont");
    }
    const textDivs = [];
    if (root.children.length === 0) {
      if (root.value) {
        const node = document.createTextNode(root.value);
        rootHtml.append(node);
        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {
          textDivs.push(node);
        }
      }
      return {
        textDivs
      };
    }
    const stack = [[root, -1, rootHtml]];
    while (stack.length > 0) {
      const [parent, i, html] = stack.at(-1);
      if (i + 1 === parent.children.length) {
        stack.pop();
        continue;
      }
      const child = parent.children[++stack.at(-1)[1]];
      if (child === null) {
        continue;
      }
      const {
        name
      } = child;
      if (name === "#text") {
        const node = document.createTextNode(child.value);
        textDivs.push(node);
        html.append(node);
        continue;
      }
      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);
      html.append(childHtml);
      if (child.attributes) {
        this.setAttributes({
          html: childHtml,
          element: child,
          storage,
          intent,
          linkService
        });
      }
      if (child.children?.length > 0) {
        stack.push([child, -1, childHtml]);
      } else if (child.value) {
        const node = document.createTextNode(child.value);
        if (isNotForRichText && XfaText.shouldBuildText(name)) {
          textDivs.push(node);
        }
        childHtml.append(node);
      }
    }
    for (const el of rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")) {
      el.setAttribute("readOnly", true);
    }
    return {
      textDivs
    };
  }
  static update(parameters) {
    const transform = `matrix(${parameters.viewport.transform.join(",")})`;
    parameters.div.style.transform = transform;
    parameters.div.hidden = false;
  }
};
var DEFAULT_TAB_INDEX = 1e3;
var annotation_layer_DEFAULT_FONT_SIZE = 9;
var GetElementsByNameSet = /* @__PURE__ */ new WeakSet();
var AnnotationElementFactory = class {
  static create(parameters) {
    const subtype = parameters.data.annotationType;
    switch (subtype) {
      case AnnotationType.LINK:
        return new LinkAnnotationElement(parameters);
      case AnnotationType.TEXT:
        return new TextAnnotationElement(parameters);
      case AnnotationType.WIDGET:
        const fieldType = parameters.data.fieldType;
        switch (fieldType) {
          case "Tx":
            return new TextWidgetAnnotationElement(parameters);
          case "Btn":
            if (parameters.data.radioButton) {
              return new RadioButtonWidgetAnnotationElement(parameters);
            } else if (parameters.data.checkBox) {
              return new CheckboxWidgetAnnotationElement(parameters);
            }
            return new PushButtonWidgetAnnotationElement(parameters);
          case "Ch":
            return new ChoiceWidgetAnnotationElement(parameters);
          case "Sig":
            return new SignatureWidgetAnnotationElement(parameters);
        }
        return new WidgetAnnotationElement(parameters);
      case AnnotationType.POPUP:
        return new PopupAnnotationElement(parameters);
      case AnnotationType.FREETEXT:
        return new FreeTextAnnotationElement(parameters);
      case AnnotationType.LINE:
        return new LineAnnotationElement(parameters);
      case AnnotationType.SQUARE:
        return new SquareAnnotationElement(parameters);
      case AnnotationType.CIRCLE:
        return new CircleAnnotationElement(parameters);
      case AnnotationType.POLYLINE:
        return new PolylineAnnotationElement(parameters);
      case AnnotationType.CARET:
        return new CaretAnnotationElement(parameters);
      case AnnotationType.INK:
        return new InkAnnotationElement(parameters);
      case AnnotationType.POLYGON:
        return new PolygonAnnotationElement(parameters);
      case AnnotationType.HIGHLIGHT:
        return new HighlightAnnotationElement(parameters);
      case AnnotationType.UNDERLINE:
        return new UnderlineAnnotationElement(parameters);
      case AnnotationType.SQUIGGLY:
        return new SquigglyAnnotationElement(parameters);
      case AnnotationType.STRIKEOUT:
        return new StrikeOutAnnotationElement(parameters);
      case AnnotationType.STAMP:
        return new StampAnnotationElement(parameters);
      case AnnotationType.FILEATTACHMENT:
        return new FileAttachmentAnnotationElement(parameters);
      default:
        return new AnnotationElement(parameters);
    }
  }
};
var AnnotationElement = class _AnnotationElement {
  #updates = null;
  #hasBorder = false;
  #popupElement = null;
  constructor(parameters, {
    isRenderable = false,
    ignoreBorder = false,
    createQuadrilaterals = false
  } = {}) {
    this.isRenderable = isRenderable;
    this.data = parameters.data;
    this.layer = parameters.layer;
    this.linkService = parameters.linkService;
    this.downloadManager = parameters.downloadManager;
    this.imageResourcesPath = parameters.imageResourcesPath;
    this.renderForms = parameters.renderForms;
    this.svgFactory = parameters.svgFactory;
    this.annotationStorage = parameters.annotationStorage;
    this.enableScripting = parameters.enableScripting;
    this.hasJSActions = parameters.hasJSActions;
    this._fieldObjects = parameters.fieldObjects;
    this.parent = parameters.parent;
    if (isRenderable) {
      this.container = this._createContainer(ignoreBorder);
    }
    if (createQuadrilaterals) {
      this._createQuadrilaterals();
    }
  }
  static _hasPopupData({
    titleObj,
    contentsObj,
    richText
  }) {
    return !!(titleObj?.str || contentsObj?.str || richText?.str);
  }
  get _isEditable() {
    return this.data.isEditable;
  }
  get hasPopupData() {
    return _AnnotationElement._hasPopupData(this.data);
  }
  updateEdited(params) {
    if (!this.container) {
      return;
    }
    this.#updates ||= {
      rect: this.data.rect.slice(0)
    };
    const {
      rect
    } = params;
    if (rect) {
      this.#setRectEdited(rect);
    }
    this.#popupElement?.popup.updateEdited(params);
  }
  resetEdited() {
    if (!this.#updates) {
      return;
    }
    this.#setRectEdited(this.#updates.rect);
    this.#popupElement?.popup.resetEdited();
    this.#updates = null;
  }
  #setRectEdited(rect) {
    const {
      container: {
        style
      },
      data: {
        rect: currentRect,
        rotation
      },
      parent: {
        viewport: {
          rawDims: {
            pageWidth,
            pageHeight,
            pageX,
            pageY
          }
        }
      }
    } = this;
    currentRect?.splice(0, 4, ...rect);
    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;
    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;
    if (rotation === 0) {
      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;
      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;
    } else {
      this.setRotation(rotation);
    }
  }
  _createContainer(ignoreBorder) {
    const {
      data,
      parent: {
        page,
        viewport
      }
    } = this;
    const container2 = document.createElement("section");
    container2.setAttribute("data-annotation-id", data.id);
    if (!(this instanceof WidgetAnnotationElement)) {
      container2.tabIndex = DEFAULT_TAB_INDEX;
    }
    const {
      style
    } = container2;
    style.zIndex = this.parent.zIndex++;
    if (data.alternativeText) {
      container2.title = data.alternativeText;
    }
    if (data.noRotate) {
      container2.classList.add("norotate");
    }
    if (!data.rect || this instanceof PopupAnnotationElement) {
      const {
        rotation: rotation2
      } = data;
      if (!data.hasOwnCanvas && rotation2 !== 0) {
        this.setRotation(rotation2, container2);
      }
      return container2;
    }
    const {
      width,
      height
    } = this;
    if (!ignoreBorder && data.borderStyle.width > 0) {
      style.borderWidth = `${data.borderStyle.width}px`;
      const horizontalRadius = data.borderStyle.horizontalCornerRadius;
      const verticalRadius = data.borderStyle.verticalCornerRadius;
      if (horizontalRadius > 0 || verticalRadius > 0) {
        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;
        style.borderRadius = radius;
      } else if (this instanceof RadioButtonWidgetAnnotationElement) {
        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;
        style.borderRadius = radius;
      }
      switch (data.borderStyle.style) {
        case AnnotationBorderStyleType.SOLID:
          style.borderStyle = "solid";
          break;
        case AnnotationBorderStyleType.DASHED:
          style.borderStyle = "dashed";
          break;
        case AnnotationBorderStyleType.BEVELED:
          warn("Unimplemented border style: beveled");
          break;
        case AnnotationBorderStyleType.INSET:
          warn("Unimplemented border style: inset");
          break;
        case AnnotationBorderStyleType.UNDERLINE:
          style.borderBottomStyle = "solid";
          break;
        default:
          break;
      }
      const borderColor = data.borderColor || null;
      if (borderColor) {
        this.#hasBorder = true;
        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);
      } else {
        style.borderWidth = 0;
      }
    }
    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);
    const {
      pageWidth,
      pageHeight,
      pageX,
      pageY
    } = viewport.rawDims;
    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;
    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;
    const {
      rotation
    } = data;
    if (data.hasOwnCanvas || rotation === 0) {
      style.width = `${100 * width / pageWidth}%`;
      style.height = `${100 * height / pageHeight}%`;
    } else {
      this.setRotation(rotation, container2);
    }
    return container2;
  }
  setRotation(angle, container2 = this.container) {
    if (!this.data.rect) {
      return;
    }
    const {
      pageWidth,
      pageHeight
    } = this.parent.viewport.rawDims;
    let {
      width,
      height
    } = this;
    if (angle % 180 !== 0) {
      [width, height] = [height, width];
    }
    container2.style.width = `${100 * width / pageWidth}%`;
    container2.style.height = `${100 * height / pageHeight}%`;
    container2.setAttribute("data-main-rotation", (360 - angle) % 360);
  }
  get _commonActions() {
    const setColor = (jsName, styleName, event) => {
      const color = event.detail[jsName];
      const colorType = color[0];
      const colorArray = color.slice(1);
      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);
      this.annotationStorage.setValue(this.data.id, {
        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)
      });
    };
    return shadow(this, "_commonActions", {
      display: (event) => {
        const {
          display: display2
        } = event.detail;
        const hidden = display2 % 2 === 1;
        this.container.style.visibility = hidden ? "hidden" : "visible";
        this.annotationStorage.setValue(this.data.id, {
          noView: hidden,
          noPrint: display2 === 1 || display2 === 2
        });
      },
      print: (event) => {
        this.annotationStorage.setValue(this.data.id, {
          noPrint: !event.detail.print
        });
      },
      hidden: (event) => {
        const {
          hidden
        } = event.detail;
        this.container.style.visibility = hidden ? "hidden" : "visible";
        this.annotationStorage.setValue(this.data.id, {
          noPrint: hidden,
          noView: hidden
        });
      },
      focus: (event) => {
        setTimeout(() => event.target.focus({
          preventScroll: false
        }), 0);
      },
      userName: (event) => {
        event.target.title = event.detail.userName;
      },
      readonly: (event) => {
        event.target.disabled = event.detail.readonly;
      },
      required: (event) => {
        this._setRequired(event.target, event.detail.required);
      },
      bgColor: (event) => {
        setColor("bgColor", "backgroundColor", event);
      },
      fillColor: (event) => {
        setColor("fillColor", "backgroundColor", event);
      },
      fgColor: (event) => {
        setColor("fgColor", "color", event);
      },
      textColor: (event) => {
        setColor("textColor", "color", event);
      },
      borderColor: (event) => {
        setColor("borderColor", "borderColor", event);
      },
      strokeColor: (event) => {
        setColor("strokeColor", "borderColor", event);
      },
      rotation: (event) => {
        const angle = event.detail.rotation;
        this.setRotation(angle);
        this.annotationStorage.setValue(this.data.id, {
          rotation: angle
        });
      }
    });
  }
  _dispatchEventFromSandbox(actions, jsEvent) {
    const commonActions = this._commonActions;
    for (const name of Object.keys(jsEvent.detail)) {
      const action = actions[name] || commonActions[name];
      action?.(jsEvent);
    }
  }
  _setDefaultPropertiesFromJS(element) {
    if (!this.enableScripting) {
      return;
    }
    const storedData = this.annotationStorage.getRawValue(this.data.id);
    if (!storedData) {
      return;
    }
    const commonActions = this._commonActions;
    for (const [actionName, detail] of Object.entries(storedData)) {
      const action = commonActions[actionName];
      if (action) {
        const eventProxy = {
          detail: {
            [actionName]: detail
          },
          target: element
        };
        action(eventProxy);
        delete storedData[actionName];
      }
    }
  }
  _createQuadrilaterals() {
    if (!this.container) {
      return;
    }
    const {
      quadPoints
    } = this.data;
    if (!quadPoints) {
      return;
    }
    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map((x) => Math.fround(x));
    if (quadPoints.length === 8) {
      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);
      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {
        return;
      }
    }
    const {
      style
    } = this.container;
    let svgBuffer;
    if (this.#hasBorder) {
      const {
        borderColor,
        borderWidth
      } = style;
      style.borderWidth = 0;
      svgBuffer = ["url('data:image/svg+xml;utf8,", `<svg xmlns="http://www.w3.org/2000/svg"`, ` preserveAspectRatio="none" viewBox="0 0 1 1">`, `<g fill="transparent" stroke="${borderColor}" stroke-width="${borderWidth}">`];
      this.container.classList.add("hasBorder");
    }
    const width = rectTrX - rectBlX;
    const height = rectTrY - rectBlY;
    const {
      svgFactory
    } = this;
    const svg = svgFactory.createElement("svg");
    svg.classList.add("quadrilateralsContainer");
    svg.setAttribute("width", 0);
    svg.setAttribute("height", 0);
    const defs = svgFactory.createElement("defs");
    svg.append(defs);
    const clipPath = svgFactory.createElement("clipPath");
    const id = `clippath_${this.data.id}`;
    clipPath.setAttribute("id", id);
    clipPath.setAttribute("clipPathUnits", "objectBoundingBox");
    defs.append(clipPath);
    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {
      const trX = quadPoints[i];
      const trY = quadPoints[i + 1];
      const blX = quadPoints[i + 2];
      const blY = quadPoints[i + 3];
      const rect = svgFactory.createElement("rect");
      const x = (blX - rectBlX) / width;
      const y = (rectTrY - trY) / height;
      const rectWidth = (trX - blX) / width;
      const rectHeight = (trY - blY) / height;
      rect.setAttribute("x", x);
      rect.setAttribute("y", y);
      rect.setAttribute("width", rectWidth);
      rect.setAttribute("height", rectHeight);
      clipPath.append(rect);
      svgBuffer?.push(`<rect vector-effect="non-scaling-stroke" x="${x}" y="${y}" width="${rectWidth}" height="${rectHeight}"/>`);
    }
    if (this.#hasBorder) {
      svgBuffer.push(`</g></svg>')`);
      style.backgroundImage = svgBuffer.join("");
    }
    this.container.append(svg);
    this.container.style.clipPath = `url(#${id})`;
  }
  _createPopup() {
    const {
      data
    } = this;
    const popup = this.#popupElement = new PopupAnnotationElement({
      data: {
        color: data.color,
        titleObj: data.titleObj,
        modificationDate: data.modificationDate,
        contentsObj: data.contentsObj,
        richText: data.richText,
        parentRect: data.rect,
        borderStyle: 0,
        id: `popup_${data.id}`,
        rotation: data.rotation
      },
      parent: this.parent,
      elements: [this]
    });
    this.parent.div.append(popup.render());
  }
  render() {
    unreachable("Abstract method `AnnotationElement.render` called");
  }
  _getElementsByName(name, skipId = null) {
    const fields = [];
    if (this._fieldObjects) {
      const fieldObj = this._fieldObjects[name];
      if (fieldObj) {
        for (const {
          page,
          id,
          exportValues
        } of fieldObj) {
          if (page === -1) {
            continue;
          }
          if (id === skipId) {
            continue;
          }
          const exportValue = typeof exportValues === "string" ? exportValues : null;
          const domElement = document.querySelector(`[data-element-id="${id}"]`);
          if (domElement && !GetElementsByNameSet.has(domElement)) {
            warn(`_getElementsByName - element not allowed: ${id}`);
            continue;
          }
          fields.push({
            id,
            exportValue,
            domElement
          });
        }
      }
      return fields;
    }
    for (const domElement of document.getElementsByName(name)) {
      const {
        exportValue
      } = domElement;
      const id = domElement.getAttribute("data-element-id");
      if (id === skipId) {
        continue;
      }
      if (!GetElementsByNameSet.has(domElement)) {
        continue;
      }
      fields.push({
        id,
        exportValue,
        domElement
      });
    }
    return fields;
  }
  show() {
    if (this.container) {
      this.container.hidden = false;
    }
    this.popup?.maybeShow();
  }
  hide() {
    if (this.container) {
      this.container.hidden = true;
    }
    this.popup?.forceHide();
  }
  getElementsToTriggerPopup() {
    return this.container;
  }
  addHighlightArea() {
    const triggers = this.getElementsToTriggerPopup();
    if (Array.isArray(triggers)) {
      for (const element of triggers) {
        element.classList.add("highlightArea");
      }
    } else {
      triggers.classList.add("highlightArea");
    }
  }
  _editOnDoubleClick() {
    if (!this._isEditable) {
      return;
    }
    const {
      annotationEditorType: mode,
      data: {
        id: editId
      }
    } = this;
    this.container.addEventListener("dblclick", () => {
      this.linkService.eventBus?.dispatch("switchannotationeditormode", {
        source: this,
        mode,
        editId
      });
    });
  }
  get width() {
    return this.data.rect[2] - this.data.rect[0];
  }
  get height() {
    return this.data.rect[3] - this.data.rect[1];
  }
};
var LinkAnnotationElement = class extends AnnotationElement {
  constructor(parameters, options = null) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: !!options?.ignoreBorder,
      createQuadrilaterals: true
    });
    this.isTooltipOnly = parameters.data.isTooltipOnly;
  }
  render() {
    const {
      data,
      linkService
    } = this;
    const link = document.createElement("a");
    link.setAttribute("data-element-id", data.id);
    let isBound = false;
    if (data.url) {
      linkService.addLinkAttributes(link, data.url, data.newWindow);
      isBound = true;
    } else if (data.action) {
      this._bindNamedAction(link, data.action);
      isBound = true;
    } else if (data.attachment) {
      this.#bindAttachment(link, data.attachment, data.attachmentDest);
      isBound = true;
    } else if (data.setOCGState) {
      this.#bindSetOCGState(link, data.setOCGState);
      isBound = true;
    } else if (data.dest) {
      this._bindLink(link, data.dest);
      isBound = true;
    } else {
      if (data.actions && (data.actions.Action || data.actions["Mouse Up"] || data.actions["Mouse Down"]) && this.enableScripting && this.hasJSActions) {
        this._bindJSAction(link, data);
        isBound = true;
      }
      if (data.resetForm) {
        this._bindResetFormAction(link, data.resetForm);
        isBound = true;
      } else if (this.isTooltipOnly && !isBound) {
        this._bindLink(link, "");
        isBound = true;
      }
    }
    this.container.classList.add("linkAnnotation");
    if (isBound) {
      this.container.append(link);
    }
    return this.container;
  }
  #setInternalLink() {
    this.container.setAttribute("data-internal-link", "");
  }
  _bindLink(link, destination) {
    link.href = this.linkService.getDestinationHash(destination);
    link.onclick = () => {
      if (destination) {
        this.linkService.goToDestination(destination);
      }
      return false;
    };
    if (destination || destination === "") {
      this.#setInternalLink();
    }
  }
  _bindNamedAction(link, action) {
    link.href = this.linkService.getAnchorUrl("");
    link.onclick = () => {
      this.linkService.executeNamedAction(action);
      return false;
    };
    this.#setInternalLink();
  }
  #bindAttachment(link, attachment, dest = null) {
    link.href = this.linkService.getAnchorUrl("");
    if (attachment.description) {
      link.title = attachment.description;
    }
    link.onclick = () => {
      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);
      return false;
    };
    this.#setInternalLink();
  }
  #bindSetOCGState(link, action) {
    link.href = this.linkService.getAnchorUrl("");
    link.onclick = () => {
      this.linkService.executeSetOCGState(action);
      return false;
    };
    this.#setInternalLink();
  }
  _bindJSAction(link, data) {
    link.href = this.linkService.getAnchorUrl("");
    const map = /* @__PURE__ */ new Map([["Action", "onclick"], ["Mouse Up", "onmouseup"], ["Mouse Down", "onmousedown"]]);
    for (const name of Object.keys(data.actions)) {
      const jsName = map.get(name);
      if (!jsName) {
        continue;
      }
      link[jsName] = () => {
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id: data.id,
            name
          }
        });
        return false;
      };
    }
    if (!link.onclick) {
      link.onclick = () => false;
    }
    this.#setInternalLink();
  }
  _bindResetFormAction(link, resetForm) {
    const otherClickAction = link.onclick;
    if (!otherClickAction) {
      link.href = this.linkService.getAnchorUrl("");
    }
    this.#setInternalLink();
    if (!this._fieldObjects) {
      warn(`_bindResetFormAction - "resetForm" action not supported, ensure that the \`fieldObjects\` parameter is provided.`);
      if (!otherClickAction) {
        link.onclick = () => false;
      }
      return;
    }
    link.onclick = () => {
      otherClickAction?.();
      const {
        fields: resetFormFields,
        refs: resetFormRefs,
        include
      } = resetForm;
      const allFields = [];
      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {
        const fieldIds = new Set(resetFormRefs);
        for (const fieldName of resetFormFields) {
          const fields = this._fieldObjects[fieldName] || [];
          for (const {
            id
          } of fields) {
            fieldIds.add(id);
          }
        }
        for (const fields of Object.values(this._fieldObjects)) {
          for (const field of fields) {
            if (fieldIds.has(field.id) === include) {
              allFields.push(field);
            }
          }
        }
      } else {
        for (const fields of Object.values(this._fieldObjects)) {
          allFields.push(...fields);
        }
      }
      const storage = this.annotationStorage;
      const allIds = [];
      for (const field of allFields) {
        const {
          id
        } = field;
        allIds.push(id);
        switch (field.type) {
          case "text": {
            const value = field.defaultValue || "";
            storage.setValue(id, {
              value
            });
            break;
          }
          case "checkbox":
          case "radiobutton": {
            const value = field.defaultValue === field.exportValues;
            storage.setValue(id, {
              value
            });
            break;
          }
          case "combobox":
          case "listbox": {
            const value = field.defaultValue || "";
            storage.setValue(id, {
              value
            });
            break;
          }
          default:
            continue;
        }
        const domElement = document.querySelector(`[data-element-id="${id}"]`);
        if (!domElement) {
          continue;
        } else if (!GetElementsByNameSet.has(domElement)) {
          warn(`_bindResetFormAction - element not allowed: ${id}`);
          continue;
        }
        domElement.dispatchEvent(new Event("resetform"));
      }
      if (this.enableScripting) {
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id: "app",
            ids: allIds,
            name: "ResetForm"
          }
        });
      }
      return false;
    };
  }
};
var TextAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true
    });
  }
  render() {
    this.container.classList.add("textAnnotation");
    const image = document.createElement("img");
    image.src = this.imageResourcesPath + "annotation-" + this.data.name.toLowerCase() + ".svg";
    image.setAttribute("data-l10n-id", "pdfjs-text-annotation-type");
    image.setAttribute("data-l10n-args", JSON.stringify({
      type: this.data.name
    }));
    if (!this.data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    this.container.append(image);
    return this.container;
  }
};
var WidgetAnnotationElement = class extends AnnotationElement {
  render() {
    return this.container;
  }
  showElementAndHideCanvas(element) {
    if (this.data.hasOwnCanvas) {
      if (element.previousSibling?.nodeName === "CANVAS") {
        element.previousSibling.hidden = true;
      }
      element.hidden = false;
    }
  }
  _getKeyModifier(event) {
    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;
  }
  _setEventListener(element, elementData, baseName, eventName, valueGetter) {
    if (baseName.includes("mouse")) {
      element.addEventListener(baseName, (event) => {
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id: this.data.id,
            name: eventName,
            value: valueGetter(event),
            shift: event.shiftKey,
            modifier: this._getKeyModifier(event)
          }
        });
      });
    } else {
      element.addEventListener(baseName, (event) => {
        if (baseName === "blur") {
          if (!elementData.focused || !event.relatedTarget) {
            return;
          }
          elementData.focused = false;
        } else if (baseName === "focus") {
          if (elementData.focused) {
            return;
          }
          elementData.focused = true;
        }
        if (!valueGetter) {
          return;
        }
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id: this.data.id,
            name: eventName,
            value: valueGetter(event)
          }
        });
      });
    }
  }
  _setEventListeners(element, elementData, names, getter) {
    for (const [baseName, eventName] of names) {
      if (eventName === "Action" || this.data.actions?.[eventName]) {
        if (eventName === "Focus" || eventName === "Blur") {
          elementData ||= {
            focused: false
          };
        }
        this._setEventListener(element, elementData, baseName, eventName, getter);
        if (eventName === "Focus" && !this.data.actions?.Blur) {
          this._setEventListener(element, elementData, "blur", "Blur", null);
        } else if (eventName === "Blur" && !this.data.actions?.Focus) {
          this._setEventListener(element, elementData, "focus", "Focus", null);
        }
      }
    }
  }
  _setBackgroundColor(element) {
    const color = this.data.backgroundColor || null;
    element.style.backgroundColor = color === null ? "transparent" : Util.makeHexColor(color[0], color[1], color[2]);
  }
  _setTextStyle(element) {
    const TEXT_ALIGNMENT = ["left", "center", "right"];
    const {
      fontColor
    } = this.data.defaultAppearanceData;
    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;
    const style = element.style;
    let computedFontSize;
    const BORDER_SIZE = 2;
    const roundToOneDecimal = (x) => Math.round(10 * x) / 10;
    if (this.data.multiLine) {
      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);
      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;
      const lineHeight = height / numberOfLines;
      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));
    } else {
      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);
      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));
    }
    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;
    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);
    if (this.data.textAlignment !== null) {
      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];
    }
  }
  _setRequired(element, isRequired) {
    if (isRequired) {
      element.setAttribute("required", true);
    } else {
      element.removeAttribute("required");
    }
    element.setAttribute("aria-required", isRequired);
  }
};
var TextWidgetAnnotationElement = class extends WidgetAnnotationElement {
  constructor(parameters) {
    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;
    super(parameters, {
      isRenderable
    });
  }
  setPropertyOnSiblings(base, key, value, keyInStorage) {
    const storage = this.annotationStorage;
    for (const element of this._getElementsByName(base.name, base.id)) {
      if (element.domElement) {
        element.domElement[key] = value;
      }
      storage.setValue(element.id, {
        [keyInStorage]: value
      });
    }
  }
  render() {
    const storage = this.annotationStorage;
    const id = this.data.id;
    this.container.classList.add("textWidgetAnnotation");
    let element = null;
    if (this.renderForms) {
      const storedData = storage.getValue(id, {
        value: this.data.fieldValue
      });
      let textContent = storedData.value || "";
      const maxLen = storage.getValue(id, {
        charLimit: this.data.maxLen
      }).charLimit;
      if (maxLen && textContent.length > maxLen) {
        textContent = textContent.slice(0, maxLen);
      }
      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join("\n") || null;
      if (fieldFormattedValues && this.data.comb) {
        fieldFormattedValues = fieldFormattedValues.replaceAll(/\s+/g, "");
      }
      const elementData = {
        userValue: textContent,
        formattedValue: fieldFormattedValues,
        lastCommittedValue: null,
        commitKey: 1,
        focused: false
      };
      if (this.data.multiLine) {
        element = document.createElement("textarea");
        element.textContent = fieldFormattedValues ?? textContent;
        if (this.data.doNotScroll) {
          element.style.overflowY = "hidden";
        }
      } else {
        element = document.createElement("input");
        element.type = this.data.password ? "password" : "text";
        element.setAttribute("value", fieldFormattedValues ?? textContent);
        if (this.data.doNotScroll) {
          element.style.overflowX = "hidden";
        }
      }
      if (this.data.hasOwnCanvas) {
        element.hidden = true;
      }
      GetElementsByNameSet.add(element);
      element.setAttribute("data-element-id", id);
      element.disabled = this.data.readOnly;
      element.name = this.data.fieldName;
      element.tabIndex = DEFAULT_TAB_INDEX;
      this._setRequired(element, this.data.required);
      if (maxLen) {
        element.maxLength = maxLen;
      }
      element.addEventListener("input", (event) => {
        storage.setValue(id, {
          value: event.target.value
        });
        this.setPropertyOnSiblings(element, "value", event.target.value, "value");
        elementData.formattedValue = null;
      });
      element.addEventListener("resetform", (event) => {
        const defaultValue = this.data.defaultFieldValue ?? "";
        element.value = elementData.userValue = defaultValue;
        elementData.formattedValue = null;
      });
      let blurListener = (event) => {
        const {
          formattedValue
        } = elementData;
        if (formattedValue !== null && formattedValue !== void 0) {
          event.target.value = formattedValue;
        }
        event.target.scrollLeft = 0;
      };
      if (this.enableScripting && this.hasJSActions) {
        element.addEventListener("focus", (event) => {
          if (elementData.focused) {
            return;
          }
          const {
            target
          } = event;
          if (elementData.userValue) {
            target.value = elementData.userValue;
          }
          elementData.lastCommittedValue = target.value;
          elementData.commitKey = 1;
          if (!this.data.actions?.Focus) {
            elementData.focused = true;
          }
        });
        element.addEventListener("updatefromsandbox", (jsEvent) => {
          this.showElementAndHideCanvas(jsEvent.target);
          const actions = {
            value(event) {
              elementData.userValue = event.detail.value ?? "";
              storage.setValue(id, {
                value: elementData.userValue.toString()
              });
              event.target.value = elementData.userValue;
            },
            formattedValue(event) {
              const {
                formattedValue
              } = event.detail;
              elementData.formattedValue = formattedValue;
              if (formattedValue !== null && formattedValue !== void 0 && event.target !== document.activeElement) {
                event.target.value = formattedValue;
              }
              storage.setValue(id, {
                formattedValue
              });
            },
            selRange(event) {
              event.target.setSelectionRange(...event.detail.selRange);
            },
            charLimit: (event) => {
              const {
                charLimit
              } = event.detail;
              const {
                target
              } = event;
              if (charLimit === 0) {
                target.removeAttribute("maxLength");
                return;
              }
              target.setAttribute("maxLength", charLimit);
              let value = elementData.userValue;
              if (!value || value.length <= charLimit) {
                return;
              }
              value = value.slice(0, charLimit);
              target.value = elementData.userValue = value;
              storage.setValue(id, {
                value
              });
              this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
                source: this,
                detail: {
                  id,
                  name: "Keystroke",
                  value,
                  willCommit: true,
                  commitKey: 1,
                  selStart: target.selectionStart,
                  selEnd: target.selectionEnd
                }
              });
            }
          };
          this._dispatchEventFromSandbox(actions, jsEvent);
        });
        element.addEventListener("keydown", (event) => {
          elementData.commitKey = 1;
          let commitKey = -1;
          if (event.key === "Escape") {
            commitKey = 0;
          } else if (event.key === "Enter" && !this.data.multiLine) {
            commitKey = 2;
          } else if (event.key === "Tab") {
            elementData.commitKey = 3;
          }
          if (commitKey === -1) {
            return;
          }
          const {
            value
          } = event.target;
          if (elementData.lastCommittedValue === value) {
            return;
          }
          elementData.lastCommittedValue = value;
          elementData.userValue = value;
          this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
            source: this,
            detail: {
              id,
              name: "Keystroke",
              value,
              willCommit: true,
              commitKey,
              selStart: event.target.selectionStart,
              selEnd: event.target.selectionEnd
            }
          });
        });
        const _blurListener = blurListener;
        blurListener = null;
        element.addEventListener("blur", (event) => {
          if (!elementData.focused || !event.relatedTarget) {
            return;
          }
          if (!this.data.actions?.Blur) {
            elementData.focused = false;
          }
          const {
            value
          } = event.target;
          elementData.userValue = value;
          if (elementData.lastCommittedValue !== value) {
            this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
              source: this,
              detail: {
                id,
                name: "Keystroke",
                value,
                willCommit: true,
                commitKey: elementData.commitKey,
                selStart: event.target.selectionStart,
                selEnd: event.target.selectionEnd
              }
            });
          }
          _blurListener(event);
        });
        if (this.data.actions?.Keystroke) {
          element.addEventListener("beforeinput", (event) => {
            elementData.lastCommittedValue = null;
            const {
              data,
              target
            } = event;
            const {
              value,
              selectionStart,
              selectionEnd
            } = target;
            let selStart = selectionStart, selEnd = selectionEnd;
            switch (event.inputType) {
              case "deleteWordBackward": {
                const match = value.substring(0, selectionStart).match(/\w*[^\w]*$/);
                if (match) {
                  selStart -= match[0].length;
                }
                break;
              }
              case "deleteWordForward": {
                const match = value.substring(selectionStart).match(/^[^\w]*\w*/);
                if (match) {
                  selEnd += match[0].length;
                }
                break;
              }
              case "deleteContentBackward":
                if (selectionStart === selectionEnd) {
                  selStart -= 1;
                }
                break;
              case "deleteContentForward":
                if (selectionStart === selectionEnd) {
                  selEnd += 1;
                }
                break;
            }
            event.preventDefault();
            this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
              source: this,
              detail: {
                id,
                name: "Keystroke",
                value,
                change: data || "",
                willCommit: false,
                selStart,
                selEnd
              }
            });
          });
        }
        this._setEventListeners(element, elementData, [["focus", "Focus"], ["blur", "Blur"], ["mousedown", "Mouse Down"], ["mouseenter", "Mouse Enter"], ["mouseleave", "Mouse Exit"], ["mouseup", "Mouse Up"]], (event) => event.target.value);
      }
      if (blurListener) {
        element.addEventListener("blur", blurListener);
      }
      if (this.data.comb) {
        const fieldWidth = this.data.rect[2] - this.data.rect[0];
        const combWidth = fieldWidth / maxLen;
        element.classList.add("comb");
        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;
      }
    } else {
      element = document.createElement("div");
      element.textContent = this.data.fieldValue;
      element.style.verticalAlign = "middle";
      element.style.display = "table-cell";
      if (this.data.hasOwnCanvas) {
        element.hidden = true;
      }
    }
    this._setTextStyle(element);
    this._setBackgroundColor(element);
    this._setDefaultPropertiesFromJS(element);
    this.container.append(element);
    return this.container;
  }
};
var SignatureWidgetAnnotationElement = class extends WidgetAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: !!parameters.data.hasOwnCanvas
    });
  }
};
var CheckboxWidgetAnnotationElement = class extends WidgetAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: parameters.renderForms
    });
  }
  render() {
    const storage = this.annotationStorage;
    const data = this.data;
    const id = data.id;
    let value = storage.getValue(id, {
      value: data.exportValue === data.fieldValue
    }).value;
    if (typeof value === "string") {
      value = value !== "Off";
      storage.setValue(id, {
        value
      });
    }
    this.container.classList.add("buttonWidgetAnnotation", "checkBox");
    const element = document.createElement("input");
    GetElementsByNameSet.add(element);
    element.setAttribute("data-element-id", id);
    element.disabled = data.readOnly;
    this._setRequired(element, this.data.required);
    element.type = "checkbox";
    element.name = data.fieldName;
    if (value) {
      element.setAttribute("checked", true);
    }
    element.setAttribute("exportValue", data.exportValue);
    element.tabIndex = DEFAULT_TAB_INDEX;
    element.addEventListener("change", (event) => {
      const {
        name,
        checked
      } = event.target;
      for (const checkbox of this._getElementsByName(name, id)) {
        const curChecked = checked && checkbox.exportValue === data.exportValue;
        if (checkbox.domElement) {
          checkbox.domElement.checked = curChecked;
        }
        storage.setValue(checkbox.id, {
          value: curChecked
        });
      }
      storage.setValue(id, {
        value: checked
      });
    });
    element.addEventListener("resetform", (event) => {
      const defaultValue = data.defaultFieldValue || "Off";
      event.target.checked = defaultValue === data.exportValue;
    });
    if (this.enableScripting && this.hasJSActions) {
      element.addEventListener("updatefromsandbox", (jsEvent) => {
        const actions = {
          value(event) {
            event.target.checked = event.detail.value !== "Off";
            storage.setValue(id, {
              value: event.target.checked
            });
          }
        };
        this._dispatchEventFromSandbox(actions, jsEvent);
      });
      this._setEventListeners(element, null, [["change", "Validate"], ["change", "Action"], ["focus", "Focus"], ["blur", "Blur"], ["mousedown", "Mouse Down"], ["mouseenter", "Mouse Enter"], ["mouseleave", "Mouse Exit"], ["mouseup", "Mouse Up"]], (event) => event.target.checked);
    }
    this._setBackgroundColor(element);
    this._setDefaultPropertiesFromJS(element);
    this.container.append(element);
    return this.container;
  }
};
var RadioButtonWidgetAnnotationElement = class extends WidgetAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: parameters.renderForms
    });
  }
  render() {
    this.container.classList.add("buttonWidgetAnnotation", "radioButton");
    const storage = this.annotationStorage;
    const data = this.data;
    const id = data.id;
    let value = storage.getValue(id, {
      value: data.fieldValue === data.buttonValue
    }).value;
    if (typeof value === "string") {
      value = value !== data.buttonValue;
      storage.setValue(id, {
        value
      });
    }
    if (value) {
      for (const radio of this._getElementsByName(data.fieldName, id)) {
        storage.setValue(radio.id, {
          value: false
        });
      }
    }
    const element = document.createElement("input");
    GetElementsByNameSet.add(element);
    element.setAttribute("data-element-id", id);
    element.disabled = data.readOnly;
    this._setRequired(element, this.data.required);
    element.type = "radio";
    element.name = data.fieldName;
    if (value) {
      element.setAttribute("checked", true);
    }
    element.tabIndex = DEFAULT_TAB_INDEX;
    element.addEventListener("change", (event) => {
      const {
        name,
        checked
      } = event.target;
      for (const radio of this._getElementsByName(name, id)) {
        storage.setValue(radio.id, {
          value: false
        });
      }
      storage.setValue(id, {
        value: checked
      });
    });
    element.addEventListener("resetform", (event) => {
      const defaultValue = data.defaultFieldValue;
      event.target.checked = defaultValue !== null && defaultValue !== void 0 && defaultValue === data.buttonValue;
    });
    if (this.enableScripting && this.hasJSActions) {
      const pdfButtonValue = data.buttonValue;
      element.addEventListener("updatefromsandbox", (jsEvent) => {
        const actions = {
          value: (event) => {
            const checked = pdfButtonValue === event.detail.value;
            for (const radio of this._getElementsByName(event.target.name)) {
              const curChecked = checked && radio.id === id;
              if (radio.domElement) {
                radio.domElement.checked = curChecked;
              }
              storage.setValue(radio.id, {
                value: curChecked
              });
            }
          }
        };
        this._dispatchEventFromSandbox(actions, jsEvent);
      });
      this._setEventListeners(element, null, [["change", "Validate"], ["change", "Action"], ["focus", "Focus"], ["blur", "Blur"], ["mousedown", "Mouse Down"], ["mouseenter", "Mouse Enter"], ["mouseleave", "Mouse Exit"], ["mouseup", "Mouse Up"]], (event) => event.target.checked);
    }
    this._setBackgroundColor(element);
    this._setDefaultPropertiesFromJS(element);
    this.container.append(element);
    return this.container;
  }
};
var PushButtonWidgetAnnotationElement = class extends LinkAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      ignoreBorder: parameters.data.hasAppearance
    });
  }
  render() {
    const container2 = super.render();
    container2.classList.add("buttonWidgetAnnotation", "pushButton");
    const linkElement = container2.lastChild;
    if (this.enableScripting && this.hasJSActions && linkElement) {
      this._setDefaultPropertiesFromJS(linkElement);
      linkElement.addEventListener("updatefromsandbox", (jsEvent) => {
        this._dispatchEventFromSandbox({}, jsEvent);
      });
    }
    return container2;
  }
};
var ChoiceWidgetAnnotationElement = class extends WidgetAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: parameters.renderForms
    });
  }
  render() {
    this.container.classList.add("choiceWidgetAnnotation");
    const storage = this.annotationStorage;
    const id = this.data.id;
    const storedData = storage.getValue(id, {
      value: this.data.fieldValue
    });
    const selectElement = document.createElement("select");
    GetElementsByNameSet.add(selectElement);
    selectElement.setAttribute("data-element-id", id);
    selectElement.disabled = this.data.readOnly;
    this._setRequired(selectElement, this.data.required);
    selectElement.name = this.data.fieldName;
    selectElement.tabIndex = DEFAULT_TAB_INDEX;
    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;
    if (!this.data.combo) {
      selectElement.size = this.data.options.length;
      if (this.data.multiSelect) {
        selectElement.multiple = true;
      }
    }
    selectElement.addEventListener("resetform", (event) => {
      const defaultValue = this.data.defaultFieldValue;
      for (const option of selectElement.options) {
        option.selected = option.value === defaultValue;
      }
    });
    for (const option of this.data.options) {
      const optionElement = document.createElement("option");
      optionElement.textContent = option.displayValue;
      optionElement.value = option.exportValue;
      if (storedData.value.includes(option.exportValue)) {
        optionElement.setAttribute("selected", true);
        addAnEmptyEntry = false;
      }
      selectElement.append(optionElement);
    }
    let removeEmptyEntry = null;
    if (addAnEmptyEntry) {
      const noneOptionElement = document.createElement("option");
      noneOptionElement.value = " ";
      noneOptionElement.setAttribute("hidden", true);
      noneOptionElement.setAttribute("selected", true);
      selectElement.prepend(noneOptionElement);
      removeEmptyEntry = () => {
        noneOptionElement.remove();
        selectElement.removeEventListener("input", removeEmptyEntry);
        removeEmptyEntry = null;
      };
      selectElement.addEventListener("input", removeEmptyEntry);
    }
    const getValue = (isExport) => {
      const name = isExport ? "value" : "textContent";
      const {
        options,
        multiple
      } = selectElement;
      if (!multiple) {
        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];
      }
      return Array.prototype.filter.call(options, (option) => option.selected).map((option) => option[name]);
    };
    let selectedValues = getValue(false);
    const getItems = (event) => {
      const options = event.target.options;
      return Array.prototype.map.call(options, (option) => ({
        displayValue: option.textContent,
        exportValue: option.value
      }));
    };
    if (this.enableScripting && this.hasJSActions) {
      selectElement.addEventListener("updatefromsandbox", (jsEvent) => {
        const actions = {
          value(event) {
            removeEmptyEntry?.();
            const value = event.detail.value;
            const values = new Set(Array.isArray(value) ? value : [value]);
            for (const option of selectElement.options) {
              option.selected = values.has(option.value);
            }
            storage.setValue(id, {
              value: getValue(true)
            });
            selectedValues = getValue(false);
          },
          multipleSelection(event) {
            selectElement.multiple = true;
          },
          remove(event) {
            const options = selectElement.options;
            const index = event.detail.remove;
            options[index].selected = false;
            selectElement.remove(index);
            if (options.length > 0) {
              const i = Array.prototype.findIndex.call(options, (option) => option.selected);
              if (i === -1) {
                options[0].selected = true;
              }
            }
            storage.setValue(id, {
              value: getValue(true),
              items: getItems(event)
            });
            selectedValues = getValue(false);
          },
          clear(event) {
            while (selectElement.length !== 0) {
              selectElement.remove(0);
            }
            storage.setValue(id, {
              value: null,
              items: []
            });
            selectedValues = getValue(false);
          },
          insert(event) {
            const {
              index,
              displayValue,
              exportValue
            } = event.detail.insert;
            const selectChild = selectElement.children[index];
            const optionElement = document.createElement("option");
            optionElement.textContent = displayValue;
            optionElement.value = exportValue;
            if (selectChild) {
              selectChild.before(optionElement);
            } else {
              selectElement.append(optionElement);
            }
            storage.setValue(id, {
              value: getValue(true),
              items: getItems(event)
            });
            selectedValues = getValue(false);
          },
          items(event) {
            const {
              items
            } = event.detail;
            while (selectElement.length !== 0) {
              selectElement.remove(0);
            }
            for (const item of items) {
              const {
                displayValue,
                exportValue
              } = item;
              const optionElement = document.createElement("option");
              optionElement.textContent = displayValue;
              optionElement.value = exportValue;
              selectElement.append(optionElement);
            }
            if (selectElement.options.length > 0) {
              selectElement.options[0].selected = true;
            }
            storage.setValue(id, {
              value: getValue(true),
              items: getItems(event)
            });
            selectedValues = getValue(false);
          },
          indices(event) {
            const indices = new Set(event.detail.indices);
            for (const option of event.target.options) {
              option.selected = indices.has(option.index);
            }
            storage.setValue(id, {
              value: getValue(true)
            });
            selectedValues = getValue(false);
          },
          editable(event) {
            event.target.disabled = !event.detail.editable;
          }
        };
        this._dispatchEventFromSandbox(actions, jsEvent);
      });
      selectElement.addEventListener("input", (event) => {
        const exportValue = getValue(true);
        const change = getValue(false);
        storage.setValue(id, {
          value: exportValue
        });
        event.preventDefault();
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id,
            name: "Keystroke",
            value: selectedValues,
            change,
            changeEx: exportValue,
            willCommit: false,
            commitKey: 1,
            keyDown: false
          }
        });
      });
      this._setEventListeners(selectElement, null, [["focus", "Focus"], ["blur", "Blur"], ["mousedown", "Mouse Down"], ["mouseenter", "Mouse Enter"], ["mouseleave", "Mouse Exit"], ["mouseup", "Mouse Up"], ["input", "Action"], ["input", "Validate"]], (event) => event.target.value);
    } else {
      selectElement.addEventListener("input", function(event) {
        storage.setValue(id, {
          value: getValue(true)
        });
      });
    }
    if (this.data.combo) {
      this._setTextStyle(selectElement);
    } else {
    }
    this._setBackgroundColor(selectElement);
    this._setDefaultPropertiesFromJS(selectElement);
    this.container.append(selectElement);
    return this.container;
  }
};
var PopupAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    const {
      data,
      elements
    } = parameters;
    super(parameters, {
      isRenderable: AnnotationElement._hasPopupData(data)
    });
    this.elements = elements;
    this.popup = null;
  }
  render() {
    this.container.classList.add("popupAnnotation");
    const popup = this.popup = new PopupElement({
      container: this.container,
      color: this.data.color,
      titleObj: this.data.titleObj,
      modificationDate: this.data.modificationDate,
      contentsObj: this.data.contentsObj,
      richText: this.data.richText,
      rect: this.data.rect,
      parentRect: this.data.parentRect || null,
      parent: this.parent,
      elements: this.elements,
      open: this.data.open
    });
    const elementIds = [];
    for (const element of this.elements) {
      element.popup = popup;
      element.container.ariaHasPopup = "dialog";
      elementIds.push(element.data.id);
      element.addHighlightArea();
    }
    this.container.setAttribute("aria-controls", elementIds.map((id) => `${AnnotationPrefix}${id}`).join(","));
    return this.container;
  }
};
var PopupElement = class {
  #boundKeyDown = this.#keyDown.bind(this);
  #boundHide = this.#hide.bind(this);
  #boundShow = this.#show.bind(this);
  #boundToggle = this.#toggle.bind(this);
  #color = null;
  #container = null;
  #contentsObj = null;
  #dateObj = null;
  #elements = null;
  #parent = null;
  #parentRect = null;
  #pinned = false;
  #popup = null;
  #position = null;
  #rect = null;
  #richText = null;
  #titleObj = null;
  #updates = null;
  #wasVisible = false;
  constructor({
    container: container2,
    color,
    elements,
    titleObj,
    modificationDate,
    contentsObj,
    richText,
    parent,
    rect,
    parentRect,
    open
  }) {
    this.#container = container2;
    this.#titleObj = titleObj;
    this.#contentsObj = contentsObj;
    this.#richText = richText;
    this.#parent = parent;
    this.#color = color;
    this.#rect = rect;
    this.#parentRect = parentRect;
    this.#elements = elements;
    this.#dateObj = PDFDateString.toDateObject(modificationDate);
    this.trigger = elements.flatMap((e) => e.getElementsToTriggerPopup());
    for (const element of this.trigger) {
      element.addEventListener("click", this.#boundToggle);
      element.addEventListener("mouseenter", this.#boundShow);
      element.addEventListener("mouseleave", this.#boundHide);
      element.classList.add("popupTriggerArea");
    }
    for (const element of elements) {
      element.container?.addEventListener("keydown", this.#boundKeyDown);
    }
    this.#container.hidden = true;
    if (open) {
      this.#toggle();
    }
  }
  render() {
    if (this.#popup) {
      return;
    }
    const popup = this.#popup = document.createElement("div");
    popup.className = "popup";
    if (this.#color) {
      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);
      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;
    }
    const header = document.createElement("span");
    header.className = "header";
    const title = document.createElement("h1");
    header.append(title);
    ({
      dir: title.dir,
      str: title.textContent
    } = this.#titleObj);
    popup.append(header);
    if (this.#dateObj) {
      const modificationDate = document.createElement("span");
      modificationDate.classList.add("popupDate");
      modificationDate.setAttribute("data-l10n-id", "pdfjs-annotation-date-time-string");
      modificationDate.setAttribute("data-l10n-args", JSON.stringify({
        dateObj: this.#dateObj.valueOf()
      }));
      header.append(modificationDate);
    }
    const html = this.#html;
    if (html) {
      XfaLayer.render({
        xfaHtml: html,
        intent: "richText",
        div: popup
      });
      popup.lastChild.classList.add("richText", "popupContent");
    } else {
      const contents = this._formatContents(this.#contentsObj);
      popup.append(contents);
    }
    this.#container.append(popup);
  }
  get #html() {
    const richText = this.#richText;
    const contentsObj = this.#contentsObj;
    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {
      return this.#richText.html || null;
    }
    return null;
  }
  get #fontSize() {
    return this.#html?.attributes?.style?.fontSize || 0;
  }
  get #fontColor() {
    return this.#html?.attributes?.style?.color || null;
  }
  #makePopupContent(text) {
    const popupLines = [];
    const popupContent = {
      str: text,
      html: {
        name: "div",
        attributes: {
          dir: "auto"
        },
        children: [{
          name: "p",
          children: popupLines
        }]
      }
    };
    const lineAttributes = {
      style: {
        color: this.#fontColor,
        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : ""
      }
    };
    for (const line of text.split("\n")) {
      popupLines.push({
        name: "span",
        value: line,
        attributes: lineAttributes
      });
    }
    return popupContent;
  }
  _formatContents({
    str,
    dir
  }) {
    const p = document.createElement("p");
    p.classList.add("popupContent");
    p.dir = dir;
    const lines = str.split(/(?:\r\n?|\n)/);
    for (let i = 0, ii = lines.length; i < ii; ++i) {
      const line = lines[i];
      p.append(document.createTextNode(line));
      if (i < ii - 1) {
        p.append(document.createElement("br"));
      }
    }
    return p;
  }
  #keyDown(event) {
    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {
      return;
    }
    if (event.key === "Enter" || event.key === "Escape" && this.#pinned) {
      this.#toggle();
    }
  }
  updateEdited({
    rect,
    popupContent
  }) {
    this.#updates ||= {
      contentsObj: this.#contentsObj,
      richText: this.#richText
    };
    if (rect) {
      this.#position = null;
    }
    if (popupContent) {
      this.#richText = this.#makePopupContent(popupContent);
      this.#contentsObj = null;
    }
    this.#popup?.remove();
    this.#popup = null;
  }
  resetEdited() {
    if (!this.#updates) {
      return;
    }
    ({
      contentsObj: this.#contentsObj,
      richText: this.#richText
    } = this.#updates);
    this.#updates = null;
    this.#popup?.remove();
    this.#popup = null;
    this.#position = null;
  }
  #setPosition() {
    if (this.#position !== null) {
      return;
    }
    const {
      page: {
        view
      },
      viewport: {
        rawDims: {
          pageWidth,
          pageHeight,
          pageX,
          pageY
        }
      }
    } = this.#parent;
    let useParentRect = !!this.#parentRect;
    let rect = useParentRect ? this.#parentRect : this.#rect;
    for (const element of this.#elements) {
      if (!rect || Util.intersect(element.data.rect, rect) !== null) {
        rect = element.data.rect;
        useParentRect = true;
        break;
      }
    }
    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);
    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;
    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;
    const popupLeft = normalizedRect[0] + parentWidth;
    const popupTop = normalizedRect[1];
    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];
    const {
      style
    } = this.#container;
    style.left = `${this.#position[0]}%`;
    style.top = `${this.#position[1]}%`;
  }
  #toggle() {
    this.#pinned = !this.#pinned;
    if (this.#pinned) {
      this.#show();
      this.#container.addEventListener("click", this.#boundToggle);
      this.#container.addEventListener("keydown", this.#boundKeyDown);
    } else {
      this.#hide();
      this.#container.removeEventListener("click", this.#boundToggle);
      this.#container.removeEventListener("keydown", this.#boundKeyDown);
    }
  }
  #show() {
    if (!this.#popup) {
      this.render();
    }
    if (!this.isVisible) {
      this.#setPosition();
      this.#container.hidden = false;
      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1e3;
    } else if (this.#pinned) {
      this.#container.classList.add("focused");
    }
  }
  #hide() {
    this.#container.classList.remove("focused");
    if (this.#pinned || !this.isVisible) {
      return;
    }
    this.#container.hidden = true;
    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1e3;
  }
  forceHide() {
    this.#wasVisible = this.isVisible;
    if (!this.#wasVisible) {
      return;
    }
    this.#container.hidden = true;
  }
  maybeShow() {
    if (!this.#wasVisible) {
      return;
    }
    if (!this.#popup) {
      this.#show();
    }
    this.#wasVisible = false;
    this.#container.hidden = false;
  }
  get isVisible() {
    return this.#container.hidden === false;
  }
};
var FreeTextAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true
    });
    this.textContent = parameters.data.textContent;
    this.textPosition = parameters.data.textPosition;
    this.annotationEditorType = AnnotationEditorType.FREETEXT;
  }
  render() {
    this.container.classList.add("freeTextAnnotation");
    if (this.textContent) {
      const content = document.createElement("div");
      content.classList.add("annotationTextContent");
      content.setAttribute("role", "comment");
      for (const line of this.textContent) {
        const lineSpan = document.createElement("span");
        lineSpan.textContent = line;
        content.append(lineSpan);
      }
      this.container.append(content);
    }
    if (!this.data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    this._editOnDoubleClick();
    return this.container;
  }
};
var LineAnnotationElement = class extends AnnotationElement {
  #line = null;
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true
    });
  }
  render() {
    this.container.classList.add("lineAnnotation");
    const {
      data,
      width,
      height
    } = this;
    const svg = this.svgFactory.create(width, height, true);
    const line = this.#line = this.svgFactory.createElement("svg:line");
    line.setAttribute("x1", data.rect[2] - data.lineCoordinates[0]);
    line.setAttribute("y1", data.rect[3] - data.lineCoordinates[1]);
    line.setAttribute("x2", data.rect[2] - data.lineCoordinates[2]);
    line.setAttribute("y2", data.rect[3] - data.lineCoordinates[3]);
    line.setAttribute("stroke-width", data.borderStyle.width || 1);
    line.setAttribute("stroke", "transparent");
    line.setAttribute("fill", "transparent");
    svg.append(line);
    this.container.append(svg);
    if (!data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    return this.container;
  }
  getElementsToTriggerPopup() {
    return this.#line;
  }
  addHighlightArea() {
    this.container.classList.add("highlightArea");
  }
};
var SquareAnnotationElement = class extends AnnotationElement {
  #square = null;
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true
    });
  }
  render() {
    this.container.classList.add("squareAnnotation");
    const {
      data,
      width,
      height
    } = this;
    const svg = this.svgFactory.create(width, height, true);
    const borderWidth = data.borderStyle.width;
    const square = this.#square = this.svgFactory.createElement("svg:rect");
    square.setAttribute("x", borderWidth / 2);
    square.setAttribute("y", borderWidth / 2);
    square.setAttribute("width", width - borderWidth);
    square.setAttribute("height", height - borderWidth);
    square.setAttribute("stroke-width", borderWidth || 1);
    square.setAttribute("stroke", "transparent");
    square.setAttribute("fill", "transparent");
    svg.append(square);
    this.container.append(svg);
    if (!data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    return this.container;
  }
  getElementsToTriggerPopup() {
    return this.#square;
  }
  addHighlightArea() {
    this.container.classList.add("highlightArea");
  }
};
var CircleAnnotationElement = class extends AnnotationElement {
  #circle = null;
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true
    });
  }
  render() {
    this.container.classList.add("circleAnnotation");
    const {
      data,
      width,
      height
    } = this;
    const svg = this.svgFactory.create(width, height, true);
    const borderWidth = data.borderStyle.width;
    const circle = this.#circle = this.svgFactory.createElement("svg:ellipse");
    circle.setAttribute("cx", width / 2);
    circle.setAttribute("cy", height / 2);
    circle.setAttribute("rx", width / 2 - borderWidth / 2);
    circle.setAttribute("ry", height / 2 - borderWidth / 2);
    circle.setAttribute("stroke-width", borderWidth || 1);
    circle.setAttribute("stroke", "transparent");
    circle.setAttribute("fill", "transparent");
    svg.append(circle);
    this.container.append(svg);
    if (!data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    return this.container;
  }
  getElementsToTriggerPopup() {
    return this.#circle;
  }
  addHighlightArea() {
    this.container.classList.add("highlightArea");
  }
};
var PolylineAnnotationElement = class extends AnnotationElement {
  #polyline = null;
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true
    });
    this.containerClassName = "polylineAnnotation";
    this.svgElementName = "svg:polyline";
  }
  render() {
    this.container.classList.add(this.containerClassName);
    const {
      data: {
        rect,
        vertices,
        borderStyle,
        popupRef
      },
      width,
      height
    } = this;
    if (!vertices) {
      return this.container;
    }
    const svg = this.svgFactory.create(width, height, true);
    let points = [];
    for (let i = 0, ii = vertices.length; i < ii; i += 2) {
      const x = vertices[i] - rect[0];
      const y = rect[3] - vertices[i + 1];
      points.push(`${x},${y}`);
    }
    points = points.join(" ");
    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);
    polyline.setAttribute("points", points);
    polyline.setAttribute("stroke-width", borderStyle.width || 1);
    polyline.setAttribute("stroke", "transparent");
    polyline.setAttribute("fill", "transparent");
    svg.append(polyline);
    this.container.append(svg);
    if (!popupRef && this.hasPopupData) {
      this._createPopup();
    }
    return this.container;
  }
  getElementsToTriggerPopup() {
    return this.#polyline;
  }
  addHighlightArea() {
    this.container.classList.add("highlightArea");
  }
};
var PolygonAnnotationElement = class extends PolylineAnnotationElement {
  constructor(parameters) {
    super(parameters);
    this.containerClassName = "polygonAnnotation";
    this.svgElementName = "svg:polygon";
  }
};
var CaretAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true
    });
  }
  render() {
    this.container.classList.add("caretAnnotation");
    if (!this.data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    return this.container;
  }
};
var InkAnnotationElement = class extends AnnotationElement {
  #polylinesGroupElement = null;
  #polylines = [];
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true
    });
    this.containerClassName = "inkAnnotation";
    this.svgElementName = "svg:polyline";
    this.annotationEditorType = this.data.it === "InkHighlight" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;
  }
  #getTransform(rotation, rect) {
    switch (rotation) {
      case 90:
        return {
          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,
          width: rect[3] - rect[1],
          height: rect[2] - rect[0]
        };
      case 180:
        return {
          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,
          width: rect[2] - rect[0],
          height: rect[3] - rect[1]
        };
      case 270:
        return {
          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,
          width: rect[3] - rect[1],
          height: rect[2] - rect[0]
        };
      default:
        return {
          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,
          width: rect[2] - rect[0],
          height: rect[3] - rect[1]
        };
    }
  }
  render() {
    this.container.classList.add(this.containerClassName);
    const {
      data: {
        rect,
        rotation,
        inkLists,
        borderStyle,
        popupRef
      }
    } = this;
    const {
      transform,
      width,
      height
    } = this.#getTransform(rotation, rect);
    const svg = this.svgFactory.create(width, height, true);
    const g = this.#polylinesGroupElement = this.svgFactory.createElement("svg:g");
    svg.append(g);
    g.setAttribute("stroke-width", borderStyle.width || 1);
    g.setAttribute("stroke-linecap", "round");
    g.setAttribute("stroke-linejoin", "round");
    g.setAttribute("stroke-miterlimit", 10);
    g.setAttribute("stroke", "transparent");
    g.setAttribute("fill", "transparent");
    g.setAttribute("transform", transform);
    for (let i = 0, ii = inkLists.length; i < ii; i++) {
      const polyline = this.svgFactory.createElement(this.svgElementName);
      this.#polylines.push(polyline);
      polyline.setAttribute("points", inkLists[i].join(","));
      g.append(polyline);
    }
    if (!popupRef && this.hasPopupData) {
      this._createPopup();
    }
    this.container.append(svg);
    this._editOnDoubleClick();
    return this.container;
  }
  updateEdited(params) {
    super.updateEdited(params);
    const {
      thickness,
      points,
      rect
    } = params;
    const g = this.#polylinesGroupElement;
    if (thickness >= 0) {
      g.setAttribute("stroke-width", thickness || 1);
    }
    if (points) {
      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {
        this.#polylines[i].setAttribute("points", points[i].join(","));
      }
    }
    if (rect) {
      const {
        transform,
        width,
        height
      } = this.#getTransform(this.data.rotation, rect);
      const root = g.parentElement;
      root.setAttribute("viewBox", `0 0 ${width} ${height}`);
      g.setAttribute("transform", transform);
    }
  }
  getElementsToTriggerPopup() {
    return this.#polylines;
  }
  addHighlightArea() {
    this.container.classList.add("highlightArea");
  }
};
var HighlightAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true,
      createQuadrilaterals: true
    });
    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;
  }
  render() {
    if (!this.data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    this.container.classList.add("highlightAnnotation");
    this._editOnDoubleClick();
    return this.container;
  }
};
var UnderlineAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true,
      createQuadrilaterals: true
    });
  }
  render() {
    if (!this.data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    this.container.classList.add("underlineAnnotation");
    return this.container;
  }
};
var SquigglyAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true,
      createQuadrilaterals: true
    });
  }
  render() {
    if (!this.data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    this.container.classList.add("squigglyAnnotation");
    return this.container;
  }
};
var StrikeOutAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true,
      createQuadrilaterals: true
    });
  }
  render() {
    if (!this.data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    this.container.classList.add("strikeoutAnnotation");
    return this.container;
  }
};
var StampAnnotationElement = class extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true,
      ignoreBorder: true
    });
    this.annotationEditorType = AnnotationEditorType.STAMP;
  }
  render() {
    this.container.classList.add("stampAnnotation");
    this.container.setAttribute("role", "img");
    if (!this.data.popupRef && this.hasPopupData) {
      this._createPopup();
    }
    this._editOnDoubleClick();
    return this.container;
  }
};
var FileAttachmentAnnotationElement = class extends AnnotationElement {
  #trigger = null;
  constructor(parameters) {
    super(parameters, {
      isRenderable: true
    });
    const {
      file
    } = this.data;
    this.filename = file.filename;
    this.content = file.content;
    this.linkService.eventBus?.dispatch("fileattachmentannotation", {
      source: this,
      ...file
    });
  }
  render() {
    this.container.classList.add("fileAttachmentAnnotation");
    const {
      container: container2,
      data
    } = this;
    let trigger;
    if (data.hasAppearance || data.fillAlpha === 0) {
      trigger = document.createElement("div");
    } else {
      trigger = document.createElement("img");
      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? "paperclip" : "pushpin"}.svg`;
      if (data.fillAlpha && data.fillAlpha < 1) {
        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;
      }
    }
    trigger.addEventListener("dblclick", this.#download.bind(this));
    this.#trigger = trigger;
    const {
      isMac
    } = util_FeatureTest.platform;
    container2.addEventListener("keydown", (evt) => {
      if (evt.key === "Enter" && (isMac ? evt.metaKey : evt.ctrlKey)) {
        this.#download();
      }
    });
    if (!data.popupRef && this.hasPopupData) {
      this._createPopup();
    } else {
      trigger.classList.add("popupTriggerArea");
    }
    container2.append(trigger);
    return container2;
  }
  getElementsToTriggerPopup() {
    return this.#trigger;
  }
  addHighlightArea() {
    this.container.classList.add("highlightArea");
  }
  #download() {
    this.downloadManager?.openOrDownloadData(this.content, this.filename);
  }
};
var AnnotationLayer = class _AnnotationLayer {
  #accessibilityManager = null;
  #annotationCanvasMap = null;
  #editableAnnotations = /* @__PURE__ */ new Map();
  #structTreeLayer = null;
  constructor({
    div,
    accessibilityManager,
    annotationCanvasMap,
    annotationEditorUIManager,
    page,
    viewport,
    structTreeLayer
  }) {
    this.div = div;
    this.#accessibilityManager = accessibilityManager;
    this.#annotationCanvasMap = annotationCanvasMap;
    this.#structTreeLayer = structTreeLayer || null;
    this.page = page;
    this.viewport = viewport;
    this.zIndex = 0;
    this._annotationEditorUIManager = annotationEditorUIManager;
  }
  hasEditableAnnotations() {
    return this.#editableAnnotations.size > 0;
  }
  async #appendElement(element, id) {
    const contentElement = element.firstChild || element;
    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;
    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);
    if (ariaAttributes) {
      for (const [key, value] of ariaAttributes) {
        contentElement.setAttribute(key, value);
      }
    }
    this.div.append(element);
    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);
  }
  async render(params) {
    const {
      annotations
    } = params;
    const layer = this.div;
    setLayerDimensions(layer, this.viewport);
    const popupToElements = /* @__PURE__ */ new Map();
    const elementParams = {
      data: null,
      layer,
      linkService: params.linkService,
      downloadManager: params.downloadManager,
      imageResourcesPath: params.imageResourcesPath || "",
      renderForms: params.renderForms !== false,
      svgFactory: new DOMSVGFactory(),
      annotationStorage: params.annotationStorage || new AnnotationStorage(),
      enableScripting: params.enableScripting === true,
      hasJSActions: params.hasJSActions,
      fieldObjects: params.fieldObjects,
      parent: this,
      elements: null
    };
    for (const data of annotations) {
      if (data.noHTML) {
        continue;
      }
      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;
      if (!isPopupAnnotation) {
        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {
          continue;
        }
      } else {
        const elements = popupToElements.get(data.id);
        if (!elements) {
          continue;
        }
        elementParams.elements = elements;
      }
      elementParams.data = data;
      const element = AnnotationElementFactory.create(elementParams);
      if (!element.isRenderable) {
        continue;
      }
      if (!isPopupAnnotation && data.popupRef) {
        const elements = popupToElements.get(data.popupRef);
        if (!elements) {
          popupToElements.set(data.popupRef, [element]);
        } else {
          elements.push(element);
        }
      }
      const rendered = element.render();
      if (data.hidden) {
        rendered.style.visibility = "hidden";
      }
      await this.#appendElement(rendered, data.id);
      if (element._isEditable) {
        this.#editableAnnotations.set(element.data.id, element);
        this._annotationEditorUIManager?.renderAnnotationElement(element);
      }
    }
    this.#setAnnotationCanvasMap();
  }
  async addLinkAnnotations(annotations, linkService) {
    const elementParams = {
      data: null,
      layer: this.div,
      linkService,
      svgFactory: new DOMSVGFactory(),
      parent: this
    };
    for (const data of annotations) {
      data.borderStyle ||= _AnnotationLayer._defaultBorderStyle;
      elementParams.data = data;
      const element = AnnotationElementFactory.create(elementParams);
      if (!element.isRenderable) {
        continue;
      }
      const rendered = element.render();
      await this.#appendElement(rendered, data.id);
    }
  }
  update({
    viewport
  }) {
    const layer = this.div;
    this.viewport = viewport;
    setLayerDimensions(layer, {
      rotation: viewport.rotation
    });
    this.#setAnnotationCanvasMap();
    layer.hidden = false;
  }
  #setAnnotationCanvasMap() {
    if (!this.#annotationCanvasMap) {
      return;
    }
    const layer = this.div;
    for (const [id, canvas2] of this.#annotationCanvasMap) {
      const element = layer.querySelector(`[data-annotation-id="${id}"]`);
      if (!element) {
        continue;
      }
      canvas2.className = "annotationContent";
      const {
        firstChild
      } = element;
      if (!firstChild) {
        element.append(canvas2);
      } else if (firstChild.nodeName === "CANVAS") {
        firstChild.replaceWith(canvas2);
      } else if (!firstChild.classList.contains("annotationContent")) {
        firstChild.before(canvas2);
      } else {
        firstChild.after(canvas2);
      }
      const editableAnnotation = this.#editableAnnotations.get(id);
      if (!editableAnnotation) {
        continue;
      }
      if (editableAnnotation._hasNoCanvas) {
        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas2);
        editableAnnotation._hasNoCanvas = false;
      } else {
        editableAnnotation.canvas = canvas2;
      }
    }
    this.#annotationCanvasMap.clear();
  }
  getEditableAnnotations() {
    return Array.from(this.#editableAnnotations.values());
  }
  getEditableAnnotation(id) {
    return this.#editableAnnotations.get(id);
  }
  static get _defaultBorderStyle() {
    return shadow(this, "_defaultBorderStyle", Object.freeze({
      width: 1,
      rawWidth: 1,
      style: AnnotationBorderStyleType.SOLID,
      dashArray: [3],
      horizontalCornerRadius: 0,
      verticalCornerRadius: 0
    }));
  }
};
var EOL_PATTERN = /\r\n?|\n/g;
var FreeTextEditor = class _FreeTextEditor extends AnnotationEditor {
  #color;
  #content = "";
  #editorDivId = `${this.id}-editor`;
  #editModeAC = null;
  #fontSize;
  static _freeTextDefaultContent = "";
  static _internalPadding = 0;
  static _defaultColor = null;
  static _defaultFontSize = 10;
  static get _keyboardManager() {
    const proto = _FreeTextEditor.prototype;
    const arrowChecker = (self) => self.isEmpty();
    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;
    const big = AnnotationEditorUIManager.TRANSLATE_BIG;
    return shadow(this, "_keyboardManager", new KeyboardManager([[["ctrl+s", "mac+meta+s", "ctrl+p", "mac+meta+p"], proto.commitOrRemove, {
      bubbles: true
    }], [["ctrl+Enter", "mac+meta+Enter", "Escape", "mac+Escape"], proto.commitOrRemove], [["ArrowLeft", "mac+ArrowLeft"], proto._translateEmpty, {
      args: [-small, 0],
      checker: arrowChecker
    }], [["ctrl+ArrowLeft", "mac+shift+ArrowLeft"], proto._translateEmpty, {
      args: [-big, 0],
      checker: arrowChecker
    }], [["ArrowRight", "mac+ArrowRight"], proto._translateEmpty, {
      args: [small, 0],
      checker: arrowChecker
    }], [["ctrl+ArrowRight", "mac+shift+ArrowRight"], proto._translateEmpty, {
      args: [big, 0],
      checker: arrowChecker
    }], [["ArrowUp", "mac+ArrowUp"], proto._translateEmpty, {
      args: [0, -small],
      checker: arrowChecker
    }], [["ctrl+ArrowUp", "mac+shift+ArrowUp"], proto._translateEmpty, {
      args: [0, -big],
      checker: arrowChecker
    }], [["ArrowDown", "mac+ArrowDown"], proto._translateEmpty, {
      args: [0, small],
      checker: arrowChecker
    }], [["ctrl+ArrowDown", "mac+shift+ArrowDown"], proto._translateEmpty, {
      args: [0, big],
      checker: arrowChecker
    }]]));
  }
  static _type = "freetext";
  static _editorType = AnnotationEditorType.FREETEXT;
  constructor(params) {
    super({
      ...params,
      name: "freeTextEditor"
    });
    this.#color = params.color || _FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;
    this.#fontSize = params.fontSize || _FreeTextEditor._defaultFontSize;
  }
  static initialize(l10n, uiManager) {
    AnnotationEditor.initialize(l10n, uiManager);
    const style = getComputedStyle(document.documentElement);
    this._internalPadding = parseFloat(style.getPropertyValue("--freetext-padding"));
  }
  static updateDefaultParams(type, value) {
    switch (type) {
      case AnnotationEditorParamsType.FREETEXT_SIZE:
        _FreeTextEditor._defaultFontSize = value;
        break;
      case AnnotationEditorParamsType.FREETEXT_COLOR:
        _FreeTextEditor._defaultColor = value;
        break;
    }
  }
  updateParams(type, value) {
    switch (type) {
      case AnnotationEditorParamsType.FREETEXT_SIZE:
        this.#updateFontSize(value);
        break;
      case AnnotationEditorParamsType.FREETEXT_COLOR:
        this.#updateColor(value);
        break;
    }
  }
  static get defaultPropertiesToUpdate() {
    return [[AnnotationEditorParamsType.FREETEXT_SIZE, _FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, _FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];
  }
  get propertiesToUpdate() {
    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];
  }
  #updateFontSize(fontSize) {
    const setFontsize = (size) => {
      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;
      this.translate(0, -(size - this.#fontSize) * this.parentScale);
      this.#fontSize = size;
      this.#setEditorDimensions();
    };
    const savedFontsize = this.#fontSize;
    this.addCommands({
      cmd: setFontsize.bind(this, fontSize),
      undo: setFontsize.bind(this, savedFontsize),
      post: this._uiManager.updateUI.bind(this._uiManager, this),
      mustExec: true,
      type: AnnotationEditorParamsType.FREETEXT_SIZE,
      overwriteIfSameType: true,
      keepUndo: true
    });
  }
  #updateColor(color) {
    const setColor = (col) => {
      this.#color = this.editorDiv.style.color = col;
    };
    const savedColor = this.#color;
    this.addCommands({
      cmd: setColor.bind(this, color),
      undo: setColor.bind(this, savedColor),
      post: this._uiManager.updateUI.bind(this._uiManager, this),
      mustExec: true,
      type: AnnotationEditorParamsType.FREETEXT_COLOR,
      overwriteIfSameType: true,
      keepUndo: true
    });
  }
  _translateEmpty(x, y) {
    this._uiManager.translateSelectedEditors(x, y, true);
  }
  getInitialTranslation() {
    const scale = this.parentScale;
    return [-_FreeTextEditor._internalPadding * scale, -(_FreeTextEditor._internalPadding + this.#fontSize) * scale];
  }
  rebuild() {
    if (!this.parent) {
      return;
    }
    super.rebuild();
    if (this.div === null) {
      return;
    }
    if (!this.isAttachedToDOM) {
      this.parent.add(this);
    }
  }
  enableEditMode() {
    if (this.isInEditMode()) {
      return;
    }
    this.parent.setEditingState(false);
    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);
    super.enableEditMode();
    this.overlayDiv.classList.remove("enabled");
    this.editorDiv.contentEditable = true;
    this._isDraggable = false;
    this.div.removeAttribute("aria-activedescendant");
    this.#editModeAC = new AbortController();
    const signal = this._uiManager.combinedSignal(this.#editModeAC);
    this.editorDiv.addEventListener("keydown", this.editorDivKeydown.bind(this), {
      signal
    });
    this.editorDiv.addEventListener("focus", this.editorDivFocus.bind(this), {
      signal
    });
    this.editorDiv.addEventListener("blur", this.editorDivBlur.bind(this), {
      signal
    });
    this.editorDiv.addEventListener("input", this.editorDivInput.bind(this), {
      signal
    });
    this.editorDiv.addEventListener("paste", this.editorDivPaste.bind(this), {
      signal
    });
  }
  disableEditMode() {
    if (!this.isInEditMode()) {
      return;
    }
    this.parent.setEditingState(true);
    super.disableEditMode();
    this.overlayDiv.classList.add("enabled");
    this.editorDiv.contentEditable = false;
    this.div.setAttribute("aria-activedescendant", this.#editorDivId);
    this._isDraggable = true;
    this.#editModeAC?.abort();
    this.#editModeAC = null;
    this.div.focus({
      preventScroll: true
    });
    this.isEditing = false;
    this.parent.div.classList.add("freetextEditing");
  }
  focusin(event) {
    if (!this._focusEventsAllowed) {
      return;
    }
    super.focusin(event);
    if (event.target !== this.editorDiv) {
      this.editorDiv.focus();
    }
  }
  onceAdded(focus) {
    if (this.width) {
      return;
    }
    this.enableEditMode();
    if (focus) {
      this.editorDiv.focus();
    }
    if (this._initialOptions?.isCentered) {
      this.center();
    }
    this._initialOptions = null;
  }
  isEmpty() {
    return !this.editorDiv || this.editorDiv.innerText.trim() === "";
  }
  remove() {
    this.isEditing = false;
    if (this.parent) {
      this.parent.setEditingState(true);
      this.parent.div.classList.add("freetextEditing");
    }
    super.remove();
  }
  #extractText() {
    const buffer = [];
    this.editorDiv.normalize();
    let prevChild = null;
    for (const child of this.editorDiv.childNodes) {
      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === "BR") {
        continue;
      }
      buffer.push(_FreeTextEditor.#getNodeContent(child));
      prevChild = child;
    }
    return buffer.join("\n");
  }
  #setEditorDimensions() {
    const [parentWidth, parentHeight] = this.parentDimensions;
    let rect;
    if (this.isAttachedToDOM) {
      rect = this.div.getBoundingClientRect();
    } else {
      const {
        currentLayer,
        div
      } = this;
      const savedDisplay = div.style.display;
      const savedVisibility = div.classList.contains("hidden");
      div.classList.remove("hidden");
      div.style.display = "hidden";
      currentLayer.div.append(this.div);
      rect = div.getBoundingClientRect();
      div.remove();
      div.style.display = savedDisplay;
      div.classList.toggle("hidden", savedVisibility);
    }
    if (this.rotation % 180 === this.parentRotation % 180) {
      this.width = rect.width / parentWidth;
      this.height = rect.height / parentHeight;
    } else {
      this.width = rect.height / parentWidth;
      this.height = rect.width / parentHeight;
    }
    this.fixAndSetPosition();
  }
  commit() {
    if (!this.isInEditMode()) {
      return;
    }
    super.commit();
    this.disableEditMode();
    const savedText = this.#content;
    const newText = this.#content = this.#extractText().trimEnd();
    if (savedText === newText) {
      return;
    }
    const setText = (text) => {
      this.#content = text;
      if (!text) {
        this.remove();
        return;
      }
      this.#setContent();
      this._uiManager.rebuild(this);
      this.#setEditorDimensions();
    };
    this.addCommands({
      cmd: () => {
        setText(newText);
      },
      undo: () => {
        setText(savedText);
      },
      mustExec: false
    });
    this.#setEditorDimensions();
  }
  shouldGetKeyboardEvents() {
    return this.isInEditMode();
  }
  enterInEditMode() {
    this.enableEditMode();
    this.editorDiv.focus();
  }
  dblclick(event) {
    this.enterInEditMode();
  }
  keydown(event) {
    if (event.target === this.div && event.key === "Enter") {
      this.enterInEditMode();
      event.preventDefault();
    }
  }
  editorDivKeydown(event) {
    _FreeTextEditor._keyboardManager.exec(this, event);
  }
  editorDivFocus(event) {
    this.isEditing = true;
  }
  editorDivBlur(event) {
    this.isEditing = false;
  }
  editorDivInput(event) {
    this.parent.div.classList.toggle("freetextEditing", this.isEmpty());
  }
  disableEditing() {
    this.editorDiv.setAttribute("role", "comment");
    this.editorDiv.removeAttribute("aria-multiline");
  }
  enableEditing() {
    this.editorDiv.setAttribute("role", "textbox");
    this.editorDiv.setAttribute("aria-multiline", true);
  }
  render() {
    if (this.div) {
      return this.div;
    }
    let baseX, baseY;
    if (this._isCopy || this.annotationElementId) {
      baseX = this.x;
      baseY = this.y;
    }
    super.render();
    this.editorDiv = document.createElement("div");
    this.editorDiv.className = "internal";
    this.editorDiv.setAttribute("id", this.#editorDivId);
    this.editorDiv.setAttribute("data-l10n-id", "pdfjs-free-text2");
    this.editorDiv.setAttribute("data-l10n-attrs", "default-content");
    this.enableEditing();
    this.editorDiv.contentEditable = true;
    const {
      style
    } = this.editorDiv;
    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;
    style.color = this.#color;
    this.div.append(this.editorDiv);
    this.overlayDiv = document.createElement("div");
    this.overlayDiv.classList.add("overlay", "enabled");
    this.div.append(this.overlayDiv);
    bindEvents(this, this.div, ["dblclick", "keydown"]);
    if (this._isCopy || this.annotationElementId) {
      const [parentWidth, parentHeight] = this.parentDimensions;
      if (this.annotationElementId) {
        const {
          position
        } = this._initialData;
        let [tx, ty] = this.getInitialTranslation();
        [tx, ty] = this.pageTranslationToScreen(tx, ty);
        const [pageWidth, pageHeight] = this.pageDimensions;
        const [pageX, pageY] = this.pageTranslation;
        let posX, posY;
        switch (this.rotation) {
          case 0:
            posX = baseX + (position[0] - pageX) / pageWidth;
            posY = baseY + this.height - (position[1] - pageY) / pageHeight;
            break;
          case 90:
            posX = baseX + (position[0] - pageX) / pageWidth;
            posY = baseY - (position[1] - pageY) / pageHeight;
            [tx, ty] = [ty, -tx];
            break;
          case 180:
            posX = baseX - this.width + (position[0] - pageX) / pageWidth;
            posY = baseY - (position[1] - pageY) / pageHeight;
            [tx, ty] = [-tx, -ty];
            break;
          case 270:
            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;
            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;
            [tx, ty] = [-ty, tx];
            break;
        }
        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);
      } else {
        this._moveAfterPaste(baseX, baseY);
      }
      this.#setContent();
      this._isDraggable = true;
      this.editorDiv.contentEditable = false;
    } else {
      this._isDraggable = false;
      this.editorDiv.contentEditable = true;
    }
    return this.div;
  }
  static #getNodeContent(node) {
    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, "");
  }
  editorDivPaste(event) {
    const clipboardData = event.clipboardData || window.clipboardData;
    const {
      types
    } = clipboardData;
    if (types.length === 1 && types[0] === "text/plain") {
      return;
    }
    event.preventDefault();
    const paste = _FreeTextEditor.#deserializeContent(clipboardData.getData("text") || "").replaceAll(EOL_PATTERN, "\n");
    if (!paste) {
      return;
    }
    const selection = window.getSelection();
    if (!selection.rangeCount) {
      return;
    }
    this.editorDiv.normalize();
    selection.deleteFromDocument();
    const range = selection.getRangeAt(0);
    if (!paste.includes("\n")) {
      range.insertNode(document.createTextNode(paste));
      this.editorDiv.normalize();
      selection.collapseToStart();
      return;
    }
    const {
      startContainer,
      startOffset
    } = range;
    const bufferBefore = [];
    const bufferAfter = [];
    if (startContainer.nodeType === Node.TEXT_NODE) {
      const parent = startContainer.parentElement;
      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, ""));
      if (parent !== this.editorDiv) {
        let buffer = bufferBefore;
        for (const child of this.editorDiv.childNodes) {
          if (child === parent) {
            buffer = bufferAfter;
            continue;
          }
          buffer.push(_FreeTextEditor.#getNodeContent(child));
        }
      }
      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, ""));
    } else if (startContainer === this.editorDiv) {
      let buffer = bufferBefore;
      let i = 0;
      for (const child of this.editorDiv.childNodes) {
        if (i++ === startOffset) {
          buffer = bufferAfter;
        }
        buffer.push(_FreeTextEditor.#getNodeContent(child));
      }
    }
    this.#content = `${bufferBefore.join("\n")}${paste}${bufferAfter.join("\n")}`;
    this.#setContent();
    const newRange = new Range();
    let beforeLength = Math.sumPrecise(bufferBefore.map((line) => line.length));
    for (const {
      firstChild
    } of this.editorDiv.childNodes) {
      if (firstChild.nodeType === Node.TEXT_NODE) {
        const length = firstChild.nodeValue.length;
        if (beforeLength <= length) {
          newRange.setStart(firstChild, beforeLength);
          newRange.setEnd(firstChild, beforeLength);
          break;
        }
        beforeLength -= length;
      }
    }
    selection.removeAllRanges();
    selection.addRange(newRange);
  }
  #setContent() {
    this.editorDiv.replaceChildren();
    if (!this.#content) {
      return;
    }
    for (const line of this.#content.split("\n")) {
      const div = document.createElement("div");
      div.append(line ? document.createTextNode(line) : document.createElement("br"));
      this.editorDiv.append(div);
    }
  }
  #serializeContent() {
    return this.#content.replaceAll("\xA0", " ");
  }
  static #deserializeContent(content) {
    return content.replaceAll(" ", "\xA0");
  }
  get contentDiv() {
    return this.editorDiv;
  }
  static async deserialize(data, parent, uiManager) {
    let initialData = null;
    if (data instanceof FreeTextAnnotationElement) {
      const {
        data: {
          defaultAppearanceData: {
            fontSize,
            fontColor
          },
          rect,
          rotation,
          id,
          popupRef
        },
        textContent,
        textPosition,
        parent: {
          page: {
            pageNumber
          }
        }
      } = data;
      if (!textContent || textContent.length === 0) {
        return null;
      }
      initialData = data = {
        annotationType: AnnotationEditorType.FREETEXT,
        color: Array.from(fontColor),
        fontSize,
        value: textContent.join("\n"),
        position: textPosition,
        pageIndex: pageNumber - 1,
        rect: rect.slice(0),
        rotation,
        id,
        deleted: false,
        popupRef
      };
    }
    const editor = await super.deserialize(data, parent, uiManager);
    editor.#fontSize = data.fontSize;
    editor.#color = Util.makeHexColor(...data.color);
    editor.#content = _FreeTextEditor.#deserializeContent(data.value);
    editor.annotationElementId = data.id || null;
    editor._initialData = initialData;
    return editor;
  }
  serialize(isForCopying = false) {
    if (this.isEmpty()) {
      return null;
    }
    if (this.deleted) {
      return this.serializeDeleted();
    }
    const padding = _FreeTextEditor._internalPadding * this.parentScale;
    const rect = this.getRect(padding, padding);
    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);
    const serialized = {
      annotationType: AnnotationEditorType.FREETEXT,
      color,
      fontSize: this.#fontSize,
      value: this.#serializeContent(),
      pageIndex: this.pageIndex,
      rect,
      rotation: this.rotation,
      structTreeParentId: this._structTreeParentId
    };
    if (isForCopying) {
      serialized.isCopy = true;
      return serialized;
    }
    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {
      return null;
    }
    serialized.id = this.annotationElementId;
    return serialized;
  }
  #hasElementChanged(serialized) {
    const {
      value,
      fontSize,
      color,
      pageIndex
    } = this._initialData;
    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;
  }
  renderAnnotationElement(annotation) {
    const content = super.renderAnnotationElement(annotation);
    if (this.deleted) {
      return content;
    }
    const {
      style
    } = content;
    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;
    style.color = this.#color;
    content.replaceChildren();
    for (const line of this.#content.split("\n")) {
      const div = document.createElement("div");
      div.append(line ? document.createTextNode(line) : document.createElement("br"));
      content.append(div);
    }
    const padding = _FreeTextEditor._internalPadding * this.parentScale;
    annotation.updateEdited({
      rect: this.getRect(padding, padding),
      popupContent: this.#content
    });
    return content;
  }
  resetAnnotationElement(annotation) {
    super.resetAnnotationElement(annotation);
    annotation.resetEdited();
  }
};
var Outline = class {
  static PRECISION = 1e-4;
  toSVGPath() {
    unreachable("Abstract method `toSVGPath` must be implemented.");
  }
  get box() {
    unreachable("Abstract getter `box` must be implemented.");
  }
  serialize(_bbox, _rotation) {
    unreachable("Abstract method `serialize` must be implemented.");
  }
  static _rescale(src, tx, ty, sx, sy, dest) {
    dest ||= new Float32Array(src.length);
    for (let i = 0, ii = src.length; i < ii; i += 2) {
      dest[i] = tx + src[i] * sx;
      dest[i + 1] = ty + src[i + 1] * sy;
    }
    return dest;
  }
  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {
    dest ||= new Float32Array(src.length);
    for (let i = 0, ii = src.length; i < ii; i += 2) {
      dest[i] = tx + src[i + 1] * sx;
      dest[i + 1] = ty + src[i] * sy;
    }
    return dest;
  }
  static _translate(src, tx, ty, dest) {
    dest ||= new Float32Array(src.length);
    for (let i = 0, ii = src.length; i < ii; i += 2) {
      dest[i] = tx + src[i];
      dest[i + 1] = ty + src[i + 1];
    }
    return dest;
  }
  static svgRound(x) {
    return Math.round(x * 1e4);
  }
  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {
    switch (rotation) {
      case 90:
        return [1 - y / parentWidth, x / parentHeight];
      case 180:
        return [1 - x / parentWidth, 1 - y / parentHeight];
      case 270:
        return [y / parentWidth, 1 - x / parentHeight];
      default:
        return [x / parentWidth, y / parentHeight];
    }
  }
  static _normalizePagePoint(x, y, rotation) {
    switch (rotation) {
      case 90:
        return [1 - y, x];
      case 180:
        return [1 - x, 1 - y];
      case 270:
        return [y, 1 - x];
      default:
        return [x, y];
    }
  }
  static createBezierPoints(x1, y1, x2, y2, x3, y3) {
    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];
  }
};
var FreeDrawOutliner = class _FreeDrawOutliner {
  #box;
  #bottom = [];
  #innerMargin;
  #isLTR;
  #top = [];
  #last = new Float32Array(18);
  #lastX;
  #lastY;
  #min;
  #min_dist;
  #scaleFactor;
  #thickness;
  #points = [];
  static #MIN_DIST = 8;
  static #MIN_DIFF = 2;
  static #MIN = _FreeDrawOutliner.#MIN_DIST + _FreeDrawOutliner.#MIN_DIFF;
  constructor({
    x,
    y
  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {
    this.#box = box;
    this.#thickness = thickness * scaleFactor;
    this.#isLTR = isLTR;
    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);
    this.#innerMargin = innerMargin;
    this.#min_dist = _FreeDrawOutliner.#MIN_DIST * scaleFactor;
    this.#min = _FreeDrawOutliner.#MIN * scaleFactor;
    this.#scaleFactor = scaleFactor;
    this.#points.push(x, y);
  }
  isEmpty() {
    return isNaN(this.#last[8]);
  }
  #getLastCoords() {
    const lastTop = this.#last.subarray(4, 6);
    const lastBottom = this.#last.subarray(16, 18);
    const [x, y, width, height] = this.#box;
    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];
  }
  add({
    x,
    y
  }) {
    this.#lastX = x;
    this.#lastY = y;
    const [layerX, layerY, layerWidth, layerHeight] = this.#box;
    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);
    const diffX = x - x2;
    const diffY = y - y2;
    const d = Math.hypot(diffX, diffY);
    if (d < this.#min) {
      return false;
    }
    const diffD = d - this.#min_dist;
    const K = diffD / d;
    const shiftX = K * diffX;
    const shiftY = K * diffY;
    let x0 = x1;
    let y0 = y1;
    x1 = x2;
    y1 = y2;
    x2 += shiftX;
    y2 += shiftY;
    this.#points?.push(x, y);
    const nX = -shiftY / diffD;
    const nY = shiftX / diffD;
    const thX = nX * this.#thickness;
    const thY = nY * this.#thickness;
    this.#last.set(this.#last.subarray(2, 8), 0);
    this.#last.set([x2 + thX, y2 + thY], 4);
    this.#last.set(this.#last.subarray(14, 18), 12);
    this.#last.set([x2 - thX, y2 - thY], 16);
    if (isNaN(this.#last[6])) {
      if (this.#top.length === 0) {
        this.#last.set([x1 + thX, y1 + thY], 2);
        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);
        this.#last.set([x1 - thX, y1 - thY], 14);
        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);
      }
      this.#last.set([x0, y0, x1, y1, x2, y2], 6);
      return !this.isEmpty();
    }
    this.#last.set([x0, y0, x1, y1, x2, y2], 6);
    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));
    if (angle < Math.PI / 2) {
      [x1, y1, x2, y2] = this.#last.subarray(2, 6);
      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);
      [x1, y1, x0, y0] = this.#last.subarray(14, 18);
      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);
      return true;
    }
    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);
    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);
    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);
    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);
    return true;
  }
  toSVGPath() {
    if (this.isEmpty()) {
      return "";
    }
    const top = this.#top;
    const bottom = this.#bottom;
    if (isNaN(this.#last[6]) && !this.isEmpty()) {
      return this.#toSVGPathTwoPoints();
    }
    const buffer = [];
    buffer.push(`M${top[4]} ${top[5]}`);
    for (let i = 6; i < top.length; i += 6) {
      if (isNaN(top[i])) {
        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);
      } else {
        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);
      }
    }
    this.#toSVGPathEnd(buffer);
    for (let i = bottom.length - 6; i >= 6; i -= 6) {
      if (isNaN(bottom[i])) {
        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);
      } else {
        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);
      }
    }
    this.#toSVGPathStart(buffer);
    return buffer.join(" ");
  }
  #toSVGPathTwoPoints() {
    const [x, y, width, height] = this.#box;
    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();
    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;
  }
  #toSVGPathStart(buffer) {
    const bottom = this.#bottom;
    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);
  }
  #toSVGPathEnd(buffer) {
    const [x, y, width, height] = this.#box;
    const lastTop = this.#last.subarray(4, 6);
    const lastBottom = this.#last.subarray(16, 18);
    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();
    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);
  }
  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {
    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);
  }
  getOutlines() {
    const top = this.#top;
    const bottom = this.#bottom;
    const last = this.#last;
    const [layerX, layerY, layerWidth, layerHeight] = this.#box;
    const points = new Float32Array((this.#points?.length ?? 0) + 2);
    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {
      points[i] = (this.#points[i] - layerX) / layerWidth;
      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;
    }
    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;
    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;
    if (isNaN(last[6]) && !this.isEmpty()) {
      return this.#getOutlineTwoPoints(points);
    }
    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);
    let N = top.length;
    for (let i = 0; i < N; i += 2) {
      if (isNaN(top[i])) {
        outline[i] = outline[i + 1] = NaN;
        continue;
      }
      outline[i] = top[i];
      outline[i + 1] = top[i + 1];
    }
    N = this.#getOutlineEnd(outline, N);
    for (let i = bottom.length - 6; i >= 6; i -= 6) {
      for (let j = 0; j < 6; j += 2) {
        if (isNaN(bottom[i + j])) {
          outline[N] = outline[N + 1] = NaN;
          N += 2;
          continue;
        }
        outline[N] = bottom[i + j];
        outline[N + 1] = bottom[i + j + 1];
        N += 2;
      }
    }
    this.#getOutlineStart(outline, N);
    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);
  }
  #getOutlineTwoPoints(points) {
    const last = this.#last;
    const [layerX, layerY, layerWidth, layerHeight] = this.#box;
    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();
    const outline = new Float32Array(36);
    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);
    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);
  }
  #getOutlineStart(outline, pos) {
    const bottom = this.#bottom;
    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);
    return pos += 6;
  }
  #getOutlineEnd(outline, pos) {
    const lastTop = this.#last.subarray(4, 6);
    const lastBottom = this.#last.subarray(16, 18);
    const [layerX, layerY, layerWidth, layerHeight] = this.#box;
    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();
    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);
    return pos += 24;
  }
};
var FreeDrawOutline = class extends Outline {
  #box;
  #bbox = new Float32Array(4);
  #innerMargin;
  #isLTR;
  #points;
  #scaleFactor;
  #outline;
  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {
    super();
    this.#outline = outline;
    this.#points = points;
    this.#box = box;
    this.#scaleFactor = scaleFactor;
    this.#innerMargin = innerMargin;
    this.#isLTR = isLTR;
    this.lastPoint = [NaN, NaN];
    this.#computeMinMax(isLTR);
    const [x, y, width, height] = this.#bbox;
    for (let i = 0, ii = outline.length; i < ii; i += 2) {
      outline[i] = (outline[i] - x) / width;
      outline[i + 1] = (outline[i + 1] - y) / height;
    }
    for (let i = 0, ii = points.length; i < ii; i += 2) {
      points[i] = (points[i] - x) / width;
      points[i + 1] = (points[i + 1] - y) / height;
    }
  }
  toSVGPath() {
    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];
    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {
      if (isNaN(this.#outline[i])) {
        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);
        continue;
      }
      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);
    }
    buffer.push("Z");
    return buffer.join(" ");
  }
  serialize([blX, blY, trX, trY], rotation) {
    const width = trX - blX;
    const height = trY - blY;
    let outline;
    let points;
    switch (rotation) {
      case 0:
        outline = Outline._rescale(this.#outline, blX, trY, width, -height);
        points = Outline._rescale(this.#points, blX, trY, width, -height);
        break;
      case 90:
        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);
        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);
        break;
      case 180:
        outline = Outline._rescale(this.#outline, trX, blY, -width, height);
        points = Outline._rescale(this.#points, trX, blY, -width, height);
        break;
      case 270:
        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);
        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);
        break;
    }
    return {
      outline: Array.from(outline),
      points: [Array.from(points)]
    };
  }
  #computeMinMax(isLTR) {
    const outline = this.#outline;
    let lastX = outline[4];
    let lastY = outline[5];
    const minMax = [lastX, lastY, lastX, lastY];
    let lastPointX = lastX;
    let lastPointY = lastY;
    const ltrCallback = isLTR ? Math.max : Math.min;
    for (let i = 6, ii = outline.length; i < ii; i += 6) {
      const x = outline[i + 4], y = outline[i + 5];
      if (isNaN(outline[i])) {
        Util.pointBoundingBox(x, y, minMax);
        if (lastPointY < y) {
          lastPointX = x;
          lastPointY = y;
        } else if (lastPointY === y) {
          lastPointX = ltrCallback(lastPointX, x);
        }
      } else {
        const bbox2 = [Infinity, Infinity, -Infinity, -Infinity];
        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox2);
        Util.rectBoundingBox(...bbox2, minMax);
        if (lastPointY < bbox2[3]) {
          lastPointX = bbox2[2];
          lastPointY = bbox2[3];
        } else if (lastPointY === bbox2[3]) {
          lastPointX = ltrCallback(lastPointX, bbox2[2]);
        }
      }
      lastX = x;
      lastY = y;
    }
    const bbox = this.#bbox;
    bbox[0] = minMax[0] - this.#innerMargin;
    bbox[1] = minMax[1] - this.#innerMargin;
    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;
    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;
    this.lastPoint = [lastPointX, lastPointY];
  }
  get box() {
    return this.#bbox;
  }
  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {
    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);
  }
  getNewOutline(thickness, innerMargin) {
    const [x, y, width, height] = this.#bbox;
    const [layerX, layerY, layerWidth, layerHeight] = this.#box;
    const sx = width * layerWidth;
    const sy = height * layerHeight;
    const tx = x * layerWidth + layerX;
    const ty = y * layerHeight + layerY;
    const outliner = this.newOutliner({
      x: this.#points[0] * sx + tx,
      y: this.#points[1] * sy + ty
    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);
    for (let i = 2; i < this.#points.length; i += 2) {
      outliner.add({
        x: this.#points[i] * sx + tx,
        y: this.#points[i + 1] * sy + ty
      });
    }
    return outliner.getOutlines();
  }
};
var HighlightOutliner = class {
  #box;
  #lastPoint;
  #verticalEdges = [];
  #intervals = [];
  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {
    const minMax = [Infinity, Infinity, -Infinity, -Infinity];
    const NUMBER_OF_DIGITS = 4;
    const EPSILON = 10 ** -NUMBER_OF_DIGITS;
    for (const {
      x,
      y,
      width,
      height
    } of boxes) {
      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;
      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;
      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;
      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;
      const left = [x1, y1, y2, true];
      const right = [x2, y1, y2, false];
      this.#verticalEdges.push(left, right);
      Util.rectBoundingBox(x1, y1, x2, y2, minMax);
    }
    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;
    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;
    const shiftedMinX = minMax[0] - innerMargin;
    const shiftedMinY = minMax[1] - innerMargin;
    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);
    const lastPoint = [lastEdge[0], lastEdge[2]];
    for (const edge of this.#verticalEdges) {
      const [x, y1, y2] = edge;
      edge[0] = (x - shiftedMinX) / bboxWidth;
      edge[1] = (y1 - shiftedMinY) / bboxHeight;
      edge[2] = (y2 - shiftedMinY) / bboxHeight;
    }
    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);
    this.#lastPoint = lastPoint;
  }
  getOutlines() {
    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);
    const outlineVerticalEdges = [];
    for (const edge of this.#verticalEdges) {
      if (edge[3]) {
        outlineVerticalEdges.push(...this.#breakEdge(edge));
        this.#insert(edge);
      } else {
        this.#remove(edge);
        outlineVerticalEdges.push(...this.#breakEdge(edge));
      }
    }
    return this.#getOutlines(outlineVerticalEdges);
  }
  #getOutlines(outlineVerticalEdges) {
    const edges = [];
    const allEdges = /* @__PURE__ */ new Set();
    for (const edge of outlineVerticalEdges) {
      const [x, y1, y2] = edge;
      edges.push([x, y1, edge], [x, y2, edge]);
    }
    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);
    for (let i = 0, ii = edges.length; i < ii; i += 2) {
      const edge1 = edges[i][2];
      const edge2 = edges[i + 1][2];
      edge1.push(edge2);
      edge2.push(edge1);
      allEdges.add(edge1);
      allEdges.add(edge2);
    }
    const outlines = [];
    let outline;
    while (allEdges.size > 0) {
      const edge = allEdges.values().next().value;
      let [x, y1, y2, edge1, edge2] = edge;
      allEdges.delete(edge);
      let lastPointX = x;
      let lastPointY = y1;
      outline = [x, y2];
      outlines.push(outline);
      while (true) {
        let e;
        if (allEdges.has(edge1)) {
          e = edge1;
        } else if (allEdges.has(edge2)) {
          e = edge2;
        } else {
          break;
        }
        allEdges.delete(e);
        [x, y1, y2, edge1, edge2] = e;
        if (lastPointX !== x) {
          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);
          lastPointX = x;
        }
        lastPointY = lastPointY === y1 ? y2 : y1;
      }
      outline.push(lastPointX, lastPointY);
    }
    return new HighlightOutline(outlines, this.#box, this.#lastPoint);
  }
  #binarySearch(y) {
    const array = this.#intervals;
    let start = 0;
    let end = array.length - 1;
    while (start <= end) {
      const middle = start + end >> 1;
      const y1 = array[middle][0];
      if (y1 === y) {
        return middle;
      }
      if (y1 < y) {
        start = middle + 1;
      } else {
        end = middle - 1;
      }
    }
    return end + 1;
  }
  #insert([, y1, y2]) {
    const index = this.#binarySearch(y1);
    this.#intervals.splice(index, 0, [y1, y2]);
  }
  #remove([, y1, y2]) {
    const index = this.#binarySearch(y1);
    for (let i = index; i < this.#intervals.length; i++) {
      const [start, end] = this.#intervals[i];
      if (start !== y1) {
        break;
      }
      if (start === y1 && end === y2) {
        this.#intervals.splice(i, 1);
        return;
      }
    }
    for (let i = index - 1; i >= 0; i--) {
      const [start, end] = this.#intervals[i];
      if (start !== y1) {
        break;
      }
      if (start === y1 && end === y2) {
        this.#intervals.splice(i, 1);
        return;
      }
    }
  }
  #breakEdge(edge) {
    const [x, y1, y2] = edge;
    const results = [[x, y1, y2]];
    const index = this.#binarySearch(y2);
    for (let i = 0; i < index; i++) {
      const [start, end] = this.#intervals[i];
      for (let j = 0, jj = results.length; j < jj; j++) {
        const [, y3, y4] = results[j];
        if (end <= y3 || y4 <= start) {
          continue;
        }
        if (y3 >= start) {
          if (y4 > end) {
            results[j][1] = end;
          } else {
            if (jj === 1) {
              return [];
            }
            results.splice(j, 1);
            j--;
            jj--;
          }
          continue;
        }
        results[j][2] = start;
        if (y4 > end) {
          results.push([x, end, y4]);
        }
      }
    }
    return results;
  }
};
var HighlightOutline = class extends Outline {
  #box;
  #outlines;
  constructor(outlines, box, lastPoint) {
    super();
    this.#outlines = outlines;
    this.#box = box;
    this.lastPoint = lastPoint;
  }
  toSVGPath() {
    const buffer = [];
    for (const polygon of this.#outlines) {
      let [prevX, prevY] = polygon;
      buffer.push(`M${prevX} ${prevY}`);
      for (let i = 2; i < polygon.length; i += 2) {
        const x = polygon[i];
        const y = polygon[i + 1];
        if (x === prevX) {
          buffer.push(`V${y}`);
          prevY = y;
        } else if (y === prevY) {
          buffer.push(`H${x}`);
          prevX = x;
        }
      }
      buffer.push("Z");
    }
    return buffer.join(" ");
  }
  serialize([blX, blY, trX, trY], _rotation) {
    const outlines = [];
    const width = trX - blX;
    const height = trY - blY;
    for (const outline of this.#outlines) {
      const points = new Array(outline.length);
      for (let i = 0; i < outline.length; i += 2) {
        points[i] = blX + outline[i] * width;
        points[i + 1] = trY - outline[i + 1] * height;
      }
      outlines.push(points);
    }
    return outlines;
  }
  get box() {
    return this.#box;
  }
  get classNamesForOutlining() {
    return ["highlightOutline"];
  }
};
var FreeHighlightOutliner = class extends FreeDrawOutliner {
  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {
    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);
  }
};
var FreeHighlightOutline = class extends FreeDrawOutline {
  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {
    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);
  }
};
var ColorPicker = class _ColorPicker {
  #button = null;
  #buttonSwatch = null;
  #defaultColor;
  #dropdown = null;
  #dropdownWasFromKeyboard = false;
  #isMainColorPicker = false;
  #editor = null;
  #eventBus;
  #openDropdownAC = null;
  #uiManager = null;
  #type;
  static #l10nColor = null;
  static get _keyboardManager() {
    return shadow(this, "_keyboardManager", new KeyboardManager([[["Escape", "mac+Escape"], _ColorPicker.prototype._hideDropdownFromKeyboard], [[" ", "mac+ "], _ColorPicker.prototype._colorSelectFromKeyboard], [["ArrowDown", "ArrowRight", "mac+ArrowDown", "mac+ArrowRight"], _ColorPicker.prototype._moveToNext], [["ArrowUp", "ArrowLeft", "mac+ArrowUp", "mac+ArrowLeft"], _ColorPicker.prototype._moveToPrevious], [["Home", "mac+Home"], _ColorPicker.prototype._moveToBeginning], [["End", "mac+End"], _ColorPicker.prototype._moveToEnd]]));
  }
  constructor({
    editor = null,
    uiManager = null
  }) {
    if (editor) {
      this.#isMainColorPicker = false;
      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;
      this.#editor = editor;
    } else {
      this.#isMainColorPicker = true;
      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;
    }
    this.#uiManager = editor?._uiManager || uiManager;
    this.#eventBus = this.#uiManager._eventBus;
    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || "#FFFF98";
    _ColorPicker.#l10nColor ||= Object.freeze({
      blue: "pdfjs-editor-colorpicker-blue",
      green: "pdfjs-editor-colorpicker-green",
      pink: "pdfjs-editor-colorpicker-pink",
      red: "pdfjs-editor-colorpicker-red",
      yellow: "pdfjs-editor-colorpicker-yellow"
    });
  }
  renderButton() {
    const button = this.#button = document.createElement("button");
    button.className = "colorPicker";
    button.tabIndex = "0";
    button.setAttribute("data-l10n-id", "pdfjs-editor-colorpicker-button");
    button.setAttribute("aria-haspopup", true);
    const signal = this.#uiManager._signal;
    button.addEventListener("click", this.#openDropdown.bind(this), {
      signal
    });
    button.addEventListener("keydown", this.#keyDown.bind(this), {
      signal
    });
    const swatch = this.#buttonSwatch = document.createElement("span");
    swatch.className = "swatch";
    swatch.setAttribute("aria-hidden", true);
    swatch.style.backgroundColor = this.#defaultColor;
    button.append(swatch);
    return button;
  }
  renderMainDropdown() {
    const dropdown = this.#dropdown = this.#getDropdownRoot();
    dropdown.setAttribute("aria-orientation", "horizontal");
    dropdown.setAttribute("aria-labelledby", "highlightColorPickerLabel");
    return dropdown;
  }
  #getDropdownRoot() {
    const div = document.createElement("div");
    const signal = this.#uiManager._signal;
    div.addEventListener("contextmenu", noContextMenu, {
      signal
    });
    div.className = "dropdown";
    div.role = "listbox";
    div.setAttribute("aria-multiselectable", false);
    div.setAttribute("aria-orientation", "vertical");
    div.setAttribute("data-l10n-id", "pdfjs-editor-colorpicker-dropdown");
    for (const [name, color] of this.#uiManager.highlightColors) {
      const button = document.createElement("button");
      button.tabIndex = "0";
      button.role = "option";
      button.setAttribute("data-color", color);
      button.title = name;
      button.setAttribute("data-l10n-id", _ColorPicker.#l10nColor[name]);
      const swatch = document.createElement("span");
      button.append(swatch);
      swatch.className = "swatch";
      swatch.style.backgroundColor = color;
      button.setAttribute("aria-selected", color === this.#defaultColor);
      button.addEventListener("click", this.#colorSelect.bind(this, color), {
        signal
      });
      div.append(button);
    }
    div.addEventListener("keydown", this.#keyDown.bind(this), {
      signal
    });
    return div;
  }
  #colorSelect(color, event) {
    event.stopPropagation();
    this.#eventBus.dispatch("switchannotationeditorparams", {
      source: this,
      type: this.#type,
      value: color
    });
  }
  _colorSelectFromKeyboard(event) {
    if (event.target === this.#button) {
      this.#openDropdown(event);
      return;
    }
    const color = event.target.getAttribute("data-color");
    if (!color) {
      return;
    }
    this.#colorSelect(color, event);
  }
  _moveToNext(event) {
    if (!this.#isDropdownVisible) {
      this.#openDropdown(event);
      return;
    }
    if (event.target === this.#button) {
      this.#dropdown.firstChild?.focus();
      return;
    }
    event.target.nextSibling?.focus();
  }
  _moveToPrevious(event) {
    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {
      if (this.#isDropdownVisible) {
        this._hideDropdownFromKeyboard();
      }
      return;
    }
    if (!this.#isDropdownVisible) {
      this.#openDropdown(event);
    }
    event.target.previousSibling?.focus();
  }
  _moveToBeginning(event) {
    if (!this.#isDropdownVisible) {
      this.#openDropdown(event);
      return;
    }
    this.#dropdown.firstChild?.focus();
  }
  _moveToEnd(event) {
    if (!this.#isDropdownVisible) {
      this.#openDropdown(event);
      return;
    }
    this.#dropdown.lastChild?.focus();
  }
  #keyDown(event) {
    _ColorPicker._keyboardManager.exec(this, event);
  }
  #openDropdown(event) {
    if (this.#isDropdownVisible) {
      this.hideDropdown();
      return;
    }
    this.#dropdownWasFromKeyboard = event.detail === 0;
    if (!this.#openDropdownAC) {
      this.#openDropdownAC = new AbortController();
      window.addEventListener("pointerdown", this.#pointerDown.bind(this), {
        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)
      });
    }
    if (this.#dropdown) {
      this.#dropdown.classList.remove("hidden");
      return;
    }
    const root = this.#dropdown = this.#getDropdownRoot();
    this.#button.append(root);
  }
  #pointerDown(event) {
    if (this.#dropdown?.contains(event.target)) {
      return;
    }
    this.hideDropdown();
  }
  hideDropdown() {
    this.#dropdown?.classList.add("hidden");
    this.#openDropdownAC?.abort();
    this.#openDropdownAC = null;
  }
  get #isDropdownVisible() {
    return this.#dropdown && !this.#dropdown.classList.contains("hidden");
  }
  _hideDropdownFromKeyboard() {
    if (this.#isMainColorPicker) {
      return;
    }
    if (!this.#isDropdownVisible) {
      this.#editor?.unselect();
      return;
    }
    this.hideDropdown();
    this.#button.focus({
      preventScroll: true,
      focusVisible: this.#dropdownWasFromKeyboard
    });
  }
  updateColor(color) {
    if (this.#buttonSwatch) {
      this.#buttonSwatch.style.backgroundColor = color;
    }
    if (!this.#dropdown) {
      return;
    }
    const i = this.#uiManager.highlightColors.values();
    for (const child of this.#dropdown.children) {
      child.setAttribute("aria-selected", i.next().value === color);
    }
  }
  destroy() {
    this.#button?.remove();
    this.#button = null;
    this.#buttonSwatch = null;
    this.#dropdown?.remove();
    this.#dropdown = null;
  }
};
var HighlightEditor = class _HighlightEditor extends AnnotationEditor {
  #anchorNode = null;
  #anchorOffset = 0;
  #boxes;
  #clipPathId = null;
  #colorPicker = null;
  #focusOutlines = null;
  #focusNode = null;
  #focusOffset = 0;
  #highlightDiv = null;
  #highlightOutlines = null;
  #id = null;
  #isFreeHighlight = false;
  #lastPoint = null;
  #opacity;
  #outlineId = null;
  #text = "";
  #thickness;
  #methodOfCreation = "";
  static _defaultColor = null;
  static _defaultOpacity = 1;
  static _defaultThickness = 12;
  static _type = "highlight";
  static _editorType = AnnotationEditorType.HIGHLIGHT;
  static _freeHighlightId = -1;
  static _freeHighlight = null;
  static _freeHighlightClipId = "";
  static get _keyboardManager() {
    const proto = _HighlightEditor.prototype;
    return shadow(this, "_keyboardManager", new KeyboardManager([[["ArrowLeft", "mac+ArrowLeft"], proto._moveCaret, {
      args: [0]
    }], [["ArrowRight", "mac+ArrowRight"], proto._moveCaret, {
      args: [1]
    }], [["ArrowUp", "mac+ArrowUp"], proto._moveCaret, {
      args: [2]
    }], [["ArrowDown", "mac+ArrowDown"], proto._moveCaret, {
      args: [3]
    }]]));
  }
  constructor(params) {
    super({
      ...params,
      name: "highlightEditor"
    });
    this.color = params.color || _HighlightEditor._defaultColor;
    this.#thickness = params.thickness || _HighlightEditor._defaultThickness;
    this.#opacity = params.opacity || _HighlightEditor._defaultOpacity;
    this.#boxes = params.boxes || null;
    this.#methodOfCreation = params.methodOfCreation || "";
    this.#text = params.text || "";
    this._isDraggable = false;
    this.defaultL10nId = "pdfjs-editor-highlight-editor";
    if (params.highlightId > -1) {
      this.#isFreeHighlight = true;
      this.#createFreeOutlines(params);
      this.#addToDrawLayer();
    } else if (this.#boxes) {
      this.#anchorNode = params.anchorNode;
      this.#anchorOffset = params.anchorOffset;
      this.#focusNode = params.focusNode;
      this.#focusOffset = params.focusOffset;
      this.#createOutlines();
      this.#addToDrawLayer();
      this.rotate(this.rotation);
    }
  }
  get telemetryInitialData() {
    return {
      action: "added",
      type: this.#isFreeHighlight ? "free_highlight" : "highlight",
      color: this._uiManager.highlightColorNames.get(this.color),
      thickness: this.#thickness,
      methodOfCreation: this.#methodOfCreation
    };
  }
  get telemetryFinalData() {
    return {
      type: "highlight",
      color: this._uiManager.highlightColorNames.get(this.color)
    };
  }
  static computeTelemetryFinalData(data) {
    return {
      numberOfColors: data.get("color").size
    };
  }
  #createOutlines() {
    const outliner = new HighlightOutliner(this.#boxes, 1e-3);
    this.#highlightOutlines = outliner.getOutlines();
    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;
    const outlinerForOutline = new HighlightOutliner(this.#boxes, 25e-4, 1e-3, this._uiManager.direction === "ltr");
    this.#focusOutlines = outlinerForOutline.getOutlines();
    const {
      lastPoint
    } = this.#focusOutlines;
    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];
  }
  #createFreeOutlines({
    highlightOutlines,
    highlightId,
    clipPathId
  }) {
    this.#highlightOutlines = highlightOutlines;
    const extraThickness = 1.5;
    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 25e-4);
    if (highlightId >= 0) {
      this.#id = highlightId;
      this.#clipPathId = clipPathId;
      this.parent.drawLayer.finalizeDraw(highlightId, {
        bbox: highlightOutlines.box,
        path: {
          d: highlightOutlines.toSVGPath()
        }
      });
      this.#outlineId = this.parent.drawLayer.drawOutline({
        rootClass: {
          highlightOutline: true,
          free: true
        },
        bbox: this.#focusOutlines.box,
        path: {
          d: this.#focusOutlines.toSVGPath()
        }
      }, true);
    } else if (this.parent) {
      const angle = this.parent.viewport.rotation;
      this.parent.drawLayer.updateProperties(this.#id, {
        bbox: _HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),
        path: {
          d: highlightOutlines.toSVGPath()
        }
      });
      this.parent.drawLayer.updateProperties(this.#outlineId, {
        bbox: _HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),
        path: {
          d: this.#focusOutlines.toSVGPath()
        }
      });
    }
    const [x, y, width, height] = highlightOutlines.box;
    switch (this.rotation) {
      case 0:
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        break;
      case 90: {
        const [pageWidth, pageHeight] = this.parentDimensions;
        this.x = y;
        this.y = 1 - x;
        this.width = width * pageHeight / pageWidth;
        this.height = height * pageWidth / pageHeight;
        break;
      }
      case 180:
        this.x = 1 - x;
        this.y = 1 - y;
        this.width = width;
        this.height = height;
        break;
      case 270: {
        const [pageWidth, pageHeight] = this.parentDimensions;
        this.x = 1 - y;
        this.y = x;
        this.width = width * pageHeight / pageWidth;
        this.height = height * pageWidth / pageHeight;
        break;
      }
    }
    const {
      lastPoint
    } = this.#focusOutlines;
    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];
  }
  static initialize(l10n, uiManager) {
    AnnotationEditor.initialize(l10n, uiManager);
    _HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || "#fff066";
  }
  static updateDefaultParams(type, value) {
    switch (type) {
      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:
        _HighlightEditor._defaultColor = value;
        break;
      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:
        _HighlightEditor._defaultThickness = value;
        break;
    }
  }
  translateInPage(x, y) {
  }
  get toolbarPosition() {
    return this.#lastPoint;
  }
  updateParams(type, value) {
    switch (type) {
      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:
        this.#updateColor(value);
        break;
      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:
        this.#updateThickness(value);
        break;
    }
  }
  static get defaultPropertiesToUpdate() {
    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, _HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, _HighlightEditor._defaultThickness]];
  }
  get propertiesToUpdate() {
    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || _HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || _HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];
  }
  #updateColor(color) {
    const setColorAndOpacity = (col, opa) => {
      this.color = col;
      this.#opacity = opa;
      this.parent?.drawLayer.updateProperties(this.#id, {
        root: {
          fill: col,
          "fill-opacity": opa
        }
      });
      this.#colorPicker?.updateColor(col);
    };
    const savedColor = this.color;
    const savedOpacity = this.#opacity;
    this.addCommands({
      cmd: setColorAndOpacity.bind(this, color, _HighlightEditor._defaultOpacity),
      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),
      post: this._uiManager.updateUI.bind(this._uiManager, this),
      mustExec: true,
      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,
      overwriteIfSameType: true,
      keepUndo: true
    });
    this._reportTelemetry({
      action: "color_changed",
      color: this._uiManager.highlightColorNames.get(color)
    }, true);
  }
  #updateThickness(thickness) {
    const savedThickness = this.#thickness;
    const setThickness = (th) => {
      this.#thickness = th;
      this.#changeThickness(th);
    };
    this.addCommands({
      cmd: setThickness.bind(this, thickness),
      undo: setThickness.bind(this, savedThickness),
      post: this._uiManager.updateUI.bind(this._uiManager, this),
      mustExec: true,
      type: AnnotationEditorParamsType.INK_THICKNESS,
      overwriteIfSameType: true,
      keepUndo: true
    });
    this._reportTelemetry({
      action: "thickness_changed",
      thickness
    }, true);
  }
  async addEditToolbar() {
    const toolbar = await super.addEditToolbar();
    if (!toolbar) {
      return null;
    }
    if (this._uiManager.highlightColors) {
      this.#colorPicker = new ColorPicker({
        editor: this
      });
      toolbar.addColorPicker(this.#colorPicker);
    }
    return toolbar;
  }
  disableEditing() {
    super.disableEditing();
    this.div.classList.toggle("disabled", true);
  }
  enableEditing() {
    super.enableEditing();
    this.div.classList.toggle("disabled", false);
  }
  fixAndSetPosition() {
    return super.fixAndSetPosition(this.#getRotation());
  }
  getBaseTranslation() {
    return [0, 0];
  }
  getRect(tx, ty) {
    return super.getRect(tx, ty, this.#getRotation());
  }
  onceAdded(focus) {
    if (!this.annotationElementId) {
      this.parent.addUndoableEditor(this);
    }
    if (focus) {
      this.div.focus();
    }
  }
  remove() {
    this.#cleanDrawLayer();
    this._reportTelemetry({
      action: "deleted"
    });
    super.remove();
  }
  rebuild() {
    if (!this.parent) {
      return;
    }
    super.rebuild();
    if (this.div === null) {
      return;
    }
    this.#addToDrawLayer();
    if (!this.isAttachedToDOM) {
      this.parent.add(this);
    }
  }
  setParent(parent) {
    let mustBeSelected = false;
    if (this.parent && !parent) {
      this.#cleanDrawLayer();
    } else if (parent) {
      this.#addToDrawLayer(parent);
      mustBeSelected = !this.parent && this.div?.classList.contains("selectedEditor");
    }
    super.setParent(parent);
    this.show(this._isVisible);
    if (mustBeSelected) {
      this.select();
    }
  }
  #changeThickness(thickness) {
    if (!this.#isFreeHighlight) {
      return;
    }
    this.#createFreeOutlines({
      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)
    });
    this.fixAndSetPosition();
    const [parentWidth, parentHeight] = this.parentDimensions;
    this.setDims(this.width * parentWidth, this.height * parentHeight);
  }
  #cleanDrawLayer() {
    if (this.#id === null || !this.parent) {
      return;
    }
    this.parent.drawLayer.remove(this.#id);
    this.#id = null;
    this.parent.drawLayer.remove(this.#outlineId);
    this.#outlineId = null;
  }
  #addToDrawLayer(parent = this.parent) {
    if (this.#id !== null) {
      return;
    }
    ({
      id: this.#id,
      clipPathId: this.#clipPathId
    } = parent.drawLayer.draw({
      bbox: this.#highlightOutlines.box,
      root: {
        viewBox: "0 0 1 1",
        fill: this.color,
        "fill-opacity": this.#opacity
      },
      rootClass: {
        highlight: true,
        free: this.#isFreeHighlight
      },
      path: {
        d: this.#highlightOutlines.toSVGPath()
      }
    }, false, true));
    this.#outlineId = parent.drawLayer.drawOutline({
      rootClass: {
        highlightOutline: true,
        free: this.#isFreeHighlight
      },
      bbox: this.#focusOutlines.box,
      path: {
        d: this.#focusOutlines.toSVGPath()
      }
    }, this.#isFreeHighlight);
    if (this.#highlightDiv) {
      this.#highlightDiv.style.clipPath = this.#clipPathId;
    }
  }
  static #rotateBbox([x, y, width, height], angle) {
    switch (angle) {
      case 90:
        return [1 - y - height, x, height, width];
      case 180:
        return [1 - x - width, 1 - y - height, width, height];
      case 270:
        return [y, 1 - x - width, height, width];
    }
    return [x, y, width, height];
  }
  rotate(angle) {
    const {
      drawLayer
    } = this.parent;
    let box;
    if (this.#isFreeHighlight) {
      angle = (angle - this.rotation + 360) % 360;
      box = _HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);
    } else {
      box = _HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);
    }
    drawLayer.updateProperties(this.#id, {
      bbox: box,
      root: {
        "data-main-rotation": angle
      }
    });
    drawLayer.updateProperties(this.#outlineId, {
      bbox: _HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),
      root: {
        "data-main-rotation": angle
      }
    });
  }
  render() {
    if (this.div) {
      return this.div;
    }
    const div = super.render();
    if (this.#text) {
      div.setAttribute("aria-label", this.#text);
      div.setAttribute("role", "mark");
    }
    if (this.#isFreeHighlight) {
      div.classList.add("free");
    } else {
      this.div.addEventListener("keydown", this.#keydown.bind(this), {
        signal: this._uiManager._signal
      });
    }
    const highlightDiv = this.#highlightDiv = document.createElement("div");
    div.append(highlightDiv);
    highlightDiv.setAttribute("aria-hidden", "true");
    highlightDiv.className = "internal";
    highlightDiv.style.clipPath = this.#clipPathId;
    const [parentWidth, parentHeight] = this.parentDimensions;
    this.setDims(this.width * parentWidth, this.height * parentHeight);
    bindEvents(this, this.#highlightDiv, ["pointerover", "pointerleave"]);
    this.enableEditing();
    return div;
  }
  pointerover() {
    if (!this.isSelected) {
      this.parent?.drawLayer.updateProperties(this.#outlineId, {
        rootClass: {
          hovered: true
        }
      });
    }
  }
  pointerleave() {
    if (!this.isSelected) {
      this.parent?.drawLayer.updateProperties(this.#outlineId, {
        rootClass: {
          hovered: false
        }
      });
    }
  }
  #keydown(event) {
    _HighlightEditor._keyboardManager.exec(this, event);
  }
  _moveCaret(direction) {
    this.parent.unselect(this);
    switch (direction) {
      case 0:
      case 2:
        this.#setCaret(true);
        break;
      case 1:
      case 3:
        this.#setCaret(false);
        break;
    }
  }
  #setCaret(start) {
    if (!this.#anchorNode) {
      return;
    }
    const selection = window.getSelection();
    if (start) {
      selection.setPosition(this.#anchorNode, this.#anchorOffset);
    } else {
      selection.setPosition(this.#focusNode, this.#focusOffset);
    }
  }
  select() {
    super.select();
    if (!this.#outlineId) {
      return;
    }
    this.parent?.drawLayer.updateProperties(this.#outlineId, {
      rootClass: {
        hovered: false,
        selected: true
      }
    });
  }
  unselect() {
    super.unselect();
    if (!this.#outlineId) {
      return;
    }
    this.parent?.drawLayer.updateProperties(this.#outlineId, {
      rootClass: {
        selected: false
      }
    });
    if (!this.#isFreeHighlight) {
      this.#setCaret(false);
    }
  }
  get _mustFixPosition() {
    return !this.#isFreeHighlight;
  }
  show(visible = this._isVisible) {
    super.show(visible);
    if (this.parent) {
      this.parent.drawLayer.updateProperties(this.#id, {
        rootClass: {
          hidden: !visible
        }
      });
      this.parent.drawLayer.updateProperties(this.#outlineId, {
        rootClass: {
          hidden: !visible
        }
      });
    }
  }
  #getRotation() {
    return this.#isFreeHighlight ? this.rotation : 0;
  }
  #serializeBoxes() {
    if (this.#isFreeHighlight) {
      return null;
    }
    const [pageWidth, pageHeight] = this.pageDimensions;
    const [pageX, pageY] = this.pageTranslation;
    const boxes = this.#boxes;
    const quadPoints = new Float32Array(boxes.length * 8);
    let i = 0;
    for (const {
      x,
      y,
      width,
      height
    } of boxes) {
      const sx = x * pageWidth + pageX;
      const sy = (1 - y) * pageHeight + pageY;
      quadPoints[i] = quadPoints[i + 4] = sx;
      quadPoints[i + 1] = quadPoints[i + 3] = sy;
      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;
      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;
      i += 8;
    }
    return quadPoints;
  }
  #serializeOutlines(rect) {
    return this.#highlightOutlines.serialize(rect, this.#getRotation());
  }
  static startHighlighting(parent, isLTR, {
    target: textLayer,
    x,
    y
  }) {
    const {
      x: layerX,
      y: layerY,
      width: parentWidth,
      height: parentHeight
    } = textLayer.getBoundingClientRect();
    const ac = new AbortController();
    const signal = parent.combinedSignal(ac);
    const pointerUpCallback = (e) => {
      ac.abort();
      this.#endHighlight(parent, e);
    };
    window.addEventListener("blur", pointerUpCallback, {
      signal
    });
    window.addEventListener("pointerup", pointerUpCallback, {
      signal
    });
    window.addEventListener("pointerdown", stopEvent, {
      capture: true,
      passive: false,
      signal
    });
    window.addEventListener("contextmenu", noContextMenu, {
      signal
    });
    textLayer.addEventListener("pointermove", this.#highlightMove.bind(this, parent), {
      signal
    });
    this._freeHighlight = new FreeHighlightOutliner({
      x,
      y
    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 1e-3);
    ({
      id: this._freeHighlightId,
      clipPathId: this._freeHighlightClipId
    } = parent.drawLayer.draw({
      bbox: [0, 0, 1, 1],
      root: {
        viewBox: "0 0 1 1",
        fill: this._defaultColor,
        "fill-opacity": this._defaultOpacity
      },
      rootClass: {
        highlight: true,
        free: true
      },
      path: {
        d: this._freeHighlight.toSVGPath()
      }
    }, true, true));
  }
  static #highlightMove(parent, event) {
    if (this._freeHighlight.add(event)) {
      parent.drawLayer.updateProperties(this._freeHighlightId, {
        path: {
          d: this._freeHighlight.toSVGPath()
        }
      });
    }
  }
  static #endHighlight(parent, event) {
    if (!this._freeHighlight.isEmpty()) {
      parent.createAndAddNewEditor(event, false, {
        highlightId: this._freeHighlightId,
        highlightOutlines: this._freeHighlight.getOutlines(),
        clipPathId: this._freeHighlightClipId,
        methodOfCreation: "main_toolbar"
      });
    } else {
      parent.drawLayer.remove(this._freeHighlightId);
    }
    this._freeHighlightId = -1;
    this._freeHighlight = null;
    this._freeHighlightClipId = "";
  }
  static async deserialize(data, parent, uiManager) {
    let initialData = null;
    if (data instanceof HighlightAnnotationElement) {
      const {
        data: {
          quadPoints: quadPoints2,
          rect,
          rotation,
          id,
          color: color2,
          opacity: opacity2,
          popupRef
        },
        parent: {
          page: {
            pageNumber
          }
        }
      } = data;
      initialData = data = {
        annotationType: AnnotationEditorType.HIGHLIGHT,
        color: Array.from(color2),
        opacity: opacity2,
        quadPoints: quadPoints2,
        boxes: null,
        pageIndex: pageNumber - 1,
        rect: rect.slice(0),
        rotation,
        id,
        deleted: false,
        popupRef
      };
    } else if (data instanceof InkAnnotationElement) {
      const {
        data: {
          inkLists: inkLists2,
          rect,
          rotation,
          id,
          color: color2,
          borderStyle: {
            rawWidth: thickness
          },
          popupRef
        },
        parent: {
          page: {
            pageNumber
          }
        }
      } = data;
      initialData = data = {
        annotationType: AnnotationEditorType.HIGHLIGHT,
        color: Array.from(color2),
        thickness,
        inkLists: inkLists2,
        boxes: null,
        pageIndex: pageNumber - 1,
        rect: rect.slice(0),
        rotation,
        id,
        deleted: false,
        popupRef
      };
    }
    const {
      color,
      quadPoints,
      inkLists,
      opacity
    } = data;
    const editor = await super.deserialize(data, parent, uiManager);
    editor.color = Util.makeHexColor(...color);
    editor.#opacity = opacity || 1;
    if (inkLists) {
      editor.#thickness = data.thickness;
    }
    editor.annotationElementId = data.id || null;
    editor._initialData = initialData;
    const [pageWidth, pageHeight] = editor.pageDimensions;
    const [pageX, pageY] = editor.pageTranslation;
    if (quadPoints) {
      const boxes = editor.#boxes = [];
      for (let i = 0; i < quadPoints.length; i += 8) {
        boxes.push({
          x: (quadPoints[i] - pageX) / pageWidth,
          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,
          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,
          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight
        });
      }
      editor.#createOutlines();
      editor.#addToDrawLayer();
      editor.rotate(editor.rotation);
    } else if (inkLists) {
      editor.#isFreeHighlight = true;
      const points = inkLists[0];
      const point = {
        x: points[0] - pageX,
        y: pageHeight - (points[1] - pageY)
      };
      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 1e-3);
      for (let i = 0, ii = points.length; i < ii; i += 2) {
        point.x = points[i] - pageX;
        point.y = pageHeight - (points[i + 1] - pageY);
        outliner.add(point);
      }
      const {
        id,
        clipPathId
      } = parent.drawLayer.draw({
        bbox: [0, 0, 1, 1],
        root: {
          viewBox: "0 0 1 1",
          fill: editor.color,
          "fill-opacity": editor._defaultOpacity
        },
        rootClass: {
          highlight: true,
          free: true
        },
        path: {
          d: outliner.toSVGPath()
        }
      }, true, true);
      editor.#createFreeOutlines({
        highlightOutlines: outliner.getOutlines(),
        highlightId: id,
        clipPathId
      });
      editor.#addToDrawLayer();
      editor.rotate(editor.parentRotation);
    }
    return editor;
  }
  serialize(isForCopying = false) {
    if (this.isEmpty() || isForCopying) {
      return null;
    }
    if (this.deleted) {
      return this.serializeDeleted();
    }
    const rect = this.getRect(0, 0);
    const color = AnnotationEditor._colorManager.convert(this.color);
    const serialized = {
      annotationType: AnnotationEditorType.HIGHLIGHT,
      color,
      opacity: this.#opacity,
      thickness: this.#thickness,
      quadPoints: this.#serializeBoxes(),
      outlines: this.#serializeOutlines(rect),
      pageIndex: this.pageIndex,
      rect,
      rotation: this.#getRotation(),
      structTreeParentId: this._structTreeParentId
    };
    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {
      return null;
    }
    serialized.id = this.annotationElementId;
    return serialized;
  }
  #hasElementChanged(serialized) {
    const {
      color
    } = this._initialData;
    return serialized.color.some((c, i) => c !== color[i]);
  }
  renderAnnotationElement(annotation) {
    annotation.updateEdited({
      rect: this.getRect(0, 0)
    });
    return null;
  }
  static canCreateNewEmptyEditor() {
    return false;
  }
};
var DrawingOptions = class {
  #svgProperties = /* @__PURE__ */ Object.create(null);
  updateProperty(name, value) {
    this[name] = value;
    this.updateSVGProperty(name, value);
  }
  updateProperties(properties) {
    if (!properties) {
      return;
    }
    for (const [name, value] of Object.entries(properties)) {
      if (!name.startsWith("_")) {
        this.updateProperty(name, value);
      }
    }
  }
  updateSVGProperty(name, value) {
    this.#svgProperties[name] = value;
  }
  toSVGProperties() {
    const root = this.#svgProperties;
    this.#svgProperties = /* @__PURE__ */ Object.create(null);
    return {
      root
    };
  }
  reset() {
    this.#svgProperties = /* @__PURE__ */ Object.create(null);
  }
  updateAll(options = this) {
    this.updateProperties(options);
  }
  clone() {
    unreachable("Not implemented");
  }
};
var DrawingEditor = class _DrawingEditor extends AnnotationEditor {
  #drawOutlines = null;
  #mustBeCommitted;
  _drawId = null;
  static _currentDrawId = -1;
  static _currentParent = null;
  static #currentDraw = null;
  static #currentDrawingAC = null;
  static #currentDrawingOptions = null;
  static #currentPointerId = NaN;
  static #currentPointerType = null;
  static #currentPointerIds = null;
  static #currentMoveTimestamp = NaN;
  static _INNER_MARGIN = 3;
  constructor(params) {
    super(params);
    this.#mustBeCommitted = params.mustBeCommitted || false;
    this._addOutlines(params);
  }
  _addOutlines(params) {
    if (params.drawOutlines) {
      this.#createDrawOutlines(params);
      this.#addToDrawLayer();
    }
  }
  #createDrawOutlines({
    drawOutlines,
    drawId,
    drawingOptions
  }) {
    this.#drawOutlines = drawOutlines;
    this._drawingOptions ||= drawingOptions;
    if (drawId >= 0) {
      this._drawId = drawId;
      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);
    } else {
      this._drawId = this.#createDrawing(drawOutlines, this.parent);
    }
    this.#updateBbox(drawOutlines.box);
  }
  #createDrawing(drawOutlines, parent) {
    const {
      id
    } = parent.drawLayer.draw(_DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);
    return id;
  }
  static _mergeSVGProperties(p1, p2) {
    const p1Keys = new Set(Object.keys(p1));
    for (const [key, value] of Object.entries(p2)) {
      if (p1Keys.has(key)) {
        Object.assign(p1[key], value);
      } else {
        p1[key] = value;
      }
    }
    return p1;
  }
  static getDefaultDrawingOptions(_options) {
    unreachable("Not implemented");
  }
  static get typesMap() {
    unreachable("Not implemented");
  }
  static get isDrawer() {
    return true;
  }
  static get supportMultipleDrawings() {
    return false;
  }
  static updateDefaultParams(type, value) {
    const propertyName = this.typesMap.get(type);
    if (propertyName) {
      this._defaultDrawingOptions.updateProperty(propertyName, value);
    }
    if (this._currentParent) {
      _DrawingEditor.#currentDraw.updateProperty(propertyName, value);
      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());
    }
  }
  updateParams(type, value) {
    const propertyName = this.constructor.typesMap.get(type);
    if (propertyName) {
      this._updateProperty(type, propertyName, value);
    }
  }
  static get defaultPropertiesToUpdate() {
    const properties = [];
    const options = this._defaultDrawingOptions;
    for (const [type, name] of this.typesMap) {
      properties.push([type, options[name]]);
    }
    return properties;
  }
  get propertiesToUpdate() {
    const properties = [];
    const {
      _drawingOptions
    } = this;
    for (const [type, name] of this.constructor.typesMap) {
      properties.push([type, _drawingOptions[name]]);
    }
    return properties;
  }
  _updateProperty(type, name, value) {
    const options = this._drawingOptions;
    const savedValue = options[name];
    const setter = (val) => {
      options.updateProperty(name, val);
      const bbox = this.#drawOutlines.updateProperty(name, val);
      if (bbox) {
        this.#updateBbox(bbox);
      }
      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());
    };
    this.addCommands({
      cmd: setter.bind(this, value),
      undo: setter.bind(this, savedValue),
      post: this._uiManager.updateUI.bind(this._uiManager, this),
      mustExec: true,
      type,
      overwriteIfSameType: true,
      keepUndo: true
    });
  }
  _onResizing() {
    this.parent?.drawLayer.updateProperties(this._drawId, _DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {
      bbox: this.#rotateBox()
    }));
  }
  _onResized() {
    this.parent?.drawLayer.updateProperties(this._drawId, _DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {
      bbox: this.#rotateBox()
    }));
  }
  _onTranslating(_x, _y) {
    this.parent?.drawLayer.updateProperties(this._drawId, {
      bbox: this.#rotateBox()
    });
  }
  _onTranslated() {
    this.parent?.drawLayer.updateProperties(this._drawId, _DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {
      bbox: this.#rotateBox()
    }));
  }
  _onStartDragging() {
    this.parent?.drawLayer.updateProperties(this._drawId, {
      rootClass: {
        moving: true
      }
    });
  }
  _onStopDragging() {
    this.parent?.drawLayer.updateProperties(this._drawId, {
      rootClass: {
        moving: false
      }
    });
  }
  commit() {
    super.commit();
    this.disableEditMode();
    this.disableEditing();
  }
  disableEditing() {
    super.disableEditing();
    this.div.classList.toggle("disabled", true);
  }
  enableEditing() {
    super.enableEditing();
    this.div.classList.toggle("disabled", false);
  }
  getBaseTranslation() {
    return [0, 0];
  }
  get isResizable() {
    return true;
  }
  onceAdded(focus) {
    if (!this.annotationElementId) {
      this.parent.addUndoableEditor(this);
    }
    this._isDraggable = true;
    if (this.#mustBeCommitted) {
      this.#mustBeCommitted = false;
      this.commit();
      this.parent.setSelected(this);
      if (focus && this.isOnScreen) {
        this.div.focus();
      }
    }
  }
  remove() {
    this.#cleanDrawLayer();
    super.remove();
  }
  rebuild() {
    if (!this.parent) {
      return;
    }
    super.rebuild();
    if (this.div === null) {
      return;
    }
    this.#addToDrawLayer();
    this.#updateBbox(this.#drawOutlines.box);
    if (!this.isAttachedToDOM) {
      this.parent.add(this);
    }
  }
  setParent(parent) {
    let mustBeSelected = false;
    if (this.parent && !parent) {
      this._uiManager.removeShouldRescale(this);
      this.#cleanDrawLayer();
    } else if (parent) {
      this._uiManager.addShouldRescale(this);
      this.#addToDrawLayer(parent);
      mustBeSelected = !this.parent && this.div?.classList.contains("selectedEditor");
    }
    super.setParent(parent);
    if (mustBeSelected) {
      this.select();
    }
  }
  #cleanDrawLayer() {
    if (this._drawId === null || !this.parent) {
      return;
    }
    this.parent.drawLayer.remove(this._drawId);
    this._drawId = null;
    this._drawingOptions.reset();
  }
  #addToDrawLayer(parent = this.parent) {
    if (this._drawId !== null && this.parent === parent) {
      return;
    }
    if (this._drawId !== null) {
      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);
      return;
    }
    this._drawingOptions.updateAll();
    this._drawId = this.#createDrawing(this.#drawOutlines, parent);
  }
  #convertToParentSpace([x, y, width, height]) {
    const {
      parentDimensions: [pW, pH],
      rotation
    } = this;
    switch (rotation) {
      case 90:
        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];
      case 180:
        return [1 - x, 1 - y, width, height];
      case 270:
        return [1 - y, x, width * (pH / pW), height * (pW / pH)];
      default:
        return [x, y, width, height];
    }
  }
  #convertToDrawSpace() {
    const {
      x,
      y,
      width,
      height,
      parentDimensions: [pW, pH],
      rotation
    } = this;
    switch (rotation) {
      case 90:
        return [1 - y, x, width * (pW / pH), height * (pH / pW)];
      case 180:
        return [1 - x, 1 - y, width, height];
      case 270:
        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];
      default:
        return [x, y, width, height];
    }
  }
  #updateBbox(bbox) {
    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);
    if (this.div) {
      this.fixAndSetPosition();
      const [parentWidth, parentHeight] = this.parentDimensions;
      this.setDims(this.width * parentWidth, this.height * parentHeight);
    }
    this._onResized();
  }
  #rotateBox() {
    const {
      x,
      y,
      width,
      height,
      rotation,
      parentRotation,
      parentDimensions: [pW, pH]
    } = this;
    switch ((rotation * 4 + parentRotation) / 90) {
      case 1:
        return [1 - y - height, x, height, width];
      case 2:
        return [1 - x - width, 1 - y - height, width, height];
      case 3:
        return [y, 1 - x - width, height, width];
      case 4:
        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];
      case 5:
        return [1 - y, x, width * (pW / pH), height * (pH / pW)];
      case 6:
        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];
      case 7:
        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];
      case 8:
        return [x - width, y - height, width, height];
      case 9:
        return [1 - y, x - width, height, width];
      case 10:
        return [1 - x, 1 - y, width, height];
      case 11:
        return [y - height, 1 - x, height, width];
      case 12:
        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];
      case 13:
        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];
      case 14:
        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];
      case 15:
        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];
      default:
        return [x, y, width, height];
    }
  }
  rotate() {
    if (!this.parent) {
      return;
    }
    this.parent.drawLayer.updateProperties(this._drawId, _DrawingEditor._mergeSVGProperties({
      bbox: this.#rotateBox()
    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));
  }
  onScaleChanging() {
    if (!this.parent) {
      return;
    }
    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));
  }
  static onScaleChangingWhenDrawing() {
  }
  render() {
    if (this.div) {
      return this.div;
    }
    let baseX, baseY;
    if (this._isCopy) {
      baseX = this.x;
      baseY = this.y;
    }
    const div = super.render();
    div.classList.add("draw");
    const drawDiv = document.createElement("div");
    div.append(drawDiv);
    drawDiv.setAttribute("aria-hidden", "true");
    drawDiv.className = "internal";
    const [parentWidth, parentHeight] = this.parentDimensions;
    this.setDims(this.width * parentWidth, this.height * parentHeight);
    this._uiManager.addShouldRescale(this);
    this.disableEditing();
    if (this._isCopy) {
      this._moveAfterPaste(baseX, baseY);
    }
    return div;
  }
  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {
    unreachable("Not implemented");
  }
  static startDrawing(parent, uiManager, _isLTR, event) {
    const {
      target,
      offsetX: x,
      offsetY: y,
      pointerId,
      pointerType
    } = event;
    if (_DrawingEditor.#currentPointerType && _DrawingEditor.#currentPointerType !== pointerType) {
      return;
    }
    const {
      viewport: {
        rotation
      }
    } = parent;
    const {
      width: parentWidth,
      height: parentHeight
    } = target.getBoundingClientRect();
    const ac = _DrawingEditor.#currentDrawingAC = new AbortController();
    const signal = parent.combinedSignal(ac);
    _DrawingEditor.#currentPointerId ||= pointerId;
    _DrawingEditor.#currentPointerType ??= pointerType;
    window.addEventListener("pointerup", (e) => {
      if (_DrawingEditor.#currentPointerId === e.pointerId) {
        this._endDraw(e);
      } else {
        _DrawingEditor.#currentPointerIds?.delete(e.pointerId);
      }
    }, {
      signal
    });
    window.addEventListener("pointercancel", (e) => {
      if (_DrawingEditor.#currentPointerId === e.pointerId) {
        this._currentParent.endDrawingSession();
      } else {
        _DrawingEditor.#currentPointerIds?.delete(e.pointerId);
      }
    }, {
      signal
    });
    window.addEventListener("pointerdown", (e) => {
      if (_DrawingEditor.#currentPointerType !== e.pointerType) {
        return;
      }
      (_DrawingEditor.#currentPointerIds ||= /* @__PURE__ */ new Set()).add(e.pointerId);
      if (_DrawingEditor.#currentDraw.isCancellable()) {
        _DrawingEditor.#currentDraw.removeLastElement();
        if (_DrawingEditor.#currentDraw.isEmpty()) {
          this._currentParent.endDrawingSession(true);
        } else {
          this._endDraw(null);
        }
      }
    }, {
      capture: true,
      passive: false,
      signal
    });
    window.addEventListener("contextmenu", noContextMenu, {
      signal
    });
    target.addEventListener("pointermove", this._drawMove.bind(this), {
      signal
    });
    target.addEventListener("touchmove", (e) => {
      if (e.timeStamp === _DrawingEditor.#currentMoveTimestamp) {
        stopEvent(e);
      }
    }, {
      signal
    });
    parent.toggleDrawing();
    uiManager._editorUndoBar?.hide();
    if (_DrawingEditor.#currentDraw) {
      parent.drawLayer.updateProperties(this._currentDrawId, _DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));
      return;
    }
    uiManager.updateUIForDefaultProperties(this);
    _DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);
    _DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();
    this._currentParent = parent;
    ({
      id: this._currentDrawId
    } = parent.drawLayer.draw(this._mergeSVGProperties(_DrawingEditor.#currentDrawingOptions.toSVGProperties(), _DrawingEditor.#currentDraw.defaultSVGProperties), true, false));
  }
  static _drawMove(event) {
    _DrawingEditor.#currentMoveTimestamp = -1;
    if (!_DrawingEditor.#currentDraw) {
      return;
    }
    const {
      offsetX,
      offsetY,
      pointerId
    } = event;
    if (_DrawingEditor.#currentPointerId !== pointerId) {
      return;
    }
    if (_DrawingEditor.#currentPointerIds?.size >= 1) {
      this._endDraw(event);
      return;
    }
    this._currentParent.drawLayer.updateProperties(this._currentDrawId, _DrawingEditor.#currentDraw.add(offsetX, offsetY));
    _DrawingEditor.#currentMoveTimestamp = event.timeStamp;
    stopEvent(event);
  }
  static _cleanup(all) {
    if (all) {
      this._currentDrawId = -1;
      this._currentParent = null;
      _DrawingEditor.#currentDraw = null;
      _DrawingEditor.#currentDrawingOptions = null;
      _DrawingEditor.#currentPointerType = null;
      _DrawingEditor.#currentMoveTimestamp = NaN;
    }
    if (_DrawingEditor.#currentDrawingAC) {
      _DrawingEditor.#currentDrawingAC.abort();
      _DrawingEditor.#currentDrawingAC = null;
      _DrawingEditor.#currentPointerId = NaN;
      _DrawingEditor.#currentPointerIds = null;
    }
  }
  static _endDraw(event) {
    const parent = this._currentParent;
    if (!parent) {
      return;
    }
    parent.toggleDrawing(true);
    this._cleanup(false);
    if (event?.target === parent.div) {
      parent.drawLayer.updateProperties(this._currentDrawId, _DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));
    }
    if (this.supportMultipleDrawings) {
      const draw = _DrawingEditor.#currentDraw;
      const drawId = this._currentDrawId;
      const lastElement = draw.getLastElement();
      parent.addCommands({
        cmd: () => {
          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));
        },
        undo: () => {
          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());
        },
        mustExec: false,
        type: AnnotationEditorParamsType.DRAW_STEP
      });
      return;
    }
    this.endDrawing(false);
  }
  static endDrawing(isAborted) {
    const parent = this._currentParent;
    if (!parent) {
      return null;
    }
    parent.toggleDrawing(true);
    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);
    if (!_DrawingEditor.#currentDraw.isEmpty()) {
      const {
        pageDimensions: [pageWidth, pageHeight],
        scale
      } = parent;
      const editor = parent.createAndAddNewEditor({
        offsetX: 0,
        offsetY: 0
      }, false, {
        drawId: this._currentDrawId,
        drawOutlines: _DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),
        drawingOptions: _DrawingEditor.#currentDrawingOptions,
        mustBeCommitted: !isAborted
      });
      this._cleanup(true);
      return editor;
    }
    parent.drawLayer.remove(this._currentDrawId);
    this._cleanup(true);
    return null;
  }
  createDrawingOptions(_data) {
  }
  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {
    unreachable("Not implemented");
  }
  static async deserialize(data, parent, uiManager) {
    const {
      rawDims: {
        pageWidth,
        pageHeight,
        pageX,
        pageY
      }
    } = parent.viewport;
    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);
    const editor = await super.deserialize(data, parent, uiManager);
    editor.createDrawingOptions(data);
    editor.#createDrawOutlines({
      drawOutlines
    });
    editor.#addToDrawLayer();
    editor.onScaleChanging();
    editor.rotate();
    return editor;
  }
  serializeDraw(isForCopying) {
    const [pageX, pageY] = this.pageTranslation;
    const [pageWidth, pageHeight] = this.pageDimensions;
    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);
  }
  renderAnnotationElement(annotation) {
    annotation.updateEdited({
      rect: this.getRect(0, 0)
    });
    return null;
  }
  static canCreateNewEmptyEditor() {
    return false;
  }
};
var InkDrawOutliner = class {
  #last = new Float64Array(6);
  #line;
  #lines;
  #rotation;
  #thickness;
  #points;
  #lastSVGPath = "";
  #lastIndex = 0;
  #outlines = new InkDrawOutline();
  #parentWidth;
  #parentHeight;
  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {
    this.#parentWidth = parentWidth;
    this.#parentHeight = parentHeight;
    this.#rotation = rotation;
    this.#thickness = thickness;
    [x, y] = this.#normalizePoint(x, y);
    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];
    this.#points = [x, y];
    this.#lines = [{
      line,
      points: this.#points
    }];
    this.#last.set(line, 0);
  }
  updateProperty(name, value) {
    if (name === "stroke-width") {
      this.#thickness = value;
    }
  }
  #normalizePoint(x, y) {
    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);
  }
  isEmpty() {
    return !this.#lines || this.#lines.length === 0;
  }
  isCancellable() {
    return this.#points.length <= 10;
  }
  add(x, y) {
    [x, y] = this.#normalizePoint(x, y);
    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);
    const diffX = x - x2;
    const diffY = y - y2;
    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);
    if (d <= 2) {
      return null;
    }
    this.#points.push(x, y);
    if (isNaN(x1)) {
      this.#last.set([x2, y2, x, y], 2);
      this.#line.push(NaN, NaN, NaN, NaN, x, y);
      return {
        path: {
          d: this.toSVGPath()
        }
      };
    }
    if (isNaN(this.#last[0])) {
      this.#line.splice(6, 6);
    }
    this.#last.set([x1, y1, x2, y2, x, y], 0);
    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));
    return {
      path: {
        d: this.toSVGPath()
      }
    };
  }
  end(x, y) {
    const change = this.add(x, y);
    if (change) {
      return change;
    }
    if (this.#points.length === 2) {
      return {
        path: {
          d: this.toSVGPath()
        }
      };
    }
    return null;
  }
  startNew(x, y, parentWidth, parentHeight, rotation) {
    this.#parentWidth = parentWidth;
    this.#parentHeight = parentHeight;
    this.#rotation = rotation;
    [x, y] = this.#normalizePoint(x, y);
    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];
    this.#points = [x, y];
    const last = this.#lines.at(-1);
    if (last) {
      last.line = new Float32Array(last.line);
      last.points = new Float32Array(last.points);
    }
    this.#lines.push({
      line,
      points: this.#points
    });
    this.#last.set(line, 0);
    this.#lastIndex = 0;
    this.toSVGPath();
    return null;
  }
  getLastElement() {
    return this.#lines.at(-1);
  }
  setLastElement(element) {
    if (!this.#lines) {
      return this.#outlines.setLastElement(element);
    }
    this.#lines.push(element);
    this.#line = element.line;
    this.#points = element.points;
    this.#lastIndex = 0;
    return {
      path: {
        d: this.toSVGPath()
      }
    };
  }
  removeLastElement() {
    if (!this.#lines) {
      return this.#outlines.removeLastElement();
    }
    this.#lines.pop();
    this.#lastSVGPath = "";
    for (let i = 0, ii = this.#lines.length; i < ii; i++) {
      const {
        line,
        points
      } = this.#lines[i];
      this.#line = line;
      this.#points = points;
      this.#lastIndex = 0;
      this.toSVGPath();
    }
    return {
      path: {
        d: this.#lastSVGPath
      }
    };
  }
  toSVGPath() {
    const firstX = Outline.svgRound(this.#line[4]);
    const firstY = Outline.svgRound(this.#line[5]);
    if (this.#points.length === 2) {
      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;
      return this.#lastSVGPath;
    }
    if (this.#points.length <= 6) {
      const i = this.#lastSVGPath.lastIndexOf("M");
      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;
      this.#lastIndex = 6;
    }
    if (this.#points.length === 4) {
      const secondX = Outline.svgRound(this.#line[10]);
      const secondY = Outline.svgRound(this.#line[11]);
      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;
      this.#lastIndex = 12;
      return this.#lastSVGPath;
    }
    const buffer = [];
    if (this.#lastIndex === 0) {
      buffer.push(`M ${firstX} ${firstY}`);
      this.#lastIndex = 6;
    }
    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {
      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);
      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);
    }
    this.#lastSVGPath += buffer.join(" ");
    this.#lastIndex = this.#line.length;
    return this.#lastSVGPath;
  }
  getOutlines(parentWidth, parentHeight, scale, innerMargin) {
    const last = this.#lines.at(-1);
    last.line = new Float32Array(last.line);
    last.points = new Float32Array(last.points);
    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);
    this.#last = null;
    this.#line = null;
    this.#lines = null;
    this.#lastSVGPath = null;
    return this.#outlines;
  }
  get defaultSVGProperties() {
    return {
      root: {
        viewBox: "0 0 10000 10000"
      },
      rootClass: {
        draw: true
      },
      bbox: [0, 0, 1, 1]
    };
  }
};
var InkDrawOutline = class extends Outline {
  #bbox;
  #currentRotation = 0;
  #innerMargin;
  #lines;
  #parentWidth;
  #parentHeight;
  #parentScale;
  #rotation;
  #thickness;
  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {
    this.#parentWidth = parentWidth;
    this.#parentHeight = parentHeight;
    this.#parentScale = parentScale;
    this.#rotation = rotation;
    this.#thickness = thickness;
    this.#innerMargin = innerMargin ?? 0;
    this.#lines = lines;
    this.#computeBbox();
  }
  get thickness() {
    return this.#thickness;
  }
  setLastElement(element) {
    this.#lines.push(element);
    return {
      path: {
        d: this.toSVGPath()
      }
    };
  }
  removeLastElement() {
    this.#lines.pop();
    return {
      path: {
        d: this.toSVGPath()
      }
    };
  }
  toSVGPath() {
    const buffer = [];
    for (const {
      line
    } of this.#lines) {
      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);
      if (line.length === 6) {
        buffer.push("Z");
        continue;
      }
      if (line.length === 12 && isNaN(line[6])) {
        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);
        continue;
      }
      for (let i = 6, ii = line.length; i < ii; i += 6) {
        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);
        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);
      }
    }
    return buffer.join("");
  }
  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {
    const serializedLines = [];
    const serializedPoints = [];
    const [x, y, width, height] = this.#getBBoxWithNoMargin();
    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;
    switch (this.#rotation) {
      case 0:
        rescaleFn = Outline._rescale;
        tx = pageX;
        ty = pageY + pageHeight;
        sx = pageWidth;
        sy = -pageHeight;
        x1 = pageX + x * pageWidth;
        y1 = pageY + (1 - y - height) * pageHeight;
        x2 = pageX + (x + width) * pageWidth;
        y2 = pageY + (1 - y) * pageHeight;
        break;
      case 90:
        rescaleFn = Outline._rescaleAndSwap;
        tx = pageX;
        ty = pageY;
        sx = pageWidth;
        sy = pageHeight;
        x1 = pageX + y * pageWidth;
        y1 = pageY + x * pageHeight;
        x2 = pageX + (y + height) * pageWidth;
        y2 = pageY + (x + width) * pageHeight;
        break;
      case 180:
        rescaleFn = Outline._rescale;
        tx = pageX + pageWidth;
        ty = pageY;
        sx = -pageWidth;
        sy = pageHeight;
        x1 = pageX + (1 - x - width) * pageWidth;
        y1 = pageY + y * pageHeight;
        x2 = pageX + (1 - x) * pageWidth;
        y2 = pageY + (y + height) * pageHeight;
        break;
      case 270:
        rescaleFn = Outline._rescaleAndSwap;
        tx = pageX + pageWidth;
        ty = pageY + pageHeight;
        sx = -pageWidth;
        sy = -pageHeight;
        x1 = pageX + (1 - y - height) * pageWidth;
        y1 = pageY + (1 - x - width) * pageHeight;
        x2 = pageX + (1 - y) * pageWidth;
        y2 = pageY + (1 - x) * pageHeight;
        break;
    }
    for (const {
      line,
      points
    } of this.#lines) {
      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));
      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));
    }
    return {
      lines: serializedLines,
      points: serializedPoints,
      rect: [x1, y1, x2, y2]
    };
  }
  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {
    paths: {
      lines,
      points
    },
    rotation,
    thickness
  }) {
    const newLines = [];
    let tx, ty, sx, sy, rescaleFn;
    switch (rotation) {
      case 0:
        rescaleFn = Outline._rescale;
        tx = -pageX / pageWidth;
        ty = pageY / pageHeight + 1;
        sx = 1 / pageWidth;
        sy = -1 / pageHeight;
        break;
      case 90:
        rescaleFn = Outline._rescaleAndSwap;
        tx = -pageY / pageHeight;
        ty = -pageX / pageWidth;
        sx = 1 / pageHeight;
        sy = 1 / pageWidth;
        break;
      case 180:
        rescaleFn = Outline._rescale;
        tx = pageX / pageWidth + 1;
        ty = -pageY / pageHeight;
        sx = -1 / pageWidth;
        sy = 1 / pageHeight;
        break;
      case 270:
        rescaleFn = Outline._rescaleAndSwap;
        tx = pageY / pageHeight + 1;
        ty = pageX / pageWidth + 1;
        sx = -1 / pageHeight;
        sy = -1 / pageWidth;
        break;
    }
    if (!lines) {
      lines = [];
      for (const point of points) {
        const len = point.length;
        if (len === 2) {
          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));
          continue;
        }
        if (len === 4) {
          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));
          continue;
        }
        const line = new Float32Array(3 * (len - 2));
        lines.push(line);
        let [x1, y1, x2, y2] = point.subarray(0, 4);
        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);
        for (let i = 4; i < len; i += 2) {
          const x = point[i];
          const y = point[i + 1];
          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);
          [x1, y1, x2, y2] = [x2, y2, x, y];
        }
      }
    }
    for (let i = 0, ii = lines.length; i < ii; i++) {
      newLines.push({
        line: rescaleFn(lines[i].map((x) => x ?? NaN), tx, ty, sx, sy),
        points: rescaleFn(points[i].map((x) => x ?? NaN), tx, ty, sx, sy)
      });
    }
    const outlines = new this.prototype.constructor();
    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);
    return outlines;
  }
  #getMarginComponents(thickness = this.#thickness) {
    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;
    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];
  }
  #getBBoxWithNoMargin() {
    const [x, y, width, height] = this.#bbox;
    const [marginX, marginY] = this.#getMarginComponents(0);
    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];
  }
  #computeBbox() {
    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);
    for (const {
      line
    } of this.#lines) {
      if (line.length <= 12) {
        for (let i = 4, ii = line.length; i < ii; i += 6) {
          Util.pointBoundingBox(line[i], line[i + 1], bbox);
        }
        continue;
      }
      let lastX = line[4], lastY = line[5];
      for (let i = 6, ii = line.length; i < ii; i += 6) {
        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);
        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);
        lastX = x;
        lastY = y;
      }
    }
    const [marginX, marginY] = this.#getMarginComponents();
    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);
    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);
    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);
    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);
    bbox[2] -= bbox[0];
    bbox[3] -= bbox[1];
  }
  get box() {
    return this.#bbox;
  }
  updateProperty(name, value) {
    if (name === "stroke-width") {
      return this.#updateThickness(value);
    }
    return null;
  }
  #updateThickness(thickness) {
    const [oldMarginX, oldMarginY] = this.#getMarginComponents();
    this.#thickness = thickness;
    const [newMarginX, newMarginY] = this.#getMarginComponents();
    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];
    const bbox = this.#bbox;
    bbox[0] -= diffMarginX;
    bbox[1] -= diffMarginY;
    bbox[2] += 2 * diffMarginX;
    bbox[3] += 2 * diffMarginY;
    return bbox;
  }
  updateParentDimensions([width, height], scale) {
    const [oldMarginX, oldMarginY] = this.#getMarginComponents();
    this.#parentWidth = width;
    this.#parentHeight = height;
    this.#parentScale = scale;
    const [newMarginX, newMarginY] = this.#getMarginComponents();
    const diffMarginX = newMarginX - oldMarginX;
    const diffMarginY = newMarginY - oldMarginY;
    const bbox = this.#bbox;
    bbox[0] -= diffMarginX;
    bbox[1] -= diffMarginY;
    bbox[2] += 2 * diffMarginX;
    bbox[3] += 2 * diffMarginY;
    return bbox;
  }
  updateRotation(rotation) {
    this.#currentRotation = rotation;
    return {
      path: {
        transform: this.rotationTransform
      }
    };
  }
  get viewBox() {
    return this.#bbox.map(Outline.svgRound).join(" ");
  }
  get defaultProperties() {
    const [x, y] = this.#bbox;
    return {
      root: {
        viewBox: this.viewBox
      },
      path: {
        "transform-origin": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`
      }
    };
  }
  get rotationTransform() {
    const [, , width, height] = this.#bbox;
    let a = 0, b = 0, c = 0, d = 0, e = 0, f = 0;
    switch (this.#currentRotation) {
      case 90:
        b = height / width;
        c = -width / height;
        e = width;
        break;
      case 180:
        a = -1;
        d = -1;
        e = width;
        f = height;
        break;
      case 270:
        b = -height / width;
        c = width / height;
        f = height;
        break;
      default:
        return "";
    }
    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;
  }
  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {
    const [marginX, marginY] = this.#getMarginComponents();
    const [x, y, width, height] = this.#bbox;
    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {
      const tx = newX + newWidth / 2 - (x + width / 2);
      const ty = newY + newHeight / 2 - (y + height / 2);
      return {
        path: {
          "transform-origin": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,
          transform: `${this.rotationTransform} translate(${tx} ${ty})`
        }
      };
    }
    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);
    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);
    const s2x = width / newWidth;
    const s2y = height / newHeight;
    return {
      path: {
        "transform-origin": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,
        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`
      }
    };
  }
  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {
    const [marginX, marginY] = this.#getMarginComponents();
    const bbox = this.#bbox;
    const [x, y, width, height] = bbox;
    bbox[0] = newX;
    bbox[1] = newY;
    bbox[2] = newWidth;
    bbox[3] = newHeight;
    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {
      const tx2 = newX + newWidth / 2 - (x + width / 2);
      const ty2 = newY + newHeight / 2 - (y + height / 2);
      for (const {
        line,
        points
      } of this.#lines) {
        Outline._translate(line, tx2, ty2, line);
        Outline._translate(points, tx2, ty2, points);
      }
      return {
        root: {
          viewBox: this.viewBox
        },
        path: {
          "transform-origin": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,
          transform: this.rotationTransform || null,
          d: this.toSVGPath()
        }
      };
    }
    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);
    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);
    const tx = -s1x * (x + marginX) + newX + marginX;
    const ty = -s1y * (y + marginY) + newY + marginY;
    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {
      for (const {
        line,
        points
      } of this.#lines) {
        Outline._rescale(line, tx, ty, s1x, s1y, line);
        Outline._rescale(points, tx, ty, s1x, s1y, points);
      }
    }
    return {
      root: {
        viewBox: this.viewBox
      },
      path: {
        "transform-origin": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,
        transform: this.rotationTransform || null,
        d: this.toSVGPath()
      }
    };
  }
  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {
    const [newParentWidth, newParentHeight] = parentDimensions;
    const bbox = this.#bbox;
    const tx = newX - bbox[0];
    const ty = newY - bbox[1];
    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {
      for (const {
        line,
        points
      } of this.#lines) {
        Outline._translate(line, tx, ty, line);
        Outline._translate(points, tx, ty, points);
      }
    } else {
      const sx = this.#parentWidth / newParentWidth;
      const sy = this.#parentHeight / newParentHeight;
      this.#parentWidth = newParentWidth;
      this.#parentHeight = newParentHeight;
      for (const {
        line,
        points
      } of this.#lines) {
        Outline._rescale(line, tx, ty, sx, sy, line);
        Outline._rescale(points, tx, ty, sx, sy, points);
      }
      bbox[2] *= sx;
      bbox[3] *= sy;
    }
    bbox[0] = newX;
    bbox[1] = newY;
    return {
      root: {
        viewBox: this.viewBox
      },
      path: {
        d: this.toSVGPath(),
        "transform-origin": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`
      }
    };
  }
  get defaultSVGProperties() {
    const bbox = this.#bbox;
    return {
      root: {
        viewBox: this.viewBox
      },
      rootClass: {
        draw: true
      },
      path: {
        d: this.toSVGPath(),
        "transform-origin": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,
        transform: this.rotationTransform || null
      },
      bbox
    };
  }
};
var InkDrawingOptions = class _InkDrawingOptions extends DrawingOptions {
  constructor(viewerParameters) {
    super();
    this._viewParameters = viewerParameters;
    super.updateProperties({
      fill: "none",
      stroke: AnnotationEditor._defaultLineColor,
      "stroke-opacity": 1,
      "stroke-width": 1,
      "stroke-linecap": "round",
      "stroke-linejoin": "round",
      "stroke-miterlimit": 10
    });
  }
  updateSVGProperty(name, value) {
    if (name === "stroke-width") {
      value ??= this["stroke-width"];
      value *= this._viewParameters.realScale;
    }
    super.updateSVGProperty(name, value);
  }
  clone() {
    const clone = new _InkDrawingOptions(this._viewParameters);
    clone.updateAll(this);
    return clone;
  }
};
var InkEditor = class _InkEditor extends DrawingEditor {
  static _type = "ink";
  static _editorType = AnnotationEditorType.INK;
  static _defaultDrawingOptions = null;
  constructor(params) {
    super({
      ...params,
      name: "inkEditor"
    });
    this._willKeepAspectRatio = true;
    this.defaultL10nId = "pdfjs-editor-ink-editor";
  }
  static initialize(l10n, uiManager) {
    AnnotationEditor.initialize(l10n, uiManager);
    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);
  }
  static getDefaultDrawingOptions(options) {
    const clone = this._defaultDrawingOptions.clone();
    clone.updateProperties(options);
    return clone;
  }
  static get supportMultipleDrawings() {
    return true;
  }
  static get typesMap() {
    return shadow(this, "typesMap", /* @__PURE__ */ new Map([[AnnotationEditorParamsType.INK_THICKNESS, "stroke-width"], [AnnotationEditorParamsType.INK_COLOR, "stroke"], [AnnotationEditorParamsType.INK_OPACITY, "stroke-opacity"]]));
  }
  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {
    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions["stroke-width"]);
  }
  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {
    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);
  }
  static async deserialize(data, parent, uiManager) {
    let initialData = null;
    if (data instanceof InkAnnotationElement) {
      const {
        data: {
          inkLists,
          rect,
          rotation,
          id,
          color,
          opacity,
          borderStyle: {
            rawWidth: thickness
          },
          popupRef
        },
        parent: {
          page: {
            pageNumber
          }
        }
      } = data;
      initialData = data = {
        annotationType: AnnotationEditorType.INK,
        color: Array.from(color),
        thickness,
        opacity,
        paths: {
          points: inkLists
        },
        boxes: null,
        pageIndex: pageNumber - 1,
        rect: rect.slice(0),
        rotation,
        id,
        deleted: false,
        popupRef
      };
    }
    const editor = await super.deserialize(data, parent, uiManager);
    editor.annotationElementId = data.id || null;
    editor._initialData = initialData;
    return editor;
  }
  onScaleChanging() {
    if (!this.parent) {
      return;
    }
    super.onScaleChanging();
    const {
      _drawId,
      _drawingOptions,
      parent
    } = this;
    _drawingOptions.updateSVGProperty("stroke-width");
    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());
  }
  static onScaleChangingWhenDrawing() {
    const parent = this._currentParent;
    if (!parent) {
      return;
    }
    super.onScaleChangingWhenDrawing();
    this._defaultDrawingOptions.updateSVGProperty("stroke-width");
    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());
  }
  createDrawingOptions({
    color,
    thickness,
    opacity
  }) {
    this._drawingOptions = _InkEditor.getDefaultDrawingOptions({
      stroke: Util.makeHexColor(...color),
      "stroke-width": thickness,
      "stroke-opacity": opacity
    });
  }
  serialize(isForCopying = false) {
    if (this.isEmpty()) {
      return null;
    }
    if (this.deleted) {
      return this.serializeDeleted();
    }
    const {
      lines,
      points,
      rect
    } = this.serializeDraw(isForCopying);
    const {
      _drawingOptions: {
        stroke,
        "stroke-opacity": opacity,
        "stroke-width": thickness
      }
    } = this;
    const serialized = {
      annotationType: AnnotationEditorType.INK,
      color: AnnotationEditor._colorManager.convert(stroke),
      opacity,
      thickness,
      paths: {
        lines,
        points
      },
      pageIndex: this.pageIndex,
      rect,
      rotation: this.rotation,
      structTreeParentId: this._structTreeParentId
    };
    if (isForCopying) {
      serialized.isCopy = true;
      return serialized;
    }
    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {
      return null;
    }
    serialized.id = this.annotationElementId;
    return serialized;
  }
  #hasElementChanged(serialized) {
    const {
      color,
      thickness,
      opacity,
      pageIndex
    } = this._initialData;
    return this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;
  }
  renderAnnotationElement(annotation) {
    const {
      points,
      rect
    } = this.serializeDraw(false);
    annotation.updateEdited({
      rect,
      thickness: this._drawingOptions["stroke-width"],
      points
    });
    return null;
  }
};
var ContourDrawOutline = class extends InkDrawOutline {
  toSVGPath() {
    let path = super.toSVGPath();
    if (!path.endsWith("Z")) {
      path += "Z";
    }
    return path;
  }
};
var BASE_HEADER_LENGTH = 8;
var POINTS_PROPERTIES_NUMBER = 3;
var SignatureExtractor = class {
  static #PARAMETERS = {
    maxDim: 512,
    sigmaSFactor: 0.02,
    sigmaR: 25,
    kernelSize: 16
  };
  static #neighborIndexToId(i0, j0, i, j) {
    i -= i0;
    j -= j0;
    if (i === 0) {
      return j > 0 ? 0 : 4;
    }
    if (i === 1) {
      return j + 6;
    }
    return 2 - j;
  }
  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);
  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {
    const id = this.#neighborIndexToId(i0, j0, i, j);
    for (let k = 0; k < 8; k++) {
      const kk = (-k + id - offset + 16) % 8;
      const shiftI = this.#neighborIdToIndex[2 * kk];
      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];
      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {
        return kk;
      }
    }
    return -1;
  }
  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {
    const id = this.#neighborIndexToId(i0, j0, i, j);
    for (let k = 0; k < 8; k++) {
      const kk = (k + id + offset + 16) % 8;
      const shiftI = this.#neighborIdToIndex[2 * kk];
      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];
      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {
        return kk;
      }
    }
    return -1;
  }
  static #findContours(buf, width, height, threshold) {
    const N = buf.length;
    const types = new Int32Array(N);
    for (let i = 0; i < N; i++) {
      types[i] = buf[i] <= threshold ? 1 : 0;
    }
    for (let i = 1; i < height - 1; i++) {
      types[i * width] = types[i * width + width - 1] = 0;
    }
    for (let i = 0; i < width; i++) {
      types[i] = types[width * height - 1 - i] = 0;
    }
    let nbd = 1;
    let lnbd;
    const contours = [];
    for (let i = 1; i < height - 1; i++) {
      lnbd = 1;
      for (let j = 1; j < width - 1; j++) {
        const ij = i * width + j;
        const pix = types[ij];
        if (pix === 0) {
          continue;
        }
        let i2 = i;
        let j2 = j;
        if (pix === 1 && types[ij - 1] === 0) {
          nbd += 1;
          j2 -= 1;
        } else if (pix >= 1 && types[ij + 1] === 0) {
          nbd += 1;
          j2 += 1;
          if (pix > 1) {
            lnbd = pix;
          }
        } else {
          if (pix !== 1) {
            lnbd = Math.abs(pix);
          }
          continue;
        }
        const points = [j, i];
        const isHole = j2 === j + 1;
        const contour = {
          isHole,
          points,
          id: nbd,
          parent: 0
        };
        contours.push(contour);
        let contour0;
        for (const c of contours) {
          if (c.id === lnbd) {
            contour0 = c;
            break;
          }
        }
        if (!contour0) {
          contour.parent = isHole ? lnbd : 0;
        } else if (contour0.isHole) {
          contour.parent = isHole ? contour0.parent : lnbd;
        } else {
          contour.parent = isHole ? lnbd : contour0.parent;
        }
        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);
        if (k === -1) {
          types[ij] = -nbd;
          if (types[ij] !== 1) {
            lnbd = Math.abs(types[ij]);
          }
          continue;
        }
        let shiftI = this.#neighborIdToIndex[2 * k];
        let shiftJ = this.#neighborIdToIndex[2 * k + 1];
        const i1 = i + shiftI;
        const j1 = j + shiftJ;
        i2 = i1;
        j2 = j1;
        let i3 = i;
        let j3 = j;
        while (true) {
          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);
          shiftI = this.#neighborIdToIndex[2 * kk];
          shiftJ = this.#neighborIdToIndex[2 * kk + 1];
          const i4 = i3 + shiftI;
          const j4 = j3 + shiftJ;
          points.push(j4, i4);
          const ij3 = i3 * width + j3;
          if (types[ij3 + 1] === 0) {
            types[ij3] = -nbd;
          } else if (types[ij3] === 1) {
            types[ij3] = nbd;
          }
          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {
            if (types[ij] !== 1) {
              lnbd = Math.abs(types[ij]);
            }
            break;
          } else {
            i2 = i3;
            j2 = j3;
            i3 = i4;
            j3 = j4;
          }
        }
      }
    }
    return contours;
  }
  static #douglasPeuckerHelper(points, start, end, output) {
    if (end - start <= 4) {
      for (let i = start; i < end - 2; i += 2) {
        output.push(points[i], points[i + 1]);
      }
      return;
    }
    const ax = points[start];
    const ay = points[start + 1];
    const abx = points[end - 4] - ax;
    const aby = points[end - 3] - ay;
    const dist = Math.hypot(abx, aby);
    const nabx = abx / dist;
    const naby = aby / dist;
    const aa = nabx * ay - naby * ax;
    const m = aby / abx;
    const invS = 1 / dist;
    const phi = Math.atan(m);
    const cosPhi = Math.cos(phi);
    const sinPhi = Math.sin(phi);
    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));
    const poly = invS * (1 - tmax + tmax ** 2);
    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));
    let dmax = 0;
    let index = start;
    for (let i = start + 2; i < end - 2; i += 2) {
      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);
      if (d > dmax) {
        index = i;
        dmax = d;
      }
    }
    if (dmax > (dist * partialPhi) ** 2) {
      this.#douglasPeuckerHelper(points, start, index + 2, output);
      this.#douglasPeuckerHelper(points, index, end, output);
    } else {
      output.push(ax, ay);
    }
  }
  static #douglasPeucker(points) {
    const output = [];
    const len = points.length;
    this.#douglasPeuckerHelper(points, 0, len, output);
    output.push(points[len - 2], points[len - 1]);
    return output.length <= 4 ? null : output;
  }
  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {
    const kernel = new Float32Array(kernelSize ** 2);
    const sigmaS2 = -2 * sigmaS ** 2;
    const halfSize = kernelSize >> 1;
    for (let i = 0; i < kernelSize; i++) {
      const x = (i - halfSize) ** 2;
      for (let j = 0; j < kernelSize; j++) {
        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);
      }
    }
    const rangeValues = new Float32Array(256);
    const sigmaR2 = -2 * sigmaR ** 2;
    for (let i = 0; i < 256; i++) {
      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);
    }
    const N = buf.length;
    const out = new Uint8Array(N);
    const histogram = new Uint32Array(256);
    for (let i = 0; i < height; i++) {
      for (let j = 0; j < width; j++) {
        const ij = i * width + j;
        const center = buf[ij];
        let sum = 0;
        let norm = 0;
        for (let k = 0; k < kernelSize; k++) {
          const y = i + k - halfSize;
          if (y < 0 || y >= height) {
            continue;
          }
          for (let l = 0; l < kernelSize; l++) {
            const x = j + l - halfSize;
            if (x < 0 || x >= width) {
              continue;
            }
            const neighbour = buf[y * width + x];
            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];
            sum += neighbour * w;
            norm += w;
          }
        }
        const pix = out[ij] = Math.round(sum / norm);
        histogram[pix]++;
      }
    }
    return [out, histogram];
  }
  static #getHistogram(buf) {
    const histogram = new Uint32Array(256);
    for (const g of buf) {
      histogram[g]++;
    }
    return histogram;
  }
  static #toUint8(buf) {
    const N = buf.length;
    const out = new Uint8ClampedArray(N >> 2);
    let max = -Infinity;
    let min = Infinity;
    for (let i = 0, ii = out.length; i < ii; i++) {
      const A = buf[(i << 2) + 3];
      if (A === 0) {
        max = out[i] = 255;
        continue;
      }
      const pix = out[i] = buf[i << 2];
      if (pix > max) {
        max = pix;
      }
      if (pix < min) {
        min = pix;
      }
    }
    const ratio = 255 / (max - min);
    for (let i = 0; i < N; i++) {
      out[i] = (out[i] - min) * ratio;
    }
    return out;
  }
  static #guessThreshold(histogram) {
    let i;
    let M = -Infinity;
    let L = -Infinity;
    const min = histogram.findIndex((v) => v !== 0);
    let pos = min;
    let spos = min;
    for (i = min; i < 256; i++) {
      const v = histogram[i];
      if (v > M) {
        if (i - pos > L) {
          L = i - pos;
          spos = i - 1;
        }
        M = v;
        pos = i;
      }
    }
    for (i = spos - 1; i >= 0; i--) {
      if (histogram[i] > histogram[i + 1]) {
        break;
      }
    }
    return i;
  }
  static #getGrayPixels(bitmap) {
    const originalBitmap = bitmap;
    const {
      width,
      height
    } = bitmap;
    const {
      maxDim
    } = this.#PARAMETERS;
    let newWidth = width;
    let newHeight = height;
    if (width > maxDim || height > maxDim) {
      let prevWidth = width;
      let prevHeight = height;
      let steps = Math.log2(Math.max(width, height) / maxDim);
      const isteps = Math.floor(steps);
      steps = steps === isteps ? isteps - 1 : isteps;
      for (let i = 0; i < steps; i++) {
        newWidth = prevWidth;
        newHeight = prevHeight;
        if (newWidth > maxDim) {
          newWidth = Math.ceil(newWidth / 2);
        }
        if (newHeight > maxDim) {
          newHeight = Math.ceil(newHeight / 2);
        }
        const offscreen2 = new OffscreenCanvas(newWidth, newHeight);
        const ctx2 = offscreen2.getContext("2d");
        ctx2.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);
        prevWidth = newWidth;
        prevHeight = newHeight;
        if (bitmap !== originalBitmap) {
          bitmap.close();
        }
        bitmap = offscreen2.transferToImageBitmap();
      }
      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);
      newWidth = Math.round(newWidth * ratio);
      newHeight = Math.round(newHeight * ratio);
    }
    const offscreen = new OffscreenCanvas(newWidth, newHeight);
    const ctx = offscreen.getContext("2d", {
      willReadFrequently: true
    });
    ctx.filter = "grayscale(1)";
    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);
    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;
    const uint8Buf = this.#toUint8(grayImage);
    return [uint8Buf, newWidth, newHeight];
  }
  static extractContoursFromText(text, {
    fontFamily,
    fontStyle,
    fontWeight
  }, pageWidth, pageHeight, rotation, innerMargin) {
    let canvas2 = new OffscreenCanvas(1, 1);
    let ctx = canvas2.getContext("2d", {
      alpha: false
    });
    const fontSize = 200;
    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;
    const {
      actualBoundingBoxLeft,
      actualBoundingBoxRight,
      actualBoundingBoxAscent,
      actualBoundingBoxDescent,
      fontBoundingBoxAscent,
      fontBoundingBoxDescent,
      width
    } = ctx.measureText(text);
    const SCALE = 1.5;
    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);
    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);
    canvas2 = new OffscreenCanvas(canvasWidth, canvasHeight);
    ctx = canvas2.getContext("2d", {
      alpha: true,
      willReadFrequently: true
    });
    ctx.font = font;
    ctx.filter = "grayscale(1)";
    ctx.fillStyle = "white";
    ctx.fillRect(0, 0, canvasWidth, canvasHeight);
    ctx.fillStyle = "black";
    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);
    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);
    const histogram = this.#getHistogram(uint8Buf);
    const threshold = this.#guessThreshold(histogram);
    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);
    return this.processDrawnLines({
      lines: {
        curves: contourList,
        width: canvasWidth,
        height: canvasHeight
      },
      pageWidth,
      pageHeight,
      rotation,
      innerMargin,
      mustSmooth: true,
      areContours: true
    });
  }
  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {
    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);
    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);
    const threshold = this.#guessThreshold(histogram);
    const contourList = this.#findContours(buffer, width, height, threshold);
    return this.processDrawnLines({
      lines: {
        curves: contourList,
        width,
        height
      },
      pageWidth,
      pageHeight,
      rotation,
      innerMargin,
      mustSmooth: true,
      areContours: true
    });
  }
  static processDrawnLines({
    lines,
    pageWidth,
    pageHeight,
    rotation,
    innerMargin,
    mustSmooth,
    areContours
  }) {
    if (rotation % 180 !== 0) {
      [pageWidth, pageHeight] = [pageHeight, pageWidth];
    }
    const {
      curves,
      width,
      height
    } = lines;
    const thickness = lines.thickness ?? 0;
    const linesAndPoints = [];
    const ratio = Math.min(pageWidth / width, pageHeight / height);
    const xScale = ratio / pageWidth;
    const yScale = ratio / pageHeight;
    const newCurves = [];
    for (const {
      points
    } of curves) {
      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;
      if (!reducedPoints) {
        continue;
      }
      newCurves.push(reducedPoints);
      const len = reducedPoints.length;
      const newPoints = new Float32Array(len);
      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));
      linesAndPoints.push({
        line,
        points: newPoints
      });
      if (len === 2) {
        newPoints[0] = reducedPoints[0] * xScale;
        newPoints[1] = reducedPoints[1] * yScale;
        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);
        continue;
      }
      let [x1, y1, x2, y2] = reducedPoints;
      x1 *= xScale;
      y1 *= yScale;
      x2 *= xScale;
      y2 *= yScale;
      newPoints.set([x1, y1, x2, y2], 0);
      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);
      for (let i = 4; i < len; i += 2) {
        const x = newPoints[i] = reducedPoints[i] * xScale;
        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;
        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);
        [x1, y1, x2, y2] = [x2, y2, x, y];
      }
    }
    if (linesAndPoints.length === 0) {
      return null;
    }
    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();
    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);
    return {
      outline,
      newCurves,
      areContours,
      thickness,
      width,
      height
    };
  }
  static async compressSignature({
    outlines,
    areContours,
    thickness,
    width,
    height
  }) {
    let minDiff = Infinity;
    let maxDiff = -Infinity;
    let outlinesLength = 0;
    for (const points of outlines) {
      outlinesLength += points.length;
      for (let i = 2, ii = points.length; i < ii; i++) {
        const dx = points[i] - points[i - 2];
        minDiff = Math.min(minDiff, dx);
        maxDiff = Math.max(maxDiff, dx);
      }
    }
    let bufferType;
    if (minDiff >= -128 && maxDiff <= 127) {
      bufferType = Int8Array;
    } else if (minDiff >= -32768 && maxDiff <= 32767) {
      bufferType = Int16Array;
    } else {
      bufferType = Int32Array;
    }
    const len = outlines.length;
    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;
    const header = new Uint32Array(headerLength);
    let offset = 0;
    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;
    header[offset++] = 0;
    header[offset++] = width;
    header[offset++] = height;
    header[offset++] = areContours ? 0 : 1;
    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));
    header[offset++] = len;
    header[offset++] = bufferType.BYTES_PER_ELEMENT;
    for (const points of outlines) {
      header[offset++] = points.length - 2;
      header[offset++] = points[0];
      header[offset++] = points[1];
    }
    const cs = new CompressionStream("deflate-raw");
    const writer = cs.writable.getWriter();
    await writer.ready;
    writer.write(header);
    const BufferCtor = bufferType.prototype.constructor;
    for (const points of outlines) {
      const diffs = new BufferCtor(points.length - 2);
      for (let i = 2, ii = points.length; i < ii; i++) {
        diffs[i - 2] = points[i] - points[i - 2];
      }
      writer.write(diffs);
    }
    writer.close();
    const buf = await new Response(cs.readable).arrayBuffer();
    const bytes = new Uint8Array(buf);
    return toBase64Util(bytes);
  }
  static async decompressSignature(signatureData) {
    try {
      const bytes = fromBase64Util(signatureData);
      const {
        readable,
        writable
      } = new DecompressionStream("deflate-raw");
      const writer = writable.getWriter();
      await writer.ready;
      writer.write(bytes).then(async () => {
        await writer.ready;
        await writer.close();
      }).catch(() => {
      });
      let data = null;
      let offset = 0;
      for await (const chunk of readable) {
        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);
        data.set(chunk, offset);
        offset += chunk.length;
      }
      const header = new Uint32Array(data.buffer, 0, data.length >> 2);
      const version2 = header[1];
      if (version2 !== 0) {
        throw new Error(`Invalid version: ${version2}`);
      }
      const width = header[2];
      const height = header[3];
      const areContours = header[4] === 0;
      const thickness = header[5];
      const numberOfDrawings = header[6];
      const bufferType = header[7];
      const outlines = [];
      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;
      let diffs;
      switch (bufferType) {
        case Int8Array.BYTES_PER_ELEMENT:
          diffs = new Int8Array(data.buffer, diffsOffset);
          break;
        case Int16Array.BYTES_PER_ELEMENT:
          diffs = new Int16Array(data.buffer, diffsOffset);
          break;
        case Int32Array.BYTES_PER_ELEMENT:
          diffs = new Int32Array(data.buffer, diffsOffset);
          break;
      }
      offset = 0;
      for (let i = 0; i < numberOfDrawings; i++) {
        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];
        const points = new Float32Array(len + 2);
        outlines.push(points);
        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {
          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];
        }
        for (let j = 0; j < len; j++) {
          points[j + 2] = points[j] + diffs[offset++];
        }
      }
      return {
        areContours,
        thickness,
        outlines,
        width,
        height
      };
    } catch (e) {
      warn(`decompressSignature: ${e}`);
      return null;
    }
  }
};
var SignatureOptions = class _SignatureOptions extends DrawingOptions {
  constructor() {
    super();
    super.updateProperties({
      fill: "CanvasText",
      "stroke-width": 0
    });
  }
  clone() {
    const clone = new _SignatureOptions();
    clone.updateAll(this);
    return clone;
  }
};
var DrawnSignatureOptions = class _DrawnSignatureOptions extends InkDrawingOptions {
  constructor(viewerParameters) {
    super(viewerParameters);
    super.updateProperties({
      stroke: "CanvasText",
      "stroke-width": 1
    });
  }
  clone() {
    const clone = new _DrawnSignatureOptions(this._viewParameters);
    clone.updateAll(this);
    return clone;
  }
};
var SignatureEditor = class _SignatureEditor extends DrawingEditor {
  #isExtracted = false;
  #description = null;
  #signatureData = null;
  #signatureUUID = null;
  static _type = "signature";
  static _editorType = AnnotationEditorType.SIGNATURE;
  static _defaultDrawingOptions = null;
  constructor(params) {
    super({
      ...params,
      mustBeCommitted: true,
      name: "signatureEditor"
    });
    this._willKeepAspectRatio = true;
    this.#signatureData = params.signatureData || null;
    this.#description = null;
    this.defaultL10nId = "pdfjs-editor-signature-editor1";
  }
  static initialize(l10n, uiManager) {
    AnnotationEditor.initialize(l10n, uiManager);
    this._defaultDrawingOptions = new SignatureOptions();
    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);
  }
  static getDefaultDrawingOptions(options) {
    const clone = this._defaultDrawingOptions.clone();
    clone.updateProperties(options);
    return clone;
  }
  static get supportMultipleDrawings() {
    return false;
  }
  static get typesMap() {
    return shadow(this, "typesMap", /* @__PURE__ */ new Map());
  }
  static get isDrawer() {
    return false;
  }
  get telemetryFinalData() {
    return {
      type: "signature",
      hasDescription: !!this.#description
    };
  }
  static computeTelemetryFinalData(data) {
    const hasDescriptionStats = data.get("hasDescription");
    return {
      hasAltText: hasDescriptionStats.get(true) ?? 0,
      hasNoAltText: hasDescriptionStats.get(false) ?? 0
    };
  }
  get isResizable() {
    return true;
  }
  onScaleChanging() {
    if (this._drawId === null) {
      return;
    }
    super.onScaleChanging();
  }
  render() {
    if (this.div) {
      return this.div;
    }
    let baseX, baseY;
    const {
      _isCopy
    } = this;
    if (_isCopy) {
      this._isCopy = false;
      baseX = this.x;
      baseY = this.y;
    }
    super.render();
    if (this._drawId === null) {
      if (this.#signatureData) {
        const {
          lines,
          mustSmooth,
          areContours,
          description,
          uuid,
          heightInPage
        } = this.#signatureData;
        const {
          rawDims: {
            pageWidth,
            pageHeight
          },
          rotation
        } = this.parent.viewport;
        const outline = SignatureExtractor.processDrawnLines({
          lines,
          pageWidth,
          pageHeight,
          rotation,
          innerMargin: _SignatureEditor._INNER_MARGIN,
          mustSmooth,
          areContours
        });
        this.addSignature(outline, heightInPage, description, uuid);
      } else {
        this.div.setAttribute("data-l10n-args", JSON.stringify({
          description: ""
        }));
        this.div.hidden = true;
        this._uiManager.getSignature(this);
      }
    }
    if (_isCopy) {
      this._isCopy = true;
      this._moveAfterPaste(baseX, baseY);
    }
    return this.div;
  }
  setUuid(uuid) {
    this.#signatureUUID = uuid;
    this.addEditToolbar();
  }
  getUuid() {
    return this.#signatureUUID;
  }
  get description() {
    return this.#description;
  }
  set description(description) {
    this.#description = description;
    super.addEditToolbar().then((toolbar) => {
      toolbar?.updateEditSignatureButton(description);
    });
  }
  getSignaturePreview() {
    const {
      newCurves,
      areContours,
      thickness,
      width,
      height
    } = this.#signatureData;
    const maxDim = Math.max(width, height);
    const outlineData = SignatureExtractor.processDrawnLines({
      lines: {
        curves: newCurves.map((points) => ({
          points
        })),
        thickness,
        width,
        height
      },
      pageWidth: maxDim,
      pageHeight: maxDim,
      rotation: 0,
      innerMargin: 0,
      mustSmooth: false,
      areContours
    });
    return {
      areContours,
      outline: outlineData.outline
    };
  }
  async addEditToolbar() {
    const toolbar = await super.addEditToolbar();
    if (!toolbar) {
      return null;
    }
    if (this._uiManager.signatureManager && this.#description !== null) {
      await toolbar.addEditSignatureButton(this._uiManager.signatureManager, this.#signatureUUID, this.#description);
      toolbar.show();
    }
    return toolbar;
  }
  addSignature(data, heightInPage, description, uuid) {
    const {
      x: savedX,
      y: savedY
    } = this;
    const {
      outline
    } = this.#signatureData = data;
    this.#isExtracted = outline instanceof ContourDrawOutline;
    this.#description = description;
    this.div.setAttribute("data-l10n-args", JSON.stringify({
      description
    }));
    let drawingOptions;
    if (this.#isExtracted) {
      drawingOptions = _SignatureEditor.getDefaultDrawingOptions();
    } else {
      drawingOptions = _SignatureEditor._defaultDrawnSignatureOptions.clone();
      drawingOptions.updateProperties({
        "stroke-width": outline.thickness
      });
    }
    this._addOutlines({
      drawOutlines: outline,
      drawingOptions
    });
    const [parentWidth, parentHeight] = this.parentDimensions;
    const [, pageHeight] = this.pageDimensions;
    let newHeight = heightInPage / pageHeight;
    newHeight = newHeight >= 1 ? 0.5 : newHeight;
    this.width *= newHeight / this.height;
    if (this.width >= 1) {
      newHeight *= 0.9 / this.width;
      this.width = 0.9;
    }
    this.height = newHeight;
    this.setDims(parentWidth * this.width, parentHeight * this.height);
    this.x = savedX;
    this.y = savedY;
    this.center();
    this._onResized();
    this.onScaleChanging();
    this.rotate();
    this._uiManager.addToAnnotationStorage(this);
    this.setUuid(uuid);
    this._reportTelemetry({
      action: "pdfjs.signature.inserted",
      data: {
        hasBeenSaved: !!uuid,
        hasDescription: !!description
      }
    });
    this.div.hidden = false;
  }
  getFromImage(bitmap) {
    const {
      rawDims: {
        pageWidth,
        pageHeight
      },
      rotation
    } = this.parent.viewport;
    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, _SignatureEditor._INNER_MARGIN);
  }
  getFromText(text, fontInfo) {
    const {
      rawDims: {
        pageWidth,
        pageHeight
      },
      rotation
    } = this.parent.viewport;
    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, _SignatureEditor._INNER_MARGIN);
  }
  getDrawnSignature(curves) {
    const {
      rawDims: {
        pageWidth,
        pageHeight
      },
      rotation
    } = this.parent.viewport;
    return SignatureExtractor.processDrawnLines({
      lines: curves,
      pageWidth,
      pageHeight,
      rotation,
      innerMargin: _SignatureEditor._INNER_MARGIN,
      mustSmooth: false,
      areContours: false
    });
  }
  createDrawingOptions({
    areContours,
    thickness
  }) {
    if (areContours) {
      this._drawingOptions = _SignatureEditor.getDefaultDrawingOptions();
    } else {
      this._drawingOptions = _SignatureEditor._defaultDrawnSignatureOptions.clone();
      this._drawingOptions.updateProperties({
        "stroke-width": thickness
      });
    }
  }
  serialize(isForCopying = false) {
    if (this.isEmpty()) {
      return null;
    }
    const {
      lines,
      points,
      rect
    } = this.serializeDraw(isForCopying);
    const {
      _drawingOptions: {
        "stroke-width": thickness
      }
    } = this;
    const serialized = {
      annotationType: AnnotationEditorType.SIGNATURE,
      isSignature: true,
      areContours: this.#isExtracted,
      color: [0, 0, 0],
      thickness: this.#isExtracted ? 0 : thickness,
      pageIndex: this.pageIndex,
      rect,
      rotation: this.rotation,
      structTreeParentId: this._structTreeParentId
    };
    if (isForCopying) {
      serialized.paths = {
        lines,
        points
      };
      serialized.uuid = this.#signatureUUID;
      serialized.isCopy = true;
    } else {
      serialized.lines = lines;
    }
    if (this.#description) {
      serialized.accessibilityData = {
        type: "Figure",
        alt: this.#description
      };
    }
    return serialized;
  }
  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {
    if (data.areContours) {
      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);
    }
    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);
  }
  static async deserialize(data, parent, uiManager) {
    const editor = await super.deserialize(data, parent, uiManager);
    editor.#isExtracted = data.areContours;
    editor.#description = data.accessibilityData?.alt || "";
    editor.#signatureUUID = data.uuid;
    return editor;
  }
};
var StampEditor = class extends AnnotationEditor {
  #bitmap = null;
  #bitmapId = null;
  #bitmapPromise = null;
  #bitmapUrl = null;
  #bitmapFile = null;
  #bitmapFileName = "";
  #canvas = null;
  #missingCanvas = false;
  #resizeTimeoutId = null;
  #isSvg = false;
  #hasBeenAddedInUndoStack = false;
  static _type = "stamp";
  static _editorType = AnnotationEditorType.STAMP;
  constructor(params) {
    super({
      ...params,
      name: "stampEditor"
    });
    this.#bitmapUrl = params.bitmapUrl;
    this.#bitmapFile = params.bitmapFile;
    this.defaultL10nId = "pdfjs-editor-stamp-editor";
  }
  static initialize(l10n, uiManager) {
    AnnotationEditor.initialize(l10n, uiManager);
  }
  static isHandlingMimeForPasting(mime) {
    return SupportedImageMimeTypes.includes(mime);
  }
  static paste(item, parent) {
    parent.pasteEditor(AnnotationEditorType.STAMP, {
      bitmapFile: item.getAsFile()
    });
  }
  altTextFinish() {
    if (this._uiManager.useNewAltTextFlow) {
      this.div.hidden = false;
    }
    super.altTextFinish();
  }
  get telemetryFinalData() {
    return {
      type: "stamp",
      hasAltText: !!this.altTextData?.altText
    };
  }
  static computeTelemetryFinalData(data) {
    const hasAltTextStats = data.get("hasAltText");
    return {
      hasAltText: hasAltTextStats.get(true) ?? 0,
      hasNoAltText: hasAltTextStats.get(false) ?? 0
    };
  }
  #getBitmapFetched(data, fromId = false) {
    if (!data) {
      this.remove();
      return;
    }
    this.#bitmap = data.bitmap;
    if (!fromId) {
      this.#bitmapId = data.id;
      this.#isSvg = data.isSvg;
    }
    if (data.file) {
      this.#bitmapFileName = data.file.name;
    }
    this.#createCanvas();
  }
  #getBitmapDone() {
    this.#bitmapPromise = null;
    this._uiManager.enableWaiting(false);
    if (!this.#canvas) {
      return;
    }
    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {
      this._editToolbar.hide();
      this._uiManager.editAltText(this, true);
      return;
    }
    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {
      this._reportTelemetry({
        action: "pdfjs.image.image_added",
        data: {
          alt_text_modal: false,
          alt_text_type: "empty"
        }
      });
      try {
        this.mlGuessAltText();
      } catch {
      }
    }
    this.div.focus();
  }
  async mlGuessAltText(imageData = null, updateAltTextData = true) {
    if (this.hasAltTextData()) {
      return null;
    }
    const {
      mlManager
    } = this._uiManager;
    if (!mlManager) {
      throw new Error("No ML.");
    }
    if (!await mlManager.isEnabledFor("altText")) {
      throw new Error("ML isn't enabled for alt text.");
    }
    const {
      data,
      width,
      height
    } = imageData || this.copyCanvas(null, null, true).imageData;
    const response = await mlManager.guess({
      name: "altText",
      request: {
        data,
        width,
        height,
        channels: data.length / (width * height)
      }
    });
    if (!response) {
      throw new Error("No response from the AI service.");
    }
    if (response.error) {
      throw new Error("Error from the AI service.");
    }
    if (response.cancel) {
      return null;
    }
    if (!response.output) {
      throw new Error("No valid response from the AI service.");
    }
    const altText = response.output;
    await this.setGuessedAltText(altText);
    if (updateAltTextData && !this.hasAltTextData()) {
      this.altTextData = {
        alt: altText,
        decorative: false
      };
    }
    return altText;
  }
  #getBitmap() {
    if (this.#bitmapId) {
      this._uiManager.enableWaiting(true);
      this._uiManager.imageManager.getFromId(this.#bitmapId).then((data) => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());
      return;
    }
    if (this.#bitmapUrl) {
      const url = this.#bitmapUrl;
      this.#bitmapUrl = null;
      this._uiManager.enableWaiting(true);
      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then((data) => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());
      return;
    }
    if (this.#bitmapFile) {
      const file = this.#bitmapFile;
      this.#bitmapFile = null;
      this._uiManager.enableWaiting(true);
      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then((data) => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());
      return;
    }
    const input = document.createElement("input");
    input.type = "file";
    input.accept = SupportedImageMimeTypes.join(",");
    const signal = this._uiManager._signal;
    this.#bitmapPromise = new Promise((resolve) => {
      input.addEventListener("change", async () => {
        if (!input.files || input.files.length === 0) {
          this.remove();
        } else {
          this._uiManager.enableWaiting(true);
          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);
          this._reportTelemetry({
            action: "pdfjs.image.image_selected",
            data: {
              alt_text_modal: this._uiManager.useNewAltTextFlow
            }
          });
          this.#getBitmapFetched(data);
        }
        resolve();
      }, {
        signal
      });
      input.addEventListener("cancel", () => {
        this.remove();
        resolve();
      }, {
        signal
      });
    }).finally(() => this.#getBitmapDone());
    input.click();
  }
  remove() {
    if (this.#bitmapId) {
      this.#bitmap = null;
      this._uiManager.imageManager.deleteId(this.#bitmapId);
      this.#canvas?.remove();
      this.#canvas = null;
      if (this.#resizeTimeoutId) {
        clearTimeout(this.#resizeTimeoutId);
        this.#resizeTimeoutId = null;
      }
    }
    super.remove();
  }
  rebuild() {
    if (!this.parent) {
      if (this.#bitmapId) {
        this.#getBitmap();
      }
      return;
    }
    super.rebuild();
    if (this.div === null) {
      return;
    }
    if (this.#bitmapId && this.#canvas === null) {
      this.#getBitmap();
    }
    if (!this.isAttachedToDOM) {
      this.parent.add(this);
    }
  }
  onceAdded(focus) {
    this._isDraggable = true;
    if (focus) {
      this.div.focus();
    }
  }
  isEmpty() {
    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);
  }
  get isResizable() {
    return true;
  }
  render() {
    if (this.div) {
      return this.div;
    }
    let baseX, baseY;
    if (this._isCopy) {
      baseX = this.x;
      baseY = this.y;
    }
    super.render();
    this.div.hidden = true;
    this.addAltTextButton();
    if (!this.#missingCanvas) {
      if (this.#bitmap) {
        this.#createCanvas();
      } else {
        this.#getBitmap();
      }
    }
    if (this._isCopy) {
      this._moveAfterPaste(baseX, baseY);
    }
    this._uiManager.addShouldRescale(this);
    return this.div;
  }
  setCanvas(annotationElementId, canvas2) {
    const {
      id: bitmapId,
      bitmap
    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas2);
    canvas2.remove();
    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {
      this.#bitmapId = bitmapId;
      if (bitmap) {
        this.#bitmap = bitmap;
      }
      this.#missingCanvas = false;
      this.#createCanvas();
    }
  }
  _onResized() {
    this.onScaleChanging();
  }
  onScaleChanging() {
    if (!this.parent) {
      return;
    }
    if (this.#resizeTimeoutId !== null) {
      clearTimeout(this.#resizeTimeoutId);
    }
    const TIME_TO_WAIT = 200;
    this.#resizeTimeoutId = setTimeout(() => {
      this.#resizeTimeoutId = null;
      this.#drawBitmap();
    }, TIME_TO_WAIT);
  }
  #createCanvas() {
    const {
      div
    } = this;
    let {
      width,
      height
    } = this.#bitmap;
    const [pageWidth, pageHeight] = this.pageDimensions;
    const MAX_RATIO = 0.75;
    if (this.width) {
      width = this.width * pageWidth;
      height = this.height * pageHeight;
    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {
      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);
      width *= factor;
      height *= factor;
    }
    const [parentWidth, parentHeight] = this.parentDimensions;
    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);
    this._uiManager.enableWaiting(false);
    const canvas2 = this.#canvas = document.createElement("canvas");
    canvas2.setAttribute("role", "img");
    this.addContainer(canvas2);
    this.width = width / pageWidth;
    this.height = height / pageHeight;
    if (this._initialOptions?.isCentered) {
      this.center();
    } else {
      this.fixAndSetPosition();
    }
    this._initialOptions = null;
    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {
      div.hidden = false;
    }
    this.#drawBitmap();
    if (!this.#hasBeenAddedInUndoStack) {
      this.parent.addUndoableEditor(this);
      this.#hasBeenAddedInUndoStack = true;
    }
    this._reportTelemetry({
      action: "inserted_image"
    });
    if (this.#bitmapFileName) {
      this.div.setAttribute("aria-description", this.#bitmapFileName);
    }
  }
  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {
    if (!maxDataDimension) {
      maxDataDimension = 224;
    }
    const {
      width: bitmapWidth,
      height: bitmapHeight
    } = this.#bitmap;
    const outputScale = new OutputScale();
    let bitmap = this.#bitmap;
    let width = bitmapWidth, height = bitmapHeight;
    let canvas2 = null;
    if (maxPreviewDimension) {
      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {
        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);
        width = Math.floor(bitmapWidth * ratio);
        height = Math.floor(bitmapHeight * ratio);
      }
      canvas2 = document.createElement("canvas");
      const scaledWidth = canvas2.width = Math.ceil(width * outputScale.sx);
      const scaledHeight = canvas2.height = Math.ceil(height * outputScale.sy);
      if (!this.#isSvg) {
        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);
      }
      const ctx = canvas2.getContext("2d");
      ctx.filter = this._uiManager.hcmFilter;
      let white = "white", black = "#cfcfd8";
      if (this._uiManager.hcmFilter !== "none") {
        black = "black";
      } else if (window.matchMedia?.("(prefers-color-scheme: dark)").matches) {
        white = "#8f8f9d";
        black = "#42414d";
      }
      const boxDim = 15;
      const boxDimWidth = boxDim * outputScale.sx;
      const boxDimHeight = boxDim * outputScale.sy;
      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);
      const patternCtx = pattern.getContext("2d");
      patternCtx.fillStyle = white;
      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);
      patternCtx.fillStyle = black;
      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);
      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);
      ctx.fillStyle = ctx.createPattern(pattern, "repeat");
      ctx.fillRect(0, 0, scaledWidth, scaledHeight);
      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);
    }
    let imageData = null;
    if (createImageData) {
      let dataWidth, dataHeight;
      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {
        dataWidth = bitmap.width;
        dataHeight = bitmap.height;
      } else {
        bitmap = this.#bitmap;
        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {
          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);
          dataWidth = Math.floor(bitmapWidth * ratio);
          dataHeight = Math.floor(bitmapHeight * ratio);
          if (!this.#isSvg) {
            bitmap = this.#scaleBitmap(dataWidth, dataHeight);
          }
        }
      }
      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);
      const offscreenCtx = offscreen.getContext("2d", {
        willReadFrequently: true
      });
      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);
      imageData = {
        width: dataWidth,
        height: dataHeight,
        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data
      };
    }
    return {
      canvas: canvas2,
      width,
      height,
      imageData
    };
  }
  #scaleBitmap(width, height) {
    const {
      width: bitmapWidth,
      height: bitmapHeight
    } = this.#bitmap;
    let newWidth = bitmapWidth;
    let newHeight = bitmapHeight;
    let bitmap = this.#bitmap;
    while (newWidth > 2 * width || newHeight > 2 * height) {
      const prevWidth = newWidth;
      const prevHeight = newHeight;
      if (newWidth > 2 * width) {
        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);
      }
      if (newHeight > 2 * height) {
        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);
      }
      const offscreen = new OffscreenCanvas(newWidth, newHeight);
      const ctx = offscreen.getContext("2d");
      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);
      bitmap = offscreen.transferToImageBitmap();
    }
    return bitmap;
  }
  #drawBitmap() {
    const [parentWidth, parentHeight] = this.parentDimensions;
    const {
      width,
      height
    } = this;
    const outputScale = new OutputScale();
    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);
    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);
    const canvas2 = this.#canvas;
    if (!canvas2 || canvas2.width === scaledWidth && canvas2.height === scaledHeight) {
      return;
    }
    canvas2.width = scaledWidth;
    canvas2.height = scaledHeight;
    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);
    const ctx = canvas2.getContext("2d");
    ctx.filter = this._uiManager.hcmFilter;
    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);
  }
  #serializeBitmap(toUrl) {
    if (toUrl) {
      if (this.#isSvg) {
        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);
        if (url) {
          return url;
        }
      }
      const canvas2 = document.createElement("canvas");
      ({
        width: canvas2.width,
        height: canvas2.height
      } = this.#bitmap);
      const ctx = canvas2.getContext("2d");
      ctx.drawImage(this.#bitmap, 0, 0);
      return canvas2.toDataURL();
    }
    if (this.#isSvg) {
      const [pageWidth, pageHeight] = this.pageDimensions;
      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);
      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);
      const offscreen = new OffscreenCanvas(width, height);
      const ctx = offscreen.getContext("2d");
      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);
      return offscreen.transferToImageBitmap();
    }
    return structuredClone(this.#bitmap);
  }
  static async deserialize(data, parent, uiManager) {
    let initialData = null;
    let missingCanvas = false;
    if (data instanceof StampAnnotationElement) {
      const {
        data: {
          rect: rect2,
          rotation,
          id,
          structParent,
          popupRef
        },
        container: container2,
        parent: {
          page: {
            pageNumber
          }
        },
        canvas: canvas2
      } = data;
      let bitmapId2, bitmap2;
      if (canvas2) {
        delete data.canvas;
        ({
          id: bitmapId2,
          bitmap: bitmap2
        } = uiManager.imageManager.getFromCanvas(container2.id, canvas2));
        canvas2.remove();
      } else {
        missingCanvas = true;
        data._hasNoCanvas = true;
      }
      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get("aria-label") || "";
      initialData = data = {
        annotationType: AnnotationEditorType.STAMP,
        bitmapId: bitmapId2,
        bitmap: bitmap2,
        pageIndex: pageNumber - 1,
        rect: rect2.slice(0),
        rotation,
        id,
        deleted: false,
        accessibilityData: {
          decorative: false,
          altText
        },
        isSvg: false,
        structParent,
        popupRef
      };
    }
    const editor = await super.deserialize(data, parent, uiManager);
    const {
      rect,
      bitmap,
      bitmapUrl,
      bitmapId,
      isSvg,
      accessibilityData
    } = data;
    if (missingCanvas) {
      uiManager.addMissingCanvas(data.id, editor);
      editor.#missingCanvas = true;
    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {
      editor.#bitmapId = bitmapId;
      if (bitmap) {
        editor.#bitmap = bitmap;
      }
    } else {
      editor.#bitmapUrl = bitmapUrl;
    }
    editor.#isSvg = isSvg;
    const [parentWidth, parentHeight] = editor.pageDimensions;
    editor.width = (rect[2] - rect[0]) / parentWidth;
    editor.height = (rect[3] - rect[1]) / parentHeight;
    editor.annotationElementId = data.id || null;
    if (accessibilityData) {
      editor.altTextData = accessibilityData;
    }
    editor._initialData = initialData;
    editor.#hasBeenAddedInUndoStack = !!initialData;
    return editor;
  }
  serialize(isForCopying = false, context = null) {
    if (this.isEmpty()) {
      return null;
    }
    if (this.deleted) {
      return this.serializeDeleted();
    }
    const serialized = {
      annotationType: AnnotationEditorType.STAMP,
      bitmapId: this.#bitmapId,
      pageIndex: this.pageIndex,
      rect: this.getRect(0, 0),
      rotation: this.rotation,
      isSvg: this.#isSvg,
      structTreeParentId: this._structTreeParentId
    };
    if (isForCopying) {
      serialized.bitmapUrl = this.#serializeBitmap(true);
      serialized.accessibilityData = this.serializeAltText(true);
      serialized.isCopy = true;
      return serialized;
    }
    const {
      decorative,
      altText
    } = this.serializeAltText(false);
    if (!decorative && altText) {
      serialized.accessibilityData = {
        type: "Figure",
        alt: altText
      };
    }
    if (this.annotationElementId) {
      const changes = this.#hasElementChanged(serialized);
      if (changes.isSame) {
        return null;
      }
      if (changes.isSameAltText) {
        delete serialized.accessibilityData;
      } else {
        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;
      }
    }
    serialized.id = this.annotationElementId;
    if (context === null) {
      return serialized;
    }
    context.stamps ||= /* @__PURE__ */ new Map();
    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;
    if (!context.stamps.has(this.#bitmapId)) {
      context.stamps.set(this.#bitmapId, {
        area,
        serialized
      });
      serialized.bitmap = this.#serializeBitmap(false);
    } else if (this.#isSvg) {
      const prevData = context.stamps.get(this.#bitmapId);
      if (area > prevData.area) {
        prevData.area = area;
        prevData.serialized.bitmap.close();
        prevData.serialized.bitmap = this.#serializeBitmap(false);
      }
    }
    return serialized;
  }
  #hasElementChanged(serialized) {
    const {
      pageIndex,
      accessibilityData: {
        altText
      }
    } = this._initialData;
    const isSamePageIndex = serialized.pageIndex === pageIndex;
    const isSameAltText = (serialized.accessibilityData?.alt || "") === altText;
    return {
      isSame: !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,
      isSameAltText
    };
  }
  renderAnnotationElement(annotation) {
    annotation.updateEdited({
      rect: this.getRect(0, 0)
    });
    return null;
  }
};
var AnnotationEditorLayer = class _AnnotationEditorLayer {
  #accessibilityManager;
  #allowClick = false;
  #annotationLayer = null;
  #clickAC = null;
  #editorFocusTimeoutId = null;
  #editors = /* @__PURE__ */ new Map();
  #hadPointerDown = false;
  #isDisabling = false;
  #isEnabling = false;
  #drawingAC = null;
  #focusedElement = null;
  #textLayer = null;
  #textSelectionAC = null;
  #uiManager;
  static _initialized = false;
  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map((type) => [type._editorType, type]));
  constructor({
    uiManager,
    pageIndex,
    div,
    structTreeLayer,
    accessibilityManager,
    annotationLayer,
    drawLayer,
    textLayer,
    viewport,
    l10n
  }) {
    const editorTypes = [..._AnnotationEditorLayer.#editorTypes.values()];
    if (!_AnnotationEditorLayer._initialized) {
      _AnnotationEditorLayer._initialized = true;
      for (const editorType of editorTypes) {
        editorType.initialize(l10n, uiManager);
      }
    }
    uiManager.registerEditorTypes(editorTypes);
    this.#uiManager = uiManager;
    this.pageIndex = pageIndex;
    this.div = div;
    this.#accessibilityManager = accessibilityManager;
    this.#annotationLayer = annotationLayer;
    this.viewport = viewport;
    this.#textLayer = textLayer;
    this.drawLayer = drawLayer;
    this._structTree = structTreeLayer;
    this.#uiManager.addLayer(this);
  }
  get isEmpty() {
    return this.#editors.size === 0;
  }
  get isInvisible() {
    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;
  }
  updateToolbar(mode) {
    this.#uiManager.updateToolbar(mode);
  }
  updateMode(mode = this.#uiManager.getMode()) {
    this.#cleanup();
    switch (mode) {
      case AnnotationEditorType.NONE:
        this.disableTextSelection();
        this.togglePointerEvents(false);
        this.toggleAnnotationLayerPointerEvents(true);
        this.disableClick();
        return;
      case AnnotationEditorType.INK:
        this.disableTextSelection();
        this.togglePointerEvents(true);
        this.enableClick();
        break;
      case AnnotationEditorType.HIGHLIGHT:
        this.enableTextSelection();
        this.togglePointerEvents(false);
        this.disableClick();
        break;
      default:
        this.disableTextSelection();
        this.togglePointerEvents(true);
        this.enableClick();
    }
    this.toggleAnnotationLayerPointerEvents(false);
    const {
      classList
    } = this.div;
    for (const editorType of _AnnotationEditorLayer.#editorTypes.values()) {
      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);
    }
    this.div.hidden = false;
  }
  hasTextLayer(textLayer) {
    return textLayer === this.#textLayer?.div;
  }
  setEditingState(isEditing) {
    this.#uiManager.setEditingState(isEditing);
  }
  addCommands(params) {
    this.#uiManager.addCommands(params);
  }
  cleanUndoStack(type) {
    this.#uiManager.cleanUndoStack(type);
  }
  toggleDrawing(enabled = false) {
    this.div.classList.toggle("drawing", !enabled);
  }
  togglePointerEvents(enabled = false) {
    this.div.classList.toggle("disabled", !enabled);
  }
  toggleAnnotationLayerPointerEvents(enabled = false) {
    this.#annotationLayer?.div.classList.toggle("disabled", !enabled);
  }
  async enable() {
    this.#isEnabling = true;
    this.div.tabIndex = 0;
    this.togglePointerEvents(true);
    const annotationElementIds = /* @__PURE__ */ new Set();
    for (const editor of this.#editors.values()) {
      editor.enableEditing();
      editor.show(true);
      if (editor.annotationElementId) {
        this.#uiManager.removeChangedExistingAnnotation(editor);
        annotationElementIds.add(editor.annotationElementId);
      }
    }
    if (!this.#annotationLayer) {
      this.#isEnabling = false;
      return;
    }
    const editables = this.#annotationLayer.getEditableAnnotations();
    for (const editable of editables) {
      editable.hide();
      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {
        continue;
      }
      if (annotationElementIds.has(editable.data.id)) {
        continue;
      }
      const editor = await this.deserialize(editable);
      if (!editor) {
        continue;
      }
      this.addOrRebuild(editor);
      editor.enableEditing();
    }
    this.#isEnabling = false;
  }
  disable() {
    this.#isDisabling = true;
    this.div.tabIndex = -1;
    this.togglePointerEvents(false);
    const changedAnnotations = /* @__PURE__ */ new Map();
    const resetAnnotations = /* @__PURE__ */ new Map();
    for (const editor of this.#editors.values()) {
      editor.disableEditing();
      if (!editor.annotationElementId) {
        continue;
      }
      if (editor.serialize() !== null) {
        changedAnnotations.set(editor.annotationElementId, editor);
        continue;
      } else {
        resetAnnotations.set(editor.annotationElementId, editor);
      }
      this.getEditableAnnotation(editor.annotationElementId)?.show();
      editor.remove();
    }
    if (this.#annotationLayer) {
      const editables = this.#annotationLayer.getEditableAnnotations();
      for (const editable of editables) {
        const {
          id
        } = editable.data;
        if (this.#uiManager.isDeletedAnnotationElement(id)) {
          continue;
        }
        let editor = resetAnnotations.get(id);
        if (editor) {
          editor.resetAnnotationElement(editable);
          editor.show(false);
          editable.show();
          continue;
        }
        editor = changedAnnotations.get(id);
        if (editor) {
          this.#uiManager.addChangedExistingAnnotation(editor);
          if (editor.renderAnnotationElement(editable)) {
            editor.show(false);
          }
        }
        editable.show();
      }
    }
    this.#cleanup();
    if (this.isEmpty) {
      this.div.hidden = true;
    }
    const {
      classList
    } = this.div;
    for (const editorType of _AnnotationEditorLayer.#editorTypes.values()) {
      classList.remove(`${editorType._type}Editing`);
    }
    this.disableTextSelection();
    this.toggleAnnotationLayerPointerEvents(true);
    this.#isDisabling = false;
  }
  getEditableAnnotation(id) {
    return this.#annotationLayer?.getEditableAnnotation(id) || null;
  }
  setActiveEditor(editor) {
    const currentActive = this.#uiManager.getActive();
    if (currentActive === editor) {
      return;
    }
    this.#uiManager.setActiveEditor(editor);
  }
  enableTextSelection() {
    this.div.tabIndex = -1;
    if (this.#textLayer?.div && !this.#textSelectionAC) {
      this.#textSelectionAC = new AbortController();
      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);
      this.#textLayer.div.addEventListener("pointerdown", this.#textLayerPointerDown.bind(this), {
        signal
      });
      this.#textLayer.div.classList.add("highlighting");
    }
  }
  disableTextSelection() {
    this.div.tabIndex = 0;
    if (this.#textLayer?.div && this.#textSelectionAC) {
      this.#textSelectionAC.abort();
      this.#textSelectionAC = null;
      this.#textLayer.div.classList.remove("highlighting");
    }
  }
  #textLayerPointerDown(event) {
    this.#uiManager.unselectAll();
    const {
      target
    } = event;
    if (target === this.#textLayer.div || (target.getAttribute("role") === "img" || target.classList.contains("endOfContent")) && this.#textLayer.div.contains(target)) {
      const {
        isMac
      } = util_FeatureTest.platform;
      if (event.button !== 0 || event.ctrlKey && isMac) {
        return;
      }
      this.#uiManager.showAllEditors("highlight", true, true);
      this.#textLayer.div.classList.add("free");
      this.toggleDrawing();
      HighlightEditor.startHighlighting(this, this.#uiManager.direction === "ltr", {
        target: this.#textLayer.div,
        x: event.x,
        y: event.y
      });
      this.#textLayer.div.addEventListener("pointerup", () => {
        this.#textLayer.div.classList.remove("free");
        this.toggleDrawing(true);
      }, {
        once: true,
        signal: this.#uiManager._signal
      });
      event.preventDefault();
    }
  }
  enableClick() {
    if (this.#clickAC) {
      return;
    }
    this.#clickAC = new AbortController();
    const signal = this.#uiManager.combinedSignal(this.#clickAC);
    this.div.addEventListener("pointerdown", this.pointerdown.bind(this), {
      signal
    });
    const pointerup = this.pointerup.bind(this);
    this.div.addEventListener("pointerup", pointerup, {
      signal
    });
    this.div.addEventListener("pointercancel", pointerup, {
      signal
    });
  }
  disableClick() {
    this.#clickAC?.abort();
    this.#clickAC = null;
  }
  attach(editor) {
    this.#editors.set(editor.id, editor);
    const {
      annotationElementId
    } = editor;
    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {
      this.#uiManager.removeDeletedAnnotationElement(editor);
    }
  }
  detach(editor) {
    this.#editors.delete(editor.id);
    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);
    if (!this.#isDisabling && editor.annotationElementId) {
      this.#uiManager.addDeletedAnnotationElement(editor);
    }
  }
  remove(editor) {
    this.detach(editor);
    this.#uiManager.removeEditor(editor);
    editor.div.remove();
    editor.isAttachedToDOM = false;
  }
  changeParent(editor) {
    if (editor.parent === this) {
      return;
    }
    if (editor.parent && editor.annotationElementId) {
      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);
      AnnotationEditor.deleteAnnotationElement(editor);
      editor.annotationElementId = null;
    }
    this.attach(editor);
    editor.parent?.detach(editor);
    editor.setParent(this);
    if (editor.div && editor.isAttachedToDOM) {
      editor.div.remove();
      this.div.append(editor.div);
    }
  }
  add(editor) {
    if (editor.parent === this && editor.isAttachedToDOM) {
      return;
    }
    this.changeParent(editor);
    this.#uiManager.addEditor(editor);
    this.attach(editor);
    if (!editor.isAttachedToDOM) {
      const div = editor.render();
      this.div.append(div);
      editor.isAttachedToDOM = true;
    }
    editor.fixAndSetPosition();
    editor.onceAdded(!this.#isEnabling);
    this.#uiManager.addToAnnotationStorage(editor);
    editor._reportTelemetry(editor.telemetryInitialData);
  }
  moveEditorInDOM(editor) {
    if (!editor.isAttachedToDOM) {
      return;
    }
    const {
      activeElement
    } = document;
    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {
      editor._focusEventsAllowed = false;
      this.#editorFocusTimeoutId = setTimeout(() => {
        this.#editorFocusTimeoutId = null;
        if (!editor.div.contains(document.activeElement)) {
          editor.div.addEventListener("focusin", () => {
            editor._focusEventsAllowed = true;
          }, {
            once: true,
            signal: this.#uiManager._signal
          });
          activeElement.focus();
        } else {
          editor._focusEventsAllowed = true;
        }
      }, 0);
    }
    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);
  }
  addOrRebuild(editor) {
    if (editor.needsToBeRebuilt()) {
      editor.parent ||= this;
      editor.rebuild();
      editor.show();
    } else {
      this.add(editor);
    }
  }
  addUndoableEditor(editor) {
    const cmd = () => editor._uiManager.rebuild(editor);
    const undo = () => {
      editor.remove();
    };
    this.addCommands({
      cmd,
      undo,
      mustExec: false
    });
  }
  getNextId() {
    return this.#uiManager.getId();
  }
  get #currentEditorType() {
    return _AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());
  }
  combinedSignal(ac) {
    return this.#uiManager.combinedSignal(ac);
  }
  #createNewEditor(params) {
    const editorType = this.#currentEditorType;
    return editorType ? new editorType.prototype.constructor(params) : null;
  }
  canCreateNewEmptyEditor() {
    return this.#currentEditorType?.canCreateNewEmptyEditor();
  }
  async pasteEditor(mode, params) {
    this.#uiManager.updateToolbar(mode);
    await this.#uiManager.updateMode(mode);
    const {
      offsetX,
      offsetY
    } = this.#getCenterPoint();
    const id = this.getNextId();
    const editor = this.#createNewEditor({
      parent: this,
      id,
      x: offsetX,
      y: offsetY,
      uiManager: this.#uiManager,
      isCentered: true,
      ...params
    });
    if (editor) {
      this.add(editor);
    }
  }
  async deserialize(data) {
    return await _AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager) || null;
  }
  createAndAddNewEditor(event, isCentered, data = {}) {
    const id = this.getNextId();
    const editor = this.#createNewEditor({
      parent: this,
      id,
      x: event.offsetX,
      y: event.offsetY,
      uiManager: this.#uiManager,
      isCentered,
      ...data
    });
    if (editor) {
      this.add(editor);
    }
    return editor;
  }
  #getCenterPoint() {
    const {
      x,
      y,
      width,
      height
    } = this.div.getBoundingClientRect();
    const tlX = Math.max(0, x);
    const tlY = Math.max(0, y);
    const brX = Math.min(window.innerWidth, x + width);
    const brY = Math.min(window.innerHeight, y + height);
    const centerX = (tlX + brX) / 2 - x;
    const centerY = (tlY + brY) / 2 - y;
    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];
    return {
      offsetX,
      offsetY
    };
  }
  addNewEditor(data = {}) {
    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);
  }
  setSelected(editor) {
    this.#uiManager.setSelected(editor);
  }
  toggleSelected(editor) {
    this.#uiManager.toggleSelected(editor);
  }
  unselect(editor) {
    this.#uiManager.unselect(editor);
  }
  pointerup(event) {
    const {
      isMac
    } = util_FeatureTest.platform;
    if (event.button !== 0 || event.ctrlKey && isMac) {
      return;
    }
    if (event.target !== this.div) {
      return;
    }
    if (!this.#hadPointerDown) {
      return;
    }
    this.#hadPointerDown = false;
    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {
      return;
    }
    if (!this.#allowClick) {
      this.#allowClick = true;
      return;
    }
    const currentMode = this.#uiManager.getMode();
    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {
      this.#uiManager.unselectAll();
      return;
    }
    this.createAndAddNewEditor(event, false);
  }
  pointerdown(event) {
    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {
      this.enableTextSelection();
    }
    if (this.#hadPointerDown) {
      this.#hadPointerDown = false;
      return;
    }
    const {
      isMac
    } = util_FeatureTest.platform;
    if (event.button !== 0 || event.ctrlKey && isMac) {
      return;
    }
    if (event.target !== this.div) {
      return;
    }
    this.#hadPointerDown = true;
    if (this.#currentEditorType?.isDrawer) {
      this.startDrawingSession(event);
      return;
    }
    const editor = this.#uiManager.getActive();
    this.#allowClick = !editor || editor.isEmpty();
  }
  startDrawingSession(event) {
    this.div.focus({
      preventScroll: true
    });
    if (this.#drawingAC) {
      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);
      return;
    }
    this.#uiManager.setCurrentDrawingSession(this);
    this.#drawingAC = new AbortController();
    const signal = this.#uiManager.combinedSignal(this.#drawingAC);
    this.div.addEventListener("blur", ({
      relatedTarget
    }) => {
      if (relatedTarget && !this.div.contains(relatedTarget)) {
        this.#focusedElement = null;
        this.commitOrRemove();
      }
    }, {
      signal
    });
    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);
  }
  pause(on) {
    if (on) {
      const {
        activeElement
      } = document;
      if (this.div.contains(activeElement)) {
        this.#focusedElement = activeElement;
      }
      return;
    }
    if (this.#focusedElement) {
      setTimeout(() => {
        this.#focusedElement?.focus();
        this.#focusedElement = null;
      }, 0);
    }
  }
  endDrawingSession(isAborted = false) {
    if (!this.#drawingAC) {
      return null;
    }
    this.#uiManager.setCurrentDrawingSession(null);
    this.#drawingAC.abort();
    this.#drawingAC = null;
    this.#focusedElement = null;
    return this.#currentEditorType.endDrawing(isAborted);
  }
  findNewParent(editor, x, y) {
    const layer = this.#uiManager.findParent(x, y);
    if (layer === null || layer === this) {
      return false;
    }
    layer.changeParent(editor);
    return true;
  }
  commitOrRemove() {
    if (this.#drawingAC) {
      this.endDrawingSession();
      return true;
    }
    return false;
  }
  onScaleChanging() {
    if (!this.#drawingAC) {
      return;
    }
    this.#currentEditorType.onScaleChangingWhenDrawing(this);
  }
  destroy() {
    this.commitOrRemove();
    if (this.#uiManager.getActive()?.parent === this) {
      this.#uiManager.commitOrRemove();
      this.#uiManager.setActiveEditor(null);
    }
    if (this.#editorFocusTimeoutId) {
      clearTimeout(this.#editorFocusTimeoutId);
      this.#editorFocusTimeoutId = null;
    }
    for (const editor of this.#editors.values()) {
      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);
      editor.setParent(null);
      editor.isAttachedToDOM = false;
      editor.div.remove();
    }
    this.div = null;
    this.#editors.clear();
    this.#uiManager.removeLayer(this);
  }
  #cleanup() {
    for (const editor of this.#editors.values()) {
      if (editor.isEmpty()) {
        editor.remove();
      }
    }
  }
  render({
    viewport
  }) {
    this.viewport = viewport;
    setLayerDimensions(this.div, viewport);
    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {
      this.add(editor);
      editor.rebuild();
    }
    this.updateMode();
  }
  update({
    viewport
  }) {
    this.#uiManager.commitOrRemove();
    this.#cleanup();
    const oldRotation = this.viewport.rotation;
    const rotation = viewport.rotation;
    this.viewport = viewport;
    setLayerDimensions(this.div, {
      rotation
    });
    if (oldRotation !== rotation) {
      for (const editor of this.#editors.values()) {
        editor.rotate(rotation);
      }
    }
  }
  get pageDimensions() {
    const {
      pageWidth,
      pageHeight
    } = this.viewport.rawDims;
    return [pageWidth, pageHeight];
  }
  get scale() {
    return this.#uiManager.viewParameters.realScale;
  }
};
var DrawLayer = class _DrawLayer {
  #parent = null;
  #mapping = /* @__PURE__ */ new Map();
  #toUpdate = /* @__PURE__ */ new Map();
  static #id = 0;
  constructor({
    pageIndex
  }) {
    this.pageIndex = pageIndex;
  }
  setParent(parent) {
    if (!this.#parent) {
      this.#parent = parent;
      return;
    }
    if (this.#parent !== parent) {
      if (this.#mapping.size > 0) {
        for (const root of this.#mapping.values()) {
          root.remove();
          parent.append(root);
        }
      }
      this.#parent = parent;
    }
  }
  static get _svgFactory() {
    return shadow(this, "_svgFactory", new DOMSVGFactory());
  }
  static #setBox(element, [x, y, width, height]) {
    const {
      style
    } = element;
    style.top = `${100 * y}%`;
    style.left = `${100 * x}%`;
    style.width = `${100 * width}%`;
    style.height = `${100 * height}%`;
  }
  #createSVG() {
    const svg = _DrawLayer._svgFactory.create(1, 1, true);
    this.#parent.append(svg);
    svg.setAttribute("aria-hidden", true);
    return svg;
  }
  #createClipPath(defs, pathId) {
    const clipPath = _DrawLayer._svgFactory.createElement("clipPath");
    defs.append(clipPath);
    const clipPathId = `clip_${pathId}`;
    clipPath.setAttribute("id", clipPathId);
    clipPath.setAttribute("clipPathUnits", "objectBoundingBox");
    const clipPathUse = _DrawLayer._svgFactory.createElement("use");
    clipPath.append(clipPathUse);
    clipPathUse.setAttribute("href", `#${pathId}`);
    clipPathUse.classList.add("clip");
    return clipPathId;
  }
  #updateProperties(element, properties) {
    for (const [key, value] of Object.entries(properties)) {
      if (value === null) {
        element.removeAttribute(key);
      } else {
        element.setAttribute(key, value);
      }
    }
  }
  draw(properties, isPathUpdatable = false, hasClip = false) {
    const id = _DrawLayer.#id++;
    const root = this.#createSVG();
    const defs = _DrawLayer._svgFactory.createElement("defs");
    root.append(defs);
    const path = _DrawLayer._svgFactory.createElement("path");
    defs.append(path);
    const pathId = `path_p${this.pageIndex}_${id}`;
    path.setAttribute("id", pathId);
    path.setAttribute("vector-effect", "non-scaling-stroke");
    if (isPathUpdatable) {
      this.#toUpdate.set(id, path);
    }
    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;
    const use = _DrawLayer._svgFactory.createElement("use");
    root.append(use);
    use.setAttribute("href", `#${pathId}`);
    this.updateProperties(root, properties);
    this.#mapping.set(id, root);
    return {
      id,
      clipPathId: `url(#${clipPathId})`
    };
  }
  drawOutline(properties, mustRemoveSelfIntersections) {
    const id = _DrawLayer.#id++;
    const root = this.#createSVG();
    const defs = _DrawLayer._svgFactory.createElement("defs");
    root.append(defs);
    const path = _DrawLayer._svgFactory.createElement("path");
    defs.append(path);
    const pathId = `path_p${this.pageIndex}_${id}`;
    path.setAttribute("id", pathId);
    path.setAttribute("vector-effect", "non-scaling-stroke");
    let maskId;
    if (mustRemoveSelfIntersections) {
      const mask = _DrawLayer._svgFactory.createElement("mask");
      defs.append(mask);
      maskId = `mask_p${this.pageIndex}_${id}`;
      mask.setAttribute("id", maskId);
      mask.setAttribute("maskUnits", "objectBoundingBox");
      const rect = _DrawLayer._svgFactory.createElement("rect");
      mask.append(rect);
      rect.setAttribute("width", "1");
      rect.setAttribute("height", "1");
      rect.setAttribute("fill", "white");
      const use = _DrawLayer._svgFactory.createElement("use");
      mask.append(use);
      use.setAttribute("href", `#${pathId}`);
      use.setAttribute("stroke", "none");
      use.setAttribute("fill", "black");
      use.setAttribute("fill-rule", "nonzero");
      use.classList.add("mask");
    }
    const use1 = _DrawLayer._svgFactory.createElement("use");
    root.append(use1);
    use1.setAttribute("href", `#${pathId}`);
    if (maskId) {
      use1.setAttribute("mask", `url(#${maskId})`);
    }
    const use2 = use1.cloneNode();
    root.append(use2);
    use1.classList.add("mainOutline");
    use2.classList.add("secondaryOutline");
    this.updateProperties(root, properties);
    this.#mapping.set(id, root);
    return id;
  }
  finalizeDraw(id, properties) {
    this.#toUpdate.delete(id);
    this.updateProperties(id, properties);
  }
  updateProperties(elementOrId, properties) {
    if (!properties) {
      return;
    }
    const {
      root,
      bbox,
      rootClass,
      path
    } = properties;
    const element = typeof elementOrId === "number" ? this.#mapping.get(elementOrId) : elementOrId;
    if (!element) {
      return;
    }
    if (root) {
      this.#updateProperties(element, root);
    }
    if (bbox) {
      _DrawLayer.#setBox(element, bbox);
    }
    if (rootClass) {
      const {
        classList
      } = element;
      for (const [className, value] of Object.entries(rootClass)) {
        classList.toggle(className, value);
      }
    }
    if (path) {
      const defs = element.firstChild;
      const pathElement = defs.firstChild;
      this.#updateProperties(pathElement, path);
    }
  }
  updateParent(id, layer) {
    if (layer === this) {
      return;
    }
    const root = this.#mapping.get(id);
    if (!root) {
      return;
    }
    layer.#parent.append(root);
    this.#mapping.delete(id);
    layer.#mapping.set(id, root);
  }
  remove(id) {
    this.#toUpdate.delete(id);
    if (this.#parent === null) {
      return;
    }
    this.#mapping.get(id).remove();
    this.#mapping.delete(id);
  }
  destroy() {
    this.#parent = null;
    for (const root of this.#mapping.values()) {
      root.remove();
    }
    this.#mapping.clear();
    this.#toUpdate.clear();
  }
};
{
  globalThis.pdfjsTestingUtils = {
    HighlightOutliner
  };
}
var __webpack_exports__AbortException = __webpack_exports__.AbortException;
var __webpack_exports__AnnotationEditorLayer = __webpack_exports__.AnnotationEditorLayer;
var __webpack_exports__AnnotationEditorParamsType = __webpack_exports__.AnnotationEditorParamsType;
var __webpack_exports__AnnotationEditorType = __webpack_exports__.AnnotationEditorType;
var __webpack_exports__AnnotationEditorUIManager = __webpack_exports__.AnnotationEditorUIManager;
var __webpack_exports__AnnotationLayer = __webpack_exports__.AnnotationLayer;
var __webpack_exports__AnnotationMode = __webpack_exports__.AnnotationMode;
var __webpack_exports__AnnotationType = __webpack_exports__.AnnotationType;
var __webpack_exports__ColorPicker = __webpack_exports__.ColorPicker;
var __webpack_exports__DOMSVGFactory = __webpack_exports__.DOMSVGFactory;
var __webpack_exports__DrawLayer = __webpack_exports__.DrawLayer;
var __webpack_exports__FeatureTest = __webpack_exports__.FeatureTest;
var __webpack_exports__GlobalWorkerOptions = __webpack_exports__.GlobalWorkerOptions;
var __webpack_exports__ImageKind = __webpack_exports__.ImageKind;
var __webpack_exports__InvalidPDFException = __webpack_exports__.InvalidPDFException;
var __webpack_exports__MathClamp = __webpack_exports__.MathClamp;
var __webpack_exports__OPS = __webpack_exports__.OPS;
var __webpack_exports__OutputScale = __webpack_exports__.OutputScale;
var __webpack_exports__PDFDataRangeTransport = __webpack_exports__.PDFDataRangeTransport;
var __webpack_exports__PDFDateString = __webpack_exports__.PDFDateString;
var __webpack_exports__PDFWorker = __webpack_exports__.PDFWorker;
var __webpack_exports__PasswordResponses = __webpack_exports__.PasswordResponses;
var __webpack_exports__PermissionFlag = __webpack_exports__.PermissionFlag;
var __webpack_exports__PixelsPerInch = __webpack_exports__.PixelsPerInch;
var __webpack_exports__RenderingCancelledException = __webpack_exports__.RenderingCancelledException;
var __webpack_exports__ResponseException = __webpack_exports__.ResponseException;
var __webpack_exports__SignatureExtractor = __webpack_exports__.SignatureExtractor;
var __webpack_exports__SupportedImageMimeTypes = __webpack_exports__.SupportedImageMimeTypes;
var __webpack_exports__TextLayer = __webpack_exports__.TextLayer;
var __webpack_exports__TouchManager = __webpack_exports__.TouchManager;
var __webpack_exports__Util = __webpack_exports__.Util;
var __webpack_exports__VerbosityLevel = __webpack_exports__.VerbosityLevel;
var __webpack_exports__XfaLayer = __webpack_exports__.XfaLayer;
var __webpack_exports__build = __webpack_exports__.build;
var __webpack_exports__createValidAbsoluteUrl = __webpack_exports__.createValidAbsoluteUrl;
var __webpack_exports__fetchData = __webpack_exports__.fetchData;
var __webpack_exports__getDocument = __webpack_exports__.getDocument;
var __webpack_exports__getFilenameFromUrl = __webpack_exports__.getFilenameFromUrl;
var __webpack_exports__getPdfFilenameFromUrl = __webpack_exports__.getPdfFilenameFromUrl;
var __webpack_exports__getUuid = __webpack_exports__.getUuid;
var __webpack_exports__getXfaPageViewport = __webpack_exports__.getXfaPageViewport;
var __webpack_exports__isDataScheme = __webpack_exports__.isDataScheme;
var __webpack_exports__isPdfFile = __webpack_exports__.isPdfFile;
var __webpack_exports__isValidExplicitDest = __webpack_exports__.isValidExplicitDest;
var __webpack_exports__noContextMenu = __webpack_exports__.noContextMenu;
var __webpack_exports__normalizeUnicode = __webpack_exports__.normalizeUnicode;
var __webpack_exports__setLayerDimensions = __webpack_exports__.setLayerDimensions;
var __webpack_exports__shadow = __webpack_exports__.shadow;
var __webpack_exports__stopEvent = __webpack_exports__.stopEvent;
var __webpack_exports__version = __webpack_exports__.version;

// viewer/js/index.js
__webpack_exports__GlobalWorkerOptions.workerSrc = "/viewer/js/worker.js";
var pdfDoc = null;
var outlineAbort = new AbortController();
var pageRendering = false;
var renderPending = false;
var renderPendingZoom = 0;
var canvas = document.getElementById("content");
var container = document.getElementById("container");
var orientationDegrees = 0;
var zoomRatio = 1;
var textLayerDiv = document.getElementById("text");
var task = null;
var newPageNumber = 0;
var newZoomRatio = 1;
var useRender;
var cache = [];
var maxCached = 6;
var isTextLayerVisible = false;
function maybeRenderNextPage() {
  if (renderPending) {
    pageRendering = false;
    renderPending = false;
    renderPage(channel.getPage(), renderPendingZoom, false);
    return true;
  }
  return false;
}
function handleRenderingError(error) {
  console.log("rendering error: " + error);
  pageRendering = false;
  maybeRenderNextPage();
}
function doPrerender(pageNumber, prerenderTrigger) {
  if (useRender) {
    if (pageNumber + 1 <= pdfDoc.numPages) {
      renderPage(pageNumber + 1, false, true, pageNumber);
    } else if (pageNumber - 1 > 0) {
      renderPage(pageNumber - 1, false, true, pageNumber);
    }
  } else if (pageNumber === prerenderTrigger + 1) {
    if (prerenderTrigger - 1 > 0) {
      renderPage(prerenderTrigger - 1, false, true, prerenderTrigger);
    }
  }
}
function display(newCanvas, zoom) {
  canvas.height = newCanvas.height;
  canvas.width = newCanvas.width;
  canvas.style.height = newCanvas.style.height;
  canvas.style.width = newCanvas.style.width;
  canvas.getContext("2d", { alpha: false }).drawImage(newCanvas, 0, 0);
  if (!zoom) {
    scrollTo(0, 0);
  }
}
function setLayerTransform(pageWidth, pageHeight, layerDiv) {
  const translate = {
    X: Math.max(0, pageWidth - document.body.clientWidth) / 2,
    Y: Math.max(0, pageHeight - document.body.clientHeight) / 2
  };
  layerDiv.style.translate = `${translate.X}px ${translate.Y}px`;
}
function getDefaultZoomRatio(page, orientationDegrees2) {
  const totalRotation = (orientationDegrees2 + page.rotate) % 360;
  const viewport = page.getViewport({ scale: 1, rotation: totalRotation });
  const widthZoomRatio = document.body.clientWidth / viewport.width;
  const heightZoomRatio = document.body.clientHeight / viewport.height;
  return Math.max(Math.min(widthZoomRatio, heightZoomRatio, channel.getMaxZoomRatio()), channel.getMinZoomRatio());
}
async function getSimplifiedOutline(pdfJsOutline, abortController) {
  if (pdfJsOutline === void 0 || pdfJsOutline === null || pdfJsOutline.length === 0) {
    return null;
  }
  const pageNumberPromises = [];
  const topLevelEntries = [];
  const outlineQueue = [{
    pdfJsChildren: pdfJsOutline,
    // No parents for at top/root, so it starts out as null for them.
    parentSimpleChildrenArray: null
  }];
  while (outlineQueue.length > 0) {
    abortController.signal.throwIfAborted();
    const currentOutlinePayload = outlineQueue.shift();
    const parentChildrenArray = currentOutlinePayload.parentSimpleChildrenArray;
    const currentPdfJsChildren = currentOutlinePayload.pdfJsChildren;
    for (const pdfJsChild of currentPdfJsChildren) {
      abortController.signal.throwIfAborted();
      const simpleChild = {
        t: pdfJsChild.title,
        // The pageNumber is resolved later.
        p: -1,
        c: []
      };
      if (parentChildrenArray !== null) {
        parentChildrenArray.push(simpleChild);
      } else {
        topLevelEntries.push(simpleChild);
      }
      if (pdfJsChild.items.length > 0) {
        outlineQueue.push({
          pdfJsChildren: pdfJsChild.items,
          parentSimpleChildrenArray: simpleChild.c
        });
      }
      const dest = typeof pdfJsChild.dest === "string" ? await pdfDoc.getDestination(pdfJsChild.dest) : pdfJsChild.dest;
      if (Array.isArray(dest)) {
        const destRef = dest[0];
        if (typeof destRef === "object") {
          pageNumberPromises.push(
            pdfDoc.getPageIndex(destRef).then(function(index) {
              simpleChild.p = parseInt(index) + 1;
            }).catch(function(error) {
              console.log("pdfDoc.getPageIndex error: " + error);
              simpleChild.p = -1;
            })
          );
        } else {
          simpleChild.p = Number.isInteger(destRef) ? destRef + 1 : -1;
        }
      }
    }
  }
  await Promise.all(pageNumberPromises);
  return topLevelEntries;
}
function renderPage(pageNumber, zoom, prerender, prerenderTrigger = 0) {
  pageRendering = true;
  useRender = !prerender;
  newPageNumber = pageNumber;
  newZoomRatio = channel.getZoomRatio();
  orientationDegrees = channel.getDocumentOrientationDegrees();
  console.log("page: " + pageNumber + ", zoom: " + newZoomRatio + ", orientationDegrees: " + orientationDegrees + ", prerender: " + prerender);
  for (let i = 0; i < cache.length; i++) {
    const cached = cache[i];
    if (cached.pageNumber === pageNumber && cached.zoomRatio === newZoomRatio && cached.orientationDegrees === orientationDegrees) {
      if (useRender) {
        cache.splice(i, 1);
        cache.push(cached);
        display(cached.canvas, zoom);
        textLayerDiv.replaceWith(cached.textLayerDiv);
        textLayerDiv = cached.textLayerDiv;
        setLayerTransform(cached.pageWidth, cached.pageHeight, textLayerDiv);
        container.style.setProperty("--scale-factor", newZoomRatio.toString());
        textLayerDiv.hidden = false;
      }
      pageRendering = false;
      doPrerender(pageNumber, prerenderTrigger);
      return;
    }
  }
  pdfDoc.getPage(pageNumber).then(function(page) {
    if (maybeRenderNextPage()) {
      return;
    }
    const defaultZoomRatio = getDefaultZoomRatio(page, orientationDegrees);
    if (cache.length === 0) {
      zoomRatio = defaultZoomRatio;
      newZoomRatio = defaultZoomRatio;
      channel.setZoomRatio(defaultZoomRatio);
    }
    const totalRotation = (orientationDegrees + page.rotate) % 360;
    const viewport = page.getViewport({ scale: newZoomRatio, rotation: totalRotation });
    const scaleFactor = newZoomRatio / zoomRatio;
    const ratio = globalThis.devicePixelRatio;
    if (useRender) {
      if (newZoomRatio !== zoomRatio) {
        canvas.style.height = viewport.height + "px";
        canvas.style.width = viewport.width + "px";
      }
      zoomRatio = newZoomRatio;
    }
    if (zoom === 2) {
      textLayerDiv.hidden = true;
      pageRendering = false;
      const globalFocusX = channel.getZoomFocusX() / ratio + globalThis.scrollX;
      const globalFocusY = channel.getZoomFocusY() / ratio + globalThis.scrollY;
      const translationFactor = scaleFactor - 1;
      const scrollX = globalFocusX * translationFactor;
      const scrollY = globalFocusY * translationFactor;
      scrollBy(scrollX, scrollY);
      return;
    }
    const resolutionY = viewport.height * ratio;
    const resolutionX = viewport.width * ratio;
    const renderPixels = resolutionY * resolutionX;
    let newViewport = viewport;
    const maxRenderPixels = channel.getMaxRenderPixels();
    if (renderPixels > maxRenderPixels) {
      console.log(`resolution ${renderPixels} exceeds maximum allowed ${maxRenderPixels}`);
      const adjustedScale = Math.sqrt(maxRenderPixels / renderPixels);
      newViewport = page.getViewport({
        scale: newZoomRatio * adjustedScale,
        rotation: totalRotation
      });
    }
    const newCanvas = document.createElement("canvas");
    newCanvas.height = newViewport.height * ratio;
    newCanvas.width = newViewport.width * ratio;
    newCanvas.style.height = viewport.height + "px";
    newCanvas.style.width = viewport.width + "px";
    const newContext = newCanvas.getContext("2d", { alpha: false });
    newContext.scale(ratio, ratio);
    task = page.render({
      canvasContext: newContext,
      viewport: newViewport
    });
    task.promise.then(function() {
      task = null;
      let rendered = false;
      function render() {
        if (!useRender || rendered) {
          return;
        }
        display(newCanvas, zoom);
        rendered = true;
      }
      render();
      const newTextLayerDiv = textLayerDiv.cloneNode();
      const textLayer = new __webpack_exports__TextLayer({
        textContentSource: page.streamTextContent(),
        container: newTextLayerDiv,
        viewport
      });
      task = {
        promise: textLayer.render(),
        cancel: () => textLayer.cancel()
      };
      task.promise.then(function() {
        task = null;
        render();
        setLayerTransform(viewport.width, viewport.height, newTextLayerDiv);
        if (useRender) {
          textLayerDiv.replaceWith(newTextLayerDiv);
          textLayerDiv = newTextLayerDiv;
          container.style.setProperty("--scale-factor", newZoomRatio.toString());
          textLayerDiv.hidden = false;
        }
        if (cache.length === maxCached) {
          cache.shift();
        }
        cache.push({
          pageNumber,
          zoomRatio: newZoomRatio,
          orientationDegrees,
          canvas: newCanvas,
          textLayerDiv: newTextLayerDiv,
          pageWidth: viewport.width,
          pageHeight: viewport.height
        });
        pageRendering = false;
        doPrerender(pageNumber, prerenderTrigger);
      }).catch(handleRenderingError);
    }).catch(handleRenderingError);
  });
}
globalThis.onRenderPage = function(zoom) {
  if (pageRendering) {
    if (newPageNumber === channel.getPage() && newZoomRatio === channel.getZoomRatio() && orientationDegrees === channel.getDocumentOrientationDegrees()) {
      useRender = true;
      return;
    }
    renderPending = true;
    renderPendingZoom = zoom;
    if (task !== null) {
      task.cancel();
      task = null;
    }
  } else {
    renderPage(channel.getPage(), zoom, false);
  }
};
globalThis.isTextSelected = function() {
  return globalThis.getSelection().toString() !== "";
};
globalThis.getDocumentOutline = function() {
  pdfDoc.getOutline().then(function(outline) {
    getSimplifiedOutline(outline, outlineAbort).then(function(outlineEntries) {
      if (outlineEntries !== null) {
        channel.setDocumentOutline(JSON.stringify(outlineEntries));
      } else {
        channel.setDocumentOutline(null);
      }
    }).catch(function(error) {
      console.log("getSimplifiedOutline error: " + error);
    });
  }).catch(function(error) {
    console.log("pdfDoc.getOutline error: " + error);
  });
};
globalThis.abortDocumentOutline = function() {
  outlineAbort.abort();
  outlineAbort = new AbortController();
};
globalThis.toggleTextLayerVisibility = function() {
  let textLayerForeground = "red";
  let textLayerOpacity = 1;
  if (isTextLayerVisible) {
    textLayerForeground = "transparent";
    textLayerOpacity = 0.2;
  }
  document.documentElement.style.setProperty("--text-layer-foreground", textLayerForeground);
  document.documentElement.style.setProperty("--text-layer-opacity", textLayerOpacity.toString());
  isTextLayerVisible = !isTextLayerVisible;
};
globalThis.loadDocument = function() {
  const pdfPassword = channel.getPassword();
  const loadingTask = __webpack_exports__getDocument({
    url: "https://localhost/placeholder.pdf",
    cMapUrl: "https://localhost/cmaps/",
    cMapPacked: true,
    password: pdfPassword,
    isEvalSupported: false,
    // If a font isn't embedded, the viewer falls back to default system fonts. On Android,
    // there often isn't a good substitution provided by the OS, so we need to bundle standard
    // fonts to improve the rendering of certain PDFs:
    //
    // https://github.com/mozilla/pdf.js/pull/18465
    // https://bugzilla.mozilla.org/show_bug.cgi?id=1882613
    useSystemFonts: false,
    standardFontDataUrl: "https://localhost/standard_fonts/"
  });
  loadingTask.onPassword = (_, error) => {
    if (error === __webpack_exports__PasswordResponses.NEED_PASSWORD) {
      channel.showPasswordPrompt();
    } else if (error === __webpack_exports__PasswordResponses.INCORRECT_PASSWORD) {
      channel.invalidPassword();
    }
  };
  loadingTask.promise.then(function(newDoc) {
    channel.onLoaded();
    pdfDoc = newDoc;
    channel.setNumPages(pdfDoc.numPages);
    pdfDoc.getMetadata().then(function(data) {
      channel.setDocumentProperties(JSON.stringify(data.info));
    }).catch(function(error) {
      console.log("getMetadata error: " + error);
    });
    pdfDoc.getOutline().then(function(outline) {
      channel.setHasDocumentOutline(outline && outline.length > 0);
    }).catch(function(error) {
      console.log("getOutline error: " + error);
    });
    renderPage(channel.getPage(), false, false);
  }, function(reason) {
    console.error(reason.name + ": " + reason.message);
  });
};
globalThis.onresize = () => {
  setLayerTransform(canvas.clientWidth, canvas.clientHeight, textLayerDiv);
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsid2VicGFjazovL3BkZi5qcy93ZWJwYWNrL2Jvb3RzdHJhcCIsICJ3ZWJwYWNrOi8vcGRmLmpzL3dlYnBhY2svcnVudGltZS9kZWZpbmUlMjBwcm9wZXJ0eSUyMGdldHRlcnMiLCAid2VicGFjazovL3BkZi5qcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHklMjBzaG9ydGhhbmQiLCAid2VicGFjazovL3BkZi5qcy9zcmMvc2hhcmVkL3V0aWwuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9kaXNwbGF5X3V0aWxzLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL3Rvb2xiYXIuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9lZGl0b3IvdG9vbHMuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9lZGl0b3IvYWx0X3RleHQuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS90b3VjaF9tYW5hZ2VyLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL2VkaXRvci5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9zaGFyZWQvbXVybXVyaGFzaDMuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9hbm5vdGF0aW9uX3N0b3JhZ2UuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9mb250X2xvYWRlci5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9zaGFyZWQvbWVzc2FnZV9oYW5kbGVyLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvY2FudmFzX2ZhY3RvcnkuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9jbWFwX3JlYWRlcl9mYWN0b3J5LmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZmlsdGVyX2ZhY3RvcnkuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9zdGFuZGFyZF9mb250ZGF0YV9mYWN0b3J5LmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvd2FzbV9mYWN0b3J5LmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvbm9kZV91dGlscy5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L3BhdHRlcm5faGVscGVyLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL3NoYXJlZC9pbWFnZV91dGlscy5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L2NhbnZhcy5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L3dvcmtlcl9vcHRpb25zLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvbWV0YWRhdGEuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9vcHRpb25hbF9jb250ZW50X2NvbmZpZy5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L3RyYW5zcG9ydF9zdHJlYW0uanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9jb250ZW50X2Rpc3Bvc2l0aW9uLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvbmV0d29ya191dGlscy5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L2ZldGNoX3N0cmVhbS5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L25ldHdvcmsuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9ub2RlX3N0cmVhbS5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L3RleHRfbGF5ZXIuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS94ZmFfdGV4dC5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L2FwaS5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9zaGFyZWQvc2NyaXB0aW5nX3V0aWxzLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvc3ZnX2ZhY3RvcnkuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS94ZmFfbGF5ZXIuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9hbm5vdGF0aW9uX2xheWVyLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL2ZyZWV0ZXh0LmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL2RyYXdlcnMvb3V0bGluZS5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L2VkaXRvci9kcmF3ZXJzL2ZyZWVkcmF3LmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL2RyYXdlcnMvaGlnaGxpZ2h0LmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL2NvbG9yX3BpY2tlci5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L2VkaXRvci9oaWdobGlnaHQuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9lZGl0b3IvZHJhdy5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L2VkaXRvci9kcmF3ZXJzL2lua2RyYXcuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9lZGl0b3IvaW5rLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL2RyYXdlcnMvY29udG91ci5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9kaXNwbGF5L2VkaXRvci9kcmF3ZXJzL3NpZ25hdHVyZWRyYXcuanMiLCAid2VicGFjazovL3BkZi5qcy9zcmMvZGlzcGxheS9lZGl0b3Ivc2lnbmF0dXJlLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL3N0YW1wLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZWRpdG9yL2Fubm90YXRpb25fZWRpdG9yX2xheWVyLmpzIiwgIndlYnBhY2s6Ly9wZGYuanMvc3JjL2Rpc3BsYXkvZHJhd19sYXllci5qcyIsICJ3ZWJwYWNrOi8vcGRmLmpzL3NyYy9wZGYuanMiLCAiLi4vLi4vLi4vLi4vLi4vLi4vdmlld2VyL2pzL2luZGV4LmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwgIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsICJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwgIi8qIENvcHlyaWdodCAyMDEyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogZ2xvYmFscyBwcm9jZXNzICovXG5cbi8vIE5XLmpzIC8gRWxlY3Ryb24gaXMgYSBicm93c2VyIGNvbnRleHQsIGJ1dCBjb3BpZXMgc29tZSBOb2RlLmpzIG9iamVjdHM7IHNlZVxuLy8gaHR0cDovL2RvY3Mubndqcy5pby9lbi9sYXRlc3QvRm9yJTIwVXNlcnMvQWR2YW5jZWQvSmF2YVNjcmlwdCUyMENvbnRleHRzJTIwaW4lMjBOVy5qcy8jYWNjZXNzLW5vZGVqcy1hbmQtbndqcy1hcGktaW4tYnJvd3Nlci1jb250ZXh0XG4vLyBodHRwczovL3d3dy5lbGVjdHJvbmpzLm9yZy9kb2NzL2FwaS9wcm9jZXNzI3Byb2Nlc3N2ZXJzaW9uc2VsZWN0cm9uLXJlYWRvbmx5XG4vLyBodHRwczovL3d3dy5lbGVjdHJvbmpzLm9yZy9kb2NzL2FwaS9wcm9jZXNzI3Byb2Nlc3N0eXBlLXJlYWRvbmx5XG5jb25zdCBpc05vZGVKUyA9XG4gICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIkdFTkVSSUNcIikpICYmXG4gIHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmXG4gIHByb2Nlc3MgKyBcIlwiID09PSBcIltvYmplY3QgcHJvY2Vzc11cIiAmJlxuICAhcHJvY2Vzcy52ZXJzaW9ucy5udyAmJlxuICAhKHByb2Nlc3MudmVyc2lvbnMuZWxlY3Ryb24gJiYgcHJvY2Vzcy50eXBlICYmIHByb2Nlc3MudHlwZSAhPT0gXCJicm93c2VyXCIpO1xuXG5jb25zdCBJREVOVElUWV9NQVRSSVggPSBbMSwgMCwgMCwgMSwgMCwgMF07XG5jb25zdCBGT05UX0lERU5USVRZX01BVFJJWCA9IFswLjAwMSwgMCwgMCwgMC4wMDEsIDAsIDBdO1xuXG4vLyBSZXByZXNlbnQgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIGhlaWdodCBvZiBhIHNpbmdsZS1saW5lIGZpZWxkIG92ZXJcbi8vIHRoZSBmb250IHNpemUuIEFjcm9iYXQgc2VlbXMgdG8gdXNlIHRoaXMgdmFsdWUuXG5jb25zdCBMSU5FX0ZBQ1RPUiA9IDEuMzU7XG5jb25zdCBMSU5FX0RFU0NFTlRfRkFDVE9SID0gMC4zNTtcbmNvbnN0IEJBU0VMSU5FX0ZBQ1RPUiA9IExJTkVfREVTQ0VOVF9GQUNUT1IgLyBMSU5FX0ZBQ1RPUjtcblxuLyoqXG4gKiBSZWZlciB0byB0aGUgYFdvcmtlclRyYW5zcG9ydC5nZXRSZW5kZXJpbmdJbnRlbnRgLW1ldGhvZCBpbiB0aGUgQVBJLCB0byBzZWVcbiAqIGhvdyB0aGVzZSBmbGFncyBhcmUgYmVpbmcgdXNlZDpcbiAqICAtIEFOWSwgRElTUExBWSwgYW5kIFBSSU5UIGFyZSB0aGUgbm9ybWFsIHJlbmRlcmluZyBpbnRlbnRzLCBub3RlIHRoZVxuICogICAgYFBERlBhZ2VQcm94eS57cmVuZGVyLCBnZXRPcGVyYXRvckxpc3QsIGdldEFubm90YXRpb25zfWAtbWV0aG9kcy5cbiAqICAtIFNBVkUgaXMgdXNlZCwgb24gdGhlIHdvcmtlci10aHJlYWQsIHdoZW4gc2F2aW5nIG1vZGlmaWVkIGFubm90YXRpb25zLlxuICogIC0gQU5OT1RBVElPTlNfRk9STVMsIEFOTk9UQVRJT05TX1NUT1JBR0UsIEFOTk9UQVRJT05TX0RJU0FCTEUgY29udHJvbCB3aGljaFxuICogICAgYW5ub3RhdGlvbnMgYXJlIHJlbmRlcmVkIG9udG8gdGhlIGNhbnZhcyAoaS5lLiBieSBiZWluZyBpbmNsdWRlZCBpbiB0aGVcbiAqICAgIG9wZXJhdG9yTGlzdCksIG5vdGUgdGhlIGBQREZQYWdlUHJveHkue3JlbmRlciwgZ2V0T3BlcmF0b3JMaXN0fWAtbWV0aG9kc1xuICogICAgYW5kIHRoZWlyIGBhbm5vdGF0aW9uTW9kZWAtb3B0aW9uLlxuICogIC0gSVNfRURJVElORyBpcyB1c2VkIHdoZW4gZWRpdGluZyBpcyBhY3RpdmUgaW4gdGhlIHZpZXdlci5cbiAqICAtIE9QTElTVCBpcyB1c2VkIHdpdGggdGhlIGBQREZQYWdlUHJveHkuZ2V0T3BlcmF0b3JMaXN0YC1tZXRob2QsIG5vdGUgdGhlXG4gKiAgICBgT3BlcmF0b3JMaXN0YC1jb25zdHJ1Y3RvciAob24gdGhlIHdvcmtlci10aHJlYWQpLlxuICovXG5jb25zdCBSZW5kZXJpbmdJbnRlbnRGbGFnID0ge1xuICBBTlk6IDB4MDEsXG4gIERJU1BMQVk6IDB4MDIsXG4gIFBSSU5UOiAweDA0LFxuICBTQVZFOiAweDA4LFxuICBBTk5PVEFUSU9OU19GT1JNUzogMHgxMCxcbiAgQU5OT1RBVElPTlNfU1RPUkFHRTogMHgyMCxcbiAgQU5OT1RBVElPTlNfRElTQUJMRTogMHg0MCxcbiAgSVNfRURJVElORzogMHg4MCxcbiAgT1BMSVNUOiAweDEwMCxcbn07XG5cbmNvbnN0IEFubm90YXRpb25Nb2RlID0ge1xuICBESVNBQkxFOiAwLFxuICBFTkFCTEU6IDEsXG4gIEVOQUJMRV9GT1JNUzogMixcbiAgRU5BQkxFX1NUT1JBR0U6IDMsXG59O1xuXG5jb25zdCBBbm5vdGF0aW9uRWRpdG9yUHJlZml4ID0gXCJwZGZqc19pbnRlcm5hbF9lZGl0b3JfXCI7XG5cbmNvbnN0IEFubm90YXRpb25FZGl0b3JUeXBlID0ge1xuICBESVNBQkxFOiAtMSxcbiAgTk9ORTogMCxcbiAgRlJFRVRFWFQ6IDMsXG4gIEhJR0hMSUdIVDogOSxcbiAgU1RBTVA6IDEzLFxuICBJTks6IDE1LFxuICBTSUdOQVRVUkU6IDEwMSxcbn07XG5cbmNvbnN0IEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlID0ge1xuICBSRVNJWkU6IDEsXG4gIENSRUFURTogMixcbiAgRlJFRVRFWFRfU0laRTogMTEsXG4gIEZSRUVURVhUX0NPTE9SOiAxMixcbiAgRlJFRVRFWFRfT1BBQ0lUWTogMTMsXG4gIElOS19DT0xPUjogMjEsXG4gIElOS19USElDS05FU1M6IDIyLFxuICBJTktfT1BBQ0lUWTogMjMsXG4gIEhJR0hMSUdIVF9DT0xPUjogMzEsXG4gIEhJR0hMSUdIVF9ERUZBVUxUX0NPTE9SOiAzMixcbiAgSElHSExJR0hUX1RISUNLTkVTUzogMzMsXG4gIEhJR0hMSUdIVF9GUkVFOiAzNCxcbiAgSElHSExJR0hUX1NIT1dfQUxMOiAzNSxcbiAgRFJBV19TVEVQOiA0MSxcbn07XG5cbi8vIFBlcm1pc3Npb24gZmxhZ3MgZnJvbSBUYWJsZSAyMiwgU2VjdGlvbiA3LjYuMy4yIG9mIHRoZSBQREYgc3BlY2lmaWNhdGlvbi5cbmNvbnN0IFBlcm1pc3Npb25GbGFnID0ge1xuICBQUklOVDogMHgwNCxcbiAgTU9ESUZZX0NPTlRFTlRTOiAweDA4LFxuICBDT1BZOiAweDEwLFxuICBNT0RJRllfQU5OT1RBVElPTlM6IDB4MjAsXG4gIEZJTExfSU5URVJBQ1RJVkVfRk9STVM6IDB4MTAwLFxuICBDT1BZX0ZPUl9BQ0NFU1NJQklMSVRZOiAweDIwMCxcbiAgQVNTRU1CTEU6IDB4NDAwLFxuICBQUklOVF9ISUdIX1FVQUxJVFk6IDB4ODAwLFxufTtcblxuY29uc3QgVGV4dFJlbmRlcmluZ01vZGUgPSB7XG4gIEZJTEw6IDAsXG4gIFNUUk9LRTogMSxcbiAgRklMTF9TVFJPS0U6IDIsXG4gIElOVklTSUJMRTogMyxcbiAgRklMTF9BRERfVE9fUEFUSDogNCxcbiAgU1RST0tFX0FERF9UT19QQVRIOiA1LFxuICBGSUxMX1NUUk9LRV9BRERfVE9fUEFUSDogNixcbiAgQUREX1RPX1BBVEg6IDcsXG4gIEZJTExfU1RST0tFX01BU0s6IDMsXG4gIEFERF9UT19QQVRIX0ZMQUc6IDQsXG59O1xuXG5jb25zdCBJbWFnZUtpbmQgPSB7XG4gIEdSQVlTQ0FMRV8xQlBQOiAxLFxuICBSR0JfMjRCUFA6IDIsXG4gIFJHQkFfMzJCUFA6IDMsXG59O1xuXG5jb25zdCBBbm5vdGF0aW9uVHlwZSA9IHtcbiAgVEVYVDogMSxcbiAgTElOSzogMixcbiAgRlJFRVRFWFQ6IDMsXG4gIExJTkU6IDQsXG4gIFNRVUFSRTogNSxcbiAgQ0lSQ0xFOiA2LFxuICBQT0xZR09OOiA3LFxuICBQT0xZTElORTogOCxcbiAgSElHSExJR0hUOiA5LFxuICBVTkRFUkxJTkU6IDEwLFxuICBTUVVJR0dMWTogMTEsXG4gIFNUUklLRU9VVDogMTIsXG4gIFNUQU1QOiAxMyxcbiAgQ0FSRVQ6IDE0LFxuICBJTks6IDE1LFxuICBQT1BVUDogMTYsXG4gIEZJTEVBVFRBQ0hNRU5UOiAxNyxcbiAgU09VTkQ6IDE4LFxuICBNT1ZJRTogMTksXG4gIFdJREdFVDogMjAsXG4gIFNDUkVFTjogMjEsXG4gIFBSSU5URVJNQVJLOiAyMixcbiAgVFJBUE5FVDogMjMsXG4gIFdBVEVSTUFSSzogMjQsXG4gIFRIUkVFRDogMjUsXG4gIFJFREFDVDogMjYsXG59O1xuXG5jb25zdCBBbm5vdGF0aW9uUmVwbHlUeXBlID0ge1xuICBHUk9VUDogXCJHcm91cFwiLFxuICBSRVBMWTogXCJSXCIsXG59O1xuXG5jb25zdCBBbm5vdGF0aW9uRmxhZyA9IHtcbiAgSU5WSVNJQkxFOiAweDAxLFxuICBISURERU46IDB4MDIsXG4gIFBSSU5UOiAweDA0LFxuICBOT1pPT006IDB4MDgsXG4gIE5PUk9UQVRFOiAweDEwLFxuICBOT1ZJRVc6IDB4MjAsXG4gIFJFQURPTkxZOiAweDQwLFxuICBMT0NLRUQ6IDB4ODAsXG4gIFRPR0dMRU5PVklFVzogMHgxMDAsXG4gIExPQ0tFRENPTlRFTlRTOiAweDIwMCxcbn07XG5cbmNvbnN0IEFubm90YXRpb25GaWVsZEZsYWcgPSB7XG4gIFJFQURPTkxZOiAweDAwMDAwMDEsXG4gIFJFUVVJUkVEOiAweDAwMDAwMDIsXG4gIE5PRVhQT1JUOiAweDAwMDAwMDQsXG4gIE1VTFRJTElORTogMHgwMDAxMDAwLFxuICBQQVNTV09SRDogMHgwMDAyMDAwLFxuICBOT1RPR0dMRVRPT0ZGOiAweDAwMDQwMDAsXG4gIFJBRElPOiAweDAwMDgwMDAsXG4gIFBVU0hCVVRUT046IDB4MDAxMDAwMCxcbiAgQ09NQk86IDB4MDAyMDAwMCxcbiAgRURJVDogMHgwMDQwMDAwLFxuICBTT1JUOiAweDAwODAwMDAsXG4gIEZJTEVTRUxFQ1Q6IDB4MDEwMDAwMCxcbiAgTVVMVElTRUxFQ1Q6IDB4MDIwMDAwMCxcbiAgRE9OT1RTUEVMTENIRUNLOiAweDA0MDAwMDAsXG4gIERPTk9UU0NST0xMOiAweDA4MDAwMDAsXG4gIENPTUI6IDB4MTAwMDAwMCxcbiAgUklDSFRFWFQ6IDB4MjAwMDAwMCxcbiAgUkFESU9TSU5VTklTT046IDB4MjAwMDAwMCxcbiAgQ09NTUlUT05TRUxDSEFOR0U6IDB4NDAwMDAwMCxcbn07XG5cbmNvbnN0IEFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUgPSB7XG4gIFNPTElEOiAxLFxuICBEQVNIRUQ6IDIsXG4gIEJFVkVMRUQ6IDMsXG4gIElOU0VUOiA0LFxuICBVTkRFUkxJTkU6IDUsXG59O1xuXG5jb25zdCBBbm5vdGF0aW9uQWN0aW9uRXZlbnRUeXBlID0ge1xuICBFOiBcIk1vdXNlIEVudGVyXCIsXG4gIFg6IFwiTW91c2UgRXhpdFwiLFxuICBEOiBcIk1vdXNlIERvd25cIixcbiAgVTogXCJNb3VzZSBVcFwiLFxuICBGbzogXCJGb2N1c1wiLFxuICBCbDogXCJCbHVyXCIsXG4gIFBPOiBcIlBhZ2VPcGVuXCIsXG4gIFBDOiBcIlBhZ2VDbG9zZVwiLFxuICBQVjogXCJQYWdlVmlzaWJsZVwiLFxuICBQSTogXCJQYWdlSW52aXNpYmxlXCIsXG4gIEs6IFwiS2V5c3Ryb2tlXCIsXG4gIEY6IFwiRm9ybWF0XCIsXG4gIFY6IFwiVmFsaWRhdGVcIixcbiAgQzogXCJDYWxjdWxhdGVcIixcbn07XG5cbmNvbnN0IERvY3VtZW50QWN0aW9uRXZlbnRUeXBlID0ge1xuICBXQzogXCJXaWxsQ2xvc2VcIixcbiAgV1M6IFwiV2lsbFNhdmVcIixcbiAgRFM6IFwiRGlkU2F2ZVwiLFxuICBXUDogXCJXaWxsUHJpbnRcIixcbiAgRFA6IFwiRGlkUHJpbnRcIixcbn07XG5cbmNvbnN0IFBhZ2VBY3Rpb25FdmVudFR5cGUgPSB7XG4gIE86IFwiUGFnZU9wZW5cIixcbiAgQzogXCJQYWdlQ2xvc2VcIixcbn07XG5cbmNvbnN0IFZlcmJvc2l0eUxldmVsID0ge1xuICBFUlJPUlM6IDAsXG4gIFdBUk5JTkdTOiAxLFxuICBJTkZPUzogNSxcbn07XG5cbi8vIEFsbCB0aGUgcG9zc2libGUgb3BlcmF0aW9ucyBmb3IgYW4gb3BlcmF0b3IgbGlzdC5cbmNvbnN0IE9QUyA9IHtcbiAgLy8gSW50ZW50aW9uYWxseSBzdGFydCBmcm9tIDEgc28gaXQgaXMgZWFzeSB0byBzcG90IGJhZCBvcGVyYXRvcnMgdGhhdCB3aWxsIGJlXG4gIC8vIDAncy5cbiAgLy8gUExFQVNFIE5PVEU6IFdlIHB1cnBvc2VseSBrZWVwIGFueSByZW1vdmVkIG9wZXJhdG9ycyBjb21tZW50ZWQgb3V0LCBzaW5jZVxuICAvLyAgICAgICAgICAgICAgcmUtbnVtYmVyaW5nIHRoZSBsaXN0IHdvdWxkIHJpc2sgYnJlYWtpbmcgdGhpcmQtcGFydHkgdXNlcnMuXG4gIGRlcGVuZGVuY3k6IDEsXG4gIHNldExpbmVXaWR0aDogMixcbiAgc2V0TGluZUNhcDogMyxcbiAgc2V0TGluZUpvaW46IDQsXG4gIHNldE1pdGVyTGltaXQ6IDUsXG4gIHNldERhc2g6IDYsXG4gIHNldFJlbmRlcmluZ0ludGVudDogNyxcbiAgc2V0RmxhdG5lc3M6IDgsXG4gIHNldEdTdGF0ZTogOSxcbiAgc2F2ZTogMTAsXG4gIHJlc3RvcmU6IDExLFxuICB0cmFuc2Zvcm06IDEyLFxuICBtb3ZlVG86IDEzLFxuICBsaW5lVG86IDE0LFxuICBjdXJ2ZVRvOiAxNSxcbiAgY3VydmVUbzI6IDE2LFxuICBjdXJ2ZVRvMzogMTcsXG4gIGNsb3NlUGF0aDogMTgsXG4gIHJlY3RhbmdsZTogMTksXG4gIHN0cm9rZTogMjAsXG4gIGNsb3NlU3Ryb2tlOiAyMSxcbiAgZmlsbDogMjIsXG4gIGVvRmlsbDogMjMsXG4gIGZpbGxTdHJva2U6IDI0LFxuICBlb0ZpbGxTdHJva2U6IDI1LFxuICBjbG9zZUZpbGxTdHJva2U6IDI2LFxuICBjbG9zZUVPRmlsbFN0cm9rZTogMjcsXG4gIGVuZFBhdGg6IDI4LFxuICBjbGlwOiAyOSxcbiAgZW9DbGlwOiAzMCxcbiAgYmVnaW5UZXh0OiAzMSxcbiAgZW5kVGV4dDogMzIsXG4gIHNldENoYXJTcGFjaW5nOiAzMyxcbiAgc2V0V29yZFNwYWNpbmc6IDM0LFxuICBzZXRIU2NhbGU6IDM1LFxuICBzZXRMZWFkaW5nOiAzNixcbiAgc2V0Rm9udDogMzcsXG4gIHNldFRleHRSZW5kZXJpbmdNb2RlOiAzOCxcbiAgc2V0VGV4dFJpc2U6IDM5LFxuICBtb3ZlVGV4dDogNDAsXG4gIHNldExlYWRpbmdNb3ZlVGV4dDogNDEsXG4gIHNldFRleHRNYXRyaXg6IDQyLFxuICBuZXh0TGluZTogNDMsXG4gIHNob3dUZXh0OiA0NCxcbiAgc2hvd1NwYWNlZFRleHQ6IDQ1LFxuICBuZXh0TGluZVNob3dUZXh0OiA0NixcbiAgbmV4dExpbmVTZXRTcGFjaW5nU2hvd1RleHQ6IDQ3LFxuICBzZXRDaGFyV2lkdGg6IDQ4LFxuICBzZXRDaGFyV2lkdGhBbmRCb3VuZHM6IDQ5LFxuICBzZXRTdHJva2VDb2xvclNwYWNlOiA1MCxcbiAgc2V0RmlsbENvbG9yU3BhY2U6IDUxLFxuICBzZXRTdHJva2VDb2xvcjogNTIsXG4gIHNldFN0cm9rZUNvbG9yTjogNTMsXG4gIHNldEZpbGxDb2xvcjogNTQsXG4gIHNldEZpbGxDb2xvck46IDU1LFxuICBzZXRTdHJva2VHcmF5OiA1NixcbiAgc2V0RmlsbEdyYXk6IDU3LFxuICBzZXRTdHJva2VSR0JDb2xvcjogNTgsXG4gIHNldEZpbGxSR0JDb2xvcjogNTksXG4gIHNldFN0cm9rZUNNWUtDb2xvcjogNjAsXG4gIHNldEZpbGxDTVlLQ29sb3I6IDYxLFxuICBzaGFkaW5nRmlsbDogNjIsXG4gIGJlZ2luSW5saW5lSW1hZ2U6IDYzLFxuICBiZWdpbkltYWdlRGF0YTogNjQsXG4gIGVuZElubGluZUltYWdlOiA2NSxcbiAgcGFpbnRYT2JqZWN0OiA2NixcbiAgbWFya1BvaW50OiA2NyxcbiAgbWFya1BvaW50UHJvcHM6IDY4LFxuICBiZWdpbk1hcmtlZENvbnRlbnQ6IDY5LFxuICBiZWdpbk1hcmtlZENvbnRlbnRQcm9wczogNzAsXG4gIGVuZE1hcmtlZENvbnRlbnQ6IDcxLFxuICBiZWdpbkNvbXBhdDogNzIsXG4gIGVuZENvbXBhdDogNzMsXG4gIHBhaW50Rm9ybVhPYmplY3RCZWdpbjogNzQsXG4gIHBhaW50Rm9ybVhPYmplY3RFbmQ6IDc1LFxuICBiZWdpbkdyb3VwOiA3NixcbiAgZW5kR3JvdXA6IDc3LFxuICAvLyBiZWdpbkFubm90YXRpb25zOiA3OCxcbiAgLy8gZW5kQW5ub3RhdGlvbnM6IDc5LFxuICBiZWdpbkFubm90YXRpb246IDgwLFxuICBlbmRBbm5vdGF0aW9uOiA4MSxcbiAgLy8gcGFpbnRKcGVnWE9iamVjdDogODIsXG4gIHBhaW50SW1hZ2VNYXNrWE9iamVjdDogODMsXG4gIHBhaW50SW1hZ2VNYXNrWE9iamVjdEdyb3VwOiA4NCxcbiAgcGFpbnRJbWFnZVhPYmplY3Q6IDg1LFxuICBwYWludElubGluZUltYWdlWE9iamVjdDogODYsXG4gIHBhaW50SW5saW5lSW1hZ2VYT2JqZWN0R3JvdXA6IDg3LFxuICBwYWludEltYWdlWE9iamVjdFJlcGVhdDogODgsXG4gIHBhaW50SW1hZ2VNYXNrWE9iamVjdFJlcGVhdDogODksXG4gIHBhaW50U29saWRDb2xvckltYWdlTWFzazogOTAsXG4gIGNvbnN0cnVjdFBhdGg6IDkxLFxuICBzZXRTdHJva2VUcmFuc3BhcmVudDogOTIsXG4gIHNldEZpbGxUcmFuc3BhcmVudDogOTMsXG59O1xuXG4vLyBJbiBvcmRlciB0byBoYXZlIGEgc3dpdGNoIHN0YXRlbWVudCB0aGF0IGlzIGZhc3QgKGkuZS4gd2hpY2ggdXNlIGEganVtcFxuLy8gdGFibGUpLCB3ZSBuZWVkIHRvIGhhdmUgdGhlIE9QUyBpbiBhIGNvbnRpZ3VvdXMgcmFuZ2UuXG5jb25zdCBEcmF3T1BTID0ge1xuICBtb3ZlVG86IDAsXG4gIGxpbmVUbzogMSxcbiAgY3VydmVUbzogMixcbiAgY2xvc2VQYXRoOiAzLFxufTtcblxuY29uc3QgUGFzc3dvcmRSZXNwb25zZXMgPSB7XG4gIE5FRURfUEFTU1dPUkQ6IDEsXG4gIElOQ09SUkVDVF9QQVNTV09SRDogMixcbn07XG5cbmxldCB2ZXJib3NpdHkgPSBWZXJib3NpdHlMZXZlbC5XQVJOSU5HUztcblxuZnVuY3Rpb24gc2V0VmVyYm9zaXR5TGV2ZWwobGV2ZWwpIHtcbiAgaWYgKE51bWJlci5pc0ludGVnZXIobGV2ZWwpKSB7XG4gICAgdmVyYm9zaXR5ID0gbGV2ZWw7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VmVyYm9zaXR5TGV2ZWwoKSB7XG4gIHJldHVybiB2ZXJib3NpdHk7XG59XG5cbi8vIEEgbm90aWNlIGZvciBkZXZzLiBUaGVzZSBhcmUgZ29vZCBmb3IgdGhpbmdzIHRoYXQgYXJlIGhlbHBmdWwgdG8gZGV2cywgc3VjaFxuLy8gYXMgd2FybmluZyB0aGF0IFdvcmtlcnMgd2VyZSBkaXNhYmxlZCwgd2hpY2ggaXMgaW1wb3J0YW50IHRvIGRldnMgYnV0IG5vdFxuLy8gZW5kIHVzZXJzLlxuZnVuY3Rpb24gaW5mbyhtc2cpIHtcbiAgaWYgKHZlcmJvc2l0eSA+PSBWZXJib3NpdHlMZXZlbC5JTkZPUykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2coYEluZm86ICR7bXNnfWApO1xuICB9XG59XG5cbi8vIE5vbi1mYXRhbCB3YXJuaW5ncy5cbmZ1bmN0aW9uIHdhcm4obXNnKSB7XG4gIGlmICh2ZXJib3NpdHkgPj0gVmVyYm9zaXR5TGV2ZWwuV0FSTklOR1MpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUubG9nKGBXYXJuaW5nOiAke21zZ31gKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1bnJlYWNoYWJsZShtc2cpIHtcbiAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG59XG5cbmZ1bmN0aW9uIGFzc2VydChjb25kLCBtc2cpIHtcbiAgaWYgKCFjb25kKSB7XG4gICAgdW5yZWFjaGFibGUobXNnKTtcbiAgfVxufVxuXG4vLyBDaGVja3MgaWYgVVJMcyB1c2Ugb25lIG9mIHRoZSBhbGxvd2VkIHByb3RvY29scywgZS5nLiB0byBhdm9pZCBYU1MuXG5mdW5jdGlvbiBfaXNWYWxpZFByb3RvY29sKHVybCkge1xuICBzd2l0Y2ggKHVybD8ucHJvdG9jb2wpIHtcbiAgICBjYXNlIFwiaHR0cDpcIjpcbiAgICBjYXNlIFwiaHR0cHM6XCI6XG4gICAgY2FzZSBcImZ0cDpcIjpcbiAgICBjYXNlIFwibWFpbHRvOlwiOlxuICAgIGNhc2UgXCJ0ZWw6XCI6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gY3JlYXRlIGEgdmFsaWQgYWJzb2x1dGUgVVJMLlxuICpcbiAqIEBwYXJhbSB7VVJMfHN0cmluZ30gdXJsIC0gQW4gYWJzb2x1dGUsIG9yIHJlbGF0aXZlLCBVUkwuXG4gKiBAcGFyYW0ge1VSTHxzdHJpbmd9IFtiYXNlVXJsXSAtIEFuIGFic29sdXRlIFVSTC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEByZXR1cm5zIEVpdGhlciBhIHZhbGlkIHtVUkx9LCBvciBgbnVsbGAgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBjcmVhdGVWYWxpZEFic29sdXRlVXJsKHVybCwgYmFzZVVybCA9IG51bGwsIG9wdGlvbnMgPSBudWxsKSB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIikge1xuICAgIC8vIExldCBVUkxzIGJlZ2lubmluZyB3aXRoIFwid3d3LlwiIGRlZmF1bHQgdG8gdXNpbmcgdGhlIFwiaHR0cDovL1wiIHByb3RvY29sLlxuICAgIGlmIChvcHRpb25zLmFkZERlZmF1bHRQcm90b2NvbCAmJiB1cmwuc3RhcnRzV2l0aChcInd3dy5cIikpIHtcbiAgICAgIGNvbnN0IGRvdHMgPSB1cmwubWF0Y2goL1xcLi9nKTtcbiAgICAgIC8vIEF2b2lkIGFjY2lkZW50YWxseSBtYXRjaGluZyBhICpyZWxhdGl2ZSogVVJMIHBvaW50aW5nIHRvIGEgZmlsZSBuYW1lZFxuICAgICAgLy8gZS5nLiBcInd3dy5wZGZcIiBvciBzaW1pbGFyLlxuICAgICAgaWYgKGRvdHM/Lmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHVybCA9IGBodHRwOi8vJHt1cmx9YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBY2NvcmRpbmcgdG8gSVNPIDMyMDAwLTE6MjAwOCwgc2VjdGlvbiAxMi42LjQuNywgVVJJcyBzaG91bGQgYmUgZW5jb2RlZFxuICAgIC8vIGluIDctYml0IEFTQ0lJLiBTb21lIGJhZCBQREZzIHVzZSBVVEYtOCBlbmNvZGluZzsgc2VlIGJ1ZyAxMTIyMjgwLlxuICAgIGlmIChvcHRpb25zLnRyeUNvbnZlcnRFbmNvZGluZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXJsID0gc3RyaW5nVG9VVEY4U3RyaW5nKHVybCk7XG4gICAgICB9IGNhdGNoIHt9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYWJzb2x1dGVVcmwgPSBiYXNlVXJsID8gVVJMLnBhcnNlKHVybCwgYmFzZVVybCkgOiBVUkwucGFyc2UodXJsKTtcbiAgcmV0dXJuIF9pc1ZhbGlkUHJvdG9jb2woYWJzb2x1dGVVcmwpID8gYWJzb2x1dGVVcmwgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBzaGFkb3cob2JqLCBwcm9wLCB2YWx1ZSwgbm9uU2VyaWFsaXphYmxlID0gZmFsc2UpIHtcbiAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkge1xuICAgIGFzc2VydChcbiAgICAgIHByb3AgaW4gb2JqLFxuICAgICAgYHNoYWRvdzogUHJvcGVydHkgXCIke3Byb3AgJiYgcHJvcC50b1N0cmluZygpfVwiIG5vdCBmb3VuZCBpbiBvYmplY3QuYFxuICAgICk7XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwge1xuICAgIHZhbHVlLFxuICAgIGVudW1lcmFibGU6ICFub25TZXJpYWxpemFibGUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgfSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBAdHlwZSB7YW55fVxuICovXG5jb25zdCBCYXNlRXhjZXB0aW9uID0gKGZ1bmN0aW9uIEJhc2VFeGNlcHRpb25DbG9zdXJlKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2hhZG93XG4gIGZ1bmN0aW9uIEJhc2VFeGNlcHRpb24obWVzc2FnZSwgbmFtZSkge1xuICAgIGlmIChcbiAgICAgICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpICYmXG4gICAgICB0aGlzLmNvbnN0cnVjdG9yID09PSBCYXNlRXhjZXB0aW9uXG4gICAgKSB7XG4gICAgICB1bnJlYWNoYWJsZShcIkNhbm5vdCBpbml0aWFsaXplIEJhc2VFeGNlcHRpb24uXCIpO1xuICAgIH1cbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gIH1cbiAgQmFzZUV4Y2VwdGlvbi5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTtcbiAgQmFzZUV4Y2VwdGlvbi5jb25zdHJ1Y3RvciA9IEJhc2VFeGNlcHRpb247XG5cbiAgcmV0dXJuIEJhc2VFeGNlcHRpb247XG59KSgpO1xuXG5jbGFzcyBQYXNzd29yZEV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2csIGNvZGUpIHtcbiAgICBzdXBlcihtc2csIFwiUGFzc3dvcmRFeGNlcHRpb25cIik7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgfVxufVxuXG5jbGFzcyBVbmtub3duRXJyb3JFeGNlcHRpb24gZXh0ZW5kcyBCYXNlRXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IobXNnLCBkZXRhaWxzKSB7XG4gICAgc3VwZXIobXNnLCBcIlVua25vd25FcnJvckV4Y2VwdGlvblwiKTtcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xuICB9XG59XG5cbmNsYXNzIEludmFsaWRQREZFeGNlcHRpb24gZXh0ZW5kcyBCYXNlRXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IobXNnKSB7XG4gICAgc3VwZXIobXNnLCBcIkludmFsaWRQREZFeGNlcHRpb25cIik7XG4gIH1cbn1cblxuY2xhc3MgUmVzcG9uc2VFeGNlcHRpb24gZXh0ZW5kcyBCYXNlRXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IobXNnLCBzdGF0dXMsIG1pc3NpbmcpIHtcbiAgICBzdXBlcihtc2csIFwiUmVzcG9uc2VFeGNlcHRpb25cIik7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgdGhpcy5taXNzaW5nID0gbWlzc2luZztcbiAgfVxufVxuXG4vKipcbiAqIEVycm9yIGNhdXNlZCBkdXJpbmcgcGFyc2luZyBQREYgZGF0YS5cbiAqL1xuY2xhc3MgRm9ybWF0RXJyb3IgZXh0ZW5kcyBCYXNlRXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IobXNnKSB7XG4gICAgc3VwZXIobXNnLCBcIkZvcm1hdEVycm9yXCIpO1xuICB9XG59XG5cbi8qKlxuICogRXJyb3IgdXNlZCB0byBpbmRpY2F0ZSB0YXNrIGNhbmNlbGxhdGlvbi5cbiAqL1xuY2xhc3MgQWJvcnRFeGNlcHRpb24gZXh0ZW5kcyBCYXNlRXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IobXNnKSB7XG4gICAgc3VwZXIobXNnLCBcIkFib3J0RXhjZXB0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9TdHJpbmcoYnl0ZXMpIHtcbiAgaWYgKHR5cGVvZiBieXRlcyAhPT0gXCJvYmplY3RcIiB8fCBieXRlcz8ubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICB1bnJlYWNoYWJsZShcIkludmFsaWQgYXJndW1lbnQgZm9yIGJ5dGVzVG9TdHJpbmdcIik7XG4gIH1cbiAgY29uc3QgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xuICBjb25zdCBNQVhfQVJHVU1FTlRfQ09VTlQgPSA4MTkyO1xuICBpZiAobGVuZ3RoIDwgTUFYX0FSR1VNRU5UX0NPVU5UKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYnl0ZXMpO1xuICB9XG4gIGNvbnN0IHN0ckJ1ZiA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBNQVhfQVJHVU1FTlRfQ09VTlQpIHtcbiAgICBjb25zdCBjaHVua0VuZCA9IE1hdGgubWluKGkgKyBNQVhfQVJHVU1FTlRfQ09VTlQsIGxlbmd0aCk7XG4gICAgY29uc3QgY2h1bmsgPSBieXRlcy5zdWJhcnJheShpLCBjaHVua0VuZCk7XG4gICAgc3RyQnVmLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBjaHVuaykpO1xuICB9XG4gIHJldHVybiBzdHJCdWYuam9pbihcIlwiKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHtcbiAgICB1bnJlYWNoYWJsZShcIkludmFsaWQgYXJndW1lbnQgZm9yIHN0cmluZ1RvQnl0ZXNcIik7XG4gIH1cbiAgY29uc3QgbGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgYnl0ZXNbaV0gPSBzdHIuY2hhckNvZGVBdChpKSAmIDB4ZmY7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG5mdW5jdGlvbiBzdHJpbmczMih2YWx1ZSkge1xuICBpZiAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmIE1hdGguYWJzKHZhbHVlKSA8IDIgKiogMzIsXG4gICAgICBgc3RyaW5nMzI6IFVuZXhwZWN0ZWQgaW5wdXQgXCIke3ZhbHVlfVwiLmBcbiAgICApO1xuICB9XG4gIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKFxuICAgICh2YWx1ZSA+PiAyNCkgJiAweGZmLFxuICAgICh2YWx1ZSA+PiAxNikgJiAweGZmLFxuICAgICh2YWx1ZSA+PiA4KSAmIDB4ZmYsXG4gICAgdmFsdWUgJiAweGZmXG4gICk7XG59XG5cbmZ1bmN0aW9uIG9iamVjdFNpemUob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aDtcbn1cblxuLy8gRW5zdXJlIHRoYXQgdGhlIHJldHVybmVkIE9iamVjdCBoYXMgYSBgbnVsbGAgcHJvdG90eXBlOyBoZW5jZSB3aHlcbi8vIGBPYmplY3QuZnJvbUVudHJpZXMoLi4uKWAgaXMgbm90IHVzZWQuXG5mdW5jdGlvbiBvYmplY3RGcm9tTWFwKG1hcCkge1xuICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBtYXApIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8vIENoZWNrcyB0aGUgZW5kaWFubmVzcyBvZiB0aGUgcGxhdGZvcm0uXG5mdW5jdGlvbiBpc0xpdHRsZUVuZGlhbigpIHtcbiAgY29uc3QgYnVmZmVyOCA9IG5ldyBVaW50OEFycmF5KDQpO1xuICBidWZmZXI4WzBdID0gMTtcbiAgY29uc3QgdmlldzMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcjguYnVmZmVyLCAwLCAxKTtcbiAgcmV0dXJuIHZpZXczMlswXSA9PT0gMTtcbn1cblxuLy8gQ2hlY2tzIGlmIGl0J3MgcG9zc2libGUgdG8gZXZhbCBKUyBleHByZXNzaW9ucy5cbmZ1bmN0aW9uIGlzRXZhbFN1cHBvcnRlZCgpIHtcbiAgdHJ5IHtcbiAgICBuZXcgRnVuY3Rpb24oXCJcIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3LCBuby1uZXctZnVuY1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuY2xhc3MgRmVhdHVyZVRlc3Qge1xuICBzdGF0aWMgZ2V0IGlzTGl0dGxlRW5kaWFuKCkge1xuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJpc0xpdHRsZUVuZGlhblwiLCBpc0xpdHRsZUVuZGlhbigpKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaXNFdmFsU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJpc0V2YWxTdXBwb3J0ZWRcIiwgaXNFdmFsU3VwcG9ydGVkKCkpO1xuICB9XG5cbiAgc3RhdGljIGdldCBpc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiaXNPZmZzY3JlZW5DYW52YXNTdXBwb3J0ZWRcIixcbiAgICAgIHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgIT09IFwidW5kZWZpbmVkXCJcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGdldCBpc0ltYWdlRGVjb2RlclN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiaXNJbWFnZURlY29kZXJTdXBwb3J0ZWRcIixcbiAgICAgIHR5cGVvZiBJbWFnZURlY29kZXIgIT09IFwidW5kZWZpbmVkXCJcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGdldCBwbGF0Zm9ybSgpIHtcbiAgICBpZiAoXG4gICAgICAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB8fFxuICAgICAgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvcj8ucGxhdGZvcm0gPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvcj8udXNlckFnZW50ID09PSBcInN0cmluZ1wiKVxuICAgICkge1xuICAgICAgY29uc3QgeyBwbGF0Zm9ybSwgdXNlckFnZW50IH0gPSBuYXZpZ2F0b3I7XG5cbiAgICAgIHJldHVybiBzaGFkb3codGhpcywgXCJwbGF0Zm9ybVwiLCB7XG4gICAgICAgIGlzQW5kcm9pZDogdXNlckFnZW50LmluY2x1ZGVzKFwiQW5kcm9pZFwiKSxcbiAgICAgICAgaXNMaW51eDogcGxhdGZvcm0uaW5jbHVkZXMoXCJMaW51eFwiKSxcbiAgICAgICAgaXNNYWM6IHBsYXRmb3JtLmluY2x1ZGVzKFwiTWFjXCIpLFxuICAgICAgICBpc1dpbmRvd3M6IHBsYXRmb3JtLmluY2x1ZGVzKFwiV2luXCIpLFxuICAgICAgICBpc0ZpcmVmb3g6XG4gICAgICAgICAgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkgfHxcbiAgICAgICAgICB1c2VyQWdlbnQuaW5jbHVkZXMoXCJGaXJlZm94XCIpLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJwbGF0Zm9ybVwiLCB7XG4gICAgICBpc0FuZHJvaWQ6IGZhbHNlLFxuICAgICAgaXNMaW51eDogZmFsc2UsXG4gICAgICBpc01hYzogZmFsc2UsXG4gICAgICBpc1dpbmRvd3M6IGZhbHNlLFxuICAgICAgaXNGaXJlZm94OiBmYWxzZSxcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaXNDU1NSb3VuZFN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiaXNDU1NSb3VuZFN1cHBvcnRlZFwiLFxuICAgICAgZ2xvYmFsVGhpcy5DU1M/LnN1cHBvcnRzPy4oXCJ3aWR0aDogcm91bmQoMS41cHgsIDFweClcIilcbiAgICApO1xuICB9XG59XG5cbmNvbnN0IGhleE51bWJlcnMgPSBBcnJheS5mcm9tKEFycmF5KDI1Nikua2V5cygpLCBuID0+XG4gIG4udG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKVxuKTtcblxuY2xhc3MgVXRpbCB7XG4gIHN0YXRpYyBtYWtlSGV4Q29sb3IociwgZywgYikge1xuICAgIHJldHVybiBgIyR7aGV4TnVtYmVyc1tyXX0ke2hleE51bWJlcnNbZ119JHtoZXhOdW1iZXJzW2JdfWA7XG4gIH1cblxuICAvLyBDb25jYXRlbmF0ZXMgdHdvIHRyYW5zZm9ybWF0aW9uIG1hdHJpY2VzIHRvZ2V0aGVyIGFuZCByZXR1cm5zIHRoZSByZXN1bHQuXG4gIHN0YXRpYyB0cmFuc2Zvcm0obTEsIG0yKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIG0xWzBdICogbTJbMF0gKyBtMVsyXSAqIG0yWzFdLFxuICAgICAgbTFbMV0gKiBtMlswXSArIG0xWzNdICogbTJbMV0sXG4gICAgICBtMVswXSAqIG0yWzJdICsgbTFbMl0gKiBtMlszXSxcbiAgICAgIG0xWzFdICogbTJbMl0gKyBtMVszXSAqIG0yWzNdLFxuICAgICAgbTFbMF0gKiBtMls0XSArIG0xWzJdICogbTJbNV0gKyBtMVs0XSxcbiAgICAgIG0xWzFdICogbTJbNF0gKyBtMVszXSAqIG0yWzVdICsgbTFbNV0sXG4gICAgXTtcbiAgfVxuXG4gIC8vIEZvciAyZCBhZmZpbmUgdHJhbnNmb3Jtc1xuICBzdGF0aWMgYXBwbHlUcmFuc2Zvcm0ocCwgbSkge1xuICAgIGNvbnN0IHh0ID0gcFswXSAqIG1bMF0gKyBwWzFdICogbVsyXSArIG1bNF07XG4gICAgY29uc3QgeXQgPSBwWzBdICogbVsxXSArIHBbMV0gKiBtWzNdICsgbVs1XTtcbiAgICByZXR1cm4gW3h0LCB5dF07XG4gIH1cblxuICBzdGF0aWMgYXBwbHlJbnZlcnNlVHJhbnNmb3JtKHAsIG0pIHtcbiAgICBjb25zdCBkID0gbVswXSAqIG1bM10gLSBtWzFdICogbVsyXTtcbiAgICBjb25zdCB4dCA9IChwWzBdICogbVszXSAtIHBbMV0gKiBtWzJdICsgbVsyXSAqIG1bNV0gLSBtWzRdICogbVszXSkgLyBkO1xuICAgIGNvbnN0IHl0ID0gKC1wWzBdICogbVsxXSArIHBbMV0gKiBtWzBdICsgbVs0XSAqIG1bMV0gLSBtWzVdICogbVswXSkgLyBkO1xuICAgIHJldHVybiBbeHQsIHl0XTtcbiAgfVxuXG4gIC8vIEFwcGxpZXMgdGhlIHRyYW5zZm9ybSB0byB0aGUgcmVjdGFuZ2xlIGFuZCBmaW5kcyB0aGUgbWluaW11bSBheGlhbGx5XG4gIC8vIGFsaWduZWQgYm91bmRpbmcgYm94LlxuICBzdGF0aWMgZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3gociwgbSkge1xuICAgIGNvbnN0IHAxID0gdGhpcy5hcHBseVRyYW5zZm9ybShyLCBtKTtcbiAgICBjb25zdCBwMiA9IHRoaXMuYXBwbHlUcmFuc2Zvcm0oci5zbGljZSgyLCA0KSwgbSk7XG4gICAgY29uc3QgcDMgPSB0aGlzLmFwcGx5VHJhbnNmb3JtKFtyWzBdLCByWzNdXSwgbSk7XG4gICAgY29uc3QgcDQgPSB0aGlzLmFwcGx5VHJhbnNmb3JtKFtyWzJdLCByWzFdXSwgbSk7XG4gICAgcmV0dXJuIFtcbiAgICAgIE1hdGgubWluKHAxWzBdLCBwMlswXSwgcDNbMF0sIHA0WzBdKSxcbiAgICAgIE1hdGgubWluKHAxWzFdLCBwMlsxXSwgcDNbMV0sIHA0WzFdKSxcbiAgICAgIE1hdGgubWF4KHAxWzBdLCBwMlswXSwgcDNbMF0sIHA0WzBdKSxcbiAgICAgIE1hdGgubWF4KHAxWzFdLCBwMlsxXSwgcDNbMV0sIHA0WzFdKSxcbiAgICBdO1xuICB9XG5cbiAgc3RhdGljIGludmVyc2VUcmFuc2Zvcm0obSkge1xuICAgIGNvbnN0IGQgPSBtWzBdICogbVszXSAtIG1bMV0gKiBtWzJdO1xuICAgIHJldHVybiBbXG4gICAgICBtWzNdIC8gZCxcbiAgICAgIC1tWzFdIC8gZCxcbiAgICAgIC1tWzJdIC8gZCxcbiAgICAgIG1bMF0gLyBkLFxuICAgICAgKG1bMl0gKiBtWzVdIC0gbVs0XSAqIG1bM10pIC8gZCxcbiAgICAgIChtWzRdICogbVsxXSAtIG1bNV0gKiBtWzBdKSAvIGQsXG4gICAgXTtcbiAgfVxuXG4gIC8vIFRoaXMgY2FsY3VsYXRpb24gdXNlcyBTaW5ndWxhciBWYWx1ZSBEZWNvbXBvc2l0aW9uLlxuICAvLyBUaGUgU1ZEIGNhbiBiZSByZXByZXNlbnRlZCB3aXRoIGZvcm11bGEgQSA9IFVTVi4gV2UgYXJlIGludGVyZXN0ZWQgaW4gdGhlXG4gIC8vIG1hdHJpeCBTIGhlcmUgYmVjYXVzZSBpdCByZXByZXNlbnRzIHRoZSBzY2FsZSB2YWx1ZXMuXG4gIHN0YXRpYyBzaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZShtKSB7XG4gICAgY29uc3QgdHJhbnNwb3NlID0gW21bMF0sIG1bMl0sIG1bMV0sIG1bM11dO1xuXG4gICAgLy8gTXVsdGlwbHkgbWF0cml4IG0gd2l0aCBpdHMgdHJhbnNwb3NlLlxuICAgIGNvbnN0IGEgPSBtWzBdICogdHJhbnNwb3NlWzBdICsgbVsxXSAqIHRyYW5zcG9zZVsyXTtcbiAgICBjb25zdCBiID0gbVswXSAqIHRyYW5zcG9zZVsxXSArIG1bMV0gKiB0cmFuc3Bvc2VbM107XG4gICAgY29uc3QgYyA9IG1bMl0gKiB0cmFuc3Bvc2VbMF0gKyBtWzNdICogdHJhbnNwb3NlWzJdO1xuICAgIGNvbnN0IGQgPSBtWzJdICogdHJhbnNwb3NlWzFdICsgbVszXSAqIHRyYW5zcG9zZVszXTtcblxuICAgIC8vIFNvbHZlIHRoZSBzZWNvbmQgZGVncmVlIHBvbHlub21pYWwgdG8gZ2V0IHJvb3RzLlxuICAgIGNvbnN0IGZpcnN0ID0gKGEgKyBkKSAvIDI7XG4gICAgY29uc3Qgc2Vjb25kID0gTWF0aC5zcXJ0KChhICsgZCkgKiogMiAtIDQgKiAoYSAqIGQgLSBjICogYikpIC8gMjtcbiAgICBjb25zdCBzeCA9IGZpcnN0ICsgc2Vjb25kIHx8IDE7XG4gICAgY29uc3Qgc3kgPSBmaXJzdCAtIHNlY29uZCB8fCAxO1xuXG4gICAgLy8gU2NhbGUgdmFsdWVzIGFyZSB0aGUgc3F1YXJlIHJvb3RzIG9mIHRoZSBlaWdlbnZhbHVlcy5cbiAgICByZXR1cm4gW01hdGguc3FydChzeCksIE1hdGguc3FydChzeSldO1xuICB9XG5cbiAgLy8gTm9ybWFsaXplIHJlY3RhbmdsZSByZWN0PVt4MSwgeTEsIHgyLCB5Ml0gc28gdGhhdCAoeDEseTEpIDwgKHgyLHkyKVxuICAvLyBGb3IgY29vcmRpbmF0ZSBzeXN0ZW1zIHdob3NlIG9yaWdpbiBsaWVzIGluIHRoZSBib3R0b20tbGVmdCwgdGhpc1xuICAvLyBtZWFucyBub3JtYWxpemF0aW9uIHRvIChCTCxUUikgb3JkZXJpbmcuIEZvciBzeXN0ZW1zIHdpdGggb3JpZ2luIGluIHRoZVxuICAvLyB0b3AtbGVmdCwgdGhpcyBtZWFucyAoVEwsQlIpIG9yZGVyaW5nLlxuICBzdGF0aWMgbm9ybWFsaXplUmVjdChyZWN0KSB7XG4gICAgY29uc3QgciA9IHJlY3Quc2xpY2UoMCk7IC8vIGNsb25lIHJlY3RcbiAgICBpZiAocmVjdFswXSA+IHJlY3RbMl0pIHtcbiAgICAgIHJbMF0gPSByZWN0WzJdO1xuICAgICAgclsyXSA9IHJlY3RbMF07XG4gICAgfVxuICAgIGlmIChyZWN0WzFdID4gcmVjdFszXSkge1xuICAgICAgclsxXSA9IHJlY3RbM107XG4gICAgICByWzNdID0gcmVjdFsxXTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgcmVjdGFuZ2xlIFt4MSwgeTEsIHgyLCB5Ml0gY29ycmVzcG9uZGluZyB0byB0aGVcbiAgLy8gaW50ZXJzZWN0aW9uIG9mIHJlY3QxIGFuZCByZWN0Mi4gSWYgbm8gaW50ZXJzZWN0aW9uLCByZXR1cm5zICdudWxsJ1xuICAvLyBUaGUgcmVjdGFuZ2xlIGNvb3JkaW5hdGVzIG9mIHJlY3QxLCByZWN0MiBzaG91bGQgYmUgW3gxLCB5MSwgeDIsIHkyXVxuICBzdGF0aWMgaW50ZXJzZWN0KHJlY3QxLCByZWN0Mikge1xuICAgIGNvbnN0IHhMb3cgPSBNYXRoLm1heChcbiAgICAgIE1hdGgubWluKHJlY3QxWzBdLCByZWN0MVsyXSksXG4gICAgICBNYXRoLm1pbihyZWN0MlswXSwgcmVjdDJbMl0pXG4gICAgKTtcbiAgICBjb25zdCB4SGlnaCA9IE1hdGgubWluKFxuICAgICAgTWF0aC5tYXgocmVjdDFbMF0sIHJlY3QxWzJdKSxcbiAgICAgIE1hdGgubWF4KHJlY3QyWzBdLCByZWN0MlsyXSlcbiAgICApO1xuICAgIGlmICh4TG93ID4geEhpZ2gpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB5TG93ID0gTWF0aC5tYXgoXG4gICAgICBNYXRoLm1pbihyZWN0MVsxXSwgcmVjdDFbM10pLFxuICAgICAgTWF0aC5taW4ocmVjdDJbMV0sIHJlY3QyWzNdKVxuICAgICk7XG4gICAgY29uc3QgeUhpZ2ggPSBNYXRoLm1pbihcbiAgICAgIE1hdGgubWF4KHJlY3QxWzFdLCByZWN0MVszXSksXG4gICAgICBNYXRoLm1heChyZWN0MlsxXSwgcmVjdDJbM10pXG4gICAgKTtcbiAgICBpZiAoeUxvdyA+IHlIaWdoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gW3hMb3csIHlMb3csIHhIaWdoLCB5SGlnaF07XG4gIH1cblxuICBzdGF0aWMgcG9pbnRCb3VuZGluZ0JveCh4LCB5LCBtaW5NYXgpIHtcbiAgICBtaW5NYXhbMF0gPSBNYXRoLm1pbihtaW5NYXhbMF0sIHgpO1xuICAgIG1pbk1heFsxXSA9IE1hdGgubWluKG1pbk1heFsxXSwgeSk7XG4gICAgbWluTWF4WzJdID0gTWF0aC5tYXgobWluTWF4WzJdLCB4KTtcbiAgICBtaW5NYXhbM10gPSBNYXRoLm1heChtaW5NYXhbM10sIHkpO1xuICB9XG5cbiAgc3RhdGljIHJlY3RCb3VuZGluZ0JveCh4MCwgeTAsIHgxLCB5MSwgbWluTWF4KSB7XG4gICAgbWluTWF4WzBdID0gTWF0aC5taW4obWluTWF4WzBdLCB4MCwgeDEpO1xuICAgIG1pbk1heFsxXSA9IE1hdGgubWluKG1pbk1heFsxXSwgeTAsIHkxKTtcbiAgICBtaW5NYXhbMl0gPSBNYXRoLm1heChtaW5NYXhbMl0sIHgwLCB4MSk7XG4gICAgbWluTWF4WzNdID0gTWF0aC5tYXgobWluTWF4WzNdLCB5MCwgeTEpO1xuICB9XG5cbiAgc3RhdGljICNnZXRFeHRyZW11bU9uQ3VydmUoeDAsIHgxLCB4MiwgeDMsIHkwLCB5MSwgeTIsIHkzLCB0LCBtaW5NYXgpIHtcbiAgICBpZiAodCA8PSAwIHx8IHQgPj0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtdCA9IDEgLSB0O1xuICAgIGNvbnN0IHR0ID0gdCAqIHQ7XG4gICAgY29uc3QgdHR0ID0gdHQgKiB0O1xuICAgIGNvbnN0IHggPSBtdCAqIChtdCAqIChtdCAqIHgwICsgMyAqIHQgKiB4MSkgKyAzICogdHQgKiB4MikgKyB0dHQgKiB4MztcbiAgICBjb25zdCB5ID0gbXQgKiAobXQgKiAobXQgKiB5MCArIDMgKiB0ICogeTEpICsgMyAqIHR0ICogeTIpICsgdHR0ICogeTM7XG4gICAgbWluTWF4WzBdID0gTWF0aC5taW4obWluTWF4WzBdLCB4KTtcbiAgICBtaW5NYXhbMV0gPSBNYXRoLm1pbihtaW5NYXhbMV0sIHkpO1xuICAgIG1pbk1heFsyXSA9IE1hdGgubWF4KG1pbk1heFsyXSwgeCk7XG4gICAgbWluTWF4WzNdID0gTWF0aC5tYXgobWluTWF4WzNdLCB5KTtcbiAgfVxuXG4gIHN0YXRpYyAjZ2V0RXh0cmVtdW0oeDAsIHgxLCB4MiwgeDMsIHkwLCB5MSwgeTIsIHkzLCBhLCBiLCBjLCBtaW5NYXgpIHtcbiAgICBpZiAoTWF0aC5hYnMoYSkgPCAxZS0xMikge1xuICAgICAgaWYgKE1hdGguYWJzKGIpID49IDFlLTEyKSB7XG4gICAgICAgIHRoaXMuI2dldEV4dHJlbXVtT25DdXJ2ZShcbiAgICAgICAgICB4MCxcbiAgICAgICAgICB4MSxcbiAgICAgICAgICB4MixcbiAgICAgICAgICB4MyxcbiAgICAgICAgICB5MCxcbiAgICAgICAgICB5MSxcbiAgICAgICAgICB5MixcbiAgICAgICAgICB5MyxcbiAgICAgICAgICAtYyAvIGIsXG4gICAgICAgICAgbWluTWF4XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGVsdGEgPSBiICoqIDIgLSA0ICogYyAqIGE7XG4gICAgaWYgKGRlbHRhIDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzcXJ0RGVsdGEgPSBNYXRoLnNxcnQoZGVsdGEpO1xuICAgIGNvbnN0IGEyID0gMiAqIGE7XG4gICAgdGhpcy4jZ2V0RXh0cmVtdW1PbkN1cnZlKFxuICAgICAgeDAsXG4gICAgICB4MSxcbiAgICAgIHgyLFxuICAgICAgeDMsXG4gICAgICB5MCxcbiAgICAgIHkxLFxuICAgICAgeTIsXG4gICAgICB5MyxcbiAgICAgICgtYiArIHNxcnREZWx0YSkgLyBhMixcbiAgICAgIG1pbk1heFxuICAgICk7XG4gICAgdGhpcy4jZ2V0RXh0cmVtdW1PbkN1cnZlKFxuICAgICAgeDAsXG4gICAgICB4MSxcbiAgICAgIHgyLFxuICAgICAgeDMsXG4gICAgICB5MCxcbiAgICAgIHkxLFxuICAgICAgeTIsXG4gICAgICB5MyxcbiAgICAgICgtYiAtIHNxcnREZWx0YSkgLyBhMixcbiAgICAgIG1pbk1heFxuICAgICk7XG4gIH1cblxuICAvLyBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hZG9iZS13ZWJwbGF0Zm9ybS9TbmFwLnN2Zy9ibG9iL2IzNjUyODc3MjJhNzI1MjYwMDBhYzRiZmNmMGNlNGNhYzJmYWEwMTUvc3JjL3BhdGguanMjTDg1MlxuICBzdGF0aWMgYmV6aWVyQm91bmRpbmdCb3goeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCBtaW5NYXgpIHtcbiAgICBtaW5NYXhbMF0gPSBNYXRoLm1pbihtaW5NYXhbMF0sIHgwLCB4Myk7XG4gICAgbWluTWF4WzFdID0gTWF0aC5taW4obWluTWF4WzFdLCB5MCwgeTMpO1xuICAgIG1pbk1heFsyXSA9IE1hdGgubWF4KG1pbk1heFsyXSwgeDAsIHgzKTtcbiAgICBtaW5NYXhbM10gPSBNYXRoLm1heChtaW5NYXhbM10sIHkwLCB5Myk7XG5cbiAgICB0aGlzLiNnZXRFeHRyZW11bShcbiAgICAgIHgwLFxuICAgICAgeDEsXG4gICAgICB4MixcbiAgICAgIHgzLFxuICAgICAgeTAsXG4gICAgICB5MSxcbiAgICAgIHkyLFxuICAgICAgeTMsXG4gICAgICAzICogKC14MCArIDMgKiAoeDEgLSB4MikgKyB4MyksXG4gICAgICA2ICogKHgwIC0gMiAqIHgxICsgeDIpLFxuICAgICAgMyAqICh4MSAtIHgwKSxcbiAgICAgIG1pbk1heFxuICAgICk7XG4gICAgdGhpcy4jZ2V0RXh0cmVtdW0oXG4gICAgICB4MCxcbiAgICAgIHgxLFxuICAgICAgeDIsXG4gICAgICB4MyxcbiAgICAgIHkwLFxuICAgICAgeTEsXG4gICAgICB5MixcbiAgICAgIHkzLFxuICAgICAgMyAqICgteTAgKyAzICogKHkxIC0geTIpICsgeTMpLFxuICAgICAgNiAqICh5MCAtIDIgKiB5MSArIHkyKSxcbiAgICAgIDMgKiAoeTEgLSB5MCksXG4gICAgICBtaW5NYXhcbiAgICApO1xuICB9XG59XG5cbmNvbnN0IFBERlN0cmluZ1RyYW5zbGF0ZVRhYmxlID0gW1xuICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAweDJkOCxcbiAgMHgyYzcsIDB4MmM2LCAweDJkOSwgMHgyZGQsIDB4MmRiLCAweDJkYSwgMHgyZGMsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDB4MjAyMiwgMHgyMDIwLCAweDIwMjEsIDB4MjAyNiwgMHgyMDE0LCAweDIwMTMsIDB4MTkyLFxuICAweDIwNDQsIDB4MjAzOSwgMHgyMDNhLCAweDIyMTIsIDB4MjAzMCwgMHgyMDFlLCAweDIwMWMsIDB4MjAxZCwgMHgyMDE4LFxuICAweDIwMTksIDB4MjAxYSwgMHgyMTIyLCAweGZiMDEsIDB4ZmIwMiwgMHgxNDEsIDB4MTUyLCAweDE2MCwgMHgxNzgsIDB4MTdkLFxuICAweDEzMSwgMHgxNDIsIDB4MTUzLCAweDE2MSwgMHgxN2UsIDAsIDB4MjBhYyxcbl07XG5cbmZ1bmN0aW9uIHN0cmluZ1RvUERGU3RyaW5nKHN0cikge1xuICAvLyBTZWUgc2VjdGlvbiA3LjkuMi4yIFRleHQgU3RyaW5nIFR5cGUuXG4gIC8vIFRoZSBzdHJpbmcgY2FuIGNvbnRhaW4gc29tZSBsYW5ndWFnZSBjb2RlcyBicmFja2V0ZWQgd2l0aCAweDBiLFxuICAvLyBzbyB3ZSBtdXN0IHJlbW92ZSB0aGVtLlxuICBpZiAoc3RyWzBdID49IFwiXFx4RUZcIikge1xuICAgIGxldCBlbmNvZGluZztcbiAgICBpZiAoc3RyWzBdID09PSBcIlxceEZFXCIgJiYgc3RyWzFdID09PSBcIlxceEZGXCIpIHtcbiAgICAgIGVuY29kaW5nID0gXCJ1dGYtMTZiZVwiO1xuICAgICAgaWYgKHN0ci5sZW5ndGggJSAyID09PSAxKSB7XG4gICAgICAgIHN0ciA9IHN0ci5zbGljZSgwLCAtMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzdHJbMF0gPT09IFwiXFx4RkZcIiAmJiBzdHJbMV0gPT09IFwiXFx4RkVcIikge1xuICAgICAgZW5jb2RpbmcgPSBcInV0Zi0xNmxlXCI7XG4gICAgICBpZiAoc3RyLmxlbmd0aCAlIDIgPT09IDEpIHtcbiAgICAgICAgc3RyID0gc3RyLnNsaWNlKDAsIC0xKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0clswXSA9PT0gXCJcXHhFRlwiICYmIHN0clsxXSA9PT0gXCJcXHhCQlwiICYmIHN0clsyXSA9PT0gXCJcXHhCRlwiKSB7XG4gICAgICBlbmNvZGluZyA9IFwidXRmLThcIjtcbiAgICB9XG5cbiAgICBpZiAoZW5jb2RpbmcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmcsIHsgZmF0YWw6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IHN0cmluZ1RvQnl0ZXMoc3RyKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlcik7XG4gICAgICAgIGlmICghZGVjb2RlZC5pbmNsdWRlcyhcIlxceDFiXCIpKSB7XG4gICAgICAgICAgcmV0dXJuIGRlY29kZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlY29kZWQucmVwbGFjZUFsbCgvXFx4MWJbXlxceDFiXSooPzpcXHgxYnwkKS9nLCBcIlwiKTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIHdhcm4oYHN0cmluZ1RvUERGU3RyaW5nOiBcIiR7ZXh9XCIuYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIElTTyBMYXRpbiAxXG4gIGNvbnN0IHN0ckJ1ZiA9IFtdO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBzdHIubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIGNvbnN0IGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKGNoYXJDb2RlID09PSAweDFiKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgIHdoaWxlICgrK2kgPCBpaSAmJiBzdHIuY2hhckNvZGVBdChpKSAhPT0gMHgxYikge31cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCBjb2RlID0gUERGU3RyaW5nVHJhbnNsYXRlVGFibGVbY2hhckNvZGVdO1xuICAgIHN0ckJ1Zi5wdXNoKGNvZGUgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpIDogc3RyLmNoYXJBdChpKSk7XG4gIH1cbiAgcmV0dXJuIHN0ckJ1Zi5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdUb1VURjhTdHJpbmcoc3RyKSB7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHN0cikpO1xufVxuXG5mdW5jdGlvbiB1dGY4U3RyaW5nVG9TdHJpbmcoc3RyKSB7XG4gIHJldHVybiB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSk7XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXlFcXVhbChhcnIxLCBhcnIyKSB7XG4gIGlmIChhcnIxLmxlbmd0aCAhPT0gYXJyMi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXJyMS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgaWYgKGFycjFbaV0gIT09IGFycjJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldE1vZGlmaWNhdGlvbkRhdGUoZGF0ZSA9IG5ldyBEYXRlKCkpIHtcbiAgY29uc3QgYnVmZmVyID0gW1xuICAgIGRhdGUuZ2V0VVRDRnVsbFllYXIoKS50b1N0cmluZygpLFxuICAgIChkYXRlLmdldFVUQ01vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSxcbiAgICBkYXRlLmdldFVUQ0RhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSxcbiAgICBkYXRlLmdldFVUQ0hvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIiksXG4gICAgZGF0ZS5nZXRVVENNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIiksXG4gICAgZGF0ZS5nZXRVVENTZWNvbmRzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIiksXG4gIF07XG5cbiAgcmV0dXJuIGJ1ZmZlci5qb2luKFwiXCIpO1xufVxuXG5sZXQgTm9ybWFsaXplUmVnZXggPSBudWxsO1xubGV0IE5vcm1hbGl6YXRpb25NYXAgPSBudWxsO1xuZnVuY3Rpb24gbm9ybWFsaXplVW5pY29kZShzdHIpIHtcbiAgaWYgKCFOb3JtYWxpemVSZWdleCkge1xuICAgIC8vIEluIG9yZGVyIHRvIGdlbmVyYXRlIHRoZSBmb2xsb3dpbmcgcmVnZXg6XG4gICAgLy8gIC0gY3JlYXRlIGEgUERGIGNvbnRhaW5pbmcgYWxsIHRoZSBjaGFycyBpbiB0aGUgcmFuZ2UgMDAwMC1GRkZGIHdpdGhcbiAgICAvLyAgICBhIE5GS0Mgd2hpY2ggaXMgZGlmZmVyZW50IG9mIHRoZSBjaGFyLlxuICAgIC8vICAtIGNvcHkgYW5kIHBhc3RlIGFsbCB0aG9zZSBjaGFycyBhbmQgZ2V0IHRoZSBvbmVzIHdoZXJlIE5GS0MgaXNcbiAgICAvLyAgICByZXF1aXJlZC5cbiAgICAvLyBJdCBhcHBlYXJzIHRoYXQgbW9zdCB0aGUgY2hhcnMgaGVyZSBjb250YWluIHNvbWUgbGlnYXR1cmVzLlxuICAgIE5vcm1hbGl6ZVJlZ2V4ID1cbiAgICAgIC8oW1xcdTAwYTBcXHUwMGI1XFx1MDM3ZVxcdTBlYjNcXHUyMDAwLVxcdTIwMGFcXHUyMDJmXFx1MjEyNlxcdWZiMDAtXFx1ZmIwNFxcdWZiMDZcXHVmYjIwLVxcdWZiMzZcXHVmYjM4LVxcdWZiM2NcXHVmYjNlXFx1ZmI0MC1cXHVmYjQxXFx1ZmI0My1cXHVmYjQ0XFx1ZmI0Ni1cXHVmYmExXFx1ZmJhNC1cXHVmYmE5XFx1ZmJhZS1cXHVmYmIxXFx1ZmJkMy1cXHVmYmRjXFx1ZmJkZS1cXHVmYmU3XFx1ZmJlYS1cXHVmYmY4XFx1ZmJmYy1cXHVmYmZkXFx1ZmMwMC1cXHVmYzVkXFx1ZmM2NC1cXHVmY2YxXFx1ZmNmNS1cXHVmZDNkXFx1ZmQ4OFxcdWZkZjRcXHVmZGZhLVxcdWZkZmJcXHVmZTcxXFx1ZmU3N1xcdWZlNzlcXHVmZTdiXFx1ZmU3ZF0rKXwoXFx1ZmIwNSspL2d1O1xuICAgIE5vcm1hbGl6YXRpb25NYXAgPSBuZXcgTWFwKFtbXCLvrIVcIiwgXCLFv3RcIl1dKTtcbiAgfVxuICByZXR1cm4gc3RyLnJlcGxhY2VBbGwoTm9ybWFsaXplUmVnZXgsIChfLCBwMSwgcDIpID0+XG4gICAgcDEgPyBwMS5ub3JtYWxpemUoXCJORktDXCIpIDogTm9ybWFsaXphdGlvbk1hcC5nZXQocDIpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGdldFV1aWQoKSB7XG4gIGlmIChcbiAgICAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB8fFxuICAgIHR5cGVvZiBjcnlwdG8ucmFuZG9tVVVJRCA9PT0gXCJmdW5jdGlvblwiXG4gICkge1xuICAgIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICB9XG4gIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KDMyKTtcbiAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhidWYpO1xuICByZXR1cm4gYnl0ZXNUb1N0cmluZyhidWYpO1xufVxuXG5jb25zdCBBbm5vdGF0aW9uUHJlZml4ID0gXCJwZGZqc19pbnRlcm5hbF9pZF9cIjtcblxuZnVuY3Rpb24gX2lzVmFsaWRFeHBsaWNpdERlc3QodmFsaWRSZWYsIHZhbGlkTmFtZSwgZGVzdCkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZGVzdCkgfHwgZGVzdC5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IFtwYWdlLCB6b29tLCAuLi5hcmdzXSA9IGRlc3Q7XG4gIGlmICghdmFsaWRSZWYocGFnZSkgJiYgIU51bWJlci5pc0ludGVnZXIocGFnZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCF2YWxpZE5hbWUoem9vbSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgYXJnc0xlbiA9IGFyZ3MubGVuZ3RoO1xuICBsZXQgYWxsb3dOdWxsID0gdHJ1ZTtcbiAgc3dpdGNoICh6b29tLm5hbWUpIHtcbiAgICBjYXNlIFwiWFlaXCI6XG4gICAgICBpZiAoYXJnc0xlbiA8IDIgfHwgYXJnc0xlbiA+IDMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIkZpdFwiOlxuICAgIGNhc2UgXCJGaXRCXCI6XG4gICAgICByZXR1cm4gYXJnc0xlbiA9PT0gMDtcbiAgICBjYXNlIFwiRml0SFwiOlxuICAgIGNhc2UgXCJGaXRCSFwiOlxuICAgIGNhc2UgXCJGaXRWXCI6XG4gICAgY2FzZSBcIkZpdEJWXCI6XG4gICAgICBpZiAoYXJnc0xlbiA+IDEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIkZpdFJcIjpcbiAgICAgIGlmIChhcmdzTGVuICE9PSA0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGFsbG93TnVsbCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGNvbnN0IGFyZyBvZiBhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgPT09IFwibnVtYmVyXCIgfHwgKGFsbG93TnVsbCAmJiBhcmcgPT09IG51bGwpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBUT09EOiBSZXBsYWNlIGFsbCBvY2N1cnJlbmNlcyBvZiB0aGlzIGZ1bmN0aW9uIHdpdGggYE1hdGguY2xhbXBgIG9uY2Vcbi8vICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW1hdGgtY2xhbXAvIGlzIGdlbmVyYWxseSBhdmFpbGFibGUuXG5mdW5jdGlvbiBNYXRoQ2xhbXAodiwgbWluLCBtYXgpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHYsIG1pbiksIG1heCk7XG59XG5cbi8vIFRPRE86IFJlbW92ZSB0aGlzIG9uY2UgYFVpbnQ4QXJyYXkucHJvdG90eXBlLnRvSGV4YCBpcyBnZW5lcmFsbHkgYXZhaWxhYmxlLlxuZnVuY3Rpb24gdG9IZXhVdGlsKGFycikge1xuICBpZiAoVWludDhBcnJheS5wcm90b3R5cGUudG9IZXgpIHtcbiAgICByZXR1cm4gYXJyLnRvSGV4KCk7XG4gIH1cbiAgcmV0dXJuIEFycmF5LmZyb20oYXJyLCBudW0gPT4gaGV4TnVtYmVyc1tudW1dKS5qb2luKFwiXCIpO1xufVxuXG4vLyBUT0RPOiBSZW1vdmUgdGhpcyBvbmNlIGBVaW50OEFycmF5LnByb3RvdHlwZS50b0Jhc2U2NGAgaXMgZ2VuZXJhbGx5XG4vLyAgICAgICBhdmFpbGFibGUuXG5mdW5jdGlvbiB0b0Jhc2U2NFV0aWwoYXJyKSB7XG4gIGlmIChVaW50OEFycmF5LnByb3RvdHlwZS50b0Jhc2U2NCkge1xuICAgIHJldHVybiBhcnIudG9CYXNlNjQoKTtcbiAgfVxuICByZXR1cm4gYnRvYShieXRlc1RvU3RyaW5nKGFycikpO1xufVxuXG4vLyBUT0RPOiBSZW1vdmUgdGhpcyBvbmNlIGBVaW50OEFycmF5LmZyb21CYXNlNjRgIGlzIGdlbmVyYWxseSBhdmFpbGFibGUuXG5mdW5jdGlvbiBmcm9tQmFzZTY0VXRpbChzdHIpIHtcbiAgaWYgKFVpbnQ4QXJyYXkuZnJvbUJhc2U2NCkge1xuICAgIHJldHVybiBVaW50OEFycmF5LmZyb21CYXNlNjQoc3RyKTtcbiAgfVxuICByZXR1cm4gc3RyaW5nVG9CeXRlcyhhdG9iKHN0cikpO1xufVxuXG4vLyBUT0RPOiBSZW1vdmUgdGhpcyBvbmNlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE5Mjg0OTNcbi8vICAgICAgIGlzIGZpeGVkLlxuaWYgKFxuICAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJTS0lQX0JBQkVMXCIpKSAmJlxuICB0eXBlb2YgUHJvbWlzZS50cnkgIT09IFwiZnVuY3Rpb25cIlxuKSB7XG4gIFByb21pc2UudHJ5ID0gZnVuY3Rpb24gKGZuLCAuLi5hcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgcmVzb2x2ZShmbiguLi5hcmdzKSk7XG4gICAgfSk7XG4gIH07XG59XG5cbi8vIFRPRE86IFJlbW92ZSB0aGlzIG9uY2UgdGhlIGBqYXZhc2NyaXB0Lm9wdGlvbnMuZXhwZXJpbWVudGFsLm1hdGhfc3VtcHJlY2lzZWBcbi8vICAgICAgIHByZWZlcmVuY2UgaXMgcmVtb3ZlZCBmcm9tIEZpcmVmb3guXG5pZiAodHlwZW9mIE1hdGguc3VtUHJlY2lzZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gIC8vIE5vdGUgdGhhdCB0aGlzIGlzbid0IGEgXCJwcm9wZXJcIiBwb2x5ZmlsbCwgYnV0IHNpbmNlIHdlJ3JlIG9ubHkgdXNpbmcgaXQgdG9cbiAgLy8gcmVwbGFjZSBgQXJyYXkucHJvdG90eXBlLnJlZHVjZSgpYCBpbnZvY2F0aW9ucyBpdCBzaG91bGQgYmUgZmluZS5cbiAgTWF0aC5zdW1QcmVjaXNlID0gZnVuY3Rpb24gKG51bWJlcnMpIHtcbiAgICByZXR1cm4gbnVtYmVycy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgfTtcbn1cblxuaWYgKFxuICB0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgIVBERkpTRGV2LnRlc3QoXCJTS0lQX0JBQkVMXCIpICYmXG4gIHR5cGVvZiBBYm9ydFNpZ25hbC5hbnkgIT09IFwiZnVuY3Rpb25cIlxuKSB7XG4gIEFib3J0U2lnbmFsLmFueSA9IGZ1bmN0aW9uIChpdGVyYWJsZSkge1xuICAgIGNvbnN0IGFjID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHsgc2lnbmFsIH0gPSBhYztcblxuICAgIC8vIFJldHVybiBpbW1lZGlhdGVseSBpZiBhbnkgb2YgdGhlIHNpZ25hbHMgYXJlIGFscmVhZHkgYWJvcnRlZC5cbiAgICBmb3IgKGNvbnN0IHMgb2YgaXRlcmFibGUpIHtcbiAgICAgIGlmIChzLmFib3J0ZWQpIHtcbiAgICAgICAgYWMuYWJvcnQocy5yZWFzb24pO1xuICAgICAgICByZXR1cm4gc2lnbmFsO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBSZWdpc3RlciBcImFib3J0XCIgbGlzdGVuZXJzIGZvciBhbGwgc2lnbmFscy5cbiAgICBmb3IgKGNvbnN0IHMgb2YgaXRlcmFibGUpIHtcbiAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJhYm9ydFwiLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgYWMuYWJvcnQocy5yZWFzb24pO1xuICAgICAgICB9LFxuICAgICAgICB7IHNpZ25hbCB9IC8vIEF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBsaXN0ZW5lci5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNpZ25hbDtcbiAgfTtcbn1cblxuZXhwb3J0IHtcbiAgX2lzVmFsaWRFeHBsaWNpdERlc3QsXG4gIEFib3J0RXhjZXB0aW9uLFxuICBBbm5vdGF0aW9uQWN0aW9uRXZlbnRUeXBlLFxuICBBbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLFxuICBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZSxcbiAgQW5ub3RhdGlvbkVkaXRvclByZWZpeCxcbiAgQW5ub3RhdGlvbkVkaXRvclR5cGUsXG4gIEFubm90YXRpb25GaWVsZEZsYWcsXG4gIEFubm90YXRpb25GbGFnLFxuICBBbm5vdGF0aW9uTW9kZSxcbiAgQW5ub3RhdGlvblByZWZpeCxcbiAgQW5ub3RhdGlvblJlcGx5VHlwZSxcbiAgQW5ub3RhdGlvblR5cGUsXG4gIGFzc2VydCxcbiAgQmFzZUV4Y2VwdGlvbixcbiAgQkFTRUxJTkVfRkFDVE9SLFxuICBieXRlc1RvU3RyaW5nLFxuICBjcmVhdGVWYWxpZEFic29sdXRlVXJsLFxuICBEb2N1bWVudEFjdGlvbkV2ZW50VHlwZSxcbiAgRHJhd09QUyxcbiAgRmVhdHVyZVRlc3QsXG4gIEZPTlRfSURFTlRJVFlfTUFUUklYLFxuICBGb3JtYXRFcnJvcixcbiAgZnJvbUJhc2U2NFV0aWwsXG4gIGdldE1vZGlmaWNhdGlvbkRhdGUsXG4gIGdldFV1aWQsXG4gIGdldFZlcmJvc2l0eUxldmVsLFxuICBoZXhOdW1iZXJzLFxuICBJREVOVElUWV9NQVRSSVgsXG4gIEltYWdlS2luZCxcbiAgaW5mbyxcbiAgSW52YWxpZFBERkV4Y2VwdGlvbixcbiAgaXNBcnJheUVxdWFsLFxuICBpc05vZGVKUyxcbiAgTElORV9ERVNDRU5UX0ZBQ1RPUixcbiAgTElORV9GQUNUT1IsXG4gIE1hdGhDbGFtcCxcbiAgbm9ybWFsaXplVW5pY29kZSxcbiAgb2JqZWN0RnJvbU1hcCxcbiAgb2JqZWN0U2l6ZSxcbiAgT1BTLFxuICBQYWdlQWN0aW9uRXZlbnRUeXBlLFxuICBQYXNzd29yZEV4Y2VwdGlvbixcbiAgUGFzc3dvcmRSZXNwb25zZXMsXG4gIFBlcm1pc3Npb25GbGFnLFxuICBSZW5kZXJpbmdJbnRlbnRGbGFnLFxuICBSZXNwb25zZUV4Y2VwdGlvbixcbiAgc2V0VmVyYm9zaXR5TGV2ZWwsXG4gIHNoYWRvdyxcbiAgc3RyaW5nMzIsXG4gIHN0cmluZ1RvQnl0ZXMsXG4gIHN0cmluZ1RvUERGU3RyaW5nLFxuICBzdHJpbmdUb1VURjhTdHJpbmcsXG4gIFRleHRSZW5kZXJpbmdNb2RlLFxuICB0b0Jhc2U2NFV0aWwsXG4gIHRvSGV4VXRpbCxcbiAgVW5rbm93bkVycm9yRXhjZXB0aW9uLFxuICB1bnJlYWNoYWJsZSxcbiAgdXRmOFN0cmluZ1RvU3RyaW5nLFxuICBVdGlsLFxuICBWZXJib3NpdHlMZXZlbCxcbiAgd2Fybixcbn07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTUgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEJhc2VFeGNlcHRpb24sXG4gIEZlYXR1cmVUZXN0LFxuICBzaGFkb3csXG4gIFV0aWwsXG4gIHdhcm4sXG59IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG5jb25zdCBTVkdfTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XG5cbmNsYXNzIFBpeGVsc1BlckluY2gge1xuICBzdGF0aWMgQ1NTID0gOTYuMDtcblxuICBzdGF0aWMgUERGID0gNzIuMDtcblxuICBzdGF0aWMgUERGX1RPX0NTU19VTklUUyA9IHRoaXMuQ1NTIC8gdGhpcy5QREY7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSh1cmwsIHR5cGUgPSBcInRleHRcIikge1xuICBpZiAoXG4gICAgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkgfHxcbiAgICBpc1ZhbGlkRmV0Y2hVcmwodXJsLCBkb2N1bWVudC5iYXNlVVJJKVxuICApIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgIH1cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJhcnJheWJ1ZmZlclwiOlxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcbiAgICAgIGNhc2UgXCJibG9iXCI6XG4gICAgICAgIHJldHVybiByZXNwb25zZS5ibG9iKCk7XG4gICAgICBjYXNlIFwianNvblwiOlxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xuICB9XG5cbiAgLy8gVGhlIEZldGNoIEFQSSBpcyBub3Qgc3VwcG9ydGVkLlxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICByZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgdXJsLCAvKiBhc3luYyA9ICovIHRydWUpO1xuICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gdHlwZTtcblxuICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDIwMCB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gMCkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiYXJyYXlidWZmZXJcIjpcbiAgICAgICAgICBjYXNlIFwiYmxvYlwiOlxuICAgICAgICAgIGNhc2UgXCJqc29uXCI6XG4gICAgICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzcG9uc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZWplY3QobmV3IEVycm9yKHJlcXVlc3Quc3RhdHVzVGV4dCkpO1xuICAgIH07XG5cbiAgICByZXF1ZXN0LnNlbmQobnVsbCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFBhZ2VWaWV3cG9ydFBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gdmlld0JveCAtIFRoZSB4TWluLCB5TWluLCB4TWF4IGFuZFxuICogICB5TWF4IGNvb3JkaW5hdGVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHVzZXJVbml0IC0gVGhlIHNpemUgb2YgdW5pdHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gc2NhbGUgLSBUaGUgc2NhbGUgb2YgdGhlIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJvdGF0aW9uIC0gVGhlIHJvdGF0aW9uLCBpbiBkZWdyZWVzLCBvZiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29mZnNldFhdIC0gVGhlIGhvcml6b250YWwsIGkuZS4geC1heGlzLCBvZmZzZXQuIFRoZVxuICogICBkZWZhdWx0IHZhbHVlIGlzIGAwYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0WV0gLSBUaGUgdmVydGljYWwsIGkuZS4geS1heGlzLCBvZmZzZXQuIFRoZVxuICogICBkZWZhdWx0IHZhbHVlIGlzIGAwYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RvbnRGbGlwXSAtIElmIHRydWUsIHRoZSB5LWF4aXMgd2lsbCBub3QgYmUgZmxpcHBlZC5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFBhZ2VWaWV3cG9ydENsb25lUGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzY2FsZV0gLSBUaGUgc2NhbGUsIG92ZXJyaWRpbmcgdGhlIG9uZSBpbiB0aGUgY2xvbmVkXG4gKiAgIHZpZXdwb3J0LiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdGhpcy5zY2FsZWAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSAtIFRoZSByb3RhdGlvbiwgaW4gZGVncmVlcywgb3ZlcnJpZGluZyB0aGUgb25lXG4gKiAgIGluIHRoZSBjbG9uZWQgdmlld3BvcnQuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0aGlzLnJvdGF0aW9uYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0WF0gLSBUaGUgaG9yaXpvbnRhbCwgaS5lLiB4LWF4aXMsIG9mZnNldC5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYHRoaXMub2Zmc2V0WGAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29mZnNldFldIC0gVGhlIHZlcnRpY2FsLCBpLmUuIHktYXhpcywgb2Zmc2V0LlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdGhpcy5vZmZzZXRZYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RvbnRGbGlwXSAtIElmIHRydWUsIHRoZSB4LWF4aXMgd2lsbCBub3QgYmUgZmxpcHBlZC5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAqL1xuXG4vKipcbiAqIFBERiBwYWdlIHZpZXdwb3J0IGNyZWF0ZWQgYmFzZWQgb24gc2NhbGUsIHJvdGF0aW9uIGFuZCBvZmZzZXQuXG4gKi9cbmNsYXNzIFBhZ2VWaWV3cG9ydCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1BhZ2VWaWV3cG9ydFBhcmFtZXRlcnN9XG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgdmlld0JveCxcbiAgICB1c2VyVW5pdCxcbiAgICBzY2FsZSxcbiAgICByb3RhdGlvbixcbiAgICBvZmZzZXRYID0gMCxcbiAgICBvZmZzZXRZID0gMCxcbiAgICBkb250RmxpcCA9IGZhbHNlLFxuICB9KSB7XG4gICAgdGhpcy52aWV3Qm94ID0gdmlld0JveDtcbiAgICB0aGlzLnVzZXJVbml0ID0gdXNlclVuaXQ7XG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICB0aGlzLm9mZnNldFggPSBvZmZzZXRYO1xuICAgIHRoaXMub2Zmc2V0WSA9IG9mZnNldFk7XG5cbiAgICBzY2FsZSAqPSB1c2VyVW5pdDsgLy8gVGFrZSB0aGUgdXNlclVuaXQgaW50byBhY2NvdW50LlxuXG4gICAgLy8gY3JlYXRpbmcgdHJhbnNmb3JtIHRvIGNvbnZlcnQgcGRmIGNvb3JkaW5hdGUgc3lzdGVtIHRvIHRoZSBub3JtYWxcbiAgICAvLyBjYW52YXMgbGlrZSBjb29yZGluYXRlcyB0YWtpbmcgaW4gYWNjb3VudCBzY2FsZSBhbmQgcm90YXRpb25cbiAgICBjb25zdCBjZW50ZXJYID0gKHZpZXdCb3hbMl0gKyB2aWV3Qm94WzBdKSAvIDI7XG4gICAgY29uc3QgY2VudGVyWSA9ICh2aWV3Qm94WzNdICsgdmlld0JveFsxXSkgLyAyO1xuICAgIGxldCByb3RhdGVBLCByb3RhdGVCLCByb3RhdGVDLCByb3RhdGVEO1xuICAgIC8vIE5vcm1hbGl6ZSB0aGUgcm90YXRpb24sIGJ5IGNsYW1waW5nIGl0IHRvIHRoZSBbMCwgMzYwKSByYW5nZS5cbiAgICByb3RhdGlvbiAlPSAzNjA7XG4gICAgaWYgKHJvdGF0aW9uIDwgMCkge1xuICAgICAgcm90YXRpb24gKz0gMzYwO1xuICAgIH1cbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICBjYXNlIDE4MDpcbiAgICAgICAgcm90YXRlQSA9IC0xO1xuICAgICAgICByb3RhdGVCID0gMDtcbiAgICAgICAgcm90YXRlQyA9IDA7XG4gICAgICAgIHJvdGF0ZUQgPSAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgOTA6XG4gICAgICAgIHJvdGF0ZUEgPSAwO1xuICAgICAgICByb3RhdGVCID0gMTtcbiAgICAgICAgcm90YXRlQyA9IDE7XG4gICAgICAgIHJvdGF0ZUQgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICByb3RhdGVBID0gMDtcbiAgICAgICAgcm90YXRlQiA9IC0xO1xuICAgICAgICByb3RhdGVDID0gLTE7XG4gICAgICAgIHJvdGF0ZUQgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcm90YXRlQSA9IDE7XG4gICAgICAgIHJvdGF0ZUIgPSAwO1xuICAgICAgICByb3RhdGVDID0gMDtcbiAgICAgICAgcm90YXRlRCA9IC0xO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIlBhZ2VWaWV3cG9ydDogSW52YWxpZCByb3RhdGlvbiwgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDkwIGRlZ3JlZXMuXCJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZG9udEZsaXApIHtcbiAgICAgIHJvdGF0ZUMgPSAtcm90YXRlQztcbiAgICAgIHJvdGF0ZUQgPSAtcm90YXRlRDtcbiAgICB9XG5cbiAgICBsZXQgb2Zmc2V0Q2FudmFzWCwgb2Zmc2V0Q2FudmFzWTtcbiAgICBsZXQgd2lkdGgsIGhlaWdodDtcbiAgICBpZiAocm90YXRlQSA9PT0gMCkge1xuICAgICAgb2Zmc2V0Q2FudmFzWCA9IE1hdGguYWJzKGNlbnRlclkgLSB2aWV3Qm94WzFdKSAqIHNjYWxlICsgb2Zmc2V0WDtcbiAgICAgIG9mZnNldENhbnZhc1kgPSBNYXRoLmFicyhjZW50ZXJYIC0gdmlld0JveFswXSkgKiBzY2FsZSArIG9mZnNldFk7XG4gICAgICB3aWR0aCA9ICh2aWV3Qm94WzNdIC0gdmlld0JveFsxXSkgKiBzY2FsZTtcbiAgICAgIGhlaWdodCA9ICh2aWV3Qm94WzJdIC0gdmlld0JveFswXSkgKiBzY2FsZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0Q2FudmFzWCA9IE1hdGguYWJzKGNlbnRlclggLSB2aWV3Qm94WzBdKSAqIHNjYWxlICsgb2Zmc2V0WDtcbiAgICAgIG9mZnNldENhbnZhc1kgPSBNYXRoLmFicyhjZW50ZXJZIC0gdmlld0JveFsxXSkgKiBzY2FsZSArIG9mZnNldFk7XG4gICAgICB3aWR0aCA9ICh2aWV3Qm94WzJdIC0gdmlld0JveFswXSkgKiBzY2FsZTtcbiAgICAgIGhlaWdodCA9ICh2aWV3Qm94WzNdIC0gdmlld0JveFsxXSkgKiBzY2FsZTtcbiAgICB9XG4gICAgLy8gY3JlYXRpbmcgdHJhbnNmb3JtIGZvciB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6XG4gICAgLy8gdHJhbnNsYXRlKC1jZW50ZXJYLCAtY2VudGVyWSksIHJvdGF0ZSBhbmQgZmxpcCB2ZXJ0aWNhbGx5LFxuICAgIC8vIHNjYWxlLCBhbmQgdHJhbnNsYXRlKG9mZnNldENhbnZhc1gsIG9mZnNldENhbnZhc1kpXG4gICAgdGhpcy50cmFuc2Zvcm0gPSBbXG4gICAgICByb3RhdGVBICogc2NhbGUsXG4gICAgICByb3RhdGVCICogc2NhbGUsXG4gICAgICByb3RhdGVDICogc2NhbGUsXG4gICAgICByb3RhdGVEICogc2NhbGUsXG4gICAgICBvZmZzZXRDYW52YXNYIC0gcm90YXRlQSAqIHNjYWxlICogY2VudGVyWCAtIHJvdGF0ZUMgKiBzY2FsZSAqIGNlbnRlclksXG4gICAgICBvZmZzZXRDYW52YXNZIC0gcm90YXRlQiAqIHNjYWxlICogY2VudGVyWCAtIHJvdGF0ZUQgKiBzY2FsZSAqIGNlbnRlclksXG4gICAgXTtcblxuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgb3JpZ2luYWwsIHVuLXNjYWxlZCwgdmlld3BvcnQgZGltZW5zaW9ucy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIGdldCByYXdEaW1zKCkge1xuICAgIGNvbnN0IGRpbXMgPSB0aGlzLnZpZXdCb3g7XG5cbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwicmF3RGltc1wiLCB7XG4gICAgICBwYWdlV2lkdGg6IGRpbXNbMl0gLSBkaW1zWzBdLFxuICAgICAgcGFnZUhlaWdodDogZGltc1szXSAtIGRpbXNbMV0sXG4gICAgICBwYWdlWDogZGltc1swXSxcbiAgICAgIHBhZ2VZOiBkaW1zWzFdLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb25lcyB2aWV3cG9ydCwgd2l0aCBvcHRpb25hbCBhZGRpdGlvbmFsIHByb3BlcnRpZXMuXG4gICAqIEBwYXJhbSB7UGFnZVZpZXdwb3J0Q2xvbmVQYXJhbWV0ZXJzfSBbcGFyYW1zXVxuICAgKiBAcmV0dXJucyB7UGFnZVZpZXdwb3J0fSBDbG9uZWQgdmlld3BvcnQuXG4gICAqL1xuICBjbG9uZSh7XG4gICAgc2NhbGUgPSB0aGlzLnNjYWxlLFxuICAgIHJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbixcbiAgICBvZmZzZXRYID0gdGhpcy5vZmZzZXRYLFxuICAgIG9mZnNldFkgPSB0aGlzLm9mZnNldFksXG4gICAgZG9udEZsaXAgPSBmYWxzZSxcbiAgfSA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQYWdlVmlld3BvcnQoe1xuICAgICAgdmlld0JveDogdGhpcy52aWV3Qm94LnNsaWNlKCksXG4gICAgICB1c2VyVW5pdDogdGhpcy51c2VyVW5pdCxcbiAgICAgIHNjYWxlLFxuICAgICAgcm90YXRpb24sXG4gICAgICBvZmZzZXRYLFxuICAgICAgb2Zmc2V0WSxcbiAgICAgIGRvbnRGbGlwLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIFBERiBwb2ludCB0byB0aGUgdmlld3BvcnQgY29vcmRpbmF0ZXMuIEZvciBleGFtcGxlcywgdXNlZnVsIGZvclxuICAgKiBjb252ZXJ0aW5nIFBERiBsb2NhdGlvbiBpbnRvIGNhbnZhcyBwaXhlbCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgeC1jb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSB5LWNvb3JkaW5hdGUuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgY29udGFpbmluZyBgeGAtIGFuZCBgeWAtY29vcmRpbmF0ZXMgb2YgdGhlXG4gICAqICAgcG9pbnQgaW4gdGhlIHZpZXdwb3J0IGNvb3JkaW5hdGUgc3BhY2UuXG4gICAqIEBzZWUge0BsaW5rIGNvbnZlcnRUb1BkZlBvaW50fVxuICAgKiBAc2VlIHtAbGluayBjb252ZXJ0VG9WaWV3cG9ydFJlY3RhbmdsZX1cbiAgICovXG4gIGNvbnZlcnRUb1ZpZXdwb3J0UG9pbnQoeCwgeSkge1xuICAgIHJldHVybiBVdGlsLmFwcGx5VHJhbnNmb3JtKFt4LCB5XSwgdGhpcy50cmFuc2Zvcm0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIFBERiByZWN0YW5nbGUgdG8gdGhlIHZpZXdwb3J0IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge0FycmF5fSByZWN0IC0gVGhlIHhNaW4sIHlNaW4sIHhNYXggYW5kIHlNYXggY29vcmRpbmF0ZXMuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgY29udGFpbmluZyBjb3JyZXNwb25kaW5nIGNvb3JkaW5hdGVzIG9mIHRoZVxuICAgKiAgIHJlY3RhbmdsZSBpbiB0aGUgdmlld3BvcnQgY29vcmRpbmF0ZSBzcGFjZS5cbiAgICogQHNlZSB7QGxpbmsgY29udmVydFRvVmlld3BvcnRQb2ludH1cbiAgICovXG4gIGNvbnZlcnRUb1ZpZXdwb3J0UmVjdGFuZ2xlKHJlY3QpIHtcbiAgICBjb25zdCB0b3BMZWZ0ID0gVXRpbC5hcHBseVRyYW5zZm9ybShbcmVjdFswXSwgcmVjdFsxXV0sIHRoaXMudHJhbnNmb3JtKTtcbiAgICBjb25zdCBib3R0b21SaWdodCA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0oW3JlY3RbMl0sIHJlY3RbM11dLCB0aGlzLnRyYW5zZm9ybSk7XG4gICAgcmV0dXJuIFt0b3BMZWZ0WzBdLCB0b3BMZWZ0WzFdLCBib3R0b21SaWdodFswXSwgYm90dG9tUmlnaHRbMV1dO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHZpZXdwb3J0IGNvb3JkaW5hdGVzIHRvIHRoZSBQREYgbG9jYXRpb24uIEZvciBleGFtcGxlcywgdXNlZnVsXG4gICAqIGZvciBjb252ZXJ0aW5nIGNhbnZhcyBwaXhlbCBsb2NhdGlvbiBpbnRvIFBERiBvbmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHgtY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBUaGUgeS1jb29yZGluYXRlLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IGNvbnRhaW5pbmcgYHhgLSBhbmQgYHlgLWNvb3JkaW5hdGVzIG9mIHRoZVxuICAgKiAgIHBvaW50IGluIHRoZSBQREYgY29vcmRpbmF0ZSBzcGFjZS5cbiAgICogQHNlZSB7QGxpbmsgY29udmVydFRvVmlld3BvcnRQb2ludH1cbiAgICovXG4gIGNvbnZlcnRUb1BkZlBvaW50KHgsIHkpIHtcbiAgICByZXR1cm4gVXRpbC5hcHBseUludmVyc2VUcmFuc2Zvcm0oW3gsIHldLCB0aGlzLnRyYW5zZm9ybSk7XG4gIH1cbn1cblxuY2xhc3MgUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uIGV4dGVuZHMgQmFzZUV4Y2VwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG1zZywgZXh0cmFEZWxheSA9IDApIHtcbiAgICBzdXBlcihtc2csIFwiUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uXCIpO1xuICAgIHRoaXMuZXh0cmFEZWxheSA9IGV4dHJhRGVsYXk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNEYXRhU2NoZW1lKHVybCkge1xuICBjb25zdCBpaSA9IHVybC5sZW5ndGg7XG4gIGxldCBpID0gMDtcbiAgd2hpbGUgKGkgPCBpaSAmJiB1cmxbaV0udHJpbSgpID09PSBcIlwiKSB7XG4gICAgaSsrO1xuICB9XG4gIHJldHVybiB1cmwuc3Vic3RyaW5nKGksIGkgKyA1KS50b0xvd2VyQ2FzZSgpID09PSBcImRhdGE6XCI7XG59XG5cbmZ1bmN0aW9uIGlzUGRmRmlsZShmaWxlbmFtZSkge1xuICByZXR1cm4gdHlwZW9mIGZpbGVuYW1lID09PSBcInN0cmluZ1wiICYmIC9cXC5wZGYkL2kudGVzdChmaWxlbmFtZSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZmlsZW5hbWUgZnJvbSBhIGdpdmVuIFVSTC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldEZpbGVuYW1lRnJvbVVybCh1cmwpIHtcbiAgW3VybF0gPSB1cmwuc3BsaXQoL1sjP10vLCAxKTtcbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcodXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpbGVuYW1lIG9yIGd1ZXNzZWQgZmlsZW5hbWUgZnJvbSB0aGUgdXJsIChzZWUgaXNzdWUgMzQ1NSkuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIG9yaWdpbmFsIFBERiBsb2NhdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0RmlsZW5hbWUgLSBUaGUgdmFsdWUgcmV0dXJuZWQgaWYgdGhlIGZpbGVuYW1lIGlzXG4gKiAgIHVua25vd24sIG9yIHRoZSBwcm90b2NvbCBpcyB1bnN1cHBvcnRlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEd1ZXNzZWQgUERGIGZpbGVuYW1lLlxuICovXG5mdW5jdGlvbiBnZXRQZGZGaWxlbmFtZUZyb21VcmwodXJsLCBkZWZhdWx0RmlsZW5hbWUgPSBcImRvY3VtZW50LnBkZlwiKSB7XG4gIGlmICh0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRGaWxlbmFtZTtcbiAgfVxuICBpZiAoaXNEYXRhU2NoZW1lKHVybCkpIHtcbiAgICB3YXJuKCdnZXRQZGZGaWxlbmFtZUZyb21Vcmw6IGlnbm9yZSBcImRhdGE6XCItVVJMIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLicpO1xuICAgIHJldHVybiBkZWZhdWx0RmlsZW5hbWU7XG4gIH1cbiAgY29uc3QgcmVVUkkgPSAvXig/Oig/OlteOl0rOik/XFwvXFwvW14vXSspPyhbXj8jXSopKFxcP1teI10qKT8oIy4qKT8kLztcbiAgLy8gICAgICAgICAgICAgIFNDSEVNRSAgICAgICAgSE9TVCAgICAgICAgMS5QQVRIICAyLlFVRVJZICAgMy5SRUZcbiAgLy8gUGF0dGVybiB0byBnZXQgbGFzdCBtYXRjaGluZyBOQU1FLnBkZlxuICBjb25zdCByZUZpbGVuYW1lID0gL1teLz8jPV0rXFwucGRmXFxiKD8hLipcXC5wZGZcXGIpL2k7XG4gIGNvbnN0IHNwbGl0VVJJID0gcmVVUkkuZXhlYyh1cmwpO1xuICBsZXQgc3VnZ2VzdGVkRmlsZW5hbWUgPVxuICAgIHJlRmlsZW5hbWUuZXhlYyhzcGxpdFVSSVsxXSkgfHxcbiAgICByZUZpbGVuYW1lLmV4ZWMoc3BsaXRVUklbMl0pIHx8XG4gICAgcmVGaWxlbmFtZS5leGVjKHNwbGl0VVJJWzNdKTtcbiAgaWYgKHN1Z2dlc3RlZEZpbGVuYW1lKSB7XG4gICAgc3VnZ2VzdGVkRmlsZW5hbWUgPSBzdWdnZXN0ZWRGaWxlbmFtZVswXTtcbiAgICBpZiAoc3VnZ2VzdGVkRmlsZW5hbWUuaW5jbHVkZXMoXCIlXCIpKSB7XG4gICAgICAvLyBVUkwtZW5jb2RlZCAlMkZwYXRoJTJGdG8lMkZmaWxlLnBkZiBzaG91bGQgYmUgZmlsZS5wZGZcbiAgICAgIHRyeSB7XG4gICAgICAgIHN1Z2dlc3RlZEZpbGVuYW1lID0gcmVGaWxlbmFtZS5leGVjKFxuICAgICAgICAgIGRlY29kZVVSSUNvbXBvbmVudChzdWdnZXN0ZWRGaWxlbmFtZSlcbiAgICAgICAgKVswXTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBQb3NzaWJsZSAoZXh0cmVtZWx5IHJhcmUpIGVycm9yczpcbiAgICAgICAgLy8gVVJJRXJyb3IgXCJNYWxmb3JtZWQgVVJJXCIsIGUuZy4gZm9yIFwiJUFBLnBkZlwiXG4gICAgICAgIC8vIFR5cGVFcnJvciBcIm51bGwgaGFzIG5vIHByb3BlcnRpZXNcIiwgZS5nLiBmb3IgXCIlMkYucGRmXCJcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN1Z2dlc3RlZEZpbGVuYW1lIHx8IGRlZmF1bHRGaWxlbmFtZTtcbn1cblxuY2xhc3MgU3RhdFRpbWVyIHtcbiAgc3RhcnRlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgdGltZXMgPSBbXTtcblxuICB0aW1lKG5hbWUpIHtcbiAgICBpZiAobmFtZSBpbiB0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHdhcm4oYFRpbWVyIGlzIGFscmVhZHkgcnVubmluZyBmb3IgJHtuYW1lfWApO1xuICAgIH1cbiAgICB0aGlzLnN0YXJ0ZWRbbmFtZV0gPSBEYXRlLm5vdygpO1xuICB9XG5cbiAgdGltZUVuZChuYW1lKSB7XG4gICAgaWYgKCEobmFtZSBpbiB0aGlzLnN0YXJ0ZWQpKSB7XG4gICAgICB3YXJuKGBUaW1lciBoYXMgbm90IGJlZW4gc3RhcnRlZCBmb3IgJHtuYW1lfWApO1xuICAgIH1cbiAgICB0aGlzLnRpbWVzLnB1c2goe1xuICAgICAgbmFtZSxcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0ZWRbbmFtZV0sXG4gICAgICBlbmQ6IERhdGUubm93KCksXG4gICAgfSk7XG4gICAgLy8gUmVtb3ZlIHRpbWVyIGZyb20gc3RhcnRlZCBzbyBpdCBjYW4gYmUgY2FsbGVkIGFnYWluLlxuICAgIGRlbGV0ZSB0aGlzLnN0YXJ0ZWRbbmFtZV07XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICAvLyBGaW5kIHRoZSBsb25nZXN0IG5hbWUgZm9yIHBhZGRpbmcgcHVycG9zZXMuXG4gICAgY29uc3Qgb3V0QnVmID0gW107XG4gICAgbGV0IGxvbmdlc3QgPSAwO1xuICAgIGZvciAoY29uc3QgeyBuYW1lIH0gb2YgdGhpcy50aW1lcykge1xuICAgICAgbG9uZ2VzdCA9IE1hdGgubWF4KG5hbWUubGVuZ3RoLCBsb25nZXN0KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB7IG5hbWUsIHN0YXJ0LCBlbmQgfSBvZiB0aGlzLnRpbWVzKSB7XG4gICAgICBvdXRCdWYucHVzaChgJHtuYW1lLnBhZEVuZChsb25nZXN0KX0gJHtlbmQgLSBzdGFydH1tc1xcbmApO1xuICAgIH1cbiAgICByZXR1cm4gb3V0QnVmLmpvaW4oXCJcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNWYWxpZEZldGNoVXJsKHVybCwgYmFzZVVybCkge1xuICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkOiBpc1ZhbGlkRmV0Y2hVcmxcIik7XG4gIH1cbiAgY29uc3QgcmVzID0gYmFzZVVybCA/IFVSTC5wYXJzZSh1cmwsIGJhc2VVcmwpIDogVVJMLnBhcnNlKHVybCk7XG4gIC8vIFRoZSBGZXRjaCBBUEkgb25seSBzdXBwb3J0cyB0aGUgaHR0cC9odHRwcyBwcm90b2NvbHMsIGFuZCBub3QgZmlsZS9mdHAuXG4gIHJldHVybiByZXM/LnByb3RvY29sID09PSBcImh0dHA6XCIgfHwgcmVzPy5wcm90b2NvbCA9PT0gXCJodHRwczpcIjtcbn1cblxuLyoqXG4gKiBFdmVudCBoYW5kbGVyIHRvIHN1cHByZXNzIGNvbnRleHQgbWVudS5cbiAqL1xuZnVuY3Rpb24gbm9Db250ZXh0TWVudShlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gc3RvcEV2ZW50KGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xufVxuXG4vLyBEZXByZWNhdGVkIEFQSSBmdW5jdGlvbiAtLSBkaXNwbGF5IHJlZ2FyZGxlc3Mgb2YgdGhlIGB2ZXJib3NpdHlgIHNldHRpbmcuXG5mdW5jdGlvbiBkZXByZWNhdGVkKGRldGFpbHMpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgY29uc29sZS5sb2coXCJEZXByZWNhdGVkIEFQSSB1c2FnZTogXCIgKyBkZXRhaWxzKTtcbn1cblxuY2xhc3MgUERGRGF0ZVN0cmluZyB7XG4gIHN0YXRpYyAjcmVnZXg7XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYSBQREYgZGF0ZSBzdHJpbmcgdG8gYSBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QuXG4gICAqXG4gICAqIFRoZSBQREYgZGF0ZSBzdHJpbmcgZm9ybWF0IGlzIGRlc2NyaWJlZCBpbiBzZWN0aW9uIDcuOS40IG9mIHRoZSBvZmZpY2lhbFxuICAgKiBQREYgMzIwMDAtMToyMDA4IHNwZWNpZmljYXRpb24uIEhvd2V2ZXIsIGluIHRoZSBQREYgMS43IHJlZmVyZW5jZSAoc2l4dGhcbiAgICogZWRpdGlvbikgQWRvYmUgZGVzY3JpYmVzIHRoZSBzYW1lIGZvcm1hdCBpbmNsdWRpbmcgYSB0cmFpbGluZyBhcG9zdHJvcGhlLlxuICAgKiBUaGlzIHN5bnRheCBpbiBpbmNvcnJlY3QsIGJ1dCBBZG9iZSBBY3JvYmF0IGNyZWF0ZXMgUERGIGZpbGVzIHRoYXQgY29udGFpblxuICAgKiB0aGVtLiBXZSBpZ25vcmUgYWxsIGFwb3N0cm9waGVzIGFzIHRoZXkgYXJlIG5vdCBuZWNlc3NhcnkgZm9yIGRhdGUgcGFyc2luZy5cbiAgICpcbiAgICogTW9yZW92ZXIsIEFkb2JlIEFjcm9iYXQgZG9lc24ndCBoYW5kbGUgY2hhbmdpbmcgdGhlIGRhdGUgdG8gdW5pdmVyc2FsIHRpbWVcbiAgICogYW5kIGRvZXNuJ3QgdXNlIHRoZSB1c2VyJ3MgdGltZSB6b25lIChlZmZlY3RpdmVseSBpZ25vcmluZyB0aGUgSEgnIGFuZCBtbSdcbiAgICogcGFydHMgb2YgdGhlIGRhdGUgc3RyaW5nKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlucHV0XG4gICAqIEByZXR1cm5zIHtEYXRlfG51bGx9XG4gICAqL1xuICBzdGF0aWMgdG9EYXRlT2JqZWN0KGlucHV0KSB7XG4gICAgaWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIExhemlseSBpbml0aWFsaXplIHRoZSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgdGhpcy4jcmVnZXggfHw9IG5ldyBSZWdFeHAoXG4gICAgICBcIl5EOlwiICsgLy8gUHJlZml4IChyZXF1aXJlZClcbiAgICAgICAgXCIoXFxcXGR7NH0pXCIgKyAvLyBZZWFyIChyZXF1aXJlZClcbiAgICAgICAgXCIoXFxcXGR7Mn0pP1wiICsgLy8gTW9udGggKG9wdGlvbmFsKVxuICAgICAgICBcIihcXFxcZHsyfSk/XCIgKyAvLyBEYXkgKG9wdGlvbmFsKVxuICAgICAgICBcIihcXFxcZHsyfSk/XCIgKyAvLyBIb3VyIChvcHRpb25hbClcbiAgICAgICAgXCIoXFxcXGR7Mn0pP1wiICsgLy8gTWludXRlIChvcHRpb25hbClcbiAgICAgICAgXCIoXFxcXGR7Mn0pP1wiICsgLy8gU2Vjb25kIChvcHRpb25hbClcbiAgICAgICAgXCIoW1p8K3wtXSk/XCIgKyAvLyBVbml2ZXJzYWwgdGltZSByZWxhdGlvbiAob3B0aW9uYWwpXG4gICAgICAgIFwiKFxcXFxkezJ9KT9cIiArIC8vIE9mZnNldCBob3VyIChvcHRpb25hbClcbiAgICAgICAgXCInP1wiICsgLy8gU3BsaXR0aW5nIGFwb3N0cm9waGUgKG9wdGlvbmFsKVxuICAgICAgICBcIihcXFxcZHsyfSk/XCIgKyAvLyBPZmZzZXQgbWludXRlIChvcHRpb25hbClcbiAgICAgICAgXCInP1wiIC8vIFRyYWlsaW5nIGFwb3N0cm9waGUgKG9wdGlvbmFsKVxuICAgICk7XG5cbiAgICAvLyBPcHRpb25hbCBmaWVsZHMgdGhhdCBkb24ndCBzYXRpc2Z5IHRoZSByZXF1aXJlbWVudHMgZnJvbSB0aGUgcmVndWxhclxuICAgIC8vIGV4cHJlc3Npb24gKHN1Y2ggYXMgaW5jb3JyZWN0IGRpZ2l0IGNvdW50cyBvciBudW1iZXJzIHRoYXQgYXJlIG91dCBvZlxuICAgIC8vIHJhbmdlKSB3aWxsIGZhbGwgYmFjayB0aGUgZGVmYXVsdHMgZnJvbSB0aGUgc3BlY2lmaWNhdGlvbi5cbiAgICBjb25zdCBtYXRjaGVzID0gdGhpcy4jcmVnZXguZXhlYyhpbnB1dCk7XG4gICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBKYXZhU2NyaXB0J3MgYERhdGVgIG9iamVjdCBleHBlY3RzIHRoZSBtb250aCB0byBiZSBiZXR3ZWVuIDAgYW5kIDExXG4gICAgLy8gaW5zdGVhZCBvZiAxIGFuZCAxMiwgc28gd2UgaGF2ZSB0byBjb3JyZWN0IGZvciB0aGF0LlxuICAgIGNvbnN0IHllYXIgPSBwYXJzZUludChtYXRjaGVzWzFdLCAxMCk7XG4gICAgbGV0IG1vbnRoID0gcGFyc2VJbnQobWF0Y2hlc1syXSwgMTApO1xuICAgIG1vbnRoID0gbW9udGggPj0gMSAmJiBtb250aCA8PSAxMiA/IG1vbnRoIC0gMSA6IDA7XG4gICAgbGV0IGRheSA9IHBhcnNlSW50KG1hdGNoZXNbM10sIDEwKTtcbiAgICBkYXkgPSBkYXkgPj0gMSAmJiBkYXkgPD0gMzEgPyBkYXkgOiAxO1xuICAgIGxldCBob3VyID0gcGFyc2VJbnQobWF0Y2hlc1s0XSwgMTApO1xuICAgIGhvdXIgPSBob3VyID49IDAgJiYgaG91ciA8PSAyMyA/IGhvdXIgOiAwO1xuICAgIGxldCBtaW51dGUgPSBwYXJzZUludChtYXRjaGVzWzVdLCAxMCk7XG4gICAgbWludXRlID0gbWludXRlID49IDAgJiYgbWludXRlIDw9IDU5ID8gbWludXRlIDogMDtcbiAgICBsZXQgc2Vjb25kID0gcGFyc2VJbnQobWF0Y2hlc1s2XSwgMTApO1xuICAgIHNlY29uZCA9IHNlY29uZCA+PSAwICYmIHNlY29uZCA8PSA1OSA/IHNlY29uZCA6IDA7XG4gICAgY29uc3QgdW5pdmVyc2FsVGltZVJlbGF0aW9uID0gbWF0Y2hlc1s3XSB8fCBcIlpcIjtcbiAgICBsZXQgb2Zmc2V0SG91ciA9IHBhcnNlSW50KG1hdGNoZXNbOF0sIDEwKTtcbiAgICBvZmZzZXRIb3VyID0gb2Zmc2V0SG91ciA+PSAwICYmIG9mZnNldEhvdXIgPD0gMjMgPyBvZmZzZXRIb3VyIDogMDtcbiAgICBsZXQgb2Zmc2V0TWludXRlID0gcGFyc2VJbnQobWF0Y2hlc1s5XSwgMTApIHx8IDA7XG4gICAgb2Zmc2V0TWludXRlID0gb2Zmc2V0TWludXRlID49IDAgJiYgb2Zmc2V0TWludXRlIDw9IDU5ID8gb2Zmc2V0TWludXRlIDogMDtcblxuICAgIC8vIFVuaXZlcnNhbCB0aW1lIHJlbGF0aW9uICdaJyBtZWFucyB0aGF0IHRoZSBsb2NhbCB0aW1lIGlzIGVxdWFsIHRvIHRoZVxuICAgIC8vIHVuaXZlcnNhbCB0aW1lLCB3aGVyZWFzIHRoZSByZWxhdGlvbnMgJysnLyctJyBpbmRpY2F0ZSB0aGF0IHRoZSBsb2NhbFxuICAgIC8vIHRpbWUgaXMgbGF0ZXIgcmVzcGVjdGl2ZWx5IGVhcmxpZXIgdGhhbiB0aGUgdW5pdmVyc2FsIHRpbWUuIEV2ZXJ5IGRhdGVcbiAgICAvLyBpcyBub3JtYWxpemVkIHRvIHVuaXZlcnNhbCB0aW1lLlxuICAgIGlmICh1bml2ZXJzYWxUaW1lUmVsYXRpb24gPT09IFwiLVwiKSB7XG4gICAgICBob3VyICs9IG9mZnNldEhvdXI7XG4gICAgICBtaW51dGUgKz0gb2Zmc2V0TWludXRlO1xuICAgIH0gZWxzZSBpZiAodW5pdmVyc2FsVGltZVJlbGF0aW9uID09PSBcIitcIikge1xuICAgICAgaG91ciAtPSBvZmZzZXRIb3VyO1xuICAgICAgbWludXRlIC09IG9mZnNldE1pbnV0ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQpKTtcbiAgfVxufVxuXG4vKipcbiAqIE5PVEU6IFRoaXMgaXMgKG1vc3RseSkgaW50ZW5kZWQgdG8gc3VwcG9ydCBwcmludGluZyBvZiBYRkEgZm9ybXMuXG4gKi9cbmZ1bmN0aW9uIGdldFhmYVBhZ2VWaWV3cG9ydCh4ZmFQYWdlLCB7IHNjYWxlID0gMSwgcm90YXRpb24gPSAwIH0pIHtcbiAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB4ZmFQYWdlLmF0dHJpYnV0ZXMuc3R5bGU7XG4gIGNvbnN0IHZpZXdCb3ggPSBbMCwgMCwgcGFyc2VJbnQod2lkdGgpLCBwYXJzZUludChoZWlnaHQpXTtcblxuICByZXR1cm4gbmV3IFBhZ2VWaWV3cG9ydCh7XG4gICAgdmlld0JveCxcbiAgICB1c2VyVW5pdDogMSxcbiAgICBzY2FsZSxcbiAgICByb3RhdGlvbixcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFJHQihjb2xvcikge1xuICBpZiAoY29sb3Iuc3RhcnRzV2l0aChcIiNcIikpIHtcbiAgICBjb25zdCBjb2xvclJHQiA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDEpLCAxNik7XG4gICAgcmV0dXJuIFtcbiAgICAgIChjb2xvclJHQiAmIDB4ZmYwMDAwKSA+PiAxNixcbiAgICAgIChjb2xvclJHQiAmIDB4MDBmZjAwKSA+PiA4LFxuICAgICAgY29sb3JSR0IgJiAweDAwMDBmZixcbiAgICBdO1xuICB9XG5cbiAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoXCJyZ2IoXCIpKSB7XG4gICAgLy8gZ2V0Q29tcHV0ZWRTdHlsZSguLi4pLmNvbG9yIHJldHVybnMgYSBgcmdiKFIsIEcsIEIpYCBjb2xvci5cbiAgICByZXR1cm4gY29sb3JcbiAgICAgIC5zbGljZSgvKiBcInJnYihcIi5sZW5ndGggKi8gNCwgLTEpIC8vIFN0cmlwIG91dCBcInJnYihcIiBhbmQgXCIpXCIuXG4gICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAubWFwKHggPT4gcGFyc2VJbnQoeCkpO1xuICB9XG5cbiAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoXCJyZ2JhKFwiKSkge1xuICAgIHJldHVybiBjb2xvclxuICAgICAgLnNsaWNlKC8qIFwicmdiYShcIi5sZW5ndGggKi8gNSwgLTEpIC8vIFN0cmlwIG91dCBcInJnYmEoXCIgYW5kIFwiKVwiLlxuICAgICAgLnNwbGl0KFwiLFwiKVxuICAgICAgLm1hcCh4ID0+IHBhcnNlSW50KHgpKVxuICAgICAgLnNsaWNlKDAsIDMpO1xuICB9XG5cbiAgd2FybihgTm90IGEgdmFsaWQgY29sb3IgZm9ybWF0OiBcIiR7Y29sb3J9XCJgKTtcbiAgcmV0dXJuIFswLCAwLCAwXTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29sb3JWYWx1ZXMoY29sb3JzKSB7XG4gIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgc3Bhbi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmQoc3Bhbik7XG4gIGZvciAoY29uc3QgbmFtZSBvZiBjb2xvcnMua2V5cygpKSB7XG4gICAgc3Bhbi5zdHlsZS5jb2xvciA9IG5hbWU7XG4gICAgY29uc3QgY29tcHV0ZWRDb2xvciA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHNwYW4pLmNvbG9yO1xuICAgIGNvbG9ycy5zZXQobmFtZSwgZ2V0UkdCKGNvbXB1dGVkQ29sb3IpKTtcbiAgfVxuICBzcGFuLnJlbW92ZSgpO1xufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50VHJhbnNmb3JtKGN0eCkge1xuICBjb25zdCB7IGEsIGIsIGMsIGQsIGUsIGYgfSA9IGN0eC5nZXRUcmFuc2Zvcm0oKTtcbiAgcmV0dXJuIFthLCBiLCBjLCBkLCBlLCBmXTtcbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UoY3R4KSB7XG4gIGNvbnN0IHsgYSwgYiwgYywgZCwgZSwgZiB9ID0gY3R4LmdldFRyYW5zZm9ybSgpLmludmVydFNlbGYoKTtcbiAgcmV0dXJuIFthLCBiLCBjLCBkLCBlLCBmXTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0hUTUxEaXZFbGVtZW50fSBkaXZcbiAqIEBwYXJhbSB7UGFnZVZpZXdwb3J0fSB2aWV3cG9ydFxuICogQHBhcmFtIHtib29sZWFufSBtdXN0RmxpcFxuICogQHBhcmFtIHtib29sZWFufSBtdXN0Um90YXRlXG4gKi9cbmZ1bmN0aW9uIHNldExheWVyRGltZW5zaW9ucyhcbiAgZGl2LFxuICB2aWV3cG9ydCxcbiAgbXVzdEZsaXAgPSBmYWxzZSxcbiAgbXVzdFJvdGF0ZSA9IHRydWVcbikge1xuICBpZiAodmlld3BvcnQgaW5zdGFuY2VvZiBQYWdlVmlld3BvcnQpIHtcbiAgICBjb25zdCB7IHBhZ2VXaWR0aCwgcGFnZUhlaWdodCB9ID0gdmlld3BvcnQucmF3RGltcztcbiAgICBjb25zdCB7IHN0eWxlIH0gPSBkaXY7XG4gICAgY29uc3QgdXNlUm91bmQgPSBGZWF0dXJlVGVzdC5pc0NTU1JvdW5kU3VwcG9ydGVkO1xuXG4gICAgY29uc3QgdyA9IGB2YXIoLS10b3RhbC1zY2FsZS1mYWN0b3IpICogJHtwYWdlV2lkdGh9cHhgLFxuICAgICAgaCA9IGB2YXIoLS10b3RhbC1zY2FsZS1mYWN0b3IpICogJHtwYWdlSGVpZ2h0fXB4YDtcbiAgICBjb25zdCB3aWR0aFN0ciA9IHVzZVJvdW5kXG4gICAgICAgID8gYHJvdW5kKGRvd24sICR7d30sIHZhcigtLXNjYWxlLXJvdW5kLXgpKWBcbiAgICAgICAgOiBgY2FsYygke3d9KWAsXG4gICAgICBoZWlnaHRTdHIgPSB1c2VSb3VuZFxuICAgICAgICA/IGByb3VuZChkb3duLCAke2h9LCB2YXIoLS1zY2FsZS1yb3VuZC15KSlgXG4gICAgICAgIDogYGNhbGMoJHtofSlgO1xuXG4gICAgaWYgKCFtdXN0RmxpcCB8fCB2aWV3cG9ydC5yb3RhdGlvbiAlIDE4MCA9PT0gMCkge1xuICAgICAgc3R5bGUud2lkdGggPSB3aWR0aFN0cjtcbiAgICAgIHN0eWxlLmhlaWdodCA9IGhlaWdodFN0cjtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUud2lkdGggPSBoZWlnaHRTdHI7XG4gICAgICBzdHlsZS5oZWlnaHQgPSB3aWR0aFN0cjtcbiAgICB9XG4gIH1cblxuICBpZiAobXVzdFJvdGF0ZSkge1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1haW4tcm90YXRpb25cIiwgdmlld3BvcnQucm90YXRpb24pO1xuICB9XG59XG5cbi8qKlxuICogU2NhbGUgZmFjdG9ycyBmb3IgdGhlIGNhbnZhcywgbmVjZXNzYXJ5IHdpdGggSGlEUEkgZGlzcGxheXMuXG4gKi9cbmNsYXNzIE91dHB1dFNjYWxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgY29uc3QgeyBwaXhlbFJhdGlvIH0gPSBPdXRwdXRTY2FsZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9IEhvcml6b250YWwgc2NhbGUuXG4gICAgICovXG4gICAgdGhpcy5zeCA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfSBWZXJ0aWNhbCBzY2FsZS5cbiAgICAgKi9cbiAgICB0aGlzLnN5ID0gcGl4ZWxSYXRpbztcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgd2hlbiBzY2FsaW5nIGlzIHJlcXVpcmVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICovXG4gIGdldCBzY2FsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3ggIT09IDEgfHwgdGhpcy5zeSAhPT0gMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgd2hlbiBzY2FsaW5nIGlzIHN5bW1ldHJpYyxcbiAgICogICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICovXG4gIGdldCBzeW1tZXRyaWMoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3ggPT09IHRoaXMuc3k7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHNjYWxpbmcgd2FzIGxpbWl0ZWQsXG4gICAqICAgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqL1xuICBsaW1pdENhbnZhcyh3aWR0aCwgaGVpZ2h0LCBtYXhQaXhlbHMsIG1heERpbSkge1xuICAgIGxldCBtYXhBcmVhU2NhbGUgPSBJbmZpbml0eSxcbiAgICAgIG1heFdpZHRoU2NhbGUgPSBJbmZpbml0eSxcbiAgICAgIG1heEhlaWdodFNjYWxlID0gSW5maW5pdHk7XG5cbiAgICBpZiAobWF4UGl4ZWxzID4gMCkge1xuICAgICAgbWF4QXJlYVNjYWxlID0gTWF0aC5zcXJ0KG1heFBpeGVscyAvICh3aWR0aCAqIGhlaWdodCkpO1xuICAgIH1cbiAgICBpZiAobWF4RGltICE9PSAtMSkge1xuICAgICAgbWF4V2lkdGhTY2FsZSA9IG1heERpbSAvIHdpZHRoO1xuICAgICAgbWF4SGVpZ2h0U2NhbGUgPSBtYXhEaW0gLyBoZWlnaHQ7XG4gICAgfVxuICAgIGNvbnN0IG1heFNjYWxlID0gTWF0aC5taW4obWF4QXJlYVNjYWxlLCBtYXhXaWR0aFNjYWxlLCBtYXhIZWlnaHRTY2FsZSk7XG5cbiAgICBpZiAodGhpcy5zeCA+IG1heFNjYWxlIHx8IHRoaXMuc3kgPiBtYXhTY2FsZSkge1xuICAgICAgdGhpcy5zeCA9IG1heFNjYWxlO1xuICAgICAgdGhpcy5zeSA9IG1heFNjYWxlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgcGl4ZWxSYXRpbygpIHtcbiAgICByZXR1cm4gZ2xvYmFsVGhpcy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gIH1cbn1cblxuLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL01lZGlhL0Zvcm1hdHMvSW1hZ2VfdHlwZXNcbi8vIHRvIGtub3cgd2hpY2ggdHlwZXMgYXJlIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cbmNvbnN0IFN1cHBvcnRlZEltYWdlTWltZVR5cGVzID0gW1xuICBcImltYWdlL2FwbmdcIixcbiAgXCJpbWFnZS9hdmlmXCIsXG4gIFwiaW1hZ2UvYm1wXCIsXG4gIFwiaW1hZ2UvZ2lmXCIsXG4gIFwiaW1hZ2UvanBlZ1wiLFxuICBcImltYWdlL3BuZ1wiLFxuICBcImltYWdlL3N2Zyt4bWxcIixcbiAgXCJpbWFnZS93ZWJwXCIsXG4gIFwiaW1hZ2UveC1pY29uXCIsXG5dO1xuXG5leHBvcnQge1xuICBkZXByZWNhdGVkLFxuICBmZXRjaERhdGEsXG4gIGdldENvbG9yVmFsdWVzLFxuICBnZXRDdXJyZW50VHJhbnNmb3JtLFxuICBnZXRDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSxcbiAgZ2V0RmlsZW5hbWVGcm9tVXJsLFxuICBnZXRQZGZGaWxlbmFtZUZyb21VcmwsXG4gIGdldFJHQixcbiAgZ2V0WGZhUGFnZVZpZXdwb3J0LFxuICBpc0RhdGFTY2hlbWUsXG4gIGlzUGRmRmlsZSxcbiAgaXNWYWxpZEZldGNoVXJsLFxuICBub0NvbnRleHRNZW51LFxuICBPdXRwdXRTY2FsZSxcbiAgUGFnZVZpZXdwb3J0LFxuICBQREZEYXRlU3RyaW5nLFxuICBQaXhlbHNQZXJJbmNoLFxuICBSZW5kZXJpbmdDYW5jZWxsZWRFeGNlcHRpb24sXG4gIHNldExheWVyRGltZW5zaW9ucyxcbiAgU3RhdFRpbWVyLFxuICBzdG9wRXZlbnQsXG4gIFN1cHBvcnRlZEltYWdlTWltZVR5cGVzLFxuICBTVkdfTlMsXG59O1xuIiwgIi8qIENvcHlyaWdodCAyMDIzIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBub0NvbnRleHRNZW51LCBzdG9wRXZlbnQgfSBmcm9tIFwiLi4vZGlzcGxheV91dGlscy5qc1wiO1xuXG5jbGFzcyBFZGl0b3JUb29sYmFyIHtcbiAgI3Rvb2xiYXIgPSBudWxsO1xuXG4gICNjb2xvclBpY2tlciA9IG51bGw7XG5cbiAgI2VkaXRvcjtcblxuICAjYnV0dG9ucyA9IG51bGw7XG5cbiAgI2FsdFRleHQgPSBudWxsO1xuXG4gICNzaWduYXR1cmVEZXNjcmlwdGlvbkJ1dHRvbiA9IG51bGw7XG5cbiAgc3RhdGljICNsMTBuUmVtb3ZlID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihlZGl0b3IpIHtcbiAgICB0aGlzLiNlZGl0b3IgPSBlZGl0b3I7XG5cbiAgICBFZGl0b3JUb29sYmFyLiNsMTBuUmVtb3ZlIHx8PSBPYmplY3QuZnJlZXplKHtcbiAgICAgIGZyZWV0ZXh0OiBcInBkZmpzLWVkaXRvci1yZW1vdmUtZnJlZXRleHQtYnV0dG9uXCIsXG4gICAgICBoaWdobGlnaHQ6IFwicGRmanMtZWRpdG9yLXJlbW92ZS1oaWdobGlnaHQtYnV0dG9uXCIsXG4gICAgICBpbms6IFwicGRmanMtZWRpdG9yLXJlbW92ZS1pbmstYnV0dG9uXCIsXG4gICAgICBzdGFtcDogXCJwZGZqcy1lZGl0b3ItcmVtb3ZlLXN0YW1wLWJ1dHRvblwiLFxuICAgICAgc2lnbmF0dXJlOiBcInBkZmpzLWVkaXRvci1yZW1vdmUtc2lnbmF0dXJlLWJ1dHRvblwiLFxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGVkaXRUb29sYmFyID0gKHRoaXMuI3Rvb2xiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICBlZGl0VG9vbGJhci5jbGFzc0xpc3QuYWRkKFwiZWRpdFRvb2xiYXJcIiwgXCJoaWRkZW5cIik7XG4gICAgZWRpdFRvb2xiYXIuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInRvb2xiYXJcIik7XG4gICAgY29uc3Qgc2lnbmFsID0gdGhpcy4jZWRpdG9yLl91aU1hbmFnZXIuX3NpZ25hbDtcbiAgICBlZGl0VG9vbGJhci5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgbm9Db250ZXh0TWVudSwgeyBzaWduYWwgfSk7XG4gICAgZWRpdFRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIEVkaXRvclRvb2xiYXIuI3BvaW50ZXJEb3duLCB7XG4gICAgICBzaWduYWwsXG4gICAgfSk7XG5cbiAgICBjb25zdCBidXR0b25zID0gKHRoaXMuI2J1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICBidXR0b25zLmNsYXNzTmFtZSA9IFwiYnV0dG9uc1wiO1xuICAgIGVkaXRUb29sYmFyLmFwcGVuZChidXR0b25zKTtcblxuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy4jZWRpdG9yLnRvb2xiYXJQb3NpdGlvbjtcbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IGVkaXRUb29sYmFyO1xuICAgICAgY29uc3QgeCA9XG4gICAgICAgIHRoaXMuI2VkaXRvci5fdWlNYW5hZ2VyLmRpcmVjdGlvbiA9PT0gXCJsdHJcIlxuICAgICAgICAgID8gMSAtIHBvc2l0aW9uWzBdXG4gICAgICAgICAgOiBwb3NpdGlvblswXTtcbiAgICAgIHN0eWxlLmluc2V0SW5saW5lRW5kID0gYCR7MTAwICogeH0lYDtcbiAgICAgIHN0eWxlLnRvcCA9IGBjYWxjKCR7XG4gICAgICAgIDEwMCAqIHBvc2l0aW9uWzFdXG4gICAgICB9JSArIHZhcigtLWVkaXRvci10b29sYmFyLXZlcnQtb2Zmc2V0KSlgO1xuICAgIH1cblxuICAgIHRoaXMuI2FkZERlbGV0ZUJ1dHRvbigpO1xuXG4gICAgcmV0dXJuIGVkaXRUb29sYmFyO1xuICB9XG5cbiAgZ2V0IGRpdigpIHtcbiAgICByZXR1cm4gdGhpcy4jdG9vbGJhcjtcbiAgfVxuXG4gIHN0YXRpYyAjcG9pbnRlckRvd24oZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICAjZm9jdXNJbihlKSB7XG4gICAgdGhpcy4jZWRpdG9yLl9mb2N1c0V2ZW50c0FsbG93ZWQgPSBmYWxzZTtcbiAgICBzdG9wRXZlbnQoZSk7XG4gIH1cblxuICAjZm9jdXNPdXQoZSkge1xuICAgIHRoaXMuI2VkaXRvci5fZm9jdXNFdmVudHNBbGxvd2VkID0gdHJ1ZTtcbiAgICBzdG9wRXZlbnQoZSk7XG4gIH1cblxuICAjYWRkTGlzdGVuZXJzVG9FbGVtZW50KGVsZW1lbnQpIHtcbiAgICAvLyBJZiB3ZSdyZSBjbGlja2luZyBvbiBhIGJ1dHRvbiB3aXRoIHRoZSBrZXlib2FyZCBvciB3aXRoXG4gICAgLy8gdGhlIG1vdXNlLCB3ZSBkb24ndCB3YW50IHRvIHRyaWdnZXIgYW55IGZvY3VzIGV2ZW50cyBvblxuICAgIC8vIHRoZSBlZGl0b3IuXG4gICAgY29uc3Qgc2lnbmFsID0gdGhpcy4jZWRpdG9yLl91aU1hbmFnZXIuX3NpZ25hbDtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIHRoaXMuI2ZvY3VzSW4uYmluZCh0aGlzKSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHNpZ25hbCxcbiAgICB9KTtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLiNmb2N1c091dC5iaW5kKHRoaXMpLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgc2lnbmFsLFxuICAgIH0pO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIG5vQ29udGV4dE1lbnUsIHsgc2lnbmFsIH0pO1xuICB9XG5cbiAgaGlkZSgpIHtcbiAgICB0aGlzLiN0b29sYmFyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgdGhpcy4jY29sb3JQaWNrZXI/LmhpZGVEcm9wZG93bigpO1xuICB9XG5cbiAgc2hvdygpIHtcbiAgICB0aGlzLiN0b29sYmFyLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gICAgdGhpcy4jYWx0VGV4dD8uc2hvd24oKTtcbiAgfVxuXG4gICNhZGREZWxldGVCdXR0b24oKSB7XG4gICAgY29uc3QgeyBlZGl0b3JUeXBlLCBfdWlNYW5hZ2VyIH0gPSB0aGlzLiNlZGl0b3I7XG5cbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBcImRlbGV0ZVwiO1xuICAgIGJ1dHRvbi50YWJJbmRleCA9IDA7XG4gICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImRhdGEtbDEwbi1pZFwiLCBFZGl0b3JUb29sYmFyLiNsMTBuUmVtb3ZlW2VkaXRvclR5cGVdKTtcbiAgICB0aGlzLiNhZGRMaXN0ZW5lcnNUb0VsZW1lbnQoYnV0dG9uKTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2xpY2tcIixcbiAgICAgIGUgPT4ge1xuICAgICAgICBfdWlNYW5hZ2VyLmRlbGV0ZSgpO1xuICAgICAgfSxcbiAgICAgIHsgc2lnbmFsOiBfdWlNYW5hZ2VyLl9zaWduYWwgfVxuICAgICk7XG4gICAgdGhpcy4jYnV0dG9ucy5hcHBlbmQoYnV0dG9uKTtcbiAgfVxuXG4gIGdldCAjZGl2aWRlcigpIHtcbiAgICBjb25zdCBkaXZpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkaXZpZGVyLmNsYXNzTmFtZSA9IFwiZGl2aWRlclwiO1xuICAgIHJldHVybiBkaXZpZGVyO1xuICB9XG5cbiAgYXN5bmMgYWRkQWx0VGV4dChhbHRUZXh0KSB7XG4gICAgY29uc3QgYnV0dG9uID0gYXdhaXQgYWx0VGV4dC5yZW5kZXIoKTtcbiAgICB0aGlzLiNhZGRMaXN0ZW5lcnNUb0VsZW1lbnQoYnV0dG9uKTtcbiAgICB0aGlzLiNidXR0b25zLnByZXBlbmQoYnV0dG9uLCB0aGlzLiNkaXZpZGVyKTtcbiAgICB0aGlzLiNhbHRUZXh0ID0gYWx0VGV4dDtcbiAgfVxuXG4gIGFkZENvbG9yUGlja2VyKGNvbG9yUGlja2VyKSB7XG4gICAgdGhpcy4jY29sb3JQaWNrZXIgPSBjb2xvclBpY2tlcjtcbiAgICBjb25zdCBidXR0b24gPSBjb2xvclBpY2tlci5yZW5kZXJCdXR0b24oKTtcbiAgICB0aGlzLiNhZGRMaXN0ZW5lcnNUb0VsZW1lbnQoYnV0dG9uKTtcbiAgICB0aGlzLiNidXR0b25zLnByZXBlbmQoYnV0dG9uLCB0aGlzLiNkaXZpZGVyKTtcbiAgfVxuXG4gIGFzeW5jIGFkZEVkaXRTaWduYXR1cmVCdXR0b24oc2lnbmF0dXJlTWFuYWdlcikge1xuICAgIGNvbnN0IGJ1dHRvbiA9ICh0aGlzLiNzaWduYXR1cmVEZXNjcmlwdGlvbkJ1dHRvbiA9XG4gICAgICBhd2FpdCBzaWduYXR1cmVNYW5hZ2VyLnJlbmRlckVkaXRCdXR0b24odGhpcy4jZWRpdG9yKSk7XG4gICAgdGhpcy4jYWRkTGlzdGVuZXJzVG9FbGVtZW50KGJ1dHRvbik7XG4gICAgdGhpcy4jYnV0dG9ucy5wcmVwZW5kKGJ1dHRvbiwgdGhpcy4jZGl2aWRlcik7XG4gIH1cblxuICB1cGRhdGVFZGl0U2lnbmF0dXJlQnV0dG9uKGRlc2NyaXB0aW9uKSB7XG4gICAgaWYgKHRoaXMuI3NpZ25hdHVyZURlc2NyaXB0aW9uQnV0dG9uKSB7XG4gICAgICB0aGlzLiNzaWduYXR1cmVEZXNjcmlwdGlvbkJ1dHRvbi50aXRsZSA9IGRlc2NyaXB0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLiN0b29sYmFyLnJlbW92ZSgpO1xuICAgIHRoaXMuI2NvbG9yUGlja2VyPy5kZXN0cm95KCk7XG4gICAgdGhpcy4jY29sb3JQaWNrZXIgPSBudWxsO1xuICB9XG59XG5cbmNsYXNzIEhpZ2hsaWdodFRvb2xiYXIge1xuICAjYnV0dG9ucyA9IG51bGw7XG5cbiAgI3Rvb2xiYXIgPSBudWxsO1xuXG4gICN1aU1hbmFnZXI7XG5cbiAgY29uc3RydWN0b3IodWlNYW5hZ2VyKSB7XG4gICAgdGhpcy4jdWlNYW5hZ2VyID0gdWlNYW5hZ2VyO1xuICB9XG5cbiAgI3JlbmRlcigpIHtcbiAgICBjb25zdCBlZGl0VG9vbGJhciA9ICh0aGlzLiN0b29sYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgZWRpdFRvb2xiYXIuY2xhc3NOYW1lID0gXCJlZGl0VG9vbGJhclwiO1xuICAgIGVkaXRUb29sYmFyLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJ0b29sYmFyXCIpO1xuICAgIGVkaXRUb29sYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBub0NvbnRleHRNZW51LCB7XG4gICAgICBzaWduYWw6IHRoaXMuI3VpTWFuYWdlci5fc2lnbmFsLFxuICAgIH0pO1xuXG4gICAgY29uc3QgYnV0dG9ucyA9ICh0aGlzLiNidXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgYnV0dG9ucy5jbGFzc05hbWUgPSBcImJ1dHRvbnNcIjtcbiAgICBlZGl0VG9vbGJhci5hcHBlbmQoYnV0dG9ucyk7XG5cbiAgICB0aGlzLiNhZGRIaWdobGlnaHRCdXR0b24oKTtcblxuICAgIHJldHVybiBlZGl0VG9vbGJhcjtcbiAgfVxuXG4gICNnZXRMYXN0UG9pbnQoYm94ZXMsIGlzTFRSKSB7XG4gICAgbGV0IGxhc3RZID0gMDtcbiAgICBsZXQgbGFzdFggPSAwO1xuICAgIGZvciAoY29uc3QgYm94IG9mIGJveGVzKSB7XG4gICAgICBjb25zdCB5ID0gYm94LnkgKyBib3guaGVpZ2h0O1xuICAgICAgaWYgKHkgPCBsYXN0WSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHggPSBib3gueCArIChpc0xUUiA/IGJveC53aWR0aCA6IDApO1xuICAgICAgaWYgKHkgPiBsYXN0WSkge1xuICAgICAgICBsYXN0WCA9IHg7XG4gICAgICAgIGxhc3RZID0geTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNMVFIpIHtcbiAgICAgICAgaWYgKHggPiBsYXN0WCkge1xuICAgICAgICAgIGxhc3RYID0geDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh4IDwgbGFzdFgpIHtcbiAgICAgICAgbGFzdFggPSB4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2lzTFRSID8gMSAtIGxhc3RYIDogbGFzdFgsIGxhc3RZXTtcbiAgfVxuXG4gIHNob3cocGFyZW50LCBib3hlcywgaXNMVFIpIHtcbiAgICBjb25zdCBbeCwgeV0gPSB0aGlzLiNnZXRMYXN0UG9pbnQoYm94ZXMsIGlzTFRSKTtcbiAgICBjb25zdCB7IHN0eWxlIH0gPSAodGhpcy4jdG9vbGJhciB8fD0gdGhpcy4jcmVuZGVyKCkpO1xuICAgIHBhcmVudC5hcHBlbmQodGhpcy4jdG9vbGJhcik7XG4gICAgc3R5bGUuaW5zZXRJbmxpbmVFbmQgPSBgJHsxMDAgKiB4fSVgO1xuICAgIHN0eWxlLnRvcCA9IGBjYWxjKCR7MTAwICogeX0lICsgdmFyKC0tZWRpdG9yLXRvb2xiYXItdmVydC1vZmZzZXQpKWA7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIHRoaXMuI3Rvb2xiYXIucmVtb3ZlKCk7XG4gIH1cblxuICAjYWRkSGlnaGxpZ2h0QnV0dG9uKCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9IFwiaGlnaGxpZ2h0QnV0dG9uXCI7XG4gICAgYnV0dG9uLnRhYkluZGV4ID0gMDtcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1sMTBuLWlkXCIsIGBwZGZqcy1oaWdobGlnaHQtZmxvYXRpbmctYnV0dG9uMWApO1xuICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBidXR0b24uYXBwZW5kKHNwYW4pO1xuICAgIHNwYW4uY2xhc3NOYW1lID0gXCJ2aXN1YWxseUhpZGRlblwiO1xuICAgIHNwYW4uc2V0QXR0cmlidXRlKFwiZGF0YS1sMTBuLWlkXCIsIFwicGRmanMtaGlnaGxpZ2h0LWZsb2F0aW5nLWJ1dHRvbi1sYWJlbFwiKTtcbiAgICBjb25zdCBzaWduYWwgPSB0aGlzLiN1aU1hbmFnZXIuX3NpZ25hbDtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIG5vQ29udGV4dE1lbnUsIHsgc2lnbmFsIH0pO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLiN1aU1hbmFnZXIuaGlnaGxpZ2h0U2VsZWN0aW9uKFwiZmxvYXRpbmdfYnV0dG9uXCIpO1xuICAgICAgfSxcbiAgICAgIHsgc2lnbmFsIH1cbiAgICApO1xuICAgIHRoaXMuI2J1dHRvbnMuYXBwZW5kKGJ1dHRvbik7XG4gIH1cbn1cblxuZXhwb3J0IHsgRWRpdG9yVG9vbGJhciwgSGlnaGxpZ2h0VG9vbGJhciB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vZWRpdG9yLmpzXCIpLkFubm90YXRpb25FZGl0b3J9IEFubm90YXRpb25FZGl0b3IgKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vYW5ub3RhdGlvbl9lZGl0b3JfbGF5ZXIuanNcIikuQW5ub3RhdGlvbkVkaXRvckxheWVyfSBBbm5vdGF0aW9uRWRpdG9yTGF5ZXIgKi9cblxuaW1wb3J0IHtcbiAgQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUsXG4gIEFubm90YXRpb25FZGl0b3JQcmVmaXgsXG4gIEFubm90YXRpb25FZGl0b3JUeXBlLFxuICBGZWF0dXJlVGVzdCxcbiAgZ2V0VXVpZCxcbiAgc2hhZG93LFxuICBVdGlsLFxuICB3YXJuLFxufSBmcm9tIFwiLi4vLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7XG4gIGZldGNoRGF0YSxcbiAgZ2V0Q29sb3JWYWx1ZXMsXG4gIGdldFJHQixcbiAgUGl4ZWxzUGVySW5jaCxcbiAgc3RvcEV2ZW50LFxufSBmcm9tIFwiLi4vZGlzcGxheV91dGlscy5qc1wiO1xuaW1wb3J0IHsgSGlnaGxpZ2h0VG9vbGJhciB9IGZyb20gXCIuL3Rvb2xiYXIuanNcIjtcblxuZnVuY3Rpb24gYmluZEV2ZW50cyhvYmosIGVsZW1lbnQsIG5hbWVzKSB7XG4gIGZvciAoY29uc3QgbmFtZSBvZiBuYW1lcykge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBvYmpbbmFtZV0uYmluZChvYmopKTtcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIHRvIGNyZWF0ZSBzb21lIHVuaXF1ZSBpZHMgZm9yIHRoZSBkaWZmZXJlbnQgZWRpdG9ycy5cbiAqL1xuY2xhc3MgSWRNYW5hZ2VyIHtcbiAgI2lkID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXNldFwiLCB7XG4gICAgICAgIHZhbHVlOiAoKSA9PiAodGhpcy4jaWQgPSAwKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSB1bmlxdWUgaWQuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIGAke0Fubm90YXRpb25FZGl0b3JQcmVmaXh9JHt0aGlzLiNpZCsrfWA7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGFzcyB0byBtYW5hZ2UgdGhlIGltYWdlcyB1c2VkIGJ5IHRoZSBlZGl0b3JzLlxuICogVGhlIG1haW4gaWRlYSBpcyB0byB0cnkgdG8gbWluaW1pemUgdGhlIG1lbW9yeSB1c2VkIGJ5IHRoZSBpbWFnZXMuXG4gKiBUaGUgaW1hZ2VzIGFyZSBjYWNoZWQgYW5kIHJldXNlZCB3aGVuIHBvc3NpYmxlXG4gKiBXZSB1c2UgYSByZWZDb3VudGVyIHRvIGtub3cgd2hlbiBhbiBpbWFnZSBpcyBub3QgdXNlZCBhbnltb3JlIGJ1dCB3ZSBuZWVkIHRvXG4gKiBiZSBhYmxlIHRvIHJlc3RvcmUgYW4gaW1hZ2UgYWZ0ZXIgYSByZW1vdmUrdW5kbywgc28gd2Uga2VlcCBhIGZpbGUgcmVmZXJlbmNlXG4gKiBvciBhbiB1cmwgb25lLlxuICovXG5jbGFzcyBJbWFnZU1hbmFnZXIge1xuICAjYmFzZUlkID0gZ2V0VXVpZCgpO1xuXG4gICNpZCA9IDA7XG5cbiAgI2NhY2hlID0gbnVsbDtcblxuICBzdGF0aWMgZ2V0IF9pc1NWR0ZpdHRpbmdDYW52YXMoKSB7XG4gICAgLy8gQnkgZGVmYXVsdCwgRmlyZWZveCBkb2Vzbid0IHJlc2NhbGUgd2l0aG91dCBwcmVzZXJ2aW5nIHRoZSBhc3BlY3QgcmF0aW9cbiAgICAvLyB3aGVuIGRyYXdpbmcgYW4gU1ZHIGltYWdlIG9uIGEgY2FudmFzLCBzZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy8xNTQ3Nzc2LlxuICAgIC8vIFRoZSBcIndvcmthcm91bmRcIiBpcyB0byBhcHBlbmQgXCJzdmdWaWV3KHByZXNlcnZlQXNwZWN0UmF0aW8obm9uZSkpXCIgdG8gdGhlXG4gICAgLy8gdXJsLCBidXQgYWNjb3JkaW5nIHRvIGNvbW1lbnQgIzE1LCBpdCBzZWVtcyB0aGF0IGl0IGxlYWRzIHRvIHVuZXhwZWN0ZWRcbiAgICAvLyBiZWhhdmlvciBpbiBTYWZhcmkuXG4gICAgY29uc3Qgc3ZnID0gYGRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PVVURi04LDxzdmcgdmlld0JveD1cIjAgMCAxIDFcIiB3aWR0aD1cIjFcIiBoZWlnaHQ9XCIxXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxyZWN0IHdpZHRoPVwiMVwiIGhlaWdodD1cIjFcIiBzdHlsZT1cImZpbGw6cmVkO1wiLz48L3N2Zz5gO1xuICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoMSwgMyk7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTtcbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGltYWdlLnNyYyA9IHN2ZztcbiAgICBjb25zdCBwcm9taXNlID0gaW1hZ2UuZGVjb2RlKCkudGhlbigoKSA9PiB7XG4gICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwLCAxLCAxLCAwLCAwLCAxLCAzKTtcbiAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkoY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhLmJ1ZmZlcilbMF0gPT09IDA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiX2lzU1ZHRml0dGluZ0NhbnZhc1wiLCBwcm9taXNlKTtcbiAgfVxuXG4gIGFzeW5jICNnZXQoa2V5LCByYXdEYXRhKSB7XG4gICAgdGhpcy4jY2FjaGUgfHw9IG5ldyBNYXAoKTtcbiAgICBsZXQgZGF0YSA9IHRoaXMuI2NhY2hlLmdldChrZXkpO1xuICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAvLyBXZSBhbHJlYWR5IHRyaWVkIHRvIGxvYWQgdGhlIGltYWdlIGJ1dCBpdCBmYWlsZWQuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGRhdGE/LmJpdG1hcCkge1xuICAgICAgZGF0YS5yZWZDb3VudGVyICs9IDE7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGRhdGEgfHw9IHtcbiAgICAgICAgYml0bWFwOiBudWxsLFxuICAgICAgICBpZDogYGltYWdlXyR7dGhpcy4jYmFzZUlkfV8ke3RoaXMuI2lkKyt9YCxcbiAgICAgICAgcmVmQ291bnRlcjogMCxcbiAgICAgICAgaXNTdmc6IGZhbHNlLFxuICAgICAgfTtcbiAgICAgIGxldCBpbWFnZTtcbiAgICAgIGlmICh0eXBlb2YgcmF3RGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBkYXRhLnVybCA9IHJhd0RhdGE7XG4gICAgICAgIGltYWdlID0gYXdhaXQgZmV0Y2hEYXRhKHJhd0RhdGEsIFwiYmxvYlwiKTtcbiAgICAgIH0gZWxzZSBpZiAocmF3RGF0YSBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgaW1hZ2UgPSBkYXRhLmZpbGUgPSByYXdEYXRhO1xuICAgICAgfSBlbHNlIGlmIChyYXdEYXRhIGluc3RhbmNlb2YgQmxvYikge1xuICAgICAgICBpbWFnZSA9IHJhd0RhdGE7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbWFnZS50eXBlID09PSBcImltYWdlL3N2Zyt4bWxcIikge1xuICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCBjcmVhdGVJbWFnZUJpdG1hcCBkb2Vzbid0IHdvcmsgd2l0aCBTVkcgaW1hZ2VzLlxuICAgICAgICAvLyAoc2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvMTg0MTk3MikuXG4gICAgICAgIGNvbnN0IG11c3RSZW1vdmVBc3BlY3RSYXRpb1Byb21pc2UgPSBJbWFnZU1hbmFnZXIuX2lzU1ZHRml0dGluZ0NhbnZhcztcbiAgICAgICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBjb25zdCBpbWFnZVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgaW1hZ2VFbGVtZW50Lm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGRhdGEuYml0bWFwID0gaW1hZ2VFbGVtZW50O1xuICAgICAgICAgICAgZGF0YS5pc1N2ZyA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IChkYXRhLnN2Z1VybCA9IGZpbGVSZWFkZXIucmVzdWx0KTtcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gc2V0IHRoZSBwcmVzZXJ2ZUFzcGVjdFJhdGlvIHRvIG5vbmUgaW4gb3JkZXIgdG8gbGV0XG4gICAgICAgICAgICAvLyB0aGUgaW1hZ2UgZml0cyB0aGUgY2FudmFzIHdoZW4gcmVzaXppbmcuXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3JjID0gKGF3YWl0IG11c3RSZW1vdmVBc3BlY3RSYXRpb1Byb21pc2UpXG4gICAgICAgICAgICAgID8gYCR7dXJsfSNzdmdWaWV3KHByZXNlcnZlQXNwZWN0UmF0aW8obm9uZSkpYFxuICAgICAgICAgICAgICA6IHVybDtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGltYWdlRWxlbWVudC5vbmVycm9yID0gZmlsZVJlYWRlci5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlKTtcbiAgICAgICAgYXdhaXQgaW1hZ2VQcm9taXNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5iaXRtYXAgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChpbWFnZSk7XG4gICAgICB9XG4gICAgICBkYXRhLnJlZkNvdW50ZXIgPSAxO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHdhcm4oZSk7XG4gICAgICBkYXRhID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy4jY2FjaGUuc2V0KGtleSwgZGF0YSk7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHRoaXMuI2NhY2hlLnNldChkYXRhLmlkLCBkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBhc3luYyBnZXRGcm9tRmlsZShmaWxlKSB7XG4gICAgY29uc3QgeyBsYXN0TW9kaWZpZWQsIG5hbWUsIHNpemUsIHR5cGUgfSA9IGZpbGU7XG4gICAgcmV0dXJuIHRoaXMuI2dldChgJHtsYXN0TW9kaWZpZWR9XyR7bmFtZX1fJHtzaXplfV8ke3R5cGV9YCwgZmlsZSk7XG4gIH1cblxuICBhc3luYyBnZXRGcm9tVXJsKHVybCkge1xuICAgIHJldHVybiB0aGlzLiNnZXQodXJsLCB1cmwpO1xuICB9XG5cbiAgYXN5bmMgZ2V0RnJvbUJsb2IoaWQsIGJsb2JQcm9taXNlKSB7XG4gICAgY29uc3QgYmxvYiA9IGF3YWl0IGJsb2JQcm9taXNlO1xuICAgIHJldHVybiB0aGlzLiNnZXQoaWQsIGJsb2IpO1xuICB9XG5cbiAgYXN5bmMgZ2V0RnJvbUlkKGlkKSB7XG4gICAgdGhpcy4jY2FjaGUgfHw9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy4jY2FjaGUuZ2V0KGlkKTtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoZGF0YS5iaXRtYXApIHtcbiAgICAgIGRhdGEucmVmQ291bnRlciArPSAxO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuZmlsZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RnJvbUZpbGUoZGF0YS5maWxlKTtcbiAgICB9XG4gICAgaWYgKGRhdGEuYmxvYlByb21pc2UpIHtcbiAgICAgIGNvbnN0IHsgYmxvYlByb21pc2UgfSA9IGRhdGE7XG4gICAgICBkZWxldGUgZGF0YS5ibG9iUHJvbWlzZTtcbiAgICAgIHJldHVybiB0aGlzLmdldEZyb21CbG9iKGRhdGEuaWQsIGJsb2JQcm9taXNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0RnJvbVVybChkYXRhLnVybCk7XG4gIH1cblxuICBnZXRGcm9tQ2FudmFzKGlkLCBjYW52YXMpIHtcbiAgICB0aGlzLiNjYWNoZSB8fD0gbmV3IE1hcCgpO1xuICAgIGxldCBkYXRhID0gdGhpcy4jY2FjaGUuZ2V0KGlkKTtcbiAgICBpZiAoZGF0YT8uYml0bWFwKSB7XG4gICAgICBkYXRhLnJlZkNvdW50ZXIgKz0gMTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgY29uc3QgY3R4ID0gb2Zmc2NyZWVuLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBjdHguZHJhd0ltYWdlKGNhbnZhcywgMCwgMCk7XG4gICAgZGF0YSA9IHtcbiAgICAgIGJpdG1hcDogb2Zmc2NyZWVuLnRyYW5zZmVyVG9JbWFnZUJpdG1hcCgpLFxuICAgICAgaWQ6IGBpbWFnZV8ke3RoaXMuI2Jhc2VJZH1fJHt0aGlzLiNpZCsrfWAsXG4gICAgICByZWZDb3VudGVyOiAxLFxuICAgICAgaXNTdmc6IGZhbHNlLFxuICAgIH07XG4gICAgdGhpcy4jY2FjaGUuc2V0KGlkLCBkYXRhKTtcbiAgICB0aGlzLiNjYWNoZS5zZXQoZGF0YS5pZCwgZGF0YSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBnZXRTdmdVcmwoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy4jY2FjaGUuZ2V0KGlkKTtcbiAgICBpZiAoIWRhdGE/LmlzU3ZnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGEuc3ZnVXJsO1xuICB9XG5cbiAgZGVsZXRlSWQoaWQpIHtcbiAgICB0aGlzLiNjYWNoZSB8fD0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLiNjYWNoZS5nZXQoaWQpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkYXRhLnJlZkNvdW50ZXIgLT0gMTtcbiAgICBpZiAoZGF0YS5yZWZDb3VudGVyICE9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgYml0bWFwIH0gPSBkYXRhO1xuICAgIGlmICghZGF0YS51cmwgJiYgIWRhdGEuZmlsZSkge1xuICAgICAgLy8gVGhlIGltYWdlIGhhcyBubyB3YXkgdG8gYmUgcmVzdG9yZWQgKGN0cmwreikgc28gd2UgbXVzdCBmaXggdGhhdC5cbiAgICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoYml0bWFwLndpZHRoLCBiaXRtYXAuaGVpZ2h0KTtcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiYml0bWFwcmVuZGVyZXJcIik7XG4gICAgICBjdHgudHJhbnNmZXJGcm9tSW1hZ2VCaXRtYXAoYml0bWFwKTtcbiAgICAgIGRhdGEuYmxvYlByb21pc2UgPSBjYW52YXMuY29udmVydFRvQmxvYigpO1xuICAgIH1cblxuICAgIGJpdG1hcC5jbG9zZT8uKCk7XG4gICAgZGF0YS5iaXRtYXAgPSBudWxsO1xuICB9XG5cbiAgLy8gV2UgY2FuIHVzZSB0aGUgaWQgb25seSBpZiBpdCBiZWxvbmdzIHRoaXMgbWFuYWdlci5cbiAgLy8gV2UgbXVzdCB0YWtlIGNhcmUgb2YgaGF2aW5nIHRoZSByaWdodCBtYW5hZ2VyIGJlY2F1c2Ugd2UgY2FuIGNvcHkvcGFzdGVcbiAgLy8gc29tZSBpbWFnZXMgZnJvbSBvdGhlciBkb2N1bWVudHMsIGhlbmNlIGl0J2QgYmUgYSBwaXR5IHRvIHVzZSBhbiBpZCBmcm9tIGFuXG4gIC8vIG90aGVyIG1hbmFnZXIuXG4gIGlzVmFsaWRJZChpZCkge1xuICAgIHJldHVybiBpZC5zdGFydHNXaXRoKGBpbWFnZV8ke3RoaXMuI2Jhc2VJZH1fYCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGFzcyB0byBoYW5kbGUgdW5kby9yZWRvLlxuICogQ29tbWFuZHMgYXJlIGp1c3Qgc2F2ZWQgaW4gYSBidWZmZXIuXG4gKiBJZiB3ZSBoaXQgc29tZSBtZW1vcnkgaXNzdWVzIHdlIGNvdWxkIGxpa2VseSB1c2UgYSBjaXJjdWxhciBidWZmZXIuXG4gKiBJdCBoYXMgdG8gYmUgdXNlZCBhcyBhIHNpbmdsZXRvbi5cbiAqL1xuY2xhc3MgQ29tbWFuZE1hbmFnZXIge1xuICAjY29tbWFuZHMgPSBbXTtcblxuICAjbG9ja2VkID0gZmFsc2U7XG5cbiAgI21heFNpemU7XG5cbiAgI3Bvc2l0aW9uID0gLTE7XG5cbiAgY29uc3RydWN0b3IobWF4U2l6ZSA9IDEyOCkge1xuICAgIHRoaXMuI21heFNpemUgPSBtYXhTaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtPYmplY3R9IGFkZE9wdGlvbnNcbiAgICogQHByb3BlcnR5IHtmdW5jdGlvbn0gY21kXG4gICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IHVuZG9cbiAgICogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3Bvc3RdXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gbXVzdEV4ZWNcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHR5cGVcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBvdmVyd3JpdGVJZlNhbWVUeXBlXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0ga2VlcFVuZG9cbiAgICovXG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBjb3VwbGUgb2YgY29tbWFuZHMgdG8gYmUgdXNlZCBpbiBjYXNlIG9mIHJlZG8vdW5kby5cbiAgICogQHBhcmFtIHthZGRPcHRpb25zfSBvcHRpb25zXG4gICAqL1xuICBhZGQoe1xuICAgIGNtZCxcbiAgICB1bmRvLFxuICAgIHBvc3QsXG4gICAgbXVzdEV4ZWMsXG4gICAgdHlwZSA9IE5hTixcbiAgICBvdmVyd3JpdGVJZlNhbWVUeXBlID0gZmFsc2UsXG4gICAga2VlcFVuZG8gPSBmYWxzZSxcbiAgfSkge1xuICAgIGlmIChtdXN0RXhlYykge1xuICAgICAgY21kKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI2xvY2tlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNhdmUgPSB7IGNtZCwgdW5kbywgcG9zdCwgdHlwZSB9O1xuICAgIGlmICh0aGlzLiNwb3NpdGlvbiA9PT0gLTEpIHtcbiAgICAgIGlmICh0aGlzLiNjb21tYW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIEFsbCB0aGUgY29tbWFuZHMgaGF2ZSBiZWVuIHVuZG9uZSBhbmQgdGhlbiBhIG5ldyBvbmUgaXMgYWRkZWRcbiAgICAgICAgLy8gaGVuY2Ugd2UgY2xlYXIgdGhlIHF1ZXVlLlxuICAgICAgICB0aGlzLiNjb21tYW5kcy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgICAgdGhpcy4jcG9zaXRpb24gPSAwO1xuICAgICAgdGhpcy4jY29tbWFuZHMucHVzaChzYXZlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob3ZlcndyaXRlSWZTYW1lVHlwZSAmJiB0aGlzLiNjb21tYW5kc1t0aGlzLiNwb3NpdGlvbl0udHlwZSA9PT0gdHlwZSkge1xuICAgICAgLy8gRm9yIGV4YW1wbGUgd2hlbiB3ZSBjaGFuZ2UgYSBjb2xvciB3ZSBkb24ndCB3YW50IHRvXG4gICAgICAvLyBiZSBhYmxlIHRvIHVuZG8gYWxsIHRoZSBzdGVwcywgaGVuY2Ugd2Ugb25seSB3YW50IHRvXG4gICAgICAvLyBrZWVwIHRoZSBsYXN0IHVuZG9hYmxlIGFjdGlvbiBpbiB0aGlzIHNlcXVlbmNlIG9mIGFjdGlvbnMuXG4gICAgICBpZiAoa2VlcFVuZG8pIHtcbiAgICAgICAgc2F2ZS51bmRvID0gdGhpcy4jY29tbWFuZHNbdGhpcy4jcG9zaXRpb25dLnVuZG87XG4gICAgICB9XG4gICAgICB0aGlzLiNjb21tYW5kc1t0aGlzLiNwb3NpdGlvbl0gPSBzYXZlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5leHQgPSB0aGlzLiNwb3NpdGlvbiArIDE7XG4gICAgaWYgKG5leHQgPT09IHRoaXMuI21heFNpemUpIHtcbiAgICAgIHRoaXMuI2NvbW1hbmRzLnNwbGljZSgwLCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jcG9zaXRpb24gPSBuZXh0O1xuICAgICAgaWYgKG5leHQgPCB0aGlzLiNjb21tYW5kcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy4jY29tbWFuZHMuc3BsaWNlKG5leHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuI2NvbW1hbmRzLnB1c2goc2F2ZSk7XG4gIH1cblxuICAvKipcbiAgICogVW5kbyB0aGUgbGFzdCBjb21tYW5kLlxuICAgKi9cbiAgdW5kbygpIHtcbiAgICBpZiAodGhpcy4jcG9zaXRpb24gPT09IC0xKSB7XG4gICAgICAvLyBOb3RoaW5nIHRvIHVuZG8uXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQXZvaWQgdG8gaW5zZXJ0IHNvbWV0aGluZyBkdXJpbmcgdGhlIHVuZG8gZXhlY3V0aW9uLlxuICAgIHRoaXMuI2xvY2tlZCA9IHRydWU7XG4gICAgY29uc3QgeyB1bmRvLCBwb3N0IH0gPSB0aGlzLiNjb21tYW5kc1t0aGlzLiNwb3NpdGlvbl07XG4gICAgdW5kbygpO1xuICAgIHBvc3Q/LigpO1xuICAgIHRoaXMuI2xvY2tlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy4jcG9zaXRpb24gLT0gMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWRvIHRoZSBsYXN0IGNvbW1hbmQuXG4gICAqL1xuICByZWRvKCkge1xuICAgIGlmICh0aGlzLiNwb3NpdGlvbiA8IHRoaXMuI2NvbW1hbmRzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHRoaXMuI3Bvc2l0aW9uICs9IDE7XG5cbiAgICAgIC8vIEF2b2lkIHRvIGluc2VydCBzb21ldGhpbmcgZHVyaW5nIHRoZSByZWRvIGV4ZWN1dGlvbi5cbiAgICAgIHRoaXMuI2xvY2tlZCA9IHRydWU7XG4gICAgICBjb25zdCB7IGNtZCwgcG9zdCB9ID0gdGhpcy4jY29tbWFuZHNbdGhpcy4jcG9zaXRpb25dO1xuICAgICAgY21kKCk7XG4gICAgICBwb3N0Py4oKTtcbiAgICAgIHRoaXMuI2xvY2tlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGVyZSBpcyBzb21ldGhpbmcgdG8gdW5kby5cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTb21ldGhpbmdUb1VuZG8oKSB7XG4gICAgcmV0dXJuIHRoaXMuI3Bvc2l0aW9uICE9PSAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGVyZSBpcyBzb21ldGhpbmcgdG8gcmVkby5cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTb21ldGhpbmdUb1JlZG8oKSB7XG4gICAgcmV0dXJuIHRoaXMuI3Bvc2l0aW9uIDwgdGhpcy4jY29tbWFuZHMubGVuZ3RoIC0gMTtcbiAgfVxuXG4gIGNsZWFuVHlwZSh0eXBlKSB7XG4gICAgaWYgKHRoaXMuI3Bvc2l0aW9uID09PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gdGhpcy4jcG9zaXRpb247IGkgPj0gMDsgaS0tKSB7XG4gICAgICBpZiAodGhpcy4jY29tbWFuZHNbaV0udHlwZSAhPT0gdHlwZSkge1xuICAgICAgICB0aGlzLiNjb21tYW5kcy5zcGxpY2UoaSArIDEsIHRoaXMuI3Bvc2l0aW9uIC0gaSk7XG4gICAgICAgIHRoaXMuI3Bvc2l0aW9uID0gaTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLiNjb21tYW5kcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuI3Bvc2l0aW9uID0gLTE7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuI2NvbW1hbmRzID0gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIHRvIGhhbmRsZSB0aGUgZGlmZmVyZW50IGtleWJvYXJkcyBzaG9ydGN1dHMgd2UgY2FuIGhhdmUgb24gbWFjIG9yXG4gKiBub24tbWFjIE9TZXMuXG4gKi9cbmNsYXNzIEtleWJvYXJkTWFuYWdlciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcga2V5Ym9hcmQgbWFuYWdlciBjbGFzcy5cbiAgICogQHBhcmFtIHtBcnJheTxBcnJheT59IGNhbGxiYWNrcyAtIGFuIGFycmF5IGNvbnRhaW5pbmcgYW4gYXJyYXkgb2Ygc2hvcnRjdXRzXG4gICAqIGFuZCBhIGNhbGxiYWNrIHRvIGNhbGwuXG4gICAqIEEgc2hvcnRjdXQgaXMgYSBzdHJpbmcgbGlrZSBgY3RybCtjYCBvciBgbWFjK2N0cmwrY2AgZm9yIG1hYyBPUy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGNhbGxiYWNrcykge1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgdGhpcy5jYWxsYmFja3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5hbGxLZXlzID0gbmV3IFNldCgpO1xuXG4gICAgY29uc3QgeyBpc01hYyB9ID0gRmVhdHVyZVRlc3QucGxhdGZvcm07XG4gICAgZm9yIChjb25zdCBba2V5cywgY2FsbGJhY2ssIG9wdGlvbnMgPSB7fV0gb2YgY2FsbGJhY2tzKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGNvbnN0IGlzTWFjS2V5ID0ga2V5LnN0YXJ0c1dpdGgoXCJtYWMrXCIpO1xuICAgICAgICBpZiAoaXNNYWMgJiYgaXNNYWNLZXkpIHtcbiAgICAgICAgICB0aGlzLmNhbGxiYWNrcy5zZXQoa2V5LnNsaWNlKDQpLCB7IGNhbGxiYWNrLCBvcHRpb25zIH0pO1xuICAgICAgICAgIHRoaXMuYWxsS2V5cy5hZGQoa2V5LnNwbGl0KFwiK1wiKS5hdCgtMSkpO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc01hYyAmJiAhaXNNYWNLZXkpIHtcbiAgICAgICAgICB0aGlzLmNhbGxiYWNrcy5zZXQoa2V5LCB7IGNhbGxiYWNrLCBvcHRpb25zIH0pO1xuICAgICAgICAgIHRoaXMuYWxsS2V5cy5hZGQoa2V5LnNwbGl0KFwiK1wiKS5hdCgtMSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlcmlhbGl6ZSBhbiBldmVudCBpbnRvIGEgc3RyaW5nIGluIG9yZGVyIHRvIG1hdGNoIGFcbiAgICogcG90ZW50aWFsIGtleSBmb3IgYSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgI3NlcmlhbGl6ZShldmVudCkge1xuICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2goXCJhbHRcIik7XG4gICAgfVxuICAgIGlmIChldmVudC5jdHJsS2V5KSB7XG4gICAgICB0aGlzLmJ1ZmZlci5wdXNoKFwiY3RybFwiKTtcbiAgICB9XG4gICAgaWYgKGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2goXCJtZXRhXCIpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2goXCJzaGlmdFwiKTtcbiAgICB9XG4gICAgdGhpcy5idWZmZXIucHVzaChldmVudC5rZXkpO1xuICAgIGNvbnN0IHN0ciA9IHRoaXMuYnVmZmVyLmpvaW4oXCIrXCIpO1xuICAgIHRoaXMuYnVmZmVyLmxlbmd0aCA9IDA7XG5cbiAgICByZXR1cm4gc3RyO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSBjYWxsYmFjaywgaWYgYW55LCBmb3IgYSBnaXZlbiBrZXlib2FyZCBldmVudC5cbiAgICogVGhlIHNlbGYgaXMgdXNlZCBhcyBgdGhpc2AgaW4gdGhlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2VsZlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2ZW50XG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBleGVjKHNlbGYsIGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmFsbEtleXMuaGFzKGV2ZW50LmtleSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5mbyA9IHRoaXMuY2FsbGJhY2tzLmdldCh0aGlzLiNzZXJpYWxpemUoZXZlbnQpKTtcbiAgICBpZiAoIWluZm8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgY2FsbGJhY2ssXG4gICAgICBvcHRpb25zOiB7IGJ1YmJsZXMgPSBmYWxzZSwgYXJncyA9IFtdLCBjaGVja2VyID0gbnVsbCB9LFxuICAgIH0gPSBpbmZvO1xuXG4gICAgaWYgKGNoZWNrZXIgJiYgIWNoZWNrZXIoc2VsZiwgZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxiYWNrLmJpbmQoc2VsZiwgLi4uYXJncywgZXZlbnQpKCk7XG5cbiAgICAvLyBGb3IgZXhhbXBsZSwgY3RybCtzIGluIGEgRnJlZVRleHQgbXVzdCBiZSBoYW5kbGVkIGJ5IHRoZSB2aWV3ZXIsIGhlbmNlXG4gICAgLy8gdGhlIGV2ZW50IG11c3QgYnViYmxlLlxuICAgIGlmICghYnViYmxlcykge1xuICAgICAgc3RvcEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgQ29sb3JNYW5hZ2VyIHtcbiAgc3RhdGljIF9jb2xvcnNNYXBwaW5nID0gbmV3IE1hcChbXG4gICAgW1wiQ2FudmFzVGV4dFwiLCBbMCwgMCwgMF1dLFxuICAgIFtcIkNhbnZhc1wiLCBbMjU1LCAyNTUsIDI1NV1dLFxuICBdKTtcblxuICBnZXQgX2NvbG9ycygpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgIFBERkpTRGV2LnRlc3QoXCJMSUJcIikgJiZcbiAgICAgIHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICkge1xuICAgICAgcmV0dXJuIHNoYWRvdyh0aGlzLCBcIl9jb2xvcnNcIiwgQ29sb3JNYW5hZ2VyLl9jb2xvcnNNYXBwaW5nKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xvcnMgPSBuZXcgTWFwKFtcbiAgICAgIFtcIkNhbnZhc1RleHRcIiwgbnVsbF0sXG4gICAgICBbXCJDYW52YXNcIiwgbnVsbF0sXG4gICAgXSk7XG4gICAgZ2V0Q29sb3JWYWx1ZXMoY29sb3JzKTtcbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiX2NvbG9yc1wiLCBjb2xvcnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluIEhpZ2ggQ29udHJhc3QgTW9kZSwgdGhlIGNvbG9yIG9uIHRoZSBzY3JlZW4gaXMgbm90IGFsd2F5cyB0aGVcbiAgICogcmVhbCBjb2xvciB1c2VkIGluIHRoZSBwZGYuXG4gICAqIEZvciBleGFtcGxlIGluIHNvbWUgY2FzZXMgd2hpdGUgY2FuIGFwcGVhciB0byBiZSBibGFjayBidXQgd2hlbiBzYXZpbmdcbiAgICogd2Ugd2FudCB0byBoYXZlIHdoaXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAgICogQHJldHVybnMge0FycmF5PG51bWJlcj59XG4gICAqL1xuICBjb252ZXJ0KGNvbG9yKSB7XG4gICAgY29uc3QgcmdiID0gZ2V0UkdCKGNvbG9yKTtcbiAgICBpZiAoIXdpbmRvdy5tYXRjaE1lZGlhKFwiKGZvcmNlZC1jb2xvcnM6IGFjdGl2ZSlcIikubWF0Y2hlcykge1xuICAgICAgcmV0dXJuIHJnYjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBSR0JdIG9mIHRoaXMuX2NvbG9ycykge1xuICAgICAgaWYgKFJHQi5ldmVyeSgoeCwgaSkgPT4geCA9PT0gcmdiW2ldKSkge1xuICAgICAgICByZXR1cm4gQ29sb3JNYW5hZ2VyLl9jb2xvcnNNYXBwaW5nLmdldChuYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJnYjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBpbnB1dCBlbGVtZW50IG11c3QgaGF2ZSBpdHMgY29sb3IgdmFsdWUgYXMgYSBoZXggc3RyaW5nXG4gICAqIGFuZCBub3QgYXMgY29sb3IgbmFtZS5cbiAgICogU28gdGhpcyBmdW5jdGlvbiBjb252ZXJ0cyBhIG5hbWUgaW50byBhbiBoZXggc3RyaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0SGV4Q29kZShuYW1lKSB7XG4gICAgY29uc3QgcmdiID0gdGhpcy5fY29sb3JzLmdldChuYW1lKTtcbiAgICBpZiAoIXJnYikge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICAgIHJldHVybiBVdGlsLm1ha2VIZXhDb2xvciguLi5yZ2IpO1xuICB9XG59XG5cbi8qKlxuICogQSBwZGYgaGFzIHNldmVyYWwgcGFnZXMgYW5kIGVhY2ggb2YgdGhlbSB3aGVuIGl0IHdpbGwgcmVuZGVyZWRcbiAqIHdpbGwgaGF2ZSBhbiBBbm5vdGF0aW9uRWRpdG9yTGF5ZXIgd2hpY2ggd2lsbCBjb250YWluIHRoZSBzb21lXG4gKiBuZXcgQW5ub3RhdGlvbnMgYXNzb2NpYXRlZCB0byBhbiBlZGl0b3IgaW4gb3JkZXIgdG8gbW9kaWZ5IHRoZW0uXG4gKlxuICogVGhpcyBjbGFzcyBpcyB1c2VkIHRvIG1hbmFnZSBhbGwgdGhlIGRpZmZlcmVudCBsYXllcnMsIGVkaXRvcnMgYW5kXG4gKiBzb21lIGFjdGlvbiBsaWtlIGNvcHkvcGFzdGUsIHVuZG8vcmVkbywgLi4uXG4gKi9cbmNsYXNzIEFubm90YXRpb25FZGl0b3JVSU1hbmFnZXIge1xuICAjYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICNhY3RpdmVFZGl0b3IgPSBudWxsO1xuXG4gICNhbGxFZGl0b3JzID0gbmV3IE1hcCgpO1xuXG4gICNhbGxMYXllcnMgPSBuZXcgTWFwKCk7XG5cbiAgI2FsdFRleHRNYW5hZ2VyID0gbnVsbDtcblxuICAjYW5ub3RhdGlvblN0b3JhZ2UgPSBudWxsO1xuXG4gICNjaGFuZ2VkRXhpc3RpbmdBbm5vdGF0aW9ucyA9IG51bGw7XG5cbiAgI2NvbW1hbmRNYW5hZ2VyID0gbmV3IENvbW1hbmRNYW5hZ2VyKCk7XG5cbiAgI2NvcHlQYXN0ZUFDID0gbnVsbDtcblxuICAjY3VycmVudERyYXdpbmdTZXNzaW9uID0gbnVsbDtcblxuICAjY3VycmVudFBhZ2VJbmRleCA9IDA7XG5cbiAgI2RlbGV0ZWRBbm5vdGF0aW9uc0VsZW1lbnRJZHMgPSBuZXcgU2V0KCk7XG5cbiAgI2RyYWdnaW5nRWRpdG9ycyA9IG51bGw7XG5cbiAgI2VkaXRvclR5cGVzID0gbnVsbDtcblxuICAjZWRpdG9yc1RvUmVzY2FsZSA9IG5ldyBTZXQoKTtcblxuICBfZWRpdG9yVW5kb0JhciA9IG51bGw7XG5cbiAgI2VuYWJsZUhpZ2hsaWdodEZsb2F0aW5nQnV0dG9uID0gZmFsc2U7XG5cbiAgI2VuYWJsZVVwZGF0ZWRBZGRJbWFnZSA9IGZhbHNlO1xuXG4gICNlbmFibGVOZXdBbHRUZXh0V2hlbkFkZGluZ0ltYWdlID0gZmFsc2U7XG5cbiAgI2ZpbHRlckZhY3RvcnkgPSBudWxsO1xuXG4gICNmb2N1c01haW5Db250YWluZXJUaW1lb3V0SWQgPSBudWxsO1xuXG4gICNmb2N1c01hbmFnZXJBQyA9IG51bGw7XG5cbiAgI2hpZ2hsaWdodENvbG9ycyA9IG51bGw7XG5cbiAgI2hpZ2hsaWdodFdoZW5TaGlmdFVwID0gZmFsc2U7XG5cbiAgI2hpZ2hsaWdodFRvb2xiYXIgPSBudWxsO1xuXG4gICNpZE1hbmFnZXIgPSBuZXcgSWRNYW5hZ2VyKCk7XG5cbiAgI2lzRW5hYmxlZCA9IGZhbHNlO1xuXG4gICNpc1dhaXRpbmcgPSBmYWxzZTtcblxuICAja2V5Ym9hcmRNYW5hZ2VyQUMgPSBudWxsO1xuXG4gICNsYXN0QWN0aXZlRWxlbWVudCA9IG51bGw7XG5cbiAgI21haW5IaWdobGlnaHRDb2xvclBpY2tlciA9IG51bGw7XG5cbiAgI21pc3NpbmdDYW52YXNlcyA9IG51bGw7XG5cbiAgI21sTWFuYWdlciA9IG51bGw7XG5cbiAgI21vZGUgPSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5OT05FO1xuXG4gICNzZWxlY3RlZEVkaXRvcnMgPSBuZXcgU2V0KCk7XG5cbiAgI3NlbGVjdGVkVGV4dE5vZGUgPSBudWxsO1xuXG4gICNzaWduYXR1cmVNYW5hZ2VyID0gbnVsbDtcblxuICAjcGFnZUNvbG9ycyA9IG51bGw7XG5cbiAgI3Nob3dBbGxTdGF0ZXMgPSBudWxsO1xuXG4gICNwcmV2aW91c1N0YXRlcyA9IHtcbiAgICBpc0VkaXRpbmc6IGZhbHNlLFxuICAgIGlzRW1wdHk6IHRydWUsXG4gICAgaGFzU29tZXRoaW5nVG9VbmRvOiBmYWxzZSxcbiAgICBoYXNTb21ldGhpbmdUb1JlZG86IGZhbHNlLFxuICAgIGhhc1NlbGVjdGVkRWRpdG9yOiBmYWxzZSxcbiAgICBoYXNTZWxlY3RlZFRleHQ6IGZhbHNlLFxuICB9O1xuXG4gICN0cmFuc2xhdGlvbiA9IFswLCAwXTtcblxuICAjdHJhbnNsYXRpb25UaW1lb3V0SWQgPSBudWxsO1xuXG4gICNjb250YWluZXIgPSBudWxsO1xuXG4gICN2aWV3ZXIgPSBudWxsO1xuXG4gICN1cGRhdGVNb2RlQ2FwYWJpbGl0eSA9IG51bGw7XG5cbiAgc3RhdGljIFRSQU5TTEFURV9TTUFMTCA9IDE7IC8vIHBhZ2UgdW5pdHMuXG5cbiAgc3RhdGljIFRSQU5TTEFURV9CSUcgPSAxMDsgLy8gcGFnZSB1bml0cy5cblxuICBzdGF0aWMgZ2V0IF9rZXlib2FyZE1hbmFnZXIoKSB7XG4gICAgY29uc3QgcHJvdG8gPSBBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBmb2N1c2VkIGVsZW1lbnQgaXMgYW4gaW5wdXQsIHdlIGRvbid0IHdhbnQgdG8gaGFuZGxlIHRoZSBhcnJvdy5cbiAgICAgKiBGb3IgZXhhbXBsZSwgc2xpZGVycyBjYW4gYmUgY29udHJvbGxlZCB3aXRoIHRoZSBhcnJvdyBrZXlzLlxuICAgICAqL1xuICAgIGNvbnN0IGFycm93Q2hlY2tlciA9IHNlbGYgPT5cbiAgICAgIHNlbGYuI2NvbnRhaW5lci5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSAmJlxuICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lICE9PSBcIkJVVFRPTlwiICYmXG4gICAgICBzZWxmLmhhc1NvbWV0aGluZ1RvQ29udHJvbCgpO1xuXG4gICAgY29uc3QgdGV4dElucHV0Q2hlY2tlciA9IChfc2VsZiwgeyB0YXJnZXQ6IGVsIH0pID0+IHtcbiAgICAgIGlmIChlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgeyB0eXBlIH0gPSBlbDtcbiAgICAgICAgcmV0dXJuIHR5cGUgIT09IFwidGV4dFwiICYmIHR5cGUgIT09IFwibnVtYmVyXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc21hbGwgPSB0aGlzLlRSQU5TTEFURV9TTUFMTDtcbiAgICBjb25zdCBiaWcgPSB0aGlzLlRSQU5TTEFURV9CSUc7XG5cbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiX2tleWJvYXJkTWFuYWdlclwiLFxuICAgICAgbmV3IEtleWJvYXJkTWFuYWdlcihbXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJjdHJsK2FcIiwgXCJtYWMrbWV0YSthXCJdLFxuICAgICAgICAgIHByb3RvLnNlbGVjdEFsbCxcbiAgICAgICAgICB7IGNoZWNrZXI6IHRleHRJbnB1dENoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1tcImN0cmwrelwiLCBcIm1hYyttZXRhK3pcIl0sIHByb3RvLnVuZG8sIHsgY2hlY2tlcjogdGV4dElucHV0Q2hlY2tlciB9XSxcbiAgICAgICAgW1xuICAgICAgICAgIC8vIE9uIG1hYywgZGVwZW5kaW5nIG9mIHRoZSBPUyB2ZXJzaW9uLCB0aGUgZXZlbnQua2V5IGlzIGVpdGhlciBcInpcIiBvclxuICAgICAgICAgIC8vIFwiWlwiIHdoZW4gdGhlIHVzZXIgcHJlc3NlcyBcIm1ldGErc2hpZnQrelwiLlxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFwiY3RybCt5XCIsXG4gICAgICAgICAgICBcImN0cmwrc2hpZnQrelwiLFxuICAgICAgICAgICAgXCJtYWMrbWV0YStzaGlmdCt6XCIsXG4gICAgICAgICAgICBcImN0cmwrc2hpZnQrWlwiLFxuICAgICAgICAgICAgXCJtYWMrbWV0YStzaGlmdCtaXCIsXG4gICAgICAgICAgXSxcbiAgICAgICAgICBwcm90by5yZWRvLFxuICAgICAgICAgIHsgY2hlY2tlcjogdGV4dElucHV0Q2hlY2tlciB9LFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgW1xuICAgICAgICAgICAgXCJCYWNrc3BhY2VcIixcbiAgICAgICAgICAgIFwiYWx0K0JhY2tzcGFjZVwiLFxuICAgICAgICAgICAgXCJjdHJsK0JhY2tzcGFjZVwiLFxuICAgICAgICAgICAgXCJzaGlmdCtCYWNrc3BhY2VcIixcbiAgICAgICAgICAgIFwibWFjK0JhY2tzcGFjZVwiLFxuICAgICAgICAgICAgXCJtYWMrYWx0K0JhY2tzcGFjZVwiLFxuICAgICAgICAgICAgXCJtYWMrY3RybCtCYWNrc3BhY2VcIixcbiAgICAgICAgICAgIFwiRGVsZXRlXCIsXG4gICAgICAgICAgICBcImN0cmwrRGVsZXRlXCIsXG4gICAgICAgICAgICBcInNoaWZ0K0RlbGV0ZVwiLFxuICAgICAgICAgICAgXCJtYWMrRGVsZXRlXCIsXG4gICAgICAgICAgXSxcbiAgICAgICAgICBwcm90by5kZWxldGUsXG4gICAgICAgICAgeyBjaGVja2VyOiB0ZXh0SW5wdXRDaGVja2VyIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJFbnRlclwiLCBcIm1hYytFbnRlclwiXSxcbiAgICAgICAgICBwcm90by5hZGROZXdFZGl0b3JGcm9tS2V5Ym9hcmQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gVGhvc2Ugc2hvcnRjdXRzIGNhbiBiZSB1c2VkIGluIHRoZSB0b29sYmFyIGZvciBzb21lIG90aGVyIGFjdGlvbnNcbiAgICAgICAgICAgIC8vIGxpa2Ugem9vbWluZywgaGVuY2Ugd2UgbmVlZCB0byBjaGVjayBpZiB0aGUgY29udGFpbmVyIGhhcyB0aGVcbiAgICAgICAgICAgIC8vIGZvY3VzLlxuICAgICAgICAgICAgY2hlY2tlcjogKHNlbGYsIHsgdGFyZ2V0OiBlbCB9KSA9PlxuICAgICAgICAgICAgICAhKGVsIGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQpICYmXG4gICAgICAgICAgICAgIHNlbGYuI2NvbnRhaW5lci5jb250YWlucyhlbCkgJiZcbiAgICAgICAgICAgICAgIXNlbGYuaXNFbnRlckhhbmRsZWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcIiBcIiwgXCJtYWMrIFwiXSxcbiAgICAgICAgICBwcm90by5hZGROZXdFZGl0b3JGcm9tS2V5Ym9hcmQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gVGhvc2Ugc2hvcnRjdXRzIGNhbiBiZSB1c2VkIGluIHRoZSB0b29sYmFyIGZvciBzb21lIG90aGVyIGFjdGlvbnNcbiAgICAgICAgICAgIC8vIGxpa2Ugem9vbWluZywgaGVuY2Ugd2UgbmVlZCB0byBjaGVjayBpZiB0aGUgY29udGFpbmVyIGhhcyB0aGVcbiAgICAgICAgICAgIC8vIGZvY3VzLlxuICAgICAgICAgICAgY2hlY2tlcjogKHNlbGYsIHsgdGFyZ2V0OiBlbCB9KSA9PlxuICAgICAgICAgICAgICAhKGVsIGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQpICYmXG4gICAgICAgICAgICAgIHNlbGYuI2NvbnRhaW5lci5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBbW1wiRXNjYXBlXCIsIFwibWFjK0VzY2FwZVwiXSwgcHJvdG8udW5zZWxlY3RBbGxdLFxuICAgICAgICBbXG4gICAgICAgICAgW1wiQXJyb3dMZWZ0XCIsIFwibWFjK0Fycm93TGVmdFwiXSxcbiAgICAgICAgICBwcm90by50cmFuc2xhdGVTZWxlY3RlZEVkaXRvcnMsXG4gICAgICAgICAgeyBhcmdzOiBbLXNtYWxsLCAwXSwgY2hlY2tlcjogYXJyb3dDaGVja2VyIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJjdHJsK0Fycm93TGVmdFwiLCBcIm1hYytzaGlmdCtBcnJvd0xlZnRcIl0sXG4gICAgICAgICAgcHJvdG8udHJhbnNsYXRlU2VsZWN0ZWRFZGl0b3JzLFxuICAgICAgICAgIHsgYXJnczogWy1iaWcsIDBdLCBjaGVja2VyOiBhcnJvd0NoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcIkFycm93UmlnaHRcIiwgXCJtYWMrQXJyb3dSaWdodFwiXSxcbiAgICAgICAgICBwcm90by50cmFuc2xhdGVTZWxlY3RlZEVkaXRvcnMsXG4gICAgICAgICAgeyBhcmdzOiBbc21hbGwsIDBdLCBjaGVja2VyOiBhcnJvd0NoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcImN0cmwrQXJyb3dSaWdodFwiLCBcIm1hYytzaGlmdCtBcnJvd1JpZ2h0XCJdLFxuICAgICAgICAgIHByb3RvLnRyYW5zbGF0ZVNlbGVjdGVkRWRpdG9ycyxcbiAgICAgICAgICB7IGFyZ3M6IFtiaWcsIDBdLCBjaGVja2VyOiBhcnJvd0NoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcIkFycm93VXBcIiwgXCJtYWMrQXJyb3dVcFwiXSxcbiAgICAgICAgICBwcm90by50cmFuc2xhdGVTZWxlY3RlZEVkaXRvcnMsXG4gICAgICAgICAgeyBhcmdzOiBbMCwgLXNtYWxsXSwgY2hlY2tlcjogYXJyb3dDaGVja2VyIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJjdHJsK0Fycm93VXBcIiwgXCJtYWMrc2hpZnQrQXJyb3dVcFwiXSxcbiAgICAgICAgICBwcm90by50cmFuc2xhdGVTZWxlY3RlZEVkaXRvcnMsXG4gICAgICAgICAgeyBhcmdzOiBbMCwgLWJpZ10sIGNoZWNrZXI6IGFycm93Q2hlY2tlciB9LFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgW1wiQXJyb3dEb3duXCIsIFwibWFjK0Fycm93RG93blwiXSxcbiAgICAgICAgICBwcm90by50cmFuc2xhdGVTZWxlY3RlZEVkaXRvcnMsXG4gICAgICAgICAgeyBhcmdzOiBbMCwgc21hbGxdLCBjaGVja2VyOiBhcnJvd0NoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcImN0cmwrQXJyb3dEb3duXCIsIFwibWFjK3NoaWZ0K0Fycm93RG93blwiXSxcbiAgICAgICAgICBwcm90by50cmFuc2xhdGVTZWxlY3RlZEVkaXRvcnMsXG4gICAgICAgICAgeyBhcmdzOiBbMCwgYmlnXSwgY2hlY2tlcjogYXJyb3dDaGVja2VyIH0sXG4gICAgICAgIF0sXG4gICAgICBdKVxuICAgICk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb250YWluZXIsXG4gICAgdmlld2VyLFxuICAgIGFsdFRleHRNYW5hZ2VyLFxuICAgIHNpZ25hdHVyZU1hbmFnZXIsXG4gICAgZXZlbnRCdXMsXG4gICAgcGRmRG9jdW1lbnQsXG4gICAgcGFnZUNvbG9ycyxcbiAgICBoaWdobGlnaHRDb2xvcnMsXG4gICAgZW5hYmxlSGlnaGxpZ2h0RmxvYXRpbmdCdXR0b24sXG4gICAgZW5hYmxlVXBkYXRlZEFkZEltYWdlLFxuICAgIGVuYWJsZU5ld0FsdFRleHRXaGVuQWRkaW5nSW1hZ2UsXG4gICAgbWxNYW5hZ2VyLFxuICAgIGVkaXRvclVuZG9CYXIsXG4gICAgc3VwcG9ydHNQaW5jaFRvWm9vbVxuICApIHtcbiAgICBjb25zdCBzaWduYWwgPSAodGhpcy5fc2lnbmFsID0gdGhpcy4jYWJvcnRDb250cm9sbGVyLnNpZ25hbCk7XG4gICAgdGhpcy4jY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuI3ZpZXdlciA9IHZpZXdlcjtcbiAgICB0aGlzLiNhbHRUZXh0TWFuYWdlciA9IGFsdFRleHRNYW5hZ2VyO1xuICAgIHRoaXMuI3NpZ25hdHVyZU1hbmFnZXIgPSBzaWduYXR1cmVNYW5hZ2VyO1xuICAgIHRoaXMuX2V2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgZXZlbnRCdXMuX29uKFwiZWRpdGluZ2FjdGlvblwiLCB0aGlzLm9uRWRpdGluZ0FjdGlvbi5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcbiAgICBldmVudEJ1cy5fb24oXCJwYWdlY2hhbmdpbmdcIiwgdGhpcy5vblBhZ2VDaGFuZ2luZy5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcbiAgICBldmVudEJ1cy5fb24oXCJzY2FsZWNoYW5naW5nXCIsIHRoaXMub25TY2FsZUNoYW5naW5nLmJpbmQodGhpcyksIHsgc2lnbmFsIH0pO1xuICAgIGV2ZW50QnVzLl9vbihcInJvdGF0aW9uY2hhbmdpbmdcIiwgdGhpcy5vblJvdGF0aW9uQ2hhbmdpbmcuYmluZCh0aGlzKSwge1xuICAgICAgc2lnbmFsLFxuICAgIH0pO1xuICAgIGV2ZW50QnVzLl9vbihcInNldHByZWZlcmVuY2VcIiwgdGhpcy5vblNldFByZWZlcmVuY2UuYmluZCh0aGlzKSwgeyBzaWduYWwgfSk7XG4gICAgZXZlbnRCdXMuX29uKFxuICAgICAgXCJzd2l0Y2hhbm5vdGF0aW9uZWRpdG9ycGFyYW1zXCIsXG4gICAgICBldnQgPT4gdGhpcy51cGRhdGVQYXJhbXMoZXZ0LnR5cGUsIGV2dC52YWx1ZSksXG4gICAgICB7IHNpZ25hbCB9XG4gICAgKTtcbiAgICB0aGlzLiNhZGRTZWxlY3Rpb25MaXN0ZW5lcigpO1xuICAgIHRoaXMuI2FkZERyYWdBbmREcm9wTGlzdGVuZXJzKCk7XG4gICAgdGhpcy4jYWRkS2V5Ym9hcmRNYW5hZ2VyKCk7XG4gICAgdGhpcy4jYW5ub3RhdGlvblN0b3JhZ2UgPSBwZGZEb2N1bWVudC5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICB0aGlzLiNmaWx0ZXJGYWN0b3J5ID0gcGRmRG9jdW1lbnQuZmlsdGVyRmFjdG9yeTtcbiAgICB0aGlzLiNwYWdlQ29sb3JzID0gcGFnZUNvbG9ycztcbiAgICB0aGlzLiNoaWdobGlnaHRDb2xvcnMgPSBoaWdobGlnaHRDb2xvcnMgfHwgbnVsbDtcbiAgICB0aGlzLiNlbmFibGVIaWdobGlnaHRGbG9hdGluZ0J1dHRvbiA9IGVuYWJsZUhpZ2hsaWdodEZsb2F0aW5nQnV0dG9uO1xuICAgIHRoaXMuI2VuYWJsZVVwZGF0ZWRBZGRJbWFnZSA9IGVuYWJsZVVwZGF0ZWRBZGRJbWFnZTtcbiAgICB0aGlzLiNlbmFibGVOZXdBbHRUZXh0V2hlbkFkZGluZ0ltYWdlID0gZW5hYmxlTmV3QWx0VGV4dFdoZW5BZGRpbmdJbWFnZTtcbiAgICB0aGlzLiNtbE1hbmFnZXIgPSBtbE1hbmFnZXIgfHwgbnVsbDtcbiAgICB0aGlzLnZpZXdQYXJhbWV0ZXJzID0ge1xuICAgICAgcmVhbFNjYWxlOiBQaXhlbHNQZXJJbmNoLlBERl9UT19DU1NfVU5JVFMsXG4gICAgICByb3RhdGlvbjogMCxcbiAgICB9O1xuICAgIHRoaXMuaXNTaGlmdEtleURvd24gPSBmYWxzZTtcbiAgICB0aGlzLl9lZGl0b3JVbmRvQmFyID0gZWRpdG9yVW5kb0JhciB8fCBudWxsO1xuICAgIHRoaXMuX3N1cHBvcnRzUGluY2hUb1pvb20gPSBzdXBwb3J0c1BpbmNoVG9ab29tICE9PSBmYWxzZTtcblxuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlc2V0XCIsIHtcbiAgICAgICAgdmFsdWU6ICgpID0+IHtcbiAgICAgICAgICB0aGlzLnNlbGVjdEFsbCgpO1xuICAgICAgICAgIHRoaXMuZGVsZXRlKCk7XG4gICAgICAgICAgdGhpcy4jaWRNYW5hZ2VyLnJlc2V0KCk7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuI3VwZGF0ZU1vZGVDYXBhYmlsaXR5Py5yZXNvbHZlKCk7XG4gICAgdGhpcy4jdXBkYXRlTW9kZUNhcGFiaWxpdHkgPSBudWxsO1xuXG4gICAgdGhpcy4jYWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgIHRoaXMuI2Fib3J0Q29udHJvbGxlciA9IG51bGw7XG4gICAgdGhpcy5fc2lnbmFsID0gbnVsbDtcblxuICAgIGZvciAoY29uc3QgbGF5ZXIgb2YgdGhpcy4jYWxsTGF5ZXJzLnZhbHVlcygpKSB7XG4gICAgICBsYXllci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHRoaXMuI2FsbExheWVycy5jbGVhcigpO1xuICAgIHRoaXMuI2FsbEVkaXRvcnMuY2xlYXIoKTtcbiAgICB0aGlzLiNlZGl0b3JzVG9SZXNjYWxlLmNsZWFyKCk7XG4gICAgdGhpcy4jbWlzc2luZ0NhbnZhc2VzPy5jbGVhcigpO1xuICAgIHRoaXMuI2FjdGl2ZUVkaXRvciA9IG51bGw7XG4gICAgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzLmNsZWFyKCk7XG4gICAgdGhpcy4jY29tbWFuZE1hbmFnZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuI2FsdFRleHRNYW5hZ2VyPy5kZXN0cm95KCk7XG4gICAgdGhpcy4jc2lnbmF0dXJlTWFuYWdlcj8uZGVzdHJveSgpO1xuICAgIHRoaXMuI2hpZ2hsaWdodFRvb2xiYXI/LmhpZGUoKTtcbiAgICB0aGlzLiNoaWdobGlnaHRUb29sYmFyID0gbnVsbDtcbiAgICB0aGlzLiNtYWluSGlnaGxpZ2h0Q29sb3JQaWNrZXI/LmRlc3Ryb3koKTtcbiAgICB0aGlzLiNtYWluSGlnaGxpZ2h0Q29sb3JQaWNrZXIgPSBudWxsO1xuICAgIGlmICh0aGlzLiNmb2N1c01haW5Db250YWluZXJUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLiNmb2N1c01haW5Db250YWluZXJUaW1lb3V0SWQpO1xuICAgICAgdGhpcy4jZm9jdXNNYWluQ29udGFpbmVyVGltZW91dElkID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuI3RyYW5zbGF0aW9uVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy4jdHJhbnNsYXRpb25UaW1lb3V0SWQpO1xuICAgICAgdGhpcy4jdHJhbnNsYXRpb25UaW1lb3V0SWQgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl9lZGl0b3JVbmRvQmFyPy5kZXN0cm95KCk7XG4gIH1cblxuICBjb21iaW5lZFNpZ25hbChhYykge1xuICAgIHJldHVybiBBYm9ydFNpZ25hbC5hbnkoW3RoaXMuX3NpZ25hbCwgYWMuc2lnbmFsXSk7XG4gIH1cblxuICBnZXQgbWxNYW5hZ2VyKCkge1xuICAgIHJldHVybiB0aGlzLiNtbE1hbmFnZXI7XG4gIH1cblxuICBnZXQgdXNlTmV3QWx0VGV4dEZsb3coKSB7XG4gICAgcmV0dXJuIHRoaXMuI2VuYWJsZVVwZGF0ZWRBZGRJbWFnZTtcbiAgfVxuXG4gIGdldCB1c2VOZXdBbHRUZXh0V2hlbkFkZGluZ0ltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLiNlbmFibGVOZXdBbHRUZXh0V2hlbkFkZGluZ0ltYWdlO1xuICB9XG5cbiAgZ2V0IGhjbUZpbHRlcigpIHtcbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiaGNtRmlsdGVyXCIsXG4gICAgICB0aGlzLiNwYWdlQ29sb3JzXG4gICAgICAgID8gdGhpcy4jZmlsdGVyRmFjdG9yeS5hZGRIQ01GaWx0ZXIoXG4gICAgICAgICAgICB0aGlzLiNwYWdlQ29sb3JzLmZvcmVncm91bmQsXG4gICAgICAgICAgICB0aGlzLiNwYWdlQ29sb3JzLmJhY2tncm91bmRcbiAgICAgICAgICApXG4gICAgICAgIDogXCJub25lXCJcbiAgICApO1xuICB9XG5cbiAgZ2V0IGRpcmVjdGlvbigpIHtcbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiZGlyZWN0aW9uXCIsXG4gICAgICBnZXRDb21wdXRlZFN0eWxlKHRoaXMuI2NvbnRhaW5lcikuZGlyZWN0aW9uXG4gICAgKTtcbiAgfVxuXG4gIGdldCBoaWdobGlnaHRDb2xvcnMoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyhcbiAgICAgIHRoaXMsXG4gICAgICBcImhpZ2hsaWdodENvbG9yc1wiLFxuICAgICAgdGhpcy4jaGlnaGxpZ2h0Q29sb3JzXG4gICAgICAgID8gbmV3IE1hcChcbiAgICAgICAgICAgIHRoaXMuI2hpZ2hsaWdodENvbG9yc1xuICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAgICAgICAgIC5tYXAocGFpciA9PiBwYWlyLnNwbGl0KFwiPVwiKS5tYXAoeCA9PiB4LnRyaW0oKSkpXG4gICAgICAgICAgKVxuICAgICAgICA6IG51bGxcbiAgICApO1xuICB9XG5cbiAgZ2V0IGhpZ2hsaWdodENvbG9yTmFtZXMoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyhcbiAgICAgIHRoaXMsXG4gICAgICBcImhpZ2hsaWdodENvbG9yTmFtZXNcIixcbiAgICAgIHRoaXMuaGlnaGxpZ2h0Q29sb3JzXG4gICAgICAgID8gbmV3IE1hcChBcnJheS5mcm9tKHRoaXMuaGlnaGxpZ2h0Q29sb3JzLCBlID0+IGUucmV2ZXJzZSgpKSlcbiAgICAgICAgOiBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1cnJlbnQgZHJhd2luZyBzZXNzaW9uLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3JMYXllcn0gbGF5ZXJcbiAgICovXG4gIHNldEN1cnJlbnREcmF3aW5nU2Vzc2lvbihsYXllcikge1xuICAgIGlmIChsYXllcikge1xuICAgICAgdGhpcy51bnNlbGVjdEFsbCgpO1xuICAgICAgdGhpcy5kaXNhYmxlVXNlclNlbGVjdCh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlVXNlclNlbGVjdChmYWxzZSk7XG4gICAgfVxuICAgIHRoaXMuI2N1cnJlbnREcmF3aW5nU2Vzc2lvbiA9IGxheWVyO1xuICB9XG5cbiAgc2V0TWFpbkhpZ2hsaWdodENvbG9yUGlja2VyKGNvbG9yUGlja2VyKSB7XG4gICAgdGhpcy4jbWFpbkhpZ2hsaWdodENvbG9yUGlja2VyID0gY29sb3JQaWNrZXI7XG4gIH1cblxuICBlZGl0QWx0VGV4dChlZGl0b3IsIGZpcnN0VGltZSA9IGZhbHNlKSB7XG4gICAgdGhpcy4jYWx0VGV4dE1hbmFnZXI/LmVkaXRBbHRUZXh0KHRoaXMsIGVkaXRvciwgZmlyc3RUaW1lKTtcbiAgfVxuXG4gIGdldFNpZ25hdHVyZShlZGl0b3IpIHtcbiAgICB0aGlzLiNzaWduYXR1cmVNYW5hZ2VyPy5nZXRTaWduYXR1cmUoeyB1aU1hbmFnZXI6IHRoaXMsIGVkaXRvciB9KTtcbiAgfVxuXG4gIGdldCBzaWduYXR1cmVNYW5hZ2VyKCkge1xuICAgIHJldHVybiB0aGlzLiNzaWduYXR1cmVNYW5hZ2VyO1xuICB9XG5cbiAgc3dpdGNoVG9Nb2RlKG1vZGUsIGNhbGxiYWNrKSB7XG4gICAgLy8gU3dpdGNoaW5nIHRvIGEgbW9kZSBjYW4gYmUgYXN5bmNocm9ub3VzLlxuICAgIHRoaXMuX2V2ZW50QnVzLm9uKFwiYW5ub3RhdGlvbmVkaXRvcm1vZGVjaGFuZ2VkXCIsIGNhbGxiYWNrLCB7XG4gICAgICBvbmNlOiB0cnVlLFxuICAgICAgc2lnbmFsOiB0aGlzLl9zaWduYWwsXG4gICAgfSk7XG4gICAgdGhpcy5fZXZlbnRCdXMuZGlzcGF0Y2goXCJzaG93YW5ub3RhdGlvbmVkaXRvcnVpXCIsIHtcbiAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgIG1vZGUsXG4gICAgfSk7XG4gIH1cblxuICBzZXRQcmVmZXJlbmNlKG5hbWUsIHZhbHVlKSB7XG4gICAgdGhpcy5fZXZlbnRCdXMuZGlzcGF0Y2goXCJzZXRwcmVmZXJlbmNlXCIsIHtcbiAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgIG5hbWUsXG4gICAgICB2YWx1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIG9uU2V0UHJlZmVyZW5jZSh7IG5hbWUsIHZhbHVlIH0pIHtcbiAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgIGNhc2UgXCJlbmFibGVOZXdBbHRUZXh0V2hlbkFkZGluZ0ltYWdlXCI6XG4gICAgICAgIHRoaXMuI2VuYWJsZU5ld0FsdFRleHRXaGVuQWRkaW5nSW1hZ2UgPSB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgb25QYWdlQ2hhbmdpbmcoeyBwYWdlTnVtYmVyIH0pIHtcbiAgICB0aGlzLiNjdXJyZW50UGFnZUluZGV4ID0gcGFnZU51bWJlciAtIDE7XG4gIH1cblxuICBmb2N1c01haW5Db250YWluZXIoKSB7XG4gICAgdGhpcy4jY29udGFpbmVyLmZvY3VzKCk7XG4gIH1cblxuICBmaW5kUGFyZW50KHgsIHkpIHtcbiAgICBmb3IgKGNvbnN0IGxheWVyIG9mIHRoaXMuI2FsbExheWVycy52YWx1ZXMoKSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICB4OiBsYXllclgsXG4gICAgICAgIHk6IGxheWVyWSxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgIH0gPSBsYXllci5kaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBpZiAoXG4gICAgICAgIHggPj0gbGF5ZXJYICYmXG4gICAgICAgIHggPD0gbGF5ZXJYICsgd2lkdGggJiZcbiAgICAgICAgeSA+PSBsYXllclkgJiZcbiAgICAgICAgeSA8PSBsYXllclkgKyBoZWlnaHRcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gbGF5ZXI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGlzYWJsZVVzZXJTZWxlY3QodmFsdWUgPSBmYWxzZSkge1xuICAgIHRoaXMuI3ZpZXdlci5jbGFzc0xpc3QudG9nZ2xlKFwibm9Vc2VyU2VsZWN0XCIsIHZhbHVlKTtcbiAgfVxuXG4gIGFkZFNob3VsZFJlc2NhbGUoZWRpdG9yKSB7XG4gICAgdGhpcy4jZWRpdG9yc1RvUmVzY2FsZS5hZGQoZWRpdG9yKTtcbiAgfVxuXG4gIHJlbW92ZVNob3VsZFJlc2NhbGUoZWRpdG9yKSB7XG4gICAgdGhpcy4jZWRpdG9yc1RvUmVzY2FsZS5kZWxldGUoZWRpdG9yKTtcbiAgfVxuXG4gIG9uU2NhbGVDaGFuZ2luZyh7IHNjYWxlIH0pIHtcbiAgICB0aGlzLmNvbW1pdE9yUmVtb3ZlKCk7XG4gICAgdGhpcy52aWV3UGFyYW1ldGVycy5yZWFsU2NhbGUgPSBzY2FsZSAqIFBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUUztcbiAgICBmb3IgKGNvbnN0IGVkaXRvciBvZiB0aGlzLiNlZGl0b3JzVG9SZXNjYWxlKSB7XG4gICAgICBlZGl0b3Iub25TY2FsZUNoYW5naW5nKCk7XG4gICAgfVxuICAgIHRoaXMuI2N1cnJlbnREcmF3aW5nU2Vzc2lvbj8ub25TY2FsZUNoYW5naW5nKCk7XG4gIH1cblxuICBvblJvdGF0aW9uQ2hhbmdpbmcoeyBwYWdlc1JvdGF0aW9uIH0pIHtcbiAgICB0aGlzLmNvbW1pdE9yUmVtb3ZlKCk7XG4gICAgdGhpcy52aWV3UGFyYW1ldGVycy5yb3RhdGlvbiA9IHBhZ2VzUm90YXRpb247XG4gIH1cblxuICAjZ2V0QW5jaG9yRWxlbWVudEZvclNlbGVjdGlvbih7IGFuY2hvck5vZGUgfSkge1xuICAgIHJldHVybiBhbmNob3JOb2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERVxuICAgICAgPyBhbmNob3JOb2RlLnBhcmVudEVsZW1lbnRcbiAgICAgIDogYW5jaG9yTm9kZTtcbiAgfVxuXG4gICNnZXRMYXllckZvclRleHRMYXllcih0ZXh0TGF5ZXIpIHtcbiAgICBjb25zdCB7IGN1cnJlbnRMYXllciB9ID0gdGhpcztcbiAgICBpZiAoY3VycmVudExheWVyLmhhc1RleHRMYXllcih0ZXh0TGF5ZXIpKSB7XG4gICAgICByZXR1cm4gY3VycmVudExheWVyO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGxheWVyIG9mIHRoaXMuI2FsbExheWVycy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGxheWVyLmhhc1RleHRMYXllcih0ZXh0TGF5ZXIpKSB7XG4gICAgICAgIHJldHVybiBsYXllcjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBoaWdobGlnaHRTZWxlY3Rpb24obWV0aG9kT2ZDcmVhdGlvbiA9IFwiXCIpIHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbGVjdGlvbiB8fCBzZWxlY3Rpb24uaXNDb2xsYXBzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQgfSA9IHNlbGVjdGlvbjtcbiAgICBjb25zdCB0ZXh0ID0gc2VsZWN0aW9uLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgYW5jaG9yRWxlbWVudCA9IHRoaXMuI2dldEFuY2hvckVsZW1lbnRGb3JTZWxlY3Rpb24oc2VsZWN0aW9uKTtcbiAgICBjb25zdCB0ZXh0TGF5ZXIgPSBhbmNob3JFbGVtZW50LmNsb3Nlc3QoXCIudGV4dExheWVyXCIpO1xuICAgIGNvbnN0IGJveGVzID0gdGhpcy5nZXRTZWxlY3Rpb25Cb3hlcyh0ZXh0TGF5ZXIpO1xuICAgIGlmICghYm94ZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2VsZWN0aW9uLmVtcHR5KCk7XG5cbiAgICBjb25zdCBsYXllciA9IHRoaXMuI2dldExheWVyRm9yVGV4dExheWVyKHRleHRMYXllcik7XG4gICAgY29uc3QgaXNOb25lTW9kZSA9IHRoaXMuI21vZGUgPT09IEFubm90YXRpb25FZGl0b3JUeXBlLk5PTkU7XG4gICAgY29uc3QgY2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICBsYXllcj8uY3JlYXRlQW5kQWRkTmV3RWRpdG9yKHsgeDogMCwgeTogMCB9LCBmYWxzZSwge1xuICAgICAgICBtZXRob2RPZkNyZWF0aW9uLFxuICAgICAgICBib3hlcyxcbiAgICAgICAgYW5jaG9yTm9kZSxcbiAgICAgICAgYW5jaG9yT2Zmc2V0LFxuICAgICAgICBmb2N1c05vZGUsXG4gICAgICAgIGZvY3VzT2Zmc2V0LFxuICAgICAgICB0ZXh0LFxuICAgICAgfSk7XG4gICAgICBpZiAoaXNOb25lTW9kZSkge1xuICAgICAgICB0aGlzLnNob3dBbGxFZGl0b3JzKFwiaGlnaGxpZ2h0XCIsIHRydWUsIC8qIHVwZGF0ZUJ1dHRvbiA9ICovIHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKGlzTm9uZU1vZGUpIHtcbiAgICAgIHRoaXMuc3dpdGNoVG9Nb2RlKEFubm90YXRpb25FZGl0b3JUeXBlLkhJR0hMSUdIVCwgY2FsbGJhY2spO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYWxsYmFjaygpO1xuICB9XG5cbiAgI2Rpc3BsYXlIaWdobGlnaHRUb29sYmFyKCkge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uIHx8IHNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhbmNob3JFbGVtZW50ID0gdGhpcy4jZ2V0QW5jaG9yRWxlbWVudEZvclNlbGVjdGlvbihzZWxlY3Rpb24pO1xuICAgIGNvbnN0IHRleHRMYXllciA9IGFuY2hvckVsZW1lbnQuY2xvc2VzdChcIi50ZXh0TGF5ZXJcIik7XG4gICAgY29uc3QgYm94ZXMgPSB0aGlzLmdldFNlbGVjdGlvbkJveGVzKHRleHRMYXllcik7XG4gICAgaWYgKCFib3hlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNoaWdobGlnaHRUb29sYmFyIHx8PSBuZXcgSGlnaGxpZ2h0VG9vbGJhcih0aGlzKTtcbiAgICB0aGlzLiNoaWdobGlnaHRUb29sYmFyLnNob3codGV4dExheWVyLCBib3hlcywgdGhpcy5kaXJlY3Rpb24gPT09IFwibHRyXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBlZGl0b3IgaW4gdGhlIGFubm90YXRpb24gc3RvcmFnZS5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIGFkZFRvQW5ub3RhdGlvblN0b3JhZ2UoZWRpdG9yKSB7XG4gICAgaWYgKFxuICAgICAgIWVkaXRvci5pc0VtcHR5KCkgJiZcbiAgICAgIHRoaXMuI2Fubm90YXRpb25TdG9yYWdlICYmXG4gICAgICAhdGhpcy4jYW5ub3RhdGlvblN0b3JhZ2UuaGFzKGVkaXRvci5pZClcbiAgICApIHtcbiAgICAgIHRoaXMuI2Fubm90YXRpb25TdG9yYWdlLnNldFZhbHVlKGVkaXRvci5pZCwgZWRpdG9yKTtcbiAgICB9XG4gIH1cblxuICAjc2VsZWN0aW9uQ2hhbmdlKCkge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uIHx8IHNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuICAgICAgaWYgKHRoaXMuI3NlbGVjdGVkVGV4dE5vZGUpIHtcbiAgICAgICAgdGhpcy4jaGlnaGxpZ2h0VG9vbGJhcj8uaGlkZSgpO1xuICAgICAgICB0aGlzLiNzZWxlY3RlZFRleHROb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVTdGF0ZXMoe1xuICAgICAgICAgIGhhc1NlbGVjdGVkVGV4dDogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IGFuY2hvck5vZGUgfSA9IHNlbGVjdGlvbjtcbiAgICBpZiAoYW5jaG9yTm9kZSA9PT0gdGhpcy4jc2VsZWN0ZWRUZXh0Tm9kZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFuY2hvckVsZW1lbnQgPSB0aGlzLiNnZXRBbmNob3JFbGVtZW50Rm9yU2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gICAgY29uc3QgdGV4dExheWVyID0gYW5jaG9yRWxlbWVudC5jbG9zZXN0KFwiLnRleHRMYXllclwiKTtcbiAgICBpZiAoIXRleHRMYXllcikge1xuICAgICAgaWYgKHRoaXMuI3NlbGVjdGVkVGV4dE5vZGUpIHtcbiAgICAgICAgdGhpcy4jaGlnaGxpZ2h0VG9vbGJhcj8uaGlkZSgpO1xuICAgICAgICB0aGlzLiNzZWxlY3RlZFRleHROb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVTdGF0ZXMoe1xuICAgICAgICAgIGhhc1NlbGVjdGVkVGV4dDogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuI2hpZ2hsaWdodFRvb2xiYXI/LmhpZGUoKTtcbiAgICB0aGlzLiNzZWxlY3RlZFRleHROb2RlID0gYW5jaG9yTm9kZTtcbiAgICB0aGlzLiNkaXNwYXRjaFVwZGF0ZVN0YXRlcyh7XG4gICAgICBoYXNTZWxlY3RlZFRleHQ6IHRydWUsXG4gICAgfSk7XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLiNtb2RlICE9PSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5ISUdITElHSFQgJiZcbiAgICAgIHRoaXMuI21vZGUgIT09IEFubm90YXRpb25FZGl0b3JUeXBlLk5PTkVcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jbW9kZSA9PT0gQW5ub3RhdGlvbkVkaXRvclR5cGUuSElHSExJR0hUKSB7XG4gICAgICB0aGlzLnNob3dBbGxFZGl0b3JzKFwiaGlnaGxpZ2h0XCIsIHRydWUsIC8qIHVwZGF0ZUJ1dHRvbiA9ICovIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuI2hpZ2hsaWdodFdoZW5TaGlmdFVwID0gdGhpcy5pc1NoaWZ0S2V5RG93bjtcbiAgICBpZiAoIXRoaXMuaXNTaGlmdEtleURvd24pIHtcbiAgICAgIGNvbnN0IGFjdGl2ZUxheWVyID1cbiAgICAgICAgdGhpcy4jbW9kZSA9PT0gQW5ub3RhdGlvbkVkaXRvclR5cGUuSElHSExJR0hUXG4gICAgICAgICAgPyB0aGlzLiNnZXRMYXllckZvclRleHRMYXllcih0ZXh0TGF5ZXIpXG4gICAgICAgICAgOiBudWxsO1xuICAgICAgYWN0aXZlTGF5ZXI/LnRvZ2dsZURyYXdpbmcoKTtcblxuICAgICAgY29uc3QgYWMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICBjb25zdCBzaWduYWwgPSB0aGlzLmNvbWJpbmVkU2lnbmFsKGFjKTtcblxuICAgICAgY29uc3QgcG9pbnRlcnVwID0gZSA9PiB7XG4gICAgICAgIGlmIChlLnR5cGUgPT09IFwicG9pbnRlcnVwXCIgJiYgZS5idXR0b24gIT09IDApIHtcbiAgICAgICAgICAvLyBEbyBub3RoaW5nIG9uIHJpZ2h0IGNsaWNrLlxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhYy5hYm9ydCgpO1xuICAgICAgICBhY3RpdmVMYXllcj8udG9nZ2xlRHJhd2luZyh0cnVlKTtcbiAgICAgICAgaWYgKGUudHlwZSA9PT0gXCJwb2ludGVydXBcIikge1xuICAgICAgICAgIHRoaXMuI29uU2VsZWN0RW5kKFwibWFpbl90b29sYmFyXCIpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgcG9pbnRlcnVwLCB7IHNpZ25hbCB9KTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBwb2ludGVydXAsIHsgc2lnbmFsIH0pO1xuICAgIH1cbiAgfVxuXG4gICNvblNlbGVjdEVuZChtZXRob2RPZkNyZWF0aW9uID0gXCJcIikge1xuICAgIGlmICh0aGlzLiNtb2RlID09PSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5ISUdITElHSFQpIHtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0U2VsZWN0aW9uKG1ldGhvZE9mQ3JlYXRpb24pO1xuICAgIH0gZWxzZSBpZiAodGhpcy4jZW5hYmxlSGlnaGxpZ2h0RmxvYXRpbmdCdXR0b24pIHtcbiAgICAgIHRoaXMuI2Rpc3BsYXlIaWdobGlnaHRUb29sYmFyKCk7XG4gICAgfVxuICB9XG5cbiAgI2FkZFNlbGVjdGlvbkxpc3RlbmVyKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcInNlbGVjdGlvbmNoYW5nZVwiLFxuICAgICAgdGhpcy4jc2VsZWN0aW9uQ2hhbmdlLmJpbmQodGhpcyksXG4gICAgICB7IHNpZ25hbDogdGhpcy5fc2lnbmFsIH1cbiAgICApO1xuICB9XG5cbiAgI2FkZEZvY3VzTWFuYWdlcigpIHtcbiAgICBpZiAodGhpcy4jZm9jdXNNYW5hZ2VyQUMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jZm9jdXNNYW5hZ2VyQUMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3Qgc2lnbmFsID0gdGhpcy5jb21iaW5lZFNpZ25hbCh0aGlzLiNmb2N1c01hbmFnZXJBQyk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMuZm9jdXMuYmluZCh0aGlzKSwgeyBzaWduYWwgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHRoaXMuYmx1ci5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcbiAgfVxuXG4gICNyZW1vdmVGb2N1c01hbmFnZXIoKSB7XG4gICAgdGhpcy4jZm9jdXNNYW5hZ2VyQUM/LmFib3J0KCk7XG4gICAgdGhpcy4jZm9jdXNNYW5hZ2VyQUMgPSBudWxsO1xuICB9XG5cbiAgYmx1cigpIHtcbiAgICB0aGlzLmlzU2hpZnRLZXlEb3duID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuI2hpZ2hsaWdodFdoZW5TaGlmdFVwKSB7XG4gICAgICB0aGlzLiNoaWdobGlnaHRXaGVuU2hpZnRVcCA9IGZhbHNlO1xuICAgICAgdGhpcy4jb25TZWxlY3RFbmQoXCJtYWluX3Rvb2xiYXJcIik7XG4gICAgfVxuICAgIGlmICghdGhpcy5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gV2hlbiBzZXZlcmFsIGVkaXRvcnMgYXJlIHNlbGVjdGVkIGFuZCB0aGUgd2luZG93IGxvc2VzIGZvY3VzLCB3ZSB3YW50IHRvXG4gICAgLy8ga2VlcCB0aGUgbGFzdCBhY3RpdmUgZWxlbWVudCBpbiBvcmRlciB0byBiZSBhYmxlIHRvIGZvY3VzIGl0IGFnYWluIHdoZW5cbiAgICAvLyB0aGUgd2luZG93IGdldHMgdGhlIGZvY3VzIGJhY2sgYnV0IHdlIGRvbid0IHdhbnQgdG8gdHJpZ2dlciBhbnkgZm9jdXNcbiAgICAvLyBjYWxsYmFja3MgZWxzZSBvbmx5IG9uZSBlZGl0b3Igd2lsbCBiZSBzZWxlY3RlZC5cbiAgICBjb25zdCB7IGFjdGl2ZUVsZW1lbnQgfSA9IGRvY3VtZW50O1xuICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIHRoaXMuI3NlbGVjdGVkRWRpdG9ycykge1xuICAgICAgaWYgKGVkaXRvci5kaXYuY29udGFpbnMoYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgdGhpcy4jbGFzdEFjdGl2ZUVsZW1lbnQgPSBbZWRpdG9yLCBhY3RpdmVFbGVtZW50XTtcbiAgICAgICAgZWRpdG9yLl9mb2N1c0V2ZW50c0FsbG93ZWQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9jdXMoKSB7XG4gICAgaWYgKCF0aGlzLiNsYXN0QWN0aXZlRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBbbGFzdEVkaXRvciwgbGFzdEFjdGl2ZUVsZW1lbnRdID0gdGhpcy4jbGFzdEFjdGl2ZUVsZW1lbnQ7XG4gICAgdGhpcy4jbGFzdEFjdGl2ZUVsZW1lbnQgPSBudWxsO1xuICAgIGxhc3RBY3RpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImZvY3VzaW5cIixcbiAgICAgICgpID0+IHtcbiAgICAgICAgbGFzdEVkaXRvci5fZm9jdXNFdmVudHNBbGxvd2VkID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICB7IG9uY2U6IHRydWUsIHNpZ25hbDogdGhpcy5fc2lnbmFsIH1cbiAgICApO1xuICAgIGxhc3RBY3RpdmVFbGVtZW50LmZvY3VzKCk7XG4gIH1cblxuICAjYWRkS2V5Ym9hcmRNYW5hZ2VyKCkge1xuICAgIGlmICh0aGlzLiNrZXlib2FyZE1hbmFnZXJBQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNrZXlib2FyZE1hbmFnZXJBQyA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCBzaWduYWwgPSB0aGlzLmNvbWJpbmVkU2lnbmFsKHRoaXMuI2tleWJvYXJkTWFuYWdlckFDKTtcblxuICAgIC8vIFRoZSBrZXlib2FyZCBldmVudHMgYXJlIGNhdWdodCBhdCB0aGUgY29udGFpbmVyIGxldmVsIGluIG9yZGVyIHRvIGJlIGFibGVcbiAgICAvLyB0byBleGVjdXRlIHNvbWUgY2FsbGJhY2tzIGV2ZW4gaWYgdGhlIGN1cnJlbnQgcGFnZSBkb2Vzbid0IGhhdmUgZm9jdXMuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMua2V5ZG93bi5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMua2V5dXAuYmluZCh0aGlzKSwgeyBzaWduYWwgfSk7XG4gIH1cblxuICAjcmVtb3ZlS2V5Ym9hcmRNYW5hZ2VyKCkge1xuICAgIHRoaXMuI2tleWJvYXJkTWFuYWdlckFDPy5hYm9ydCgpO1xuICAgIHRoaXMuI2tleWJvYXJkTWFuYWdlckFDID0gbnVsbDtcbiAgfVxuXG4gICNhZGRDb3B5UGFzdGVMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMuI2NvcHlQYXN0ZUFDKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI2NvcHlQYXN0ZUFDID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHNpZ25hbCA9IHRoaXMuY29tYmluZWRTaWduYWwodGhpcy4jY29weVBhc3RlQUMpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvcHlcIiwgdGhpcy5jb3B5LmJpbmQodGhpcyksIHsgc2lnbmFsIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjdXRcIiwgdGhpcy5jdXQuYmluZCh0aGlzKSwgeyBzaWduYWwgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBhc3RlXCIsIHRoaXMucGFzdGUuYmluZCh0aGlzKSwgeyBzaWduYWwgfSk7XG4gIH1cblxuICAjcmVtb3ZlQ29weVBhc3RlTGlzdGVuZXJzKCkge1xuICAgIHRoaXMuI2NvcHlQYXN0ZUFDPy5hYm9ydCgpO1xuICAgIHRoaXMuI2NvcHlQYXN0ZUFDID0gbnVsbDtcbiAgfVxuXG4gICNhZGREcmFnQW5kRHJvcExpc3RlbmVycygpIHtcbiAgICBjb25zdCBzaWduYWwgPSB0aGlzLl9zaWduYWw7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIHRoaXMuZHJhZ092ZXIuYmluZCh0aGlzKSwgeyBzaWduYWwgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgdGhpcy5kcm9wLmJpbmQodGhpcyksIHsgc2lnbmFsIH0pO1xuICB9XG5cbiAgYWRkRWRpdExpc3RlbmVycygpIHtcbiAgICB0aGlzLiNhZGRLZXlib2FyZE1hbmFnZXIoKTtcbiAgICB0aGlzLiNhZGRDb3B5UGFzdGVMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlbW92ZUVkaXRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jcmVtb3ZlS2V5Ym9hcmRNYW5hZ2VyKCk7XG4gICAgdGhpcy4jcmVtb3ZlQ29weVBhc3RlTGlzdGVuZXJzKCk7XG4gIH1cblxuICBkcmFnT3ZlcihldmVudCkge1xuICAgIGZvciAoY29uc3QgeyB0eXBlIH0gb2YgZXZlbnQuZGF0YVRyYW5zZmVyLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGVkaXRvclR5cGUgb2YgdGhpcy4jZWRpdG9yVHlwZXMpIHtcbiAgICAgICAgaWYgKGVkaXRvclR5cGUuaXNIYW5kbGluZ01pbWVGb3JQYXN0aW5nKHR5cGUpKSB7XG4gICAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcImNvcHlcIjtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcm9wIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge0RyYWdFdmVudH0gZXZlbnRcbiAgICovXG4gIGRyb3AoZXZlbnQpIHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZXZlbnQuZGF0YVRyYW5zZmVyLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGVkaXRvclR5cGUgb2YgdGhpcy4jZWRpdG9yVHlwZXMpIHtcbiAgICAgICAgaWYgKGVkaXRvclR5cGUuaXNIYW5kbGluZ01pbWVGb3JQYXN0aW5nKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgICBlZGl0b3JUeXBlLnBhc3RlKGl0ZW0sIHRoaXMuY3VycmVudExheWVyKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb3B5IGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge0NsaXBib2FyZEV2ZW50fSBldmVudFxuICAgKi9cbiAgY29weShldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBBbiBlZGl0b3IgaXMgYmVpbmcgZWRpdGVkIHNvIGp1c3QgY29tbWl0IGl0LlxuICAgIHRoaXMuI2FjdGl2ZUVkaXRvcj8uY29tbWl0T3JSZW1vdmUoKTtcblxuICAgIGlmICghdGhpcy5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlZGl0b3JzID0gW107XG4gICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzKSB7XG4gICAgICBjb25zdCBzZXJpYWxpemVkID0gZWRpdG9yLnNlcmlhbGl6ZSgvKiBpc0ZvckNvcHlpbmcgPSAqLyB0cnVlKTtcbiAgICAgIGlmIChzZXJpYWxpemVkKSB7XG4gICAgICAgIGVkaXRvcnMucHVzaChzZXJpYWxpemVkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVkaXRvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZlbnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKFwiYXBwbGljYXRpb24vcGRmanNcIiwgSlNPTi5zdHJpbmdpZnkoZWRpdG9ycykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEN1dCBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtDbGlwYm9hcmRFdmVudH0gZXZlbnRcbiAgICovXG4gIGN1dChldmVudCkge1xuICAgIHRoaXMuY29weShldmVudCk7XG4gICAgdGhpcy5kZWxldGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXN0ZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtDbGlwYm9hcmRFdmVudH0gZXZlbnRcbiAgICovXG4gIGFzeW5jIHBhc3RlKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB7IGNsaXBib2FyZERhdGEgfSA9IGV2ZW50O1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBjbGlwYm9hcmREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGVkaXRvclR5cGUgb2YgdGhpcy4jZWRpdG9yVHlwZXMpIHtcbiAgICAgICAgaWYgKGVkaXRvclR5cGUuaXNIYW5kbGluZ01pbWVGb3JQYXN0aW5nKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgICBlZGl0b3JUeXBlLnBhc3RlKGl0ZW0sIHRoaXMuY3VycmVudExheWVyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZGF0YSA9IGNsaXBib2FyZERhdGEuZ2V0RGF0YShcImFwcGxpY2F0aW9uL3BkZmpzXCIpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgd2FybihgcGFzdGU6IFwiJHtleC5tZXNzYWdlfVwiLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudW5zZWxlY3RBbGwoKTtcbiAgICBjb25zdCBsYXllciA9IHRoaXMuY3VycmVudExheWVyO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5ld0VkaXRvcnMgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIGRhdGEpIHtcbiAgICAgICAgY29uc3QgZGVzZXJpYWxpemVkRWRpdG9yID0gYXdhaXQgbGF5ZXIuZGVzZXJpYWxpemUoZWRpdG9yKTtcbiAgICAgICAgaWYgKCFkZXNlcmlhbGl6ZWRFZGl0b3IpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbmV3RWRpdG9ycy5wdXNoKGRlc2VyaWFsaXplZEVkaXRvcik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNtZCA9ICgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBlZGl0b3Igb2YgbmV3RWRpdG9ycykge1xuICAgICAgICAgIHRoaXMuI2FkZEVkaXRvclRvTGF5ZXIoZWRpdG9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzZWxlY3RFZGl0b3JzKG5ld0VkaXRvcnMpO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IHVuZG8gPSAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIG5ld0VkaXRvcnMpIHtcbiAgICAgICAgICBlZGl0b3IucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aGlzLmFkZENvbW1hbmRzKHsgY21kLCB1bmRvLCBtdXN0RXhlYzogdHJ1ZSB9KTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgd2FybihgcGFzdGU6IFwiJHtleC5tZXNzYWdlfVwiLmApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBLZXlkb3duIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2ZW50XG4gICAqL1xuICBrZXlkb3duKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmlzU2hpZnRLZXlEb3duICYmIGV2ZW50LmtleSA9PT0gXCJTaGlmdFwiKSB7XG4gICAgICB0aGlzLmlzU2hpZnRLZXlEb3duID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy4jbW9kZSAhPT0gQW5ub3RhdGlvbkVkaXRvclR5cGUuTk9ORSAmJlxuICAgICAgIXRoaXMuaXNFZGl0b3JIYW5kbGluZ0tleWJvYXJkXG4gICAgKSB7XG4gICAgICBBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyLl9rZXlib2FyZE1hbmFnZXIuZXhlYyh0aGlzLCBldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEtleXVwIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2ZW50XG4gICAqL1xuICBrZXl1cChldmVudCkge1xuICAgIGlmICh0aGlzLmlzU2hpZnRLZXlEb3duICYmIGV2ZW50LmtleSA9PT0gXCJTaGlmdFwiKSB7XG4gICAgICB0aGlzLmlzU2hpZnRLZXlEb3duID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy4jaGlnaGxpZ2h0V2hlblNoaWZ0VXApIHtcbiAgICAgICAgdGhpcy4jaGlnaGxpZ2h0V2hlblNoaWZ0VXAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4jb25TZWxlY3RFbmQoXCJtYWluX3Rvb2xiYXJcIik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYW4gYWN0aW9uIGZvciBhIGdpdmVuIG5hbWUuXG4gICAqIEZvciBleGFtcGxlLCB0aGUgdXNlciBjYW4gY2xpY2sgb24gdGhlIFwiVW5kb1wiIGVudHJ5IGluIHRoZSBjb250ZXh0IG1lbnVcbiAgICogYW5kIGl0J2xsIHRyaWdnZXIgdGhlIHVuZG8gYWN0aW9uLlxuICAgKi9cbiAgb25FZGl0aW5nQWN0aW9uKHsgbmFtZSB9KSB7XG4gICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICBjYXNlIFwidW5kb1wiOlxuICAgICAgY2FzZSBcInJlZG9cIjpcbiAgICAgIGNhc2UgXCJkZWxldGVcIjpcbiAgICAgIGNhc2UgXCJzZWxlY3RBbGxcIjpcbiAgICAgICAgdGhpc1tuYW1lXSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJoaWdobGlnaHRTZWxlY3Rpb25cIjpcbiAgICAgICAgdGhpcy5oaWdobGlnaHRTZWxlY3Rpb24oXCJjb250ZXh0X21lbnVcIik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGRpZmZlcmVudCBwb3NzaWJsZSBzdGF0ZXMgb2YgdGhpcyBtYW5hZ2VyLCBlLmcuIGlzIHRoZXJlXG4gICAqIHNvbWV0aGluZyB0byB1bmRvLCByZWRvLCAuLi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRldGFpbHNcbiAgICovXG4gICNkaXNwYXRjaFVwZGF0ZVN0YXRlcyhkZXRhaWxzKSB7XG4gICAgY29uc3QgaGFzQ2hhbmdlZCA9IE9iamVjdC5lbnRyaWVzKGRldGFpbHMpLnNvbWUoXG4gICAgICAoW2tleSwgdmFsdWVdKSA9PiB0aGlzLiNwcmV2aW91c1N0YXRlc1trZXldICE9PSB2YWx1ZVxuICAgICk7XG5cbiAgICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fZXZlbnRCdXMuZGlzcGF0Y2goXCJhbm5vdGF0aW9uZWRpdG9yc3RhdGVzY2hhbmdlZFwiLCB7XG4gICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgZGV0YWlsczogT2JqZWN0LmFzc2lnbih0aGlzLiNwcmV2aW91c1N0YXRlcywgZGV0YWlscyksXG4gICAgICB9KTtcbiAgICAgIC8vIFdlIGNvdWxkIGxpc3RlbiBvbiBvdXIgb3duIGV2ZW50IGJ1dCBpdCBzb3VuZHMgbGlrZSBhIGJpdCB3ZWlyZCBhbmRcbiAgICAgIC8vIGl0J3MgYSB3YXkgdG8gc2ltcGxlciB0byBoYW5kbGUgdGhhdCBzdHVmZiBoZXJlIGluc3RlYWQgb2YgaGF2aW5nIHRvXG4gICAgICAvLyBhZGQgc29tZXRoaW5nIGluIGV2ZXJ5IHBsYWNlIHdoZXJlIGFuIGVkaXRvciBjYW4gYmUgdW5zZWxlY3RlZC5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy4jbW9kZSA9PT0gQW5ub3RhdGlvbkVkaXRvclR5cGUuSElHSExJR0hUICYmXG4gICAgICAgIGRldGFpbHMuaGFzU2VsZWN0ZWRFZGl0b3IgPT09IGZhbHNlXG4gICAgICApIHtcbiAgICAgICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVVSShbXG4gICAgICAgICAgW0Fubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkhJR0hMSUdIVF9GUkVFLCB0cnVlXSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgI2Rpc3BhdGNoVXBkYXRlVUkoZGV0YWlscykge1xuICAgIHRoaXMuX2V2ZW50QnVzLmRpc3BhdGNoKFwiYW5ub3RhdGlvbmVkaXRvcnBhcmFtc2NoYW5nZWRcIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgZGV0YWlscyxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGVkaXRpbmcgc3RhdGUuXG4gICAqIEl0IGNhbiBiZSB1c2VmdWwgdG8gdGVtcG9yYXJpbHkgZGlzYWJsZSBpdCB3aGVuIHRoZSB1c2VyIGlzIGVkaXRpbmcgYVxuICAgKiBGcmVlVGV4dCBhbm5vdGF0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzRWRpdGluZ1xuICAgKi9cbiAgc2V0RWRpdGluZ1N0YXRlKGlzRWRpdGluZykge1xuICAgIGlmIChpc0VkaXRpbmcpIHtcbiAgICAgIHRoaXMuI2FkZEZvY3VzTWFuYWdlcigpO1xuICAgICAgdGhpcy4jYWRkQ29weVBhc3RlTGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLiNkaXNwYXRjaFVwZGF0ZVN0YXRlcyh7XG4gICAgICAgIGlzRWRpdGluZzogdGhpcy4jbW9kZSAhPT0gQW5ub3RhdGlvbkVkaXRvclR5cGUuTk9ORSxcbiAgICAgICAgaXNFbXB0eTogdGhpcy4jaXNFbXB0eSgpLFxuICAgICAgICBoYXNTb21ldGhpbmdUb1VuZG86IHRoaXMuI2NvbW1hbmRNYW5hZ2VyLmhhc1NvbWV0aGluZ1RvVW5kbygpLFxuICAgICAgICBoYXNTb21ldGhpbmdUb1JlZG86IHRoaXMuI2NvbW1hbmRNYW5hZ2VyLmhhc1NvbWV0aGluZ1RvUmVkbygpLFxuICAgICAgICBoYXNTZWxlY3RlZEVkaXRvcjogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jcmVtb3ZlRm9jdXNNYW5hZ2VyKCk7XG4gICAgICB0aGlzLiNyZW1vdmVDb3B5UGFzdGVMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMuI2Rpc3BhdGNoVXBkYXRlU3RhdGVzKHtcbiAgICAgICAgaXNFZGl0aW5nOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kaXNhYmxlVXNlclNlbGVjdChmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJFZGl0b3JUeXBlcyh0eXBlcykge1xuICAgIGlmICh0aGlzLiNlZGl0b3JUeXBlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNlZGl0b3JUeXBlcyA9IHR5cGVzO1xuICAgIGZvciAoY29uc3QgZWRpdG9yVHlwZSBvZiB0aGlzLiNlZGl0b3JUeXBlcykge1xuICAgICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVVSShlZGl0b3JUeXBlLmRlZmF1bHRQcm9wZXJ0aWVzVG9VcGRhdGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gaWQuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jaWRNYW5hZ2VyLmlkO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRMYXllcigpIHtcbiAgICByZXR1cm4gdGhpcy4jYWxsTGF5ZXJzLmdldCh0aGlzLiNjdXJyZW50UGFnZUluZGV4KTtcbiAgfVxuXG4gIGdldExheWVyKHBhZ2VJbmRleCkge1xuICAgIHJldHVybiB0aGlzLiNhbGxMYXllcnMuZ2V0KHBhZ2VJbmRleCk7XG4gIH1cblxuICBnZXQgY3VycmVudFBhZ2VJbmRleCgpIHtcbiAgICByZXR1cm4gdGhpcy4jY3VycmVudFBhZ2VJbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBuZXcgbGF5ZXIgZm9yIGEgcGFnZSB3aGljaCB3aWxsIGNvbnRhaW5zIHRoZSBlZGl0b3JzLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3JMYXllcn0gbGF5ZXJcbiAgICovXG4gIGFkZExheWVyKGxheWVyKSB7XG4gICAgdGhpcy4jYWxsTGF5ZXJzLnNldChsYXllci5wYWdlSW5kZXgsIGxheWVyKTtcbiAgICBpZiAodGhpcy4jaXNFbmFibGVkKSB7XG4gICAgICBsYXllci5lbmFibGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGF5ZXIuZGlzYWJsZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBsYXllci5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yTGF5ZXJ9IGxheWVyXG4gICAqL1xuICByZW1vdmVMYXllcihsYXllcikge1xuICAgIHRoaXMuI2FsbExheWVycy5kZWxldGUobGF5ZXIucGFnZUluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2UgdGhlIGVkaXRvciBtb2RlIChOb25lLCBGcmVlVGV4dCwgSW5rLCAuLi4pXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IGVkaXRJZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0Zyb21LZXlib2FyZF0gLSB0cnVlIGlmIHRoZSBtb2RlIGNoYW5nZSBpcyBkdWUgdG8gYVxuICAgKiAgIGtleWJvYXJkIGFjdGlvbi5cbiAgICovXG4gIGFzeW5jIHVwZGF0ZU1vZGUobW9kZSwgZWRpdElkID0gbnVsbCwgaXNGcm9tS2V5Ym9hcmQgPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLiNtb2RlID09PSBtb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI3VwZGF0ZU1vZGVDYXBhYmlsaXR5KSB7XG4gICAgICBhd2FpdCB0aGlzLiN1cGRhdGVNb2RlQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgICAgaWYgKCF0aGlzLiN1cGRhdGVNb2RlQ2FwYWJpbGl0eSkge1xuICAgICAgICAvLyBUaGlzIHVpIG1hbmFnZXIgaGFzIGJlZW4gZGVzdHJveWVkLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jdXBkYXRlTW9kZUNhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcblxuICAgIHRoaXMuI21vZGUgPSBtb2RlO1xuICAgIGlmIChtb2RlID09PSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5OT05FKSB7XG4gICAgICB0aGlzLnNldEVkaXRpbmdTdGF0ZShmYWxzZSk7XG4gICAgICB0aGlzLiNkaXNhYmxlQWxsKCk7XG5cbiAgICAgIHRoaXMuX2VkaXRvclVuZG9CYXI/LmhpZGUoKTtcblxuICAgICAgdGhpcy4jdXBkYXRlTW9kZUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAobW9kZSA9PT0gQW5ub3RhdGlvbkVkaXRvclR5cGUuU0lHTkFUVVJFKSB7XG4gICAgICBhd2FpdCB0aGlzLiNzaWduYXR1cmVNYW5hZ2VyPy5sb2FkU2lnbmF0dXJlcygpO1xuICAgIH1cbiAgICB0aGlzLnNldEVkaXRpbmdTdGF0ZSh0cnVlKTtcbiAgICBhd2FpdCB0aGlzLiNlbmFibGVBbGwoKTtcbiAgICB0aGlzLnVuc2VsZWN0QWxsKCk7XG4gICAgZm9yIChjb25zdCBsYXllciBvZiB0aGlzLiNhbGxMYXllcnMudmFsdWVzKCkpIHtcbiAgICAgIGxheWVyLnVwZGF0ZU1vZGUobW9kZSk7XG4gICAgfVxuICAgIGlmICghZWRpdElkKSB7XG4gICAgICBpZiAoaXNGcm9tS2V5Ym9hcmQpIHtcbiAgICAgICAgdGhpcy5hZGROZXdFZGl0b3JGcm9tS2V5Ym9hcmQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4jdXBkYXRlTW9kZUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIHRoaXMuI2FsbEVkaXRvcnMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZCA9PT0gZWRpdElkKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQoZWRpdG9yKTtcbiAgICAgICAgZWRpdG9yLmVudGVySW5FZGl0TW9kZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWRpdG9yLnVuc2VsZWN0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jdXBkYXRlTW9kZUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgYWRkTmV3RWRpdG9yRnJvbUtleWJvYXJkKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRMYXllci5jYW5DcmVhdGVOZXdFbXB0eUVkaXRvcigpKSB7XG4gICAgICB0aGlzLmN1cnJlbnRMYXllci5hZGROZXdFZGl0b3IoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB0b29sYmFyIGlmIGl0J3MgcmVxdWlyZWQgdG8gcmVmbGVjdCB0aGUgdG9vbCBjdXJyZW50bHkgdXNlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1vZGVcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIHVwZGF0ZVRvb2xiYXIobW9kZSkge1xuICAgIGlmIChtb2RlID09PSB0aGlzLiNtb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50QnVzLmRpc3BhdGNoKFwic3dpdGNoYW5ub3RhdGlvbmVkaXRvcm1vZGVcIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgbW9kZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSBwYXJhbWV0ZXIgaW4gdGhlIGN1cnJlbnQgZWRpdG9yIG9yIGdsb2JhbGx5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gdHlwZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqL1xuICB1cGRhdGVQYXJhbXModHlwZSwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuI2VkaXRvclR5cGVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkNSRUFURTpcbiAgICAgICAgdGhpcy5jdXJyZW50TGF5ZXIuYWRkTmV3RWRpdG9yKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY2FzZSBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5ISUdITElHSFRfREVGQVVMVF9DT0xPUjpcbiAgICAgICAgdGhpcy4jbWFpbkhpZ2hsaWdodENvbG9yUGlja2VyPy51cGRhdGVDb2xvcih2YWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5ISUdITElHSFRfU0hPV19BTEw6XG4gICAgICAgIHRoaXMuX2V2ZW50QnVzLmRpc3BhdGNoKFwicmVwb3J0dGVsZW1ldHJ5XCIsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgdHlwZTogXCJlZGl0aW5nXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaGlnaGxpZ2h0XCIsXG4gICAgICAgICAgICAgIGFjdGlvbjogXCJ0b2dnbGVfdmlzaWJpbGl0eVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgKHRoaXMuI3Nob3dBbGxTdGF0ZXMgfHw9IG5ldyBNYXAoKSkuc2V0KHR5cGUsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5zaG93QWxsRWRpdG9ycyhcImhpZ2hsaWdodFwiLCB2YWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIHRoaXMuI3NlbGVjdGVkRWRpdG9ycykge1xuICAgICAgZWRpdG9yLnVwZGF0ZVBhcmFtcyh0eXBlLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlZGl0b3JUeXBlIG9mIHRoaXMuI2VkaXRvclR5cGVzKSB7XG4gICAgICBlZGl0b3JUeXBlLnVwZGF0ZURlZmF1bHRQYXJhbXModHlwZSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHNob3dBbGxFZGl0b3JzKHR5cGUsIHZpc2libGUsIHVwZGF0ZUJ1dHRvbiA9IGZhbHNlKSB7XG4gICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jYWxsRWRpdG9ycy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVkaXRvci5lZGl0b3JUeXBlID09PSB0eXBlKSB7XG4gICAgICAgIGVkaXRvci5zaG93KHZpc2libGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzdGF0ZSA9XG4gICAgICB0aGlzLiNzaG93QWxsU3RhdGVzPy5nZXQoQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSElHSExJR0hUX1NIT1dfQUxMKSA/P1xuICAgICAgdHJ1ZTtcbiAgICBpZiAoc3RhdGUgIT09IHZpc2libGUpIHtcbiAgICAgIHRoaXMuI2Rpc3BhdGNoVXBkYXRlVUkoW1xuICAgICAgICBbQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSElHSExJR0hUX1NIT1dfQUxMLCB2aXNpYmxlXSxcbiAgICAgIF0pO1xuICAgIH1cbiAgfVxuXG4gIGVuYWJsZVdhaXRpbmcobXVzdFdhaXQgPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLiNpc1dhaXRpbmcgPT09IG11c3RXYWl0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI2lzV2FpdGluZyA9IG11c3RXYWl0O1xuICAgIGZvciAoY29uc3QgbGF5ZXIgb2YgdGhpcy4jYWxsTGF5ZXJzLnZhbHVlcygpKSB7XG4gICAgICBpZiAobXVzdFdhaXQpIHtcbiAgICAgICAgbGF5ZXIuZGlzYWJsZUNsaWNrKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYXllci5lbmFibGVDbGljaygpO1xuICAgICAgfVxuICAgICAgbGF5ZXIuZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJ3YWl0aW5nXCIsIG11c3RXYWl0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIGFsbCB0aGUgbGF5ZXJzLlxuICAgKi9cbiAgYXN5bmMgI2VuYWJsZUFsbCgpIHtcbiAgICBpZiAoIXRoaXMuI2lzRW5hYmxlZCkge1xuICAgICAgdGhpcy4jaXNFbmFibGVkID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICBmb3IgKGNvbnN0IGxheWVyIG9mIHRoaXMuI2FsbExheWVycy52YWx1ZXMoKSkge1xuICAgICAgICBwcm9taXNlcy5wdXNoKGxheWVyLmVuYWJsZSgpKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIHRoaXMuI2FsbEVkaXRvcnMudmFsdWVzKCkpIHtcbiAgICAgICAgZWRpdG9yLmVuYWJsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlIGFsbCB0aGUgbGF5ZXJzLlxuICAgKi9cbiAgI2Rpc2FibGVBbGwoKSB7XG4gICAgdGhpcy51bnNlbGVjdEFsbCgpO1xuICAgIGlmICh0aGlzLiNpc0VuYWJsZWQpIHtcbiAgICAgIHRoaXMuI2lzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgZm9yIChjb25zdCBsYXllciBvZiB0aGlzLiNhbGxMYXllcnMudmFsdWVzKCkpIHtcbiAgICAgICAgbGF5ZXIuZGlzYWJsZSgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jYWxsRWRpdG9ycy52YWx1ZXMoKSkge1xuICAgICAgICBlZGl0b3IuZGlzYWJsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHRoZSBlZGl0b3JzIGJlbG9uZ2luZyB0byBhIGdpdmVuIHBhZ2UuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlSW5kZXhcbiAgICogQHJldHVybnMge0FycmF5PEFubm90YXRpb25FZGl0b3I+fVxuICAgKi9cbiAgZ2V0RWRpdG9ycyhwYWdlSW5kZXgpIHtcbiAgICBjb25zdCBlZGl0b3JzID0gW107XG4gICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jYWxsRWRpdG9ycy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVkaXRvci5wYWdlSW5kZXggPT09IHBhZ2VJbmRleCkge1xuICAgICAgICBlZGl0b3JzLnB1c2goZWRpdG9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVkaXRvcnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIGVkaXRvciB3aXRoIHRoZSBnaXZlbiBpZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqIEByZXR1cm5zIHtBbm5vdGF0aW9uRWRpdG9yfVxuICAgKi9cbiAgZ2V0RWRpdG9yKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuI2FsbEVkaXRvcnMuZ2V0KGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBuZXcgZWRpdG9yLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgYWRkRWRpdG9yKGVkaXRvcikge1xuICAgIHRoaXMuI2FsbEVkaXRvcnMuc2V0KGVkaXRvci5pZCwgZWRpdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZWRpdG9yLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgcmVtb3ZlRWRpdG9yKGVkaXRvcikge1xuICAgIGlmIChlZGl0b3IuZGl2LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICBpZiAodGhpcy4jZm9jdXNNYWluQ29udGFpbmVyVGltZW91dElkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLiNmb2N1c01haW5Db250YWluZXJUaW1lb3V0SWQpO1xuICAgICAgfVxuICAgICAgdGhpcy4jZm9jdXNNYWluQ29udGFpbmVyVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIC8vIFdoZW4gdGhlIGRpdiBpcyByZW1vdmVkIGZyb20gRE9NIHRoZSBmb2N1cyBjYW4gbW92ZSBvbiB0aGVcbiAgICAgICAgLy8gZG9jdW1lbnQuYm9keSwgc28gd2UgbmVlZCB0byBtb3ZlIGl0IGJhY2sgdG8gdGhlIG1haW4gY29udGFpbmVyLlxuICAgICAgICB0aGlzLmZvY3VzTWFpbkNvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLiNmb2N1c01haW5Db250YWluZXJUaW1lb3V0SWQgPSBudWxsO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICAgIHRoaXMuI2FsbEVkaXRvcnMuZGVsZXRlKGVkaXRvci5pZCk7XG4gICAgaWYgKGVkaXRvci5hbm5vdGF0aW9uRWxlbWVudElkKSB7XG4gICAgICB0aGlzLiNtaXNzaW5nQ2FudmFzZXM/LmRlbGV0ZShlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZCk7XG4gICAgfVxuICAgIHRoaXMudW5zZWxlY3QoZWRpdG9yKTtcbiAgICBpZiAoXG4gICAgICAhZWRpdG9yLmFubm90YXRpb25FbGVtZW50SWQgfHxcbiAgICAgICF0aGlzLiNkZWxldGVkQW5ub3RhdGlvbnNFbGVtZW50SWRzLmhhcyhlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZClcbiAgICApIHtcbiAgICAgIHRoaXMuI2Fubm90YXRpb25TdG9yYWdlPy5yZW1vdmUoZWRpdG9yLmlkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGFubm90YXRpb24gZWxlbWVudCB3aXRoIHRoZSBnaXZlbiBpZCBoYXMgYmVlbiBkZWxldGVkLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgYWRkRGVsZXRlZEFubm90YXRpb25FbGVtZW50KGVkaXRvcikge1xuICAgIHRoaXMuI2RlbGV0ZWRBbm5vdGF0aW9uc0VsZW1lbnRJZHMuYWRkKGVkaXRvci5hbm5vdGF0aW9uRWxlbWVudElkKTtcbiAgICB0aGlzLmFkZENoYW5nZWRFeGlzdGluZ0Fubm90YXRpb24oZWRpdG9yKTtcbiAgICBlZGl0b3IuZGVsZXRlZCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGFubm90YXRpb24gZWxlbWVudCB3aXRoIHRoZSBnaXZlbiBpZCBoYXMgYmVlbiBkZWxldGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYW5ub3RhdGlvbkVsZW1lbnRJZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRGVsZXRlZEFubm90YXRpb25FbGVtZW50KGFubm90YXRpb25FbGVtZW50SWQpIHtcbiAgICByZXR1cm4gdGhpcy4jZGVsZXRlZEFubm90YXRpb25zRWxlbWVudElkcy5oYXMoYW5ub3RhdGlvbkVsZW1lbnRJZCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGFubm90YXRpb24gZWxlbWVudCB3aXRoIHRoZSBnaXZlbiBpZCBoYXZlIGJlZW4gcmVzdG9yZWQuXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkVkaXRvcn0gZWRpdG9yXG4gICAqL1xuICByZW1vdmVEZWxldGVkQW5ub3RhdGlvbkVsZW1lbnQoZWRpdG9yKSB7XG4gICAgdGhpcy4jZGVsZXRlZEFubm90YXRpb25zRWxlbWVudElkcy5kZWxldGUoZWRpdG9yLmFubm90YXRpb25FbGVtZW50SWQpO1xuICAgIHRoaXMucmVtb3ZlQ2hhbmdlZEV4aXN0aW5nQW5ub3RhdGlvbihlZGl0b3IpO1xuICAgIGVkaXRvci5kZWxldGVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIGVkaXRvciB0byB0aGUgbGF5ZXIgaXQgYmVsb25ncyB0byBvciBhZGQgaXQgdG8gdGhlIGdsb2JhbCBtYXAuXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkVkaXRvcn0gZWRpdG9yXG4gICAqL1xuICAjYWRkRWRpdG9yVG9MYXllcihlZGl0b3IpIHtcbiAgICBjb25zdCBsYXllciA9IHRoaXMuI2FsbExheWVycy5nZXQoZWRpdG9yLnBhZ2VJbmRleCk7XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICBsYXllci5hZGRPclJlYnVpbGQoZWRpdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZGRFZGl0b3IoZWRpdG9yKTtcbiAgICAgIHRoaXMuYWRkVG9Bbm5vdGF0aW9uU3RvcmFnZShlZGl0b3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGdpdmVuIGVkaXRvciBhcyB0aGUgYWN0aXZlIG9uZS5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIHNldEFjdGl2ZUVkaXRvcihlZGl0b3IpIHtcbiAgICBpZiAodGhpcy4jYWN0aXZlRWRpdG9yID09PSBlZGl0b3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLiNhY3RpdmVFZGl0b3IgPSBlZGl0b3I7XG4gICAgaWYgKGVkaXRvcikge1xuICAgICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVVSShlZGl0b3IucHJvcGVydGllc1RvVXBkYXRlKTtcbiAgICB9XG4gIH1cblxuICBnZXQgI2xhc3RTZWxlY3RlZEVkaXRvcigpIHtcbiAgICBsZXQgZWQgPSBudWxsO1xuICAgIGZvciAoZWQgb2YgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzKSB7XG4gICAgICAvLyBJdGVyYXRlIHRvIGdldCB0aGUgbGFzdCBlbGVtZW50LlxuICAgIH1cbiAgICByZXR1cm4gZWQ7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBVSSBvZiB0aGUgYWN0aXZlIGVkaXRvci5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIHVwZGF0ZVVJKGVkaXRvcikge1xuICAgIGlmICh0aGlzLiNsYXN0U2VsZWN0ZWRFZGl0b3IgPT09IGVkaXRvcikge1xuICAgICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVVSShlZGl0b3IucHJvcGVydGllc1RvVXBkYXRlKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVVSUZvckRlZmF1bHRQcm9wZXJ0aWVzKGVkaXRvclR5cGUpIHtcbiAgICB0aGlzLiNkaXNwYXRjaFVwZGF0ZVVJKGVkaXRvclR5cGUuZGVmYXVsdFByb3BlcnRpZXNUb1VwZGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG9yIHJlbW92ZSBhbiBlZGl0b3IgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgdG9nZ2xlU2VsZWN0ZWQoZWRpdG9yKSB7XG4gICAgaWYgKHRoaXMuI3NlbGVjdGVkRWRpdG9ycy5oYXMoZWRpdG9yKSkge1xuICAgICAgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzLmRlbGV0ZShlZGl0b3IpO1xuICAgICAgZWRpdG9yLnVuc2VsZWN0KCk7XG4gICAgICB0aGlzLiNkaXNwYXRjaFVwZGF0ZVN0YXRlcyh7XG4gICAgICAgIGhhc1NlbGVjdGVkRWRpdG9yOiB0aGlzLmhhc1NlbGVjdGlvbixcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNzZWxlY3RlZEVkaXRvcnMuYWRkKGVkaXRvcik7XG4gICAgZWRpdG9yLnNlbGVjdCgpO1xuICAgIHRoaXMuI2Rpc3BhdGNoVXBkYXRlVUkoZWRpdG9yLnByb3BlcnRpZXNUb1VwZGF0ZSk7XG4gICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVTdGF0ZXMoe1xuICAgICAgaGFzU2VsZWN0ZWRFZGl0b3I6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBsYXN0IHNlbGVjdGVkIGVkaXRvci5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIHNldFNlbGVjdGVkKGVkaXRvcikge1xuICAgIHRoaXMuI2N1cnJlbnREcmF3aW5nU2Vzc2lvbj8uY29tbWl0T3JSZW1vdmUoKTtcbiAgICBmb3IgKGNvbnN0IGVkIG9mIHRoaXMuI3NlbGVjdGVkRWRpdG9ycykge1xuICAgICAgaWYgKGVkICE9PSBlZGl0b3IpIHtcbiAgICAgICAgZWQudW5zZWxlY3QoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzLmNsZWFyKCk7XG5cbiAgICB0aGlzLiNzZWxlY3RlZEVkaXRvcnMuYWRkKGVkaXRvcik7XG4gICAgZWRpdG9yLnNlbGVjdCgpO1xuICAgIHRoaXMuI2Rpc3BhdGNoVXBkYXRlVUkoZWRpdG9yLnByb3BlcnRpZXNUb1VwZGF0ZSk7XG4gICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVTdGF0ZXMoe1xuICAgICAgaGFzU2VsZWN0ZWRFZGl0b3I6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGVkaXRvciBpcyBzZWxlY3RlZC5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIGlzU2VsZWN0ZWQoZWRpdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMuI3NlbGVjdGVkRWRpdG9ycy5oYXMoZWRpdG9yKTtcbiAgfVxuXG4gIGdldCBmaXJzdFNlbGVjdGVkRWRpdG9yKCkge1xuICAgIHJldHVybiB0aGlzLiNzZWxlY3RlZEVkaXRvcnMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuc2VsZWN0IGFuIGVkaXRvci5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIHVuc2VsZWN0KGVkaXRvcikge1xuICAgIGVkaXRvci51bnNlbGVjdCgpO1xuICAgIHRoaXMuI3NlbGVjdGVkRWRpdG9ycy5kZWxldGUoZWRpdG9yKTtcbiAgICB0aGlzLiNkaXNwYXRjaFVwZGF0ZVN0YXRlcyh7XG4gICAgICBoYXNTZWxlY3RlZEVkaXRvcjogdGhpcy5oYXNTZWxlY3Rpb24sXG4gICAgfSk7XG4gIH1cblxuICBnZXQgaGFzU2VsZWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiNzZWxlY3RlZEVkaXRvcnMuc2l6ZSAhPT0gMDtcbiAgfVxuXG4gIGdldCBpc0VudGVySGFuZGxlZCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzLnNpemUgPT09IDEgJiZcbiAgICAgIHRoaXMuZmlyc3RTZWxlY3RlZEVkaXRvci5pc0VudGVySGFuZGxlZFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVW5kbyB0aGUgbGFzdCBjb21tYW5kLlxuICAgKi9cbiAgdW5kbygpIHtcbiAgICB0aGlzLiNjb21tYW5kTWFuYWdlci51bmRvKCk7XG4gICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVTdGF0ZXMoe1xuICAgICAgaGFzU29tZXRoaW5nVG9VbmRvOiB0aGlzLiNjb21tYW5kTWFuYWdlci5oYXNTb21ldGhpbmdUb1VuZG8oKSxcbiAgICAgIGhhc1NvbWV0aGluZ1RvUmVkbzogdHJ1ZSxcbiAgICAgIGlzRW1wdHk6IHRoaXMuI2lzRW1wdHkoKSxcbiAgICB9KTtcbiAgICB0aGlzLl9lZGl0b3JVbmRvQmFyPy5oaWRlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVkbyB0aGUgbGFzdCB1bmRvZWQgY29tbWFuZC5cbiAgICovXG4gIHJlZG8oKSB7XG4gICAgdGhpcy4jY29tbWFuZE1hbmFnZXIucmVkbygpO1xuICAgIHRoaXMuI2Rpc3BhdGNoVXBkYXRlU3RhdGVzKHtcbiAgICAgIGhhc1NvbWV0aGluZ1RvVW5kbzogdHJ1ZSxcbiAgICAgIGhhc1NvbWV0aGluZ1RvUmVkbzogdGhpcy4jY29tbWFuZE1hbmFnZXIuaGFzU29tZXRoaW5nVG9SZWRvKCksXG4gICAgICBpc0VtcHR5OiB0aGlzLiNpc0VtcHR5KCksXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgY29tbWFuZCB0byBleGVjdXRlIChjbWQpIGFuZCBhbm90aGVyIG9uZSB0byB1bmRvIGl0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAqL1xuICBhZGRDb21tYW5kcyhwYXJhbXMpIHtcbiAgICB0aGlzLiNjb21tYW5kTWFuYWdlci5hZGQocGFyYW1zKTtcbiAgICB0aGlzLiNkaXNwYXRjaFVwZGF0ZVN0YXRlcyh7XG4gICAgICBoYXNTb21ldGhpbmdUb1VuZG86IHRydWUsXG4gICAgICBoYXNTb21ldGhpbmdUb1JlZG86IGZhbHNlLFxuICAgICAgaXNFbXB0eTogdGhpcy4jaXNFbXB0eSgpLFxuICAgIH0pO1xuICB9XG5cbiAgY2xlYW5VbmRvU3RhY2sodHlwZSkge1xuICAgIHRoaXMuI2NvbW1hbmRNYW5hZ2VyLmNsZWFuVHlwZSh0eXBlKTtcbiAgfVxuXG4gICNpc0VtcHR5KCkge1xuICAgIGlmICh0aGlzLiNhbGxFZGl0b3JzLnNpemUgPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLiNhbGxFZGl0b3JzLnNpemUgPT09IDEpIHtcbiAgICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIHRoaXMuI2FsbEVkaXRvcnMudmFsdWVzKCkpIHtcbiAgICAgICAgcmV0dXJuIGVkaXRvci5pc0VtcHR5KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSB0aGUgY3VycmVudCBlZGl0b3Igb3IgYWxsLlxuICAgKi9cbiAgZGVsZXRlKCkge1xuICAgIHRoaXMuY29tbWl0T3JSZW1vdmUoKTtcbiAgICBjb25zdCBkcmF3aW5nRWRpdG9yID0gdGhpcy5jdXJyZW50TGF5ZXI/LmVuZERyYXdpbmdTZXNzaW9uKFxuICAgICAgLyogaXNBYm9ydGVkID0gKi8gdHJ1ZVxuICAgICk7XG4gICAgaWYgKCF0aGlzLmhhc1NlbGVjdGlvbiAmJiAhZHJhd2luZ0VkaXRvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVkaXRvcnMgPSBkcmF3aW5nRWRpdG9yXG4gICAgICA/IFtkcmF3aW5nRWRpdG9yXVxuICAgICAgOiBbLi4udGhpcy4jc2VsZWN0ZWRFZGl0b3JzXTtcbiAgICBjb25zdCBjbWQgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9lZGl0b3JVbmRvQmFyPy5zaG93KFxuICAgICAgICB1bmRvLFxuICAgICAgICBlZGl0b3JzLmxlbmd0aCA9PT0gMSA/IGVkaXRvcnNbMF0uZWRpdG9yVHlwZSA6IGVkaXRvcnMubGVuZ3RoXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBlZGl0b3Igb2YgZWRpdG9ycykge1xuICAgICAgICBlZGl0b3IucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB1bmRvID0gKCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBlZGl0b3Igb2YgZWRpdG9ycykge1xuICAgICAgICB0aGlzLiNhZGRFZGl0b3JUb0xheWVyKGVkaXRvcik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZHMoeyBjbWQsIHVuZG8sIG11c3RFeGVjOiB0cnVlIH0pO1xuICB9XG5cbiAgY29tbWl0T3JSZW1vdmUoKSB7XG4gICAgLy8gQW4gZWRpdG9yIGlzIGJlaW5nIGVkaXRlZCBzbyBqdXN0IGNvbW1pdCBpdC5cbiAgICB0aGlzLiNhY3RpdmVFZGl0b3I/LmNvbW1pdE9yUmVtb3ZlKCk7XG4gIH1cblxuICBoYXNTb21ldGhpbmdUb0NvbnRyb2woKSB7XG4gICAgcmV0dXJuIHRoaXMuI2FjdGl2ZUVkaXRvciB8fCB0aGlzLmhhc1NlbGVjdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgdGhlIGVkaXRvcnMuXG4gICAqIEBwYXJhbSB7QXJyYXk8QW5ub3RhdGlvbkVkaXRvcj59IGVkaXRvcnNcbiAgICovXG4gICNzZWxlY3RFZGl0b3JzKGVkaXRvcnMpIHtcbiAgICBmb3IgKGNvbnN0IGVkaXRvciBvZiB0aGlzLiNzZWxlY3RlZEVkaXRvcnMpIHtcbiAgICAgIGVkaXRvci51bnNlbGVjdCgpO1xuICAgIH1cbiAgICB0aGlzLiNzZWxlY3RlZEVkaXRvcnMuY2xlYXIoKTtcbiAgICBmb3IgKGNvbnN0IGVkaXRvciBvZiBlZGl0b3JzKSB7XG4gICAgICBpZiAoZWRpdG9yLmlzRW1wdHkoKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI3NlbGVjdGVkRWRpdG9ycy5hZGQoZWRpdG9yKTtcbiAgICAgIGVkaXRvci5zZWxlY3QoKTtcbiAgICB9XG4gICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVTdGF0ZXMoeyBoYXNTZWxlY3RlZEVkaXRvcjogdGhpcy5oYXNTZWxlY3Rpb24gfSk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IGFsbCB0aGUgZWRpdG9ycy5cbiAgICovXG4gIHNlbGVjdEFsbCgpIHtcbiAgICBmb3IgKGNvbnN0IGVkaXRvciBvZiB0aGlzLiNzZWxlY3RlZEVkaXRvcnMpIHtcbiAgICAgIGVkaXRvci5jb21taXQoKTtcbiAgICB9XG4gICAgdGhpcy4jc2VsZWN0RWRpdG9ycyh0aGlzLiNhbGxFZGl0b3JzLnZhbHVlcygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnNlbGVjdCBhbGwgdGhlIHNlbGVjdGVkIGVkaXRvcnMuXG4gICAqL1xuICB1bnNlbGVjdEFsbCgpIHtcbiAgICBpZiAodGhpcy4jYWN0aXZlRWRpdG9yKSB7XG4gICAgICAvLyBBbiBlZGl0b3IgaXMgYmVpbmcgZWRpdGVkIHNvIGp1c3QgY29tbWl0IGl0LlxuICAgICAgdGhpcy4jYWN0aXZlRWRpdG9yLmNvbW1pdE9yUmVtb3ZlKCk7XG4gICAgICBpZiAodGhpcy4jbW9kZSAhPT0gQW5ub3RhdGlvbkVkaXRvclR5cGUuTk9ORSkge1xuICAgICAgICAvLyBJZiB0aGUgbW9kZSBpcyBOT05FLCB3ZSB3YW50IHRvIHJlYWxseSB1bnNlbGVjdCB0aGUgZWRpdG9yLCBoZW5jZSB3ZVxuICAgICAgICAvLyBtdXN0bid0IHJldHVybiBoZXJlLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI2N1cnJlbnREcmF3aW5nU2Vzc2lvbj8uY29tbWl0T3JSZW1vdmUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzKSB7XG4gICAgICBlZGl0b3IudW5zZWxlY3QoKTtcbiAgICB9XG4gICAgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzLmNsZWFyKCk7XG4gICAgdGhpcy4jZGlzcGF0Y2hVcGRhdGVTdGF0ZXMoe1xuICAgICAgaGFzU2VsZWN0ZWRFZGl0b3I6IGZhbHNlLFxuICAgIH0pO1xuICB9XG5cbiAgdHJhbnNsYXRlU2VsZWN0ZWRFZGl0b3JzKHgsIHksIG5vQ29tbWl0ID0gZmFsc2UpIHtcbiAgICBpZiAoIW5vQ29tbWl0KSB7XG4gICAgICB0aGlzLmNvbW1pdE9yUmVtb3ZlKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLiN0cmFuc2xhdGlvblswXSArPSB4O1xuICAgIHRoaXMuI3RyYW5zbGF0aW9uWzFdICs9IHk7XG4gICAgY29uc3QgW3RvdGFsWCwgdG90YWxZXSA9IHRoaXMuI3RyYW5zbGF0aW9uO1xuICAgIGNvbnN0IGVkaXRvcnMgPSBbLi4udGhpcy4jc2VsZWN0ZWRFZGl0b3JzXTtcblxuICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gaGF2ZSBhbiB1bmRvL3JlZG8gZm9yIGVhY2ggdHJhbnNsYXRpb24gc28gd2Ugd2FpdCBhIGJpdFxuICAgIC8vIGJlZm9yZSBhZGRpbmcgdGhlIGNvbW1hbmQgdG8gdGhlIGNvbW1hbmQgbWFuYWdlci5cbiAgICBjb25zdCBUSU1FX1RPX1dBSVQgPSAxMDAwO1xuXG4gICAgaWYgKHRoaXMuI3RyYW5zbGF0aW9uVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy4jdHJhbnNsYXRpb25UaW1lb3V0SWQpO1xuICAgIH1cblxuICAgIHRoaXMuI3RyYW5zbGF0aW9uVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLiN0cmFuc2xhdGlvblRpbWVvdXRJZCA9IG51bGw7XG4gICAgICB0aGlzLiN0cmFuc2xhdGlvblswXSA9IHRoaXMuI3RyYW5zbGF0aW9uWzFdID0gMDtcblxuICAgICAgdGhpcy5hZGRDb21tYW5kcyh7XG4gICAgICAgIGNtZDogKCkgPT4ge1xuICAgICAgICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIGVkaXRvcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhbGxFZGl0b3JzLmhhcyhlZGl0b3IuaWQpKSB7XG4gICAgICAgICAgICAgIGVkaXRvci50cmFuc2xhdGVJblBhZ2UodG90YWxYLCB0b3RhbFkpO1xuICAgICAgICAgICAgICBlZGl0b3IudHJhbnNsYXRpb25Eb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB1bmRvOiAoKSA9PiB7XG4gICAgICAgICAgZm9yIChjb25zdCBlZGl0b3Igb2YgZWRpdG9ycykge1xuICAgICAgICAgICAgaWYgKHRoaXMuI2FsbEVkaXRvcnMuaGFzKGVkaXRvci5pZCkpIHtcbiAgICAgICAgICAgICAgZWRpdG9yLnRyYW5zbGF0ZUluUGFnZSgtdG90YWxYLCAtdG90YWxZKTtcbiAgICAgICAgICAgICAgZWRpdG9yLnRyYW5zbGF0aW9uRG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbXVzdEV4ZWM6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfSwgVElNRV9UT19XQUlUKTtcblxuICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIGVkaXRvcnMpIHtcbiAgICAgIGVkaXRvci50cmFuc2xhdGVJblBhZ2UoeCwgeSk7XG4gICAgICBlZGl0b3IudHJhbnNsYXRpb25Eb25lKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB1cCB0aGUgZHJhZyBzZXNzaW9uIGZvciBtb3ZpbmcgdGhlIHNlbGVjdGVkIGVkaXRvcnMuXG4gICAqL1xuICBzZXRVcERyYWdTZXNzaW9uKCkge1xuICAgIC8vIE5vdGU6IGRvbid0IHVzZSBhbnkgcmVmZXJlbmNlcyB0byB0aGUgZWRpdG9yJ3MgcGFyZW50IHdoaWNoIGNhbiBiZSBudWxsXG4gICAgLy8gaWYgdGhlIGVkaXRvciBiZWxvbmdzIHRvIGEgZGVzdHJveWVkIHBhZ2UuXG4gICAgaWYgKCF0aGlzLmhhc1NlbGVjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBBdm9pZCB0byBoYXZlIHNwdXJpb3VzIHRleHQgc2VsZWN0aW9uIGluIHRoZSB0ZXh0IGxheWVyIHdoZW4gZHJhZ2dpbmcuXG4gICAgdGhpcy5kaXNhYmxlVXNlclNlbGVjdCh0cnVlKTtcbiAgICB0aGlzLiNkcmFnZ2luZ0VkaXRvcnMgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jc2VsZWN0ZWRFZGl0b3JzKSB7XG4gICAgICB0aGlzLiNkcmFnZ2luZ0VkaXRvcnMuc2V0KGVkaXRvciwge1xuICAgICAgICBzYXZlZFg6IGVkaXRvci54LFxuICAgICAgICBzYXZlZFk6IGVkaXRvci55LFxuICAgICAgICBzYXZlZFBhZ2VJbmRleDogZWRpdG9yLnBhZ2VJbmRleCxcbiAgICAgICAgbmV3WDogMCxcbiAgICAgICAgbmV3WTogMCxcbiAgICAgICAgbmV3UGFnZUluZGV4OiAtMSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbmRzIHRoZSBkcmFnIHNlc3Npb24uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGF0IGxlYXN0IG9uZSBlZGl0b3IgaGFzIGJlZW4gbW92ZWQuXG4gICAqL1xuICBlbmREcmFnU2Vzc2lvbigpIHtcbiAgICBpZiAoIXRoaXMuI2RyYWdnaW5nRWRpdG9ycykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmRpc2FibGVVc2VyU2VsZWN0KGZhbHNlKTtcbiAgICBjb25zdCBtYXAgPSB0aGlzLiNkcmFnZ2luZ0VkaXRvcnM7XG4gICAgdGhpcy4jZHJhZ2dpbmdFZGl0b3JzID0gbnVsbDtcbiAgICBsZXQgbXVzdEJlQWRkZWRJblVuZG9TdGFjayA9IGZhbHNlO1xuXG4gICAgZm9yIChjb25zdCBbeyB4LCB5LCBwYWdlSW5kZXggfSwgdmFsdWVdIG9mIG1hcCkge1xuICAgICAgdmFsdWUubmV3WCA9IHg7XG4gICAgICB2YWx1ZS5uZXdZID0geTtcbiAgICAgIHZhbHVlLm5ld1BhZ2VJbmRleCA9IHBhZ2VJbmRleDtcbiAgICAgIG11c3RCZUFkZGVkSW5VbmRvU3RhY2sgfHw9XG4gICAgICAgIHggIT09IHZhbHVlLnNhdmVkWCB8fFxuICAgICAgICB5ICE9PSB2YWx1ZS5zYXZlZFkgfHxcbiAgICAgICAgcGFnZUluZGV4ICE9PSB2YWx1ZS5zYXZlZFBhZ2VJbmRleDtcbiAgICB9XG5cbiAgICBpZiAoIW11c3RCZUFkZGVkSW5VbmRvU3RhY2spIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBtb3ZlID0gKGVkaXRvciwgeCwgeSwgcGFnZUluZGV4KSA9PiB7XG4gICAgICBpZiAodGhpcy4jYWxsRWRpdG9ycy5oYXMoZWRpdG9yLmlkKSkge1xuICAgICAgICAvLyBUaGUgZWRpdG9yIGNhbiBiZSB1bmRvbmUvcmVkb25lIG9uIGEgcGFnZSB3aGljaCBpcyBub3QgdmlzaWJsZSAoYW5kXG4gICAgICAgIC8vIHdoaWNoIHBvdGVudGlhbGx5IGhhcyBubyBhbm5vdGF0aW9uIGVkaXRvciBsYXllciksIGhlbmNlIHdlIG5lZWQgdG9cbiAgICAgICAgLy8gdXNlIHRoZSBwYWdlSW5kZXggaW5zdGVhZCBvZiB0aGUgcGFyZW50LlxuICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLiNhbGxMYXllcnMuZ2V0KHBhZ2VJbmRleCk7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICBlZGl0b3IuX3NldFBhcmVudEFuZFBvc2l0aW9uKHBhcmVudCwgeCwgeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWRpdG9yLnBhZ2VJbmRleCA9IHBhZ2VJbmRleDtcbiAgICAgICAgICBlZGl0b3IueCA9IHg7XG4gICAgICAgICAgZWRpdG9yLnkgPSB5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZHMoe1xuICAgICAgY21kOiAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgW2VkaXRvciwgeyBuZXdYLCBuZXdZLCBuZXdQYWdlSW5kZXggfV0gb2YgbWFwKSB7XG4gICAgICAgICAgbW92ZShlZGl0b3IsIG5ld1gsIG5ld1ksIG5ld1BhZ2VJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1bmRvOiAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgW2VkaXRvciwgeyBzYXZlZFgsIHNhdmVkWSwgc2F2ZWRQYWdlSW5kZXggfV0gb2YgbWFwKSB7XG4gICAgICAgICAgbW92ZShlZGl0b3IsIHNhdmVkWCwgc2F2ZWRZLCBzYXZlZFBhZ2VJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtdXN0RXhlYzogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYWcgdGhlIHNldCBvZiBzZWxlY3RlZCBlZGl0b3JzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHR5XG4gICAqL1xuICBkcmFnU2VsZWN0ZWRFZGl0b3JzKHR4LCB0eSkge1xuICAgIGlmICghdGhpcy4jZHJhZ2dpbmdFZGl0b3JzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIHRoaXMuI2RyYWdnaW5nRWRpdG9ycy5rZXlzKCkpIHtcbiAgICAgIGVkaXRvci5kcmFnKHR4LCB0eSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlYnVpbGQgdGhlIGVkaXRvciAodXN1YWxseSBvbiB1bmRvL3JlZG8gYWN0aW9ucykgb24gYSBwb3RlbnRpYWxseVxuICAgKiBub24tcmVuZGVyZWQgcGFnZS5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIHJlYnVpbGQoZWRpdG9yKSB7XG4gICAgaWYgKGVkaXRvci5wYXJlbnQgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0TGF5ZXIoZWRpdG9yLnBhZ2VJbmRleCk7XG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5jaGFuZ2VQYXJlbnQoZWRpdG9yKTtcbiAgICAgICAgcGFyZW50LmFkZE9yUmVidWlsZChlZGl0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGRFZGl0b3IoZWRpdG9yKTtcbiAgICAgICAgdGhpcy5hZGRUb0Fubm90YXRpb25TdG9yYWdlKGVkaXRvcik7XG4gICAgICAgIGVkaXRvci5yZWJ1aWxkKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVkaXRvci5wYXJlbnQuYWRkT3JSZWJ1aWxkKGVkaXRvcik7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzRWRpdG9ySGFuZGxpbmdLZXlib2FyZCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5nZXRBY3RpdmUoKT8uc2hvdWxkR2V0S2V5Ym9hcmRFdmVudHMoKSB8fFxuICAgICAgKHRoaXMuI3NlbGVjdGVkRWRpdG9ycy5zaXplID09PSAxICYmXG4gICAgICAgIHRoaXMuZmlyc3RTZWxlY3RlZEVkaXRvci5zaG91bGRHZXRLZXlib2FyZEV2ZW50cygpKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogSXMgdGhlIGN1cnJlbnQgZWRpdG9yIHRoZSBvbmUgcGFzc2VkIGFzIGFyZ3VtZW50P1xuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgaXNBY3RpdmUoZWRpdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMuI2FjdGl2ZUVkaXRvciA9PT0gZWRpdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBhY3RpdmUgZWRpdG9yLlxuICAgKiBAcmV0dXJucyB7QW5ub3RhdGlvbkVkaXRvcnxudWxsfVxuICAgKi9cbiAgZ2V0QWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLiNhY3RpdmVFZGl0b3I7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGVkaXRvciBtb2RlLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TW9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jbW9kZTtcbiAgfVxuXG4gIGdldCBpbWFnZU1hbmFnZXIoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyh0aGlzLCBcImltYWdlTWFuYWdlclwiLCBuZXcgSW1hZ2VNYW5hZ2VyKCkpO1xuICB9XG5cbiAgZ2V0U2VsZWN0aW9uQm94ZXModGV4dExheWVyKSB7XG4gICAgaWYgKCF0ZXh0TGF5ZXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzZWxlY3Rpb24ucmFuZ2VDb3VudDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRleHRMYXllci5jb250YWlucyhzZWxlY3Rpb24uZ2V0UmFuZ2VBdChpKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcilcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICB4OiBsYXllclgsXG4gICAgICB5OiBsYXllclksXG4gICAgICB3aWR0aDogcGFyZW50V2lkdGgsXG4gICAgICBoZWlnaHQ6IHBhcmVudEhlaWdodCxcbiAgICB9ID0gdGV4dExheWVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgLy8gV2UgbXVzdCByb3RhdGUgdGhlIGJveGVzIGJlY2F1c2Ugd2Ugd2FudCB0byBoYXZlIHRoZW0gaW4gdGhlIG5vbi1yb3RhdGVkXG4gICAgLy8gcGFnZSBjb29yZGluYXRlcy5cbiAgICBsZXQgcm90YXRvcjtcbiAgICBzd2l0Y2ggKHRleHRMYXllci5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1haW4tcm90YXRpb25cIikpIHtcbiAgICAgIGNhc2UgXCI5MFwiOlxuICAgICAgICByb3RhdG9yID0gKHgsIHksIHcsIGgpID0+ICh7XG4gICAgICAgICAgeDogKHkgLSBsYXllclkpIC8gcGFyZW50SGVpZ2h0LFxuICAgICAgICAgIHk6IDEgLSAoeCArIHcgLSBsYXllclgpIC8gcGFyZW50V2lkdGgsXG4gICAgICAgICAgd2lkdGg6IGggLyBwYXJlbnRIZWlnaHQsXG4gICAgICAgICAgaGVpZ2h0OiB3IC8gcGFyZW50V2lkdGgsXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCIxODBcIjpcbiAgICAgICAgcm90YXRvciA9ICh4LCB5LCB3LCBoKSA9PiAoe1xuICAgICAgICAgIHg6IDEgLSAoeCArIHcgLSBsYXllclgpIC8gcGFyZW50V2lkdGgsXG4gICAgICAgICAgeTogMSAtICh5ICsgaCAtIGxheWVyWSkgLyBwYXJlbnRIZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IHcgLyBwYXJlbnRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IGggLyBwYXJlbnRIZWlnaHQsXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCIyNzBcIjpcbiAgICAgICAgcm90YXRvciA9ICh4LCB5LCB3LCBoKSA9PiAoe1xuICAgICAgICAgIHg6IDEgLSAoeSArIGggLSBsYXllclkpIC8gcGFyZW50SGVpZ2h0LFxuICAgICAgICAgIHk6ICh4IC0gbGF5ZXJYKSAvIHBhcmVudFdpZHRoLFxuICAgICAgICAgIHdpZHRoOiBoIC8gcGFyZW50SGVpZ2h0LFxuICAgICAgICAgIGhlaWdodDogdyAvIHBhcmVudFdpZHRoLFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByb3RhdG9yID0gKHgsIHksIHcsIGgpID0+ICh7XG4gICAgICAgICAgeDogKHggLSBsYXllclgpIC8gcGFyZW50V2lkdGgsXG4gICAgICAgICAgeTogKHkgLSBsYXllclkpIC8gcGFyZW50SGVpZ2h0LFxuICAgICAgICAgIHdpZHRoOiB3IC8gcGFyZW50V2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBoIC8gcGFyZW50SGVpZ2h0LFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY29uc3QgYm94ZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzZWxlY3Rpb24ucmFuZ2VDb3VudDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGNvbnN0IHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoaSk7XG4gICAgICBpZiAocmFuZ2UuY29sbGFwc2VkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSBvZiByYW5nZS5nZXRDbGllbnRSZWN0cygpKSB7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gMCB8fCBoZWlnaHQgPT09IDApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBib3hlcy5wdXNoKHJvdGF0b3IoeCwgeSwgd2lkdGgsIGhlaWdodCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYm94ZXMubGVuZ3RoID09PSAwID8gbnVsbCA6IGJveGVzO1xuICB9XG5cbiAgYWRkQ2hhbmdlZEV4aXN0aW5nQW5ub3RhdGlvbih7IGFubm90YXRpb25FbGVtZW50SWQsIGlkIH0pIHtcbiAgICAodGhpcy4jY2hhbmdlZEV4aXN0aW5nQW5ub3RhdGlvbnMgfHw9IG5ldyBNYXAoKSkuc2V0KFxuICAgICAgYW5ub3RhdGlvbkVsZW1lbnRJZCxcbiAgICAgIGlkXG4gICAgKTtcbiAgfVxuXG4gIHJlbW92ZUNoYW5nZWRFeGlzdGluZ0Fubm90YXRpb24oeyBhbm5vdGF0aW9uRWxlbWVudElkIH0pIHtcbiAgICB0aGlzLiNjaGFuZ2VkRXhpc3RpbmdBbm5vdGF0aW9ucz8uZGVsZXRlKGFubm90YXRpb25FbGVtZW50SWQpO1xuICB9XG5cbiAgcmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQoYW5ub3RhdGlvbikge1xuICAgIGNvbnN0IGVkaXRvcklkID0gdGhpcy4jY2hhbmdlZEV4aXN0aW5nQW5ub3RhdGlvbnM/LmdldChhbm5vdGF0aW9uLmRhdGEuaWQpO1xuICAgIGlmICghZWRpdG9ySWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZWRpdG9yID0gdGhpcy4jYW5ub3RhdGlvblN0b3JhZ2UuZ2V0UmF3VmFsdWUoZWRpdG9ySWQpO1xuICAgIGlmICghZWRpdG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLiNtb2RlID09PSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5OT05FICYmICFlZGl0b3IuaGFzQmVlbk1vZGlmaWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkaXRvci5yZW5kZXJBbm5vdGF0aW9uRWxlbWVudChhbm5vdGF0aW9uKTtcbiAgfVxuXG4gIHNldE1pc3NpbmdDYW52YXMoYW5ub3RhdGlvbklkLCBhbm5vdGF0aW9uRWxlbWVudElkLCBjYW52YXMpIHtcbiAgICBjb25zdCBlZGl0b3IgPSB0aGlzLiNtaXNzaW5nQ2FudmFzZXM/LmdldChhbm5vdGF0aW9uSWQpO1xuICAgIGlmICghZWRpdG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkaXRvci5zZXRDYW52YXMoYW5ub3RhdGlvbkVsZW1lbnRJZCwgY2FudmFzKTtcbiAgICB0aGlzLiNtaXNzaW5nQ2FudmFzZXMuZGVsZXRlKGFubm90YXRpb25JZCk7XG4gIH1cblxuICBhZGRNaXNzaW5nQ2FudmFzKGFubm90YXRpb25JZCwgZWRpdG9yKSB7XG4gICAgKHRoaXMuI21pc3NpbmdDYW52YXNlcyB8fD0gbmV3IE1hcCgpKS5zZXQoYW5ub3RhdGlvbklkLCBlZGl0b3IpO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIEFubm90YXRpb25FZGl0b3JVSU1hbmFnZXIsXG4gIGJpbmRFdmVudHMsXG4gIENvbG9yTWFuYWdlcixcbiAgQ29tbWFuZE1hbmFnZXIsXG4gIEtleWJvYXJkTWFuYWdlcixcbn07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjMgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IG5vQ29udGV4dE1lbnUgfSBmcm9tIFwiLi4vZGlzcGxheV91dGlscy5qc1wiO1xuXG5jbGFzcyBBbHRUZXh0IHtcbiAgI2FsdFRleHQgPSBudWxsO1xuXG4gICNhbHRUZXh0RGVjb3JhdGl2ZSA9IGZhbHNlO1xuXG4gICNhbHRUZXh0QnV0dG9uID0gbnVsbDtcblxuICAjYWx0VGV4dEJ1dHRvbkxhYmVsID0gbnVsbDtcblxuICAjYWx0VGV4dFRvb2x0aXAgPSBudWxsO1xuXG4gICNhbHRUZXh0VG9vbHRpcFRpbWVvdXQgPSBudWxsO1xuXG4gICNhbHRUZXh0V2FzRnJvbUtleUJvYXJkID0gZmFsc2U7XG5cbiAgI2JhZGdlID0gbnVsbDtcblxuICAjZWRpdG9yID0gbnVsbDtcblxuICAjZ3Vlc3NlZFRleHQgPSBudWxsO1xuXG4gICN0ZXh0V2l0aERpc2NsYWltZXIgPSBudWxsO1xuXG4gICN1c2VOZXdBbHRUZXh0RmxvdyA9IGZhbHNlO1xuXG4gIHN0YXRpYyAjbDEwbk5ld0J1dHRvbiA9IG51bGw7XG5cbiAgc3RhdGljIF9sMTBuID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihlZGl0b3IpIHtcbiAgICB0aGlzLiNlZGl0b3IgPSBlZGl0b3I7XG4gICAgdGhpcy4jdXNlTmV3QWx0VGV4dEZsb3cgPSBlZGl0b3IuX3VpTWFuYWdlci51c2VOZXdBbHRUZXh0RmxvdztcblxuICAgIEFsdFRleHQuI2wxMG5OZXdCdXR0b24gfHw9IE9iamVjdC5mcmVlemUoe1xuICAgICAgYWRkZWQ6IFwicGRmanMtZWRpdG9yLW5ldy1hbHQtdGV4dC1hZGRlZC1idXR0b25cIixcbiAgICAgIFwiYWRkZWQtbGFiZWxcIjogXCJwZGZqcy1lZGl0b3ItbmV3LWFsdC10ZXh0LWFkZGVkLWJ1dHRvbi1sYWJlbFwiLFxuICAgICAgbWlzc2luZzogXCJwZGZqcy1lZGl0b3ItbmV3LWFsdC10ZXh0LW1pc3NpbmctYnV0dG9uXCIsXG4gICAgICBcIm1pc3NpbmctbGFiZWxcIjogXCJwZGZqcy1lZGl0b3ItbmV3LWFsdC10ZXh0LW1pc3NpbmctYnV0dG9uLWxhYmVsXCIsXG4gICAgICByZXZpZXc6IFwicGRmanMtZWRpdG9yLW5ldy1hbHQtdGV4dC10by1yZXZpZXctYnV0dG9uXCIsXG4gICAgICBcInJldmlldy1sYWJlbFwiOiBcInBkZmpzLWVkaXRvci1uZXctYWx0LXRleHQtdG8tcmV2aWV3LWJ1dHRvbi1sYWJlbFwiLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGluaXRpYWxpemUobDEwbikge1xuICAgIEFsdFRleHQuX2wxMG4gPz89IGwxMG47XG4gIH1cblxuICBhc3luYyByZW5kZXIoKSB7XG4gICAgY29uc3QgYWx0VGV4dCA9ICh0aGlzLiNhbHRUZXh0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSk7XG4gICAgYWx0VGV4dC5jbGFzc05hbWUgPSBcImFsdFRleHRcIjtcbiAgICBhbHRUZXh0LnRhYkluZGV4ID0gXCIwXCI7XG5cbiAgICBjb25zdCBsYWJlbCA9ICh0aGlzLiNhbHRUZXh0QnV0dG9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSk7XG4gICAgYWx0VGV4dC5hcHBlbmQobGFiZWwpO1xuXG4gICAgaWYgKHRoaXMuI3VzZU5ld0FsdFRleHRGbG93KSB7XG4gICAgICBhbHRUZXh0LmNsYXNzTGlzdC5hZGQoXCJuZXdcIik7XG4gICAgICBhbHRUZXh0LnNldEF0dHJpYnV0ZShcImRhdGEtbDEwbi1pZFwiLCBBbHRUZXh0LiNsMTBuTmV3QnV0dG9uLm1pc3NpbmcpO1xuICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKFxuICAgICAgICBcImRhdGEtbDEwbi1pZFwiLFxuICAgICAgICBBbHRUZXh0LiNsMTBuTmV3QnV0dG9uW1wibWlzc2luZy1sYWJlbFwiXVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWx0VGV4dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWwxMG4taWRcIiwgXCJwZGZqcy1lZGl0b3ItYWx0LXRleHQtYnV0dG9uXCIpO1xuICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1sMTBuLWlkXCIsIFwicGRmanMtZWRpdG9yLWFsdC10ZXh0LWJ1dHRvbi1sYWJlbFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaWduYWwgPSB0aGlzLiNlZGl0b3IuX3VpTWFuYWdlci5fc2lnbmFsO1xuICAgIGFsdFRleHQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIG5vQ29udGV4dE1lbnUsIHsgc2lnbmFsIH0pO1xuICAgIGFsdFRleHQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGV2ZW50ID0+IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLCB7XG4gICAgICBzaWduYWwsXG4gICAgfSk7XG5cbiAgICBjb25zdCBvbkNsaWNrID0gZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI2VkaXRvci5fdWlNYW5hZ2VyLmVkaXRBbHRUZXh0KHRoaXMuI2VkaXRvcik7XG4gICAgICBpZiAodGhpcy4jdXNlTmV3QWx0VGV4dEZsb3cpIHtcbiAgICAgICAgdGhpcy4jZWRpdG9yLl9yZXBvcnRUZWxlbWV0cnkoe1xuICAgICAgICAgIGFjdGlvbjogXCJwZGZqcy5pbWFnZS5hbHRfdGV4dC5pbWFnZV9zdGF0dXNfbGFiZWxfY2xpY2tlZFwiLFxuICAgICAgICAgIGRhdGE6IHsgbGFiZWw6IHRoaXMuI2xhYmVsIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgYWx0VGV4dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25DbGljaywgeyBjYXB0dXJlOiB0cnVlLCBzaWduYWwgfSk7XG4gICAgYWx0VGV4dC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJrZXlkb3duXCIsXG4gICAgICBldmVudCA9PiB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGFsdFRleHQgJiYgZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICB0aGlzLiNhbHRUZXh0V2FzRnJvbUtleUJvYXJkID0gdHJ1ZTtcbiAgICAgICAgICBvbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgc2lnbmFsIH1cbiAgICApO1xuICAgIGF3YWl0IHRoaXMuI3NldFN0YXRlKCk7XG5cbiAgICByZXR1cm4gYWx0VGV4dDtcbiAgfVxuXG4gIGdldCAjbGFiZWwoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICh0aGlzLiNhbHRUZXh0ICYmIFwiYWRkZWRcIikgfHxcbiAgICAgICh0aGlzLiNhbHRUZXh0ID09PSBudWxsICYmIHRoaXMuZ3Vlc3NlZFRleHQgJiYgXCJyZXZpZXdcIikgfHxcbiAgICAgIFwibWlzc2luZ1wiXG4gICAgKTtcbiAgfVxuXG4gIGZpbmlzaCgpIHtcbiAgICBpZiAoIXRoaXMuI2FsdFRleHRCdXR0b24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jYWx0VGV4dEJ1dHRvbi5mb2N1cyh7IGZvY3VzVmlzaWJsZTogdGhpcy4jYWx0VGV4dFdhc0Zyb21LZXlCb2FyZCB9KTtcbiAgICB0aGlzLiNhbHRUZXh0V2FzRnJvbUtleUJvYXJkID0gZmFsc2U7XG4gIH1cblxuICBpc0VtcHR5KCkge1xuICAgIGlmICh0aGlzLiN1c2VOZXdBbHRUZXh0Rmxvdykge1xuICAgICAgcmV0dXJuIHRoaXMuI2FsdFRleHQgPT09IG51bGw7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy4jYWx0VGV4dCAmJiAhdGhpcy4jYWx0VGV4dERlY29yYXRpdmU7XG4gIH1cblxuICBoYXNEYXRhKCkge1xuICAgIGlmICh0aGlzLiN1c2VOZXdBbHRUZXh0Rmxvdykge1xuICAgICAgcmV0dXJuIHRoaXMuI2FsdFRleHQgIT09IG51bGwgfHwgISF0aGlzLiNndWVzc2VkVGV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaXNFbXB0eSgpO1xuICB9XG5cbiAgZ2V0IGd1ZXNzZWRUZXh0KCkge1xuICAgIHJldHVybiB0aGlzLiNndWVzc2VkVGV4dDtcbiAgfVxuXG4gIGFzeW5jIHNldEd1ZXNzZWRUZXh0KGd1ZXNzZWRUZXh0KSB7XG4gICAgaWYgKHRoaXMuI2FsdFRleHQgIT09IG51bGwpIHtcbiAgICAgIC8vIFRoZSB1c2VyIHByb3ZpZGVkIHRoZWlyIG93biBhbHQgdGV4dCwgc28gd2UgZG9uJ3Qgd2FudCB0byBvdmVyd3JpdGUgaXQuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI2d1ZXNzZWRUZXh0ID0gZ3Vlc3NlZFRleHQ7XG4gICAgdGhpcy4jdGV4dFdpdGhEaXNjbGFpbWVyID0gYXdhaXQgQWx0VGV4dC5fbDEwbi5nZXQoXG4gICAgICBcInBkZmpzLWVkaXRvci1uZXctYWx0LXRleHQtZ2VuZXJhdGVkLWFsdC10ZXh0LXdpdGgtZGlzY2xhaW1lclwiLFxuICAgICAgeyBnZW5lcmF0ZWRBbHRUZXh0OiBndWVzc2VkVGV4dCB9XG4gICAgKTtcbiAgICB0aGlzLiNzZXRTdGF0ZSgpO1xuICB9XG5cbiAgdG9nZ2xlQWx0VGV4dEJhZGdlKHZpc2liaWxpdHkgPSBmYWxzZSkge1xuICAgIGlmICghdGhpcy4jdXNlTmV3QWx0VGV4dEZsb3cgfHwgdGhpcy4jYWx0VGV4dCkge1xuICAgICAgdGhpcy4jYmFkZ2U/LnJlbW92ZSgpO1xuICAgICAgdGhpcy4jYmFkZ2UgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuI2JhZGdlKSB7XG4gICAgICBjb25zdCBiYWRnZSA9ICh0aGlzLiNiYWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgICAgYmFkZ2UuY2xhc3NOYW1lID0gXCJub0FsdFRleHRCYWRnZVwiO1xuICAgICAgdGhpcy4jZWRpdG9yLmRpdi5hcHBlbmQoYmFkZ2UpO1xuICAgIH1cbiAgICB0aGlzLiNiYWRnZS5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIsICF2aXNpYmlsaXR5KTtcbiAgfVxuXG4gIHNlcmlhbGl6ZShpc0ZvckNvcHlpbmcpIHtcbiAgICBsZXQgYWx0VGV4dCA9IHRoaXMuI2FsdFRleHQ7XG4gICAgaWYgKCFpc0ZvckNvcHlpbmcgJiYgdGhpcy4jZ3Vlc3NlZFRleHQgPT09IGFsdFRleHQpIHtcbiAgICAgIGFsdFRleHQgPSB0aGlzLiN0ZXh0V2l0aERpc2NsYWltZXI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBhbHRUZXh0LFxuICAgICAgZGVjb3JhdGl2ZTogdGhpcy4jYWx0VGV4dERlY29yYXRpdmUsXG4gICAgICBndWVzc2VkVGV4dDogdGhpcy4jZ3Vlc3NlZFRleHQsXG4gICAgICB0ZXh0V2l0aERpc2NsYWltZXI6IHRoaXMuI3RleHRXaXRoRGlzY2xhaW1lcixcbiAgICB9O1xuICB9XG5cbiAgZ2V0IGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFsdFRleHQ6IHRoaXMuI2FsdFRleHQsXG4gICAgICBkZWNvcmF0aXZlOiB0aGlzLiNhbHRUZXh0RGVjb3JhdGl2ZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYWx0IHRleHQgZGF0YS5cbiAgICovXG4gIHNldCBkYXRhKHtcbiAgICBhbHRUZXh0LFxuICAgIGRlY29yYXRpdmUsXG4gICAgZ3Vlc3NlZFRleHQsXG4gICAgdGV4dFdpdGhEaXNjbGFpbWVyLFxuICAgIGNhbmNlbCA9IGZhbHNlLFxuICB9KSB7XG4gICAgaWYgKGd1ZXNzZWRUZXh0KSB7XG4gICAgICB0aGlzLiNndWVzc2VkVGV4dCA9IGd1ZXNzZWRUZXh0O1xuICAgICAgdGhpcy4jdGV4dFdpdGhEaXNjbGFpbWVyID0gdGV4dFdpdGhEaXNjbGFpbWVyO1xuICAgIH1cbiAgICBpZiAodGhpcy4jYWx0VGV4dCA9PT0gYWx0VGV4dCAmJiB0aGlzLiNhbHRUZXh0RGVjb3JhdGl2ZSA9PT0gZGVjb3JhdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWNhbmNlbCkge1xuICAgICAgdGhpcy4jYWx0VGV4dCA9IGFsdFRleHQ7XG4gICAgICB0aGlzLiNhbHRUZXh0RGVjb3JhdGl2ZSA9IGRlY29yYXRpdmU7XG4gICAgfVxuICAgIHRoaXMuI3NldFN0YXRlKCk7XG4gIH1cblxuICB0b2dnbGUoZW5hYmxlZCA9IGZhbHNlKSB7XG4gICAgaWYgKCF0aGlzLiNhbHRUZXh0QnV0dG9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghZW5hYmxlZCAmJiB0aGlzLiNhbHRUZXh0VG9vbHRpcFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLiNhbHRUZXh0VG9vbHRpcFRpbWVvdXQpO1xuICAgICAgdGhpcy4jYWx0VGV4dFRvb2x0aXBUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy4jYWx0VGV4dEJ1dHRvbi5kaXNhYmxlZCA9ICFlbmFibGVkO1xuICB9XG5cbiAgc2hvd24oKSB7XG4gICAgdGhpcy4jZWRpdG9yLl9yZXBvcnRUZWxlbWV0cnkoe1xuICAgICAgYWN0aW9uOiBcInBkZmpzLmltYWdlLmFsdF90ZXh0LmltYWdlX3N0YXR1c19sYWJlbF9kaXNwbGF5ZWRcIixcbiAgICAgIGRhdGE6IHsgbGFiZWw6IHRoaXMuI2xhYmVsIH0sXG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuI2FsdFRleHRCdXR0b24/LnJlbW92ZSgpO1xuICAgIHRoaXMuI2FsdFRleHRCdXR0b24gPSBudWxsO1xuICAgIHRoaXMuI2FsdFRleHRCdXR0b25MYWJlbCA9IG51bGw7XG4gICAgdGhpcy4jYWx0VGV4dFRvb2x0aXAgPSBudWxsO1xuICAgIHRoaXMuI2JhZGdlPy5yZW1vdmUoKTtcbiAgICB0aGlzLiNiYWRnZSA9IG51bGw7XG4gIH1cblxuICBhc3luYyAjc2V0U3RhdGUoKSB7XG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy4jYWx0VGV4dEJ1dHRvbjtcbiAgICBpZiAoIWJ1dHRvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLiN1c2VOZXdBbHRUZXh0Rmxvdykge1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJkb25lXCIsICEhdGhpcy4jYWx0VGV4dCk7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1sMTBuLWlkXCIsIEFsdFRleHQuI2wxMG5OZXdCdXR0b25bdGhpcy4jbGFiZWxdKTtcblxuICAgICAgdGhpcy4jYWx0VGV4dEJ1dHRvbkxhYmVsPy5zZXRBdHRyaWJ1dGUoXG4gICAgICAgIFwiZGF0YS1sMTBuLWlkXCIsXG4gICAgICAgIEFsdFRleHQuI2wxMG5OZXdCdXR0b25bYCR7dGhpcy4jbGFiZWx9LWxhYmVsYF1cbiAgICAgICk7XG4gICAgICBpZiAoIXRoaXMuI2FsdFRleHQpIHtcbiAgICAgICAgdGhpcy4jYWx0VGV4dFRvb2x0aXA/LnJlbW92ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghdGhpcy4jYWx0VGV4dCAmJiAhdGhpcy4jYWx0VGV4dERlY29yYXRpdmUpIHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJkb25lXCIpO1xuICAgICAgICB0aGlzLiNhbHRUZXh0VG9vbHRpcD8ucmVtb3ZlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZG9uZVwiKTtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWwxMG4taWRcIiwgXCJwZGZqcy1lZGl0b3ItYWx0LXRleHQtZWRpdC1idXR0b25cIik7XG4gICAgfVxuXG4gICAgbGV0IHRvb2x0aXAgPSB0aGlzLiNhbHRUZXh0VG9vbHRpcDtcbiAgICBpZiAoIXRvb2x0aXApIHtcbiAgICAgIHRoaXMuI2FsdFRleHRUb29sdGlwID0gdG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgdG9vbHRpcC5jbGFzc05hbWUgPSBcInRvb2x0aXBcIjtcbiAgICAgIHRvb2x0aXAuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInRvb2x0aXBcIik7XG4gICAgICB0b29sdGlwLmlkID0gYGFsdC10ZXh0LXRvb2x0aXAtJHt0aGlzLiNlZGl0b3IuaWR9YDtcblxuICAgICAgY29uc3QgREVMQVlfVE9fU0hPV19UT09MVElQID0gMTAwO1xuICAgICAgY29uc3Qgc2lnbmFsID0gdGhpcy4jZWRpdG9yLl91aU1hbmFnZXIuX3NpZ25hbDtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcImFib3J0XCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy4jYWx0VGV4dFRvb2x0aXBUaW1lb3V0KTtcbiAgICAgICAgICB0aGlzLiNhbHRUZXh0VG9vbHRpcFRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9LFxuICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgKTtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcIm1vdXNlZW50ZXJcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuI2FsdFRleHRUb29sdGlwVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jYWx0VGV4dFRvb2x0aXBUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuI2FsdFRleHRUb29sdGlwLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuICAgICAgICAgICAgdGhpcy4jZWRpdG9yLl9yZXBvcnRUZWxlbWV0cnkoe1xuICAgICAgICAgICAgICBhY3Rpb246IFwiYWx0X3RleHRfdG9vbHRpcFwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgREVMQVlfVE9fU0hPV19UT09MVElQKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyBzaWduYWwgfVxuICAgICAgKTtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcIm1vdXNlbGVhdmVcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLiNhbHRUZXh0VG9vbHRpcFRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLiNhbHRUZXh0VG9vbHRpcFRpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy4jYWx0VGV4dFRvb2x0aXBUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy4jYWx0VGV4dFRvb2x0aXA/LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAgICAgICB9LFxuICAgICAgICB7IHNpZ25hbCB9XG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy4jYWx0VGV4dERlY29yYXRpdmUpIHtcbiAgICAgIHRvb2x0aXAuc2V0QXR0cmlidXRlKFxuICAgICAgICBcImRhdGEtbDEwbi1pZFwiLFxuICAgICAgICBcInBkZmpzLWVkaXRvci1hbHQtdGV4dC1kZWNvcmF0aXZlLXRvb2x0aXBcIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9vbHRpcC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWwxMG4taWRcIik7XG4gICAgICB0b29sdGlwLnRleHRDb250ZW50ID0gdGhpcy4jYWx0VGV4dDtcbiAgICB9XG5cbiAgICBpZiAoIXRvb2x0aXAucGFyZW50Tm9kZSkge1xuICAgICAgYnV0dG9uLmFwcGVuZCh0b29sdGlwKTtcbiAgICB9XG5cbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy4jZWRpdG9yLmdldEVsZW1lbnRGb3JBbHRUZXh0KCk7XG4gICAgZWxlbWVudD8uc2V0QXR0cmlidXRlKFwiYXJpYS1kZXNjcmliZWRieVwiLCB0b29sdGlwLmlkKTtcbiAgfVxufVxuXG5leHBvcnQgeyBBbHRUZXh0IH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjQgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE91dHB1dFNjYWxlLCBzdG9wRXZlbnQgfSBmcm9tIFwiLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5cbmNsYXNzIFRvdWNoTWFuYWdlciB7XG4gICNjb250YWluZXI7XG5cbiAgI2lzUGluY2hpbmcgPSBmYWxzZTtcblxuICAjaXNQaW5jaGluZ1N0b3BwZWQgPSBudWxsO1xuXG4gICNpc1BpbmNoaW5nRGlzYWJsZWQ7XG5cbiAgI29uUGluY2hTdGFydDtcblxuICAjb25QaW5jaGluZztcblxuICAjb25QaW5jaEVuZDtcblxuICAjcG9pbnRlckRvd25BQyA9IG51bGw7XG5cbiAgI3NpZ25hbDtcblxuICAjdG91Y2hJbmZvID0gbnVsbDtcblxuICAjdG91Y2hNYW5hZ2VyQUM7XG5cbiAgI3RvdWNoTW92ZUFDID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgY29udGFpbmVyLFxuICAgIGlzUGluY2hpbmdEaXNhYmxlZCA9IG51bGwsXG4gICAgaXNQaW5jaGluZ1N0b3BwZWQgPSBudWxsLFxuICAgIG9uUGluY2hTdGFydCA9IG51bGwsXG4gICAgb25QaW5jaGluZyA9IG51bGwsXG4gICAgb25QaW5jaEVuZCA9IG51bGwsXG4gICAgc2lnbmFsLFxuICB9KSB7XG4gICAgdGhpcy4jY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuI2lzUGluY2hpbmdTdG9wcGVkID0gaXNQaW5jaGluZ1N0b3BwZWQ7XG4gICAgdGhpcy4jaXNQaW5jaGluZ0Rpc2FibGVkID0gaXNQaW5jaGluZ0Rpc2FibGVkO1xuICAgIHRoaXMuI29uUGluY2hTdGFydCA9IG9uUGluY2hTdGFydDtcbiAgICB0aGlzLiNvblBpbmNoaW5nID0gb25QaW5jaGluZztcbiAgICB0aGlzLiNvblBpbmNoRW5kID0gb25QaW5jaEVuZDtcbiAgICB0aGlzLiN0b3VjaE1hbmFnZXJBQyA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICB0aGlzLiNzaWduYWwgPSBBYm9ydFNpZ25hbC5hbnkoW3NpZ25hbCwgdGhpcy4jdG91Y2hNYW5hZ2VyQUMuc2lnbmFsXSk7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy4jb25Ub3VjaFN0YXJ0LmJpbmQodGhpcyksIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgc2lnbmFsOiB0aGlzLiNzaWduYWwsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTk9URTogRG9uJ3Qgc2hhZG93IHRoaXMgdmFsdWUgc2luY2UgYGRldmljZVBpeGVsUmF0aW9gIG1heSBjaGFuZ2UgaWYgdGhlXG4gICAqIHdpbmRvdyByZXNvbHV0aW9uIGNoYW5nZXMsIGUuZy4gaWYgdGhlIHZpZXdlciBpcyBtb3ZlZCB0byBhbm90aGVyIG1vbml0b3IuXG4gICAqL1xuICBnZXQgTUlOX1RPVUNIX0RJU1RBTkNFX1RPX1BJTkNIKCkge1xuICAgIC8vIFRoZSAzNSBpcyBjb21pbmcgZnJvbTpcbiAgICAvLyAgaHR0cHM6Ly9zZWFyY2hmb3gub3JnL21vemlsbGEtY2VudHJhbC9zb3VyY2UvZ2Z4L2xheWVycy9hcHovc3JjL0dlc3R1cmVFdmVudExpc3RlbmVyLmNwcCMzNlxuICAgIC8vXG4gICAgLy8gVGhlIHByb3BlcnRpZXMgVG91Y2hFdmVudDo6c2NyZWVuWC9ZIGFyZSBpbiBzY3JlZW4gQ1NTIHBpeGVsczpcbiAgICAvLyAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1RvdWNoL3NjcmVlblgjZXhhbXBsZXNcbiAgICAvLyBNSU5fVE9VQ0hfRElTVEFOQ0VfVE9fUElOQ0ggaXMgaW4gQ1NTIHBpeGVscy5cbiAgICByZXR1cm4gMzUgLyBPdXRwdXRTY2FsZS5waXhlbFJhdGlvO1xuICB9XG5cbiAgI29uVG91Y2hTdGFydChldnQpIHtcbiAgICBpZiAodGhpcy4jaXNQaW5jaGluZ0Rpc2FibGVkPy4oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldnQudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmICh0aGlzLiNwb2ludGVyRG93bkFDKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBvaW50ZXJEb3duQUMgPSAodGhpcy4jcG9pbnRlckRvd25BQyA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSk7XG4gICAgICBjb25zdCBzaWduYWwgPSBBYm9ydFNpZ25hbC5hbnkoW3RoaXMuI3NpZ25hbCwgcG9pbnRlckRvd25BQy5zaWduYWxdKTtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuI2NvbnRhaW5lcjtcblxuICAgICAgLy8gV2Ugd2FudCB0byBoYXZlIHRoZSBldmVudHMgYXQgdGhlIGNhcHR1cmUgcGhhc2UgdG8gbWFrZSBzdXJlIHdlIGNhblxuICAgICAgLy8gY2FuY2VsIHRoZW0uXG4gICAgICBjb25zdCBvcHRzID0geyBjYXB0dXJlOiB0cnVlLCBzaWduYWwsIHBhc3NpdmU6IGZhbHNlIH07XG4gICAgICBjb25zdCBjYW5jZWxQb2ludGVyRG93biA9IGUgPT4ge1xuICAgICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XG4gICAgICAgICAgdGhpcy4jcG9pbnRlckRvd25BQz8uYWJvcnQoKTtcbiAgICAgICAgICB0aGlzLiNwb2ludGVyRG93bkFDID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcInBvaW50ZXJkb3duXCIsXG4gICAgICAgIGUgPT4ge1xuICAgICAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIHNlY29uZCBmaW5nZXIgc28gd2UgZG9uJ3Qgd2FudCBpdCBzZWxlY3Qgc29tZXRoaW5nXG4gICAgICAgICAgICAvLyBvciB3aGF0ZXZlci5cbiAgICAgICAgICAgIHN0b3BFdmVudChlKTtcbiAgICAgICAgICAgIGNhbmNlbFBvaW50ZXJEb3duKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb3B0c1xuICAgICAgKTtcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGNhbmNlbFBvaW50ZXJEb3duLCBvcHRzKTtcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmNhbmNlbFwiLCBjYW5jZWxQb2ludGVyRG93biwgb3B0cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLiN0b3VjaE1vdmVBQykge1xuICAgICAgdGhpcy4jdG91Y2hNb3ZlQUMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICBjb25zdCBzaWduYWwgPSBBYm9ydFNpZ25hbC5hbnkoW3RoaXMuI3NpZ25hbCwgdGhpcy4jdG91Y2hNb3ZlQUMuc2lnbmFsXSk7XG4gICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLiNjb250YWluZXI7XG5cbiAgICAgIGNvbnN0IG9wdCA9IHsgc2lnbmFsLCBjYXB0dXJlOiBmYWxzZSwgcGFzc2l2ZTogZmFsc2UgfTtcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcInRvdWNobW92ZVwiLFxuICAgICAgICB0aGlzLiNvblRvdWNoTW92ZS5iaW5kKHRoaXMpLFxuICAgICAgICBvcHRcbiAgICAgICk7XG4gICAgICBjb25zdCBvblRvdWNoRW5kID0gdGhpcy4jb25Ub3VjaEVuZC5iaW5kKHRoaXMpO1xuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBvblRvdWNoRW5kLCBvcHQpO1xuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLCBvblRvdWNoRW5kLCBvcHQpO1xuXG4gICAgICBvcHQuY2FwdHVyZSA9IHRydWU7XG4gICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHN0b3BFdmVudCwgb3B0KTtcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgc3RvcEV2ZW50LCBvcHQpO1xuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIHN0b3BFdmVudCwgb3B0KTtcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHN0b3BFdmVudCwgb3B0KTtcbiAgICAgIHRoaXMuI29uUGluY2hTdGFydD8uKCk7XG4gICAgfVxuXG4gICAgc3RvcEV2ZW50KGV2dCk7XG5cbiAgICBpZiAoZXZ0LnRvdWNoZXMubGVuZ3RoICE9PSAyIHx8IHRoaXMuI2lzUGluY2hpbmdTdG9wcGVkPy4oKSkge1xuICAgICAgdGhpcy4jdG91Y2hJbmZvID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgW3RvdWNoMCwgdG91Y2gxXSA9IGV2dC50b3VjaGVzO1xuICAgIGlmICh0b3VjaDAuaWRlbnRpZmllciA+IHRvdWNoMS5pZGVudGlmaWVyKSB7XG4gICAgICBbdG91Y2gwLCB0b3VjaDFdID0gW3RvdWNoMSwgdG91Y2gwXTtcbiAgICB9XG4gICAgdGhpcy4jdG91Y2hJbmZvID0ge1xuICAgICAgdG91Y2gwWDogdG91Y2gwLnNjcmVlblgsXG4gICAgICB0b3VjaDBZOiB0b3VjaDAuc2NyZWVuWSxcbiAgICAgIHRvdWNoMVg6IHRvdWNoMS5zY3JlZW5YLFxuICAgICAgdG91Y2gxWTogdG91Y2gxLnNjcmVlblksXG4gICAgfTtcbiAgfVxuXG4gICNvblRvdWNoTW92ZShldnQpIHtcbiAgICBpZiAoIXRoaXMuI3RvdWNoSW5mbyB8fCBldnQudG91Y2hlcy5sZW5ndGggIT09IDIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9wRXZlbnQoZXZ0KTtcblxuICAgIGxldCBbdG91Y2gwLCB0b3VjaDFdID0gZXZ0LnRvdWNoZXM7XG4gICAgaWYgKHRvdWNoMC5pZGVudGlmaWVyID4gdG91Y2gxLmlkZW50aWZpZXIpIHtcbiAgICAgIFt0b3VjaDAsIHRvdWNoMV0gPSBbdG91Y2gxLCB0b3VjaDBdO1xuICAgIH1cbiAgICBjb25zdCB7IHNjcmVlblg6IHNjcmVlbjBYLCBzY3JlZW5ZOiBzY3JlZW4wWSB9ID0gdG91Y2gwO1xuICAgIGNvbnN0IHsgc2NyZWVuWDogc2NyZWVuMVgsIHNjcmVlblk6IHNjcmVlbjFZIH0gPSB0b3VjaDE7XG4gICAgY29uc3QgdG91Y2hJbmZvID0gdGhpcy4jdG91Y2hJbmZvO1xuICAgIGNvbnN0IHtcbiAgICAgIHRvdWNoMFg6IHBUb3VjaDBYLFxuICAgICAgdG91Y2gwWTogcFRvdWNoMFksXG4gICAgICB0b3VjaDFYOiBwVG91Y2gxWCxcbiAgICAgIHRvdWNoMVk6IHBUb3VjaDFZLFxuICAgIH0gPSB0b3VjaEluZm87XG5cbiAgICBjb25zdCBwcmV2R2FwWCA9IHBUb3VjaDFYIC0gcFRvdWNoMFg7XG4gICAgY29uc3QgcHJldkdhcFkgPSBwVG91Y2gxWSAtIHBUb3VjaDBZO1xuICAgIGNvbnN0IGN1cnJHYXBYID0gc2NyZWVuMVggLSBzY3JlZW4wWDtcbiAgICBjb25zdCBjdXJyR2FwWSA9IHNjcmVlbjFZIC0gc2NyZWVuMFk7XG5cbiAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguaHlwb3QoY3VyckdhcFgsIGN1cnJHYXBZKSB8fCAxO1xuICAgIGNvbnN0IHBEaXN0YW5jZSA9IE1hdGguaHlwb3QocHJldkdhcFgsIHByZXZHYXBZKSB8fCAxO1xuICAgIGlmIChcbiAgICAgICF0aGlzLiNpc1BpbmNoaW5nICYmXG4gICAgICBNYXRoLmFicyhwRGlzdGFuY2UgLSBkaXN0YW5jZSkgPD0gVG91Y2hNYW5hZ2VyLk1JTl9UT1VDSF9ESVNUQU5DRV9UT19QSU5DSFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRvdWNoSW5mby50b3VjaDBYID0gc2NyZWVuMFg7XG4gICAgdG91Y2hJbmZvLnRvdWNoMFkgPSBzY3JlZW4wWTtcbiAgICB0b3VjaEluZm8udG91Y2gxWCA9IHNjcmVlbjFYO1xuICAgIHRvdWNoSW5mby50b3VjaDFZID0gc2NyZWVuMVk7XG5cbiAgICBpZiAoIXRoaXMuI2lzUGluY2hpbmcpIHtcbiAgICAgIC8vIFN0YXJ0IHBpbmNoaW5nLlxuICAgICAgdGhpcy4jaXNQaW5jaGluZyA9IHRydWU7XG5cbiAgICAgIC8vIFdlIHJldHVybiBoZXJlIGVsc2UgdGhlIGZpcnN0IHBpbmNoIGlzIGEgYml0IHRvbyBtdWNoXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb3JpZ2luID0gWyhzY3JlZW4wWCArIHNjcmVlbjFYKSAvIDIsIChzY3JlZW4wWSArIHNjcmVlbjFZKSAvIDJdO1xuICAgIHRoaXMuI29uUGluY2hpbmc/LihvcmlnaW4sIHBEaXN0YW5jZSwgZGlzdGFuY2UpO1xuICB9XG5cbiAgI29uVG91Y2hFbmQoZXZ0KSB7XG4gICAgaWYgKGV2dC50b3VjaGVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI3RvdWNoTW92ZUFDLmFib3J0KCk7XG4gICAgdGhpcy4jdG91Y2hNb3ZlQUMgPSBudWxsO1xuICAgIHRoaXMuI29uUGluY2hFbmQ/LigpO1xuXG4gICAgaWYgKCF0aGlzLiN0b3VjaEluZm8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3RvcEV2ZW50KGV2dCk7XG4gICAgdGhpcy4jdG91Y2hJbmZvID0gbnVsbDtcbiAgICB0aGlzLiNpc1BpbmNoaW5nID0gZmFsc2U7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuI3RvdWNoTWFuYWdlckFDPy5hYm9ydCgpO1xuICAgIHRoaXMuI3RvdWNoTWFuYWdlckFDID0gbnVsbDtcbiAgICB0aGlzLiNwb2ludGVyRG93bkFDPy5hYm9ydCgpO1xuICAgIHRoaXMuI3BvaW50ZXJEb3duQUMgPSBudWxsO1xuICB9XG59XG5cbmV4cG9ydCB7IFRvdWNoTWFuYWdlciB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2Fubm90YXRpb25fZWRpdG9yX2xheWVyLmpzXCIpLkFubm90YXRpb25FZGl0b3JMYXllcn0gQW5ub3RhdGlvbkVkaXRvckxheWVyICovXG5cbmltcG9ydCB7XG4gIEFubm90YXRpb25FZGl0b3JVSU1hbmFnZXIsXG4gIGJpbmRFdmVudHMsXG4gIENvbG9yTWFuYWdlcixcbiAgS2V5Ym9hcmRNYW5hZ2VyLFxufSBmcm9tIFwiLi90b29scy5qc1wiO1xuaW1wb3J0IHtcbiAgRmVhdHVyZVRlc3QsXG4gIE1hdGhDbGFtcCxcbiAgc2hhZG93LFxuICB1bnJlYWNoYWJsZSxcbn0gZnJvbSBcIi4uLy4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQgeyBub0NvbnRleHRNZW51LCBzdG9wRXZlbnQgfSBmcm9tIFwiLi4vZGlzcGxheV91dGlscy5qc1wiO1xuaW1wb3J0IHsgQWx0VGV4dCB9IGZyb20gXCIuL2FsdF90ZXh0LmpzXCI7XG5pbXBvcnQgeyBFZGl0b3JUb29sYmFyIH0gZnJvbSBcIi4vdG9vbGJhci5qc1wiO1xuaW1wb3J0IHsgVG91Y2hNYW5hZ2VyIH0gZnJvbSBcIi4uL3RvdWNoX21hbmFnZXIuanNcIjtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbm5vdGF0aW9uRWRpdG9yUGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyfSB1aU1hbmFnZXIgLSB0aGUgZ2xvYmFsIG1hbmFnZXJcbiAqIEBwcm9wZXJ0eSB7QW5ub3RhdGlvbkVkaXRvckxheWVyfSBwYXJlbnQgLSB0aGUgbGF5ZXIgY29udGFpbmluZyB0aGlzIGVkaXRvclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGlkIC0gZWRpdG9yIGlkXG4gKiBAcHJvcGVydHkge251bWJlcn0geCAtIHgtY29vcmRpbmF0ZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHkgLSB5LWNvb3JkaW5hdGVcbiAqL1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGVkaXRvcnMuXG4gKi9cbmNsYXNzIEFubm90YXRpb25FZGl0b3Ige1xuICAjYWNjZXNzaWJpbGl0eURhdGEgPSBudWxsO1xuXG4gICNhbGxSZXNpemVyRGl2cyA9IG51bGw7XG5cbiAgI2FsdFRleHQgPSBudWxsO1xuXG4gICNkaXNhYmxlZCA9IGZhbHNlO1xuXG4gICNkcmFnUG9pbnRlcklkID0gbnVsbDtcblxuICAjZHJhZ1BvaW50ZXJUeXBlID0gXCJcIjtcblxuICAja2VlcEFzcGVjdFJhdGlvID0gZmFsc2U7XG5cbiAgI3Jlc2l6ZXJzRGl2ID0gbnVsbDtcblxuICAjbGFzdFBvaW50ZXJDb29yZHMgPSBudWxsO1xuXG4gICNzYXZlZERpbWVuc2lvbnMgPSBudWxsO1xuXG4gICNmb2N1c0FDID0gbnVsbDtcblxuICAjZm9jdXNlZFJlc2l6ZXJOYW1lID0gXCJcIjtcblxuICAjaGFzQmVlbkNsaWNrZWQgPSBmYWxzZTtcblxuICAjaW5pdGlhbFJlY3QgPSBudWxsO1xuXG4gICNpc0VkaXRpbmcgPSBmYWxzZTtcblxuICAjaXNJbkVkaXRNb2RlID0gZmFsc2U7XG5cbiAgI2lzUmVzaXplckVuYWJsZWRGb3JLZXlib2FyZCA9IGZhbHNlO1xuXG4gICNtb3ZlSW5ET01UaW1lb3V0ID0gbnVsbDtcblxuICAjcHJldkRyYWdYID0gMDtcblxuICAjcHJldkRyYWdZID0gMDtcblxuICAjdGVsZW1ldHJ5VGltZW91dHMgPSBudWxsO1xuXG4gICN0b3VjaE1hbmFnZXIgPSBudWxsO1xuXG4gIF9pc0NvcHkgPSBmYWxzZTtcblxuICBfZWRpdFRvb2xiYXIgPSBudWxsO1xuXG4gIF9pbml0aWFsT3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgX2luaXRpYWxEYXRhID0gbnVsbDtcblxuICBfaXNWaXNpYmxlID0gdHJ1ZTtcblxuICBfdWlNYW5hZ2VyID0gbnVsbDtcblxuICBfZm9jdXNFdmVudHNBbGxvd2VkID0gdHJ1ZTtcblxuICBzdGF0aWMgX2wxMG4gPSBudWxsO1xuXG4gIHN0YXRpYyBfbDEwblJlc2l6ZXIgPSBudWxsO1xuXG4gICNpc0RyYWdnYWJsZSA9IGZhbHNlO1xuXG4gICN6SW5kZXggPSBBbm5vdGF0aW9uRWRpdG9yLl96SW5kZXgrKztcblxuICBzdGF0aWMgX2JvcmRlckxpbmVXaWR0aCA9IC0xO1xuXG4gIHN0YXRpYyBfY29sb3JNYW5hZ2VyID0gbmV3IENvbG9yTWFuYWdlcigpO1xuXG4gIHN0YXRpYyBfekluZGV4ID0gMTtcblxuICAvLyBUaW1lIHRvIHdhaXQgKGluIG1zKSBiZWZvcmUgc2VuZGluZyB0aGUgdGVsZW1ldHJ5IGRhdGEuXG4gIC8vIFdlIHdhaXQgYSBiaXQgdG8gYXZvaWQgc2VuZGluZyB0b28gbWFueSByZXF1ZXN0cyB3aGVuIGNoYW5naW5nIHNvbWV0aGluZ1xuICAvLyBsaWtlIHRoZSB0aGlja25lc3Mgb2YgYSBsaW5lLlxuICBzdGF0aWMgX3RlbGVtZXRyeVRpbWVvdXQgPSAxMDAwO1xuXG4gIHN0YXRpYyBnZXQgX3Jlc2l6ZXJLZXlib2FyZE1hbmFnZXIoKSB7XG4gICAgY29uc3QgcmVzaXplID0gQW5ub3RhdGlvbkVkaXRvci5wcm90b3R5cGUuX3Jlc2l6ZVdpdGhLZXlib2FyZDtcbiAgICBjb25zdCBzbWFsbCA9IEFubm90YXRpb25FZGl0b3JVSU1hbmFnZXIuVFJBTlNMQVRFX1NNQUxMO1xuICAgIGNvbnN0IGJpZyA9IEFubm90YXRpb25FZGl0b3JVSU1hbmFnZXIuVFJBTlNMQVRFX0JJRztcblxuICAgIHJldHVybiBzaGFkb3coXG4gICAgICB0aGlzLFxuICAgICAgXCJfcmVzaXplcktleWJvYXJkTWFuYWdlclwiLFxuICAgICAgbmV3IEtleWJvYXJkTWFuYWdlcihbXG4gICAgICAgIFtbXCJBcnJvd0xlZnRcIiwgXCJtYWMrQXJyb3dMZWZ0XCJdLCByZXNpemUsIHsgYXJnczogWy1zbWFsbCwgMF0gfV0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJjdHJsK0Fycm93TGVmdFwiLCBcIm1hYytzaGlmdCtBcnJvd0xlZnRcIl0sXG4gICAgICAgICAgcmVzaXplLFxuICAgICAgICAgIHsgYXJnczogWy1iaWcsIDBdIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFtbXCJBcnJvd1JpZ2h0XCIsIFwibWFjK0Fycm93UmlnaHRcIl0sIHJlc2l6ZSwgeyBhcmdzOiBbc21hbGwsIDBdIH1dLFxuICAgICAgICBbXG4gICAgICAgICAgW1wiY3RybCtBcnJvd1JpZ2h0XCIsIFwibWFjK3NoaWZ0K0Fycm93UmlnaHRcIl0sXG4gICAgICAgICAgcmVzaXplLFxuICAgICAgICAgIHsgYXJnczogW2JpZywgMF0gfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1tcIkFycm93VXBcIiwgXCJtYWMrQXJyb3dVcFwiXSwgcmVzaXplLCB7IGFyZ3M6IFswLCAtc21hbGxdIH1dLFxuICAgICAgICBbW1wiY3RybCtBcnJvd1VwXCIsIFwibWFjK3NoaWZ0K0Fycm93VXBcIl0sIHJlc2l6ZSwgeyBhcmdzOiBbMCwgLWJpZ10gfV0sXG4gICAgICAgIFtbXCJBcnJvd0Rvd25cIiwgXCJtYWMrQXJyb3dEb3duXCJdLCByZXNpemUsIHsgYXJnczogWzAsIHNtYWxsXSB9XSxcbiAgICAgICAgW1tcImN0cmwrQXJyb3dEb3duXCIsIFwibWFjK3NoaWZ0K0Fycm93RG93blwiXSwgcmVzaXplLCB7IGFyZ3M6IFswLCBiaWddIH1dLFxuICAgICAgICBbXG4gICAgICAgICAgW1wiRXNjYXBlXCIsIFwibWFjK0VzY2FwZVwiXSxcbiAgICAgICAgICBBbm5vdGF0aW9uRWRpdG9yLnByb3RvdHlwZS5fc3RvcFJlc2l6aW5nV2l0aEtleWJvYXJkLFxuICAgICAgICBdLFxuICAgICAgXSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkVkaXRvclBhcmFtZXRlcnN9IHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBpZiAoXG4gICAgICAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSAmJlxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9PT0gQW5ub3RhdGlvbkVkaXRvclxuICAgICkge1xuICAgICAgdW5yZWFjaGFibGUoXCJDYW5ub3QgaW5pdGlhbGl6ZSBBbm5vdGF0aW9uRWRpdG9yLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLnBhcmVudCA9IHBhcmFtZXRlcnMucGFyZW50O1xuICAgIHRoaXMuaWQgPSBwYXJhbWV0ZXJzLmlkO1xuICAgIHRoaXMud2lkdGggPSB0aGlzLmhlaWdodCA9IG51bGw7XG4gICAgdGhpcy5wYWdlSW5kZXggPSBwYXJhbWV0ZXJzLnBhcmVudC5wYWdlSW5kZXg7XG4gICAgdGhpcy5uYW1lID0gcGFyYW1ldGVycy5uYW1lO1xuICAgIHRoaXMuZGl2ID0gbnVsbDtcbiAgICB0aGlzLl91aU1hbmFnZXIgPSBwYXJhbWV0ZXJzLnVpTWFuYWdlcjtcbiAgICB0aGlzLmFubm90YXRpb25FbGVtZW50SWQgPSBudWxsO1xuICAgIHRoaXMuX3dpbGxLZWVwQXNwZWN0UmF0aW8gPSBmYWxzZTtcbiAgICB0aGlzLl9pbml0aWFsT3B0aW9ucy5pc0NlbnRlcmVkID0gcGFyYW1ldGVycy5pc0NlbnRlcmVkO1xuICAgIHRoaXMuX3N0cnVjdFRyZWVQYXJlbnRJZCA9IG51bGw7XG5cbiAgICBjb25zdCB7XG4gICAgICByb3RhdGlvbixcbiAgICAgIHJhd0RpbXM6IHsgcGFnZVdpZHRoLCBwYWdlSGVpZ2h0LCBwYWdlWCwgcGFnZVkgfSxcbiAgICB9ID0gdGhpcy5wYXJlbnQudmlld3BvcnQ7XG5cbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5wYWdlUm90YXRpb24gPVxuICAgICAgKDM2MCArIHJvdGF0aW9uIC0gdGhpcy5fdWlNYW5hZ2VyLnZpZXdQYXJhbWV0ZXJzLnJvdGF0aW9uKSAlIDM2MDtcbiAgICB0aGlzLnBhZ2VEaW1lbnNpb25zID0gW3BhZ2VXaWR0aCwgcGFnZUhlaWdodF07XG4gICAgdGhpcy5wYWdlVHJhbnNsYXRpb24gPSBbcGFnZVgsIHBhZ2VZXTtcblxuICAgIGNvbnN0IFt3aWR0aCwgaGVpZ2h0XSA9IHRoaXMucGFyZW50RGltZW5zaW9ucztcbiAgICB0aGlzLnggPSBwYXJhbWV0ZXJzLnggLyB3aWR0aDtcbiAgICB0aGlzLnkgPSBwYXJhbWV0ZXJzLnkgLyBoZWlnaHQ7XG5cbiAgICB0aGlzLmlzQXR0YWNoZWRUb0RPTSA9IGZhbHNlO1xuICAgIHRoaXMuZGVsZXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0IGVkaXRvclR5cGUoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvci5fdHlwZTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaXNEcmF3ZXIoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGljIGdldCBfZGVmYXVsdExpbmVDb2xvcigpIHtcbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiX2RlZmF1bHRMaW5lQ29sb3JcIixcbiAgICAgIHRoaXMuX2NvbG9yTWFuYWdlci5nZXRIZXhDb2RlKFwiQ2FudmFzVGV4dFwiKVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgZGVsZXRlQW5ub3RhdGlvbkVsZW1lbnQoZWRpdG9yKSB7XG4gICAgY29uc3QgZmFrZUVkaXRvciA9IG5ldyBGYWtlRWRpdG9yKHtcbiAgICAgIGlkOiBlZGl0b3IucGFyZW50LmdldE5leHRJZCgpLFxuICAgICAgcGFyZW50OiBlZGl0b3IucGFyZW50LFxuICAgICAgdWlNYW5hZ2VyOiBlZGl0b3IuX3VpTWFuYWdlcixcbiAgICB9KTtcbiAgICBmYWtlRWRpdG9yLmFubm90YXRpb25FbGVtZW50SWQgPSBlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZDtcbiAgICBmYWtlRWRpdG9yLmRlbGV0ZWQgPSB0cnVlO1xuICAgIGZha2VFZGl0b3IuX3VpTWFuYWdlci5hZGRUb0Fubm90YXRpb25TdG9yYWdlKGZha2VFZGl0b3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGwxMG4gc3R1ZmYgZm9yIHRoaXMgdHlwZSBvZiBlZGl0b3IuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsMTBuXG4gICAqL1xuICBzdGF0aWMgaW5pdGlhbGl6ZShsMTBuLCBfdWlNYW5hZ2VyKSB7XG4gICAgQW5ub3RhdGlvbkVkaXRvci5fbDEwbiA/Pz0gbDEwbjtcblxuICAgIEFubm90YXRpb25FZGl0b3IuX2wxMG5SZXNpemVyIHx8PSBPYmplY3QuZnJlZXplKHtcbiAgICAgIHRvcExlZnQ6IFwicGRmanMtZWRpdG9yLXJlc2l6ZXItdG9wLWxlZnRcIixcbiAgICAgIHRvcE1pZGRsZTogXCJwZGZqcy1lZGl0b3ItcmVzaXplci10b3AtbWlkZGxlXCIsXG4gICAgICB0b3BSaWdodDogXCJwZGZqcy1lZGl0b3ItcmVzaXplci10b3AtcmlnaHRcIixcbiAgICAgIG1pZGRsZVJpZ2h0OiBcInBkZmpzLWVkaXRvci1yZXNpemVyLW1pZGRsZS1yaWdodFwiLFxuICAgICAgYm90dG9tUmlnaHQ6IFwicGRmanMtZWRpdG9yLXJlc2l6ZXItYm90dG9tLXJpZ2h0XCIsXG4gICAgICBib3R0b21NaWRkbGU6IFwicGRmanMtZWRpdG9yLXJlc2l6ZXItYm90dG9tLW1pZGRsZVwiLFxuICAgICAgYm90dG9tTGVmdDogXCJwZGZqcy1lZGl0b3ItcmVzaXplci1ib3R0b20tbGVmdFwiLFxuICAgICAgbWlkZGxlTGVmdDogXCJwZGZqcy1lZGl0b3ItcmVzaXplci1taWRkbGUtbGVmdFwiLFxuICAgIH0pO1xuXG4gICAgaWYgKEFubm90YXRpb25FZGl0b3IuX2JvcmRlckxpbmVXaWR0aCAhPT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gICAgQW5ub3RhdGlvbkVkaXRvci5fYm9yZGVyTGluZVdpZHRoID1cbiAgICAgIHBhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcIi0tb3V0bGluZS13aWR0aFwiKSkgfHwgMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGRlZmF1bHQgcGFyYW1ldGVycyBmb3IgdGhpcyB0eXBlIG9mIGVkaXRvci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IF90eXBlXG4gICAqIEBwYXJhbSB7Kn0gX3ZhbHVlXG4gICAqL1xuICBzdGF0aWMgdXBkYXRlRGVmYXVsdFBhcmFtcyhfdHlwZSwgX3ZhbHVlKSB7fVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgcHJvcGVydGllcyB0byBzZXQgaW4gdGhlIFVJIGZvciB0aGlzIHR5cGUgb2YgZWRpdG9yLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRQcm9wZXJ0aWVzVG9VcGRhdGUoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMga2luZCBvZiBlZGl0b3IgaXMgYWJsZSB0byBoYW5kbGUgdGhlIGdpdmVuIG1pbWUgdHlwZSBmb3JcbiAgICogcGFzdGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1pbWVcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNIYW5kbGluZ01pbWVGb3JQYXN0aW5nKG1pbWUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCB0aGUgZGF0YSBmcm9tIHRoZSBjbGlwYm9hcmQgaXRlbSBhbmQgZGVsZWdhdGUgdGhlIGNyZWF0aW9uIG9mIHRoZVxuICAgKiBlZGl0b3IgdG8gdGhlIHBhcmVudC5cbiAgICogQHBhcmFtIHtEYXRhVHJhbnNmZXJJdGVtfSBpdGVtXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkVkaXRvckxheWVyfSBwYXJlbnRcbiAgICovXG4gIHN0YXRpYyBwYXN0ZShpdGVtLCBwYXJlbnQpIHtcbiAgICB1bnJlYWNoYWJsZShcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHByb3BlcnRpZXMgdG8gdXBkYXRlIGluIHRoZSBVSSBmb3IgdGhpcyBlZGl0b3IuXG4gICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICovXG4gIGdldCBwcm9wZXJ0aWVzVG9VcGRhdGUoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgZ2V0IF9pc0RyYWdnYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jaXNEcmFnZ2FibGU7XG4gIH1cblxuICBzZXQgX2lzRHJhZ2dhYmxlKHZhbHVlKSB7XG4gICAgdGhpcy4jaXNEcmFnZ2FibGUgPSB2YWx1ZTtcbiAgICB0aGlzLmRpdj8uY2xhc3NMaXN0LnRvZ2dsZShcImRyYWdnYWJsZVwiLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIGVkaXRvciBoYW5kbGVzIHRoZSBFbnRlciBrZXkgaXRzZWxmLlxuICAgKi9cbiAgZ2V0IGlzRW50ZXJIYW5kbGVkKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY2VudGVyKCkge1xuICAgIGNvbnN0IFtwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdID0gdGhpcy5wYWdlRGltZW5zaW9ucztcbiAgICBzd2l0Y2ggKHRoaXMucGFyZW50Um90YXRpb24pIHtcbiAgICAgIGNhc2UgOTA6XG4gICAgICAgIHRoaXMueCAtPSAodGhpcy5oZWlnaHQgKiBwYWdlSGVpZ2h0KSAvIChwYWdlV2lkdGggKiAyKTtcbiAgICAgICAgdGhpcy55ICs9ICh0aGlzLndpZHRoICogcGFnZVdpZHRoKSAvIChwYWdlSGVpZ2h0ICogMik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxODA6XG4gICAgICAgIHRoaXMueCArPSB0aGlzLndpZHRoIC8gMjtcbiAgICAgICAgdGhpcy55ICs9IHRoaXMuaGVpZ2h0IC8gMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI3MDpcbiAgICAgICAgdGhpcy54ICs9ICh0aGlzLmhlaWdodCAqIHBhZ2VIZWlnaHQpIC8gKHBhZ2VXaWR0aCAqIDIpO1xuICAgICAgICB0aGlzLnkgLT0gKHRoaXMud2lkdGggKiBwYWdlV2lkdGgpIC8gKHBhZ2VIZWlnaHQgKiAyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLnggLT0gdGhpcy53aWR0aCAvIDI7XG4gICAgICAgIHRoaXMueSAtPSB0aGlzLmhlaWdodCAvIDI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLmZpeEFuZFNldFBvc2l0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHNvbWUgY29tbWFuZHMgaW50byB0aGUgQ29tbWFuZE1hbmFnZXIgKHVuZG8vcmVkbyBzdHVmZikuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICovXG4gIGFkZENvbW1hbmRzKHBhcmFtcykge1xuICAgIHRoaXMuX3VpTWFuYWdlci5hZGRDb21tYW5kcyhwYXJhbXMpO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRMYXllcigpIHtcbiAgICByZXR1cm4gdGhpcy5fdWlNYW5hZ2VyLmN1cnJlbnRMYXllcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGVkaXRvciB3aWxsIGJlIGJlaGluZCB0aGUgb3RoZXJzLlxuICAgKi9cbiAgc2V0SW5CYWNrZ3JvdW5kKCkge1xuICAgIHRoaXMuZGl2LnN0eWxlLnpJbmRleCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBlZGl0b3Igd2lsbCBiZSBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICovXG4gIHNldEluRm9yZWdyb3VuZCgpIHtcbiAgICB0aGlzLmRpdi5zdHlsZS56SW5kZXggPSB0aGlzLiN6SW5kZXg7XG4gIH1cblxuICBzZXRQYXJlbnQocGFyZW50KSB7XG4gICAgaWYgKHBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYXJlbnQucGFnZUluZGV4O1xuICAgICAgdGhpcy5wYWdlRGltZW5zaW9ucyA9IHBhcmVudC5wYWdlRGltZW5zaW9ucztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlIGVkaXRvciBpcyBiZWluZyByZW1vdmVkIGZyb20gdGhlIERPTSwgc28gd2UgbmVlZCB0byBzdG9wIHJlc2l6aW5nLlxuICAgICAgdGhpcy4jc3RvcFJlc2l6aW5nKCk7XG4gICAgfVxuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIG9uZm9jdXMgY2FsbGJhY2suXG4gICAqL1xuICBmb2N1c2luKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLl9mb2N1c0V2ZW50c0FsbG93ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLiNoYXNCZWVuQ2xpY2tlZCkge1xuICAgICAgdGhpcy5wYXJlbnQuc2V0U2VsZWN0ZWQodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2hhc0JlZW5DbGlja2VkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIG9uYmx1ciBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtGb2N1c0V2ZW50fSBldmVudFxuICAgKi9cbiAgZm9jdXNvdXQoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuX2ZvY3VzRXZlbnRzQWxsb3dlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc0F0dGFjaGVkVG9ET00pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbiBjYXNlIG9mIGZvY3Vzb3V0LCB0aGUgcmVsYXRlZFRhcmdldCBpcyB0aGUgZWxlbWVudCB3aGljaFxuICAgIC8vIGlzIGdyYWJiaW5nIHRoZSBmb2N1cy5cbiAgICAvLyBTbyBpZiB0aGUgcmVsYXRlZCB0YXJnZXQgaXMgYW4gZWxlbWVudCB1bmRlciB0aGUgZGl2IGZvciB0aGlzXG4gICAgLy8gZWRpdG9yLCB0aGVuIHRoZSBlZGl0b3IgaXNuJ3QgdW5hY3RpdmUuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQucmVsYXRlZFRhcmdldDtcbiAgICBpZiAodGFyZ2V0Py5jbG9zZXN0KGAjJHt0aGlzLmlkfWApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICghdGhpcy5wYXJlbnQ/LmlzTXVsdGlwbGVTZWxlY3Rpb24pIHtcbiAgICAgIHRoaXMuY29tbWl0T3JSZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICBjb21taXRPclJlbW92ZSgpIHtcbiAgICBpZiAodGhpcy5pc0VtcHR5KCkpIHtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29tbWl0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbW1pdCB0aGUgZGF0YSBjb250YWluZWQgaW4gdGhpcyBlZGl0b3IuXG4gICAqL1xuICBjb21taXQoKSB7XG4gICAgdGhpcy5hZGRUb0Fubm90YXRpb25TdG9yYWdlKCk7XG4gIH1cblxuICBhZGRUb0Fubm90YXRpb25TdG9yYWdlKCkge1xuICAgIHRoaXMuX3VpTWFuYWdlci5hZGRUb0Fubm90YXRpb25TdG9yYWdlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZWRpdG9yIHBvc2l0aW9uIHdpdGhpbiBpdHMgcGFyZW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcGFyYW0ge251bWJlcn0gdHggLSB4LXRyYW5zbGF0aW9uIGluIHNjcmVlbiBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHR5IC0geS10cmFuc2xhdGlvbiBpbiBzY3JlZW4gY29vcmRpbmF0ZXMuXG4gICAqL1xuICBzZXRBdCh4LCB5LCB0eCwgdHkpIHtcbiAgICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPSB0aGlzLnBhcmVudERpbWVuc2lvbnM7XG4gICAgW3R4LCB0eV0gPSB0aGlzLnNjcmVlblRvUGFnZVRyYW5zbGF0aW9uKHR4LCB0eSk7XG5cbiAgICB0aGlzLnggPSAoeCArIHR4KSAvIHdpZHRoO1xuICAgIHRoaXMueSA9ICh5ICsgdHkpIC8gaGVpZ2h0O1xuXG4gICAgdGhpcy5maXhBbmRTZXRQb3NpdGlvbigpO1xuICB9XG5cbiAgX21vdmVBZnRlclBhc3RlKGJhc2VYLCBiYXNlWSkge1xuICAgIGNvbnN0IFtwYXJlbnRXaWR0aCwgcGFyZW50SGVpZ2h0XSA9IHRoaXMucGFyZW50RGltZW5zaW9ucztcbiAgICB0aGlzLnNldEF0KFxuICAgICAgYmFzZVggKiBwYXJlbnRXaWR0aCxcbiAgICAgIGJhc2VZICogcGFyZW50SGVpZ2h0LFxuICAgICAgdGhpcy53aWR0aCAqIHBhcmVudFdpZHRoLFxuICAgICAgdGhpcy5oZWlnaHQgKiBwYXJlbnRIZWlnaHRcbiAgICApO1xuICAgIHRoaXMuX29uVHJhbnNsYXRlZCgpO1xuICB9XG5cbiAgI3RyYW5zbGF0ZShbd2lkdGgsIGhlaWdodF0sIHgsIHkpIHtcbiAgICBbeCwgeV0gPSB0aGlzLnNjcmVlblRvUGFnZVRyYW5zbGF0aW9uKHgsIHkpO1xuXG4gICAgdGhpcy54ICs9IHggLyB3aWR0aDtcbiAgICB0aGlzLnkgKz0geSAvIGhlaWdodDtcblxuICAgIHRoaXMuX29uVHJhbnNsYXRpbmcodGhpcy54LCB0aGlzLnkpO1xuXG4gICAgdGhpcy5maXhBbmRTZXRQb3NpdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZSB0aGUgZWRpdG9yIHBvc2l0aW9uIHdpdGhpbiBpdHMgcGFyZW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtIHgtdHJhbnNsYXRpb24gaW4gc2NyZWVuIGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSAtIHktdHJhbnNsYXRpb24gaW4gc2NyZWVuIGNvb3JkaW5hdGVzLlxuICAgKi9cbiAgdHJhbnNsYXRlKHgsIHkpIHtcbiAgICAvLyBXZSBkb24ndCBjaGFuZ2UgdGhlIGluaXRpYWwgcG9zaXRpb24gYmVjYXVzZSB0aGUgbW92ZSBoZXJlIGhhc24ndCBiZWVuXG4gICAgLy8gZG9uZSBieSB0aGUgdXNlci5cbiAgICB0aGlzLiN0cmFuc2xhdGUodGhpcy5wYXJlbnREaW1lbnNpb25zLCB4LCB5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGUgdGhlIGVkaXRvciBwb3NpdGlvbiB3aXRoaW4gaXRzIHBhZ2UgYW5kIGFkanVzdCB0aGUgc2Nyb2xsXG4gICAqIGluIG9yZGVyIHRvIGhhdmUgdGhlIGVkaXRvciBpbiB0aGUgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggLSB4LXRyYW5zbGF0aW9uIGluIHBhZ2UgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0geS10cmFuc2xhdGlvbiBpbiBwYWdlIGNvb3JkaW5hdGVzLlxuICAgKi9cbiAgdHJhbnNsYXRlSW5QYWdlKHgsIHkpIHtcbiAgICB0aGlzLiNpbml0aWFsUmVjdCB8fD0gW3RoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodF07XG4gICAgdGhpcy4jdHJhbnNsYXRlKHRoaXMucGFnZURpbWVuc2lvbnMsIHgsIHkpO1xuICAgIHRoaXMuZGl2LnNjcm9sbEludG9WaWV3KHsgYmxvY2s6IFwibmVhcmVzdFwiIH0pO1xuICB9XG5cbiAgdHJhbnNsYXRpb25Eb25lKCkge1xuICAgIHRoaXMuX29uVHJhbnNsYXRlZCh0aGlzLngsIHRoaXMueSk7XG4gIH1cblxuICBkcmFnKHR4LCB0eSkge1xuICAgIHRoaXMuI2luaXRpYWxSZWN0IHx8PSBbdGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XTtcbiAgICBjb25zdCB7XG4gICAgICBkaXYsXG4gICAgICBwYXJlbnREaW1lbnNpb25zOiBbcGFyZW50V2lkdGgsIHBhcmVudEhlaWdodF0sXG4gICAgfSA9IHRoaXM7XG4gICAgdGhpcy54ICs9IHR4IC8gcGFyZW50V2lkdGg7XG4gICAgdGhpcy55ICs9IHR5IC8gcGFyZW50SGVpZ2h0O1xuICAgIGlmICh0aGlzLnBhcmVudCAmJiAodGhpcy54IDwgMCB8fCB0aGlzLnggPiAxIHx8IHRoaXMueSA8IDAgfHwgdGhpcy55ID4gMSkpIHtcbiAgICAgIC8vIEl0J3MgcG9zc2libGUgdG8gbm90IGhhdmUgYSBwYXJlbnQ6IGZvciBleGFtcGxlLCB3aGVuIHRoZSB1c2VyIGlzXG4gICAgICAvLyBkcmFnZ2luZyBhbGwgdGhlIHNlbGVjdGVkIGVkaXRvcnMgYnV0IHRoaXMgb25lIG9uIGEgcGFnZSB3aGljaCBoYXMgYmVlblxuICAgICAgLy8gZGVzdHJveWVkLlxuICAgICAgLy8gSXQncyB3aHkgd2UgbmVlZCB0byBjaGVjayBmb3IgaXQuIEluIHN1Y2ggYSBzaXR1YXRpb24sIGl0IGlzbid0IHJlYWxseVxuICAgICAgLy8gYSBwcm9ibGVtIHRvIG5vdCBmaW5kIGEgbmV3IHBhcmVudDogaXQncyBzb21ldGhpbmcgd2hpY2ggaXMgcmVsYXRlZCB0b1xuICAgICAgLy8gd2hhdCB0aGUgdXNlciBpcyBzZWVpbmcsIGhlbmNlIGl0IGRlcGVuZHMgb24gaG93IHBhZ2VzIGFyZSBsYXllZCBvdXQuXG5cbiAgICAgIC8vIFRoZSBlbGVtZW50IHdpbGwgYmUgb3V0c2lkZSBvZiBpdHMgcGFyZW50IHNvIGNoYW5nZSB0aGUgcGFyZW50LlxuICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmICh0aGlzLnBhcmVudC5maW5kTmV3UGFyZW50KHRoaXMsIHgsIHkpKSB7XG4gICAgICAgIHRoaXMueCAtPSBNYXRoLmZsb29yKHRoaXMueCk7XG4gICAgICAgIHRoaXMueSAtPSBNYXRoLmZsb29yKHRoaXMueSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGhlIGVkaXRvciBjYW4gYmUgbW92ZWQgd2hlcmV2ZXIgdGhlIHVzZXIgd2FudHMsIHNvIHdlIGRvbid0IG5lZWQgdG8gZml4XG4gICAgLy8gdGhlIHBvc2l0aW9uOiBpdCdsbCBiZSBkb25lIHdoZW4gdGhlIHVzZXIgd2lsbCByZWxlYXNlIHRoZSBtb3VzZSBidXR0b24uXG5cbiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzO1xuICAgIGNvbnN0IFtieCwgYnldID0gdGhpcy5nZXRCYXNlVHJhbnNsYXRpb24oKTtcbiAgICB4ICs9IGJ4O1xuICAgIHkgKz0gYnk7XG5cbiAgICBjb25zdCB7IHN0eWxlIH0gPSBkaXY7XG4gICAgc3R5bGUubGVmdCA9IGAkeygxMDAgKiB4KS50b0ZpeGVkKDIpfSVgO1xuICAgIHN0eWxlLnRvcCA9IGAkeygxMDAgKiB5KS50b0ZpeGVkKDIpfSVgO1xuXG4gICAgdGhpcy5fb25UcmFuc2xhdGluZyh4LCB5KTtcblxuICAgIGRpdi5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiBcIm5lYXJlc3RcIiB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgZWRpdG9yIGlzIGJlaW5nIHRyYW5zbGF0ZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gaW4gcGFnZSBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBpbiBwYWdlIGNvb3JkaW5hdGVzLlxuICAgKi9cbiAgX29uVHJhbnNsYXRpbmcoeCwgeSkge31cblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIGVkaXRvciBoYXMgYmVlbiB0cmFuc2xhdGVkLlxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtIGluIHBhZ2UgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gaW4gcGFnZSBjb29yZGluYXRlcy5cbiAgICovXG4gIF9vblRyYW5zbGF0ZWQoeCwgeSkge31cblxuICBnZXQgX2hhc0JlZW5Nb3ZlZCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgISF0aGlzLiNpbml0aWFsUmVjdCAmJlxuICAgICAgKHRoaXMuI2luaXRpYWxSZWN0WzBdICE9PSB0aGlzLnggfHwgdGhpcy4jaW5pdGlhbFJlY3RbMV0gIT09IHRoaXMueSlcbiAgICApO1xuICB9XG5cbiAgZ2V0IF9oYXNCZWVuUmVzaXplZCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgISF0aGlzLiNpbml0aWFsUmVjdCAmJlxuICAgICAgKHRoaXMuI2luaXRpYWxSZWN0WzJdICE9PSB0aGlzLndpZHRoIHx8XG4gICAgICAgIHRoaXMuI2luaXRpYWxSZWN0WzNdICE9PSB0aGlzLmhlaWdodClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHJhbnNsYXRpb24gdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlIGVkaXRvciBib3JkZXIuXG4gICAqIFRoZSBDU1MgZW5naW5lIHBvc2l0aW9ucyB0aGUgZWxlbWVudCBieSB0YWtpbmcgdGhlIGJvcmRlciBpbnRvIGFjY291bnQgc29cbiAgICogd2UgbXVzdCBhcHBseSB0aGUgb3Bwb3NpdGUgdHJhbnNsYXRpb24gdG8gaGF2ZSB0aGUgZWRpdG9yIGluIHRoZSByaWdodFxuICAgKiBwb3NpdGlvbi5cbiAgICogQHJldHVybnMge0FycmF5PG51bWJlcj59XG4gICAqL1xuICBnZXRCYXNlVHJhbnNsYXRpb24oKSB7XG4gICAgY29uc3QgW3BhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHRdID0gdGhpcy5wYXJlbnREaW1lbnNpb25zO1xuICAgIGNvbnN0IHsgX2JvcmRlckxpbmVXaWR0aCB9ID0gQW5ub3RhdGlvbkVkaXRvcjtcbiAgICBjb25zdCB4ID0gX2JvcmRlckxpbmVXaWR0aCAvIHBhcmVudFdpZHRoO1xuICAgIGNvbnN0IHkgPSBfYm9yZGVyTGluZVdpZHRoIC8gcGFyZW50SGVpZ2h0O1xuICAgIHN3aXRjaCAodGhpcy5yb3RhdGlvbikge1xuICAgICAgY2FzZSA5MDpcbiAgICAgICAgcmV0dXJuIFsteCwgeV07XG4gICAgICBjYXNlIDE4MDpcbiAgICAgICAgcmV0dXJuIFt4LCB5XTtcbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICByZXR1cm4gW3gsIC15XTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbLXgsIC15XTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgcG9zaXRpb24gbXVzdCBiZSBmaXhlZCAoaS5lLiBtYWtlIHRoZSB4IGFuZCB5XG4gICAqIGxpdmluZyBpbiB0aGUgcGFnZSkuXG4gICAqL1xuICBnZXQgX211c3RGaXhQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXggdGhlIHBvc2l0aW9uIG9mIHRoZSBlZGl0b3IgaW4gb3JkZXIgdG8ga2VlcCBpdCBpbnNpZGUgaXRzIHBhcmVudCBwYWdlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW3JvdGF0aW9uXSAtIHRoZSByb3RhdGlvbiBvZiB0aGUgcGFnZS5cbiAgICovXG4gIGZpeEFuZFNldFBvc2l0aW9uKHJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbikge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpdjogeyBzdHlsZSB9LFxuICAgICAgcGFnZURpbWVuc2lvbnM6IFtwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdLFxuICAgIH0gPSB0aGlzO1xuICAgIGxldCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXM7XG4gICAgd2lkdGggKj0gcGFnZVdpZHRoO1xuICAgIGhlaWdodCAqPSBwYWdlSGVpZ2h0O1xuICAgIHggKj0gcGFnZVdpZHRoO1xuICAgIHkgKj0gcGFnZUhlaWdodDtcblxuICAgIGlmICh0aGlzLl9tdXN0Rml4UG9zaXRpb24pIHtcbiAgICAgIHN3aXRjaCAocm90YXRpb24pIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHggPSBNYXRoQ2xhbXAoeCwgMCwgcGFnZVdpZHRoIC0gd2lkdGgpO1xuICAgICAgICAgIHkgPSBNYXRoQ2xhbXAoeSwgMCwgcGFnZUhlaWdodCAtIGhlaWdodCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTA6XG4gICAgICAgICAgeCA9IE1hdGhDbGFtcCh4LCAwLCBwYWdlV2lkdGggLSBoZWlnaHQpO1xuICAgICAgICAgIHkgPSBNYXRoQ2xhbXAoeSwgd2lkdGgsIHBhZ2VIZWlnaHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE4MDpcbiAgICAgICAgICB4ID0gTWF0aENsYW1wKHgsIHdpZHRoLCBwYWdlV2lkdGgpO1xuICAgICAgICAgIHkgPSBNYXRoQ2xhbXAoeSwgaGVpZ2h0LCBwYWdlSGVpZ2h0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyNzA6XG4gICAgICAgICAgeCA9IE1hdGhDbGFtcCh4LCBoZWlnaHQsIHBhZ2VXaWR0aCk7XG4gICAgICAgICAgeSA9IE1hdGhDbGFtcCh5LCAwLCBwYWdlSGVpZ2h0IC0gd2lkdGgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMueCA9IHggLz0gcGFnZVdpZHRoO1xuICAgIHRoaXMueSA9IHkgLz0gcGFnZUhlaWdodDtcblxuICAgIGNvbnN0IFtieCwgYnldID0gdGhpcy5nZXRCYXNlVHJhbnNsYXRpb24oKTtcbiAgICB4ICs9IGJ4O1xuICAgIHkgKz0gYnk7XG5cbiAgICBzdHlsZS5sZWZ0ID0gYCR7KDEwMCAqIHgpLnRvRml4ZWQoMil9JWA7XG4gICAgc3R5bGUudG9wID0gYCR7KDEwMCAqIHkpLnRvRml4ZWQoMil9JWA7XG5cbiAgICB0aGlzLm1vdmVJbkRPTSgpO1xuICB9XG5cbiAgc3RhdGljICNyb3RhdGVQb2ludCh4LCB5LCBhbmdsZSkge1xuICAgIHN3aXRjaCAoYW5nbGUpIHtcbiAgICAgIGNhc2UgOTA6XG4gICAgICAgIHJldHVybiBbeSwgLXhdO1xuICAgICAgY2FzZSAxODA6XG4gICAgICAgIHJldHVybiBbLXgsIC15XTtcbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICByZXR1cm4gWy15LCB4XTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbeCwgeV07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYSBzY3JlZW4gdHJhbnNsYXRpb24gaW50byBhIHBhZ2Ugb25lLlxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKi9cbiAgc2NyZWVuVG9QYWdlVHJhbnNsYXRpb24oeCwgeSkge1xuICAgIHJldHVybiBBbm5vdGF0aW9uRWRpdG9yLiNyb3RhdGVQb2ludCh4LCB5LCB0aGlzLnBhcmVudFJvdGF0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgcGFnZSB0cmFuc2xhdGlvbiBpbnRvIGEgc2NyZWVuIG9uZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICovXG4gIHBhZ2VUcmFuc2xhdGlvblRvU2NyZWVuKHgsIHkpIHtcbiAgICByZXR1cm4gQW5ub3RhdGlvbkVkaXRvci4jcm90YXRlUG9pbnQoeCwgeSwgMzYwIC0gdGhpcy5wYXJlbnRSb3RhdGlvbik7XG4gIH1cblxuICAjZ2V0Um90YXRpb25NYXRyaXgocm90YXRpb24pIHtcbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICBjYXNlIDkwOiB7XG4gICAgICAgIGNvbnN0IFtwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdID0gdGhpcy5wYWdlRGltZW5zaW9ucztcbiAgICAgICAgcmV0dXJuIFswLCAtcGFnZVdpZHRoIC8gcGFnZUhlaWdodCwgcGFnZUhlaWdodCAvIHBhZ2VXaWR0aCwgMF07XG4gICAgICB9XG4gICAgICBjYXNlIDE4MDpcbiAgICAgICAgcmV0dXJuIFstMSwgMCwgMCwgLTFdO1xuICAgICAgY2FzZSAyNzA6IHtcbiAgICAgICAgY29uc3QgW3BhZ2VXaWR0aCwgcGFnZUhlaWdodF0gPSB0aGlzLnBhZ2VEaW1lbnNpb25zO1xuICAgICAgICByZXR1cm4gWzAsIHBhZ2VXaWR0aCAvIHBhZ2VIZWlnaHQsIC1wYWdlSGVpZ2h0IC8gcGFnZVdpZHRoLCAwXTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbMSwgMCwgMCwgMV07XG4gICAgfVxuICB9XG5cbiAgZ2V0IHBhcmVudFNjYWxlKCkge1xuICAgIHJldHVybiB0aGlzLl91aU1hbmFnZXIudmlld1BhcmFtZXRlcnMucmVhbFNjYWxlO1xuICB9XG5cbiAgZ2V0IHBhcmVudFJvdGF0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fdWlNYW5hZ2VyLnZpZXdQYXJhbWV0ZXJzLnJvdGF0aW9uICsgdGhpcy5wYWdlUm90YXRpb24pICUgMzYwO1xuICB9XG5cbiAgZ2V0IHBhcmVudERpbWVuc2lvbnMoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcGFyZW50U2NhbGUsXG4gICAgICBwYWdlRGltZW5zaW9uczogW3BhZ2VXaWR0aCwgcGFnZUhlaWdodF0sXG4gICAgfSA9IHRoaXM7XG4gICAgcmV0dXJuIFtwYWdlV2lkdGggKiBwYXJlbnRTY2FsZSwgcGFnZUhlaWdodCAqIHBhcmVudFNjYWxlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhpcyBlZGl0b3IuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XG4gICAqL1xuICBzZXREaW1zKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBjb25zdCBbcGFyZW50V2lkdGgsIHBhcmVudEhlaWdodF0gPSB0aGlzLnBhcmVudERpbWVuc2lvbnM7XG4gICAgY29uc3QgeyBzdHlsZSB9ID0gdGhpcy5kaXY7XG4gICAgc3R5bGUud2lkdGggPSBgJHsoKDEwMCAqIHdpZHRoKSAvIHBhcmVudFdpZHRoKS50b0ZpeGVkKDIpfSVgO1xuICAgIGlmICghdGhpcy4ja2VlcEFzcGVjdFJhdGlvKSB7XG4gICAgICBzdHlsZS5oZWlnaHQgPSBgJHsoKDEwMCAqIGhlaWdodCkgLyBwYXJlbnRIZWlnaHQpLnRvRml4ZWQoMil9JWA7XG4gICAgfVxuICB9XG5cbiAgZml4RGltcygpIHtcbiAgICBjb25zdCB7IHN0eWxlIH0gPSB0aGlzLmRpdjtcbiAgICBjb25zdCB7IGhlaWdodCwgd2lkdGggfSA9IHN0eWxlO1xuICAgIGNvbnN0IHdpZHRoUGVyY2VudCA9IHdpZHRoLmVuZHNXaXRoKFwiJVwiKTtcbiAgICBjb25zdCBoZWlnaHRQZXJjZW50ID0gIXRoaXMuI2tlZXBBc3BlY3RSYXRpbyAmJiBoZWlnaHQuZW5kc1dpdGgoXCIlXCIpO1xuICAgIGlmICh3aWR0aFBlcmNlbnQgJiYgaGVpZ2h0UGVyY2VudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IFtwYXJlbnRXaWR0aCwgcGFyZW50SGVpZ2h0XSA9IHRoaXMucGFyZW50RGltZW5zaW9ucztcbiAgICBpZiAoIXdpZHRoUGVyY2VudCkge1xuICAgICAgc3R5bGUud2lkdGggPSBgJHsoKDEwMCAqIHBhcnNlRmxvYXQod2lkdGgpKSAvIHBhcmVudFdpZHRoKS50b0ZpeGVkKDIpfSVgO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuI2tlZXBBc3BlY3RSYXRpbyAmJiAhaGVpZ2h0UGVyY2VudCkge1xuICAgICAgc3R5bGUuaGVpZ2h0ID0gYCR7KCgxMDAgKiBwYXJzZUZsb2F0KGhlaWdodCkpIC8gcGFyZW50SGVpZ2h0KS50b0ZpeGVkKDIpfSVgO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRyYW5zbGF0aW9uIHVzZWQgdG8gcG9zaXRpb24gdGhpcyBlZGl0b3Igd2hlbiBpdCdzIGNyZWF0ZWQuXG4gICAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fVxuICAgKi9cbiAgZ2V0SW5pdGlhbFRyYW5zbGF0aW9uKCkge1xuICAgIHJldHVybiBbMCwgMF07XG4gIH1cblxuICAjY3JlYXRlUmVzaXplcnMoKSB7XG4gICAgaWYgKHRoaXMuI3Jlc2l6ZXJzRGl2KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI3Jlc2l6ZXJzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLiNyZXNpemVyc0Rpdi5jbGFzc0xpc3QuYWRkKFwicmVzaXplcnNcIik7XG4gICAgLy8gV2hlbiB0aGUgcmVzaXplcnMgYXJlIHVzZWQgd2l0aCB0aGUga2V5Ym9hcmQsIHRoZXkncmUgZm9jdXNhYmxlLCBoZW5jZVxuICAgIC8vIHdlIHdhbnQgdG8gaGF2ZSB0aGVtIGluIHRoaXMgb3JkZXIgKHRvcCBsZWZ0LCB0b3AgbWlkZGxlLCB0b3AgcmlnaHQsIC4uLilcbiAgICAvLyBpbiB0aGUgRE9NIHRvIGhhdmUgdGhlIGZvY3VzIG9yZGVyIGNvcnJlY3QuXG4gICAgY29uc3QgY2xhc3NlcyA9IHRoaXMuX3dpbGxLZWVwQXNwZWN0UmF0aW9cbiAgICAgID8gW1widG9wTGVmdFwiLCBcInRvcFJpZ2h0XCIsIFwiYm90dG9tUmlnaHRcIiwgXCJib3R0b21MZWZ0XCJdXG4gICAgICA6IFtcbiAgICAgICAgICBcInRvcExlZnRcIixcbiAgICAgICAgICBcInRvcE1pZGRsZVwiLFxuICAgICAgICAgIFwidG9wUmlnaHRcIixcbiAgICAgICAgICBcIm1pZGRsZVJpZ2h0XCIsXG4gICAgICAgICAgXCJib3R0b21SaWdodFwiLFxuICAgICAgICAgIFwiYm90dG9tTWlkZGxlXCIsXG4gICAgICAgICAgXCJib3R0b21MZWZ0XCIsXG4gICAgICAgICAgXCJtaWRkbGVMZWZ0XCIsXG4gICAgICAgIF07XG4gICAgY29uc3Qgc2lnbmFsID0gdGhpcy5fdWlNYW5hZ2VyLl9zaWduYWw7XG4gICAgZm9yIChjb25zdCBuYW1lIG9mIGNsYXNzZXMpIHtcbiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB0aGlzLiNyZXNpemVyc0Rpdi5hcHBlbmQoZGl2KTtcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwicmVzaXplclwiLCBuYW1lKTtcbiAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJlc2l6ZXItbmFtZVwiLCBuYW1lKTtcbiAgICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcInBvaW50ZXJkb3duXCIsXG4gICAgICAgIHRoaXMuI3Jlc2l6ZXJQb2ludGVyZG93bi5iaW5kKHRoaXMsIG5hbWUpLFxuICAgICAgICB7IHNpZ25hbCB9XG4gICAgICApO1xuICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBub0NvbnRleHRNZW51LCB7IHNpZ25hbCB9KTtcbiAgICAgIGRpdi50YWJJbmRleCA9IC0xO1xuICAgIH1cbiAgICB0aGlzLmRpdi5wcmVwZW5kKHRoaXMuI3Jlc2l6ZXJzRGl2KTtcbiAgfVxuXG4gICNyZXNpemVyUG9pbnRlcmRvd24obmFtZSwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHsgaXNNYWMgfSA9IEZlYXR1cmVUZXN0LnBsYXRmb3JtO1xuICAgIGlmIChldmVudC5idXR0b24gIT09IDAgfHwgKGV2ZW50LmN0cmxLZXkgJiYgaXNNYWMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy4jYWx0VGV4dD8udG9nZ2xlKGZhbHNlKTtcblxuICAgIGNvbnN0IHNhdmVkRHJhZ2dhYmxlID0gdGhpcy5faXNEcmFnZ2FibGU7XG4gICAgdGhpcy5faXNEcmFnZ2FibGUgPSBmYWxzZTtcbiAgICB0aGlzLiNsYXN0UG9pbnRlckNvb3JkcyA9IFtldmVudC5zY3JlZW5YLCBldmVudC5zY3JlZW5ZXTtcblxuICAgIGNvbnN0IGFjID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHNpZ25hbCA9IHRoaXMuX3VpTWFuYWdlci5jb21iaW5lZFNpZ25hbChhYyk7XG5cbiAgICB0aGlzLnBhcmVudC50b2dnbGVQb2ludGVyRXZlbnRzKGZhbHNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwicG9pbnRlcm1vdmVcIixcbiAgICAgIHRoaXMuI3Jlc2l6ZXJQb2ludGVybW92ZS5iaW5kKHRoaXMsIG5hbWUpLFxuICAgICAgeyBwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiB0cnVlLCBzaWduYWwgfVxuICAgICk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcInRvdWNobW92ZVwiLFxuICAgICAgc3RvcEV2ZW50IC8qIFByZXZlbnQgdGhlIHBhZ2UgZnJvbSBzY3JvbGxpbmcgKi8sXG4gICAgICB7IHBhc3NpdmU6IGZhbHNlLCBzaWduYWwgfVxuICAgICk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBub0NvbnRleHRNZW51LCB7IHNpZ25hbCB9KTtcbiAgICB0aGlzLiNzYXZlZERpbWVuc2lvbnMgPSB7XG4gICAgICBzYXZlZFg6IHRoaXMueCxcbiAgICAgIHNhdmVkWTogdGhpcy55LFxuICAgICAgc2F2ZWRXaWR0aDogdGhpcy53aWR0aCxcbiAgICAgIHNhdmVkSGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICB9O1xuICAgIGNvbnN0IHNhdmVkUGFyZW50Q3Vyc29yID0gdGhpcy5wYXJlbnQuZGl2LnN0eWxlLmN1cnNvcjtcbiAgICBjb25zdCBzYXZlZEN1cnNvciA9IHRoaXMuZGl2LnN0eWxlLmN1cnNvcjtcbiAgICB0aGlzLmRpdi5zdHlsZS5jdXJzb3IgPSB0aGlzLnBhcmVudC5kaXYuc3R5bGUuY3Vyc29yID1cbiAgICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGV2ZW50LnRhcmdldCkuY3Vyc29yO1xuXG4gICAgY29uc3QgcG9pbnRlclVwQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICBhYy5hYm9ydCgpO1xuICAgICAgdGhpcy5wYXJlbnQudG9nZ2xlUG9pbnRlckV2ZW50cyh0cnVlKTtcbiAgICAgIHRoaXMuI2FsdFRleHQ/LnRvZ2dsZSh0cnVlKTtcbiAgICAgIHRoaXMuX2lzRHJhZ2dhYmxlID0gc2F2ZWREcmFnZ2FibGU7XG4gICAgICB0aGlzLnBhcmVudC5kaXYuc3R5bGUuY3Vyc29yID0gc2F2ZWRQYXJlbnRDdXJzb3I7XG4gICAgICB0aGlzLmRpdi5zdHlsZS5jdXJzb3IgPSBzYXZlZEN1cnNvcjtcblxuICAgICAgdGhpcy4jYWRkUmVzaXplVG9VbmRvU3RhY2soKTtcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHBvaW50ZXJVcENhbGxiYWNrLCB7IHNpZ25hbCB9KTtcbiAgICAvLyBJZiB0aGUgdXNlciBzd2l0Y2hlcyB0byBhbm90aGVyIHdpbmRvdyAod2l0aCBhbHQrdGFiKSwgdGhlbiB3ZSBlbmQgdGhlXG4gICAgLy8gcmVzaXplIHNlc3Npb24uXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHBvaW50ZXJVcENhbGxiYWNrLCB7IHNpZ25hbCB9KTtcbiAgfVxuXG4gICNyZXNpemUoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgY29uc3QgW3BhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHRdID0gdGhpcy5wYXJlbnREaW1lbnNpb25zO1xuICAgIHRoaXMuc2V0RGltcyhwYXJlbnRXaWR0aCAqIHdpZHRoLCBwYXJlbnRIZWlnaHQgKiBoZWlnaHQpO1xuICAgIHRoaXMuZml4QW5kU2V0UG9zaXRpb24oKTtcbiAgICB0aGlzLl9vblJlc2l6ZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgZWRpdG9yIGhhcyBiZWVuIHJlc2l6ZWQuXG4gICAqL1xuICBfb25SZXNpemVkKCkge31cblxuICAjYWRkUmVzaXplVG9VbmRvU3RhY2soKSB7XG4gICAgaWYgKCF0aGlzLiNzYXZlZERpbWVuc2lvbnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBzYXZlZFgsIHNhdmVkWSwgc2F2ZWRXaWR0aCwgc2F2ZWRIZWlnaHQgfSA9IHRoaXMuI3NhdmVkRGltZW5zaW9ucztcbiAgICB0aGlzLiNzYXZlZERpbWVuc2lvbnMgPSBudWxsO1xuXG4gICAgY29uc3QgbmV3WCA9IHRoaXMueDtcbiAgICBjb25zdCBuZXdZID0gdGhpcy55O1xuICAgIGNvbnN0IG5ld1dpZHRoID0gdGhpcy53aWR0aDtcbiAgICBjb25zdCBuZXdIZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICBpZiAoXG4gICAgICBuZXdYID09PSBzYXZlZFggJiZcbiAgICAgIG5ld1kgPT09IHNhdmVkWSAmJlxuICAgICAgbmV3V2lkdGggPT09IHNhdmVkV2lkdGggJiZcbiAgICAgIG5ld0hlaWdodCA9PT0gc2F2ZWRIZWlnaHRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmFkZENvbW1hbmRzKHtcbiAgICAgIGNtZDogdGhpcy4jcmVzaXplLmJpbmQodGhpcywgbmV3WCwgbmV3WSwgbmV3V2lkdGgsIG5ld0hlaWdodCksXG4gICAgICB1bmRvOiB0aGlzLiNyZXNpemUuYmluZCh0aGlzLCBzYXZlZFgsIHNhdmVkWSwgc2F2ZWRXaWR0aCwgc2F2ZWRIZWlnaHQpLFxuICAgICAgbXVzdEV4ZWM6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgX3JvdW5kKHgpIHtcbiAgICAvLyAxMDAwMCBiZWNhdXNlIHdlIG11bHRpcGx5IGJ5IDEwMCBhbmQgdXNlIHRvRml4ZWQoMikgaW4gZml4QW5kU2V0UG9zaXRpb24uXG4gICAgLy8gV2l0aG91dCByb3VuZGluZywgdGhlIHBvc2l0aW9ucyBvZiB0aGUgY29ybmVycyBvdGhlciB0aGFuIHRoZSB0b3AgbGVmdFxuICAgIC8vIG9uZSBjYW4gYmUgc2xpZ2h0bHkgd3JvbmcuXG4gICAgcmV0dXJuIE1hdGgucm91bmQoeCAqIDEwMDAwKSAvIDEwMDAwO1xuICB9XG5cbiAgI3Jlc2l6ZXJQb2ludGVybW92ZShuYW1lLCBldmVudCkge1xuICAgIGNvbnN0IFtwYXJlbnRXaWR0aCwgcGFyZW50SGVpZ2h0XSA9IHRoaXMucGFyZW50RGltZW5zaW9ucztcbiAgICBjb25zdCBzYXZlZFggPSB0aGlzLng7XG4gICAgY29uc3Qgc2F2ZWRZID0gdGhpcy55O1xuICAgIGNvbnN0IHNhdmVkV2lkdGggPSB0aGlzLndpZHRoO1xuICAgIGNvbnN0IHNhdmVkSGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgY29uc3QgbWluV2lkdGggPSBBbm5vdGF0aW9uRWRpdG9yLk1JTl9TSVpFIC8gcGFyZW50V2lkdGg7XG4gICAgY29uc3QgbWluSGVpZ2h0ID0gQW5ub3RhdGlvbkVkaXRvci5NSU5fU0laRSAvIHBhcmVudEhlaWdodDtcblxuICAgIGNvbnN0IHJvdGF0aW9uTWF0cml4ID0gdGhpcy4jZ2V0Um90YXRpb25NYXRyaXgodGhpcy5yb3RhdGlvbik7XG4gICAgY29uc3QgdHJhbnNmID0gKHgsIHkpID0+IFtcbiAgICAgIHJvdGF0aW9uTWF0cml4WzBdICogeCArIHJvdGF0aW9uTWF0cml4WzJdICogeSxcbiAgICAgIHJvdGF0aW9uTWF0cml4WzFdICogeCArIHJvdGF0aW9uTWF0cml4WzNdICogeSxcbiAgICBdO1xuICAgIGNvbnN0IGludlJvdGF0aW9uTWF0cml4ID0gdGhpcy4jZ2V0Um90YXRpb25NYXRyaXgoMzYwIC0gdGhpcy5yb3RhdGlvbik7XG4gICAgY29uc3QgaW52VHJhbnNmID0gKHgsIHkpID0+IFtcbiAgICAgIGludlJvdGF0aW9uTWF0cml4WzBdICogeCArIGludlJvdGF0aW9uTWF0cml4WzJdICogeSxcbiAgICAgIGludlJvdGF0aW9uTWF0cml4WzFdICogeCArIGludlJvdGF0aW9uTWF0cml4WzNdICogeSxcbiAgICBdO1xuICAgIGxldCBnZXRQb2ludDtcbiAgICBsZXQgZ2V0T3Bwb3NpdGU7XG4gICAgbGV0IGlzRGlhZ29uYWwgPSBmYWxzZTtcbiAgICBsZXQgaXNIb3Jpem9udGFsID0gZmFsc2U7XG5cbiAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgIGNhc2UgXCJ0b3BMZWZ0XCI6XG4gICAgICAgIGlzRGlhZ29uYWwgPSB0cnVlO1xuICAgICAgICBnZXRQb2ludCA9ICh3LCBoKSA9PiBbMCwgMF07XG4gICAgICAgIGdldE9wcG9zaXRlID0gKHcsIGgpID0+IFt3LCBoXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwidG9wTWlkZGxlXCI6XG4gICAgICAgIGdldFBvaW50ID0gKHcsIGgpID0+IFt3IC8gMiwgMF07XG4gICAgICAgIGdldE9wcG9zaXRlID0gKHcsIGgpID0+IFt3IC8gMiwgaF07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInRvcFJpZ2h0XCI6XG4gICAgICAgIGlzRGlhZ29uYWwgPSB0cnVlO1xuICAgICAgICBnZXRQb2ludCA9ICh3LCBoKSA9PiBbdywgMF07XG4gICAgICAgIGdldE9wcG9zaXRlID0gKHcsIGgpID0+IFswLCBoXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibWlkZGxlUmlnaHRcIjpcbiAgICAgICAgaXNIb3Jpem9udGFsID0gdHJ1ZTtcbiAgICAgICAgZ2V0UG9pbnQgPSAodywgaCkgPT4gW3csIGggLyAyXTtcbiAgICAgICAgZ2V0T3Bwb3NpdGUgPSAodywgaCkgPT4gWzAsIGggLyAyXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYm90dG9tUmlnaHRcIjpcbiAgICAgICAgaXNEaWFnb25hbCA9IHRydWU7XG4gICAgICAgIGdldFBvaW50ID0gKHcsIGgpID0+IFt3LCBoXTtcbiAgICAgICAgZ2V0T3Bwb3NpdGUgPSAodywgaCkgPT4gWzAsIDBdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJib3R0b21NaWRkbGVcIjpcbiAgICAgICAgZ2V0UG9pbnQgPSAodywgaCkgPT4gW3cgLyAyLCBoXTtcbiAgICAgICAgZ2V0T3Bwb3NpdGUgPSAodywgaCkgPT4gW3cgLyAyLCAwXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYm90dG9tTGVmdFwiOlxuICAgICAgICBpc0RpYWdvbmFsID0gdHJ1ZTtcbiAgICAgICAgZ2V0UG9pbnQgPSAodywgaCkgPT4gWzAsIGhdO1xuICAgICAgICBnZXRPcHBvc2l0ZSA9ICh3LCBoKSA9PiBbdywgMF07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm1pZGRsZUxlZnRcIjpcbiAgICAgICAgaXNIb3Jpem9udGFsID0gdHJ1ZTtcbiAgICAgICAgZ2V0UG9pbnQgPSAodywgaCkgPT4gWzAsIGggLyAyXTtcbiAgICAgICAgZ2V0T3Bwb3NpdGUgPSAodywgaCkgPT4gW3csIGggLyAyXTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY29uc3QgcG9pbnQgPSBnZXRQb2ludChzYXZlZFdpZHRoLCBzYXZlZEhlaWdodCk7XG4gICAgY29uc3Qgb3Bwb3NpdGVQb2ludCA9IGdldE9wcG9zaXRlKHNhdmVkV2lkdGgsIHNhdmVkSGVpZ2h0KTtcbiAgICBsZXQgdHJhbnNmT3Bwb3NpdGVQb2ludCA9IHRyYW5zZiguLi5vcHBvc2l0ZVBvaW50KTtcbiAgICBjb25zdCBvcHBvc2l0ZVggPSBBbm5vdGF0aW9uRWRpdG9yLl9yb3VuZChzYXZlZFggKyB0cmFuc2ZPcHBvc2l0ZVBvaW50WzBdKTtcbiAgICBjb25zdCBvcHBvc2l0ZVkgPSBBbm5vdGF0aW9uRWRpdG9yLl9yb3VuZChzYXZlZFkgKyB0cmFuc2ZPcHBvc2l0ZVBvaW50WzFdKTtcbiAgICBsZXQgcmF0aW9YID0gMTtcbiAgICBsZXQgcmF0aW9ZID0gMTtcblxuICAgIGxldCBkZWx0YVgsIGRlbHRhWTtcblxuICAgIGlmICghZXZlbnQuZnJvbUtleWJvYXJkKSB7XG4gICAgICAvLyBXZSBjYW4ndCB1c2UgZXZlbnQubW92ZW1lbnRYL1kgYmVjYXVzZSB0aGV5J3JlIG5vdCByZWxpYWJsZTpcbiAgICAgIC8vICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudC9tb3ZlbWVudFhcbiAgICAgIC8vIChpdCB3YXMgYnVnZ3kgb24gYSBsYXB0b3Agd2l0aCBhIHRvdWNoIHNjcmVlbikuXG4gICAgICBjb25zdCB7IHNjcmVlblgsIHNjcmVlblkgfSA9IGV2ZW50O1xuICAgICAgY29uc3QgW2xhc3RTY3JlZW5YLCBsYXN0U2NyZWVuWV0gPSB0aGlzLiNsYXN0UG9pbnRlckNvb3JkcztcbiAgICAgIFtkZWx0YVgsIGRlbHRhWV0gPSB0aGlzLnNjcmVlblRvUGFnZVRyYW5zbGF0aW9uKFxuICAgICAgICBzY3JlZW5YIC0gbGFzdFNjcmVlblgsXG4gICAgICAgIHNjcmVlblkgLSBsYXN0U2NyZWVuWVxuICAgICAgKTtcbiAgICAgIHRoaXMuI2xhc3RQb2ludGVyQ29vcmRzWzBdID0gc2NyZWVuWDtcbiAgICAgIHRoaXMuI2xhc3RQb2ludGVyQ29vcmRzWzFdID0gc2NyZWVuWTtcbiAgICB9IGVsc2Uge1xuICAgICAgKHsgZGVsdGFYLCBkZWx0YVkgfSA9IGV2ZW50KTtcbiAgICB9XG4gICAgW2RlbHRhWCwgZGVsdGFZXSA9IGludlRyYW5zZihkZWx0YVggLyBwYXJlbnRXaWR0aCwgZGVsdGFZIC8gcGFyZW50SGVpZ2h0KTtcblxuICAgIGlmIChpc0RpYWdvbmFsKSB7XG4gICAgICBjb25zdCBvbGREaWFnID0gTWF0aC5oeXBvdChzYXZlZFdpZHRoLCBzYXZlZEhlaWdodCk7XG4gICAgICByYXRpb1ggPSByYXRpb1kgPSBNYXRoLm1heChcbiAgICAgICAgTWF0aC5taW4oXG4gICAgICAgICAgTWF0aC5oeXBvdChcbiAgICAgICAgICAgIG9wcG9zaXRlUG9pbnRbMF0gLSBwb2ludFswXSAtIGRlbHRhWCxcbiAgICAgICAgICAgIG9wcG9zaXRlUG9pbnRbMV0gLSBwb2ludFsxXSAtIGRlbHRhWVxuICAgICAgICAgICkgLyBvbGREaWFnLFxuICAgICAgICAgIC8vIEF2b2lkIHRoZSBlZGl0b3IgdG8gYmUgbGFyZ2VyIHRoYW4gdGhlIHBhZ2UuXG4gICAgICAgICAgMSAvIHNhdmVkV2lkdGgsXG4gICAgICAgICAgMSAvIHNhdmVkSGVpZ2h0XG4gICAgICAgICksXG4gICAgICAgIC8vIEF2b2lkIHRoZSBlZGl0b3IgdG8gYmUgc21hbGxlciB0aGFuIHRoZSBtaW5pbXVtIHNpemUuXG4gICAgICAgIG1pbldpZHRoIC8gc2F2ZWRXaWR0aCxcbiAgICAgICAgbWluSGVpZ2h0IC8gc2F2ZWRIZWlnaHRcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChpc0hvcml6b250YWwpIHtcbiAgICAgIHJhdGlvWCA9XG4gICAgICAgIE1hdGhDbGFtcChNYXRoLmFicyhvcHBvc2l0ZVBvaW50WzBdIC0gcG9pbnRbMF0gLSBkZWx0YVgpLCBtaW5XaWR0aCwgMSkgL1xuICAgICAgICBzYXZlZFdpZHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICByYXRpb1kgPVxuICAgICAgICBNYXRoQ2xhbXAoXG4gICAgICAgICAgTWF0aC5hYnMob3Bwb3NpdGVQb2ludFsxXSAtIHBvaW50WzFdIC0gZGVsdGFZKSxcbiAgICAgICAgICBtaW5IZWlnaHQsXG4gICAgICAgICAgMVxuICAgICAgICApIC8gc2F2ZWRIZWlnaHQ7XG4gICAgfVxuXG4gICAgY29uc3QgbmV3V2lkdGggPSBBbm5vdGF0aW9uRWRpdG9yLl9yb3VuZChzYXZlZFdpZHRoICogcmF0aW9YKTtcbiAgICBjb25zdCBuZXdIZWlnaHQgPSBBbm5vdGF0aW9uRWRpdG9yLl9yb3VuZChzYXZlZEhlaWdodCAqIHJhdGlvWSk7XG4gICAgdHJhbnNmT3Bwb3NpdGVQb2ludCA9IHRyYW5zZiguLi5nZXRPcHBvc2l0ZShuZXdXaWR0aCwgbmV3SGVpZ2h0KSk7XG4gICAgY29uc3QgbmV3WCA9IG9wcG9zaXRlWCAtIHRyYW5zZk9wcG9zaXRlUG9pbnRbMF07XG4gICAgY29uc3QgbmV3WSA9IG9wcG9zaXRlWSAtIHRyYW5zZk9wcG9zaXRlUG9pbnRbMV07XG5cbiAgICB0aGlzLiNpbml0aWFsUmVjdCB8fD0gW3RoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodF07XG4gICAgdGhpcy53aWR0aCA9IG5ld1dpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgIHRoaXMueCA9IG5ld1g7XG4gICAgdGhpcy55ID0gbmV3WTtcblxuICAgIHRoaXMuc2V0RGltcyhwYXJlbnRXaWR0aCAqIG5ld1dpZHRoLCBwYXJlbnRIZWlnaHQgKiBuZXdIZWlnaHQpO1xuICAgIHRoaXMuZml4QW5kU2V0UG9zaXRpb24oKTtcblxuICAgIHRoaXMuX29uUmVzaXppbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgZWRpdG9yIGlzIGJlaW5nIHJlc2l6ZWQuXG4gICAqL1xuICBfb25SZXNpemluZygpIHt9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSBhbHQgdGV4dCBkaWFsb2cgaXMgY2xvc2VkLlxuICAgKi9cbiAgYWx0VGV4dEZpbmlzaCgpIHtcbiAgICB0aGlzLiNhbHRUZXh0Py5maW5pc2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSB0b29sYmFyIGZvciB0aGlzIGVkaXRvci5cbiAgICogQHJldHVybnMge1Byb21pc2U8RWRpdG9yVG9vbGJhcnxudWxsPn1cbiAgICovXG4gIGFzeW5jIGFkZEVkaXRUb29sYmFyKCkge1xuICAgIGlmICh0aGlzLl9lZGl0VG9vbGJhciB8fCB0aGlzLiNpc0luRWRpdE1vZGUpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lZGl0VG9vbGJhcjtcbiAgICB9XG4gICAgdGhpcy5fZWRpdFRvb2xiYXIgPSBuZXcgRWRpdG9yVG9vbGJhcih0aGlzKTtcbiAgICB0aGlzLmRpdi5hcHBlbmQodGhpcy5fZWRpdFRvb2xiYXIucmVuZGVyKCkpO1xuICAgIGlmICh0aGlzLiNhbHRUZXh0KSB7XG4gICAgICBhd2FpdCB0aGlzLl9lZGl0VG9vbGJhci5hZGRBbHRUZXh0KHRoaXMuI2FsdFRleHQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9lZGl0VG9vbGJhcjtcbiAgfVxuXG4gIHJlbW92ZUVkaXRUb29sYmFyKCkge1xuICAgIGlmICghdGhpcy5fZWRpdFRvb2xiYXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZWRpdFRvb2xiYXIucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWRpdFRvb2xiYXIgPSBudWxsO1xuXG4gICAgLy8gV2UgZGVzdHJveSB0aGUgYWx0IHRleHQgYnV0IHdlIGRvbid0IG51bGwgaXQgYmVjYXVzZSB3ZSB3YW50IHRvIGJlIGFibGVcbiAgICAvLyB0byByZXN0b3JlIGl0IGluIGNhc2UgdGhlIHVzZXIgdW5kb2VzIHRoZSBkZWxldGlvbi5cbiAgICB0aGlzLiNhbHRUZXh0Py5kZXN0cm95KCk7XG4gIH1cblxuICBhZGRDb250YWluZXIoY29udGFpbmVyKSB7XG4gICAgY29uc3QgZWRpdFRvb2xiYXJEaXYgPSB0aGlzLl9lZGl0VG9vbGJhcj8uZGl2O1xuICAgIGlmIChlZGl0VG9vbGJhckRpdikge1xuICAgICAgZWRpdFRvb2xiYXJEaXYuYmVmb3JlKGNvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGl2LmFwcGVuZChjb250YWluZXIpO1xuICAgIH1cbiAgfVxuXG4gIGdldENsaWVudERpbWVuc2lvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB9XG5cbiAgYXN5bmMgYWRkQWx0VGV4dEJ1dHRvbigpIHtcbiAgICBpZiAodGhpcy4jYWx0VGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBBbHRUZXh0LmluaXRpYWxpemUoQW5ub3RhdGlvbkVkaXRvci5fbDEwbik7XG4gICAgdGhpcy4jYWx0VGV4dCA9IG5ldyBBbHRUZXh0KHRoaXMpO1xuICAgIGlmICh0aGlzLiNhY2Nlc3NpYmlsaXR5RGF0YSkge1xuICAgICAgdGhpcy4jYWx0VGV4dC5kYXRhID0gdGhpcy4jYWNjZXNzaWJpbGl0eURhdGE7XG4gICAgICB0aGlzLiNhY2Nlc3NpYmlsaXR5RGF0YSA9IG51bGw7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWRkRWRpdFRvb2xiYXIoKTtcbiAgfVxuXG4gIGdldCBhbHRUZXh0RGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy4jYWx0VGV4dD8uZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGFsdCB0ZXh0IGRhdGEuXG4gICAqL1xuICBzZXQgYWx0VGV4dERhdGEoZGF0YSkge1xuICAgIGlmICghdGhpcy4jYWx0VGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNhbHRUZXh0LmRhdGEgPSBkYXRhO1xuICB9XG5cbiAgZ2V0IGd1ZXNzZWRBbHRUZXh0KCkge1xuICAgIHJldHVybiB0aGlzLiNhbHRUZXh0Py5ndWVzc2VkVGV4dDtcbiAgfVxuXG4gIGFzeW5jIHNldEd1ZXNzZWRBbHRUZXh0KHRleHQpIHtcbiAgICBhd2FpdCB0aGlzLiNhbHRUZXh0Py5zZXRHdWVzc2VkVGV4dCh0ZXh0KTtcbiAgfVxuXG4gIHNlcmlhbGl6ZUFsdFRleHQoaXNGb3JDb3B5aW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuI2FsdFRleHQ/LnNlcmlhbGl6ZShpc0ZvckNvcHlpbmcpO1xuICB9XG5cbiAgaGFzQWx0VGV4dCgpIHtcbiAgICByZXR1cm4gISF0aGlzLiNhbHRUZXh0ICYmICF0aGlzLiNhbHRUZXh0LmlzRW1wdHkoKTtcbiAgfVxuXG4gIGhhc0FsdFRleHREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLiNhbHRUZXh0Py5oYXNEYXRhKCkgPz8gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIHRoaXMgZWRpdG9yIGluIGEgZGl2LlxuICAgKiBAcmV0dXJucyB7SFRNTERpdkVsZW1lbnQgfCBudWxsfVxuICAgKi9cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGRpdiA9ICh0aGlzLmRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWVkaXRvci1yb3RhdGlvblwiLCAoMzYwIC0gdGhpcy5yb3RhdGlvbikgJSAzNjApO1xuICAgIGRpdi5jbGFzc05hbWUgPSB0aGlzLm5hbWU7XG4gICAgZGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIHRoaXMuaWQpO1xuICAgIGRpdi50YWJJbmRleCA9IHRoaXMuI2Rpc2FibGVkID8gLTEgOiAwO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiYXBwbGljYXRpb25cIik7XG4gICAgaWYgKHRoaXMuZGVmYXVsdEwxMG5JZCkge1xuICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImRhdGEtbDEwbi1pZFwiLCB0aGlzLmRlZmF1bHRMMTBuSWQpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2lzVmlzaWJsZSkge1xuICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRJbkZvcmVncm91bmQoKTtcbiAgICB0aGlzLiNhZGRGb2N1c0xpc3RlbmVycygpO1xuXG4gICAgY29uc3QgW3BhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHRdID0gdGhpcy5wYXJlbnREaW1lbnNpb25zO1xuICAgIGlmICh0aGlzLnBhcmVudFJvdGF0aW9uICUgMTgwICE9PSAwKSB7XG4gICAgICBkaXYuc3R5bGUubWF4V2lkdGggPSBgJHsoKDEwMCAqIHBhcmVudEhlaWdodCkgLyBwYXJlbnRXaWR0aCkudG9GaXhlZChcbiAgICAgICAgMlxuICAgICAgKX0lYDtcbiAgICAgIGRpdi5zdHlsZS5tYXhIZWlnaHQgPSBgJHsoKDEwMCAqIHBhcmVudFdpZHRoKSAvIHBhcmVudEhlaWdodCkudG9GaXhlZChcbiAgICAgICAgMlxuICAgICAgKX0lYDtcbiAgICB9XG5cbiAgICBjb25zdCBbdHgsIHR5XSA9IHRoaXMuZ2V0SW5pdGlhbFRyYW5zbGF0aW9uKCk7XG4gICAgdGhpcy50cmFuc2xhdGUodHgsIHR5KTtcblxuICAgIGJpbmRFdmVudHModGhpcywgZGl2LCBbXCJrZXlkb3duXCIsIFwicG9pbnRlcmRvd25cIl0pO1xuXG4gICAgaWYgKHRoaXMuaXNSZXNpemFibGUgJiYgdGhpcy5fdWlNYW5hZ2VyLl9zdXBwb3J0c1BpbmNoVG9ab29tKSB7XG4gICAgICB0aGlzLiN0b3VjaE1hbmFnZXIgfHw9IG5ldyBUb3VjaE1hbmFnZXIoe1xuICAgICAgICBjb250YWluZXI6IGRpdixcbiAgICAgICAgaXNQaW5jaGluZ0Rpc2FibGVkOiAoKSA9PiAhdGhpcy5pc1NlbGVjdGVkLFxuICAgICAgICBvblBpbmNoU3RhcnQ6IHRoaXMuI3RvdWNoUGluY2hTdGFydENhbGxiYWNrLmJpbmQodGhpcyksXG4gICAgICAgIG9uUGluY2hpbmc6IHRoaXMuI3RvdWNoUGluY2hDYWxsYmFjay5iaW5kKHRoaXMpLFxuICAgICAgICBvblBpbmNoRW5kOiB0aGlzLiN0b3VjaFBpbmNoRW5kQ2FsbGJhY2suYmluZCh0aGlzKSxcbiAgICAgICAgc2lnbmFsOiB0aGlzLl91aU1hbmFnZXIuX3NpZ25hbCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX3VpTWFuYWdlci5fZWRpdG9yVW5kb0Jhcj8uaGlkZSgpO1xuXG4gICAgcmV0dXJuIGRpdjtcbiAgfVxuXG4gICN0b3VjaFBpbmNoU3RhcnRDYWxsYmFjaygpIHtcbiAgICB0aGlzLiNzYXZlZERpbWVuc2lvbnMgPSB7XG4gICAgICBzYXZlZFg6IHRoaXMueCxcbiAgICAgIHNhdmVkWTogdGhpcy55LFxuICAgICAgc2F2ZWRXaWR0aDogdGhpcy53aWR0aCxcbiAgICAgIHNhdmVkSGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICB9O1xuICAgIHRoaXMuI2FsdFRleHQ/LnRvZ2dsZShmYWxzZSk7XG4gICAgdGhpcy5wYXJlbnQudG9nZ2xlUG9pbnRlckV2ZW50cyhmYWxzZSk7XG4gIH1cblxuICAjdG91Y2hQaW5jaENhbGxiYWNrKF9vcmlnaW4sIHByZXZEaXN0YW5jZSwgZGlzdGFuY2UpIHtcbiAgICAvLyBTbGlnaHRseSBzbG93IGRvd24gdGhlIHpvb21pbmcgYmVjYXVzZSB0aGUgZWRpdG9yIGNvdWxkIGJlIHNtYWxsIGFuZCB0aGVcbiAgICAvLyB1c2VyIGNvdWxkIGhhdmUgZGlmZmljdWx0aWVzIHRvIHJlc2NhbGUgaXQgYXMgdGhleSB3YW50LlxuICAgIGNvbnN0IHNsb3dEb3duRmFjdG9yID0gMC43O1xuICAgIGxldCBmYWN0b3IgPVxuICAgICAgc2xvd0Rvd25GYWN0b3IgKiAoZGlzdGFuY2UgLyBwcmV2RGlzdGFuY2UpICsgMSAtIHNsb3dEb3duRmFjdG9yO1xuICAgIGlmIChmYWN0b3IgPT09IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByb3RhdGlvbk1hdHJpeCA9IHRoaXMuI2dldFJvdGF0aW9uTWF0cml4KHRoaXMucm90YXRpb24pO1xuICAgIGNvbnN0IHRyYW5zZiA9ICh4LCB5KSA9PiBbXG4gICAgICByb3RhdGlvbk1hdHJpeFswXSAqIHggKyByb3RhdGlvbk1hdHJpeFsyXSAqIHksXG4gICAgICByb3RhdGlvbk1hdHJpeFsxXSAqIHggKyByb3RhdGlvbk1hdHJpeFszXSAqIHksXG4gICAgXTtcblxuICAgIC8vIFRoZSBjZW50ZXIgb2YgdGhlIGVkaXRvciBpcyB0aGUgZml4ZWQgcG9pbnQuXG4gICAgY29uc3QgW3BhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHRdID0gdGhpcy5wYXJlbnREaW1lbnNpb25zO1xuICAgIGNvbnN0IHNhdmVkWCA9IHRoaXMueDtcbiAgICBjb25zdCBzYXZlZFkgPSB0aGlzLnk7XG4gICAgY29uc3Qgc2F2ZWRXaWR0aCA9IHRoaXMud2lkdGg7XG4gICAgY29uc3Qgc2F2ZWRIZWlnaHQgPSB0aGlzLmhlaWdodDtcblxuICAgIGNvbnN0IG1pbldpZHRoID0gQW5ub3RhdGlvbkVkaXRvci5NSU5fU0laRSAvIHBhcmVudFdpZHRoO1xuICAgIGNvbnN0IG1pbkhlaWdodCA9IEFubm90YXRpb25FZGl0b3IuTUlOX1NJWkUgLyBwYXJlbnRIZWlnaHQ7XG4gICAgZmFjdG9yID0gTWF0aC5tYXgoXG4gICAgICBNYXRoLm1pbihmYWN0b3IsIDEgLyBzYXZlZFdpZHRoLCAxIC8gc2F2ZWRIZWlnaHQpLFxuICAgICAgbWluV2lkdGggLyBzYXZlZFdpZHRoLFxuICAgICAgbWluSGVpZ2h0IC8gc2F2ZWRIZWlnaHRcbiAgICApO1xuICAgIGNvbnN0IG5ld1dpZHRoID0gQW5ub3RhdGlvbkVkaXRvci5fcm91bmQoc2F2ZWRXaWR0aCAqIGZhY3Rvcik7XG4gICAgY29uc3QgbmV3SGVpZ2h0ID0gQW5ub3RhdGlvbkVkaXRvci5fcm91bmQoc2F2ZWRIZWlnaHQgKiBmYWN0b3IpO1xuICAgIGlmIChuZXdXaWR0aCA9PT0gc2F2ZWRXaWR0aCAmJiBuZXdIZWlnaHQgPT09IHNhdmVkSGVpZ2h0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy4jaW5pdGlhbFJlY3QgfHw9IFtzYXZlZFgsIHNhdmVkWSwgc2F2ZWRXaWR0aCwgc2F2ZWRIZWlnaHRdO1xuICAgIGNvbnN0IHRyYW5zZkNlbnRlclBvaW50ID0gdHJhbnNmKHNhdmVkV2lkdGggLyAyLCBzYXZlZEhlaWdodCAvIDIpO1xuICAgIGNvbnN0IGNlbnRlclggPSBBbm5vdGF0aW9uRWRpdG9yLl9yb3VuZChzYXZlZFggKyB0cmFuc2ZDZW50ZXJQb2ludFswXSk7XG4gICAgY29uc3QgY2VudGVyWSA9IEFubm90YXRpb25FZGl0b3IuX3JvdW5kKHNhdmVkWSArIHRyYW5zZkNlbnRlclBvaW50WzFdKTtcbiAgICBjb25zdCBuZXdUcmFuc2ZDZW50ZXJQb2ludCA9IHRyYW5zZihuZXdXaWR0aCAvIDIsIG5ld0hlaWdodCAvIDIpO1xuXG4gICAgdGhpcy54ID0gY2VudGVyWCAtIG5ld1RyYW5zZkNlbnRlclBvaW50WzBdO1xuICAgIHRoaXMueSA9IGNlbnRlclkgLSBuZXdUcmFuc2ZDZW50ZXJQb2ludFsxXTtcbiAgICB0aGlzLndpZHRoID0gbmV3V2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBuZXdIZWlnaHQ7XG5cbiAgICB0aGlzLnNldERpbXMocGFyZW50V2lkdGggKiBuZXdXaWR0aCwgcGFyZW50SGVpZ2h0ICogbmV3SGVpZ2h0KTtcbiAgICB0aGlzLmZpeEFuZFNldFBvc2l0aW9uKCk7XG5cbiAgICB0aGlzLl9vblJlc2l6aW5nKCk7XG4gIH1cblxuICAjdG91Y2hQaW5jaEVuZENhbGxiYWNrKCkge1xuICAgIHRoaXMuI2FsdFRleHQ/LnRvZ2dsZSh0cnVlKTtcbiAgICB0aGlzLnBhcmVudC50b2dnbGVQb2ludGVyRXZlbnRzKHRydWUpO1xuICAgIHRoaXMuI2FkZFJlc2l6ZVRvVW5kb1N0YWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogT25wb2ludGVyZG93biBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGV2ZW50XG4gICAqL1xuICBwb2ludGVyZG93bihldmVudCkge1xuICAgIGNvbnN0IHsgaXNNYWMgfSA9IEZlYXR1cmVUZXN0LnBsYXRmb3JtO1xuICAgIGlmIChldmVudC5idXR0b24gIT09IDAgfHwgKGV2ZW50LmN0cmxLZXkgJiYgaXNNYWMpKSB7XG4gICAgICAvLyBBdm9pZCB0byBmb2N1cyB0aGlzIGVkaXRvciBiZWNhdXNlIG9mIGEgbm9uLWxlZnQgY2xpY2suXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNoYXNCZWVuQ2xpY2tlZCA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5faXNEcmFnZ2FibGUpIHtcbiAgICAgIHRoaXMuI3NldFVwRHJhZ1Nlc3Npb24oZXZlbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuI3NlbGVjdE9uUG9pbnRlckV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIGdldCBpc1NlbGVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl91aU1hbmFnZXIuaXNTZWxlY3RlZCh0aGlzKTtcbiAgfVxuXG4gICNzZWxlY3RPblBvaW50ZXJFdmVudChldmVudCkge1xuICAgIGNvbnN0IHsgaXNNYWMgfSA9IEZlYXR1cmVUZXN0LnBsYXRmb3JtO1xuICAgIGlmIChcbiAgICAgIChldmVudC5jdHJsS2V5ICYmICFpc01hYykgfHxcbiAgICAgIGV2ZW50LnNoaWZ0S2V5IHx8XG4gICAgICAoZXZlbnQubWV0YUtleSAmJiBpc01hYylcbiAgICApIHtcbiAgICAgIHRoaXMucGFyZW50LnRvZ2dsZVNlbGVjdGVkKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBhcmVudC5zZXRTZWxlY3RlZCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICAjc2V0VXBEcmFnU2Vzc2lvbihldmVudCkge1xuICAgIGNvbnN0IHsgaXNTZWxlY3RlZCB9ID0gdGhpcztcbiAgICB0aGlzLl91aU1hbmFnZXIuc2V0VXBEcmFnU2Vzc2lvbigpO1xuICAgIGxldCBoYXNEcmFnZ2luZ1N0YXJ0ZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0IGFjID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHNpZ25hbCA9IHRoaXMuX3VpTWFuYWdlci5jb21iaW5lZFNpZ25hbChhYyk7XG4gICAgY29uc3Qgb3B0cyA9IHsgY2FwdHVyZTogdHJ1ZSwgcGFzc2l2ZTogZmFsc2UsIHNpZ25hbCB9O1xuICAgIGNvbnN0IGNhbmNlbERyYWcgPSBlID0+IHtcbiAgICAgIGFjLmFib3J0KCk7XG5cbiAgICAgIHRoaXMuI2RyYWdQb2ludGVySWQgPSBudWxsO1xuICAgICAgdGhpcy4jaGFzQmVlbkNsaWNrZWQgPSBmYWxzZTtcbiAgICAgIGlmICghdGhpcy5fdWlNYW5hZ2VyLmVuZERyYWdTZXNzaW9uKCkpIHtcbiAgICAgICAgdGhpcy4jc2VsZWN0T25Qb2ludGVyRXZlbnQoZSk7XG4gICAgICB9XG4gICAgICBpZiAoaGFzRHJhZ2dpbmdTdGFydGVkKSB7XG4gICAgICAgIHRoaXMuX29uU3RvcERyYWdnaW5nKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICB0aGlzLiNwcmV2RHJhZ1ggPSBldmVudC5jbGllbnRYO1xuICAgICAgdGhpcy4jcHJldkRyYWdZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgIHRoaXMuI2RyYWdQb2ludGVySWQgPSBldmVudC5wb2ludGVySWQ7XG4gICAgICB0aGlzLiNkcmFnUG9pbnRlclR5cGUgPSBldmVudC5wb2ludGVyVHlwZTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcInBvaW50ZXJtb3ZlXCIsXG4gICAgICAgIGUgPT4ge1xuICAgICAgICAgIGlmICghaGFzRHJhZ2dpbmdTdGFydGVkKSB7XG4gICAgICAgICAgICBoYXNEcmFnZ2luZ1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fb25TdGFydERyYWdnaW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHsgY2xpZW50WDogeCwgY2xpZW50WTogeSwgcG9pbnRlcklkIH0gPSBlO1xuICAgICAgICAgIGlmIChwb2ludGVySWQgIT09IHRoaXMuI2RyYWdQb2ludGVySWQpIHtcbiAgICAgICAgICAgIHN0b3BFdmVudChlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgW3R4LCB0eV0gPSB0aGlzLnNjcmVlblRvUGFnZVRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgeCAtIHRoaXMuI3ByZXZEcmFnWCxcbiAgICAgICAgICAgIHkgLSB0aGlzLiNwcmV2RHJhZ1lcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuI3ByZXZEcmFnWCA9IHg7XG4gICAgICAgICAgdGhpcy4jcHJldkRyYWdZID0geTtcbiAgICAgICAgICB0aGlzLl91aU1hbmFnZXIuZHJhZ1NlbGVjdGVkRWRpdG9ycyh0eCwgdHkpO1xuICAgICAgICB9LFxuICAgICAgICBvcHRzXG4gICAgICApO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwidG91Y2htb3ZlXCIsXG4gICAgICAgIHN0b3BFdmVudCAvKiBQcmV2ZW50IHRoZSBwYWdlIGZyb20gc2Nyb2xsaW5nICovLFxuICAgICAgICBvcHRzXG4gICAgICApO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwicG9pbnRlcmRvd25cIixcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgZHJhZ3Mgd2l0aCBvbmUgZmluZ2VyIGFuZCB0aGVuIGNsaWNrcyB3aXRoIGFub3RoZXIuXG4gICAgICAgIGUgPT4ge1xuICAgICAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSB0aGlzLiNkcmFnUG9pbnRlclR5cGUpIHtcbiAgICAgICAgICAgIC8vIFdlJ3ZlIGEgcGluY2ggdG8gem9vbSBzZXNzaW9uLlxuICAgICAgICAgICAgLy8gV2UgY2Fubm90IGhhdmUgdHdvIHByaW1hcmllcyBhdCB0aGUgc2FtZSB0aW1lLlxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0byBiZSBpbiB0aGlzIHN0YXRlIHdpdGggRmlyZWZveCBhbmQgR25vbWUgd2hlblxuICAgICAgICAgICAgLy8gdHJ5aW5nIHRvIGRyYWcgd2l0aCB0aHJlZSBmaW5nZXJzIChzZWUgYnVnIDE5MzM3MTYpLlxuICAgICAgICAgICAgaWYgKHRoaXMuI3RvdWNoTWFuYWdlciB8fCBlLmlzUHJpbWFyeSkge1xuICAgICAgICAgICAgICBjYW5jZWxEcmFnKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzdG9wRXZlbnQoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9wdHNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgcG9pbnRlclVwQ2FsbGJhY2sgPSBlID0+IHtcbiAgICAgIGlmICghdGhpcy4jZHJhZ1BvaW50ZXJJZCB8fCB0aGlzLiNkcmFnUG9pbnRlcklkID09PSBlLnBvaW50ZXJJZCkge1xuICAgICAgICBjYW5jZWxEcmFnKGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzdG9wRXZlbnQoZSk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBwb2ludGVyVXBDYWxsYmFjaywgeyBzaWduYWwgfSk7XG4gICAgLy8gSWYgdGhlIHVzZXIgaXMgdXNpbmcgYWx0K3RhYiBkdXJpbmcgdGhlIGRyYWdnaW5nIHNlc3Npb24sIHRoZSBwb2ludGVydXBcbiAgICAvLyBldmVudCBjb3VsZCBiZSBub3QgZmlyZWQsIGJ1dCBhIGJsdXIgZXZlbnQgaXMgZmlyZWQgc28gd2UgY2FuIHVzZSBpdCBpblxuICAgIC8vIG9yZGVyIHRvIGludGVycnVwdCB0aGUgZHJhZ2dpbmcgc2Vzc2lvbi5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgcG9pbnRlclVwQ2FsbGJhY2ssIHsgc2lnbmFsIH0pO1xuICB9XG5cbiAgX29uU3RhcnREcmFnZ2luZygpIHt9XG5cbiAgX29uU3RvcERyYWdnaW5nKCkge31cblxuICBtb3ZlSW5ET00oKSB7XG4gICAgLy8gTW92aW5nIHRoZSBlZGl0b3IgaW4gdGhlIERPTSBjYW4gYmUgZXhwZW5zaXZlLCBzbyB3ZSB3YWl0IGEgYml0IGJlZm9yZS5cbiAgICAvLyBJdCdzIGltcG9ydGFudCB0byBub3QgYmxvY2sgdGhlIFVJIChmb3IgZXhhbXBsZSB3aGVuIGNoYW5naW5nIHRoZSBmb250XG4gICAgLy8gc2l6ZSBpbiBhIEZyZWVUZXh0KS5cbiAgICBpZiAodGhpcy4jbW92ZUluRE9NVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuI21vdmVJbkRPTVRpbWVvdXQpO1xuICAgIH1cbiAgICB0aGlzLiNtb3ZlSW5ET01UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLiNtb3ZlSW5ET01UaW1lb3V0ID0gbnVsbDtcbiAgICAgIHRoaXMucGFyZW50Py5tb3ZlRWRpdG9ySW5ET00odGhpcyk7XG4gICAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgICAgIHRoaXMuX3VpTWFuYWdlci5fZXZlbnRCdXMuZGlzcGF0Y2goXCJlZGl0b3Jtb3ZlZGluZG9tXCIsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIDApO1xuICB9XG5cbiAgX3NldFBhcmVudEFuZFBvc2l0aW9uKHBhcmVudCwgeCwgeSkge1xuICAgIHBhcmVudC5jaGFuZ2VQYXJlbnQodGhpcyk7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuZml4QW5kU2V0UG9zaXRpb24oKTtcbiAgICB0aGlzLl9vblRyYW5zbGF0ZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBjdXJyZW50IHJlY3QgaW50byBhIHBhZ2Ugb25lLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdHggLSB4LXRyYW5zbGF0aW9uIGluIHNjcmVlbiBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHR5IC0geS10cmFuc2xhdGlvbiBpbiBzY3JlZW4gY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcm90YXRpb25dIC0gdGhlIHJvdGF0aW9uIG9mIHRoZSBwYWdlLlxuICAgKi9cbiAgZ2V0UmVjdCh0eCwgdHksIHJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbikge1xuICAgIGNvbnN0IHNjYWxlID0gdGhpcy5wYXJlbnRTY2FsZTtcbiAgICBjb25zdCBbcGFnZVdpZHRoLCBwYWdlSGVpZ2h0XSA9IHRoaXMucGFnZURpbWVuc2lvbnM7XG4gICAgY29uc3QgW3BhZ2VYLCBwYWdlWV0gPSB0aGlzLnBhZ2VUcmFuc2xhdGlvbjtcbiAgICBjb25zdCBzaGlmdFggPSB0eCAvIHNjYWxlO1xuICAgIGNvbnN0IHNoaWZ0WSA9IHR5IC8gc2NhbGU7XG4gICAgY29uc3QgeCA9IHRoaXMueCAqIHBhZ2VXaWR0aDtcbiAgICBjb25zdCB5ID0gdGhpcy55ICogcGFnZUhlaWdodDtcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMud2lkdGggKiBwYWdlV2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKiBwYWdlSGVpZ2h0O1xuXG4gICAgc3dpdGNoIChyb3RhdGlvbikge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHggKyBzaGlmdFggKyBwYWdlWCxcbiAgICAgICAgICBwYWdlSGVpZ2h0IC0geSAtIHNoaWZ0WSAtIGhlaWdodCArIHBhZ2VZLFxuICAgICAgICAgIHggKyBzaGlmdFggKyB3aWR0aCArIHBhZ2VYLFxuICAgICAgICAgIHBhZ2VIZWlnaHQgLSB5IC0gc2hpZnRZICsgcGFnZVksXG4gICAgICAgIF07XG4gICAgICBjYXNlIDkwOlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHggKyBzaGlmdFkgKyBwYWdlWCxcbiAgICAgICAgICBwYWdlSGVpZ2h0IC0geSArIHNoaWZ0WCArIHBhZ2VZLFxuICAgICAgICAgIHggKyBzaGlmdFkgKyBoZWlnaHQgKyBwYWdlWCxcbiAgICAgICAgICBwYWdlSGVpZ2h0IC0geSArIHNoaWZ0WCArIHdpZHRoICsgcGFnZVksXG4gICAgICAgIF07XG4gICAgICBjYXNlIDE4MDpcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB4IC0gc2hpZnRYIC0gd2lkdGggKyBwYWdlWCxcbiAgICAgICAgICBwYWdlSGVpZ2h0IC0geSArIHNoaWZ0WSArIHBhZ2VZLFxuICAgICAgICAgIHggLSBzaGlmdFggKyBwYWdlWCxcbiAgICAgICAgICBwYWdlSGVpZ2h0IC0geSArIHNoaWZ0WSArIGhlaWdodCArIHBhZ2VZLFxuICAgICAgICBdO1xuICAgICAgY2FzZSAyNzA6XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgeCAtIHNoaWZ0WSAtIGhlaWdodCArIHBhZ2VYLFxuICAgICAgICAgIHBhZ2VIZWlnaHQgLSB5IC0gc2hpZnRYIC0gd2lkdGggKyBwYWdlWSxcbiAgICAgICAgICB4IC0gc2hpZnRZICsgcGFnZVgsXG4gICAgICAgICAgcGFnZUhlaWdodCAtIHkgLSBzaGlmdFggKyBwYWdlWSxcbiAgICAgICAgXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcm90YXRpb25cIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0UmVjdEluQ3VycmVudENvb3JkcyhyZWN0LCBwYWdlSGVpZ2h0KSB7XG4gICAgY29uc3QgW3gxLCB5MSwgeDIsIHkyXSA9IHJlY3Q7XG5cbiAgICBjb25zdCB3aWR0aCA9IHgyIC0geDE7XG4gICAgY29uc3QgaGVpZ2h0ID0geTIgLSB5MTtcblxuICAgIHN3aXRjaCAodGhpcy5yb3RhdGlvbikge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gW3gxLCBwYWdlSGVpZ2h0IC0geTIsIHdpZHRoLCBoZWlnaHRdO1xuICAgICAgY2FzZSA5MDpcbiAgICAgICAgcmV0dXJuIFt4MSwgcGFnZUhlaWdodCAtIHkxLCBoZWlnaHQsIHdpZHRoXTtcbiAgICAgIGNhc2UgMTgwOlxuICAgICAgICByZXR1cm4gW3gyLCBwYWdlSGVpZ2h0IC0geTEsIHdpZHRoLCBoZWlnaHRdO1xuICAgICAgY2FzZSAyNzA6XG4gICAgICAgIHJldHVybiBbeDIsIHBhZ2VIZWlnaHQgLSB5MiwgaGVpZ2h0LCB3aWR0aF07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJvdGF0aW9uXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlZCBvbmNlIHRoaXMgZWRpdG9yIGhhcyBiZWVuIHJlbmRlcmVkLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZvY3VzIC0gdHJ1ZSBpZiB0aGUgZWRpdG9yIHNob3VsZCBiZSBmb2N1c2VkLlxuICAgKi9cbiAgb25jZUFkZGVkKGZvY3VzKSB7fVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgZWRpdG9yIGNvbnRhaW5zIHNvbWV0aGluZy5cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0VtcHR5KCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGUgZWRpdCBtb2RlLlxuICAgKi9cbiAgZW5hYmxlRWRpdE1vZGUoKSB7XG4gICAgdGhpcy4jaXNJbkVkaXRNb2RlID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlIGVkaXQgbW9kZS5cbiAgICovXG4gIGRpc2FibGVFZGl0TW9kZSgpIHtcbiAgICB0aGlzLiNpc0luRWRpdE1vZGUgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgZWRpdG9yIGlzIGVkaXRlZC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0luRWRpdE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2lzSW5FZGl0TW9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBpdCByZXR1cm5zIHRydWUsIHRoZW4gdGhpcyBlZGl0b3IgaGFuZGxlcyB0aGUga2V5Ym9hcmRcbiAgICogZXZlbnRzIGl0c2VsZi5cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBzaG91bGRHZXRLZXlib2FyZEV2ZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy4jaXNSZXNpemVyRW5hYmxlZEZvcktleWJvYXJkO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgZWRpdG9yIG5lZWRzIHRvIGJlIHJlYnVpbHQgb3Igbm90LlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIG5lZWRzVG9CZVJlYnVpbHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGl2ICYmICF0aGlzLmlzQXR0YWNoZWRUb0RPTTtcbiAgfVxuXG4gIGdldCBpc09uU2NyZWVuKCkge1xuICAgIGNvbnN0IHsgdG9wLCBsZWZ0LCBib3R0b20sIHJpZ2h0IH0gPSB0aGlzLmdldENsaWVudERpbWVuc2lvbnMoKTtcbiAgICBjb25zdCB7IGlubmVySGVpZ2h0LCBpbm5lcldpZHRoIH0gPSB3aW5kb3c7XG4gICAgcmV0dXJuIGxlZnQgPCBpbm5lcldpZHRoICYmIHJpZ2h0ID4gMCAmJiB0b3AgPCBpbm5lckhlaWdodCAmJiBib3R0b20gPiAwO1xuICB9XG5cbiAgI2FkZEZvY3VzTGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLiNmb2N1c0FDIHx8ICF0aGlzLmRpdikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNmb2N1c0FDID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHNpZ25hbCA9IHRoaXMuX3VpTWFuYWdlci5jb21iaW5lZFNpZ25hbCh0aGlzLiNmb2N1c0FDKTtcblxuICAgIHRoaXMuZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIHRoaXMuZm9jdXNpbi5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcbiAgICB0aGlzLmRpdi5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgdGhpcy5mb2N1c291dC5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWJ1aWxkIHRoZSBlZGl0b3IgaW4gY2FzZSBpdCBoYXMgYmVlbiByZW1vdmVkIG9uIHVuZG8uXG4gICAqXG4gICAqIFRvIGltcGxlbWVudCBpbiBzdWJjbGFzc2VzLlxuICAgKi9cbiAgcmVidWlsZCgpIHtcbiAgICB0aGlzLiNhZGRGb2N1c0xpc3RlbmVycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJvdGF0ZSB0aGUgZWRpdG9yIHdoZW4gdGhlIHBhZ2UgaXMgcm90YXRlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlXG4gICAqL1xuICByb3RhdGUoX2FuZ2xlKSB7fVxuXG4gIC8qKlxuICAgKiBSZXNpemUgdGhlIGVkaXRvciB3aGVuIHRoZSBwYWdlIGlzIHJlc2l6ZWQuXG4gICAqL1xuICByZXNpemUoKSB7fVxuXG4gIC8qKlxuICAgKiBTZXJpYWxpemUgdGhlIGVkaXRvciB3aGVuIGl0IGhhcyBiZWVuIGRlbGV0ZWQuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzZXJpYWxpemVEZWxldGVkKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5hbm5vdGF0aW9uRWxlbWVudElkLFxuICAgICAgZGVsZXRlZDogdHJ1ZSxcbiAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsXG4gICAgICBwb3B1cFJlZjogdGhpcy5faW5pdGlhbERhdGE/LnBvcHVwUmVmIHx8IFwiXCIsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXJpYWxpemUgdGhlIGVkaXRvci5cbiAgICogVGhlIHJlc3VsdCBvZiB0aGUgc2VyaWFsaXphdGlvbiB3aWxsIGJlIHVzZWQgdG8gY29uc3RydWN0IGFcbiAgICogbmV3IGFubm90YXRpb24gdG8gYWRkIHRvIHRoZSBwZGYgZG9jdW1lbnQuXG4gICAqXG4gICAqIFRvIGltcGxlbWVudCBpbiBzdWJjbGFzc2VzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0ZvckNvcHlpbmddXG4gICAqIEBwYXJhbSB7T2JqZWN0IHwgbnVsbH0gW2NvbnRleHRdXG4gICAqIEByZXR1cm5zIHtPYmplY3QgfCBudWxsfVxuICAgKi9cbiAgc2VyaWFsaXplKGlzRm9yQ29weWluZyA9IGZhbHNlLCBjb250ZXh0ID0gbnVsbCkge1xuICAgIHVucmVhY2hhYmxlKFwiQW4gZWRpdG9yIG11c3QgYmUgc2VyaWFsaXphYmxlXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc2VyaWFsaXplIHRoZSBlZGl0b3IuXG4gICAqIFRoZSByZXN1bHQgb2YgdGhlIGRlc2VyaWFsaXphdGlvbiBpcyBhIG5ldyBlZGl0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkVkaXRvckxheWVyfSBwYXJlbnRcbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyfSB1aU1hbmFnZXJcbiAgICogQHJldHVybnMge1Byb21pc2U8QW5ub3RhdGlvbkVkaXRvciB8IG51bGw+fVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRlc2VyaWFsaXplKGRhdGEsIHBhcmVudCwgdWlNYW5hZ2VyKSB7XG4gICAgY29uc3QgZWRpdG9yID0gbmV3IHRoaXMucHJvdG90eXBlLmNvbnN0cnVjdG9yKHtcbiAgICAgIHBhcmVudCxcbiAgICAgIGlkOiBwYXJlbnQuZ2V0TmV4dElkKCksXG4gICAgICB1aU1hbmFnZXIsXG4gICAgfSk7XG4gICAgZWRpdG9yLnJvdGF0aW9uID0gZGF0YS5yb3RhdGlvbjtcbiAgICBlZGl0b3IuI2FjY2Vzc2liaWxpdHlEYXRhID0gZGF0YS5hY2Nlc3NpYmlsaXR5RGF0YTtcbiAgICBlZGl0b3IuX2lzQ29weSA9IGRhdGEuaXNDb3B5IHx8IGZhbHNlO1xuXG4gICAgY29uc3QgW3BhZ2VXaWR0aCwgcGFnZUhlaWdodF0gPSBlZGl0b3IucGFnZURpbWVuc2lvbnM7XG4gICAgY29uc3QgW3gsIHksIHdpZHRoLCBoZWlnaHRdID0gZWRpdG9yLmdldFJlY3RJbkN1cnJlbnRDb29yZHMoXG4gICAgICBkYXRhLnJlY3QsXG4gICAgICBwYWdlSGVpZ2h0XG4gICAgKTtcblxuICAgIGVkaXRvci54ID0geCAvIHBhZ2VXaWR0aDtcbiAgICBlZGl0b3IueSA9IHkgLyBwYWdlSGVpZ2h0O1xuICAgIGVkaXRvci53aWR0aCA9IHdpZHRoIC8gcGFnZVdpZHRoO1xuICAgIGVkaXRvci5oZWlnaHQgPSBoZWlnaHQgLyBwYWdlSGVpZ2h0O1xuXG4gICAgcmV0dXJuIGVkaXRvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBleGlzdGluZyBhbm5vdGF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVkaXRvciBoYXMgYmVlblxuICAgKiBtb2RpZmllZC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaGFzQmVlbk1vZGlmaWVkKCkge1xuICAgIHJldHVybiAoXG4gICAgICAhIXRoaXMuYW5ub3RhdGlvbkVsZW1lbnRJZCAmJiAodGhpcy5kZWxldGVkIHx8IHRoaXMuc2VyaWFsaXplKCkgIT09IG51bGwpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhpcyBlZGl0b3IuXG4gICAqIEl0J3MgdXNlZCBvbiBjdHJsK2JhY2tzcGFjZSBhY3Rpb24uXG4gICAqL1xuICByZW1vdmUoKSB7XG4gICAgdGhpcy4jZm9jdXNBQz8uYWJvcnQoKTtcbiAgICB0aGlzLiNmb2N1c0FDID0gbnVsbDtcblxuICAgIGlmICghdGhpcy5pc0VtcHR5KCkpIHtcbiAgICAgIC8vIFRoZSBlZGl0b3IgaXMgcmVtb3ZlZCBidXQgaXQgY2FuIGJlIGJhY2sgYXQgc29tZSBwb2ludCB0aGFua3MgdG9cbiAgICAgIC8vIHVuZG8vcmVkbyBzbyB3ZSBtdXN0IGNvbW1pdCBpdCBiZWZvcmUuXG4gICAgICB0aGlzLmNvbW1pdCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIHRoaXMucGFyZW50LnJlbW92ZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdWlNYW5hZ2VyLnJlbW92ZUVkaXRvcih0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jbW92ZUluRE9NVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuI21vdmVJbkRPTVRpbWVvdXQpO1xuICAgICAgdGhpcy4jbW92ZUluRE9NVGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuI3N0b3BSZXNpemluZygpO1xuICAgIHRoaXMucmVtb3ZlRWRpdFRvb2xiYXIoKTtcbiAgICBpZiAodGhpcy4jdGVsZW1ldHJ5VGltZW91dHMpIHtcbiAgICAgIGZvciAoY29uc3QgdGltZW91dCBvZiB0aGlzLiN0ZWxlbWV0cnlUaW1lb3V0cy52YWx1ZXMoKSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9XG4gICAgICB0aGlzLiN0ZWxlbWV0cnlUaW1lb3V0cyA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICB0aGlzLiN0b3VjaE1hbmFnZXI/LmRlc3Ryb3koKTtcbiAgICB0aGlzLiN0b3VjaE1hbmFnZXIgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoaXMgZWRpdG9yIGNhbiBiZSByZXNpemVkLlxuICAgKi9cbiAgZ2V0IGlzUmVzaXphYmxlKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGhlIHJlc2l6ZXJzIHRvIHRoaXMgZWRpdG9yLlxuICAgKi9cbiAgbWFrZVJlc2l6YWJsZSgpIHtcbiAgICBpZiAodGhpcy5pc1Jlc2l6YWJsZSkge1xuICAgICAgdGhpcy4jY3JlYXRlUmVzaXplcnMoKTtcbiAgICAgIHRoaXMuI3Jlc2l6ZXJzRGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHRvb2xiYXJQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBvbmtleWRvd24gY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcbiAgICovXG4gIGtleWRvd24oZXZlbnQpIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5pc1Jlc2l6YWJsZSB8fFxuICAgICAgZXZlbnQudGFyZ2V0ICE9PSB0aGlzLmRpdiB8fFxuICAgICAgZXZlbnQua2V5ICE9PSBcIkVudGVyXCJcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fdWlNYW5hZ2VyLnNldFNlbGVjdGVkKHRoaXMpO1xuICAgIHRoaXMuI3NhdmVkRGltZW5zaW9ucyA9IHtcbiAgICAgIHNhdmVkWDogdGhpcy54LFxuICAgICAgc2F2ZWRZOiB0aGlzLnksXG4gICAgICBzYXZlZFdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgc2F2ZWRIZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgIH07XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLiNyZXNpemVyc0Rpdi5jaGlsZHJlbjtcbiAgICBpZiAoIXRoaXMuI2FsbFJlc2l6ZXJEaXZzKSB7XG4gICAgICB0aGlzLiNhbGxSZXNpemVyRGl2cyA9IEFycmF5LmZyb20oY2hpbGRyZW4pO1xuICAgICAgY29uc3QgYm91bmRSZXNpemVyS2V5ZG93biA9IHRoaXMuI3Jlc2l6ZXJLZXlkb3duLmJpbmQodGhpcyk7XG4gICAgICBjb25zdCBib3VuZFJlc2l6ZXJCbHVyID0gdGhpcy4jcmVzaXplckJsdXIuYmluZCh0aGlzKTtcbiAgICAgIGNvbnN0IHNpZ25hbCA9IHRoaXMuX3VpTWFuYWdlci5fc2lnbmFsO1xuICAgICAgZm9yIChjb25zdCBkaXYgb2YgdGhpcy4jYWxsUmVzaXplckRpdnMpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGRpdi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXJlc2l6ZXItbmFtZVwiKTtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJzcGluYnV0dG9uXCIpO1xuICAgICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgYm91bmRSZXNpemVyS2V5ZG93biwgeyBzaWduYWwgfSk7XG4gICAgICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBib3VuZFJlc2l6ZXJCbHVyLCB7IHNpZ25hbCB9KTtcbiAgICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLiNyZXNpemVyRm9jdXMuYmluZCh0aGlzLCBuYW1lKSwge1xuICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWwxMG4taWRcIiwgQW5ub3RhdGlvbkVkaXRvci5fbDEwblJlc2l6ZXJbbmFtZV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdlIHdhbnQgdG8gaGF2ZSB0aGUgcmVzaXplcnMgaW4gdGhlIHZpc3VhbCBvcmRlciwgc28gd2UgbW92ZSB0aGUgZmlyc3RcbiAgICAvLyAodG9wLWxlZnQpIHRvIHRoZSByaWdodCBwbGFjZS5cbiAgICBjb25zdCBmaXJzdCA9IHRoaXMuI2FsbFJlc2l6ZXJEaXZzWzBdO1xuICAgIGxldCBmaXJzdFBvc2l0aW9uID0gMDtcbiAgICBmb3IgKGNvbnN0IGRpdiBvZiBjaGlsZHJlbikge1xuICAgICAgaWYgKGRpdiA9PT0gZmlyc3QpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBmaXJzdFBvc2l0aW9uKys7XG4gICAgfVxuICAgIGNvbnN0IG5leHRGaXJzdFBvc2l0aW9uID1cbiAgICAgICgoKDM2MCAtIHRoaXMucm90YXRpb24gKyB0aGlzLnBhcmVudFJvdGF0aW9uKSAlIDM2MCkgLyA5MCkgKlxuICAgICAgKHRoaXMuI2FsbFJlc2l6ZXJEaXZzLmxlbmd0aCAvIDQpO1xuXG4gICAgaWYgKG5leHRGaXJzdFBvc2l0aW9uICE9PSBmaXJzdFBvc2l0aW9uKSB7XG4gICAgICAvLyBXZSBuZWVkIHRvIHJlb3JkZXIgdGhlIHJlc2l6ZXJzIGluIHRoZSBET00gaW4gb3JkZXIgdG8gaGF2ZSB0aGUgZm9jdXNcbiAgICAgIC8vIG9uIHRoZSB0b3AtbGVmdCBvbmUuXG4gICAgICBpZiAobmV4dEZpcnN0UG9zaXRpb24gPCBmaXJzdFBvc2l0aW9uKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlyc3RQb3NpdGlvbiAtIG5leHRGaXJzdFBvc2l0aW9uOyBpKyspIHtcbiAgICAgICAgICB0aGlzLiNyZXNpemVyc0Rpdi5hcHBlbmQodGhpcy4jcmVzaXplcnNEaXYuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobmV4dEZpcnN0UG9zaXRpb24gPiBmaXJzdFBvc2l0aW9uKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dEZpcnN0UG9zaXRpb24gLSBmaXJzdFBvc2l0aW9uOyBpKyspIHtcbiAgICAgICAgICB0aGlzLiNyZXNpemVyc0Rpdi5maXJzdENoaWxkLmJlZm9yZSh0aGlzLiNyZXNpemVyc0Rpdi5sYXN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgY29uc3QgZGl2ID0gdGhpcy4jYWxsUmVzaXplckRpdnNbaSsrXTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGRpdi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXJlc2l6ZXItbmFtZVwiKTtcbiAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFwiZGF0YS1sMTBuLWlkXCIsIEFubm90YXRpb25FZGl0b3IuX2wxMG5SZXNpemVyW25hbWVdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLiNzZXRSZXNpemVyVGFiSW5kZXgoMCk7XG4gICAgdGhpcy4jaXNSZXNpemVyRW5hYmxlZEZvcktleWJvYXJkID0gdHJ1ZTtcbiAgICB0aGlzLiNyZXNpemVyc0Rpdi5maXJzdENoaWxkLmZvY3VzKHsgZm9jdXNWaXNpYmxlOiB0cnVlIH0pO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICAjcmVzaXplcktleWRvd24oZXZlbnQpIHtcbiAgICBBbm5vdGF0aW9uRWRpdG9yLl9yZXNpemVyS2V5Ym9hcmRNYW5hZ2VyLmV4ZWModGhpcywgZXZlbnQpO1xuICB9XG5cbiAgI3Jlc2l6ZXJCbHVyKGV2ZW50KSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy4jaXNSZXNpemVyRW5hYmxlZEZvcktleWJvYXJkICYmXG4gICAgICBldmVudC5yZWxhdGVkVGFyZ2V0Py5wYXJlbnROb2RlICE9PSB0aGlzLiNyZXNpemVyc0RpdlxuICAgICkge1xuICAgICAgdGhpcy4jc3RvcFJlc2l6aW5nKCk7XG4gICAgfVxuICB9XG5cbiAgI3Jlc2l6ZXJGb2N1cyhuYW1lKSB7XG4gICAgdGhpcy4jZm9jdXNlZFJlc2l6ZXJOYW1lID0gdGhpcy4jaXNSZXNpemVyRW5hYmxlZEZvcktleWJvYXJkID8gbmFtZSA6IFwiXCI7XG4gIH1cblxuICAjc2V0UmVzaXplclRhYkluZGV4KHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLiNhbGxSZXNpemVyRGl2cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGRpdiBvZiB0aGlzLiNhbGxSZXNpemVyRGl2cykge1xuICAgICAgZGl2LnRhYkluZGV4ID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgX3Jlc2l6ZVdpdGhLZXlib2FyZCh4LCB5KSB7XG4gICAgaWYgKCF0aGlzLiNpc1Jlc2l6ZXJFbmFibGVkRm9yS2V5Ym9hcmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jcmVzaXplclBvaW50ZXJtb3ZlKHRoaXMuI2ZvY3VzZWRSZXNpemVyTmFtZSwge1xuICAgICAgZGVsdGFYOiB4LFxuICAgICAgZGVsdGFZOiB5LFxuICAgICAgZnJvbUtleWJvYXJkOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgI3N0b3BSZXNpemluZygpIHtcbiAgICB0aGlzLiNpc1Jlc2l6ZXJFbmFibGVkRm9yS2V5Ym9hcmQgPSBmYWxzZTtcbiAgICB0aGlzLiNzZXRSZXNpemVyVGFiSW5kZXgoLTEpO1xuICAgIHRoaXMuI2FkZFJlc2l6ZVRvVW5kb1N0YWNrKCk7XG4gIH1cblxuICBfc3RvcFJlc2l6aW5nV2l0aEtleWJvYXJkKCkge1xuICAgIHRoaXMuI3N0b3BSZXNpemluZygpO1xuICAgIHRoaXMuZGl2LmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IHRoaXMgZWRpdG9yLlxuICAgKi9cbiAgc2VsZWN0KCkge1xuICAgIHRoaXMubWFrZVJlc2l6YWJsZSgpO1xuICAgIHRoaXMuZGl2Py5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRFZGl0b3JcIik7XG4gICAgaWYgKCF0aGlzLl9lZGl0VG9vbGJhcikge1xuICAgICAgdGhpcy5hZGRFZGl0VG9vbGJhcigpLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5kaXY/LmNsYXNzTGlzdC5jb250YWlucyhcInNlbGVjdGVkRWRpdG9yXCIpKSB7XG4gICAgICAgICAgLy8gVGhlIGVkaXRvciBjYW4gaGF2ZSBiZWVuIHVuc2VsZWN0ZWQgd2hpbGUgd2Ugd2VyZSB3YWl0aW5nIGZvciB0aGVcbiAgICAgICAgICAvLyBlZGl0IHRvb2xiYXIgdG8gYmUgY3JlYXRlZCwgaGVuY2Ugd2Ugd2FudCB0byBiZSBzdXJlIHRoYXQgdGhpc1xuICAgICAgICAgIC8vIGVkaXRvciBpcyBzdGlsbCBzZWxlY3RlZC5cbiAgICAgICAgICB0aGlzLl9lZGl0VG9vbGJhcj8uc2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZWRpdFRvb2xiYXI/LnNob3coKTtcbiAgICB0aGlzLiNhbHRUZXh0Py50b2dnbGVBbHRUZXh0QmFkZ2UoZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuc2VsZWN0IHRoaXMgZWRpdG9yLlxuICAgKi9cbiAgdW5zZWxlY3QoKSB7XG4gICAgdGhpcy4jcmVzaXplcnNEaXY/LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgdGhpcy5kaXY/LmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZEVkaXRvclwiKTtcbiAgICBpZiAodGhpcy5kaXY/LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICAvLyBEb24ndCB1c2UgdGhpcy5kaXYuYmx1cigpIGJlY2F1c2Ugd2UgZG9uJ3Qga25vdyB3aGVyZSB0aGUgZm9jdXMgd2lsbFxuICAgICAgLy8gZ28uXG4gICAgICB0aGlzLl91aU1hbmFnZXIuY3VycmVudExheWVyLmRpdi5mb2N1cyh7XG4gICAgICAgIHByZXZlbnRTY3JvbGw6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5fZWRpdFRvb2xiYXI/LmhpZGUoKTtcbiAgICB0aGlzLiNhbHRUZXh0Py50b2dnbGVBbHRUZXh0QmFkZ2UodHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHNvbWUgcGFyYW1ldGVycyB3aGljaCBoYXZlIGJlZW4gY2hhbmdlZCB0aHJvdWdoIHRoZSBVSS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHR5cGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKi9cbiAgdXBkYXRlUGFyYW1zKHR5cGUsIHZhbHVlKSB7fVxuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB1c2VyIGRpc2FibGVzIHRoZSBlZGl0aW5nIG1vZGUgc29tZSBlZGl0b3JzIGNhbiBjaGFuZ2Ugc29tZSBvZlxuICAgKiB0aGVpciBwcm9wZXJ0aWVzLlxuICAgKi9cbiAgZGlzYWJsZUVkaXRpbmcoKSB7fVxuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB1c2VyIGVuYWJsZXMgdGhlIGVkaXRpbmcgbW9kZSBzb21lIGVkaXRvcnMgY2FuIGNoYW5nZSBzb21lIG9mXG4gICAqIHRoZWlyIHByb3BlcnRpZXMuXG4gICAqL1xuICBlbmFibGVFZGl0aW5nKCkge31cblxuICAvKipcbiAgICogVGhlIGVkaXRvciBpcyBhYm91dCB0byBiZSBlZGl0ZWQuXG4gICAqL1xuICBlbnRlckluRWRpdE1vZGUoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnQgfCBudWxsfSB0aGUgZWxlbWVudCByZXF1aXJpbmcgYW4gYWx0IHRleHQuXG4gICAqL1xuICBnZXRFbGVtZW50Rm9yQWx0VGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXY7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkaXYgd2hpY2ggcmVhbGx5IGNvbnRhaW5zIHRoZSBkaXNwbGF5ZWQgY29udGVudC5cbiAgICogQHJldHVybnMge0hUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkfVxuICAgKi9cbiAgZ2V0IGNvbnRlbnREaXYoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGl2O1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRydWUgdGhlbiB0aGUgZWRpdG9yIGlzIGN1cnJlbnRseSBlZGl0ZWQuXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzRWRpdGluZygpIHtcbiAgICByZXR1cm4gdGhpcy4jaXNFZGl0aW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZW4gc2V0IHRvIHRydWUsIGl0IG1lYW5zIHRoYXQgdGhpcyBlZGl0b3IgaXMgY3VycmVudGx5IGVkaXRlZC5cbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0IGlzRWRpdGluZyh2YWx1ZSkge1xuICAgIHRoaXMuI2lzRWRpdGluZyA9IHZhbHVlO1xuICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnBhcmVudC5zZXRTZWxlY3RlZCh0aGlzKTtcbiAgICAgIHRoaXMucGFyZW50LnNldEFjdGl2ZUVkaXRvcih0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wYXJlbnQuc2V0QWN0aXZlRWRpdG9yKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGFzcGVjdCByYXRpbyB0byB1c2Ugd2hlbiByZXNpemluZy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICovXG4gIHNldEFzcGVjdFJhdGlvKHdpZHRoLCBoZWlnaHQpIHtcbiAgICB0aGlzLiNrZWVwQXNwZWN0UmF0aW8gPSB0cnVlO1xuICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gd2lkdGggLyBoZWlnaHQ7XG4gICAgY29uc3QgeyBzdHlsZSB9ID0gdGhpcy5kaXY7XG4gICAgc3R5bGUuYXNwZWN0UmF0aW8gPSBhc3BlY3RSYXRpbztcbiAgICBzdHlsZS5oZWlnaHQgPSBcImF1dG9cIjtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgTUlOX1NJWkUoKSB7XG4gICAgcmV0dXJuIDE2O1xuICB9XG5cbiAgc3RhdGljIGNhbkNyZWF0ZU5ld0VtcHR5RWRpdG9yKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF0YSB0byByZXBvcnQgdG8gdGhlIHRlbGVtZXRyeSB3aGVuIHRoZSBlZGl0b3IgaXMgYWRkZWQuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBnZXQgdGVsZW1ldHJ5SW5pdGlhbERhdGEoKSB7XG4gICAgcmV0dXJuIHsgYWN0aW9uOiBcImFkZGVkXCIgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdGVsZW1ldHJ5IGRhdGEgdG8gdXNlIHdoZW4gc2F2aW5nL3ByaW50aW5nLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9XG4gICAqL1xuICBnZXQgdGVsZW1ldHJ5RmluYWxEYXRhKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgX3JlcG9ydFRlbGVtZXRyeShkYXRhLCBtdXN0V2FpdCA9IGZhbHNlKSB7XG4gICAgaWYgKG11c3RXYWl0KSB7XG4gICAgICB0aGlzLiN0ZWxlbWV0cnlUaW1lb3V0cyB8fD0gbmV3IE1hcCgpO1xuICAgICAgY29uc3QgeyBhY3Rpb24gfSA9IGRhdGE7XG4gICAgICBsZXQgdGltZW91dCA9IHRoaXMuI3RlbGVtZXRyeVRpbWVvdXRzLmdldChhY3Rpb24pO1xuICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgfVxuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLl9yZXBvcnRUZWxlbWV0cnkoZGF0YSk7XG4gICAgICAgIHRoaXMuI3RlbGVtZXRyeVRpbWVvdXRzLmRlbGV0ZShhY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy4jdGVsZW1ldHJ5VGltZW91dHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuI3RlbGVtZXRyeVRpbWVvdXRzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSwgQW5ub3RhdGlvbkVkaXRvci5fdGVsZW1ldHJ5VGltZW91dCk7XG4gICAgICB0aGlzLiN0ZWxlbWV0cnlUaW1lb3V0cy5zZXQoYWN0aW9uLCB0aW1lb3V0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGF0YS50eXBlIHx8PSB0aGlzLmVkaXRvclR5cGU7XG4gICAgdGhpcy5fdWlNYW5hZ2VyLl9ldmVudEJ1cy5kaXNwYXRjaChcInJlcG9ydHRlbGVtZXRyeVwiLCB7XG4gICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIHR5cGU6IFwiZWRpdGluZ1wiLFxuICAgICAgICBkYXRhLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IG9yIGhpZGUgdGhpcyBlZGl0b3IuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IHZpc2libGVcbiAgICovXG4gIHNob3codmlzaWJsZSA9IHRoaXMuX2lzVmlzaWJsZSkge1xuICAgIHRoaXMuZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIiwgIXZpc2libGUpO1xuICAgIHRoaXMuX2lzVmlzaWJsZSA9IHZpc2libGU7XG4gIH1cblxuICBlbmFibGUoKSB7XG4gICAgaWYgKHRoaXMuZGl2KSB7XG4gICAgICB0aGlzLmRpdi50YWJJbmRleCA9IDA7XG4gICAgfVxuICAgIHRoaXMuI2Rpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBkaXNhYmxlKCkge1xuICAgIGlmICh0aGlzLmRpdikge1xuICAgICAgdGhpcy5kaXYudGFiSW5kZXggPSAtMTtcbiAgICB9XG4gICAgdGhpcy4jZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhbiBhbm5vdGF0aW9uIGluIHRoZSBhbm5vdGF0aW9uIGxheWVyLlxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5ub3RhdGlvblxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8bnVsbH1cbiAgICovXG4gIHJlbmRlckFubm90YXRpb25FbGVtZW50KGFubm90YXRpb24pIHtcbiAgICBsZXQgY29udGVudCA9IGFubm90YXRpb24uY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuYW5ub3RhdGlvbkNvbnRlbnRcIik7XG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImFubm90YXRpb25Db250ZW50XCIsIHRoaXMuZWRpdG9yVHlwZSk7XG4gICAgICBhbm5vdGF0aW9uLmNvbnRhaW5lci5wcmVwZW5kKGNvbnRlbnQpO1xuICAgIH0gZWxzZSBpZiAoY29udGVudC5ub2RlTmFtZSA9PT0gXCJDQU5WQVNcIikge1xuICAgICAgY29uc3QgY2FudmFzID0gY29udGVudDtcbiAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKFwiYW5ub3RhdGlvbkNvbnRlbnRcIiwgdGhpcy5lZGl0b3JUeXBlKTtcbiAgICAgIGNhbnZhcy5iZWZvcmUoY29udGVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICByZXNldEFubm90YXRpb25FbGVtZW50KGFubm90YXRpb24pIHtcbiAgICBjb25zdCB7IGZpcnN0Q2hpbGQgfSA9IGFubm90YXRpb24uY29udGFpbmVyO1xuICAgIGlmIChcbiAgICAgIGZpcnN0Q2hpbGQ/Lm5vZGVOYW1lID09PSBcIkRJVlwiICYmXG4gICAgICBmaXJzdENoaWxkLmNsYXNzTGlzdC5jb250YWlucyhcImFubm90YXRpb25Db250ZW50XCIpXG4gICAgKSB7XG4gICAgICBmaXJzdENoaWxkLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gZmFrZSBhbiBlZGl0b3Igd2hpY2ggaGFzIGJlZW4gZGVsZXRlZC5cbmNsYXNzIEZha2VFZGl0b3IgZXh0ZW5kcyBBbm5vdGF0aW9uRWRpdG9yIHtcbiAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgc3VwZXIocGFyYW1zKTtcbiAgICB0aGlzLmFubm90YXRpb25FbGVtZW50SWQgPSBwYXJhbXMuYW5ub3RhdGlvbkVsZW1lbnRJZDtcbiAgICB0aGlzLmRlbGV0ZWQgPSB0cnVlO1xuICB9XG5cbiAgc2VyaWFsaXplKCkge1xuICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZURlbGV0ZWQoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBBbm5vdGF0aW9uRWRpdG9yIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTQgT3BlcmEgU29mdHdhcmUgQVNBXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqXG4gKiBCYXNlZCBvbiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3NtaGFzaGVyL3dpa2kvTXVybXVySGFzaDMuXG4gKiBIYXNoZXMgcm91Z2hseSAxMDAgS0IgcGVyIG1pbGxpc2Vjb25kIG9uIGk3IDMuNCBHSHouXG4gKi9cblxuY29uc3QgU0VFRCA9IDB4YzNkMmUxZjA7XG4vLyBXb3JrYXJvdW5kIGZvciBtaXNzaW5nIG1hdGggcHJlY2lzaW9uIGluIEpTLlxuY29uc3QgTUFTS19ISUdIID0gMHhmZmZmMDAwMDtcbmNvbnN0IE1BU0tfTE9XID0gMHhmZmZmO1xuXG5jbGFzcyBNdXJtdXJIYXNoM182NCB7XG4gIGNvbnN0cnVjdG9yKHNlZWQpIHtcbiAgICB0aGlzLmgxID0gc2VlZCA/IHNlZWQgJiAweGZmZmZmZmZmIDogU0VFRDtcbiAgICB0aGlzLmgyID0gc2VlZCA/IHNlZWQgJiAweGZmZmZmZmZmIDogU0VFRDtcbiAgfVxuXG4gIHVwZGF0ZShpbnB1dCkge1xuICAgIGxldCBkYXRhLCBsZW5ndGg7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KGlucHV0Lmxlbmd0aCAqIDIpO1xuICAgICAgbGVuZ3RoID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgY29uc3QgY29kZSA9IGlucHV0LmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjb2RlIDw9IDB4ZmYpIHtcbiAgICAgICAgICBkYXRhW2xlbmd0aCsrXSA9IGNvZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF0YVtsZW5ndGgrK10gPSBjb2RlID4+PiA4O1xuICAgICAgICAgIGRhdGFbbGVuZ3RoKytdID0gY29kZSAmIDB4ZmY7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhpbnB1dCkpIHtcbiAgICAgIGRhdGEgPSBpbnB1dC5zbGljZSgpO1xuICAgICAgbGVuZ3RoID0gZGF0YS5ieXRlTGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGEgZm9ybWF0LCBtdXN0IGJlIGEgc3RyaW5nIG9yIFR5cGVkQXJyYXkuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGJsb2NrQ291bnRzID0gbGVuZ3RoID4+IDI7XG4gICAgY29uc3QgdGFpbExlbmd0aCA9IGxlbmd0aCAtIGJsb2NrQ291bnRzICogNDtcbiAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVuZGlhbm5lc3MgaGVyZS5cbiAgICBjb25zdCBkYXRhVWludDMyID0gbmV3IFVpbnQzMkFycmF5KGRhdGEuYnVmZmVyLCAwLCBibG9ja0NvdW50cyk7XG4gICAgbGV0IGsxID0gMCxcbiAgICAgIGsyID0gMDtcbiAgICBsZXQgaDEgPSB0aGlzLmgxLFxuICAgICAgaDIgPSB0aGlzLmgyO1xuICAgIGNvbnN0IEMxID0gMHhjYzllMmQ1MSxcbiAgICAgIEMyID0gMHgxYjg3MzU5MztcbiAgICBjb25zdCBDMV9MT1cgPSBDMSAmIE1BU0tfTE9XLFxuICAgICAgQzJfTE9XID0gQzIgJiBNQVNLX0xPVztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxvY2tDb3VudHM7IGkrKykge1xuICAgICAgaWYgKGkgJiAxKSB7XG4gICAgICAgIGsxID0gZGF0YVVpbnQzMltpXTtcbiAgICAgICAgazEgPSAoKGsxICogQzEpICYgTUFTS19ISUdIKSB8ICgoazEgKiBDMV9MT1cpICYgTUFTS19MT1cpO1xuICAgICAgICBrMSA9IChrMSA8PCAxNSkgfCAoazEgPj4+IDE3KTtcbiAgICAgICAgazEgPSAoKGsxICogQzIpICYgTUFTS19ISUdIKSB8ICgoazEgKiBDMl9MT1cpICYgTUFTS19MT1cpO1xuICAgICAgICBoMSBePSBrMTtcbiAgICAgICAgaDEgPSAoaDEgPDwgMTMpIHwgKGgxID4+PiAxOSk7XG4gICAgICAgIGgxID0gaDEgKiA1ICsgMHhlNjU0NmI2NDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGsyID0gZGF0YVVpbnQzMltpXTtcbiAgICAgICAgazIgPSAoKGsyICogQzEpICYgTUFTS19ISUdIKSB8ICgoazIgKiBDMV9MT1cpICYgTUFTS19MT1cpO1xuICAgICAgICBrMiA9IChrMiA8PCAxNSkgfCAoazIgPj4+IDE3KTtcbiAgICAgICAgazIgPSAoKGsyICogQzIpICYgTUFTS19ISUdIKSB8ICgoazIgKiBDMl9MT1cpICYgTUFTS19MT1cpO1xuICAgICAgICBoMiBePSBrMjtcbiAgICAgICAgaDIgPSAoaDIgPDwgMTMpIHwgKGgyID4+PiAxOSk7XG4gICAgICAgIGgyID0gaDIgKiA1ICsgMHhlNjU0NmI2NDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBrMSA9IDA7XG5cbiAgICBzd2l0Y2ggKHRhaWxMZW5ndGgpIHtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgazEgXj0gZGF0YVtibG9ja0NvdW50cyAqIDQgKyAyXSA8PCAxNjtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgMjpcbiAgICAgICAgazEgXj0gZGF0YVtibG9ja0NvdW50cyAqIDQgKyAxXSA8PCA4O1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSAxOlxuICAgICAgICBrMSBePSBkYXRhW2Jsb2NrQ291bnRzICogNF07XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cblxuICAgICAgICBrMSA9ICgoazEgKiBDMSkgJiBNQVNLX0hJR0gpIHwgKChrMSAqIEMxX0xPVykgJiBNQVNLX0xPVyk7XG4gICAgICAgIGsxID0gKGsxIDw8IDE1KSB8IChrMSA+Pj4gMTcpO1xuICAgICAgICBrMSA9ICgoazEgKiBDMikgJiBNQVNLX0hJR0gpIHwgKChrMSAqIEMyX0xPVykgJiBNQVNLX0xPVyk7XG4gICAgICAgIGlmIChibG9ja0NvdW50cyAmIDEpIHtcbiAgICAgICAgICBoMSBePSBrMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoMiBePSBrMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuaDEgPSBoMTtcbiAgICB0aGlzLmgyID0gaDI7XG4gIH1cblxuICBoZXhkaWdlc3QoKSB7XG4gICAgbGV0IGgxID0gdGhpcy5oMSxcbiAgICAgIGgyID0gdGhpcy5oMjtcblxuICAgIGgxIF49IGgyID4+PiAxO1xuICAgIGgxID0gKChoMSAqIDB4ZWQ1NThjY2QpICYgTUFTS19ISUdIKSB8ICgoaDEgKiAweDhjY2QpICYgTUFTS19MT1cpO1xuICAgIGgyID1cbiAgICAgICgoaDIgKiAweGZmNTFhZmQ3KSAmIE1BU0tfSElHSCkgfFxuICAgICAgKCgoKChoMiA8PCAxNikgfCAoaDEgPj4+IDE2KSkgKiAweGFmZDdlZDU1KSAmIE1BU0tfSElHSCkgPj4+IDE2KTtcbiAgICBoMSBePSBoMiA+Pj4gMTtcbiAgICBoMSA9ICgoaDEgKiAweDFhODVlYzUzKSAmIE1BU0tfSElHSCkgfCAoKGgxICogMHhlYzUzKSAmIE1BU0tfTE9XKTtcbiAgICBoMiA9XG4gICAgICAoKGgyICogMHhjNGNlYjlmZSkgJiBNQVNLX0hJR0gpIHxcbiAgICAgICgoKCgoaDIgPDwgMTYpIHwgKGgxID4+PiAxNikpICogMHhiOWZlMWE4NSkgJiBNQVNLX0hJR0gpID4+PiAxNik7XG4gICAgaDEgXj0gaDIgPj4+IDE7XG5cbiAgICByZXR1cm4gKFxuICAgICAgKGgxID4+PiAwKS50b1N0cmluZygxNikucGFkU3RhcnQoOCwgXCIwXCIpICtcbiAgICAgIChoMiA+Pj4gMCkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDgsIFwiMFwiKVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHsgTXVybXVySGFzaDNfNjQgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgb2JqZWN0RnJvbU1hcCwgc2hhZG93LCB1bnJlYWNoYWJsZSB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgQW5ub3RhdGlvbkVkaXRvciB9IGZyb20gXCIuL2VkaXRvci9lZGl0b3IuanNcIjtcbmltcG9ydCB7IE11cm11ckhhc2gzXzY0IH0gZnJvbSBcIi4uL3NoYXJlZC9tdXJtdXJoYXNoMy5qc1wiO1xuXG5jb25zdCBTZXJpYWxpemFibGVFbXB0eSA9IE9iamVjdC5mcmVlemUoe1xuICBtYXA6IG51bGwsXG4gIGhhc2g6IFwiXCIsXG4gIHRyYW5zZmVyOiB1bmRlZmluZWQsXG59KTtcblxuLyoqXG4gKiBLZXkvdmFsdWUgc3RvcmFnZSBmb3IgYW5ub3RhdGlvbiBkYXRhIGluIGZvcm1zLlxuICovXG5jbGFzcyBBbm5vdGF0aW9uU3RvcmFnZSB7XG4gICNtb2RpZmllZCA9IGZhbHNlO1xuXG4gICNtb2RpZmllZElkcyA9IG51bGw7XG5cbiAgI3N0b3JhZ2UgPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gQ2FsbGJhY2tzIHRvIHNpZ25hbCB3aGVuIHRoZSBtb2RpZmljYXRpb24gc3RhdGUgaXMgc2V0IG9yIHJlc2V0LlxuICAgIC8vIFRoaXMgaXMgdXNlZCBieSB0aGUgdmlld2VyIHRvIG9ubHkgYmluZCBvbiBgYmVmb3JldW5sb2FkYCBpZiBmb3Jtc1xuICAgIC8vIGFyZSBhY3R1YWxseSBlZGl0ZWQgdG8gcHJldmVudCBkb2luZyBzbyB1bmNvbmRpdGlvbmFsbHkgc2luY2UgdGhhdFxuICAgIC8vIGNhbiBoYXZlIHVuZGVzaXJhYmxlIGVmZmVjdHMuXG4gICAgdGhpcy5vblNldE1vZGlmaWVkID0gbnVsbDtcbiAgICB0aGlzLm9uUmVzZXRNb2RpZmllZCA9IG51bGw7XG4gICAgdGhpcy5vbkFubm90YXRpb25FZGl0b3IgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgZm9yIGEgZ2l2ZW4ga2V5IGlmIGl0IGV4aXN0cywgb3IgcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0VmFsdWVcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIGdldFZhbHVlKGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLiNzdG9yYWdlLmdldChrZXkpO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGRlZmF1bHRWYWx1ZSwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgZm9yIGEgZ2l2ZW4ga2V5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBnZXRSYXdWYWx1ZShrZXkpIHtcbiAgICByZXR1cm4gdGhpcy4jc3RvcmFnZS5nZXQoa2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSB2YWx1ZSBmcm9tIHRoZSBzdG9yYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqL1xuICByZW1vdmUoa2V5KSB7XG4gICAgdGhpcy4jc3RvcmFnZS5kZWxldGUoa2V5KTtcblxuICAgIGlmICh0aGlzLiNzdG9yYWdlLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMucmVzZXRNb2RpZmllZCgpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5vbkFubm90YXRpb25FZGl0b3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLiNzdG9yYWdlLnZhbHVlcygpKSB7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFubm90YXRpb25FZGl0b3IpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMub25Bbm5vdGF0aW9uRWRpdG9yKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIGZvciBhIGdpdmVuIGtleVxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICAgKi9cbiAgc2V0VmFsdWUoa2V5LCB2YWx1ZSkge1xuICAgIGNvbnN0IG9iaiA9IHRoaXMuI3N0b3JhZ2UuZ2V0KGtleSk7XG4gICAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XG4gICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGNvbnN0IFtlbnRyeSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKG9ialtlbnRyeV0gIT09IHZhbCkge1xuICAgICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICBvYmpbZW50cnldID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuI3N0b3JhZ2Uuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICBpZiAobW9kaWZpZWQpIHtcbiAgICAgIHRoaXMuI3NldE1vZGlmaWVkKCk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdmFsdWUgaW5zdGFuY2VvZiBBbm5vdGF0aW9uRWRpdG9yICYmXG4gICAgICB0eXBlb2YgdGhpcy5vbkFubm90YXRpb25FZGl0b3IgPT09IFwiZnVuY3Rpb25cIlxuICAgICkge1xuICAgICAgdGhpcy5vbkFubm90YXRpb25FZGl0b3IodmFsdWUuY29uc3RydWN0b3IuX3R5cGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgc3RvcmFnZSBjb250YWlucyB0aGUgZ2l2ZW4ga2V5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaGFzKGtleSkge1xuICAgIHJldHVybiB0aGlzLiNzdG9yYWdlLmhhcyhrZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtPYmplY3QgfCBudWxsfVxuICAgKi9cbiAgZ2V0QWxsKCkge1xuICAgIHJldHVybiB0aGlzLiNzdG9yYWdlLnNpemUgPiAwID8gb2JqZWN0RnJvbU1hcCh0aGlzLiNzdG9yYWdlKSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgKi9cbiAgc2V0QWxsKG9iaikge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhvYmopKSB7XG4gICAgICB0aGlzLnNldFZhbHVlKGtleSwgdmFsKTtcbiAgICB9XG4gIH1cblxuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jc3RvcmFnZS5zaXplO1xuICB9XG5cbiAgI3NldE1vZGlmaWVkKCkge1xuICAgIGlmICghdGhpcy4jbW9kaWZpZWQpIHtcbiAgICAgIHRoaXMuI21vZGlmaWVkID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vblNldE1vZGlmaWVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5vblNldE1vZGlmaWVkKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVzZXRNb2RpZmllZCgpIHtcbiAgICBpZiAodGhpcy4jbW9kaWZpZWQpIHtcbiAgICAgIHRoaXMuI21vZGlmaWVkID0gZmFsc2U7XG4gICAgICBpZiAodHlwZW9mIHRoaXMub25SZXNldE1vZGlmaWVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5vblJlc2V0TW9kaWZpZWQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1ByaW50QW5ub3RhdGlvblN0b3JhZ2V9XG4gICAqL1xuICBnZXQgcHJpbnQoKSB7XG4gICAgcmV0dXJuIG5ldyBQcmludEFubm90YXRpb25TdG9yYWdlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBMRUFTRSBOT1RFOiBPbmx5IGludGVuZGVkIGZvciB1c2FnZSB3aXRoaW4gdGhlIEFQSSBpdHNlbGYuXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGdldCBzZXJpYWxpemFibGUoKSB7XG4gICAgaWYgKHRoaXMuI3N0b3JhZ2Uuc2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIFNlcmlhbGl6YWJsZUVtcHR5O1xuICAgIH1cbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCksXG4gICAgICBoYXNoID0gbmV3IE11cm11ckhhc2gzXzY0KCksXG4gICAgICB0cmFuc2ZlciA9IFtdO1xuICAgIGNvbnN0IGNvbnRleHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGxldCBoYXNCaXRtYXAgPSBmYWxzZTtcblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiB0aGlzLiNzdG9yYWdlKSB7XG4gICAgICBjb25zdCBzZXJpYWxpemVkID1cbiAgICAgICAgdmFsIGluc3RhbmNlb2YgQW5ub3RhdGlvbkVkaXRvclxuICAgICAgICAgID8gdmFsLnNlcmlhbGl6ZSgvKiBpc0ZvckNvcHlpbmcgPSAqLyBmYWxzZSwgY29udGV4dClcbiAgICAgICAgICA6IHZhbDtcbiAgICAgIGlmIChzZXJpYWxpemVkKSB7XG4gICAgICAgIG1hcC5zZXQoa2V5LCBzZXJpYWxpemVkKTtcblxuICAgICAgICBoYXNoLnVwZGF0ZShgJHtrZXl9OiR7SlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplZCl9YCk7XG4gICAgICAgIGhhc0JpdG1hcCB8fD0gISFzZXJpYWxpemVkLmJpdG1hcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaGFzQml0bWFwKSB7XG4gICAgICAvLyBXZSBtdXN0IHRyYW5zZmVyIHRoZSBiaXRtYXAgZGF0YSBzZXBhcmF0ZWx5LCBzaW5jZSBpdCBjYW4gYmUgY2hhbmdlZFxuICAgICAgLy8gZHVyaW5nIHNlcmlhbGl6YXRpb24gd2l0aCBTVkcgaW1hZ2VzLlxuICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBtYXAudmFsdWVzKCkpIHtcbiAgICAgICAgaWYgKHZhbHVlLmJpdG1hcCkge1xuICAgICAgICAgIHRyYW5zZmVyLnB1c2godmFsdWUuYml0bWFwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXAuc2l6ZSA+IDBcbiAgICAgID8geyBtYXAsIGhhc2g6IGhhc2guaGV4ZGlnZXN0KCksIHRyYW5zZmVyIH1cbiAgICAgIDogU2VyaWFsaXphYmxlRW1wdHk7XG4gIH1cblxuICBnZXQgZWRpdG9yU3RhdHMoKSB7XG4gICAgbGV0IHN0YXRzID0gbnVsbDtcbiAgICBjb25zdCB0eXBlVG9FZGl0b3IgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLiNzdG9yYWdlLnZhbHVlcygpKSB7XG4gICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIEFubm90YXRpb25FZGl0b3IpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZWRpdG9yU3RhdHMgPSB2YWx1ZS50ZWxlbWV0cnlGaW5hbERhdGE7XG4gICAgICBpZiAoIWVkaXRvclN0YXRzKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgeyB0eXBlIH0gPSBlZGl0b3JTdGF0cztcbiAgICAgIGlmICghdHlwZVRvRWRpdG9yLmhhcyh0eXBlKSkge1xuICAgICAgICB0eXBlVG9FZGl0b3Iuc2V0KHR5cGUsIE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSkuY29uc3RydWN0b3IpO1xuICAgICAgfVxuICAgICAgc3RhdHMgfHw9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBjb25zdCBtYXAgPSAoc3RhdHNbdHlwZV0gfHw9IG5ldyBNYXAoKSk7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMoZWRpdG9yU3RhdHMpKSB7XG4gICAgICAgIGlmIChrZXkgPT09IFwidHlwZVwiKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNvdW50ZXJzID0gbWFwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWNvdW50ZXJzKSB7XG4gICAgICAgICAgY291bnRlcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgbWFwLnNldChrZXksIGNvdW50ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb3VudCA9IGNvdW50ZXJzLmdldCh2YWwpID8/IDA7XG4gICAgICAgIGNvdW50ZXJzLnNldCh2YWwsIGNvdW50ICsgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgW3R5cGUsIGVkaXRvcl0gb2YgdHlwZVRvRWRpdG9yKSB7XG4gICAgICBzdGF0c1t0eXBlXSA9IGVkaXRvci5jb21wdXRlVGVsZW1ldHJ5RmluYWxEYXRhKHN0YXRzW3R5cGVdKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG5cbiAgcmVzZXRNb2RpZmllZElkcygpIHtcbiAgICB0aGlzLiNtb2RpZmllZElkcyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3tpZHM6IFNldDxzdHJpbmc+LCBoYXNoOiBzdHJpbmd9fVxuICAgKi9cbiAgZ2V0IG1vZGlmaWVkSWRzKCkge1xuICAgIGlmICh0aGlzLiNtb2RpZmllZElkcykge1xuICAgICAgcmV0dXJuIHRoaXMuI21vZGlmaWVkSWRzO1xuICAgIH1cbiAgICBjb25zdCBpZHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuI3N0b3JhZ2UudmFsdWVzKCkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgISh2YWx1ZSBpbnN0YW5jZW9mIEFubm90YXRpb25FZGl0b3IpIHx8XG4gICAgICAgICF2YWx1ZS5hbm5vdGF0aW9uRWxlbWVudElkIHx8XG4gICAgICAgICF2YWx1ZS5zZXJpYWxpemUoKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWRzLnB1c2godmFsdWUuYW5ub3RhdGlvbkVsZW1lbnRJZCk7XG4gICAgfVxuICAgIHJldHVybiAodGhpcy4jbW9kaWZpZWRJZHMgPSB7XG4gICAgICBpZHM6IG5ldyBTZXQoaWRzKSxcbiAgICAgIGhhc2g6IGlkcy5qb2luKFwiLFwiKSxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEEgc3BlY2lhbCBgQW5ub3RhdGlvblN0b3JhZ2VgIGZvciB1c2UgZHVyaW5nIHByaW50aW5nLCB3aGVyZSB0aGUgc2VyaWFsaXphYmxlXG4gKiBkYXRhIGlzICpmcm96ZW4qIHVwb24gaW5pdGlhbGl6YXRpb24sIHRvIHByZXZlbnQgc2NyaXB0aW5nIGZyb20gbW9kaWZ5aW5nIGl0c1xuICogY29udGVudHMuIChOZWNlc3Nhcnkgc2luY2UgcHJpbnRpbmcgaXMgdHJpZ2dlcmVkIHN5bmNocm9ub3VzbHkgaW4gYnJvd3NlcnMuKVxuICovXG5jbGFzcyBQcmludEFubm90YXRpb25TdG9yYWdlIGV4dGVuZHMgQW5ub3RhdGlvblN0b3JhZ2Uge1xuICAjc2VyaWFsaXphYmxlO1xuXG4gIGNvbnN0cnVjdG9yKHBhcmVudCkge1xuICAgIHN1cGVyKCk7XG4gICAgY29uc3QgeyBtYXAsIGhhc2gsIHRyYW5zZmVyIH0gPSBwYXJlbnQuc2VyaWFsaXphYmxlO1xuICAgIC8vIENyZWF0ZSBhICpjb3B5KiBvZiB0aGUgZGF0YSwgc2luY2UgT2JqZWN0cyBhcmUgcGFzc2VkIGJ5IHJlZmVyZW5jZSBpbiBKUy5cbiAgICBjb25zdCBjbG9uZSA9IHN0cnVjdHVyZWRDbG9uZShtYXAsIHRyYW5zZmVyID8geyB0cmFuc2ZlciB9IDogbnVsbCk7XG5cbiAgICB0aGlzLiNzZXJpYWxpemFibGUgPSB7IG1hcDogY2xvbmUsIGhhc2gsIHRyYW5zZmVyIH07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1ByaW50QW5ub3RhdGlvblN0b3JhZ2V9XG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2V0dGVyLXJldHVyblxuICBnZXQgcHJpbnQoKSB7XG4gICAgdW5yZWFjaGFibGUoXCJTaG91bGQgbm90IGNhbGwgUHJpbnRBbm5vdGF0aW9uU3RvcmFnZS5wcmludFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQTEVBU0UgTk9URTogT25seSBpbnRlbmRlZCBmb3IgdXNhZ2Ugd2l0aGluIHRoZSBBUEkgaXRzZWxmLlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBnZXQgc2VyaWFsaXphYmxlKCkge1xuICAgIHJldHVybiB0aGlzLiNzZXJpYWxpemFibGU7XG4gIH1cblxuICBnZXQgbW9kaWZpZWRJZHMoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyh0aGlzLCBcIm1vZGlmaWVkSWRzXCIsIHtcbiAgICAgIGlkczogbmV3IFNldCgpLFxuICAgICAgaGFzaDogXCJcIixcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgeyBBbm5vdGF0aW9uU3RvcmFnZSwgUHJpbnRBbm5vdGF0aW9uU3RvcmFnZSwgU2VyaWFsaXphYmxlRW1wdHkgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgYXNzZXJ0LFxuICBGZWF0dXJlVGVzdCxcbiAgaXNOb2RlSlMsXG4gIHNoYWRvdyxcbiAgc3RyaW5nMzIsXG4gIHRvQmFzZTY0VXRpbCxcbiAgdW5yZWFjaGFibGUsXG4gIHdhcm4sXG59IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG5jbGFzcyBGb250TG9hZGVyIHtcbiAgI3N5c3RlbUZvbnRzID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBvd25lckRvY3VtZW50ID0gZ2xvYmFsVGhpcy5kb2N1bWVudCxcbiAgICBzdHlsZUVsZW1lbnQgPSBudWxsLCAvLyBGb3IgdGVzdGluZyBvbmx5LlxuICB9KSB7XG4gICAgdGhpcy5fZG9jdW1lbnQgPSBvd25lckRvY3VtZW50O1xuXG4gICAgdGhpcy5uYXRpdmVGb250RmFjZXMgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5zdHlsZUVsZW1lbnQgPVxuICAgICAgdHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpXG4gICAgICAgID8gc3R5bGVFbGVtZW50XG4gICAgICAgIDogbnVsbDtcblxuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgIVBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gICAgICB0aGlzLmxvYWRpbmdSZXF1ZXN0cyA9IFtdO1xuICAgICAgdGhpcy5sb2FkVGVzdEZvbnRJZCA9IDA7XG4gICAgfVxuICB9XG5cbiAgYWRkTmF0aXZlRm9udEZhY2UobmF0aXZlRm9udEZhY2UpIHtcbiAgICB0aGlzLm5hdGl2ZUZvbnRGYWNlcy5hZGQobmF0aXZlRm9udEZhY2UpO1xuICAgIHRoaXMuX2RvY3VtZW50LmZvbnRzLmFkZChuYXRpdmVGb250RmFjZSk7XG4gIH1cblxuICByZW1vdmVOYXRpdmVGb250RmFjZShuYXRpdmVGb250RmFjZSkge1xuICAgIHRoaXMubmF0aXZlRm9udEZhY2VzLmRlbGV0ZShuYXRpdmVGb250RmFjZSk7XG4gICAgdGhpcy5fZG9jdW1lbnQuZm9udHMuZGVsZXRlKG5hdGl2ZUZvbnRGYWNlKTtcbiAgfVxuXG4gIGluc2VydFJ1bGUocnVsZSkge1xuICAgIGlmICghdGhpcy5zdHlsZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgdGhpcy5fZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG4gICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF1cbiAgICAgICAgLmFwcGVuZCh0aGlzLnN0eWxlRWxlbWVudCk7XG4gICAgfVxuICAgIGNvbnN0IHN0eWxlU2hlZXQgPSB0aGlzLnN0eWxlRWxlbWVudC5zaGVldDtcbiAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUocnVsZSwgc3R5bGVTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgZm9yIChjb25zdCBuYXRpdmVGb250RmFjZSBvZiB0aGlzLm5hdGl2ZUZvbnRGYWNlcykge1xuICAgICAgdGhpcy5fZG9jdW1lbnQuZm9udHMuZGVsZXRlKG5hdGl2ZUZvbnRGYWNlKTtcbiAgICB9XG4gICAgdGhpcy5uYXRpdmVGb250RmFjZXMuY2xlYXIoKTtcbiAgICB0aGlzLiNzeXN0ZW1Gb250cy5jbGVhcigpO1xuXG4gICAgaWYgKHRoaXMuc3R5bGVFbGVtZW50KSB7XG4gICAgICAvLyBOb3RlOiBDaGlsZE5vZGUucmVtb3ZlIGRvZXNuJ3QgdGhyb3cgaWYgdGhlIHBhcmVudE5vZGUgaXMgdW5kZWZpbmVkLlxuICAgICAgdGhpcy5zdHlsZUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB0aGlzLnN0eWxlRWxlbWVudCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFN5c3RlbUZvbnQoe1xuICAgIHN5c3RlbUZvbnRJbmZvOiBpbmZvLFxuICAgIGRpc2FibGVGb250RmFjZSxcbiAgICBfaW5zcGVjdEZvbnQsXG4gIH0pIHtcbiAgICBpZiAoIWluZm8gfHwgdGhpcy4jc3lzdGVtRm9udHMuaGFzKGluZm8ubG9hZGVkTmFtZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzZXJ0KFxuICAgICAgIWRpc2FibGVGb250RmFjZSxcbiAgICAgIFwibG9hZFN5c3RlbUZvbnQgc2hvdWxkbid0IGJlIGNhbGxlZCB3aGVuIGBkaXNhYmxlRm9udEZhY2VgIGlzIHNldC5cIlxuICAgICk7XG5cbiAgICBpZiAodGhpcy5pc0ZvbnRMb2FkaW5nQVBJU3VwcG9ydGVkKSB7XG4gICAgICBjb25zdCB7IGxvYWRlZE5hbWUsIHNyYywgc3R5bGUgfSA9IGluZm87XG4gICAgICBjb25zdCBmb250RmFjZSA9IG5ldyBGb250RmFjZShsb2FkZWROYW1lLCBzcmMsIHN0eWxlKTtcbiAgICAgIHRoaXMuYWRkTmF0aXZlRm9udEZhY2UoZm9udEZhY2UpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZm9udEZhY2UubG9hZCgpO1xuICAgICAgICB0aGlzLiNzeXN0ZW1Gb250cy5hZGQobG9hZGVkTmFtZSk7XG4gICAgICAgIF9pbnNwZWN0Rm9udD8uKGluZm8pO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgYENhbm5vdCBsb2FkIHN5c3RlbSBmb250OiAke2luZm8uYmFzZUZvbnROYW1lfSwgaW5zdGFsbGluZyBpdCBjb3VsZCBoZWxwIHRvIGltcHJvdmUgUERGIHJlbmRlcmluZy5gXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVOYXRpdmVGb250RmFjZShmb250RmFjZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdW5yZWFjaGFibGUoXG4gICAgICBcIk5vdCBpbXBsZW1lbnRlZDogbG9hZFN5c3RlbUZvbnQgd2l0aG91dCB0aGUgRm9udCBMb2FkaW5nIEFQSS5cIlxuICAgICk7XG4gIH1cblxuICBhc3luYyBiaW5kKGZvbnQpIHtcbiAgICAvLyBBZGQgdGhlIGZvbnQgdG8gdGhlIERPTSBvbmx5IG9uY2U7IHNraXAgaWYgdGhlIGZvbnQgaXMgYWxyZWFkeSBsb2FkZWQuXG4gICAgaWYgKGZvbnQuYXR0YWNoZWQgfHwgKGZvbnQubWlzc2luZ0ZpbGUgJiYgIWZvbnQuc3lzdGVtRm9udEluZm8pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvbnQuYXR0YWNoZWQgPSB0cnVlO1xuXG4gICAgaWYgKGZvbnQuc3lzdGVtRm9udEluZm8pIHtcbiAgICAgIGF3YWl0IHRoaXMubG9hZFN5c3RlbUZvbnQoZm9udCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNGb250TG9hZGluZ0FQSVN1cHBvcnRlZCkge1xuICAgICAgY29uc3QgbmF0aXZlRm9udEZhY2UgPSBmb250LmNyZWF0ZU5hdGl2ZUZvbnRGYWNlKCk7XG4gICAgICBpZiAobmF0aXZlRm9udEZhY2UpIHtcbiAgICAgICAgdGhpcy5hZGROYXRpdmVGb250RmFjZShuYXRpdmVGb250RmFjZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgbmF0aXZlRm9udEZhY2UubG9hZGVkO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgIHdhcm4oYEZhaWxlZCB0byBsb2FkIGZvbnQgJyR7bmF0aXZlRm9udEZhY2UuZmFtaWx5fSc6ICcke2V4fScuYCk7XG5cbiAgICAgICAgICAvLyBXaGVuIGZvbnQgbG9hZGluZyBmYWlsZWQsIGZhbGwgYmFjayB0byB0aGUgYnVpbHQtaW4gZm9udCByZW5kZXJlci5cbiAgICAgICAgICBmb250LmRpc2FibGVGb250RmFjZSA9IHRydWU7XG4gICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjsgLy8gVGhlIGZvbnQgd2FzLCBhc3luY2hyb25vdXNseSwgbG9hZGVkLlxuICAgIH1cblxuICAgIC8vICF0aGlzLmlzRm9udExvYWRpbmdBUElTdXBwb3J0ZWRcbiAgICBjb25zdCBydWxlID0gZm9udC5jcmVhdGVGb250RmFjZVJ1bGUoKTtcbiAgICBpZiAocnVsZSkge1xuICAgICAgdGhpcy5pbnNlcnRSdWxlKHJ1bGUpO1xuXG4gICAgICBpZiAodGhpcy5pc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZCkge1xuICAgICAgICByZXR1cm47IC8vIFRoZSBmb250IHdhcywgc3luY2hyb25vdXNseSwgbG9hZGVkLlxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQ6IGFzeW5jIGZvbnQgbG9hZGluZ1wiKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5fcXVldWVMb2FkaW5nQ2FsbGJhY2socmVzb2x2ZSk7XG4gICAgICAgIHRoaXMuX3ByZXBhcmVGb250TG9hZEV2ZW50KGZvbnQsIHJlcXVlc3QpO1xuICAgICAgfSk7XG4gICAgICAvLyBUaGUgZm9udCB3YXMsIGFzeW5jaHJvbm91c2x5LCBsb2FkZWQuXG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzRm9udExvYWRpbmdBUElTdXBwb3J0ZWQoKSB7XG4gICAgY29uc3QgaGFzRm9udHMgPSAhIXRoaXMuX2RvY3VtZW50Py5mb250cztcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgICByZXR1cm4gc2hhZG93KFxuICAgICAgICB0aGlzLFxuICAgICAgICBcImlzRm9udExvYWRpbmdBUElTdXBwb3J0ZWRcIixcbiAgICAgICAgaGFzRm9udHMgJiYgIXRoaXMuc3R5bGVFbGVtZW50XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiaXNGb250TG9hZGluZ0FQSVN1cHBvcnRlZFwiLCBoYXNGb250cyk7XG4gIH1cblxuICBnZXQgaXNTeW5jRm9udExvYWRpbmdTdXBwb3J0ZWQoKSB7XG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkge1xuICAgICAgcmV0dXJuIHNoYWRvdyh0aGlzLCBcImlzU3luY0ZvbnRMb2FkaW5nU3VwcG9ydGVkXCIsIHRydWUpO1xuICAgIH1cblxuICAgIC8vIE5vZGUuanMgLSB3ZSBjYW4gcHJldGVuZCB0aGF0IHN5bmMgZm9udCBsb2FkaW5nIGlzIHN1cHBvcnRlZC5cbiAgICAvLyBGaXJlZm94LCBmcm9tIHZlcnNpb24gMTQsIHN1cHBvcnRzIHN5bmNocm9ub3VzIGZvbnQgbG9hZGluZy5cbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiaXNTeW5jRm9udExvYWRpbmdTdXBwb3J0ZWRcIixcbiAgICAgICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgIVBERkpTRGV2LnRlc3QoXCJDSFJPTUVcIikpICYmXG4gICAgICAgIChpc05vZGVKUyB8fCBGZWF0dXJlVGVzdC5wbGF0Zm9ybS5pc0ZpcmVmb3gpXG4gICAgKTtcbiAgfVxuXG4gIF9xdWV1ZUxvYWRpbmdDYWxsYmFjayhjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZDogX3F1ZXVlTG9hZGluZ0NhbGxiYWNrXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlUmVxdWVzdCgpIHtcbiAgICAgIGFzc2VydCghcmVxdWVzdC5kb25lLCBcImNvbXBsZXRlUmVxdWVzdCgpIGNhbm5vdCBiZSBjYWxsZWQgdHdpY2UuXCIpO1xuICAgICAgcmVxdWVzdC5kb25lID0gdHJ1ZTtcblxuICAgICAgLy8gU2VuZGluZyBhbGwgY29tcGxldGVkIHJlcXVlc3RzIGluIG9yZGVyIG9mIGhvdyB0aGV5IHdlcmUgcXVldWVkLlxuICAgICAgd2hpbGUgKGxvYWRpbmdSZXF1ZXN0cy5sZW5ndGggPiAwICYmIGxvYWRpbmdSZXF1ZXN0c1swXS5kb25lKSB7XG4gICAgICAgIGNvbnN0IG90aGVyUmVxdWVzdCA9IGxvYWRpbmdSZXF1ZXN0cy5zaGlmdCgpO1xuICAgICAgICBzZXRUaW1lb3V0KG90aGVyUmVxdWVzdC5jYWxsYmFjaywgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgeyBsb2FkaW5nUmVxdWVzdHMgfSA9IHRoaXM7XG4gICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgY29tcGxldGU6IGNvbXBsZXRlUmVxdWVzdCxcbiAgICAgIGNhbGxiYWNrLFxuICAgIH07XG4gICAgbG9hZGluZ1JlcXVlc3RzLnB1c2gocmVxdWVzdCk7XG4gICAgcmV0dXJuIHJlcXVlc3Q7XG4gIH1cblxuICBnZXQgX2xvYWRUZXN0Rm9udCgpIHtcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQ6IF9sb2FkVGVzdEZvbnRcIik7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBpcyBhIENGRiBmb250IHdpdGggMSBnbHlwaCBmb3IgJy4nIHRoYXQgZmlsbHMgaXRzIGVudGlyZSB3aWR0aFxuICAgIC8vIGFuZCBoZWlnaHQuXG4gICAgY29uc3QgdGVzdEZvbnQgPSBhdG9iKFxuICAgICAgXCJUMVJVVHdBTEFJQUFBd0F3UTBaR0lESHRaZzRBQUFPWUFBQUFnVVpHVkUxbGt6WndBQUFFSEFBQUFCeEhSRVZHQUJRQVwiICtcbiAgICAgICAgXCJGUUFBQkRnQUFBQWVUMU12TWxZTll3a0FBQUVnQUFBQVlHTnRZWEFCRFFMVUFBQUNOQUFBQVVKb1pXRmsveFZGRFFBQVwiICtcbiAgICAgICAgXCJBTHdBQUFBMmFHaGxZUWRrQStvQUFBRDBBQUFBSkdodGRIZ0Q2QUFBQUFBRVdBQUFBQVp0WVhod0FBSlFBQUFBQVJnQVwiICtcbiAgICAgICAgXCJBQUFHYm1GdFpWam1kSDRBQUFHQUFBQUFzWEJ2YzNUL2hnQXpBQUFEZUFBQUFDQUFBUUFBQUFFQUFMWlJGc1JmRHp6MVwiICtcbiAgICAgICAgXCJBQXNENkFBQUFBRE9CT1RMQUFBQUFNNEtIRHdBQUFBQUErZ0RJUUFBQUFnQUFnQUFBQUFBQUFBQkFBQURJUUFBQUZvRFwiICtcbiAgICAgICAgXCI2QUFBQUFBRDZBQUJBQUFBQUFBQUFBQUFBQUFBQUFBQUFRQUFVQUFBQWdBQUFBUUQ2QUgwQUFVQUFBS0tBcndBQUFDTVwiICtcbiAgICAgICAgXCJBb29DdkFBQUFlQUFNUUVDQUFBQ0FBWUpBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUZCbVJXUUF3QUF1QUM0RFwiICtcbiAgICAgICAgXCJJUDg0QUZvRElRQUFBQUFBQVFBQUFBQUFBQUFBQUNBQUlBQUJBQUFBRGdDdUFBRUFBQUFBQUFBQUFRQUFBQUVBQUFBQVwiICtcbiAgICAgICAgXCJBQUVBQVFBQUFBRUFBQUFBQUFJQUFRQUFBQUVBQUFBQUFBTUFBUUFBQUFFQUFBQUFBQVFBQVFBQUFBRUFBQUFBQUFVQVwiICtcbiAgICAgICAgXCJBUUFBQUFFQUFBQUFBQVlBQVFBQUFBTUFBUVFKQUFBQUFnQUJBQU1BQVFRSkFBRUFBZ0FCQUFNQUFRUUpBQUlBQWdBQlwiICtcbiAgICAgICAgXCJBQU1BQVFRSkFBTUFBZ0FCQUFNQUFRUUpBQVFBQWdBQkFBTUFBUVFKQUFVQUFnQUJBQU1BQVFRSkFBWUFBZ0FCV0FCWVwiICtcbiAgICAgICAgXCJBQUFBQUFBQUF3QUFBQU1BQUFBY0FBRUFBQUFBQUR3QUF3QUJBQUFBSEFBRUFDQUFBQUFFQUFRQUFRQUFBQzcvL3dBQVwiICtcbiAgICAgICAgXCJBQzcvLy8vVEFBRUFBQUFBQUFBQkJnQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVwiICtcbiAgICAgICAgXCJBQUFBQUFBQUFBQUFBQUFBQUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVwiICtcbiAgICAgICAgXCJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVwiICtcbiAgICAgICAgXCJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVwiICtcbiAgICAgICAgXCJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVwiICtcbiAgICAgICAgXCJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFNQUFBQUFBQUQvZ3dBeUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQVwiICtcbiAgICAgICAgXCJBQUFCQUFRRUFBRUJBUUpZQUFFQkFTSDREd0Q0R3dIRUF2Z2NBL2dYQkl3TUFZdUwrbno1dFFYa0Q1ajNDQkxuRVFBQ1wiICtcbiAgICAgICAgXCJBUUVCSVZoWVdGaFlXRmhZV0ZoWVdGaFlXRmhZV0ZoWVdGaFlXRmhZV0ZoWVdGaFlBQUFCQVFBQUR3QUNBUUVFRS90M1wiICtcbiAgICAgICAgXCJEb3Y2ZkFINmZBVCtmUHA4K253SERvc01Ddm0xQ3ZtMURBejZmQlFBQUFBQUFBQUJBQUFBQU1tSmJ6RUFBQUFBemdUalwiICtcbiAgICAgICAgXCJGUUFBQUFET0JPUXBBQUVBQUFBQUFBQUFEQUFVQUFRQUFBQUJBQUFBQWdBQkFBQUFBQUFBQUFBRDZBQUFBQUFBQUE9PVwiXG4gICAgKTtcbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiX2xvYWRUZXN0Rm9udFwiLCB0ZXN0Rm9udCk7XG4gIH1cblxuICBfcHJlcGFyZUZvbnRMb2FkRXZlbnQoZm9udCwgcmVxdWVzdCkge1xuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZDogX3ByZXBhcmVGb250TG9hZEV2ZW50XCIpO1xuICAgIH1cblxuICAgIC8qKiBIYWNrIGJlZ2luICovXG4gICAgLy8gVGhlcmUncyBjdXJyZW50bHkgbm8gZXZlbnQgd2hlbiBhIGZvbnQgaGFzIGZpbmlzaGVkIGRvd25sb2FkaW5nIHNvIHRoZVxuICAgIC8vIGZvbGxvd2luZyBjb2RlIGlzIGEgZGlydHkgaGFjayB0byAnZ3Vlc3MnIHdoZW4gYSBmb250IGlzIHJlYWR5LlxuICAgIC8vIEl0J3MgYXNzdW1lZCBmb250cyBhcmUgbG9hZGVkIGluIG9yZGVyLCBzbyBhZGQgYSBrbm93biB0ZXN0IGZvbnQgYWZ0ZXJcbiAgICAvLyB0aGUgZGVzaXJlZCBmb250cyBhbmQgdGhlbiB0ZXN0IGZvciB0aGUgbG9hZGluZyBvZiB0aGF0IHRlc3QgZm9udC5cblxuICAgIGZ1bmN0aW9uIGludDMyKGRhdGEsIG9mZnNldCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgKGRhdGEuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XG4gICAgICAgIChkYXRhLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcbiAgICAgICAgKGRhdGEuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XG4gICAgICAgIChkYXRhLmNoYXJDb2RlQXQob2Zmc2V0ICsgMykgJiAweGZmKVxuICAgICAgKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3BsaWNlU3RyaW5nKHMsIG9mZnNldCwgcmVtb3ZlLCBpbnNlcnQpIHtcbiAgICAgIGNvbnN0IGNodW5rMSA9IHMuc3Vic3RyaW5nKDAsIG9mZnNldCk7XG4gICAgICBjb25zdCBjaHVuazIgPSBzLnN1YnN0cmluZyhvZmZzZXQgKyByZW1vdmUpO1xuICAgICAgcmV0dXJuIGNodW5rMSArIGluc2VydCArIGNodW5rMjtcbiAgICB9XG4gICAgbGV0IGksIGlpO1xuXG4gICAgLy8gVGhlIHRlbXBvcmFyeSBjYW52YXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgZm9udHMgYXJlIGxvYWRlZC5cbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGNhbnZhcy53aWR0aCA9IDE7XG4gICAgY2FudmFzLmhlaWdodCA9IDE7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIGxldCBjYWxsZWQgPSAwO1xuICAgIGZ1bmN0aW9uIGlzRm9udFJlYWR5KG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAvLyBXaXRoIHNldFRpbWVvdXQgY2xhbXBpbmcgdGhpcyBnaXZlcyB0aGUgZm9udCB+MTAwbXMgdG8gbG9hZC5cbiAgICAgIGlmICgrK2NhbGxlZCA+IDMwKSB7XG4gICAgICAgIHdhcm4oXCJMb2FkIHRlc3QgZm9udCBuZXZlciBsb2FkZWQuXCIpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjdHguZm9udCA9IFwiMzBweCBcIiArIG5hbWU7XG4gICAgICBjdHguZmlsbFRleHQoXCIuXCIsIDAsIDIwKTtcbiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMSwgMSk7XG4gICAgICBpZiAoaW1hZ2VEYXRhLmRhdGFbM10gPiAwKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNldFRpbWVvdXQoaXNGb250UmVhZHkuYmluZChudWxsLCBuYW1lLCBjYWxsYmFjaykpO1xuICAgIH1cblxuICAgIGNvbnN0IGxvYWRUZXN0Rm9udElkID0gYGx0JHtEYXRlLm5vdygpfSR7dGhpcy5sb2FkVGVzdEZvbnRJZCsrfWA7XG4gICAgLy8gQ2hyb21pdW0gc2VlbXMgdG8gY2FjaGUgZm9udHMgYmFzZWQgb24gYSBoYXNoIG9mIHRoZSBhY3R1YWwgZm9udCBkYXRhLFxuICAgIC8vIHNvIHRoZSBmb250IG11c3QgYmUgbW9kaWZpZWQgZm9yIGVhY2ggbG9hZCB0ZXN0IGVsc2UgaXQgd2lsbCBhcHBlYXIgdG9cbiAgICAvLyBiZSBsb2FkZWQgYWxyZWFkeS5cbiAgICAvLyBUT0RPOiBUaGlzIGNvdWxkIG1heWJlIGJlIG1hZGUgZmFzdGVyIGJ5IGF2b2lkaW5nIHRoZSBidG9hIG9mIHRoZSBmdWxsXG4gICAgLy8gZm9udCBieSBzcGxpdHRpbmcgaXQgaW4gY2h1bmtzIGJlZm9yZSBoYW5kIGFuZCBwYWRkaW5nIHRoZSBmb250IGlkLlxuICAgIGxldCBkYXRhID0gdGhpcy5fbG9hZFRlc3RGb250O1xuICAgIGNvbnN0IENPTU1FTlRfT0ZGU0VUID0gOTc2OyAvLyBoYXMgdG8gYmUgb24gNCBieXRlIGJvdW5kYXJ5IChmb3IgY2hlY2tzdW0pXG4gICAgZGF0YSA9IHNwbGljZVN0cmluZyhcbiAgICAgIGRhdGEsXG4gICAgICBDT01NRU5UX09GRlNFVCxcbiAgICAgIGxvYWRUZXN0Rm9udElkLmxlbmd0aCxcbiAgICAgIGxvYWRUZXN0Rm9udElkXG4gICAgKTtcbiAgICAvLyBDRkYgY2hlY2tzdW0gaXMgaW1wb3J0YW50IGZvciBJRSwgYWRqdXN0aW5nIGl0XG4gICAgY29uc3QgQ0ZGX0NIRUNLU1VNX09GRlNFVCA9IDE2O1xuICAgIGNvbnN0IFhYWFhfVkFMVUUgPSAweDU4NTg1ODU4OyAvLyB0aGUgXCJjb21tZW50XCIgZmlsbGVkIHdpdGggJ1gnXG4gICAgbGV0IGNoZWNrc3VtID0gaW50MzIoZGF0YSwgQ0ZGX0NIRUNLU1VNX09GRlNFVCk7XG4gICAgZm9yIChpID0gMCwgaWkgPSBsb2FkVGVzdEZvbnRJZC5sZW5ndGggLSAzOyBpIDwgaWk7IGkgKz0gNCkge1xuICAgICAgY2hlY2tzdW0gPSAoY2hlY2tzdW0gLSBYWFhYX1ZBTFVFICsgaW50MzIobG9hZFRlc3RGb250SWQsIGkpKSB8IDA7XG4gICAgfVxuICAgIGlmIChpIDwgbG9hZFRlc3RGb250SWQubGVuZ3RoKSB7XG4gICAgICAvLyBhbGlnbiB0byA0IGJ5dGVzIGJvdW5kYXJ5XG4gICAgICBjaGVja3N1bSA9IChjaGVja3N1bSAtIFhYWFhfVkFMVUUgKyBpbnQzMihsb2FkVGVzdEZvbnRJZCArIFwiWFhYXCIsIGkpKSB8IDA7XG4gICAgfVxuICAgIGRhdGEgPSBzcGxpY2VTdHJpbmcoZGF0YSwgQ0ZGX0NIRUNLU1VNX09GRlNFVCwgNCwgc3RyaW5nMzIoY2hlY2tzdW0pKTtcblxuICAgIGNvbnN0IHVybCA9IGB1cmwoZGF0YTpmb250L29wZW50eXBlO2Jhc2U2NCwke2J0b2EoZGF0YSl9KTtgO1xuICAgIGNvbnN0IHJ1bGUgPSBgQGZvbnQtZmFjZSB7Zm9udC1mYW1pbHk6XCIke2xvYWRUZXN0Rm9udElkfVwiO3NyYzoke3VybH19YDtcbiAgICB0aGlzLmluc2VydFJ1bGUocnVsZSk7XG5cbiAgICBjb25zdCBkaXYgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRpdi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICBkaXYuc3R5bGUud2lkdGggPSBkaXYuc3R5bGUuaGVpZ2h0ID0gXCIxMHB4XCI7XG4gICAgZGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGRpdi5zdHlsZS50b3AgPSBkaXYuc3R5bGUubGVmdCA9IFwiMHB4XCI7XG5cbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgW2ZvbnQubG9hZGVkTmFtZSwgbG9hZFRlc3RGb250SWRdKSB7XG4gICAgICBjb25zdCBzcGFuID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBzcGFuLnRleHRDb250ZW50ID0gXCJIaVwiO1xuICAgICAgc3Bhbi5zdHlsZS5mb250RmFtaWx5ID0gbmFtZTtcbiAgICAgIGRpdi5hcHBlbmQoc3Bhbik7XG4gICAgfVxuICAgIHRoaXMuX2RvY3VtZW50LmJvZHkuYXBwZW5kKGRpdik7XG5cbiAgICBpc0ZvbnRSZWFkeShsb2FkVGVzdEZvbnRJZCwgKCkgPT4ge1xuICAgICAgZGl2LnJlbW92ZSgpO1xuICAgICAgcmVxdWVzdC5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICAgIC8qKiBIYWNrIGVuZCAqL1xuICB9XG59XG5cbmNsYXNzIEZvbnRGYWNlT2JqZWN0IHtcbiAgY29uc3RydWN0b3IodHJhbnNsYXRlZERhdGEsIGluc3BlY3RGb250ID0gbnVsbCkge1xuICAgIHRoaXMuY29tcGlsZWRHbHlwaHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIC8vIGltcG9ydGluZyB0cmFuc2xhdGVkIGRhdGFcbiAgICBmb3IgKGNvbnN0IGkgaW4gdHJhbnNsYXRlZERhdGEpIHtcbiAgICAgIHRoaXNbaV0gPSB0cmFuc2xhdGVkRGF0YVtpXTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmRpc2FibGVGb250RmFjZSAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgdW5yZWFjaGFibGUoXCJkaXNhYmxlRm9udEZhY2UgbXVzdCBiZSBhdmFpbGFibGUuXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmZvbnRFeHRyYVByb3BlcnRpZXMgIT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgIHVucmVhY2hhYmxlKFwiZm9udEV4dHJhUHJvcGVydGllcyBtdXN0IGJlIGF2YWlsYWJsZS5cIik7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2luc3BlY3RGb250ID0gaW5zcGVjdEZvbnQ7XG4gIH1cblxuICBjcmVhdGVOYXRpdmVGb250RmFjZSgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YSB8fCB0aGlzLmRpc2FibGVGb250RmFjZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBuYXRpdmVGb250RmFjZTtcbiAgICBpZiAoIXRoaXMuY3NzRm9udEluZm8pIHtcbiAgICAgIG5hdGl2ZUZvbnRGYWNlID0gbmV3IEZvbnRGYWNlKHRoaXMubG9hZGVkTmFtZSwgdGhpcy5kYXRhLCB7fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNzcyA9IHtcbiAgICAgICAgd2VpZ2h0OiB0aGlzLmNzc0ZvbnRJbmZvLmZvbnRXZWlnaHQsXG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMuY3NzRm9udEluZm8uaXRhbGljQW5nbGUpIHtcbiAgICAgICAgY3NzLnN0eWxlID0gYG9ibGlxdWUgJHt0aGlzLmNzc0ZvbnRJbmZvLml0YWxpY0FuZ2xlfWRlZ2A7XG4gICAgICB9XG4gICAgICBuYXRpdmVGb250RmFjZSA9IG5ldyBGb250RmFjZShcbiAgICAgICAgdGhpcy5jc3NGb250SW5mby5mb250RmFtaWx5LFxuICAgICAgICB0aGlzLmRhdGEsXG4gICAgICAgIGNzc1xuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbnNwZWN0Rm9udD8uKHRoaXMpO1xuICAgIHJldHVybiBuYXRpdmVGb250RmFjZTtcbiAgfVxuXG4gIGNyZWF0ZUZvbnRGYWNlUnVsZSgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YSB8fCB0aGlzLmRpc2FibGVGb250RmFjZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIEFkZCB0aGUgQGZvbnQtZmFjZSBydWxlIHRvIHRoZSBkb2N1bWVudC5cbiAgICBjb25zdCB1cmwgPSBgdXJsKGRhdGE6JHt0aGlzLm1pbWV0eXBlfTtiYXNlNjQsJHt0b0Jhc2U2NFV0aWwodGhpcy5kYXRhKX0pO2A7XG4gICAgbGV0IHJ1bGU7XG4gICAgaWYgKCF0aGlzLmNzc0ZvbnRJbmZvKSB7XG4gICAgICBydWxlID0gYEBmb250LWZhY2Uge2ZvbnQtZmFtaWx5OlwiJHt0aGlzLmxvYWRlZE5hbWV9XCI7c3JjOiR7dXJsfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY3NzID0gYGZvbnQtd2VpZ2h0OiAke3RoaXMuY3NzRm9udEluZm8uZm9udFdlaWdodH07YDtcbiAgICAgIGlmICh0aGlzLmNzc0ZvbnRJbmZvLml0YWxpY0FuZ2xlKSB7XG4gICAgICAgIGNzcyArPSBgZm9udC1zdHlsZTogb2JsaXF1ZSAke3RoaXMuY3NzRm9udEluZm8uaXRhbGljQW5nbGV9ZGVnO2A7XG4gICAgICB9XG4gICAgICBydWxlID0gYEBmb250LWZhY2Uge2ZvbnQtZmFtaWx5OlwiJHt0aGlzLmNzc0ZvbnRJbmZvLmZvbnRGYW1pbHl9XCI7JHtjc3N9c3JjOiR7dXJsfX1gO1xuICAgIH1cblxuICAgIHRoaXMuX2luc3BlY3RGb250Py4odGhpcywgdXJsKTtcbiAgICByZXR1cm4gcnVsZTtcbiAgfVxuXG4gIGdldFBhdGhHZW5lcmF0b3Iob2JqcywgY2hhcmFjdGVyKSB7XG4gICAgaWYgKHRoaXMuY29tcGlsZWRHbHlwaHNbY2hhcmFjdGVyXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21waWxlZEdseXBoc1tjaGFyYWN0ZXJdO1xuICAgIH1cblxuICAgIGNvbnN0IG9iaklkID0gdGhpcy5sb2FkZWROYW1lICsgXCJfcGF0aF9cIiArIGNoYXJhY3RlcjtcbiAgICBsZXQgY21kcztcbiAgICB0cnkge1xuICAgICAgY21kcyA9IG9ianMuZ2V0KG9iaklkKTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgd2FybihgZ2V0UGF0aEdlbmVyYXRvciAtIGlnbm9yaW5nIGNoYXJhY3RlcjogXCIke2V4fVwiLmApO1xuICAgIH1cbiAgICBjb25zdCBwYXRoID0gbmV3IFBhdGgyRChjbWRzIHx8IFwiXCIpO1xuXG4gICAgaWYgKCF0aGlzLmZvbnRFeHRyYVByb3BlcnRpZXMpIHtcbiAgICAgIC8vIFJlbW92ZSB0aGUgcmF3IHBhdGgtc3RyaW5nLCBzaW5jZSB3ZSBkb24ndCBuZWVkIGl0IGFueW1vcmUuXG4gICAgICBvYmpzLmRlbGV0ZShvYmpJZCk7XG4gICAgfVxuICAgIHJldHVybiAodGhpcy5jb21waWxlZEdseXBoc1tjaGFyYWN0ZXJdID0gcGF0aCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgRm9udEZhY2VPYmplY3QsIEZvbnRMb2FkZXIgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxOCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQWJvcnRFeGNlcHRpb24sXG4gIGFzc2VydCxcbiAgSW52YWxpZFBERkV4Y2VwdGlvbixcbiAgUGFzc3dvcmRFeGNlcHRpb24sXG4gIFJlc3BvbnNlRXhjZXB0aW9uLFxuICBVbmtub3duRXJyb3JFeGNlcHRpb24sXG4gIHVucmVhY2hhYmxlLFxufSBmcm9tIFwiLi91dGlsLmpzXCI7XG5cbmNvbnN0IENhbGxiYWNrS2luZCA9IHtcbiAgREFUQTogMSxcbiAgRVJST1I6IDIsXG59O1xuXG5jb25zdCBTdHJlYW1LaW5kID0ge1xuICBDQU5DRUw6IDEsXG4gIENBTkNFTF9DT01QTEVURTogMixcbiAgQ0xPU0U6IDMsXG4gIEVOUVVFVUU6IDQsXG4gIEVSUk9SOiA1LFxuICBQVUxMOiA2LFxuICBQVUxMX0NPTVBMRVRFOiA3LFxuICBTVEFSVF9DT01QTEVURTogOCxcbn07XG5cbmZ1bmN0aW9uIG9uRm4oKSB7fVxuXG5mdW5jdGlvbiB3cmFwUmVhc29uKGV4KSB7XG4gIGlmIChcbiAgICBleCBpbnN0YW5jZW9mIEFib3J0RXhjZXB0aW9uIHx8XG4gICAgZXggaW5zdGFuY2VvZiBJbnZhbGlkUERGRXhjZXB0aW9uIHx8XG4gICAgZXggaW5zdGFuY2VvZiBQYXNzd29yZEV4Y2VwdGlvbiB8fFxuICAgIGV4IGluc3RhbmNlb2YgUmVzcG9uc2VFeGNlcHRpb24gfHxcbiAgICBleCBpbnN0YW5jZW9mIFVua25vd25FcnJvckV4Y2VwdGlvblxuICApIHtcbiAgICAvLyBBdm9pZCByZS1jcmVhdGluZyB0aGUgZXhjZXB0aW9uIHdoZW4gaXRzIHR5cGUgaXMgYWxyZWFkeSBjb3JyZWN0LlxuICAgIHJldHVybiBleDtcbiAgfVxuXG4gIGlmICghKGV4IGluc3RhbmNlb2YgRXJyb3IgfHwgKHR5cGVvZiBleCA9PT0gXCJvYmplY3RcIiAmJiBleCAhPT0gbnVsbCkpKSB7XG4gICAgdW5yZWFjaGFibGUoXG4gICAgICAnd3JhcFJlYXNvbjogRXhwZWN0ZWQgXCJyZWFzb25cIiB0byBiZSBhIChwb3NzaWJseSBjbG9uZWQpIEVycm9yLidcbiAgICApO1xuICB9XG4gIHN3aXRjaCAoZXgubmFtZSkge1xuICAgIGNhc2UgXCJBYm9ydEV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBBYm9ydEV4Y2VwdGlvbihleC5tZXNzYWdlKTtcbiAgICBjYXNlIFwiSW52YWxpZFBERkV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBJbnZhbGlkUERGRXhjZXB0aW9uKGV4Lm1lc3NhZ2UpO1xuICAgIGNhc2UgXCJQYXNzd29yZEV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBQYXNzd29yZEV4Y2VwdGlvbihleC5tZXNzYWdlLCBleC5jb2RlKTtcbiAgICBjYXNlIFwiUmVzcG9uc2VFeGNlcHRpb25cIjpcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2VFeGNlcHRpb24oZXgubWVzc2FnZSwgZXguc3RhdHVzLCBleC5taXNzaW5nKTtcbiAgICBjYXNlIFwiVW5rbm93bkVycm9yRXhjZXB0aW9uXCI6XG4gICAgICByZXR1cm4gbmV3IFVua25vd25FcnJvckV4Y2VwdGlvbihleC5tZXNzYWdlLCBleC5kZXRhaWxzKTtcbiAgfVxuICByZXR1cm4gbmV3IFVua25vd25FcnJvckV4Y2VwdGlvbihleC5tZXNzYWdlLCBleC50b1N0cmluZygpKTtcbn1cblxuY2xhc3MgTWVzc2FnZUhhbmRsZXIge1xuICAjbWVzc2FnZUFDID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gIGNvbnN0cnVjdG9yKHNvdXJjZU5hbWUsIHRhcmdldE5hbWUsIGNvbU9iaikge1xuICAgIHRoaXMuc291cmNlTmFtZSA9IHNvdXJjZU5hbWU7XG4gICAgdGhpcy50YXJnZXROYW1lID0gdGFyZ2V0TmFtZTtcbiAgICB0aGlzLmNvbU9iaiA9IGNvbU9iajtcbiAgICB0aGlzLmNhbGxiYWNrSWQgPSAxO1xuICAgIHRoaXMuc3RyZWFtSWQgPSAxO1xuICAgIHRoaXMuc3RyZWFtU2lua3MgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuc3RyZWFtQ29udHJvbGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuY2FsbGJhY2tDYXBhYmlsaXRpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuYWN0aW9uSGFuZGxlciA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICBjb21PYmouYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy4jb25NZXNzYWdlLmJpbmQodGhpcyksIHtcbiAgICAgIHNpZ25hbDogdGhpcy4jbWVzc2FnZUFDLnNpZ25hbCxcbiAgICB9KTtcbiAgfVxuXG4gICNvbk1lc3NhZ2UoeyBkYXRhIH0pIHtcbiAgICBpZiAoZGF0YS50YXJnZXROYW1lICE9PSB0aGlzLnNvdXJjZU5hbWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGRhdGEuc3RyZWFtKSB7XG4gICAgICB0aGlzLiNwcm9jZXNzU3RyZWFtTWVzc2FnZShkYXRhKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGRhdGEuY2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrSWQgPSBkYXRhLmNhbGxiYWNrSWQ7XG4gICAgICBjb25zdCBjYXBhYmlsaXR5ID0gdGhpcy5jYWxsYmFja0NhcGFiaWxpdGllc1tjYWxsYmFja0lkXTtcbiAgICAgIGlmICghY2FwYWJpbGl0eSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZXNvbHZlIGNhbGxiYWNrICR7Y2FsbGJhY2tJZH1gKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSB0aGlzLmNhbGxiYWNrQ2FwYWJpbGl0aWVzW2NhbGxiYWNrSWRdO1xuXG4gICAgICBpZiAoZGF0YS5jYWxsYmFjayA9PT0gQ2FsbGJhY2tLaW5kLkRBVEEpIHtcbiAgICAgICAgY2FwYWJpbGl0eS5yZXNvbHZlKGRhdGEuZGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEuY2FsbGJhY2sgPT09IENhbGxiYWNrS2luZC5FUlJPUikge1xuICAgICAgICBjYXBhYmlsaXR5LnJlamVjdCh3cmFwUmVhc29uKGRhdGEucmVhc29uKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGNhbGxiYWNrIGNhc2VcIik7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuYWN0aW9uSGFuZGxlcltkYXRhLmFjdGlvbl07XG4gICAgaWYgKCFhY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBhY3Rpb24gZnJvbSB3b3JrZXI6ICR7ZGF0YS5hY3Rpb259YCk7XG4gICAgfVxuICAgIGlmIChkYXRhLmNhbGxiYWNrSWQpIHtcbiAgICAgIGNvbnN0IHNvdXJjZU5hbWUgPSB0aGlzLnNvdXJjZU5hbWUsXG4gICAgICAgIHRhcmdldE5hbWUgPSBkYXRhLnNvdXJjZU5hbWUsXG4gICAgICAgIGNvbU9iaiA9IHRoaXMuY29tT2JqO1xuXG4gICAgICBQcm9taXNlLnRyeShhY3Rpb24sIGRhdGEuZGF0YSkudGhlbihcbiAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBDYWxsYmFja0tpbmQuREFUQSxcbiAgICAgICAgICAgIGNhbGxiYWNrSWQ6IGRhdGEuY2FsbGJhY2tJZCxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBDYWxsYmFja0tpbmQuRVJST1IsXG4gICAgICAgICAgICBjYWxsYmFja0lkOiBkYXRhLmNhbGxiYWNrSWQsXG4gICAgICAgICAgICByZWFzb246IHdyYXBSZWFzb24ocmVhc29uKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGRhdGEuc3RyZWFtSWQpIHtcbiAgICAgIHRoaXMuI2NyZWF0ZVN0cmVhbVNpbmsoZGF0YSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjdGlvbihkYXRhLmRhdGEpO1xuICB9XG5cbiAgb24oYWN0aW9uTmFtZSwgaGFuZGxlcikge1xuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgdHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIixcbiAgICAgICAgJ01lc3NhZ2VIYW5kbGVyLm9uOiBFeHBlY3RlZCBcImhhbmRsZXJcIiB0byBiZSBhIGZ1bmN0aW9uLidcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGFoID0gdGhpcy5hY3Rpb25IYW5kbGVyO1xuICAgIGlmIChhaFthY3Rpb25OYW1lXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGVyZSBpcyBhbHJlYWR5IGFuIGFjdGlvbk5hbWUgY2FsbGVkIFwiJHthY3Rpb25OYW1lfVwiYCk7XG4gICAgfVxuICAgIGFoW2FjdGlvbk5hbWVdID0gaGFuZGxlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIGNvbU9iaiB0byBpbnZva2UgdGhlIGFjdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBkYXRhLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uTmFtZSAtIEFjdGlvbiB0byBjYWxsLlxuICAgKiBAcGFyYW0ge0pTT059IGRhdGEgLSBKU09OIGRhdGEgdG8gc2VuZC5cbiAgICogQHBhcmFtIHtBcnJheX0gW3RyYW5zZmVyc10gLSBMaXN0IG9mIHRyYW5zZmVycy9BcnJheUJ1ZmZlcnMuXG4gICAqL1xuICBzZW5kKGFjdGlvbk5hbWUsIGRhdGEsIHRyYW5zZmVycykge1xuICAgIHRoaXMuY29tT2JqLnBvc3RNZXNzYWdlKFxuICAgICAge1xuICAgICAgICBzb3VyY2VOYW1lOiB0aGlzLnNvdXJjZU5hbWUsXG4gICAgICAgIHRhcmdldE5hbWU6IHRoaXMudGFyZ2V0TmFtZSxcbiAgICAgICAgYWN0aW9uOiBhY3Rpb25OYW1lLFxuICAgICAgICBkYXRhLFxuICAgICAgfSxcbiAgICAgIHRyYW5zZmVyc1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBjb21PYmogdG8gaW52b2tlIHRoZSBhY3Rpb24gd2l0aCB0aGUgc3VwcGxpZWQgZGF0YS5cbiAgICogRXhwZWN0cyB0aGF0IHRoZSBvdGhlciBzaWRlIHdpbGwgY2FsbGJhY2sgd2l0aCB0aGUgcmVzcG9uc2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb25OYW1lIC0gQWN0aW9uIHRvIGNhbGwuXG4gICAqIEBwYXJhbSB7SlNPTn0gZGF0YSAtIEpTT04gZGF0YSB0byBzZW5kLlxuICAgKiBAcGFyYW0ge0FycmF5fSBbdHJhbnNmZXJzXSAtIExpc3Qgb2YgdHJhbnNmZXJzL0FycmF5QnVmZmVycy5cbiAgICogQHJldHVybnMge1Byb21pc2V9IFByb21pc2UgdG8gYmUgcmVzb2x2ZWQgd2l0aCByZXNwb25zZSBkYXRhLlxuICAgKi9cbiAgc2VuZFdpdGhQcm9taXNlKGFjdGlvbk5hbWUsIGRhdGEsIHRyYW5zZmVycykge1xuICAgIGNvbnN0IGNhbGxiYWNrSWQgPSB0aGlzLmNhbGxiYWNrSWQrKztcbiAgICBjb25zdCBjYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgdGhpcy5jYWxsYmFja0NhcGFiaWxpdGllc1tjYWxsYmFja0lkXSA9IGNhcGFiaWxpdHk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY29tT2JqLnBvc3RNZXNzYWdlKFxuICAgICAgICB7XG4gICAgICAgICAgc291cmNlTmFtZTogdGhpcy5zb3VyY2VOYW1lLFxuICAgICAgICAgIHRhcmdldE5hbWU6IHRoaXMudGFyZ2V0TmFtZSxcbiAgICAgICAgICBhY3Rpb246IGFjdGlvbk5hbWUsXG4gICAgICAgICAgY2FsbGJhY2tJZCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICB9LFxuICAgICAgICB0cmFuc2ZlcnNcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGNhcGFiaWxpdHkucmVqZWN0KGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIGNvbU9iaiB0byBpbnZva2UgdGhlIGFjdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBkYXRhLlxuICAgKiBFeHBlY3QgdGhhdCB0aGUgb3RoZXIgc2lkZSB3aWxsIGNhbGxiYWNrIHRvIHNpZ25hbCAnc3RhcnRfY29tcGxldGUnLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uTmFtZSAtIEFjdGlvbiB0byBjYWxsLlxuICAgKiBAcGFyYW0ge0pTT059IGRhdGEgLSBKU09OIGRhdGEgdG8gc2VuZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXVlaW5nU3RyYXRlZ3kgLSBTdHJhdGVneSB0byBzaWduYWwgYmFja3ByZXNzdXJlIGJhc2VkIG9uXG4gICAqICAgICAgICAgICAgICAgICBpbnRlcm5hbCBxdWV1ZS5cbiAgICogQHBhcmFtIHtBcnJheX0gW3RyYW5zZmVyc10gLSBMaXN0IG9mIHRyYW5zZmVycy9BcnJheUJ1ZmZlcnMuXG4gICAqIEByZXR1cm5zIHtSZWFkYWJsZVN0cmVhbX0gUmVhZGFibGVTdHJlYW0gdG8gcmVhZCBkYXRhIGluIGNodW5rcy5cbiAgICovXG4gIHNlbmRXaXRoU3RyZWFtKGFjdGlvbk5hbWUsIGRhdGEsIHF1ZXVlaW5nU3RyYXRlZ3ksIHRyYW5zZmVycykge1xuICAgIGNvbnN0IHN0cmVhbUlkID0gdGhpcy5zdHJlYW1JZCsrLFxuICAgICAgc291cmNlTmFtZSA9IHRoaXMuc291cmNlTmFtZSxcbiAgICAgIHRhcmdldE5hbWUgPSB0aGlzLnRhcmdldE5hbWUsXG4gICAgICBjb21PYmogPSB0aGlzLmNvbU9iajtcblxuICAgIHJldHVybiBuZXcgUmVhZGFibGVTdHJlYW0oXG4gICAgICB7XG4gICAgICAgIHN0YXJ0OiBjb250cm9sbGVyID0+IHtcbiAgICAgICAgICBjb25zdCBzdGFydENhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgICAgICAgICB0aGlzLnN0cmVhbUNvbnRyb2xsZXJzW3N0cmVhbUlkXSA9IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIsXG4gICAgICAgICAgICBzdGFydENhbGw6IHN0YXJ0Q2FwYWJpbGl0eSxcbiAgICAgICAgICAgIHB1bGxDYWxsOiBudWxsLFxuICAgICAgICAgICAgY2FuY2VsQ2FsbDogbnVsbCxcbiAgICAgICAgICAgIGlzQ2xvc2VkOiBmYWxzZSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25OYW1lLFxuICAgICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IGNvbnRyb2xsZXIuZGVzaXJlZFNpemUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJhbnNmZXJzXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBSZXR1cm4gUHJvbWlzZSBmb3IgQXN5bmMgcHJvY2VzcywgdG8gc2lnbmFsIHN1Y2Nlc3MvZmFpbHVyZS5cbiAgICAgICAgICByZXR1cm4gc3RhcnRDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcHVsbDogY29udHJvbGxlciA9PiB7XG4gICAgICAgICAgY29uc3QgcHVsbENhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgICAgICAgICB0aGlzLnN0cmVhbUNvbnRyb2xsZXJzW3N0cmVhbUlkXS5wdWxsQ2FsbCA9IHB1bGxDYXBhYmlsaXR5O1xuICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5QVUxMLFxuICAgICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgICBkZXNpcmVkU2l6ZTogY29udHJvbGxlci5kZXNpcmVkU2l6ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBSZXR1cm5pbmcgUHJvbWlzZSB3aWxsIG5vdCBjYWxsIFwicHVsbFwiXG4gICAgICAgICAgLy8gYWdhaW4gdW50aWwgY3VycmVudCBwdWxsIGlzIHJlc29sdmVkLlxuICAgICAgICAgIHJldHVybiBwdWxsQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNhbmNlbDogcmVhc29uID0+IHtcbiAgICAgICAgICBhc3NlcnQocmVhc29uIGluc3RhbmNlb2YgRXJyb3IsIFwiY2FuY2VsIG11c3QgaGF2ZSBhIHZhbGlkIHJlYXNvblwiKTtcbiAgICAgICAgICBjb25zdCBjYW5jZWxDYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgICAgICAgdGhpcy5zdHJlYW1Db250cm9sbGVyc1tzdHJlYW1JZF0uY2FuY2VsQ2FsbCA9IGNhbmNlbENhcGFiaWxpdHk7XG4gICAgICAgICAgdGhpcy5zdHJlYW1Db250cm9sbGVyc1tzdHJlYW1JZF0uaXNDbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5DQU5DRUwsXG4gICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgIHJlYXNvbjogd3JhcFJlYXNvbihyZWFzb24pLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIFJldHVybiBQcm9taXNlIHRvIHNpZ25hbCBzdWNjZXNzIG9yIGZhaWx1cmUuXG4gICAgICAgICAgcmV0dXJuIGNhbmNlbENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBxdWV1ZWluZ1N0cmF0ZWd5XG4gICAgKTtcbiAgfVxuXG4gICNjcmVhdGVTdHJlYW1TaW5rKGRhdGEpIHtcbiAgICBjb25zdCBzdHJlYW1JZCA9IGRhdGEuc3RyZWFtSWQsXG4gICAgICBzb3VyY2VOYW1lID0gdGhpcy5zb3VyY2VOYW1lLFxuICAgICAgdGFyZ2V0TmFtZSA9IGRhdGEuc291cmNlTmFtZSxcbiAgICAgIGNvbU9iaiA9IHRoaXMuY29tT2JqO1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLFxuICAgICAgYWN0aW9uID0gdGhpcy5hY3Rpb25IYW5kbGVyW2RhdGEuYWN0aW9uXTtcblxuICAgIGNvbnN0IHN0cmVhbVNpbmsgPSB7XG4gICAgICBlbnF1ZXVlKGNodW5rLCBzaXplID0gMSwgdHJhbnNmZXJzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxhc3REZXNpcmVkU2l6ZSA9IHRoaXMuZGVzaXJlZFNpemU7XG4gICAgICAgIHRoaXMuZGVzaXJlZFNpemUgLT0gc2l6ZTtcbiAgICAgICAgLy8gRW5xdWV1ZSBkZWNyZWFzZXMgdGhlIGRlc2lyZWRTaXplIHByb3BlcnR5IG9mIHNpbmssXG4gICAgICAgIC8vIHNvIHdoZW4gaXQgY2hhbmdlcyBmcm9tIHBvc2l0aXZlIHRvIG5lZ2F0aXZlLFxuICAgICAgICAvLyBzZXQgcmVhZHkgYXMgdW5yZXNvbHZlZCBwcm9taXNlLlxuICAgICAgICBpZiAobGFzdERlc2lyZWRTaXplID4gMCAmJiB0aGlzLmRlc2lyZWRTaXplIDw9IDApIHtcbiAgICAgICAgICB0aGlzLnNpbmtDYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgICAgICAgdGhpcy5yZWFkeSA9IHRoaXMuc2lua0NhcGFiaWxpdHkucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2UoXG4gICAgICAgICAge1xuICAgICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuRU5RVUVVRSxcbiAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgY2h1bmssXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2ZlcnNcbiAgICAgICAgKTtcbiAgICAgIH0sXG5cbiAgICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5pc0NhbmNlbGxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQ2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLkNMT1NFLFxuICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgZGVsZXRlIHNlbGYuc3RyZWFtU2lua3Nbc3RyZWFtSWRdO1xuICAgICAgfSxcblxuICAgICAgZXJyb3IocmVhc29uKSB7XG4gICAgICAgIGFzc2VydChyZWFzb24gaW5zdGFuY2VvZiBFcnJvciwgXCJlcnJvciBtdXN0IGhhdmUgYSB2YWxpZCByZWFzb25cIik7XG4gICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNDYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuRVJST1IsXG4gICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgcmVhc29uOiB3cmFwUmVhc29uKHJlYXNvbiksXG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgc2lua0NhcGFiaWxpdHk6IFByb21pc2Uud2l0aFJlc29sdmVycygpLFxuICAgICAgb25QdWxsOiBudWxsLFxuICAgICAgb25DYW5jZWw6IG51bGwsXG4gICAgICBpc0NhbmNlbGxlZDogZmFsc2UsXG4gICAgICBkZXNpcmVkU2l6ZTogZGF0YS5kZXNpcmVkU2l6ZSxcbiAgICAgIHJlYWR5OiBudWxsLFxuICAgIH07XG5cbiAgICBzdHJlYW1TaW5rLnNpbmtDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICBzdHJlYW1TaW5rLnJlYWR5ID0gc3RyZWFtU2luay5zaW5rQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIHRoaXMuc3RyZWFtU2lua3Nbc3RyZWFtSWRdID0gc3RyZWFtU2luaztcblxuICAgIFByb21pc2UudHJ5KGFjdGlvbiwgZGF0YS5kYXRhLCBzdHJlYW1TaW5rKS50aGVuKFxuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuU1RBUlRfQ09NUExFVEUsXG4gICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuU1RBUlRfQ09NUExFVEUsXG4gICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgcmVhc29uOiB3cmFwUmVhc29uKHJlYXNvbiksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAjcHJvY2Vzc1N0cmVhbU1lc3NhZ2UoZGF0YSkge1xuICAgIGNvbnN0IHN0cmVhbUlkID0gZGF0YS5zdHJlYW1JZCxcbiAgICAgIHNvdXJjZU5hbWUgPSB0aGlzLnNvdXJjZU5hbWUsXG4gICAgICB0YXJnZXROYW1lID0gZGF0YS5zb3VyY2VOYW1lLFxuICAgICAgY29tT2JqID0gdGhpcy5jb21PYmo7XG4gICAgY29uc3Qgc3RyZWFtQ29udHJvbGxlciA9IHRoaXMuc3RyZWFtQ29udHJvbGxlcnNbc3RyZWFtSWRdLFxuICAgICAgc3RyZWFtU2luayA9IHRoaXMuc3RyZWFtU2lua3Nbc3RyZWFtSWRdO1xuXG4gICAgc3dpdGNoIChkYXRhLnN0cmVhbSkge1xuICAgICAgY2FzZSBTdHJlYW1LaW5kLlNUQVJUX0NPTVBMRVRFOlxuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgc3RyZWFtQ29udHJvbGxlci5zdGFydENhbGwucmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cmVhbUNvbnRyb2xsZXIuc3RhcnRDYWxsLnJlamVjdCh3cmFwUmVhc29uKGRhdGEucmVhc29uKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN0cmVhbUtpbmQuUFVMTF9DT01QTEVURTpcbiAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgIHN0cmVhbUNvbnRyb2xsZXIucHVsbENhbGwucmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cmVhbUNvbnRyb2xsZXIucHVsbENhbGwucmVqZWN0KHdyYXBSZWFzb24oZGF0YS5yZWFzb24pKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3RyZWFtS2luZC5QVUxMOlxuICAgICAgICAvLyBJZ25vcmUgYW55IHB1bGwgYWZ0ZXIgY2xvc2UgaXMgY2FsbGVkLlxuICAgICAgICBpZiAoIXN0cmVhbVNpbmspIHtcbiAgICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuUFVMTF9DT01QTEVURSxcbiAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBQdWxsIGluY3JlYXNlcyB0aGUgZGVzaXJlZFNpemUgcHJvcGVydHkgb2Ygc2luaywgc28gd2hlbiBpdCBjaGFuZ2VzXG4gICAgICAgIC8vIGZyb20gbmVnYXRpdmUgdG8gcG9zaXRpdmUsIHNldCByZWFkeSBwcm9wZXJ0eSBhcyByZXNvbHZlZCBwcm9taXNlLlxuICAgICAgICBpZiAoc3RyZWFtU2luay5kZXNpcmVkU2l6ZSA8PSAwICYmIGRhdGEuZGVzaXJlZFNpemUgPiAwKSB7XG4gICAgICAgICAgc3RyZWFtU2luay5zaW5rQ2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVzZXQgZGVzaXJlZFNpemUgcHJvcGVydHkgb2Ygc2luayBvbiBldmVyeSBwdWxsLlxuICAgICAgICBzdHJlYW1TaW5rLmRlc2lyZWRTaXplID0gZGF0YS5kZXNpcmVkU2l6ZTtcblxuICAgICAgICBQcm9taXNlLnRyeShzdHJlYW1TaW5rLm9uUHVsbCB8fCBvbkZuKS50aGVuKFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5QVUxMX0NPTVBMRVRFLFxuICAgICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLlBVTExfQ09NUExFVEUsXG4gICAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgICByZWFzb246IHdyYXBSZWFzb24ocmVhc29uKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN0cmVhbUtpbmQuRU5RVUVVRTpcbiAgICAgICAgYXNzZXJ0KHN0cmVhbUNvbnRyb2xsZXIsIFwiZW5xdWV1ZSBzaG91bGQgaGF2ZSBzdHJlYW0gY29udHJvbGxlclwiKTtcbiAgICAgICAgaWYgKHN0cmVhbUNvbnRyb2xsZXIuaXNDbG9zZWQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW1Db250cm9sbGVyLmNvbnRyb2xsZXIuZW5xdWV1ZShkYXRhLmNodW5rKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN0cmVhbUtpbmQuQ0xPU0U6XG4gICAgICAgIGFzc2VydChzdHJlYW1Db250cm9sbGVyLCBcImNsb3NlIHNob3VsZCBoYXZlIHN0cmVhbSBjb250cm9sbGVyXCIpO1xuICAgICAgICBpZiAoc3RyZWFtQ29udHJvbGxlci5pc0Nsb3NlZCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHN0cmVhbUNvbnRyb2xsZXIuaXNDbG9zZWQgPSB0cnVlO1xuICAgICAgICBzdHJlYW1Db250cm9sbGVyLmNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy4jZGVsZXRlU3RyZWFtQ29udHJvbGxlcihzdHJlYW1Db250cm9sbGVyLCBzdHJlYW1JZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdHJlYW1LaW5kLkVSUk9SOlxuICAgICAgICBhc3NlcnQoc3RyZWFtQ29udHJvbGxlciwgXCJlcnJvciBzaG91bGQgaGF2ZSBzdHJlYW0gY29udHJvbGxlclwiKTtcbiAgICAgICAgc3RyZWFtQ29udHJvbGxlci5jb250cm9sbGVyLmVycm9yKHdyYXBSZWFzb24oZGF0YS5yZWFzb24pKTtcbiAgICAgICAgdGhpcy4jZGVsZXRlU3RyZWFtQ29udHJvbGxlcihzdHJlYW1Db250cm9sbGVyLCBzdHJlYW1JZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdHJlYW1LaW5kLkNBTkNFTF9DT01QTEVURTpcbiAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgIHN0cmVhbUNvbnRyb2xsZXIuY2FuY2VsQ2FsbC5yZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyZWFtQ29udHJvbGxlci5jYW5jZWxDYWxsLnJlamVjdCh3cmFwUmVhc29uKGRhdGEucmVhc29uKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jZGVsZXRlU3RyZWFtQ29udHJvbGxlcihzdHJlYW1Db250cm9sbGVyLCBzdHJlYW1JZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdHJlYW1LaW5kLkNBTkNFTDpcbiAgICAgICAgaWYgKCFzdHJlYW1TaW5rKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YVJlYXNvbiA9IHdyYXBSZWFzb24oZGF0YS5yZWFzb24pO1xuXG4gICAgICAgIFByb21pc2UudHJ5KHN0cmVhbVNpbmsub25DYW5jZWwgfHwgb25GbiwgZGF0YVJlYXNvbikudGhlbihcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuQ0FOQ0VMX0NPTVBMRVRFLFxuICAgICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLkNBTkNFTF9DT01QTEVURSxcbiAgICAgICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgICAgIHJlYXNvbjogd3JhcFJlYXNvbihyZWFzb24pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBzdHJlYW1TaW5rLnNpbmtDYXBhYmlsaXR5LnJlamVjdChkYXRhUmVhc29uKTtcbiAgICAgICAgc3RyZWFtU2luay5pc0NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0cmVhbVNpbmtzW3N0cmVhbUlkXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHN0cmVhbSBjYXNlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICNkZWxldGVTdHJlYW1Db250cm9sbGVyKHN0cmVhbUNvbnRyb2xsZXIsIHN0cmVhbUlkKSB7XG4gICAgLy8gRGVsZXRlIHRoZSBgc3RyZWFtQ29udHJvbGxlcmAgb25seSB3aGVuIHRoZSBzdGFydCwgcHVsbCwgYW5kIGNhbmNlbFxuICAgIC8vIGNhcGFiaWxpdGllcyBoYXZlIHNldHRsZWQsIHRvIHByZXZlbnQgYFR5cGVFcnJvcmBzLlxuICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXG4gICAgICBzdHJlYW1Db250cm9sbGVyLnN0YXJ0Q2FsbD8ucHJvbWlzZSxcbiAgICAgIHN0cmVhbUNvbnRyb2xsZXIucHVsbENhbGw/LnByb21pc2UsXG4gICAgICBzdHJlYW1Db250cm9sbGVyLmNhbmNlbENhbGw/LnByb21pc2UsXG4gICAgXSk7XG4gICAgZGVsZXRlIHRoaXMuc3RyZWFtQ29udHJvbGxlcnNbc3RyZWFtSWRdO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiNtZXNzYWdlQUM/LmFib3J0KCk7XG4gICAgdGhpcy4jbWVzc2FnZUFDID0gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgeyBNZXNzYWdlSGFuZGxlciwgd3JhcFJlYXNvbiB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDE1IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyB1bnJlYWNoYWJsZSB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG5jbGFzcyBCYXNlQ2FudmFzRmFjdG9yeSB7XG4gICNlbmFibGVIV0EgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcih7IGVuYWJsZUhXQSA9IGZhbHNlIH0pIHtcbiAgICBpZiAoXG4gICAgICAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSAmJlxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9PT0gQmFzZUNhbnZhc0ZhY3RvcnlcbiAgICApIHtcbiAgICAgIHVucmVhY2hhYmxlKFwiQ2Fubm90IGluaXRpYWxpemUgQmFzZUNhbnZhc0ZhY3RvcnkuXCIpO1xuICAgIH1cbiAgICB0aGlzLiNlbmFibGVIV0EgPSBlbmFibGVIV0E7XG4gIH1cblxuICBjcmVhdGUod2lkdGgsIGhlaWdodCkge1xuICAgIGlmICh3aWR0aCA8PSAwIHx8IGhlaWdodCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNhbnZhcyBzaXplXCIpO1xuICAgIH1cbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9jcmVhdGVDYW52YXMod2lkdGgsIGhlaWdodCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNhbnZhcyxcbiAgICAgIGNvbnRleHQ6IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiwge1xuICAgICAgICB3aWxsUmVhZEZyZXF1ZW50bHk6ICF0aGlzLiNlbmFibGVIV0EsXG4gICAgICB9KSxcbiAgICB9O1xuICB9XG5cbiAgcmVzZXQoY2FudmFzQW5kQ29udGV4dCwgd2lkdGgsIGhlaWdodCkge1xuICAgIGlmICghY2FudmFzQW5kQ29udGV4dC5jYW52YXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbnZhcyBpcyBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIH1cbiAgICBpZiAod2lkdGggPD0gMCB8fCBoZWlnaHQgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjYW52YXMgc2l6ZVwiKTtcbiAgICB9XG4gICAgY2FudmFzQW5kQ29udGV4dC5jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXNBbmRDb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBkZXN0cm95KGNhbnZhc0FuZENvbnRleHQpIHtcbiAgICBpZiAoIWNhbnZhc0FuZENvbnRleHQuY2FudmFzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW52YXMgaXMgbm90IHNwZWNpZmllZFwiKTtcbiAgICB9XG4gICAgLy8gWmVyb2luZyB0aGUgd2lkdGggYW5kIGhlaWdodCBjYXVzZSBGaXJlZm94IHRvIHJlbGVhc2UgZ3JhcGhpY3NcbiAgICAvLyByZXNvdXJjZXMgaW1tZWRpYXRlbHksIHdoaWNoIGNhbiBncmVhdGx5IHJlZHVjZSBtZW1vcnkgY29uc3VtcHRpb24uXG4gICAgY2FudmFzQW5kQ29udGV4dC5jYW52YXMud2lkdGggPSAwO1xuICAgIGNhbnZhc0FuZENvbnRleHQuY2FudmFzLmhlaWdodCA9IDA7XG4gICAgY2FudmFzQW5kQ29udGV4dC5jYW52YXMgPSBudWxsO1xuICAgIGNhbnZhc0FuZENvbnRleHQuY29udGV4dCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgX2NyZWF0ZUNhbnZhcyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdW5yZWFjaGFibGUoXCJBYnN0cmFjdCBtZXRob2QgYF9jcmVhdGVDYW52YXNgIGNhbGxlZC5cIik7XG4gIH1cbn1cblxuY2xhc3MgRE9NQ2FudmFzRmFjdG9yeSBleHRlbmRzIEJhc2VDYW52YXNGYWN0b3J5IHtcbiAgY29uc3RydWN0b3IoeyBvd25lckRvY3VtZW50ID0gZ2xvYmFsVGhpcy5kb2N1bWVudCwgZW5hYmxlSFdBID0gZmFsc2UgfSkge1xuICAgIHN1cGVyKHsgZW5hYmxlSFdBIH0pO1xuICAgIHRoaXMuX2RvY3VtZW50ID0gb3duZXJEb2N1bWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBfY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfVxufVxuXG5leHBvcnQgeyBCYXNlQ2FudmFzRmFjdG9yeSwgRE9NQ2FudmFzRmFjdG9yeSB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDE1IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBzdHJpbmdUb0J5dGVzLCB1bnJlYWNoYWJsZSB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgZmV0Y2hEYXRhIH0gZnJvbSBcIi4vZGlzcGxheV91dGlscy5qc1wiO1xuXG5jbGFzcyBCYXNlQ01hcFJlYWRlckZhY3Rvcnkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwgPSBudWxsLCBpc0NvbXByZXNzZWQgPSB0cnVlIH0pIHtcbiAgICBpZiAoXG4gICAgICAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSAmJlxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9PT0gQmFzZUNNYXBSZWFkZXJGYWN0b3J5XG4gICAgKSB7XG4gICAgICB1bnJlYWNoYWJsZShcIkNhbm5vdCBpbml0aWFsaXplIEJhc2VDTWFwUmVhZGVyRmFjdG9yeS5cIik7XG4gICAgfVxuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5pc0NvbXByZXNzZWQgPSBpc0NvbXByZXNzZWQ7XG4gIH1cblxuICBhc3luYyBmZXRjaCh7IG5hbWUgfSkge1xuICAgIGlmICghdGhpcy5iYXNlVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRW5zdXJlIHRoYXQgdGhlIGBjTWFwVXJsYCBhbmQgYGNNYXBQYWNrZWRgIEFQSSBwYXJhbWV0ZXJzIGFyZSBwcm92aWRlZC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDTWFwIG5hbWUgbXVzdCBiZSBzcGVjaWZpZWQuXCIpO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSB0aGlzLmJhc2VVcmwgKyBuYW1lICsgKHRoaXMuaXNDb21wcmVzc2VkID8gXCIuYmNtYXBcIiA6IFwiXCIpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2ZldGNoKHVybClcbiAgICAgIC50aGVuKGNNYXBEYXRhID0+ICh7IGNNYXBEYXRhLCBpc0NvbXByZXNzZWQ6IHRoaXMuaXNDb21wcmVzc2VkIH0pKVxuICAgICAgLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgVW5hYmxlIHRvIGxvYWQgJHt0aGlzLmlzQ29tcHJlc3NlZCA/IFwiYmluYXJ5IFwiIDogXCJcIn1DTWFwIGF0OiAke3VybH1gXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFVpbnQ4QXJyYXk+fVxuICAgKi9cbiAgYXN5bmMgX2ZldGNoKHVybCkge1xuICAgIHVucmVhY2hhYmxlKFwiQWJzdHJhY3QgbWV0aG9kIGBfZmV0Y2hgIGNhbGxlZC5cIik7XG4gIH1cbn1cblxuY2xhc3MgRE9NQ01hcFJlYWRlckZhY3RvcnkgZXh0ZW5kcyBCYXNlQ01hcFJlYWRlckZhY3Rvcnkge1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgYXN5bmMgX2ZldGNoKHVybCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaERhdGEoXG4gICAgICB1cmwsXG4gICAgICAvKiB0eXBlID0gKi8gdGhpcy5pc0NvbXByZXNzZWQgPyBcImFycmF5YnVmZmVyXCIgOiBcInRleHRcIlxuICAgICk7XG4gICAgcmV0dXJuIGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlclxuICAgICAgPyBuZXcgVWludDhBcnJheShkYXRhKVxuICAgICAgOiBzdHJpbmdUb0J5dGVzKGRhdGEpO1xuICB9XG59XG5cbmV4cG9ydCB7IEJhc2VDTWFwUmVhZGVyRmFjdG9yeSwgRE9NQ01hcFJlYWRlckZhY3RvcnkgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxNSBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZ2V0UkdCLCBpc0RhdGFTY2hlbWUsIFNWR19OUyB9IGZyb20gXCIuL2Rpc3BsYXlfdXRpbHMuanNcIjtcbmltcG9ydCB7IHVucmVhY2hhYmxlLCBVdGlsLCB3YXJuIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5cbmNsYXNzIEJhc2VGaWx0ZXJGYWN0b3J5IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKFxuICAgICAgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkgJiZcbiAgICAgIHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VGaWx0ZXJGYWN0b3J5XG4gICAgKSB7XG4gICAgICB1bnJlYWNoYWJsZShcIkNhbm5vdCBpbml0aWFsaXplIEJhc2VGaWx0ZXJGYWN0b3J5LlwiKTtcbiAgICB9XG4gIH1cblxuICBhZGRGaWx0ZXIobWFwcykge1xuICAgIHJldHVybiBcIm5vbmVcIjtcbiAgfVxuXG4gIGFkZEhDTUZpbHRlcihmZ0NvbG9yLCBiZ0NvbG9yKSB7XG4gICAgcmV0dXJuIFwibm9uZVwiO1xuICB9XG5cbiAgYWRkQWxwaGFGaWx0ZXIobWFwKSB7XG4gICAgcmV0dXJuIFwibm9uZVwiO1xuICB9XG5cbiAgYWRkTHVtaW5vc2l0eUZpbHRlcihtYXApIHtcbiAgICByZXR1cm4gXCJub25lXCI7XG4gIH1cblxuICBhZGRIaWdobGlnaHRIQ01GaWx0ZXIoZmlsdGVyTmFtZSwgZmdDb2xvciwgYmdDb2xvciwgbmV3RmdDb2xvciwgbmV3QmdDb2xvcikge1xuICAgIHJldHVybiBcIm5vbmVcIjtcbiAgfVxuXG4gIGRlc3Ryb3koa2VlcEhDTSA9IGZhbHNlKSB7fVxufVxuXG4vKipcbiAqIEZpbHRlckZhY3RvcnkgYWltcyB0byBjcmVhdGUgc29tZSBTVkcgZmlsdGVycyB3ZSBjYW4gdXNlIHdoZW4gZHJhd2luZyBhblxuICogaW1hZ2UgKG9yIHdoYXRldmVyKSBvbiBhIGNhbnZhcy5cbiAqIEZpbHRlcnMgYXJlbid0IGFwcGxpZWQgd2l0aCBjdHgucHV0SW1hZ2VEYXRhIGJlY2F1c2UgaXQganVzdCBvdmVyd3JpdGVzIHRoZVxuICogdW5kZXJseWluZyBwaXhlbHMuXG4gKiBXaXRoIHRoZXNlIGZpbHRlcnMsIGl0J3MgcG9zc2libGUgZm9yIGV4YW1wbGUgdG8gYXBwbHkgc29tZSB0cmFuc2ZlciBtYXBzIG9uXG4gKiBhbiBpbWFnZSB3aXRob3V0IHRoZSBuZWVkIHRvIGFwcGx5IHRoZW0gb24gdGhlIHBpeGVsIGFycmF5czogdGhlIHJlbmRlcmVyXG4gKiBkb2VzIHRoZSBtYWdpYyBmb3IgdXMuXG4gKi9cbmNsYXNzIERPTUZpbHRlckZhY3RvcnkgZXh0ZW5kcyBCYXNlRmlsdGVyRmFjdG9yeSB7XG4gICNiYXNlVXJsO1xuXG4gICNfY2FjaGU7XG5cbiAgI19kZWZzO1xuXG4gICNkb2NJZDtcblxuICAjZG9jdW1lbnQ7XG5cbiAgI19oY21DYWNoZTtcblxuICAjaWQgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKHsgZG9jSWQsIG93bmVyRG9jdW1lbnQgPSBnbG9iYWxUaGlzLmRvY3VtZW50IH0pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuI2RvY0lkID0gZG9jSWQ7XG4gICAgdGhpcy4jZG9jdW1lbnQgPSBvd25lckRvY3VtZW50O1xuICB9XG5cbiAgZ2V0ICNjYWNoZSgpIHtcbiAgICByZXR1cm4gKHRoaXMuI19jYWNoZSB8fD0gbmV3IE1hcCgpKTtcbiAgfVxuXG4gIGdldCAjaGNtQ2FjaGUoKSB7XG4gICAgcmV0dXJuICh0aGlzLiNfaGNtQ2FjaGUgfHw9IG5ldyBNYXAoKSk7XG4gIH1cblxuICBnZXQgI2RlZnMoKSB7XG4gICAgaWYgKCF0aGlzLiNfZGVmcykge1xuICAgICAgY29uc3QgZGl2ID0gdGhpcy4jZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IGRpdjtcbiAgICAgIHN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgc3R5bGUuY29udGFpbiA9IFwic3RyaWN0XCI7XG4gICAgICBzdHlsZS53aWR0aCA9IHN0eWxlLmhlaWdodCA9IDA7XG4gICAgICBzdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgIHN0eWxlLnRvcCA9IHN0eWxlLmxlZnQgPSAwO1xuICAgICAgc3R5bGUuekluZGV4ID0gLTE7XG5cbiAgICAgIGNvbnN0IHN2ZyA9IHRoaXMuI2RvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhTVkdfTlMsIFwic3ZnXCIpO1xuICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIDApO1xuICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCAwKTtcbiAgICAgIHRoaXMuI19kZWZzID0gdGhpcy4jZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgXCJkZWZzXCIpO1xuICAgICAgZGl2LmFwcGVuZChzdmcpO1xuICAgICAgc3ZnLmFwcGVuZCh0aGlzLiNfZGVmcyk7XG4gICAgICB0aGlzLiNkb2N1bWVudC5ib2R5LmFwcGVuZChkaXYpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy4jX2RlZnM7XG4gIH1cblxuICAjY3JlYXRlVGFibGVzKG1hcHMpIHtcbiAgICBpZiAobWFwcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IG1hcFIgPSBtYXBzWzBdO1xuICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5KDI1Nik7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICAgIGJ1ZmZlcltpXSA9IG1hcFJbaV0gLyAyNTU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhYmxlID0gYnVmZmVyLmpvaW4oXCIsXCIpO1xuICAgICAgcmV0dXJuIFt0YWJsZSwgdGFibGUsIHRhYmxlXTtcbiAgICB9XG5cbiAgICBjb25zdCBbbWFwUiwgbWFwRywgbWFwQl0gPSBtYXBzO1xuICAgIGNvbnN0IGJ1ZmZlclIgPSBuZXcgQXJyYXkoMjU2KTtcbiAgICBjb25zdCBidWZmZXJHID0gbmV3IEFycmF5KDI1Nik7XG4gICAgY29uc3QgYnVmZmVyQiA9IG5ldyBBcnJheSgyNTYpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgIGJ1ZmZlclJbaV0gPSBtYXBSW2ldIC8gMjU1O1xuICAgICAgYnVmZmVyR1tpXSA9IG1hcEdbaV0gLyAyNTU7XG4gICAgICBidWZmZXJCW2ldID0gbWFwQltpXSAvIDI1NTtcbiAgICB9XG4gICAgcmV0dXJuIFtidWZmZXJSLmpvaW4oXCIsXCIpLCBidWZmZXJHLmpvaW4oXCIsXCIpLCBidWZmZXJCLmpvaW4oXCIsXCIpXTtcbiAgfVxuXG4gICNjcmVhdGVVcmwoaWQpIHtcbiAgICBpZiAodGhpcy4jYmFzZVVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBVbmxlc3MgYSBgPGJhc2U+YC1lbGVtZW50IGlzIHByZXNlbnQgYSByZWxhdGl2ZSBVUkwgc2hvdWxkIHdvcmsuXG4gICAgICB0aGlzLiNiYXNlVXJsID0gXCJcIjtcblxuICAgICAgY29uc3QgdXJsID0gdGhpcy4jZG9jdW1lbnQuVVJMO1xuICAgICAgaWYgKHVybCAhPT0gdGhpcy4jZG9jdW1lbnQuYmFzZVVSSSkge1xuICAgICAgICBpZiAoaXNEYXRhU2NoZW1lKHVybCkpIHtcbiAgICAgICAgICB3YXJuKCcjY3JlYXRlVXJsOiBpZ25vcmUgXCJkYXRhOlwiLVVSTCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiNiYXNlVXJsID0gdXJsLnNwbGl0KFwiI1wiLCAxKVswXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYHVybCgke3RoaXMuI2Jhc2VVcmx9IyR7aWR9KWA7XG4gIH1cblxuICBhZGRGaWx0ZXIobWFwcykge1xuICAgIGlmICghbWFwcykge1xuICAgICAgcmV0dXJuIFwibm9uZVwiO1xuICAgIH1cblxuICAgIC8vIFdoZW4gYSBwYWdlIGlzIHpvb21lZCB0aGUgcGFnZSBpcyByZS1kcmF3biBidXQgdGhlIG1hcHMgYXJlIGxpa2VseVxuICAgIC8vIHRoZSBzYW1lLlxuICAgIGxldCB2YWx1ZSA9IHRoaXMuI2NhY2hlLmdldChtYXBzKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBbdGFibGVSLCB0YWJsZUcsIHRhYmxlQl0gPSB0aGlzLiNjcmVhdGVUYWJsZXMobWFwcyk7XG4gICAgY29uc3Qga2V5ID0gbWFwcy5sZW5ndGggPT09IDEgPyB0YWJsZVIgOiBgJHt0YWJsZVJ9JHt0YWJsZUd9JHt0YWJsZUJ9YDtcblxuICAgIHZhbHVlID0gdGhpcy4jY2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLiNjYWNoZS5zZXQobWFwcywgdmFsdWUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIFdlIGNyZWF0ZSBhIFNWRyBmaWx0ZXI6IGZlQ29tcG9uZW50VHJhbnNmZXJFbGVtZW50XG4gICAgLy8gIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9maWx0ZXJzLmh0bWwjZmVDb21wb25lbnRUcmFuc2ZlckVsZW1lbnRcblxuICAgIGNvbnN0IGlkID0gYGdfJHt0aGlzLiNkb2NJZH1fdHJhbnNmZXJfbWFwXyR7dGhpcy4jaWQrK31gO1xuICAgIGNvbnN0IHVybCA9IHRoaXMuI2NyZWF0ZVVybChpZCk7XG4gICAgdGhpcy4jY2FjaGUuc2V0KG1hcHMsIHVybCk7XG4gICAgdGhpcy4jY2FjaGUuc2V0KGtleSwgdXJsKTtcblxuICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuI2NyZWF0ZUZpbHRlcihpZCk7XG4gICAgdGhpcy4jYWRkVHJhbnNmZXJNYXBDb252ZXJzaW9uKHRhYmxlUiwgdGFibGVHLCB0YWJsZUIsIGZpbHRlcik7XG5cbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgYWRkSENNRmlsdGVyKGZnQ29sb3IsIGJnQ29sb3IpIHtcbiAgICBjb25zdCBrZXkgPSBgJHtmZ0NvbG9yfS0ke2JnQ29sb3J9YDtcbiAgICBjb25zdCBmaWx0ZXJOYW1lID0gXCJiYXNlXCI7XG4gICAgbGV0IGluZm8gPSB0aGlzLiNoY21DYWNoZS5nZXQoZmlsdGVyTmFtZSk7XG4gICAgaWYgKGluZm8/LmtleSA9PT0ga2V5KSB7XG4gICAgICByZXR1cm4gaW5mby51cmw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8pIHtcbiAgICAgIGluZm8uZmlsdGVyPy5yZW1vdmUoKTtcbiAgICAgIGluZm8ua2V5ID0ga2V5O1xuICAgICAgaW5mby51cmwgPSBcIm5vbmVcIjtcbiAgICAgIGluZm8uZmlsdGVyID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5mbyA9IHtcbiAgICAgICAga2V5LFxuICAgICAgICB1cmw6IFwibm9uZVwiLFxuICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICB9O1xuICAgICAgdGhpcy4jaGNtQ2FjaGUuc2V0KGZpbHRlck5hbWUsIGluZm8pO1xuICAgIH1cblxuICAgIGlmICghZmdDb2xvciB8fCAhYmdDb2xvcikge1xuICAgICAgcmV0dXJuIGluZm8udXJsO1xuICAgIH1cblxuICAgIGNvbnN0IGZnUkdCID0gdGhpcy4jZ2V0UkdCKGZnQ29sb3IpO1xuICAgIGZnQ29sb3IgPSBVdGlsLm1ha2VIZXhDb2xvciguLi5mZ1JHQik7XG4gICAgY29uc3QgYmdSR0IgPSB0aGlzLiNnZXRSR0IoYmdDb2xvcik7XG4gICAgYmdDb2xvciA9IFV0aWwubWFrZUhleENvbG9yKC4uLmJnUkdCKTtcbiAgICB0aGlzLiNkZWZzLnN0eWxlLmNvbG9yID0gXCJcIjtcblxuICAgIGlmIChcbiAgICAgIChmZ0NvbG9yID09PSBcIiMwMDAwMDBcIiAmJiBiZ0NvbG9yID09PSBcIiNmZmZmZmZcIikgfHxcbiAgICAgIGZnQ29sb3IgPT09IGJnQ29sb3JcbiAgICApIHtcbiAgICAgIHJldHVybiBpbmZvLnVybDtcbiAgICB9XG5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BY2Nlc3NpYmlsaXR5L1VuZGVyc3RhbmRpbmdfQ29sb3JzX2FuZF9MdW1pbmFuY2VcbiAgICAvL1xuICAgIC8vIFJlbGF0aXZlIGx1bWluYW5jZTpcbiAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvV0NBRzIwLyNyZWxhdGl2ZWx1bWluYW5jZWRlZlxuICAgIC8vXG4gICAgLy8gV2UgY29tcHV0ZSB0aGUgcm91bmRlZCBsdW1pbmFuY2Ugb2YgdGhlIGRlZmF1bHQgYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyBUaGVuIGZvciBldmVyeSBjb2xvciBpbiB0aGUgcGRmLCBpZiBpdHMgcm91bmRlZCBsdW1pbmFuY2UgaXMgdGhlXG4gICAgLy8gc2FtZSBhcyB0aGUgYmFja2dyb3VuZCBvbmUgdGhlbiBpdCdzIHJlcGxhY2VkIGJ5IHRoZSBuZXdcbiAgICAvLyBiYWNrZ3JvdW5kIGNvbG9yIGVsc2UgYnkgdGhlIGZvcmVncm91bmQgb25lLlxuICAgIGNvbnN0IG1hcCA9IG5ldyBBcnJheSgyNTYpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDI1NTsgaSsrKSB7XG4gICAgICBjb25zdCB4ID0gaSAvIDI1NTtcbiAgICAgIG1hcFtpXSA9IHggPD0gMC4wMzkyOCA/IHggLyAxMi45MiA6ICgoeCArIDAuMDU1KSAvIDEuMDU1KSAqKiAyLjQ7XG4gICAgfVxuICAgIGNvbnN0IHRhYmxlID0gbWFwLmpvaW4oXCIsXCIpO1xuXG4gICAgY29uc3QgaWQgPSBgZ18ke3RoaXMuI2RvY0lkfV9oY21fZmlsdGVyYDtcbiAgICBjb25zdCBmaWx0ZXIgPSAoaW5mby5maWx0ZXIgPSB0aGlzLiNjcmVhdGVGaWx0ZXIoaWQpKTtcbiAgICB0aGlzLiNhZGRUcmFuc2Zlck1hcENvbnZlcnNpb24odGFibGUsIHRhYmxlLCB0YWJsZSwgZmlsdGVyKTtcbiAgICB0aGlzLiNhZGRHcmF5Q29udmVyc2lvbihmaWx0ZXIpO1xuXG4gICAgY29uc3QgZ2V0U3RlcHMgPSAoYywgbikgPT4ge1xuICAgICAgY29uc3Qgc3RhcnQgPSBmZ1JHQltjXSAvIDI1NTtcbiAgICAgIGNvbnN0IGVuZCA9IGJnUkdCW2NdIC8gMjU1O1xuICAgICAgY29uc3QgYXJyID0gbmV3IEFycmF5KG4gKyAxKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG47IGkrKykge1xuICAgICAgICBhcnJbaV0gPSBzdGFydCArIChpIC8gbikgKiAoZW5kIC0gc3RhcnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFyci5qb2luKFwiLFwiKTtcbiAgICB9O1xuICAgIHRoaXMuI2FkZFRyYW5zZmVyTWFwQ29udmVyc2lvbihcbiAgICAgIGdldFN0ZXBzKDAsIDUpLFxuICAgICAgZ2V0U3RlcHMoMSwgNSksXG4gICAgICBnZXRTdGVwcygyLCA1KSxcbiAgICAgIGZpbHRlclxuICAgICk7XG5cbiAgICBpbmZvLnVybCA9IHRoaXMuI2NyZWF0ZVVybChpZCk7XG4gICAgcmV0dXJuIGluZm8udXJsO1xuICB9XG5cbiAgYWRkQWxwaGFGaWx0ZXIobWFwKSB7XG4gICAgLy8gV2hlbiBhIHBhZ2UgaXMgem9vbWVkIHRoZSBwYWdlIGlzIHJlLWRyYXduIGJ1dCB0aGUgbWFwcyBhcmUgbGlrZWx5XG4gICAgLy8gdGhlIHNhbWUuXG4gICAgbGV0IHZhbHVlID0gdGhpcy4jY2FjaGUuZ2V0KG1hcCk7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3QgW3RhYmxlQV0gPSB0aGlzLiNjcmVhdGVUYWJsZXMoW21hcF0pO1xuICAgIGNvbnN0IGtleSA9IGBhbHBoYV8ke3RhYmxlQX1gO1xuXG4gICAgdmFsdWUgPSB0aGlzLiNjYWNoZS5nZXQoa2V5KTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuI2NhY2hlLnNldChtYXAsIHZhbHVlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBpZCA9IGBnXyR7dGhpcy4jZG9jSWR9X2FscGhhX21hcF8ke3RoaXMuI2lkKyt9YDtcbiAgICBjb25zdCB1cmwgPSB0aGlzLiNjcmVhdGVVcmwoaWQpO1xuICAgIHRoaXMuI2NhY2hlLnNldChtYXAsIHVybCk7XG4gICAgdGhpcy4jY2FjaGUuc2V0KGtleSwgdXJsKTtcblxuICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuI2NyZWF0ZUZpbHRlcihpZCk7XG4gICAgdGhpcy4jYWRkVHJhbnNmZXJNYXBBbHBoYUNvbnZlcnNpb24odGFibGVBLCBmaWx0ZXIpO1xuXG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIGFkZEx1bWlub3NpdHlGaWx0ZXIobWFwKSB7XG4gICAgLy8gV2hlbiBhIHBhZ2UgaXMgem9vbWVkIHRoZSBwYWdlIGlzIHJlLWRyYXduIGJ1dCB0aGUgbWFwcyBhcmUgbGlrZWx5XG4gICAgLy8gdGhlIHNhbWUuXG4gICAgbGV0IHZhbHVlID0gdGhpcy4jY2FjaGUuZ2V0KG1hcCB8fCBcImx1bWlub3NpdHlcIik7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgbGV0IHRhYmxlQSwga2V5O1xuICAgIGlmIChtYXApIHtcbiAgICAgIFt0YWJsZUFdID0gdGhpcy4jY3JlYXRlVGFibGVzKFttYXBdKTtcbiAgICAgIGtleSA9IGBsdW1pbm9zaXR5XyR7dGFibGVBfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSA9IFwibHVtaW5vc2l0eVwiO1xuICAgIH1cblxuICAgIHZhbHVlID0gdGhpcy4jY2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLiNjYWNoZS5zZXQobWFwLCB2YWx1ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3QgaWQgPSBgZ18ke3RoaXMuI2RvY0lkfV9sdW1pbm9zaXR5X21hcF8ke3RoaXMuI2lkKyt9YDtcbiAgICBjb25zdCB1cmwgPSB0aGlzLiNjcmVhdGVVcmwoaWQpO1xuICAgIHRoaXMuI2NhY2hlLnNldChtYXAsIHVybCk7XG4gICAgdGhpcy4jY2FjaGUuc2V0KGtleSwgdXJsKTtcblxuICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuI2NyZWF0ZUZpbHRlcihpZCk7XG4gICAgdGhpcy4jYWRkTHVtaW5vc2l0eUNvbnZlcnNpb24oZmlsdGVyKTtcbiAgICBpZiAobWFwKSB7XG4gICAgICB0aGlzLiNhZGRUcmFuc2Zlck1hcEFscGhhQ29udmVyc2lvbih0YWJsZUEsIGZpbHRlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIGFkZEhpZ2hsaWdodEhDTUZpbHRlcihmaWx0ZXJOYW1lLCBmZ0NvbG9yLCBiZ0NvbG9yLCBuZXdGZ0NvbG9yLCBuZXdCZ0NvbG9yKSB7XG4gICAgY29uc3Qga2V5ID0gYCR7ZmdDb2xvcn0tJHtiZ0NvbG9yfS0ke25ld0ZnQ29sb3J9LSR7bmV3QmdDb2xvcn1gO1xuICAgIGxldCBpbmZvID0gdGhpcy4jaGNtQ2FjaGUuZ2V0KGZpbHRlck5hbWUpO1xuICAgIGlmIChpbmZvPy5rZXkgPT09IGtleSkge1xuICAgICAgcmV0dXJuIGluZm8udXJsO1xuICAgIH1cblxuICAgIGlmIChpbmZvKSB7XG4gICAgICBpbmZvLmZpbHRlcj8ucmVtb3ZlKCk7XG4gICAgICBpbmZvLmtleSA9IGtleTtcbiAgICAgIGluZm8udXJsID0gXCJub25lXCI7XG4gICAgICBpbmZvLmZpbHRlciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluZm8gPSB7XG4gICAgICAgIGtleSxcbiAgICAgICAgdXJsOiBcIm5vbmVcIixcbiAgICAgICAgZmlsdGVyOiBudWxsLFxuICAgICAgfTtcbiAgICAgIHRoaXMuI2hjbUNhY2hlLnNldChmaWx0ZXJOYW1lLCBpbmZvKTtcbiAgICB9XG5cbiAgICBpZiAoIWZnQ29sb3IgfHwgIWJnQ29sb3IpIHtcbiAgICAgIHJldHVybiBpbmZvLnVybDtcbiAgICB9XG5cbiAgICBjb25zdCBbZmdSR0IsIGJnUkdCXSA9IFtmZ0NvbG9yLCBiZ0NvbG9yXS5tYXAodGhpcy4jZ2V0UkdCLmJpbmQodGhpcykpO1xuICAgIGxldCBmZ0dyYXkgPSBNYXRoLnJvdW5kKFxuICAgICAgMC4yMTI2ICogZmdSR0JbMF0gKyAwLjcxNTIgKiBmZ1JHQlsxXSArIDAuMDcyMiAqIGZnUkdCWzJdXG4gICAgKTtcbiAgICBsZXQgYmdHcmF5ID0gTWF0aC5yb3VuZChcbiAgICAgIDAuMjEyNiAqIGJnUkdCWzBdICsgMC43MTUyICogYmdSR0JbMV0gKyAwLjA3MjIgKiBiZ1JHQlsyXVxuICAgICk7XG4gICAgbGV0IFtuZXdGZ1JHQiwgbmV3QmdSR0JdID0gW25ld0ZnQ29sb3IsIG5ld0JnQ29sb3JdLm1hcChcbiAgICAgIHRoaXMuI2dldFJHQi5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICBpZiAoYmdHcmF5IDwgZmdHcmF5KSB7XG4gICAgICBbZmdHcmF5LCBiZ0dyYXksIG5ld0ZnUkdCLCBuZXdCZ1JHQl0gPSBbXG4gICAgICAgIGJnR3JheSxcbiAgICAgICAgZmdHcmF5LFxuICAgICAgICBuZXdCZ1JHQixcbiAgICAgICAgbmV3RmdSR0IsXG4gICAgICBdO1xuICAgIH1cbiAgICB0aGlzLiNkZWZzLnN0eWxlLmNvbG9yID0gXCJcIjtcblxuICAgIC8vIE5vdyB3ZSBjYW4gY3JlYXRlIHRoZSBmaWx0ZXJzIHRvIGhpZ2hsaWdodCBzb21lIGNhbnZhcyBwYXJ0cy5cbiAgICAvLyBUaGUgY29sb3JzIGluIHRoZSBwZGYgd2lsbCBhbG1vc3QgYmUgQ2FudmFzIGFuZCBDYW52YXNUZXh0LCBoZW5jZSB3ZVxuICAgIC8vIHdhbnQgdG8gZmlsdGVyIHRoZW0gdG8gZmluYWxseSBnZXQgSGlnaGxpZ2h0IGFuZCBIaWdobGlnaHRUZXh0LlxuICAgIC8vIFNpbmNlIHdlJ3JlIGluIEhDTSB0aGUgYmFja2dyb3VuZCBjb2xvciBhbmQgdGhlIGZvcmVncm91bmQgY29sb3Igc2hvdWxkXG4gICAgLy8gYmUgcmVhbGx5IGRpZmZlcmVudCB3aGVuIGNvbnZlcnRlZCB0byBncmF5c2NhbGUgKGlmIHRoZXkncmUgbm90IHRoZW4gaXRcbiAgICAvLyBtZWFucyB0aGF0IHdlJ3ZlIGEgcG9vciBjb250cmFzdCkuIE9uY2UgdGhlIGNhbnZhcyBjb2xvcnMgYXJlIGNvbnZlcnRlZFxuICAgIC8vIHRvIGdyYXlzY2FsZSB3ZSBjYW4gZWFzaWx5IG1hcCB0aGVtIG9uIHRoZWlyIG5ldyBjb2xvcnMuXG4gICAgLy8gVGhlIGdyYXlzY2FsZSBzdGVwIGlzIGltcG9ydGFudCBiZWNhdXNlIGlmIHdlJ3ZlIHNvbWV0aGluZyBsaWtlOlxuICAgIC8vICAgZmdDb2xvciA9ICNGRi4uLi5cbiAgICAvLyAgIGJnQ29sb3IgPSAjRkYuLi4uXG4gICAgLy8gICB0aGVuIHdlIGFyZSBlbmFibGUgdG8gbWFwIHRoZSByZWQgY29tcG9uZW50IG9uIHRoZSBuZXcgcmVkIGNvbXBvbmVudHNcbiAgICAvLyAgIHdoaWNoIGNhbiBiZSBkaWZmZXJlbnQuXG5cbiAgICBjb25zdCBnZXRTdGVwcyA9IChmZywgYmcsIG4pID0+IHtcbiAgICAgIGNvbnN0IGFyciA9IG5ldyBBcnJheSgyNTYpO1xuICAgICAgY29uc3Qgc3RlcCA9IChiZ0dyYXkgLSBmZ0dyYXkpIC8gbjtcbiAgICAgIGNvbnN0IG5ld1N0YXJ0ID0gZmcgLyAyNTU7XG4gICAgICBjb25zdCBuZXdTdGVwID0gKGJnIC0gZmcpIC8gKDI1NSAqIG4pO1xuICAgICAgbGV0IHByZXYgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGsgPSBNYXRoLnJvdW5kKGZnR3JheSArIGkgKiBzdGVwKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBuZXdTdGFydCArIGkgKiBuZXdTdGVwO1xuICAgICAgICBmb3IgKGxldCBqID0gcHJldjsgaiA8PSBrOyBqKyspIHtcbiAgICAgICAgICBhcnJbal0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2ID0gayArIDE7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gcHJldjsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IGFycltwcmV2IC0gMV07XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyLmpvaW4oXCIsXCIpO1xuICAgIH07XG5cbiAgICBjb25zdCBpZCA9IGBnXyR7dGhpcy4jZG9jSWR9X2hjbV8ke2ZpbHRlck5hbWV9X2ZpbHRlcmA7XG4gICAgY29uc3QgZmlsdGVyID0gKGluZm8uZmlsdGVyID0gdGhpcy4jY3JlYXRlRmlsdGVyKGlkKSk7XG5cbiAgICB0aGlzLiNhZGRHcmF5Q29udmVyc2lvbihmaWx0ZXIpO1xuICAgIHRoaXMuI2FkZFRyYW5zZmVyTWFwQ29udmVyc2lvbihcbiAgICAgIGdldFN0ZXBzKG5ld0ZnUkdCWzBdLCBuZXdCZ1JHQlswXSwgNSksXG4gICAgICBnZXRTdGVwcyhuZXdGZ1JHQlsxXSwgbmV3QmdSR0JbMV0sIDUpLFxuICAgICAgZ2V0U3RlcHMobmV3RmdSR0JbMl0sIG5ld0JnUkdCWzJdLCA1KSxcbiAgICAgIGZpbHRlclxuICAgICk7XG5cbiAgICBpbmZvLnVybCA9IHRoaXMuI2NyZWF0ZVVybChpZCk7XG4gICAgcmV0dXJuIGluZm8udXJsO1xuICB9XG5cbiAgZGVzdHJveShrZWVwSENNID0gZmFsc2UpIHtcbiAgICBpZiAoa2VlcEhDTSAmJiB0aGlzLiNfaGNtQ2FjaGU/LnNpemUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jX2RlZnM/LnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICB0aGlzLiNfZGVmcyA9IG51bGw7XG5cbiAgICB0aGlzLiNfY2FjaGU/LmNsZWFyKCk7XG4gICAgdGhpcy4jX2NhY2hlID0gbnVsbDtcblxuICAgIHRoaXMuI19oY21DYWNoZT8uY2xlYXIoKTtcbiAgICB0aGlzLiNfaGNtQ2FjaGUgPSBudWxsO1xuXG4gICAgdGhpcy4jaWQgPSAwO1xuICB9XG5cbiAgI2FkZEx1bWlub3NpdHlDb252ZXJzaW9uKGZpbHRlcikge1xuICAgIGNvbnN0IGZlQ29sb3JNYXRyaXggPSB0aGlzLiNkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXG4gICAgICBTVkdfTlMsXG4gICAgICBcImZlQ29sb3JNYXRyaXhcIlxuICAgICk7XG4gICAgZmVDb2xvck1hdHJpeC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwibWF0cml4XCIpO1xuICAgIGZlQ29sb3JNYXRyaXguc2V0QXR0cmlidXRlKFxuICAgICAgXCJ2YWx1ZXNcIixcbiAgICAgIFwiMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC4zIDAuNTkgMC4xMSAwIDBcIlxuICAgICk7XG4gICAgZmlsdGVyLmFwcGVuZChmZUNvbG9yTWF0cml4KTtcbiAgfVxuXG4gICNhZGRHcmF5Q29udmVyc2lvbihmaWx0ZXIpIHtcbiAgICBjb25zdCBmZUNvbG9yTWF0cml4ID0gdGhpcy4jZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFxuICAgICAgU1ZHX05TLFxuICAgICAgXCJmZUNvbG9yTWF0cml4XCJcbiAgICApO1xuICAgIGZlQ29sb3JNYXRyaXguc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcIm1hdHJpeFwiKTtcbiAgICBmZUNvbG9yTWF0cml4LnNldEF0dHJpYnV0ZShcbiAgICAgIFwidmFsdWVzXCIsXG4gICAgICBcIjAuMjEyNiAwLjcxNTIgMC4wNzIyIDAgMCAwLjIxMjYgMC43MTUyIDAuMDcyMiAwIDAgMC4yMTI2IDAuNzE1MiAwLjA3MjIgMCAwIDAgMCAwIDEgMFwiXG4gICAgKTtcbiAgICBmaWx0ZXIuYXBwZW5kKGZlQ29sb3JNYXRyaXgpO1xuICB9XG5cbiAgI2NyZWF0ZUZpbHRlcihpZCkge1xuICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuI2RvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhTVkdfTlMsIFwiZmlsdGVyXCIpO1xuICAgIGZpbHRlci5zZXRBdHRyaWJ1dGUoXCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnNcIiwgXCJzUkdCXCIpO1xuICAgIGZpbHRlci5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG4gICAgdGhpcy4jZGVmcy5hcHBlbmQoZmlsdGVyKTtcblxuICAgIHJldHVybiBmaWx0ZXI7XG4gIH1cblxuICAjYXBwZW5kRmVGdW5jKGZlQ29tcG9uZW50VHJhbnNmZXIsIGZ1bmMsIHRhYmxlKSB7XG4gICAgY29uc3QgZmVGdW5jID0gdGhpcy4jZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgZnVuYyk7XG4gICAgZmVGdW5jLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkaXNjcmV0ZVwiKTtcbiAgICBmZUZ1bmMuc2V0QXR0cmlidXRlKFwidGFibGVWYWx1ZXNcIiwgdGFibGUpO1xuICAgIGZlQ29tcG9uZW50VHJhbnNmZXIuYXBwZW5kKGZlRnVuYyk7XG4gIH1cblxuICAjYWRkVHJhbnNmZXJNYXBDb252ZXJzaW9uKHJUYWJsZSwgZ1RhYmxlLCBiVGFibGUsIGZpbHRlcikge1xuICAgIGNvbnN0IGZlQ29tcG9uZW50VHJhbnNmZXIgPSB0aGlzLiNkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXG4gICAgICBTVkdfTlMsXG4gICAgICBcImZlQ29tcG9uZW50VHJhbnNmZXJcIlxuICAgICk7XG4gICAgZmlsdGVyLmFwcGVuZChmZUNvbXBvbmVudFRyYW5zZmVyKTtcbiAgICB0aGlzLiNhcHBlbmRGZUZ1bmMoZmVDb21wb25lbnRUcmFuc2ZlciwgXCJmZUZ1bmNSXCIsIHJUYWJsZSk7XG4gICAgdGhpcy4jYXBwZW5kRmVGdW5jKGZlQ29tcG9uZW50VHJhbnNmZXIsIFwiZmVGdW5jR1wiLCBnVGFibGUpO1xuICAgIHRoaXMuI2FwcGVuZEZlRnVuYyhmZUNvbXBvbmVudFRyYW5zZmVyLCBcImZlRnVuY0JcIiwgYlRhYmxlKTtcbiAgfVxuXG4gICNhZGRUcmFuc2Zlck1hcEFscGhhQ29udmVyc2lvbihhVGFibGUsIGZpbHRlcikge1xuICAgIGNvbnN0IGZlQ29tcG9uZW50VHJhbnNmZXIgPSB0aGlzLiNkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXG4gICAgICBTVkdfTlMsXG4gICAgICBcImZlQ29tcG9uZW50VHJhbnNmZXJcIlxuICAgICk7XG4gICAgZmlsdGVyLmFwcGVuZChmZUNvbXBvbmVudFRyYW5zZmVyKTtcbiAgICB0aGlzLiNhcHBlbmRGZUZ1bmMoZmVDb21wb25lbnRUcmFuc2ZlciwgXCJmZUZ1bmNBXCIsIGFUYWJsZSk7XG4gIH1cblxuICAjZ2V0UkdCKGNvbG9yKSB7XG4gICAgdGhpcy4jZGVmcy5zdHlsZS5jb2xvciA9IGNvbG9yO1xuICAgIHJldHVybiBnZXRSR0IoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLiNkZWZzKS5nZXRQcm9wZXJ0eVZhbHVlKFwiY29sb3JcIikpO1xuICB9XG59XG5cbmV4cG9ydCB7IEJhc2VGaWx0ZXJGYWN0b3J5LCBET01GaWx0ZXJGYWN0b3J5IH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTUgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGZldGNoRGF0YSB9IGZyb20gXCIuL2Rpc3BsYXlfdXRpbHMuanNcIjtcbmltcG9ydCB7IHVucmVhY2hhYmxlIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5cbmNsYXNzIEJhc2VTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCA9IG51bGwgfSkge1xuICAgIGlmIChcbiAgICAgICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpICYmXG4gICAgICB0aGlzLmNvbnN0cnVjdG9yID09PSBCYXNlU3RhbmRhcmRGb250RGF0YUZhY3RvcnlcbiAgICApIHtcbiAgICAgIHVucmVhY2hhYmxlKFwiQ2Fubm90IGluaXRpYWxpemUgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5LlwiKTtcbiAgICB9XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcbiAgfVxuXG4gIGFzeW5jIGZldGNoKHsgZmlsZW5hbWUgfSkge1xuICAgIGlmICghdGhpcy5iYXNlVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRW5zdXJlIHRoYXQgdGhlIGBzdGFuZGFyZEZvbnREYXRhVXJsYCBBUEkgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLlwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIWZpbGVuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb250IGZpbGVuYW1lIG11c3QgYmUgc3BlY2lmaWVkLlwiKTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZmlsZW5hbWV9YDtcblxuICAgIHJldHVybiB0aGlzLl9mZXRjaCh1cmwpLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBsb2FkIGZvbnQgZGF0YSBhdDogJHt1cmx9YCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxVaW50OEFycmF5Pn1cbiAgICovXG4gIGFzeW5jIF9mZXRjaCh1cmwpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgX2ZldGNoYCBjYWxsZWQuXCIpO1xuICB9XG59XG5cbmNsYXNzIERPTVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IGV4dGVuZHMgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IHtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGFzeW5jIF9mZXRjaCh1cmwpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2hEYXRhKHVybCwgLyogdHlwZSA9ICovIFwiYXJyYXlidWZmZXJcIik7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICB9XG59XG5cbmV4cG9ydCB7IEJhc2VTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSwgRE9NU3RhbmRhcmRGb250RGF0YUZhY3RvcnkgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxNSBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZmV0Y2hEYXRhIH0gZnJvbSBcIi4vZGlzcGxheV91dGlscy5qc1wiO1xuaW1wb3J0IHsgdW5yZWFjaGFibGUgfSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcblxuY2xhc3MgQmFzZVdhc21GYWN0b3J5IHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsID0gbnVsbCB9KSB7XG4gICAgaWYgKFxuICAgICAgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkgJiZcbiAgICAgIHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VXYXNtRmFjdG9yeVxuICAgICkge1xuICAgICAgdW5yZWFjaGFibGUoXCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlV2FzbUZhY3RvcnkuXCIpO1xuICAgIH1cbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2goeyBmaWxlbmFtZSB9KSB7XG4gICAgaWYgKCF0aGlzLmJhc2VVcmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVuc3VyZSB0aGF0IHRoZSBgd2FzbVVybGAgQVBJIHBhcmFtZXRlciBpcyBwcm92aWRlZC5cIik7XG4gICAgfVxuICAgIGlmICghZmlsZW5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIldhc20gZmlsZW5hbWUgbXVzdCBiZSBzcGVjaWZpZWQuXCIpO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9JHtmaWxlbmFtZX1gO1xuXG4gICAgcmV0dXJuIHRoaXMuX2ZldGNoKHVybCkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGxvYWQgd2FzbSBkYXRhIGF0OiAke3VybH1gKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFVpbnQ4QXJyYXk+fVxuICAgKi9cbiAgYXN5bmMgX2ZldGNoKHVybCkge1xuICAgIHVucmVhY2hhYmxlKFwiQWJzdHJhY3QgbWV0aG9kIGBfZmV0Y2hgIGNhbGxlZC5cIik7XG4gIH1cbn1cblxuY2xhc3MgRE9NV2FzbUZhY3RvcnkgZXh0ZW5kcyBCYXNlV2FzbUZhY3Rvcnkge1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgYXN5bmMgX2ZldGNoKHVybCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaERhdGEodXJsLCAvKiB0eXBlID0gKi8gXCJhcnJheWJ1ZmZlclwiKTtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgQmFzZVdhc21GYWN0b3J5LCBET01XYXNtRmFjdG9yeSB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIwIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogZ2xvYmFscyBwcm9jZXNzICovXG5cbmltcG9ydCB7IGlzTm9kZUpTLCB3YXJuIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2FudmFzRmFjdG9yeSB9IGZyb20gXCIuL2NhbnZhc19mYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBCYXNlQ01hcFJlYWRlckZhY3RvcnkgfSBmcm9tIFwiLi9jbWFwX3JlYWRlcl9mYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBCYXNlRmlsdGVyRmFjdG9yeSB9IGZyb20gXCIuL2ZpbHRlcl9mYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBCYXNlU3RhbmRhcmRGb250RGF0YUZhY3RvcnkgfSBmcm9tIFwiLi9zdGFuZGFyZF9mb250ZGF0YV9mYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBCYXNlV2FzbUZhY3RvcnkgfSBmcm9tIFwiLi93YXNtX2ZhY3RvcnkuanNcIjtcblxuaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkge1xuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ01vZHVsZSBcIi4vbm9kZV91dGlscy5qc1wiIHNoYWxsIG5vdCBiZSB1c2VkIHdpdGggTU9aQ0VOVFJBTCBidWlsZHMuJ1xuICApO1xufVxuXG5pZiAoaXNOb2RlSlMpIHtcbiAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiU0tJUF9CQUJFTFwiKSkge1xuICAgIHdhcm4oXCJQbGVhc2UgdXNlIHRoZSBgbGVnYWN5YCBidWlsZCBpbiBOb2RlLmpzIGVudmlyb25tZW50cy5cIik7XG4gIH0gZWxzZSB7XG4gICAgbGV0IGNhbnZhcztcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVxdWlyZSA9IHByb2Nlc3NcbiAgICAgICAgLmdldEJ1aWx0aW5Nb2R1bGUoXCJtb2R1bGVcIilcbiAgICAgICAgLmNyZWF0ZVJlcXVpcmUoaW1wb3J0Lm1ldGEudXJsKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY2FudmFzID0gcmVxdWlyZShcIkBuYXBpLXJzL2NhbnZhc1wiKTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIHdhcm4oYENhbm5vdCBsb2FkIFwiQG5hcGktcnMvY2FudmFzXCIgcGFja2FnZTogXCIke2V4fVwiLmApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICB3YXJuKGBDYW5ub3QgYWNjZXNzIHRoZSBcXGByZXF1aXJlXFxgIGZ1bmN0aW9uOiBcIiR7ZXh9XCIuYCk7XG4gICAgfVxuXG4gICAgaWYgKCFnbG9iYWxUaGlzLkRPTU1hdHJpeCkge1xuICAgICAgaWYgKGNhbnZhcz8uRE9NTWF0cml4KSB7XG4gICAgICAgIGdsb2JhbFRoaXMuRE9NTWF0cml4ID0gY2FudmFzLkRPTU1hdHJpeDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oXCJDYW5ub3QgcG9seWZpbGwgYERPTU1hdHJpeGAsIHJlbmRlcmluZyBtYXkgYmUgYnJva2VuLlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFnbG9iYWxUaGlzLkltYWdlRGF0YSkge1xuICAgICAgaWYgKGNhbnZhcz8uSW1hZ2VEYXRhKSB7XG4gICAgICAgIGdsb2JhbFRoaXMuSW1hZ2VEYXRhID0gY2FudmFzLkltYWdlRGF0YTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oXCJDYW5ub3QgcG9seWZpbGwgYEltYWdlRGF0YWAsIHJlbmRlcmluZyBtYXkgYmUgYnJva2VuLlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFnbG9iYWxUaGlzLlBhdGgyRCkge1xuICAgICAgaWYgKGNhbnZhcz8uUGF0aDJEKSB7XG4gICAgICAgIGdsb2JhbFRoaXMuUGF0aDJEID0gY2FudmFzLlBhdGgyRDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oXCJDYW5ub3QgcG9seWZpbGwgYFBhdGgyRGAsIHJlbmRlcmluZyBtYXkgYmUgYnJva2VuLlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKHVybCkge1xuICBjb25zdCBmcyA9IHByb2Nlc3MuZ2V0QnVpbHRpbk1vZHVsZShcImZzXCIpO1xuICBjb25zdCBkYXRhID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZEZpbGUodXJsKTtcbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGRhdGEpO1xufVxuXG5jbGFzcyBOb2RlRmlsdGVyRmFjdG9yeSBleHRlbmRzIEJhc2VGaWx0ZXJGYWN0b3J5IHt9XG5cbmNsYXNzIE5vZGVDYW52YXNGYWN0b3J5IGV4dGVuZHMgQmFzZUNhbnZhc0ZhY3Rvcnkge1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgX2NyZWF0ZUNhbnZhcyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgY29uc3QgcmVxdWlyZSA9IHByb2Nlc3NcbiAgICAgIC5nZXRCdWlsdGluTW9kdWxlKFwibW9kdWxlXCIpXG4gICAgICAuY3JlYXRlUmVxdWlyZShpbXBvcnQubWV0YS51cmwpO1xuICAgIGNvbnN0IGNhbnZhcyA9IHJlcXVpcmUoXCJAbmFwaS1ycy9jYW52YXNcIik7XG4gICAgcmV0dXJuIGNhbnZhcy5jcmVhdGVDYW52YXMod2lkdGgsIGhlaWdodCk7XG4gIH1cbn1cblxuY2xhc3MgTm9kZUNNYXBSZWFkZXJGYWN0b3J5IGV4dGVuZHMgQmFzZUNNYXBSZWFkZXJGYWN0b3J5IHtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGFzeW5jIF9mZXRjaCh1cmwpIHtcbiAgICByZXR1cm4gZmV0Y2hEYXRhKHVybCk7XG4gIH1cbn1cblxuY2xhc3MgTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IGV4dGVuZHMgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IHtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGFzeW5jIF9mZXRjaCh1cmwpIHtcbiAgICByZXR1cm4gZmV0Y2hEYXRhKHVybCk7XG4gIH1cbn1cblxuY2xhc3MgTm9kZVdhc21GYWN0b3J5IGV4dGVuZHMgQmFzZVdhc21GYWN0b3J5IHtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGFzeW5jIF9mZXRjaCh1cmwpIHtcbiAgICByZXR1cm4gZmV0Y2hEYXRhKHVybCk7XG4gIH1cbn1cblxuZXhwb3J0IHtcbiAgZmV0Y2hEYXRhLFxuICBOb2RlQ2FudmFzRmFjdG9yeSxcbiAgTm9kZUNNYXBSZWFkZXJGYWN0b3J5LFxuICBOb2RlRmlsdGVyRmFjdG9yeSxcbiAgTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5LFxuICBOb2RlV2FzbUZhY3RvcnksXG59O1xuIiwgIi8qIENvcHlyaWdodCAyMDE0IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBGb3JtYXRFcnJvciwgaW5mbywgdW5yZWFjaGFibGUsIFV0aWwgfSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRUcmFuc2Zvcm0gfSBmcm9tIFwiLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5cbmNvbnN0IFBhdGhUeXBlID0ge1xuICBGSUxMOiBcIkZpbGxcIixcbiAgU1RST0tFOiBcIlN0cm9rZVwiLFxuICBTSEFESU5HOiBcIlNoYWRpbmdcIixcbn07XG5cbmZ1bmN0aW9uIGFwcGx5Qm91bmRpbmdCb3goY3R4LCBiYm94KSB7XG4gIGlmICghYmJveCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB3aWR0aCA9IGJib3hbMl0gLSBiYm94WzBdO1xuICBjb25zdCBoZWlnaHQgPSBiYm94WzNdIC0gYmJveFsxXTtcbiAgY29uc3QgcmVnaW9uID0gbmV3IFBhdGgyRCgpO1xuICByZWdpb24ucmVjdChiYm94WzBdLCBiYm94WzFdLCB3aWR0aCwgaGVpZ2h0KTtcbiAgY3R4LmNsaXAocmVnaW9uKTtcbn1cblxuY2xhc3MgQmFzZVNoYWRpbmdQYXR0ZXJuIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKFxuICAgICAgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkgJiZcbiAgICAgIHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VTaGFkaW5nUGF0dGVyblxuICAgICkge1xuICAgICAgdW5yZWFjaGFibGUoXCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlU2hhZGluZ1BhdHRlcm4uXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlzTW9kaWZ5aW5nQ3VycmVudFRyYW5zZm9ybSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRQYXR0ZXJuKCkge1xuICAgIHVucmVhY2hhYmxlKFwiQWJzdHJhY3QgbWV0aG9kIGBnZXRQYXR0ZXJuYCBjYWxsZWQuXCIpO1xuICB9XG59XG5cbmNsYXNzIFJhZGlhbEF4aWFsU2hhZGluZ1BhdHRlcm4gZXh0ZW5kcyBCYXNlU2hhZGluZ1BhdHRlcm4ge1xuICBjb25zdHJ1Y3RvcihJUikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fdHlwZSA9IElSWzFdO1xuICAgIHRoaXMuX2Jib3ggPSBJUlsyXTtcbiAgICB0aGlzLl9jb2xvclN0b3BzID0gSVJbM107XG4gICAgdGhpcy5fcDAgPSBJUls0XTtcbiAgICB0aGlzLl9wMSA9IElSWzVdO1xuICAgIHRoaXMuX3IwID0gSVJbNl07XG4gICAgdGhpcy5fcjEgPSBJUls3XTtcbiAgICB0aGlzLm1hdHJpeCA9IG51bGw7XG4gIH1cblxuICBfY3JlYXRlR3JhZGllbnQoY3R4KSB7XG4gICAgbGV0IGdyYWQ7XG4gICAgaWYgKHRoaXMuX3R5cGUgPT09IFwiYXhpYWxcIikge1xuICAgICAgZ3JhZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudChcbiAgICAgICAgdGhpcy5fcDBbMF0sXG4gICAgICAgIHRoaXMuX3AwWzFdLFxuICAgICAgICB0aGlzLl9wMVswXSxcbiAgICAgICAgdGhpcy5fcDFbMV1cbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl90eXBlID09PSBcInJhZGlhbFwiKSB7XG4gICAgICBncmFkID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KFxuICAgICAgICB0aGlzLl9wMFswXSxcbiAgICAgICAgdGhpcy5fcDBbMV0sXG4gICAgICAgIHRoaXMuX3IwLFxuICAgICAgICB0aGlzLl9wMVswXSxcbiAgICAgICAgdGhpcy5fcDFbMV0sXG4gICAgICAgIHRoaXMuX3IxXG4gICAgICApO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgY29sb3JTdG9wIG9mIHRoaXMuX2NvbG9yU3RvcHMpIHtcbiAgICAgIGdyYWQuYWRkQ29sb3JTdG9wKGNvbG9yU3RvcFswXSwgY29sb3JTdG9wWzFdKTtcbiAgICB9XG4gICAgcmV0dXJuIGdyYWQ7XG4gIH1cblxuICBnZXRQYXR0ZXJuKGN0eCwgb3duZXIsIGludmVyc2UsIHBhdGhUeXBlKSB7XG4gICAgbGV0IHBhdHRlcm47XG4gICAgaWYgKHBhdGhUeXBlID09PSBQYXRoVHlwZS5TVFJPS0UgfHwgcGF0aFR5cGUgPT09IFBhdGhUeXBlLkZJTEwpIHtcbiAgICAgIGNvbnN0IG93bmVyQkJveCA9IG93bmVyLmN1cnJlbnQuZ2V0Q2xpcHBlZFBhdGhCb3VuZGluZ0JveChcbiAgICAgICAgcGF0aFR5cGUsXG4gICAgICAgIGdldEN1cnJlbnRUcmFuc2Zvcm0oY3R4KVxuICAgICAgKSB8fCBbMCwgMCwgMCwgMF07XG4gICAgICAvLyBDcmVhdGUgYSBjYW52YXMgdGhhdCBpcyBvbmx5IGFzIGJpZyBhcyB0aGUgY3VycmVudCBwYXRoLiBUaGlzIGRvZXNuJ3RcbiAgICAgIC8vIGFsbG93IHVzIHRvIGNhY2hlIHRoZSBwYXR0ZXJuLCBidXQgaXQgZ2VuZXJhbGx5IGNyZWF0ZXMgbXVjaCBzbWFsbGVyXG4gICAgICAvLyBjYW52YXNlcyBhbmQgc2F2ZXMgbWVtb3J5IHVzZS4gU2VlIGJ1ZyAxNzIyODA3IGZvciBhbiBleGFtcGxlLlxuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLmNlaWwob3duZXJCQm94WzJdIC0gb3duZXJCQm94WzBdKSB8fCAxO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5jZWlsKG93bmVyQkJveFszXSAtIG93bmVyQkJveFsxXSkgfHwgMTtcblxuICAgICAgY29uc3QgdG1wQ2FudmFzID0gb3duZXIuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFxuICAgICAgICBcInBhdHRlcm5cIixcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodFxuICAgICAgKTtcblxuICAgICAgY29uc3QgdG1wQ3R4ID0gdG1wQ2FudmFzLmNvbnRleHQ7XG4gICAgICB0bXBDdHguY2xlYXJSZWN0KDAsIDAsIHRtcEN0eC5jYW52YXMud2lkdGgsIHRtcEN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgIHRtcEN0eC5iZWdpblBhdGgoKTtcbiAgICAgIHRtcEN0eC5yZWN0KDAsIDAsIHRtcEN0eC5jYW52YXMud2lkdGgsIHRtcEN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgIC8vIE5vbiBzaGFkaW5nIGZpbGwgcGF0dGVybnMgYXJlIHBvc2l0aW9uZWQgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdHJhbnNmb3JtXG4gICAgICAvLyAodXN1YWxseSB0aGUgcGFnZSdzIGluaXRpYWwgdHJhbnNmb3JtKSwgYnV0IHdlIG1heSBoYXZlIGNyZWF0ZWQgYVxuICAgICAgLy8gc21hbGxlciBjYW52YXMgYmFzZWQgb24gdGhlIHBhdGgsIHNvIHdlIG11c3QgYWNjb3VudCBmb3IgdGhlIHNoaWZ0LlxuICAgICAgdG1wQ3R4LnRyYW5zbGF0ZSgtb3duZXJCQm94WzBdLCAtb3duZXJCQm94WzFdKTtcbiAgICAgIGludmVyc2UgPSBVdGlsLnRyYW5zZm9ybShpbnZlcnNlLCBbXG4gICAgICAgIDEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIG93bmVyQkJveFswXSxcbiAgICAgICAgb3duZXJCQm94WzFdLFxuICAgICAgXSk7XG5cbiAgICAgIHRtcEN0eC50cmFuc2Zvcm0oLi4ub3duZXIuYmFzZVRyYW5zZm9ybSk7XG4gICAgICBpZiAodGhpcy5tYXRyaXgpIHtcbiAgICAgICAgdG1wQ3R4LnRyYW5zZm9ybSguLi50aGlzLm1hdHJpeCk7XG4gICAgICB9XG4gICAgICBhcHBseUJvdW5kaW5nQm94KHRtcEN0eCwgdGhpcy5fYmJveCk7XG5cbiAgICAgIHRtcEN0eC5maWxsU3R5bGUgPSB0aGlzLl9jcmVhdGVHcmFkaWVudCh0bXBDdHgpO1xuICAgICAgdG1wQ3R4LmZpbGwoKTtcblxuICAgICAgcGF0dGVybiA9IGN0eC5jcmVhdGVQYXR0ZXJuKHRtcENhbnZhcy5jYW52YXMsIFwibm8tcmVwZWF0XCIpO1xuICAgICAgY29uc3QgZG9tTWF0cml4ID0gbmV3IERPTU1hdHJpeChpbnZlcnNlKTtcbiAgICAgIHBhdHRlcm4uc2V0VHJhbnNmb3JtKGRvbU1hdHJpeCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNoYWRpbmcgZmlsbHMgYXJlIGFwcGxpZWQgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgbWF0cml4IHdoaWNoIGlzIGFsc29cbiAgICAgIC8vIGhvdyBjYW52YXMgZ3JhZGllbnRzIHdvcmssIHNvIHRoZXJlJ3Mgbm8gbmVlZCB0byBkbyBhbnl0aGluZyBzcGVjaWFsXG4gICAgICAvLyBoZXJlLlxuICAgICAgYXBwbHlCb3VuZGluZ0JveChjdHgsIHRoaXMuX2Jib3gpO1xuICAgICAgcGF0dGVybiA9IHRoaXMuX2NyZWF0ZUdyYWRpZW50KGN0eCk7XG4gICAgfVxuICAgIHJldHVybiBwYXR0ZXJuO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRyYXdUcmlhbmdsZShkYXRhLCBjb250ZXh0LCBwMSwgcDIsIHAzLCBjMSwgYzIsIGMzKSB7XG4gIC8vIFZlcnkgYmFzaWMgR291cmF1ZC1zaGFkZWQgdHJpYW5nbGUgcmFzdGVyaXphdGlvbiBhbGdvcml0aG0uXG4gIGNvbnN0IGNvb3JkcyA9IGNvbnRleHQuY29vcmRzLFxuICAgIGNvbG9ycyA9IGNvbnRleHQuY29sb3JzO1xuICBjb25zdCBieXRlcyA9IGRhdGEuZGF0YSxcbiAgICByb3dTaXplID0gZGF0YS53aWR0aCAqIDQ7XG4gIGxldCB0bXA7XG4gIGlmIChjb29yZHNbcDEgKyAxXSA+IGNvb3Jkc1twMiArIDFdKSB7XG4gICAgdG1wID0gcDE7XG4gICAgcDEgPSBwMjtcbiAgICBwMiA9IHRtcDtcbiAgICB0bXAgPSBjMTtcbiAgICBjMSA9IGMyO1xuICAgIGMyID0gdG1wO1xuICB9XG4gIGlmIChjb29yZHNbcDIgKyAxXSA+IGNvb3Jkc1twMyArIDFdKSB7XG4gICAgdG1wID0gcDI7XG4gICAgcDIgPSBwMztcbiAgICBwMyA9IHRtcDtcbiAgICB0bXAgPSBjMjtcbiAgICBjMiA9IGMzO1xuICAgIGMzID0gdG1wO1xuICB9XG4gIGlmIChjb29yZHNbcDEgKyAxXSA+IGNvb3Jkc1twMiArIDFdKSB7XG4gICAgdG1wID0gcDE7XG4gICAgcDEgPSBwMjtcbiAgICBwMiA9IHRtcDtcbiAgICB0bXAgPSBjMTtcbiAgICBjMSA9IGMyO1xuICAgIGMyID0gdG1wO1xuICB9XG4gIGNvbnN0IHgxID0gKGNvb3Jkc1twMV0gKyBjb250ZXh0Lm9mZnNldFgpICogY29udGV4dC5zY2FsZVg7XG4gIGNvbnN0IHkxID0gKGNvb3Jkc1twMSArIDFdICsgY29udGV4dC5vZmZzZXRZKSAqIGNvbnRleHQuc2NhbGVZO1xuICBjb25zdCB4MiA9IChjb29yZHNbcDJdICsgY29udGV4dC5vZmZzZXRYKSAqIGNvbnRleHQuc2NhbGVYO1xuICBjb25zdCB5MiA9IChjb29yZHNbcDIgKyAxXSArIGNvbnRleHQub2Zmc2V0WSkgKiBjb250ZXh0LnNjYWxlWTtcbiAgY29uc3QgeDMgPSAoY29vcmRzW3AzXSArIGNvbnRleHQub2Zmc2V0WCkgKiBjb250ZXh0LnNjYWxlWDtcbiAgY29uc3QgeTMgPSAoY29vcmRzW3AzICsgMV0gKyBjb250ZXh0Lm9mZnNldFkpICogY29udGV4dC5zY2FsZVk7XG4gIGlmICh5MSA+PSB5Mykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjMXIgPSBjb2xvcnNbYzFdLFxuICAgIGMxZyA9IGNvbG9yc1tjMSArIDFdLFxuICAgIGMxYiA9IGNvbG9yc1tjMSArIDJdO1xuICBjb25zdCBjMnIgPSBjb2xvcnNbYzJdLFxuICAgIGMyZyA9IGNvbG9yc1tjMiArIDFdLFxuICAgIGMyYiA9IGNvbG9yc1tjMiArIDJdO1xuICBjb25zdCBjM3IgPSBjb2xvcnNbYzNdLFxuICAgIGMzZyA9IGNvbG9yc1tjMyArIDFdLFxuICAgIGMzYiA9IGNvbG9yc1tjMyArIDJdO1xuXG4gIGNvbnN0IG1pblkgPSBNYXRoLnJvdW5kKHkxKSxcbiAgICBtYXhZID0gTWF0aC5yb3VuZCh5Myk7XG4gIGxldCB4YSwgY2FyLCBjYWcsIGNhYjtcbiAgbGV0IHhiLCBjYnIsIGNiZywgY2JiO1xuICBmb3IgKGxldCB5ID0gbWluWTsgeSA8PSBtYXhZOyB5KyspIHtcbiAgICBpZiAoeSA8IHkyKSB7XG4gICAgICBjb25zdCBrID0geSA8IHkxID8gMCA6ICh5MSAtIHkpIC8gKHkxIC0geTIpO1xuICAgICAgeGEgPSB4MSAtICh4MSAtIHgyKSAqIGs7XG4gICAgICBjYXIgPSBjMXIgLSAoYzFyIC0gYzJyKSAqIGs7XG4gICAgICBjYWcgPSBjMWcgLSAoYzFnIC0gYzJnKSAqIGs7XG4gICAgICBjYWIgPSBjMWIgLSAoYzFiIC0gYzJiKSAqIGs7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBrO1xuICAgICAgaWYgKHkgPiB5Mykge1xuICAgICAgICBrID0gMTtcbiAgICAgIH0gZWxzZSBpZiAoeTIgPT09IHkzKSB7XG4gICAgICAgIGsgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgayA9ICh5MiAtIHkpIC8gKHkyIC0geTMpO1xuICAgICAgfVxuICAgICAgeGEgPSB4MiAtICh4MiAtIHgzKSAqIGs7XG4gICAgICBjYXIgPSBjMnIgLSAoYzJyIC0gYzNyKSAqIGs7XG4gICAgICBjYWcgPSBjMmcgLSAoYzJnIC0gYzNnKSAqIGs7XG4gICAgICBjYWIgPSBjMmIgLSAoYzJiIC0gYzNiKSAqIGs7XG4gICAgfVxuXG4gICAgbGV0IGs7XG4gICAgaWYgKHkgPCB5MSkge1xuICAgICAgayA9IDA7XG4gICAgfSBlbHNlIGlmICh5ID4geTMpIHtcbiAgICAgIGsgPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBrID0gKHkxIC0geSkgLyAoeTEgLSB5Myk7XG4gICAgfVxuICAgIHhiID0geDEgLSAoeDEgLSB4MykgKiBrO1xuICAgIGNiciA9IGMxciAtIChjMXIgLSBjM3IpICogaztcbiAgICBjYmcgPSBjMWcgLSAoYzFnIC0gYzNnKSAqIGs7XG4gICAgY2JiID0gYzFiIC0gKGMxYiAtIGMzYikgKiBrO1xuICAgIGNvbnN0IHgxXyA9IE1hdGgucm91bmQoTWF0aC5taW4oeGEsIHhiKSk7XG4gICAgY29uc3QgeDJfID0gTWF0aC5yb3VuZChNYXRoLm1heCh4YSwgeGIpKTtcbiAgICBsZXQgaiA9IHJvd1NpemUgKiB5ICsgeDFfICogNDtcbiAgICBmb3IgKGxldCB4ID0geDFfOyB4IDw9IHgyXzsgeCsrKSB7XG4gICAgICBrID0gKHhhIC0geCkgLyAoeGEgLSB4Yik7XG4gICAgICBpZiAoayA8IDApIHtcbiAgICAgICAgayA9IDA7XG4gICAgICB9IGVsc2UgaWYgKGsgPiAxKSB7XG4gICAgICAgIGsgPSAxO1xuICAgICAgfVxuICAgICAgYnl0ZXNbaisrXSA9IChjYXIgLSAoY2FyIC0gY2JyKSAqIGspIHwgMDtcbiAgICAgIGJ5dGVzW2orK10gPSAoY2FnIC0gKGNhZyAtIGNiZykgKiBrKSB8IDA7XG4gICAgICBieXRlc1tqKytdID0gKGNhYiAtIChjYWIgLSBjYmIpICogaykgfCAwO1xuICAgICAgYnl0ZXNbaisrXSA9IDI1NTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhd0ZpZ3VyZShkYXRhLCBmaWd1cmUsIGNvbnRleHQpIHtcbiAgY29uc3QgcHMgPSBmaWd1cmUuY29vcmRzO1xuICBjb25zdCBjcyA9IGZpZ3VyZS5jb2xvcnM7XG4gIGxldCBpLCBpaTtcbiAgc3dpdGNoIChmaWd1cmUudHlwZSkge1xuICAgIGNhc2UgXCJsYXR0aWNlXCI6XG4gICAgICBjb25zdCB2ZXJ0aWNlc1BlclJvdyA9IGZpZ3VyZS52ZXJ0aWNlc1BlclJvdztcbiAgICAgIGNvbnN0IHJvd3MgPSBNYXRoLmZsb29yKHBzLmxlbmd0aCAvIHZlcnRpY2VzUGVyUm93KSAtIDE7XG4gICAgICBjb25zdCBjb2xzID0gdmVydGljZXNQZXJSb3cgLSAxO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHJvd3M7IGkrKykge1xuICAgICAgICBsZXQgcSA9IGkgKiB2ZXJ0aWNlc1BlclJvdztcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2xzOyBqKyssIHErKykge1xuICAgICAgICAgIGRyYXdUcmlhbmdsZShcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgcHNbcV0sXG4gICAgICAgICAgICBwc1txICsgMV0sXG4gICAgICAgICAgICBwc1txICsgdmVydGljZXNQZXJSb3ddLFxuICAgICAgICAgICAgY3NbcV0sXG4gICAgICAgICAgICBjc1txICsgMV0sXG4gICAgICAgICAgICBjc1txICsgdmVydGljZXNQZXJSb3ddXG4gICAgICAgICAgKTtcbiAgICAgICAgICBkcmF3VHJpYW5nbGUoXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIHBzW3EgKyB2ZXJ0aWNlc1BlclJvdyArIDFdLFxuICAgICAgICAgICAgcHNbcSArIDFdLFxuICAgICAgICAgICAgcHNbcSArIHZlcnRpY2VzUGVyUm93XSxcbiAgICAgICAgICAgIGNzW3EgKyB2ZXJ0aWNlc1BlclJvdyArIDFdLFxuICAgICAgICAgICAgY3NbcSArIDFdLFxuICAgICAgICAgICAgY3NbcSArIHZlcnRpY2VzUGVyUm93XVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJ0cmlhbmdsZXNcIjpcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gcHMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMykge1xuICAgICAgICBkcmF3VHJpYW5nbGUoXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgIHBzW2ldLFxuICAgICAgICAgIHBzW2kgKyAxXSxcbiAgICAgICAgICBwc1tpICsgMl0sXG4gICAgICAgICAgY3NbaV0sXG4gICAgICAgICAgY3NbaSArIDFdLFxuICAgICAgICAgIGNzW2kgKyAyXVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgZmlndXJlXCIpO1xuICB9XG59XG5cbmNsYXNzIE1lc2hTaGFkaW5nUGF0dGVybiBleHRlbmRzIEJhc2VTaGFkaW5nUGF0dGVybiB7XG4gIGNvbnN0cnVjdG9yKElSKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9jb29yZHMgPSBJUlsyXTtcbiAgICB0aGlzLl9jb2xvcnMgPSBJUlszXTtcbiAgICB0aGlzLl9maWd1cmVzID0gSVJbNF07XG4gICAgdGhpcy5fYm91bmRzID0gSVJbNV07XG4gICAgdGhpcy5fYmJveCA9IElSWzZdO1xuICAgIHRoaXMuX2JhY2tncm91bmQgPSBJUls3XTtcbiAgICB0aGlzLm1hdHJpeCA9IG51bGw7XG4gIH1cblxuICBfY3JlYXRlTWVzaENhbnZhcyhjb21iaW5lZFNjYWxlLCBiYWNrZ3JvdW5kQ29sb3IsIGNhY2hlZENhbnZhc2VzKSB7XG4gICAgLy8gd2Ugd2lsbCBpbmNyZWFzZSBzY2FsZSBvbiBzb21lIHdlaXJkIGZhY3RvciB0byBsZXQgYW50aWFsaWFzaW5nIHRha2VcbiAgICAvLyBjYXJlIG9mIFwicm91Z2hcIiBlZGdlc1xuICAgIGNvbnN0IEVYUEVDVEVEX1NDQUxFID0gMS4xO1xuICAgIC8vIE1BWF9QQVRURVJOX1NJWkUgaXMgdXNlZCB0byBhdm9pZCBPT00gc2l0dWF0aW9uLlxuICAgIGNvbnN0IE1BWF9QQVRURVJOX1NJWkUgPSAzMDAwOyAvLyAxMGluIEAgMzAwZHBpIHNoYWxsIGJlIGVub3VnaFxuICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFuc3BhcmVudCBib3JkZXIgYXJvdW5kIG91ciBwYXR0ZXJuIGZvciBmaWxsKCk6XG4gICAgLy8gY3JlYXRlUGF0dGVybiB3aXRoICduby1yZXBlYXQnIHdpbGwgYmxlZWQgZWRnZXMgYWNyb3NzIGVudGlyZSBhcmVhLlxuICAgIGNvbnN0IEJPUkRFUl9TSVpFID0gMjtcblxuICAgIGNvbnN0IG9mZnNldFggPSBNYXRoLmZsb29yKHRoaXMuX2JvdW5kc1swXSk7XG4gICAgY29uc3Qgb2Zmc2V0WSA9IE1hdGguZmxvb3IodGhpcy5fYm91bmRzWzFdKTtcbiAgICBjb25zdCBib3VuZHNXaWR0aCA9IE1hdGguY2VpbCh0aGlzLl9ib3VuZHNbMl0pIC0gb2Zmc2V0WDtcbiAgICBjb25zdCBib3VuZHNIZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fYm91bmRzWzNdKSAtIG9mZnNldFk7XG5cbiAgICBjb25zdCB3aWR0aCA9IE1hdGgubWluKFxuICAgICAgTWF0aC5jZWlsKE1hdGguYWJzKGJvdW5kc1dpZHRoICogY29tYmluZWRTY2FsZVswXSAqIEVYUEVDVEVEX1NDQUxFKSksXG4gICAgICBNQVhfUEFUVEVSTl9TSVpFXG4gICAgKTtcbiAgICBjb25zdCBoZWlnaHQgPSBNYXRoLm1pbihcbiAgICAgIE1hdGguY2VpbChNYXRoLmFicyhib3VuZHNIZWlnaHQgKiBjb21iaW5lZFNjYWxlWzFdICogRVhQRUNURURfU0NBTEUpKSxcbiAgICAgIE1BWF9QQVRURVJOX1NJWkVcbiAgICApO1xuICAgIGNvbnN0IHNjYWxlWCA9IGJvdW5kc1dpZHRoIC8gd2lkdGg7XG4gICAgY29uc3Qgc2NhbGVZID0gYm91bmRzSGVpZ2h0IC8gaGVpZ2h0O1xuXG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgIGNvb3JkczogdGhpcy5fY29vcmRzLFxuICAgICAgY29sb3JzOiB0aGlzLl9jb2xvcnMsXG4gICAgICBvZmZzZXRYOiAtb2Zmc2V0WCxcbiAgICAgIG9mZnNldFk6IC1vZmZzZXRZLFxuICAgICAgc2NhbGVYOiAxIC8gc2NhbGVYLFxuICAgICAgc2NhbGVZOiAxIC8gc2NhbGVZLFxuICAgIH07XG5cbiAgICBjb25zdCBwYWRkZWRXaWR0aCA9IHdpZHRoICsgQk9SREVSX1NJWkUgKiAyO1xuICAgIGNvbnN0IHBhZGRlZEhlaWdodCA9IGhlaWdodCArIEJPUkRFUl9TSVpFICogMjtcblxuICAgIGNvbnN0IHRtcENhbnZhcyA9IGNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhcbiAgICAgIFwibWVzaFwiLFxuICAgICAgcGFkZGVkV2lkdGgsXG4gICAgICBwYWRkZWRIZWlnaHRcbiAgICApO1xuICAgIGNvbnN0IHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuXG4gICAgY29uc3QgZGF0YSA9IHRtcEN0eC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG4gICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xuICAgICAgY29uc3QgYnl0ZXMgPSBkYXRhLmRhdGE7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBieXRlcy5sZW5ndGg7IGkgPCBpaTsgaSArPSA0KSB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmFja2dyb3VuZENvbG9yWzBdO1xuICAgICAgICBieXRlc1tpICsgMV0gPSBiYWNrZ3JvdW5kQ29sb3JbMV07XG4gICAgICAgIGJ5dGVzW2kgKyAyXSA9IGJhY2tncm91bmRDb2xvclsyXTtcbiAgICAgICAgYnl0ZXNbaSArIDNdID0gMjU1O1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGZpZ3VyZSBvZiB0aGlzLl9maWd1cmVzKSB7XG4gICAgICBkcmF3RmlndXJlKGRhdGEsIGZpZ3VyZSwgY29udGV4dCk7XG4gICAgfVxuICAgIHRtcEN0eC5wdXRJbWFnZURhdGEoZGF0YSwgQk9SREVSX1NJWkUsIEJPUkRFUl9TSVpFKTtcbiAgICBjb25zdCBjYW52YXMgPSB0bXBDYW52YXMuY2FudmFzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhbnZhcyxcbiAgICAgIG9mZnNldFg6IG9mZnNldFggLSBCT1JERVJfU0laRSAqIHNjYWxlWCxcbiAgICAgIG9mZnNldFk6IG9mZnNldFkgLSBCT1JERVJfU0laRSAqIHNjYWxlWSxcbiAgICAgIHNjYWxlWCxcbiAgICAgIHNjYWxlWSxcbiAgICB9O1xuICB9XG5cbiAgaXNNb2RpZnlpbmdDdXJyZW50VHJhbnNmb3JtKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0UGF0dGVybihjdHgsIG93bmVyLCBpbnZlcnNlLCBwYXRoVHlwZSkge1xuICAgIGFwcGx5Qm91bmRpbmdCb3goY3R4LCB0aGlzLl9iYm94KTtcbiAgICBsZXQgc2NhbGU7XG4gICAgaWYgKHBhdGhUeXBlID09PSBQYXRoVHlwZS5TSEFESU5HKSB7XG4gICAgICBzY2FsZSA9IFV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUoZ2V0Q3VycmVudFRyYW5zZm9ybShjdHgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT2J0YWluIHNjYWxlIGZyb20gbWF0cml4IGFuZCBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIG1hdHJpeC5cbiAgICAgIHNjYWxlID0gVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZShvd25lci5iYXNlVHJhbnNmb3JtKTtcbiAgICAgIGlmICh0aGlzLm1hdHJpeCkge1xuICAgICAgICBjb25zdCBtYXRyaXhTY2FsZSA9IFV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUodGhpcy5tYXRyaXgpO1xuICAgICAgICBzY2FsZSA9IFtzY2FsZVswXSAqIG1hdHJpeFNjYWxlWzBdLCBzY2FsZVsxXSAqIG1hdHJpeFNjYWxlWzFdXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSYXN0ZXJpemluZyBvbiB0aGUgbWFpbiB0aHJlYWQgc2luY2Ugc2VuZGluZy9xdWV1ZSBsYXJnZSBjYW52YXNlc1xuICAgIC8vIG1pZ2h0IGNhdXNlIE9PTS5cbiAgICBjb25zdCB0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzID0gdGhpcy5fY3JlYXRlTWVzaENhbnZhcyhcbiAgICAgIHNjYWxlLFxuICAgICAgcGF0aFR5cGUgPT09IFBhdGhUeXBlLlNIQURJTkcgPyBudWxsIDogdGhpcy5fYmFja2dyb3VuZCxcbiAgICAgIG93bmVyLmNhY2hlZENhbnZhc2VzXG4gICAgKTtcblxuICAgIGlmIChwYXRoVHlwZSAhPT0gUGF0aFR5cGUuU0hBRElORykge1xuICAgICAgY3R4LnNldFRyYW5zZm9ybSguLi5vd25lci5iYXNlVHJhbnNmb3JtKTtcbiAgICAgIGlmICh0aGlzLm1hdHJpeCkge1xuICAgICAgICBjdHgudHJhbnNmb3JtKC4uLnRoaXMubWF0cml4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjdHgudHJhbnNsYXRlKFxuICAgICAgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5vZmZzZXRYLFxuICAgICAgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5vZmZzZXRZXG4gICAgKTtcbiAgICBjdHguc2NhbGUodGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5zY2FsZVgsIHRlbXBvcmFyeVBhdHRlcm5DYW52YXMuc2NhbGVZKTtcblxuICAgIHJldHVybiBjdHguY3JlYXRlUGF0dGVybih0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzLmNhbnZhcywgXCJuby1yZXBlYXRcIik7XG4gIH1cbn1cblxuY2xhc3MgRHVtbXlTaGFkaW5nUGF0dGVybiBleHRlbmRzIEJhc2VTaGFkaW5nUGF0dGVybiB7XG4gIGdldFBhdHRlcm4oKSB7XG4gICAgcmV0dXJuIFwiaG90cGlua1wiO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFNoYWRpbmdQYXR0ZXJuKElSKSB7XG4gIHN3aXRjaCAoSVJbMF0pIHtcbiAgICBjYXNlIFwiUmFkaWFsQXhpYWxcIjpcbiAgICAgIHJldHVybiBuZXcgUmFkaWFsQXhpYWxTaGFkaW5nUGF0dGVybihJUik7XG4gICAgY2FzZSBcIk1lc2hcIjpcbiAgICAgIHJldHVybiBuZXcgTWVzaFNoYWRpbmdQYXR0ZXJuKElSKTtcbiAgICBjYXNlIFwiRHVtbXlcIjpcbiAgICAgIHJldHVybiBuZXcgRHVtbXlTaGFkaW5nUGF0dGVybigpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBJUiB0eXBlOiAke0lSWzBdfWApO1xufVxuXG5jb25zdCBQYWludFR5cGUgPSB7XG4gIENPTE9SRUQ6IDEsXG4gIFVOQ09MT1JFRDogMixcbn07XG5cbmNsYXNzIFRpbGluZ1BhdHRlcm4ge1xuICAvLyAxMGluIEAgMzAwZHBpIHNoYWxsIGJlIGVub3VnaC5cbiAgc3RhdGljIE1BWF9QQVRURVJOX1NJWkUgPSAzMDAwO1xuXG4gIGNvbnN0cnVjdG9yKElSLCBjdHgsIGNhbnZhc0dyYXBoaWNzRmFjdG9yeSwgYmFzZVRyYW5zZm9ybSkge1xuICAgIHRoaXMuY29sb3IgPSBJUlsxXTtcbiAgICB0aGlzLm9wZXJhdG9yTGlzdCA9IElSWzJdO1xuICAgIHRoaXMubWF0cml4ID0gSVJbM107XG4gICAgdGhpcy5iYm94ID0gSVJbNF07XG4gICAgdGhpcy54c3RlcCA9IElSWzVdO1xuICAgIHRoaXMueXN0ZXAgPSBJUls2XTtcbiAgICB0aGlzLnBhaW50VHlwZSA9IElSWzddO1xuICAgIHRoaXMudGlsaW5nVHlwZSA9IElSWzhdO1xuICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgIHRoaXMuY2FudmFzR3JhcGhpY3NGYWN0b3J5ID0gY2FudmFzR3JhcGhpY3NGYWN0b3J5O1xuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IGJhc2VUcmFuc2Zvcm07XG4gIH1cblxuICBjcmVhdGVQYXR0ZXJuQ2FudmFzKG93bmVyKSB7XG4gICAgY29uc3Qge1xuICAgICAgYmJveCxcbiAgICAgIG9wZXJhdG9yTGlzdCxcbiAgICAgIHBhaW50VHlwZSxcbiAgICAgIHRpbGluZ1R5cGUsXG4gICAgICBjb2xvcixcbiAgICAgIGNhbnZhc0dyYXBoaWNzRmFjdG9yeSxcbiAgICB9ID0gdGhpcztcbiAgICBsZXQgeyB4c3RlcCwgeXN0ZXAgfSA9IHRoaXM7XG4gICAgeHN0ZXAgPSBNYXRoLmFicyh4c3RlcCk7XG4gICAgeXN0ZXAgPSBNYXRoLmFicyh5c3RlcCk7XG5cbiAgICBpbmZvKFwiVGlsaW5nVHlwZTogXCIgKyB0aWxpbmdUeXBlKTtcblxuICAgIC8vIEEgdGlsaW5nIHBhdHRlcm4gYXMgZGVmaW5lZCBieSBQREYgc3BlYyA4LjcuMiBpcyBhIGNlbGwgd2hvc2Ugc2l6ZSBpc1xuICAgIC8vIGRlc2NyaWJlZCBieSBiYm94LCBhbmQgbWF5IHJlcGVhdCByZWd1bGFybHkgYnkgc2hpZnRpbmcgdGhlIGNlbGwgYnlcbiAgICAvLyB4c3RlcCBhbmQgeXN0ZXAuXG4gICAgLy8gQmVjYXVzZSB0aGUgSFRNTDUgY2FudmFzIEFQSSBkb2VzIG5vdCBzdXBwb3J0IHBhdHRlcm4gcmVwZXRpdGlvbiB3aXRoXG4gICAgLy8gZ2FwcyBpbiBiZXR3ZWVuLCB3ZSB1c2UgdGhlIHhzdGVwL3lzdGVwIGluc3RlYWQgb2YgdGhlIGJib3gncyBzaXplLlxuICAgIC8vXG4gICAgLy8gVGhpcyBoYXMgdGhlIGZvbGxvd2luZyBjb25zZXF1ZW5jZXMgKHNpbWlsYXJseSBmb3IgeXN0ZXApOlxuICAgIC8vXG4gICAgLy8gLSBJZiB4c3RlcCBpcyB0aGUgc2FtZSBhcyBiYm94LCB0aGVuIHRoZXJlIGlzIG5vIG9ic2VydmFibGUgZGlmZmVyZW5jZS5cbiAgICAvL1xuICAgIC8vIC0gSWYgeHN0ZXAgaXMgbGFyZ2VyIHRoYW4gYmJveCwgdGhlbiB0aGUgcGF0dGVybiBjYW52YXMgaXMgcGFydGlhbGx5XG4gICAgLy8gICBlbXB0eTogdGhlIGFyZWEgYm91bmRlZCBieSBiYm94IGlzIHBhaW50ZWQsIHRoZSBvdXRzaWRlIGFyZWEgaXMgdm9pZC5cbiAgICAvL1xuICAgIC8vIC0gSWYgeHN0ZXAgaXMgc21hbGxlciB0aGFuIGJib3gsIHRoZW4gdGhlIHBpeGVscyBiZXR3ZWVuIHhzdGVwIGFuZCB0aGVcbiAgICAvLyAgIGJib3ggYm91bmRhcnkgd2lsbCBiZSBtaXNzaW5nLiBUaGlzIGlzIElOQ09SUkVDVCBiZWhhdmlvci5cbiAgICAvLyAgIFwiRmlndXJlcyBvbiBhZGphY2VudCB0aWxlcyBzaG91bGQgbm90IG92ZXJsYXBcIiAoUERGIHNwZWMgOC43LjMuMSksXG4gICAgLy8gICBidXQgb3ZlcmxhcHBpbmcgY2VsbHMgd2l0aG91dCBjb21tb24gcGl4ZWxzIGFyZSBzdGlsbCB2YWxpZC5cblxuICAgIGNvbnN0IHgwID0gYmJveFswXSxcbiAgICAgIHkwID0gYmJveFsxXSxcbiAgICAgIHgxID0gYmJveFsyXSxcbiAgICAgIHkxID0gYmJveFszXTtcbiAgICBjb25zdCB3aWR0aCA9IHgxIC0geDA7XG4gICAgY29uc3QgaGVpZ2h0ID0geTEgLSB5MDtcblxuICAgIC8vIE9idGFpbiBzY2FsZSBmcm9tIG1hdHJpeCBhbmQgY3VycmVudCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguXG4gICAgY29uc3QgbWF0cml4U2NhbGUgPSBVdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKHRoaXMubWF0cml4KTtcbiAgICBjb25zdCBjdXJNYXRyaXhTY2FsZSA9IFV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUoXG4gICAgICB0aGlzLmJhc2VUcmFuc2Zvcm1cbiAgICApO1xuICAgIGNvbnN0IGNvbWJpbmVkU2NhbGVYID0gbWF0cml4U2NhbGVbMF0gKiBjdXJNYXRyaXhTY2FsZVswXTtcbiAgICBjb25zdCBjb21iaW5lZFNjYWxlWSA9IG1hdHJpeFNjYWxlWzFdICogY3VyTWF0cml4U2NhbGVbMV07XG5cbiAgICBsZXQgY2FudmFzV2lkdGggPSB3aWR0aCxcbiAgICAgIGNhbnZhc0hlaWdodCA9IGhlaWdodCxcbiAgICAgIHJlZHJhd0hvcml6b250YWxseSA9IGZhbHNlLFxuICAgICAgcmVkcmF3VmVydGljYWxseSA9IGZhbHNlO1xuXG4gICAgY29uc3QgeFNjYWxlZFN0ZXAgPSBNYXRoLmNlaWwoeHN0ZXAgKiBjb21iaW5lZFNjYWxlWCk7XG4gICAgY29uc3QgeVNjYWxlZFN0ZXAgPSBNYXRoLmNlaWwoeXN0ZXAgKiBjb21iaW5lZFNjYWxlWSk7XG4gICAgY29uc3QgeFNjYWxlZFdpZHRoID0gTWF0aC5jZWlsKHdpZHRoICogY29tYmluZWRTY2FsZVgpO1xuICAgIGNvbnN0IHlTY2FsZWRIZWlnaHQgPSBNYXRoLmNlaWwoaGVpZ2h0ICogY29tYmluZWRTY2FsZVkpO1xuXG4gICAgaWYgKHhTY2FsZWRTdGVwID49IHhTY2FsZWRXaWR0aCkge1xuICAgICAgY2FudmFzV2lkdGggPSB4c3RlcDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVkcmF3SG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHlTY2FsZWRTdGVwID49IHlTY2FsZWRIZWlnaHQpIHtcbiAgICAgIGNhbnZhc0hlaWdodCA9IHlzdGVwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWRyYXdWZXJ0aWNhbGx5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBVc2Ugd2lkdGggYW5kIGhlaWdodCB2YWx1ZXMgdGhhdCBhcmUgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gdGhlIGVuZFxuICAgIC8vIHJlc3VsdCB3aGVuIHRoZSBwYXR0ZXJuIGlzIHVzZWQuIFRvbyBsb3cgdmFsdWUgbWFrZXMgdGhlIHBhdHRlcm4gbG9va1xuICAgIC8vIGJsdXJyeS4gVG9vIGxhcmdlIHZhbHVlIG1ha2VzIGl0IGxvb2sgdG9vIGNyaXNweS5cbiAgICBjb25zdCBkaW14ID0gdGhpcy5nZXRTaXplQW5kU2NhbGUoXG4gICAgICBjYW52YXNXaWR0aCxcbiAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCxcbiAgICAgIGNvbWJpbmVkU2NhbGVYXG4gICAgKTtcbiAgICBjb25zdCBkaW15ID0gdGhpcy5nZXRTaXplQW5kU2NhbGUoXG4gICAgICBjYW52YXNIZWlnaHQsXG4gICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgY29tYmluZWRTY2FsZVlcbiAgICApO1xuXG4gICAgY29uc3QgdG1wQ2FudmFzID0gb3duZXIuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFxuICAgICAgXCJwYXR0ZXJuXCIsXG4gICAgICBkaW14LnNpemUsXG4gICAgICBkaW15LnNpemVcbiAgICApO1xuICAgIGNvbnN0IHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuICAgIGNvbnN0IGdyYXBoaWNzID0gY2FudmFzR3JhcGhpY3NGYWN0b3J5LmNyZWF0ZUNhbnZhc0dyYXBoaWNzKHRtcEN0eCk7XG4gICAgZ3JhcGhpY3MuZ3JvdXBMZXZlbCA9IG93bmVyLmdyb3VwTGV2ZWw7XG5cbiAgICB0aGlzLnNldEZpbGxBbmRTdHJva2VTdHlsZVRvQ29udGV4dChncmFwaGljcywgcGFpbnRUeXBlLCBjb2xvcik7XG5cbiAgICB0bXBDdHgudHJhbnNsYXRlKC1kaW14LnNjYWxlICogeDAsIC1kaW15LnNjYWxlICogeTApO1xuICAgIGdyYXBoaWNzLnRyYW5zZm9ybShkaW14LnNjYWxlLCAwLCAwLCBkaW15LnNjYWxlLCAwLCAwKTtcblxuICAgIC8vIFRvIG1hdGNoIENhbnZhc0dyYXBoaWNzIGJlZ2luRHJhd2luZyB3ZSBtdXN0IHNhdmUgdGhlIGNvbnRleHQgaGVyZSBvclxuICAgIC8vIGVsc2Ugd2UgZW5kIHVwIHdpdGggdW5iYWxhbmNlZCBzYXZlL3Jlc3RvcmVzLlxuICAgIHRtcEN0eC5zYXZlKCk7XG5cbiAgICB0aGlzLmNsaXBCYm94KGdyYXBoaWNzLCB4MCwgeTAsIHgxLCB5MSk7XG5cbiAgICBncmFwaGljcy5iYXNlVHJhbnNmb3JtID0gZ2V0Q3VycmVudFRyYW5zZm9ybShncmFwaGljcy5jdHgpO1xuXG4gICAgZ3JhcGhpY3MuZXhlY3V0ZU9wZXJhdG9yTGlzdChvcGVyYXRvckxpc3QpO1xuXG4gICAgZ3JhcGhpY3MuZW5kRHJhd2luZygpO1xuXG4gICAgdG1wQ3R4LnJlc3RvcmUoKTtcblxuICAgIGlmIChyZWRyYXdIb3Jpem9udGFsbHkgfHwgcmVkcmF3VmVydGljYWxseSkge1xuICAgICAgLy8gVGhlIHRpbGUgaXMgb3ZlcmxhcHBpbmcgaXRzZWxmLCBzbyB3ZSBjcmVhdGUgYSBuZXcgdGlsZSB3aXRoXG4gICAgICAvLyBkaW1lbnNpb25zIHhzdGVwICogeXN0ZXAuXG4gICAgICAvLyBUaGVuIHdlIGRyYXcgdGhlIG92ZXJsYXBwaW5nIHBhcnRzIG9mIHRoZSBvcmlnaW5hbCB0aWxlIG9uIHRoZSBuZXdcbiAgICAgIC8vIHRpbGUuXG4gICAgICAvLyBKdXN0IGFzIGEgc2lkZSBub3RlLCB0aGUgY29kZSBoZXJlIHdvcmtzIGNvcnJlY3RseSBldmVuIGlmIHdlIGRvbid0XG4gICAgICAvLyBoYXZlIHRvIHJlZHJhdyB0aGUgdGlsZSBob3Jpem9udGFsbHkgb3IgdmVydGljYWxseS4gSW4gdGhhdCBjYXNlLCB0aGVcbiAgICAgIC8vIG9yaWdpbmFsIHRpbGUgaXMgZHJhd24gb24gdGhlIG5ldyB0aWxlIG9ubHkgb25jZSwgYnV0IGl0J3MgdXNlbGVzcy5cbiAgICAgIGNvbnN0IGltYWdlID0gdG1wQ2FudmFzLmNhbnZhcztcbiAgICAgIGlmIChyZWRyYXdIb3Jpem9udGFsbHkpIHtcbiAgICAgICAgY2FudmFzV2lkdGggPSB4c3RlcDtcbiAgICAgIH1cbiAgICAgIGlmIChyZWRyYXdWZXJ0aWNhbGx5KSB7XG4gICAgICAgIGNhbnZhc0hlaWdodCA9IHlzdGVwO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkaW14MiA9IHRoaXMuZ2V0U2l6ZUFuZFNjYWxlKFxuICAgICAgICBjYW52YXNXaWR0aCxcbiAgICAgICAgdGhpcy5jdHguY2FudmFzLndpZHRoLFxuICAgICAgICBjb21iaW5lZFNjYWxlWFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRpbXkyID0gdGhpcy5nZXRTaXplQW5kU2NhbGUoXG4gICAgICAgIGNhbnZhc0hlaWdodCxcbiAgICAgICAgdGhpcy5jdHguY2FudmFzLmhlaWdodCxcbiAgICAgICAgY29tYmluZWRTY2FsZVlcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHhTaXplID0gZGlteDIuc2l6ZTtcbiAgICAgIGNvbnN0IHlTaXplID0gZGlteTIuc2l6ZTtcbiAgICAgIGNvbnN0IHRtcENhbnZhczIgPSBvd25lci5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICAgIFwicGF0dGVybi13b3JrYXJvdW5kXCIsXG4gICAgICAgIHhTaXplLFxuICAgICAgICB5U2l6ZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRtcEN0eDIgPSB0bXBDYW52YXMyLmNvbnRleHQ7XG4gICAgICBjb25zdCBpaSA9IHJlZHJhd0hvcml6b250YWxseSA/IE1hdGguZmxvb3Iod2lkdGggLyB4c3RlcCkgOiAwO1xuICAgICAgY29uc3QgamogPSByZWRyYXdWZXJ0aWNhbGx5ID8gTWF0aC5mbG9vcihoZWlnaHQgLyB5c3RlcCkgOiAwO1xuXG4gICAgICAvLyBEcmF3IHRoZSBvdmVybGFwcGluZyBwYXJ0cyBvZiB0aGUgb3JpZ2luYWwgdGlsZSBvbiB0aGUgbmV3IHRpbGUuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBpaTsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IGpqOyBqKyspIHtcbiAgICAgICAgICB0bXBDdHgyLmRyYXdJbWFnZShcbiAgICAgICAgICAgIGltYWdlLFxuICAgICAgICAgICAgeFNpemUgKiBpLFxuICAgICAgICAgICAgeVNpemUgKiBqLFxuICAgICAgICAgICAgeFNpemUsXG4gICAgICAgICAgICB5U2l6ZSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgeFNpemUsXG4gICAgICAgICAgICB5U2l6ZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhbnZhczogdG1wQ2FudmFzMi5jYW52YXMsXG4gICAgICAgIHNjYWxlWDogZGlteDIuc2NhbGUsXG4gICAgICAgIHNjYWxlWTogZGlteTIuc2NhbGUsXG4gICAgICAgIG9mZnNldFg6IHgwLFxuICAgICAgICBvZmZzZXRZOiB5MCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhbnZhczogdG1wQ2FudmFzLmNhbnZhcyxcbiAgICAgIHNjYWxlWDogZGlteC5zY2FsZSxcbiAgICAgIHNjYWxlWTogZGlteS5zY2FsZSxcbiAgICAgIG9mZnNldFg6IHgwLFxuICAgICAgb2Zmc2V0WTogeTAsXG4gICAgfTtcbiAgfVxuXG4gIGdldFNpemVBbmRTY2FsZShzdGVwLCByZWFsT3V0cHV0U2l6ZSwgc2NhbGUpIHtcbiAgICAvLyBNQVhfUEFUVEVSTl9TSVpFIGlzIHVzZWQgdG8gYXZvaWQgT09NIHNpdHVhdGlvbi5cbiAgICAvLyBVc2UgdGhlIGRlc3RpbmF0aW9uIGNhbnZhcydzIHNpemUgaWYgaXQgaXMgYmlnZ2VyIHRoYW4gdGhlIGhhcmQtY29kZWRcbiAgICAvLyBsaW1pdCBvZiBNQVhfUEFUVEVSTl9TSVpFIHRvIGF2b2lkIGNsaXBwaW5nIHBhdHRlcm5zIHRoYXQgY292ZXIgdGhlXG4gICAgLy8gd2hvbGUgY2FudmFzLlxuICAgIGNvbnN0IG1heFNpemUgPSBNYXRoLm1heChUaWxpbmdQYXR0ZXJuLk1BWF9QQVRURVJOX1NJWkUsIHJlYWxPdXRwdXRTaXplKTtcbiAgICBsZXQgc2l6ZSA9IE1hdGguY2VpbChzdGVwICogc2NhbGUpO1xuICAgIGlmIChzaXplID49IG1heFNpemUpIHtcbiAgICAgIHNpemUgPSBtYXhTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2FsZSA9IHNpemUgLyBzdGVwO1xuICAgIH1cbiAgICByZXR1cm4geyBzY2FsZSwgc2l6ZSB9O1xuICB9XG5cbiAgY2xpcEJib3goZ3JhcGhpY3MsIHgwLCB5MCwgeDEsIHkxKSB7XG4gICAgY29uc3QgYmJveFdpZHRoID0geDEgLSB4MDtcbiAgICBjb25zdCBiYm94SGVpZ2h0ID0geTEgLSB5MDtcbiAgICBncmFwaGljcy5jdHgucmVjdCh4MCwgeTAsIGJib3hXaWR0aCwgYmJveEhlaWdodCk7XG4gICAgZ3JhcGhpY3MuY3VycmVudC51cGRhdGVSZWN0TWluTWF4KGdldEN1cnJlbnRUcmFuc2Zvcm0oZ3JhcGhpY3MuY3R4KSwgW1xuICAgICAgeDAsXG4gICAgICB5MCxcbiAgICAgIHgxLFxuICAgICAgeTEsXG4gICAgXSk7XG4gICAgZ3JhcGhpY3MuY2xpcCgpO1xuICAgIGdyYXBoaWNzLmVuZFBhdGgoKTtcbiAgfVxuXG4gIHNldEZpbGxBbmRTdHJva2VTdHlsZVRvQ29udGV4dChncmFwaGljcywgcGFpbnRUeXBlLCBjb2xvcikge1xuICAgIGNvbnN0IGNvbnRleHQgPSBncmFwaGljcy5jdHgsXG4gICAgICBjdXJyZW50ID0gZ3JhcGhpY3MuY3VycmVudDtcbiAgICBzd2l0Y2ggKHBhaW50VHlwZSkge1xuICAgICAgY2FzZSBQYWludFR5cGUuQ09MT1JFRDpcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gY3R4LmZpbGxTdHlsZTtcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGN0eC5zdHJva2VTdHlsZTtcbiAgICAgICAgY3VycmVudC5maWxsQ29sb3IgPSBjdHguZmlsbFN0eWxlO1xuICAgICAgICBjdXJyZW50LnN0cm9rZUNvbG9yID0gY3R4LnN0cm9rZVN0eWxlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUGFpbnRUeXBlLlVOQ09MT1JFRDpcbiAgICAgICAgY29uc3QgY3NzQ29sb3IgPSBVdGlsLm1ha2VIZXhDb2xvcihjb2xvclswXSwgY29sb3JbMV0sIGNvbG9yWzJdKTtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBjc3NDb2xvcjtcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNzc0NvbG9yO1xuICAgICAgICAvLyBTZXQgY29sb3IgbmVlZGVkIGJ5IGltYWdlIG1hc2tzIChmaXhlcyBpc3N1ZXMgMzIyNiBhbmQgODc0MSkuXG4gICAgICAgIGN1cnJlbnQuZmlsbENvbG9yID0gY3NzQ29sb3I7XG4gICAgICAgIGN1cnJlbnQuc3Ryb2tlQ29sb3IgPSBjc3NDb2xvcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXJyb3IoYFVuc3VwcG9ydGVkIHBhaW50IHR5cGU6ICR7cGFpbnRUeXBlfWApO1xuICAgIH1cbiAgfVxuXG4gIGlzTW9kaWZ5aW5nQ3VycmVudFRyYW5zZm9ybSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRQYXR0ZXJuKGN0eCwgb3duZXIsIGludmVyc2UsIHBhdGhUeXBlKSB7XG4gICAgLy8gUERGIHNwZWMgOC43LjIgTk9URSAxOiBwYXR0ZXJuJ3MgbWF0cml4IGlzIHJlbGF0aXZlIHRvIGluaXRpYWwgbWF0cml4LlxuICAgIGxldCBtYXRyaXggPSBpbnZlcnNlO1xuICAgIGlmIChwYXRoVHlwZSAhPT0gUGF0aFR5cGUuU0hBRElORykge1xuICAgICAgbWF0cml4ID0gVXRpbC50cmFuc2Zvcm0obWF0cml4LCBvd25lci5iYXNlVHJhbnNmb3JtKTtcbiAgICAgIGlmICh0aGlzLm1hdHJpeCkge1xuICAgICAgICBtYXRyaXggPSBVdGlsLnRyYW5zZm9ybShtYXRyaXgsIHRoaXMubWF0cml4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzID0gdGhpcy5jcmVhdGVQYXR0ZXJuQ2FudmFzKG93bmVyKTtcblxuICAgIGxldCBkb21NYXRyaXggPSBuZXcgRE9NTWF0cml4KG1hdHJpeCk7XG4gICAgLy8gUmVzY2FsZSBhbmQgc28gdGhhdCB0aGUgY3R4LmNyZWF0ZVBhdHRlcm4gY2FsbCBnZW5lcmF0ZXMgYSBwYXR0ZXJuIHdpdGhcbiAgICAvLyB0aGUgZGVzaXJlZCBzaXplLlxuICAgIGRvbU1hdHJpeCA9IGRvbU1hdHJpeC50cmFuc2xhdGUoXG4gICAgICB0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzLm9mZnNldFgsXG4gICAgICB0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzLm9mZnNldFlcbiAgICApO1xuICAgIGRvbU1hdHJpeCA9IGRvbU1hdHJpeC5zY2FsZShcbiAgICAgIDEgLyB0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzLnNjYWxlWCxcbiAgICAgIDEgLyB0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzLnNjYWxlWVxuICAgICk7XG5cbiAgICBjb25zdCBwYXR0ZXJuID0gY3R4LmNyZWF0ZVBhdHRlcm4odGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5jYW52YXMsIFwicmVwZWF0XCIpO1xuICAgIHBhdHRlcm4uc2V0VHJhbnNmb3JtKGRvbU1hdHJpeCk7XG5cbiAgICByZXR1cm4gcGF0dGVybjtcbiAgfVxufVxuXG5leHBvcnQgeyBnZXRTaGFkaW5nUGF0dGVybiwgUGF0aFR5cGUsIFRpbGluZ1BhdHRlcm4gfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmVhdHVyZVRlc3QsIEltYWdlS2luZCB9IGZyb20gXCIuL3V0aWwuanNcIjtcblxuZnVuY3Rpb24gY29udmVydFRvUkdCQShwYXJhbXMpIHtcbiAgc3dpdGNoIChwYXJhbXMua2luZCkge1xuICAgIGNhc2UgSW1hZ2VLaW5kLkdSQVlTQ0FMRV8xQlBQOlxuICAgICAgcmV0dXJuIGNvbnZlcnRCbGFja0FuZFdoaXRlVG9SR0JBKHBhcmFtcyk7XG4gICAgY2FzZSBJbWFnZUtpbmQuUkdCXzI0QlBQOlxuICAgICAgcmV0dXJuIGNvbnZlcnRSR0JUb1JHQkEocGFyYW1zKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0QmxhY2tBbmRXaGl0ZVRvUkdCQSh7XG4gIHNyYyxcbiAgc3JjUG9zID0gMCxcbiAgZGVzdCxcbiAgd2lkdGgsXG4gIGhlaWdodCxcbiAgbm9uQmxhY2tDb2xvciA9IDB4ZmZmZmZmZmYsXG4gIGludmVyc2VEZWNvZGUgPSBmYWxzZSxcbn0pIHtcbiAgY29uc3QgYmxhY2sgPSBGZWF0dXJlVGVzdC5pc0xpdHRsZUVuZGlhbiA/IDB4ZmYwMDAwMDAgOiAweDAwMDAwMGZmO1xuICBjb25zdCBbemVyb01hcHBpbmcsIG9uZU1hcHBpbmddID0gaW52ZXJzZURlY29kZVxuICAgID8gW25vbkJsYWNrQ29sb3IsIGJsYWNrXVxuICAgIDogW2JsYWNrLCBub25CbGFja0NvbG9yXTtcbiAgY29uc3Qgd2lkdGhJblNvdXJjZSA9IHdpZHRoID4+IDM7XG4gIGNvbnN0IHdpZHRoUmVtYWluZGVyID0gd2lkdGggJiA3O1xuICBjb25zdCBzcmNMZW5ndGggPSBzcmMubGVuZ3RoO1xuICBkZXN0ID0gbmV3IFVpbnQzMkFycmF5KGRlc3QuYnVmZmVyKTtcbiAgbGV0IGRlc3RQb3MgPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHtcbiAgICBmb3IgKGNvbnN0IG1heCA9IHNyY1BvcyArIHdpZHRoSW5Tb3VyY2U7IHNyY1BvcyA8IG1heDsgc3JjUG9zKyspIHtcbiAgICAgIGNvbnN0IGVsZW0gPSBzcmNQb3MgPCBzcmNMZW5ndGggPyBzcmNbc3JjUG9zXSA6IDI1NTtcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwMDAwMDAwID8gb25lTWFwcGluZyA6IHplcm9NYXBwaW5nO1xuICAgICAgZGVzdFtkZXN0UG9zKytdID0gZWxlbSAmIDBiMTAwMDAwMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwMDAwMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwMDAwID8gb25lTWFwcGluZyA6IHplcm9NYXBwaW5nO1xuICAgICAgZGVzdFtkZXN0UG9zKytdID0gZWxlbSAmIDBiMTAwMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwID8gb25lTWFwcGluZyA6IHplcm9NYXBwaW5nO1xuICAgICAgZGVzdFtkZXN0UG9zKytdID0gZWxlbSAmIDBiMSA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICB9XG4gICAgaWYgKHdpZHRoUmVtYWluZGVyID09PSAwKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgZWxlbSA9IHNyY1BvcyA8IHNyY0xlbmd0aCA/IHNyY1tzcmNQb3MrK10gOiAyNTU7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB3aWR0aFJlbWFpbmRlcjsgaisrKSB7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgKDEgPDwgKDcgLSBqKSkgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IHNyY1BvcywgZGVzdFBvcyB9O1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0UkdCVG9SR0JBKHtcbiAgc3JjLFxuICBzcmNQb3MgPSAwLFxuICBkZXN0LFxuICBkZXN0UG9zID0gMCxcbiAgd2lkdGgsXG4gIGhlaWdodCxcbn0pIHtcbiAgbGV0IGkgPSAwO1xuICBjb25zdCBsZW4gPSB3aWR0aCAqIGhlaWdodCAqIDM7XG4gIGNvbnN0IGxlbjMyID0gbGVuID4+IDI7XG4gIGNvbnN0IHNyYzMyID0gbmV3IFVpbnQzMkFycmF5KHNyYy5idWZmZXIsIHNyY1BvcywgbGVuMzIpO1xuXG4gIGlmIChGZWF0dXJlVGVzdC5pc0xpdHRsZUVuZGlhbikge1xuICAgIC8vIEl0J3MgYSB3YXkgZmFzdGVyIHRvIGRvIHRoZSBzaHVmZmxlIG1hbnVhbGx5IGluc3RlYWQgb2Ygd29ya2luZ1xuICAgIC8vIGNvbXBvbmVudCBieSBjb21wb25lbnQgd2l0aCBzb21lIFVpbnQ4IGFycmF5cy5cbiAgICBmb3IgKDsgaSA8IGxlbjMyIC0gMjsgaSArPSAzLCBkZXN0UG9zICs9IDQpIHtcbiAgICAgIGNvbnN0IHMxID0gc3JjMzJbaV07IC8vIFIyQjFHMVIxXG4gICAgICBjb25zdCBzMiA9IHNyYzMyW2kgKyAxXTsgLy8gRzNSM0IyRzJcbiAgICAgIGNvbnN0IHMzID0gc3JjMzJbaSArIDJdOyAvLyBCNEc0UjRCM1xuXG4gICAgICBkZXN0W2Rlc3RQb3NdID0gczEgfCAweGZmMDAwMDAwO1xuICAgICAgZGVzdFtkZXN0UG9zICsgMV0gPSAoczEgPj4+IDI0KSB8IChzMiA8PCA4KSB8IDB4ZmYwMDAwMDA7XG4gICAgICBkZXN0W2Rlc3RQb3MgKyAyXSA9IChzMiA+Pj4gMTYpIHwgKHMzIDw8IDE2KSB8IDB4ZmYwMDAwMDA7XG4gICAgICBkZXN0W2Rlc3RQb3MgKyAzXSA9IChzMyA+Pj4gOCkgfCAweGZmMDAwMDAwO1xuICAgIH1cblxuICAgIGZvciAobGV0IGogPSBpICogNCwgamogPSBzcmNQb3MgKyBsZW47IGogPCBqajsgaiArPSAzKSB7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPVxuICAgICAgICBzcmNbal0gfCAoc3JjW2ogKyAxXSA8PCA4KSB8IChzcmNbaiArIDJdIDw8IDE2KSB8IDB4ZmYwMDAwMDA7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAoOyBpIDwgbGVuMzIgLSAyOyBpICs9IDMsIGRlc3RQb3MgKz0gNCkge1xuICAgICAgY29uc3QgczEgPSBzcmMzMltpXTsgLy8gUjFHMUIxUjJcbiAgICAgIGNvbnN0IHMyID0gc3JjMzJbaSArIDFdOyAvLyBHMkIyUjNHM1xuICAgICAgY29uc3QgczMgPSBzcmMzMltpICsgMl07IC8vIEIzUjRHNEI0XG5cbiAgICAgIGRlc3RbZGVzdFBvc10gPSBzMSB8IDB4ZmY7XG4gICAgICBkZXN0W2Rlc3RQb3MgKyAxXSA9IChzMSA8PCAyNCkgfCAoczIgPj4+IDgpIHwgMHhmZjtcbiAgICAgIGRlc3RbZGVzdFBvcyArIDJdID0gKHMyIDw8IDE2KSB8IChzMyA+Pj4gMTYpIHwgMHhmZjtcbiAgICAgIGRlc3RbZGVzdFBvcyArIDNdID0gKHMzIDw8IDgpIHwgMHhmZjtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBqID0gaSAqIDQsIGpqID0gc3JjUG9zICsgbGVuOyBqIDwgamo7IGogKz0gMykge1xuICAgICAgZGVzdFtkZXN0UG9zKytdID1cbiAgICAgICAgKHNyY1tqXSA8PCAyNCkgfCAoc3JjW2ogKyAxXSA8PCAxNikgfCAoc3JjW2ogKyAyXSA8PCA4KSB8IDB4ZmY7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgc3JjUG9zOiBzcmNQb3MgKyBsZW4sIGRlc3RQb3MgfTtcbn1cblxuZnVuY3Rpb24gZ3JheVRvUkdCQShzcmMsIGRlc3QpIHtcbiAgaWYgKEZlYXR1cmVUZXN0LmlzTGl0dGxlRW5kaWFuKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc3JjLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGRlc3RbaV0gPSAoc3JjW2ldICogMHgxMDEwMSkgfCAweGZmMDAwMDAwO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzcmMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgZGVzdFtpXSA9IChzcmNbaV0gKiAweDEwMTAxMDApIHwgMHgwMDAwMDBmZjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgY29udmVydEJsYWNrQW5kV2hpdGVUb1JHQkEsIGNvbnZlcnRUb1JHQkEsIGdyYXlUb1JHQkEgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgRHJhd09QUyxcbiAgRmVhdHVyZVRlc3QsXG4gIEZPTlRfSURFTlRJVFlfTUFUUklYLFxuICBJREVOVElUWV9NQVRSSVgsXG4gIEltYWdlS2luZCxcbiAgaW5mbyxcbiAgaXNOb2RlSlMsXG4gIE9QUyxcbiAgc2hhZG93LFxuICBUZXh0UmVuZGVyaW5nTW9kZSxcbiAgdW5yZWFjaGFibGUsXG4gIFV0aWwsXG4gIHdhcm4sXG59IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHtcbiAgZ2V0Q3VycmVudFRyYW5zZm9ybSxcbiAgZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UsXG4gIE91dHB1dFNjYWxlLFxuICBQaXhlbHNQZXJJbmNoLFxufSBmcm9tIFwiLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5pbXBvcnQge1xuICBnZXRTaGFkaW5nUGF0dGVybixcbiAgUGF0aFR5cGUsXG4gIFRpbGluZ1BhdHRlcm4sXG59IGZyb20gXCIuL3BhdHRlcm5faGVscGVyLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0QmxhY2tBbmRXaGl0ZVRvUkdCQSB9IGZyb20gXCIuLi9zaGFyZWQvaW1hZ2VfdXRpbHMuanNcIjtcblxuLy8gPGNhbnZhcz4gY29udGV4dHMgc3RvcmUgbW9zdCBvZiB0aGUgc3RhdGUgd2UgbmVlZCBuYXRpdmVseS5cbi8vIEhvd2V2ZXIsIFBERiBuZWVkcyBhIGJpdCBtb3JlIHN0YXRlLCB3aGljaCB3ZSBzdG9yZSBoZXJlLlxuLy8gTWluaW1hbCBmb250IHNpemUgdGhhdCB3b3VsZCBiZSB1c2VkIGR1cmluZyBjYW52YXMgZmlsbFRleHQgb3BlcmF0aW9ucy5cbmNvbnN0IE1JTl9GT05UX1NJWkUgPSAxNjtcbi8vIE1heGltdW0gZm9udCBzaXplIHRoYXQgd291bGQgYmUgdXNlZCBkdXJpbmcgY2FudmFzIGZpbGxUZXh0IG9wZXJhdGlvbnMuXG5jb25zdCBNQVhfRk9OVF9TSVpFID0gMTAwO1xuXG4vLyBEZWZpbmVzIHRoZSB0aW1lIHRoZSBgZXhlY3V0ZU9wZXJhdG9yTGlzdGAtbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGV4ZWN1dGluZ1xuLy8gYmVmb3JlIGl0IHN0b3BzIGFuZCBzY2hlZHVsZXMgYSBjb250aW51ZSBvZiBleGVjdXRpb24uXG5jb25zdCBFWEVDVVRJT05fVElNRSA9IDE1OyAvLyBtc1xuLy8gRGVmaW5lcyB0aGUgbnVtYmVyIG9mIHN0ZXBzIGJlZm9yZSBjaGVja2luZyB0aGUgZXhlY3V0aW9uIHRpbWUuXG5jb25zdCBFWEVDVVRJT05fU1RFUFMgPSAxMDtcblxuLy8gVG8gZGlzYWJsZSBUeXBlMyBjb21waWxhdGlvbiwgc2V0IHRoZSB2YWx1ZSB0byBgLTFgLlxuY29uc3QgTUFYX1NJWkVfVE9fQ09NUElMRSA9IDEwMDA7XG5cbmNvbnN0IEZVTExfQ0hVTktfSEVJR0hUID0gMTY7XG5cbi8vIE9ubHkgdXNlZCBpbiByZXNjYWxlQW5kU3Ryb2tlLiBUaGUgZ29hbCBpcyB0byBhdm9pZFxuLy8gY3JlYXRpbmcgYSBuZXcgRE9NTWF0cml4IG9iamVjdCBlYWNoIHRpbWUgd2UgbmVlZCBpdC5cbmNvbnN0IFNDQUxFX01BVFJJWCA9IG5ldyBET01NYXRyaXgoKTtcblxuLyoqXG4gKiBPdmVycmlkZXMgY2VydGFpbiBtZXRob2RzIG9uIGEgMmQgY3R4IHNvIHRoYXQgd2hlbiB0aGV5IGFyZSBjYWxsZWQgdGhleVxuICogd2lsbCBhbHNvIGNhbGwgdGhlIHNhbWUgbWV0aG9kIG9uIHRoZSBkZXN0Q3R4LiBUaGUgbWV0aG9kcyB0aGF0IGFyZVxuICogb3ZlcnJpZGRlbiBhcmUgYWxsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzdGF0ZSBtb2RpZmllcnMsIHBhdGggY3JlYXRpb24sIGFuZFxuICogc2F2ZS9yZXN0b3JlLiBXZSBvbmx5IGZvcndhcmQgdGhlc2Ugc3BlY2lmaWMgbWV0aG9kcyBiZWNhdXNlIHRoZXkgYXJlIHRoZVxuICogb25seSBzdGF0ZSBtb2RpZmllcnMgdGhhdCB3ZSBjYW5ub3QgY29weSBvdmVyIHdoZW4gd2Ugc3dpdGNoIGNvbnRleHRzLlxuICpcbiAqIFRvIHJlbW92ZSBtaXJyb3JpbmcgY2FsbCBgY3R4Ll9yZW1vdmVNaXJyb3JpbmcoKWAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCAtIFRoZSAyZCBjYW52YXMgY29udGV4dCB0aGF0IHdpbGwgZHVwbGljYXRlIGl0cyBjYWxscyBvblxuICogICB0aGUgZGVzdEN0eC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0Q3R4IC0gVGhlIDJkIGNhbnZhcyBjb250ZXh0IHRoYXQgd2lsbCByZWNlaXZlIHRoZVxuICogICBmb3J3YXJkZWQgY2FsbHMuXG4gKi9cbmZ1bmN0aW9uIG1pcnJvckNvbnRleHRPcGVyYXRpb25zKGN0eCwgZGVzdEN0eCkge1xuICBpZiAoY3R4Ll9yZW1vdmVNaXJyb3JpbmcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250ZXh0IGlzIGFscmVhZHkgZm9yd2FyZGluZyBvcGVyYXRpb25zLlwiKTtcbiAgfVxuICBjdHguX19vcmlnaW5hbFNhdmUgPSBjdHguc2F2ZTtcbiAgY3R4Ll9fb3JpZ2luYWxSZXN0b3JlID0gY3R4LnJlc3RvcmU7XG4gIGN0eC5fX29yaWdpbmFsUm90YXRlID0gY3R4LnJvdGF0ZTtcbiAgY3R4Ll9fb3JpZ2luYWxTY2FsZSA9IGN0eC5zY2FsZTtcbiAgY3R4Ll9fb3JpZ2luYWxUcmFuc2xhdGUgPSBjdHgudHJhbnNsYXRlO1xuICBjdHguX19vcmlnaW5hbFRyYW5zZm9ybSA9IGN0eC50cmFuc2Zvcm07XG4gIGN0eC5fX29yaWdpbmFsU2V0VHJhbnNmb3JtID0gY3R4LnNldFRyYW5zZm9ybTtcbiAgY3R4Ll9fb3JpZ2luYWxSZXNldFRyYW5zZm9ybSA9IGN0eC5yZXNldFRyYW5zZm9ybTtcbiAgY3R4Ll9fb3JpZ2luYWxDbGlwID0gY3R4LmNsaXA7XG4gIGN0eC5fX29yaWdpbmFsTW92ZVRvID0gY3R4Lm1vdmVUbztcbiAgY3R4Ll9fb3JpZ2luYWxMaW5lVG8gPSBjdHgubGluZVRvO1xuICBjdHguX19vcmlnaW5hbEJlemllckN1cnZlVG8gPSBjdHguYmV6aWVyQ3VydmVUbztcbiAgY3R4Ll9fb3JpZ2luYWxSZWN0ID0gY3R4LnJlY3Q7XG4gIGN0eC5fX29yaWdpbmFsQ2xvc2VQYXRoID0gY3R4LmNsb3NlUGF0aDtcbiAgY3R4Ll9fb3JpZ2luYWxCZWdpblBhdGggPSBjdHguYmVnaW5QYXRoO1xuXG4gIGN0eC5fcmVtb3ZlTWlycm9yaW5nID0gKCkgPT4ge1xuICAgIGN0eC5zYXZlID0gY3R4Ll9fb3JpZ2luYWxTYXZlO1xuICAgIGN0eC5yZXN0b3JlID0gY3R4Ll9fb3JpZ2luYWxSZXN0b3JlO1xuICAgIGN0eC5yb3RhdGUgPSBjdHguX19vcmlnaW5hbFJvdGF0ZTtcbiAgICBjdHguc2NhbGUgPSBjdHguX19vcmlnaW5hbFNjYWxlO1xuICAgIGN0eC50cmFuc2xhdGUgPSBjdHguX19vcmlnaW5hbFRyYW5zbGF0ZTtcbiAgICBjdHgudHJhbnNmb3JtID0gY3R4Ll9fb3JpZ2luYWxUcmFuc2Zvcm07XG4gICAgY3R4LnNldFRyYW5zZm9ybSA9IGN0eC5fX29yaWdpbmFsU2V0VHJhbnNmb3JtO1xuICAgIGN0eC5yZXNldFRyYW5zZm9ybSA9IGN0eC5fX29yaWdpbmFsUmVzZXRUcmFuc2Zvcm07XG5cbiAgICBjdHguY2xpcCA9IGN0eC5fX29yaWdpbmFsQ2xpcDtcbiAgICBjdHgubW92ZVRvID0gY3R4Ll9fb3JpZ2luYWxNb3ZlVG87XG4gICAgY3R4LmxpbmVUbyA9IGN0eC5fX29yaWdpbmFsTGluZVRvO1xuICAgIGN0eC5iZXppZXJDdXJ2ZVRvID0gY3R4Ll9fb3JpZ2luYWxCZXppZXJDdXJ2ZVRvO1xuICAgIGN0eC5yZWN0ID0gY3R4Ll9fb3JpZ2luYWxSZWN0O1xuICAgIGN0eC5jbG9zZVBhdGggPSBjdHguX19vcmlnaW5hbENsb3NlUGF0aDtcbiAgICBjdHguYmVnaW5QYXRoID0gY3R4Ll9fb3JpZ2luYWxCZWdpblBhdGg7XG4gICAgZGVsZXRlIGN0eC5fcmVtb3ZlTWlycm9yaW5nO1xuICB9O1xuXG4gIGN0eC5zYXZlID0gZnVuY3Rpb24gY3R4U2F2ZSgpIHtcbiAgICBkZXN0Q3R4LnNhdmUoKTtcbiAgICB0aGlzLl9fb3JpZ2luYWxTYXZlKCk7XG4gIH07XG5cbiAgY3R4LnJlc3RvcmUgPSBmdW5jdGlvbiBjdHhSZXN0b3JlKCkge1xuICAgIGRlc3RDdHgucmVzdG9yZSgpO1xuICAgIHRoaXMuX19vcmlnaW5hbFJlc3RvcmUoKTtcbiAgfTtcblxuICBjdHgudHJhbnNsYXRlID0gZnVuY3Rpb24gY3R4VHJhbnNsYXRlKHgsIHkpIHtcbiAgICBkZXN0Q3R4LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICB0aGlzLl9fb3JpZ2luYWxUcmFuc2xhdGUoeCwgeSk7XG4gIH07XG5cbiAgY3R4LnNjYWxlID0gZnVuY3Rpb24gY3R4U2NhbGUoeCwgeSkge1xuICAgIGRlc3RDdHguc2NhbGUoeCwgeSk7XG4gICAgdGhpcy5fX29yaWdpbmFsU2NhbGUoeCwgeSk7XG4gIH07XG5cbiAgY3R4LnRyYW5zZm9ybSA9IGZ1bmN0aW9uIGN0eFRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgZGVzdEN0eC50cmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZik7XG4gICAgdGhpcy5fX29yaWdpbmFsVHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuICB9O1xuXG4gIGN0eC5zZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBjdHhTZXRUcmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZikge1xuICAgIGRlc3RDdHguc2V0VHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuICAgIHRoaXMuX19vcmlnaW5hbFNldFRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKTtcbiAgfTtcblxuICBjdHgucmVzZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBjdHhSZXNldFRyYW5zZm9ybSgpIHtcbiAgICBkZXN0Q3R4LnJlc2V0VHJhbnNmb3JtKCk7XG4gICAgdGhpcy5fX29yaWdpbmFsUmVzZXRUcmFuc2Zvcm0oKTtcbiAgfTtcblxuICBjdHgucm90YXRlID0gZnVuY3Rpb24gY3R4Um90YXRlKGFuZ2xlKSB7XG4gICAgZGVzdEN0eC5yb3RhdGUoYW5nbGUpO1xuICAgIHRoaXMuX19vcmlnaW5hbFJvdGF0ZShhbmdsZSk7XG4gIH07XG5cbiAgY3R4LmNsaXAgPSBmdW5jdGlvbiBjdHhSb3RhdGUocnVsZSkge1xuICAgIGRlc3RDdHguY2xpcChydWxlKTtcbiAgICB0aGlzLl9fb3JpZ2luYWxDbGlwKHJ1bGUpO1xuICB9O1xuXG4gIGN0eC5tb3ZlVG8gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgIGRlc3RDdHgubW92ZVRvKHgsIHkpO1xuICAgIHRoaXMuX19vcmlnaW5hbE1vdmVUbyh4LCB5KTtcbiAgfTtcblxuICBjdHgubGluZVRvID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICBkZXN0Q3R4LmxpbmVUbyh4LCB5KTtcbiAgICB0aGlzLl9fb3JpZ2luYWxMaW5lVG8oeCwgeSk7XG4gIH07XG5cbiAgY3R4LmJlemllckN1cnZlVG8gPSBmdW5jdGlvbiAoY3AxeCwgY3AxeSwgY3AyeCwgY3AyeSwgeCwgeSkge1xuICAgIGRlc3RDdHguYmV6aWVyQ3VydmVUbyhjcDF4LCBjcDF5LCBjcDJ4LCBjcDJ5LCB4LCB5KTtcbiAgICB0aGlzLl9fb3JpZ2luYWxCZXppZXJDdXJ2ZVRvKGNwMXgsIGNwMXksIGNwMngsIGNwMnksIHgsIHkpO1xuICB9O1xuXG4gIGN0eC5yZWN0ID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBkZXN0Q3R4LnJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgdGhpcy5fX29yaWdpbmFsUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgfTtcblxuICBjdHguY2xvc2VQYXRoID0gZnVuY3Rpb24gKCkge1xuICAgIGRlc3RDdHguY2xvc2VQYXRoKCk7XG4gICAgdGhpcy5fX29yaWdpbmFsQ2xvc2VQYXRoKCk7XG4gIH07XG5cbiAgY3R4LmJlZ2luUGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICBkZXN0Q3R4LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuX19vcmlnaW5hbEJlZ2luUGF0aCgpO1xuICB9O1xufVxuXG5jbGFzcyBDYWNoZWRDYW52YXNlcyB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhc0ZhY3RvcnkpIHtcbiAgICB0aGlzLmNhbnZhc0ZhY3RvcnkgPSBjYW52YXNGYWN0b3J5O1xuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG5cbiAgZ2V0Q2FudmFzKGlkLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgbGV0IGNhbnZhc0VudHJ5O1xuICAgIGlmICh0aGlzLmNhY2hlW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjYW52YXNFbnRyeSA9IHRoaXMuY2FjaGVbaWRdO1xuICAgICAgdGhpcy5jYW52YXNGYWN0b3J5LnJlc2V0KGNhbnZhc0VudHJ5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FudmFzRW50cnkgPSB0aGlzLmNhbnZhc0ZhY3RvcnkuY3JlYXRlKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgdGhpcy5jYWNoZVtpZF0gPSBjYW52YXNFbnRyeTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbnZhc0VudHJ5O1xuICB9XG5cbiAgZGVsZXRlKGlkKSB7XG4gICAgZGVsZXRlIHRoaXMuY2FjaGVbaWRdO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLmNhY2hlKSB7XG4gICAgICBjb25zdCBjYW52YXNFbnRyeSA9IHRoaXMuY2FjaGVbaWRdO1xuICAgICAgdGhpcy5jYW52YXNGYWN0b3J5LmRlc3Ryb3koY2FudmFzRW50cnkpO1xuICAgICAgZGVsZXRlIHRoaXMuY2FjaGVbaWRdO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkcmF3SW1hZ2VBdEludGVnZXJDb29yZHMoXG4gIGN0eCxcbiAgc3JjSW1nLFxuICBzcmNYLFxuICBzcmNZLFxuICBzcmNXLFxuICBzcmNILFxuICBkZXN0WCxcbiAgZGVzdFksXG4gIGRlc3RXLFxuICBkZXN0SFxuKSB7XG4gIGNvbnN0IFthLCBiLCBjLCBkLCB0eCwgdHldID0gZ2V0Q3VycmVudFRyYW5zZm9ybShjdHgpO1xuICBpZiAoYiA9PT0gMCAmJiBjID09PSAwKSB7XG4gICAgLy8gdG9wLWxlZnQgY29ybmVyIGlzIGF0IChYLCBZKSBhbmRcbiAgICAvLyBib3R0b20tcmlnaHQgb25lIGlzIGF0IChYICsgd2lkdGgsIFkgKyBoZWlnaHQpLlxuXG4gICAgLy8gSWYgbGVmdFggaXMgNC4zMjEgdGhlbiBpdCdzIHJvdW5kZWQgdG8gNC5cbiAgICAvLyBJZiB3aWR0aCBpcyAxMC40MzIgdGhlbiBpdCdzIHJvdW5kZWQgdG8gMTEgYmVjYXVzZVxuICAgIC8vIHJpZ2h0WCA9IGxlZnRYICsgd2lkdGggPSAxNC43NTMgd2hpY2ggaXMgcm91bmRlZCB0byAxNVxuICAgIC8vIHNvIGFmdGVyIHJvdW5kaW5nIHRoZSB0b3RhbCB3aWR0aCBpcyAxMSAoMTUgLSA0KS5cbiAgICAvLyBJdCdzIHdoeSB3ZSBjYW4ndCBqdXN0IGZsb29yL2NlaWwgdW5pZm9ybWx5LCBpdCBqdXN0IGRlcGVuZHNcbiAgICAvLyBvbiB0aGUgdmFsdWVzIHdlJ3ZlLlxuXG4gICAgY29uc3QgdGxYID0gZGVzdFggKiBhICsgdHg7XG4gICAgY29uc3QgclRsWCA9IE1hdGgucm91bmQodGxYKTtcbiAgICBjb25zdCB0bFkgPSBkZXN0WSAqIGQgKyB0eTtcbiAgICBjb25zdCByVGxZID0gTWF0aC5yb3VuZCh0bFkpO1xuICAgIGNvbnN0IGJyWCA9IChkZXN0WCArIGRlc3RXKSAqIGEgKyB0eDtcblxuICAgIC8vIFNvbWUgcGRmIGNvbnRhaW5zIGltYWdlcyB3aXRoIDF4MSBpbWFnZXMgc28gaW4gY2FzZSBvZiAwLXdpZHRoIGFmdGVyXG4gICAgLy8gc2NhbGluZyB3ZSBtdXN0IGZhbGxiYWNrIG9uIDEgdG8gYmUgc3VyZSB0aGVyZSBpcyBzb21ldGhpbmcuXG4gICAgY29uc3QgcldpZHRoID0gTWF0aC5hYnMoTWF0aC5yb3VuZChiclgpIC0gclRsWCkgfHwgMTtcbiAgICBjb25zdCBiclkgPSAoZGVzdFkgKyBkZXN0SCkgKiBkICsgdHk7XG4gICAgY29uc3QgckhlaWdodCA9IE1hdGguYWJzKE1hdGgucm91bmQoYnJZKSAtIHJUbFkpIHx8IDE7XG5cbiAgICAvLyBXZSBtdXN0IGFwcGx5IGEgdHJhbnNmb3JtYXRpb24gaW4gb3JkZXIgdG8gYXBwbHkgaXQgb24gdGhlIGltYWdlIGl0c2VsZi5cbiAgICAvLyBGb3IgZXhhbXBsZSBpZiBhID09IDEgJiYgZCA9PSAtMSwgaXQgbWVhbnMgdGhhdCB0aGUgaW1hZ2UgaXRzZWxmIGlzXG4gICAgLy8gbWlycm9yZWQgdy5yLnQuIHRoZSB4LWF4aXMuXG4gICAgY3R4LnNldFRyYW5zZm9ybShNYXRoLnNpZ24oYSksIDAsIDAsIE1hdGguc2lnbihkKSwgclRsWCwgclRsWSk7XG4gICAgY3R4LmRyYXdJbWFnZShzcmNJbWcsIHNyY1gsIHNyY1ksIHNyY1csIHNyY0gsIDAsIDAsIHJXaWR0aCwgckhlaWdodCk7XG4gICAgY3R4LnNldFRyYW5zZm9ybShhLCBiLCBjLCBkLCB0eCwgdHkpO1xuXG4gICAgcmV0dXJuIFtyV2lkdGgsIHJIZWlnaHRdO1xuICB9XG5cbiAgaWYgKGEgPT09IDAgJiYgZCA9PT0gMCkge1xuICAgIC8vIFRoaXMgcGF0aCBpcyB0YWtlbiBpbiBpc3N1ZTk0NjIucGRmIChwYWdlIDMpLlxuICAgIGNvbnN0IHRsWCA9IGRlc3RZICogYyArIHR4O1xuICAgIGNvbnN0IHJUbFggPSBNYXRoLnJvdW5kKHRsWCk7XG4gICAgY29uc3QgdGxZID0gZGVzdFggKiBiICsgdHk7XG4gICAgY29uc3QgclRsWSA9IE1hdGgucm91bmQodGxZKTtcbiAgICBjb25zdCBiclggPSAoZGVzdFkgKyBkZXN0SCkgKiBjICsgdHg7XG4gICAgY29uc3QgcldpZHRoID0gTWF0aC5hYnMoTWF0aC5yb3VuZChiclgpIC0gclRsWCkgfHwgMTtcbiAgICBjb25zdCBiclkgPSAoZGVzdFggKyBkZXN0VykgKiBiICsgdHk7XG4gICAgY29uc3QgckhlaWdodCA9IE1hdGguYWJzKE1hdGgucm91bmQoYnJZKSAtIHJUbFkpIHx8IDE7XG5cbiAgICBjdHguc2V0VHJhbnNmb3JtKDAsIE1hdGguc2lnbihiKSwgTWF0aC5zaWduKGMpLCAwLCByVGxYLCByVGxZKTtcbiAgICBjdHguZHJhd0ltYWdlKHNyY0ltZywgc3JjWCwgc3JjWSwgc3JjVywgc3JjSCwgMCwgMCwgckhlaWdodCwgcldpZHRoKTtcbiAgICBjdHguc2V0VHJhbnNmb3JtKGEsIGIsIGMsIGQsIHR4LCB0eSk7XG5cbiAgICByZXR1cm4gW3JIZWlnaHQsIHJXaWR0aF07XG4gIH1cblxuICAvLyBOb3QgYSBzY2FsZSBtYXRyaXggc28gbGV0IHRoZSByZW5kZXIgaGFuZGxlIHRoZSBjYXNlIHdpdGhvdXQgcm91bmRpbmcuXG4gIGN0eC5kcmF3SW1hZ2Uoc3JjSW1nLCBzcmNYLCBzcmNZLCBzcmNXLCBzcmNILCBkZXN0WCwgZGVzdFksIGRlc3RXLCBkZXN0SCk7XG5cbiAgY29uc3Qgc2NhbGVYID0gTWF0aC5oeXBvdChhLCBiKTtcbiAgY29uc3Qgc2NhbGVZID0gTWF0aC5oeXBvdChjLCBkKTtcbiAgcmV0dXJuIFtzY2FsZVggKiBkZXN0Vywgc2NhbGVZICogZGVzdEhdO1xufVxuXG5mdW5jdGlvbiBjb21waWxlVHlwZTNHbHlwaChpbWdEYXRhKSB7XG4gIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gaW1nRGF0YTtcbiAgaWYgKHdpZHRoID4gTUFYX1NJWkVfVE9fQ09NUElMRSB8fCBoZWlnaHQgPiBNQVhfU0laRV9UT19DT01QSUxFKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBQT0lOVF9UT19QUk9DRVNTX0xJTUlUID0gMTAwMDtcbiAgY29uc3QgUE9JTlRfVFlQRVMgPSBuZXcgVWludDhBcnJheShbXG4gICAgMCwgMiwgNCwgMCwgMSwgMCwgNSwgNCwgOCwgMTAsIDAsIDgsIDAsIDIsIDEsIDAsXG4gIF0pO1xuXG4gIGNvbnN0IHdpZHRoMSA9IHdpZHRoICsgMTtcbiAgY29uc3QgcG9pbnRzID0gbmV3IFVpbnQ4QXJyYXkod2lkdGgxICogKGhlaWdodCArIDEpKTtcbiAgbGV0IGksIGosIGowO1xuXG4gIC8vIGRlY29kZXMgYml0LXBhY2tlZCBtYXNrIGRhdGFcbiAgY29uc3QgbGluZVNpemUgPSAod2lkdGggKyA3KSAmIH43O1xuICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkobGluZVNpemUgKiBoZWlnaHQpO1xuICBsZXQgcG9zID0gMDtcbiAgZm9yIChjb25zdCBlbGVtIG9mIGltZ0RhdGEuZGF0YSkge1xuICAgIGxldCBtYXNrID0gMTI4O1xuICAgIHdoaWxlIChtYXNrID4gMCkge1xuICAgICAgZGF0YVtwb3MrK10gPSBlbGVtICYgbWFzayA/IDAgOiAyNTU7XG4gICAgICBtYXNrID4+PSAxO1xuICAgIH1cbiAgfVxuXG4gIC8vIGZpbmRpbmcgaW50ZXJlc3RpbmcgcG9pbnRzOiBldmVyeSBwb2ludCBpcyBsb2NhdGVkIGJldHdlZW4gbWFzayBwaXhlbHMsXG4gIC8vIHNvIHRoZXJlIHdpbGwgYmUgcG9pbnRzIG9mIHRoZSAod2lkdGggKyAxKXgoaGVpZ2h0ICsgMSkgZ3JpZC4gRXZlcnkgcG9pbnRcbiAgLy8gd2lsbCBoYXZlIGZsYWdzIGFzc2lnbmVkIGJhc2VkIG9uIG5laWdoYm9yaW5nIG1hc2sgcGl4ZWxzOlxuICAvLyAgIDQgfCA4XG4gIC8vICAgLS1QLS1cbiAgLy8gICAyIHwgMVxuICAvLyBXZSBhcmUgaW50ZXJlc3RlZCBvbmx5IGluIHBvaW50cyB3aXRoIHRoZSBmbGFnczpcbiAgLy8gICAtIG91dHNpZGUgY29ybmVyczogMSwgMiwgNCwgODtcbiAgLy8gICAtIGluc2lkZSBjb3JuZXJzOiA3LCAxMSwgMTMsIDE0O1xuICAvLyAgIC0gYW5kLCBpbnRlcnNlY3Rpb25zOiA1LCAxMC5cbiAgbGV0IGNvdW50ID0gMDtcbiAgcG9zID0gMDtcbiAgaWYgKGRhdGFbcG9zXSAhPT0gMCkge1xuICAgIHBvaW50c1swXSA9IDE7XG4gICAgKytjb3VudDtcbiAgfVxuICBmb3IgKGogPSAxOyBqIDwgd2lkdGg7IGorKykge1xuICAgIGlmIChkYXRhW3Bvc10gIT09IGRhdGFbcG9zICsgMV0pIHtcbiAgICAgIHBvaW50c1tqXSA9IGRhdGFbcG9zXSA/IDIgOiAxO1xuICAgICAgKytjb3VudDtcbiAgICB9XG4gICAgcG9zKys7XG4gIH1cbiAgaWYgKGRhdGFbcG9zXSAhPT0gMCkge1xuICAgIHBvaW50c1tqXSA9IDI7XG4gICAgKytjb3VudDtcbiAgfVxuICBmb3IgKGkgPSAxOyBpIDwgaGVpZ2h0OyBpKyspIHtcbiAgICBwb3MgPSBpICogbGluZVNpemU7XG4gICAgajAgPSBpICogd2lkdGgxO1xuICAgIGlmIChkYXRhW3BvcyAtIGxpbmVTaXplXSAhPT0gZGF0YVtwb3NdKSB7XG4gICAgICBwb2ludHNbajBdID0gZGF0YVtwb3NdID8gMSA6IDg7XG4gICAgICArK2NvdW50O1xuICAgIH1cbiAgICAvLyAnc3VtJyBpcyB0aGUgcG9zaXRpb24gb2YgdGhlIGN1cnJlbnQgcGl4ZWwgY29uZmlndXJhdGlvbiBpbiB0aGUgJ1RZUEVTJ1xuICAgIC8vIGFycmF5IChpbiBvcmRlciA4LTEtMi00LCBzbyB3ZSBjYW4gdXNlICc+PjInIHRvIHNoaWZ0IHRoZSBjb2x1bW4pLlxuICAgIGxldCBzdW0gPSAoZGF0YVtwb3NdID8gNCA6IDApICsgKGRhdGFbcG9zIC0gbGluZVNpemVdID8gOCA6IDApO1xuICAgIGZvciAoaiA9IDE7IGogPCB3aWR0aDsgaisrKSB7XG4gICAgICBzdW0gPVxuICAgICAgICAoc3VtID4+IDIpICtcbiAgICAgICAgKGRhdGFbcG9zICsgMV0gPyA0IDogMCkgK1xuICAgICAgICAoZGF0YVtwb3MgLSBsaW5lU2l6ZSArIDFdID8gOCA6IDApO1xuICAgICAgaWYgKFBPSU5UX1RZUEVTW3N1bV0pIHtcbiAgICAgICAgcG9pbnRzW2owICsgal0gPSBQT0lOVF9UWVBFU1tzdW1dO1xuICAgICAgICArK2NvdW50O1xuICAgICAgfVxuICAgICAgcG9zKys7XG4gICAgfVxuICAgIGlmIChkYXRhW3BvcyAtIGxpbmVTaXplXSAhPT0gZGF0YVtwb3NdKSB7XG4gICAgICBwb2ludHNbajAgKyBqXSA9IGRhdGFbcG9zXSA/IDIgOiA0O1xuICAgICAgKytjb3VudDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQgPiBQT0lOVF9UT19QUk9DRVNTX0xJTUlUKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwb3MgPSBsaW5lU2l6ZSAqIChoZWlnaHQgLSAxKTtcbiAgajAgPSBpICogd2lkdGgxO1xuICBpZiAoZGF0YVtwb3NdICE9PSAwKSB7XG4gICAgcG9pbnRzW2owXSA9IDg7XG4gICAgKytjb3VudDtcbiAgfVxuICBmb3IgKGogPSAxOyBqIDwgd2lkdGg7IGorKykge1xuICAgIGlmIChkYXRhW3Bvc10gIT09IGRhdGFbcG9zICsgMV0pIHtcbiAgICAgIHBvaW50c1tqMCArIGpdID0gZGF0YVtwb3NdID8gNCA6IDg7XG4gICAgICArK2NvdW50O1xuICAgIH1cbiAgICBwb3MrKztcbiAgfVxuICBpZiAoZGF0YVtwb3NdICE9PSAwKSB7XG4gICAgcG9pbnRzW2owICsgal0gPSA0O1xuICAgICsrY291bnQ7XG4gIH1cbiAgaWYgKGNvdW50ID4gUE9JTlRfVE9fUFJPQ0VTU19MSU1JVCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gYnVpbGRpbmcgb3V0bGluZXNcbiAgY29uc3Qgc3RlcHMgPSBuZXcgSW50MzJBcnJheShbMCwgd2lkdGgxLCAtMSwgMCwgLXdpZHRoMSwgMCwgMCwgMCwgMV0pO1xuICBjb25zdCBwYXRoID0gbmV3IFBhdGgyRCgpO1xuXG4gIC8vIHRoZSBwYXRoIHNoYWxsIGJlIHBhaW50ZWQgaW4gWzAuLjFdeFswLi4xXSBzcGFjZVxuICBjb25zdCB7IGEsIGIsIGMsIGQsIGUsIGYgfSA9IG5ldyBET01NYXRyaXgoKVxuICAgIC5zY2FsZVNlbGYoMSAvIHdpZHRoLCAtMSAvIGhlaWdodClcbiAgICAudHJhbnNsYXRlU2VsZigwLCAtaGVpZ2h0KTtcblxuICBmb3IgKGkgPSAwOyBjb3VudCAmJiBpIDw9IGhlaWdodDsgaSsrKSB7XG4gICAgbGV0IHAgPSBpICogd2lkdGgxO1xuICAgIGNvbnN0IGVuZCA9IHAgKyB3aWR0aDtcbiAgICB3aGlsZSAocCA8IGVuZCAmJiAhcG9pbnRzW3BdKSB7XG4gICAgICBwKys7XG4gICAgfVxuICAgIGlmIChwID09PSBlbmQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBsZXQgeCA9IHAgJSB3aWR0aDE7XG4gICAgbGV0IHkgPSBpO1xuICAgIHBhdGgubW92ZVRvKGEgKiB4ICsgYyAqIHkgKyBlLCBiICogeCArIGQgKiB5ICsgZik7XG5cbiAgICBjb25zdCBwMCA9IHA7XG4gICAgbGV0IHR5cGUgPSBwb2ludHNbcF07XG4gICAgZG8ge1xuICAgICAgY29uc3Qgc3RlcCA9IHN0ZXBzW3R5cGVdO1xuICAgICAgZG8ge1xuICAgICAgICBwICs9IHN0ZXA7XG4gICAgICB9IHdoaWxlICghcG9pbnRzW3BdKTtcblxuICAgICAgY29uc3QgcHAgPSBwb2ludHNbcF07XG4gICAgICBpZiAocHAgIT09IDUgJiYgcHAgIT09IDEwKSB7XG4gICAgICAgIC8vIHNldCBuZXcgZGlyZWN0aW9uXG4gICAgICAgIHR5cGUgPSBwcDtcbiAgICAgICAgLy8gZGVsZXRlIG1hcmtcbiAgICAgICAgcG9pbnRzW3BdID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHR5cGUgaXMgNSBvciAxMCwgaWUsIGEgY3Jvc3NpbmdcbiAgICAgICAgLy8gc2V0IG5ldyBkaXJlY3Rpb25cbiAgICAgICAgdHlwZSA9IHBwICYgKCgweDMzICogdHlwZSkgPj4gNCk7XG4gICAgICAgIC8vIHNldCBuZXcgdHlwZSBmb3IgXCJmdXR1cmUgaGl0XCJcbiAgICAgICAgcG9pbnRzW3BdICY9ICh0eXBlID4+IDIpIHwgKHR5cGUgPDwgMik7XG4gICAgICB9XG4gICAgICB4ID0gcCAlIHdpZHRoMTtcbiAgICAgIHkgPSAocCAvIHdpZHRoMSkgfCAwO1xuICAgICAgcGF0aC5saW5lVG8oYSAqIHggKyBjICogeSArIGUsIGIgKiB4ICsgZCAqIHkgKyBmKTtcblxuICAgICAgaWYgKCFwb2ludHNbcF0pIHtcbiAgICAgICAgLS1jb3VudDtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChwMCAhPT0gcCk7XG4gICAgLS1pO1xuICB9XG5cbiAgcmV0dXJuIHBhdGg7XG59XG5cbmNsYXNzIENhbnZhc0V4dHJhU3RhdGUge1xuICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgLy8gQXJlIHNvZnQgbWFza3MgYW5kIGFscGhhIHZhbHVlcyBzaGFwZXMgb3Igb3BhY2l0aWVzP1xuICAgIHRoaXMuYWxwaGFJc1NoYXBlID0gZmFsc2U7XG4gICAgdGhpcy5mb250U2l6ZSA9IDA7XG4gICAgdGhpcy5mb250U2l6ZVNjYWxlID0gMTtcbiAgICB0aGlzLnRleHRNYXRyaXggPSBJREVOVElUWV9NQVRSSVg7XG4gICAgdGhpcy50ZXh0TWF0cml4U2NhbGUgPSAxO1xuICAgIHRoaXMuZm9udE1hdHJpeCA9IEZPTlRfSURFTlRJVFlfTUFUUklYO1xuICAgIHRoaXMubGVhZGluZyA9IDA7XG4gICAgLy8gQ3VycmVudCBwb2ludCAoaW4gdXNlciBjb29yZGluYXRlcylcbiAgICB0aGlzLnggPSAwO1xuICAgIHRoaXMueSA9IDA7XG4gICAgLy8gU3RhcnQgb2YgdGV4dCBsaW5lIChpbiB0ZXh0IGNvb3JkaW5hdGVzKVxuICAgIHRoaXMubGluZVggPSAwO1xuICAgIHRoaXMubGluZVkgPSAwO1xuICAgIC8vIENoYXJhY3RlciBhbmQgd29yZCBzcGFjaW5nXG4gICAgdGhpcy5jaGFyU3BhY2luZyA9IDA7XG4gICAgdGhpcy53b3JkU3BhY2luZyA9IDA7XG4gICAgdGhpcy50ZXh0SFNjYWxlID0gMTtcbiAgICB0aGlzLnRleHRSZW5kZXJpbmdNb2RlID0gVGV4dFJlbmRlcmluZ01vZGUuRklMTDtcbiAgICB0aGlzLnRleHRSaXNlID0gMDtcbiAgICAvLyBEZWZhdWx0IGZvcmUgYW5kIGJhY2tncm91bmQgY29sb3JzXG4gICAgdGhpcy5maWxsQ29sb3IgPSBcIiMwMDAwMDBcIjtcbiAgICB0aGlzLnN0cm9rZUNvbG9yID0gXCIjMDAwMDAwXCI7XG4gICAgdGhpcy5wYXR0ZXJuRmlsbCA9IGZhbHNlO1xuICAgIHRoaXMucGF0dGVyblN0cm9rZSA9IGZhbHNlO1xuICAgIC8vIE5vdGU6IGZpbGwgYWxwaGEgYXBwbGllcyB0byBhbGwgbm9uLXN0cm9raW5nIG9wZXJhdGlvbnNcbiAgICB0aGlzLmZpbGxBbHBoYSA9IDE7XG4gICAgdGhpcy5zdHJva2VBbHBoYSA9IDE7XG4gICAgdGhpcy5saW5lV2lkdGggPSAxO1xuICAgIHRoaXMuYWN0aXZlU01hc2sgPSBudWxsO1xuICAgIHRoaXMudHJhbnNmZXJNYXBzID0gXCJub25lXCI7XG5cbiAgICB0aGlzLnN0YXJ0TmV3UGF0aEFuZENsaXBCb3goWzAsIDAsIHdpZHRoLCBoZWlnaHRdKTtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIGNvbnN0IGNsb25lID0gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICBjbG9uZS5jbGlwQm94ID0gdGhpcy5jbGlwQm94LnNsaWNlKCk7XG4gICAgcmV0dXJuIGNsb25lO1xuICB9XG5cbiAgdXBkYXRlUmVjdE1pbk1heCh0cmFuc2Zvcm0sIHJlY3QpIHtcbiAgICBjb25zdCBwMSA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0ocmVjdCwgdHJhbnNmb3JtKTtcbiAgICBjb25zdCBwMiA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0ocmVjdC5zbGljZSgyKSwgdHJhbnNmb3JtKTtcbiAgICBjb25zdCBwMyA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0oW3JlY3RbMF0sIHJlY3RbM11dLCB0cmFuc2Zvcm0pO1xuICAgIGNvbnN0IHA0ID0gVXRpbC5hcHBseVRyYW5zZm9ybShbcmVjdFsyXSwgcmVjdFsxXV0sIHRyYW5zZm9ybSk7XG5cbiAgICB0aGlzLm1pblggPSBNYXRoLm1pbih0aGlzLm1pblgsIHAxWzBdLCBwMlswXSwgcDNbMF0sIHA0WzBdKTtcbiAgICB0aGlzLm1pblkgPSBNYXRoLm1pbih0aGlzLm1pblksIHAxWzFdLCBwMlsxXSwgcDNbMV0sIHA0WzFdKTtcbiAgICB0aGlzLm1heFggPSBNYXRoLm1heCh0aGlzLm1heFgsIHAxWzBdLCBwMlswXSwgcDNbMF0sIHA0WzBdKTtcbiAgICB0aGlzLm1heFkgPSBNYXRoLm1heCh0aGlzLm1heFksIHAxWzFdLCBwMlsxXSwgcDNbMV0sIHA0WzFdKTtcbiAgfVxuXG4gIGdldFBhdGhCb3VuZGluZ0JveChwYXRoVHlwZSA9IFBhdGhUeXBlLkZJTEwsIHRyYW5zZm9ybSA9IG51bGwpIHtcbiAgICBjb25zdCBib3ggPSBbdGhpcy5taW5YLCB0aGlzLm1pblksIHRoaXMubWF4WCwgdGhpcy5tYXhZXTtcbiAgICBpZiAocGF0aFR5cGUgPT09IFBhdGhUeXBlLlNUUk9LRSkge1xuICAgICAgaWYgKCF0cmFuc2Zvcm0pIHtcbiAgICAgICAgdW5yZWFjaGFibGUoXCJTdHJva2UgYm91bmRpbmcgYm94IG11c3QgaW5jbHVkZSB0cmFuc2Zvcm0uXCIpO1xuICAgICAgfVxuICAgICAgLy8gU3Ryb2tlZCBwYXRocyBjYW4gYmUgb3V0c2lkZSBvZiB0aGUgcGF0aCBib3VuZGluZyBib3ggYnkgMS8yIHRoZSBsaW5lXG4gICAgICAvLyB3aWR0aC5cbiAgICAgIGNvbnN0IHNjYWxlID0gVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSh0cmFuc2Zvcm0pO1xuICAgICAgY29uc3QgeFN0cm9rZVBhZCA9IChzY2FsZVswXSAqIHRoaXMubGluZVdpZHRoKSAvIDI7XG4gICAgICBjb25zdCB5U3Ryb2tlUGFkID0gKHNjYWxlWzFdICogdGhpcy5saW5lV2lkdGgpIC8gMjtcbiAgICAgIGJveFswXSAtPSB4U3Ryb2tlUGFkO1xuICAgICAgYm94WzFdIC09IHlTdHJva2VQYWQ7XG4gICAgICBib3hbMl0gKz0geFN0cm9rZVBhZDtcbiAgICAgIGJveFszXSArPSB5U3Ryb2tlUGFkO1xuICAgIH1cbiAgICByZXR1cm4gYm94O1xuICB9XG5cbiAgdXBkYXRlQ2xpcEZyb21QYXRoKCkge1xuICAgIGNvbnN0IGludGVyc2VjdCA9IFV0aWwuaW50ZXJzZWN0KHRoaXMuY2xpcEJveCwgdGhpcy5nZXRQYXRoQm91bmRpbmdCb3goKSk7XG4gICAgdGhpcy5zdGFydE5ld1BhdGhBbmRDbGlwQm94KGludGVyc2VjdCB8fCBbMCwgMCwgMCwgMF0pO1xuICB9XG5cbiAgaXNFbXB0eUNsaXAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWluWCA9PT0gSW5maW5pdHk7XG4gIH1cblxuICBzdGFydE5ld1BhdGhBbmRDbGlwQm94KGJveCkge1xuICAgIHRoaXMuY2xpcEJveCA9IGJveDtcbiAgICB0aGlzLm1pblggPSBJbmZpbml0eTtcbiAgICB0aGlzLm1pblkgPSBJbmZpbml0eTtcbiAgICB0aGlzLm1heFggPSAwO1xuICAgIHRoaXMubWF4WSA9IDA7XG4gIH1cblxuICBnZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KHBhdGhUeXBlID0gUGF0aFR5cGUuRklMTCwgdHJhbnNmb3JtID0gbnVsbCkge1xuICAgIHJldHVybiBVdGlsLmludGVyc2VjdChcbiAgICAgIHRoaXMuY2xpcEJveCxcbiAgICAgIHRoaXMuZ2V0UGF0aEJvdW5kaW5nQm94KHBhdGhUeXBlLCB0cmFuc2Zvcm0pXG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdXRCaW5hcnlJbWFnZURhdGEoY3R4LCBpbWdEYXRhKSB7XG4gIGlmIChpbWdEYXRhIGluc3RhbmNlb2YgSW1hZ2VEYXRhKSB7XG4gICAgY3R4LnB1dEltYWdlRGF0YShpbWdEYXRhLCAwLCAwKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBQdXQgdGhlIGltYWdlIGRhdGEgdG8gdGhlIGNhbnZhcyBpbiBjaHVua3MsIHJhdGhlciB0aGFuIHB1dHRpbmcgdGhlXG4gIC8vIHdob2xlIGltYWdlIGF0IG9uY2UuICBUaGlzIHNhdmVzIEpTIG1lbW9yeSwgYmVjYXVzZSB0aGUgSW1hZ2VEYXRhIG9iamVjdFxuICAvLyBpcyBzbWFsbGVyLiBJdCBhbHNvIHBvc3NpYmx5IHNhdmVzIEMrKyBtZW1vcnkgd2l0aGluIHRoZSBpbXBsZW1lbnRhdGlvblxuICAvLyBvZiBwdXRJbWFnZURhdGEoKS4gKEUuZy4gaW4gRmlyZWZveCB3ZSBtYWtlIHR3byBzaG9ydC1saXZlZCBjb3BpZXMgb2ZcbiAgLy8gdGhlIGRhdGEgcGFzc2VkIHRvIHB1dEltYWdlRGF0YSgpKS4gfG58IHNob3VsZG4ndCBiZSB0b28gc21hbGwsIGhvd2V2ZXIsXG4gIC8vIGJlY2F1c2UgdG9vIG1hbnkgcHV0SW1hZ2VEYXRhKCkgY2FsbHMgd2lsbCBzbG93IHRoaW5ncyBkb3duLlxuICAvL1xuICAvLyBOb3RlOiBhcyB3cml0dGVuLCBpZiB0aGUgbGFzdCBjaHVuayBpcyBwYXJ0aWFsLCB0aGUgcHV0SW1hZ2VEYXRhKCkgY2FsbFxuICAvLyB3aWxsIChjb25jZXB0dWFsbHkpIHB1dCBwaXhlbHMgcGFzdCB0aGUgYm91bmRzIG9mIHRoZSBjYW52YXMuICBCdXRcbiAgLy8gdGhhdCdzIG9rOyBhbnkgc3VjaCBwaXhlbHMgYXJlIGlnbm9yZWQuXG5cbiAgY29uc3QgaGVpZ2h0ID0gaW1nRGF0YS5oZWlnaHQsXG4gICAgd2lkdGggPSBpbWdEYXRhLndpZHRoO1xuICBjb25zdCBwYXJ0aWFsQ2h1bmtIZWlnaHQgPSBoZWlnaHQgJSBGVUxMX0NIVU5LX0hFSUdIVDtcbiAgY29uc3QgZnVsbENodW5rcyA9IChoZWlnaHQgLSBwYXJ0aWFsQ2h1bmtIZWlnaHQpIC8gRlVMTF9DSFVOS19IRUlHSFQ7XG4gIGNvbnN0IHRvdGFsQ2h1bmtzID0gcGFydGlhbENodW5rSGVpZ2h0ID09PSAwID8gZnVsbENodW5rcyA6IGZ1bGxDaHVua3MgKyAxO1xuXG4gIGNvbnN0IGNodW5rSW1nRGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIEZVTExfQ0hVTktfSEVJR0hUKTtcbiAgbGV0IHNyY1BvcyA9IDAsXG4gICAgZGVzdFBvcztcbiAgY29uc3Qgc3JjID0gaW1nRGF0YS5kYXRhO1xuICBjb25zdCBkZXN0ID0gY2h1bmtJbWdEYXRhLmRhdGE7XG4gIGxldCBpLCBqLCB0aGlzQ2h1bmtIZWlnaHQsIGVsZW1zSW5UaGlzQ2h1bms7XG5cbiAgLy8gVGhlcmUgYXJlIG11bHRpcGxlIGZvcm1zIGluIHdoaWNoIHRoZSBwaXhlbCBkYXRhIGNhbiBiZSBwYXNzZWQsIGFuZFxuICAvLyBpbWdEYXRhLmtpbmQgdGVsbHMgdXMgd2hpY2ggb25lIHRoaXMgaXMuXG4gIGlmIChpbWdEYXRhLmtpbmQgPT09IEltYWdlS2luZC5HUkFZU0NBTEVfMUJQUCkge1xuICAgIC8vIEdyYXlzY2FsZSwgMSBiaXQgcGVyIHBpeGVsIChpLmUuIGJsYWNrLWFuZC13aGl0ZSkuXG4gICAgY29uc3Qgc3JjTGVuZ3RoID0gc3JjLmJ5dGVMZW5ndGg7XG4gICAgY29uc3QgZGVzdDMyID0gbmV3IFVpbnQzMkFycmF5KGRlc3QuYnVmZmVyLCAwLCBkZXN0LmJ5dGVMZW5ndGggPj4gMik7XG4gICAgY29uc3QgZGVzdDMyRGF0YUxlbmd0aCA9IGRlc3QzMi5sZW5ndGg7XG4gICAgY29uc3QgZnVsbFNyY0RpZmYgPSAod2lkdGggKyA3KSA+PiAzO1xuICAgIGNvbnN0IHdoaXRlID0gMHhmZmZmZmZmZjtcbiAgICBjb25zdCBibGFjayA9IEZlYXR1cmVUZXN0LmlzTGl0dGxlRW5kaWFuID8gMHhmZjAwMDAwMCA6IDB4MDAwMDAwZmY7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgdG90YWxDaHVua3M7IGkrKykge1xuICAgICAgdGhpc0NodW5rSGVpZ2h0ID0gaSA8IGZ1bGxDaHVua3MgPyBGVUxMX0NIVU5LX0hFSUdIVCA6IHBhcnRpYWxDaHVua0hlaWdodDtcbiAgICAgIGRlc3RQb3MgPSAwO1xuICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXNDaHVua0hlaWdodDsgaisrKSB7XG4gICAgICAgIGNvbnN0IHNyY0RpZmYgPSBzcmNMZW5ndGggLSBzcmNQb3M7XG4gICAgICAgIGxldCBrID0gMDtcbiAgICAgICAgY29uc3Qga0VuZCA9IHNyY0RpZmYgPiBmdWxsU3JjRGlmZiA/IHdpZHRoIDogc3JjRGlmZiAqIDggLSA3O1xuICAgICAgICBjb25zdCBrRW5kVW5yb2xsZWQgPSBrRW5kICYgfjc7XG4gICAgICAgIGxldCBtYXNrID0gMDtcbiAgICAgICAgbGV0IHNyY0J5dGUgPSAwO1xuICAgICAgICBmb3IgKDsgayA8IGtFbmRVbnJvbGxlZDsgayArPSA4KSB7XG4gICAgICAgICAgc3JjQnl0ZSA9IHNyY1tzcmNQb3MrK107XG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgMTI4ID8gd2hpdGUgOiBibGFjaztcbiAgICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IHNyY0J5dGUgJiA2NCA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgMzIgPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIDE2ID8gd2hpdGUgOiBibGFjaztcbiAgICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IHNyY0J5dGUgJiA4ID8gd2hpdGUgOiBibGFjaztcbiAgICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IHNyY0J5dGUgJiA0ID8gd2hpdGUgOiBibGFjaztcbiAgICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IHNyY0J5dGUgJiAyID8gd2hpdGUgOiBibGFjaztcbiAgICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IHNyY0J5dGUgJiAxID8gd2hpdGUgOiBibGFjaztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgayA8IGtFbmQ7IGsrKykge1xuICAgICAgICAgIGlmIChtYXNrID09PSAwKSB7XG4gICAgICAgICAgICBzcmNCeXRlID0gc3JjW3NyY1BvcysrXTtcbiAgICAgICAgICAgIG1hc2sgPSAxMjg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgbWFzayA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgICAgbWFzayA+Pj0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gV2UgcmFuIG91dCBvZiBpbnB1dC4gTWFrZSBhbGwgcmVtYWluaW5nIHBpeGVscyB0cmFuc3BhcmVudC5cbiAgICAgIHdoaWxlIChkZXN0UG9zIDwgZGVzdDMyRGF0YUxlbmd0aCkge1xuICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGN0eC5wdXRJbWFnZURhdGEoY2h1bmtJbWdEYXRhLCAwLCBpICogRlVMTF9DSFVOS19IRUlHSFQpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpbWdEYXRhLmtpbmQgPT09IEltYWdlS2luZC5SR0JBXzMyQlBQKSB7XG4gICAgLy8gUkdCQSwgMzItYml0cyBwZXIgcGl4ZWwuXG4gICAgaiA9IDA7XG4gICAgZWxlbXNJblRoaXNDaHVuayA9IHdpZHRoICogRlVMTF9DSFVOS19IRUlHSFQgKiA0O1xuICAgIGZvciAoaSA9IDA7IGkgPCBmdWxsQ2h1bmtzOyBpKyspIHtcbiAgICAgIGRlc3Quc2V0KHNyYy5zdWJhcnJheShzcmNQb3MsIHNyY1BvcyArIGVsZW1zSW5UaGlzQ2h1bmspKTtcbiAgICAgIHNyY1BvcyArPSBlbGVtc0luVGhpc0NodW5rO1xuXG4gICAgICBjdHgucHV0SW1hZ2VEYXRhKGNodW5rSW1nRGF0YSwgMCwgaik7XG4gICAgICBqICs9IEZVTExfQ0hVTktfSEVJR0hUO1xuICAgIH1cbiAgICBpZiAoaSA8IHRvdGFsQ2h1bmtzKSB7XG4gICAgICBlbGVtc0luVGhpc0NodW5rID0gd2lkdGggKiBwYXJ0aWFsQ2h1bmtIZWlnaHQgKiA0O1xuICAgICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY1Bvcywgc3JjUG9zICsgZWxlbXNJblRoaXNDaHVuaykpO1xuXG4gICAgICBjdHgucHV0SW1hZ2VEYXRhKGNodW5rSW1nRGF0YSwgMCwgaik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGltZ0RhdGEua2luZCA9PT0gSW1hZ2VLaW5kLlJHQl8yNEJQUCkge1xuICAgIC8vIFJHQiwgMjQtYml0cyBwZXIgcGl4ZWwuXG4gICAgdGhpc0NodW5rSGVpZ2h0ID0gRlVMTF9DSFVOS19IRUlHSFQ7XG4gICAgZWxlbXNJblRoaXNDaHVuayA9IHdpZHRoICogdGhpc0NodW5rSGVpZ2h0O1xuICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbENodW5rczsgaSsrKSB7XG4gICAgICBpZiAoaSA+PSBmdWxsQ2h1bmtzKSB7XG4gICAgICAgIHRoaXNDaHVua0hlaWdodCA9IHBhcnRpYWxDaHVua0hlaWdodDtcbiAgICAgICAgZWxlbXNJblRoaXNDaHVuayA9IHdpZHRoICogdGhpc0NodW5rSGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBkZXN0UG9zID0gMDtcbiAgICAgIGZvciAoaiA9IGVsZW1zSW5UaGlzQ2h1bms7IGotLTsgKSB7XG4gICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107XG4gICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107XG4gICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107XG4gICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IDI1NTtcbiAgICAgIH1cblxuICAgICAgY3R4LnB1dEltYWdlRGF0YShjaHVua0ltZ0RhdGEsIDAsIGkgKiBGVUxMX0NIVU5LX0hFSUdIVCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgYmFkIGltYWdlIGtpbmQ6ICR7aW1nRGF0YS5raW5kfWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1dEJpbmFyeUltYWdlTWFzayhjdHgsIGltZ0RhdGEpIHtcbiAgaWYgKGltZ0RhdGEuYml0bWFwKSB7XG4gICAgLy8gVGhlIGJpdG1hcCBoYXMgYmVlbiBjcmVhdGVkIGluIHRoZSB3b3JrZXIuXG4gICAgY3R4LmRyYXdJbWFnZShpbWdEYXRhLmJpdG1hcCwgMCwgMCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gU2xvdyBwYXRoOiBPZmZzY3JlZW5DYW52YXMgaXNuJ3QgYXZhaWxhYmxlIGluIHRoZSB3b3JrZXIuXG4gIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0LFxuICAgIHdpZHRoID0gaW1nRGF0YS53aWR0aDtcbiAgY29uc3QgcGFydGlhbENodW5rSGVpZ2h0ID0gaGVpZ2h0ICUgRlVMTF9DSFVOS19IRUlHSFQ7XG4gIGNvbnN0IGZ1bGxDaHVua3MgPSAoaGVpZ2h0IC0gcGFydGlhbENodW5rSGVpZ2h0KSAvIEZVTExfQ0hVTktfSEVJR0hUO1xuICBjb25zdCB0b3RhbENodW5rcyA9IHBhcnRpYWxDaHVua0hlaWdodCA9PT0gMCA/IGZ1bGxDaHVua3MgOiBmdWxsQ2h1bmtzICsgMTtcblxuICBjb25zdCBjaHVua0ltZ0RhdGEgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBGVUxMX0NIVU5LX0hFSUdIVCk7XG4gIGxldCBzcmNQb3MgPSAwO1xuICBjb25zdCBzcmMgPSBpbWdEYXRhLmRhdGE7XG4gIGNvbnN0IGRlc3QgPSBjaHVua0ltZ0RhdGEuZGF0YTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsQ2h1bmtzOyBpKyspIHtcbiAgICBjb25zdCB0aGlzQ2h1bmtIZWlnaHQgPVxuICAgICAgaSA8IGZ1bGxDaHVua3MgPyBGVUxMX0NIVU5LX0hFSUdIVCA6IHBhcnRpYWxDaHVua0hlaWdodDtcblxuICAgIC8vIEV4cGFuZCB0aGUgbWFzayBzbyBpdCBjYW4gYmUgdXNlZCBieSB0aGUgY2FudmFzLiAgQW55IHJlcXVpcmVkXG4gICAgLy8gaW52ZXJzaW9uIGhhcyBhbHJlYWR5IGJlZW4gaGFuZGxlZC5cblxuICAgICh7IHNyY1BvcyB9ID0gY29udmVydEJsYWNrQW5kV2hpdGVUb1JHQkEoe1xuICAgICAgc3JjLFxuICAgICAgc3JjUG9zLFxuICAgICAgZGVzdCxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzQ2h1bmtIZWlnaHQsXG4gICAgICBub25CbGFja0NvbG9yOiAwLFxuICAgIH0pKTtcblxuICAgIGN0eC5wdXRJbWFnZURhdGEoY2h1bmtJbWdEYXRhLCAwLCBpICogRlVMTF9DSFVOS19IRUlHSFQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvcHlDdHhTdGF0ZShzb3VyY2VDdHgsIGRlc3RDdHgpIHtcbiAgY29uc3QgcHJvcGVydGllcyA9IFtcbiAgICBcInN0cm9rZVN0eWxlXCIsXG4gICAgXCJmaWxsU3R5bGVcIixcbiAgICBcImZpbGxSdWxlXCIsXG4gICAgXCJnbG9iYWxBbHBoYVwiLFxuICAgIFwibGluZVdpZHRoXCIsXG4gICAgXCJsaW5lQ2FwXCIsXG4gICAgXCJsaW5lSm9pblwiLFxuICAgIFwibWl0ZXJMaW1pdFwiLFxuICAgIFwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uXCIsXG4gICAgXCJmb250XCIsXG4gICAgXCJmaWx0ZXJcIixcbiAgXTtcbiAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKHNvdXJjZUN0eFtwcm9wZXJ0eV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVzdEN0eFtwcm9wZXJ0eV0gPSBzb3VyY2VDdHhbcHJvcGVydHldO1xuICAgIH1cbiAgfVxuICBpZiAoc291cmNlQ3R4LnNldExpbmVEYXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICBkZXN0Q3R4LnNldExpbmVEYXNoKHNvdXJjZUN0eC5nZXRMaW5lRGFzaCgpKTtcbiAgICBkZXN0Q3R4LmxpbmVEYXNoT2Zmc2V0ID0gc291cmNlQ3R4LmxpbmVEYXNoT2Zmc2V0O1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc2V0Q3R4VG9EZWZhdWx0KGN0eCkge1xuICBjdHguc3Ryb2tlU3R5bGUgPSBjdHguZmlsbFN0eWxlID0gXCIjMDAwMDAwXCI7XG4gIGN0eC5maWxsUnVsZSA9IFwibm9uemVyb1wiO1xuICBjdHguZ2xvYmFsQWxwaGEgPSAxO1xuICBjdHgubGluZVdpZHRoID0gMTtcbiAgY3R4LmxpbmVDYXAgPSBcImJ1dHRcIjtcbiAgY3R4LmxpbmVKb2luID0gXCJtaXRlclwiO1xuICBjdHgubWl0ZXJMaW1pdCA9IDEwO1xuICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xuICBjdHguZm9udCA9IFwiMTBweCBzYW5zLXNlcmlmXCI7XG4gIGlmIChjdHguc2V0TGluZURhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgIGN0eC5zZXRMaW5lRGFzaChbXSk7XG4gICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gMDtcbiAgfVxuICBpZiAoXG4gICAgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkgfHxcbiAgICAhaXNOb2RlSlNcbiAgKSB7XG4gICAgY29uc3QgeyBmaWx0ZXIgfSA9IGN0eDtcbiAgICBpZiAoZmlsdGVyICE9PSBcIm5vbmVcIiAmJiBmaWx0ZXIgIT09IFwiXCIpIHtcbiAgICAgIGN0eC5maWx0ZXIgPSBcIm5vbmVcIjtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0SW1hZ2VTbW9vdGhpbmdFbmFibGVkKHRyYW5zZm9ybSwgaW50ZXJwb2xhdGUpIHtcbiAgLy8gSW4gc2VjdGlvbiA4LjkuNS4zIG9mIHRoZSBQREYgc3BlYywgaXQncyBtZW50aW9uZWQgdGhhdCB0aGUgaW50ZXJwb2xhdGVcbiAgLy8gZmxhZyBzaG91bGQgYmUgdXNlZCB3aGVuIHRoZSBpbWFnZSBpcyB1cHNjYWxlZC5cbiAgLy8gSW4gRmlyZWZveCwgc21vb3RoaW5nIGlzIGFsd2F5cyB1c2VkIHdoZW4gZG93bnNjYWxpbmcgaW1hZ2VzIChidWcgMTM2MDQxNSkuXG5cbiAgaWYgKGludGVycG9sYXRlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCBzY2FsZSA9IFV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUodHJhbnNmb3JtKTtcbiAgLy8gUm91bmQgdG8gYSAzMmJpdCBmbG9hdCBzbyB0aGF0IGA8PWAgY2hlY2sgYmVsb3cgd2lsbCBwYXNzIGZvciBudW1iZXJzIHRoYXRcbiAgLy8gYXJlIHZlcnkgY2xvc2UsIGJ1dCBub3QgZXhhY3RseSB0aGUgc2FtZSA2NGJpdCBmbG9hdHMuXG4gIHNjYWxlWzBdID0gTWF0aC5mcm91bmQoc2NhbGVbMF0pO1xuICBzY2FsZVsxXSA9IE1hdGguZnJvdW5kKHNjYWxlWzFdKTtcbiAgY29uc3QgYWN0dWFsU2NhbGUgPSBNYXRoLmZyb3VuZChcbiAgICBPdXRwdXRTY2FsZS5waXhlbFJhdGlvICogUGl4ZWxzUGVySW5jaC5QREZfVE9fQ1NTX1VOSVRTXG4gICk7XG4gIHJldHVybiBzY2FsZVswXSA8PSBhY3R1YWxTY2FsZSAmJiBzY2FsZVsxXSA8PSBhY3R1YWxTY2FsZTtcbn1cblxuY29uc3QgTElORV9DQVBfU1RZTEVTID0gW1wiYnV0dFwiLCBcInJvdW5kXCIsIFwic3F1YXJlXCJdO1xuY29uc3QgTElORV9KT0lOX1NUWUxFUyA9IFtcIm1pdGVyXCIsIFwicm91bmRcIiwgXCJiZXZlbFwiXTtcbmNvbnN0IE5PUk1BTF9DTElQID0ge307XG5jb25zdCBFT19DTElQID0ge307XG5cbmNsYXNzIENhbnZhc0dyYXBoaWNzIHtcbiAgY29uc3RydWN0b3IoXG4gICAgY2FudmFzQ3R4LFxuICAgIGNvbW1vbk9ianMsXG4gICAgb2JqcyxcbiAgICBjYW52YXNGYWN0b3J5LFxuICAgIGZpbHRlckZhY3RvcnksXG4gICAgeyBvcHRpb25hbENvbnRlbnRDb25maWcsIG1hcmtlZENvbnRlbnRTdGFjayA9IG51bGwgfSxcbiAgICBhbm5vdGF0aW9uQ2FudmFzTWFwLFxuICAgIHBhZ2VDb2xvcnNcbiAgKSB7XG4gICAgdGhpcy5jdHggPSBjYW52YXNDdHg7XG4gICAgdGhpcy5jdXJyZW50ID0gbmV3IENhbnZhc0V4dHJhU3RhdGUoXG4gICAgICB0aGlzLmN0eC5jYW52YXMud2lkdGgsXG4gICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0XG4gICAgKTtcbiAgICB0aGlzLnN0YXRlU3RhY2sgPSBbXTtcbiAgICB0aGlzLnBlbmRpbmdDbGlwID0gbnVsbDtcbiAgICB0aGlzLnBlbmRpbmdFT0ZpbGwgPSBmYWxzZTtcbiAgICB0aGlzLnJlcyA9IG51bGw7XG4gICAgdGhpcy54b2JqcyA9IG51bGw7XG4gICAgdGhpcy5jb21tb25PYmpzID0gY29tbW9uT2JqcztcbiAgICB0aGlzLm9ianMgPSBvYmpzO1xuICAgIHRoaXMuY2FudmFzRmFjdG9yeSA9IGNhbnZhc0ZhY3Rvcnk7XG4gICAgdGhpcy5maWx0ZXJGYWN0b3J5ID0gZmlsdGVyRmFjdG9yeTtcbiAgICB0aGlzLmdyb3VwU3RhY2sgPSBbXTtcbiAgICB0aGlzLnByb2Nlc3NpbmdUeXBlMyA9IG51bGw7XG4gICAgLy8gUGF0dGVybnMgYXJlIHBhaW50ZWQgcmVsYXRpdmUgdG8gdGhlIGluaXRpYWwgcGFnZS9mb3JtIHRyYW5zZm9ybSwgc2VlXG4gICAgLy8gUERGIHNwZWMgOC43LjIgTk9URSAxLlxuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IG51bGw7XG4gICAgdGhpcy5iYXNlVHJhbnNmb3JtU3RhY2sgPSBbXTtcbiAgICB0aGlzLmdyb3VwTGV2ZWwgPSAwO1xuICAgIHRoaXMuc21hc2tTdGFjayA9IFtdO1xuICAgIHRoaXMuc21hc2tDb3VudGVyID0gMDtcbiAgICB0aGlzLnRlbXBTTWFzayA9IG51bGw7XG4gICAgdGhpcy5zdXNwZW5kZWRDdHggPSBudWxsO1xuICAgIHRoaXMuY29udGVudFZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMubWFya2VkQ29udGVudFN0YWNrID0gbWFya2VkQ29udGVudFN0YWNrIHx8IFtdO1xuICAgIHRoaXMub3B0aW9uYWxDb250ZW50Q29uZmlnID0gb3B0aW9uYWxDb250ZW50Q29uZmlnO1xuICAgIHRoaXMuY2FjaGVkQ2FudmFzZXMgPSBuZXcgQ2FjaGVkQ2FudmFzZXModGhpcy5jYW52YXNGYWN0b3J5KTtcbiAgICB0aGlzLmNhY2hlZFBhdHRlcm5zID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcCA9IGFubm90YXRpb25DYW52YXNNYXA7XG4gICAgdGhpcy52aWV3cG9ydFNjYWxlID0gMTtcbiAgICB0aGlzLm91dHB1dFNjYWxlWCA9IDE7XG4gICAgdGhpcy5vdXRwdXRTY2FsZVkgPSAxO1xuICAgIHRoaXMucGFnZUNvbG9ycyA9IHBhZ2VDb2xvcnM7XG5cbiAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nID0gWy0xLCAwXTtcbiAgICB0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRoID0gbnVsbDtcbiAgICB0aGlzLl9jYWNoZWRCaXRtYXBzTWFwID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgZ2V0T2JqZWN0KGRhdGEsIGZhbGxiYWNrID0gbnVsbCkge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIGRhdGEuc3RhcnRzV2l0aChcImdfXCIpXG4gICAgICAgID8gdGhpcy5jb21tb25PYmpzLmdldChkYXRhKVxuICAgICAgICA6IHRoaXMub2Jqcy5nZXQoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxsYmFjaztcbiAgfVxuXG4gIGJlZ2luRHJhd2luZyh7XG4gICAgdHJhbnNmb3JtLFxuICAgIHZpZXdwb3J0LFxuICAgIHRyYW5zcGFyZW5jeSA9IGZhbHNlLFxuICAgIGJhY2tncm91bmQgPSBudWxsLFxuICB9KSB7XG4gICAgLy8gRm9yIHBkZnMgdGhhdCB1c2UgYmxlbmQgbW9kZXMgd2UgaGF2ZSB0byBjbGVhciB0aGUgY2FudmFzIGVsc2UgY2VydGFpblxuICAgIC8vIGJsZW5kIG1vZGVzIGNhbiBsb29rIHdyb25nIHNpbmNlIHdlJ2QgYmUgYmxlbmRpbmcgd2l0aCBhIHdoaXRlXG4gICAgLy8gYmFja2Ryb3AuIFRoZSBwcm9ibGVtIHdpdGggYSB0cmFuc3BhcmVudCBiYWNrZHJvcCB0aG91Z2ggaXMgd2UgdGhlblxuICAgIC8vIGRvbid0IGdldCBzdWIgcGl4ZWwgYW50aSBhbGlhc2luZyBvbiB0ZXh0LCBjcmVhdGluZyB0ZW1wb3JhcnlcbiAgICAvLyB0cmFuc3BhcmVudCBjYW52YXMgd2hlbiB3ZSBoYXZlIGJsZW5kIG1vZGVzLlxuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5jdHguY2FudmFzLndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQ7XG5cbiAgICBjb25zdCBzYXZlZEZpbGxTdHlsZSA9IHRoaXMuY3R4LmZpbGxTdHlsZTtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBiYWNrZ3JvdW5kIHx8IFwiI2ZmZmZmZlwiO1xuICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHNhdmVkRmlsbFN0eWxlO1xuXG4gICAgaWYgKHRyYW5zcGFyZW5jeSkge1xuICAgICAgY29uc3QgdHJhbnNwYXJlbnRDYW52YXMgPSB0aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhcbiAgICAgICAgXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0XG4gICAgICApO1xuICAgICAgdGhpcy5jb21wb3NpdGVDdHggPSB0aGlzLmN0eDtcbiAgICAgIHRoaXMudHJhbnNwYXJlbnRDYW52YXMgPSB0cmFuc3BhcmVudENhbnZhcy5jYW52YXM7XG4gICAgICB0aGlzLmN0eCA9IHRyYW5zcGFyZW50Q2FudmFzLmNvbnRleHQ7XG4gICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgICAvLyBUaGUgdHJhbnNmb3JtIGNhbiBiZSBhcHBsaWVkIGJlZm9yZSByZW5kZXJpbmcsIHRyYW5zZmVycmluZyBpdCB0b1xuICAgICAgLy8gdGhlIG5ldyBjYW52YXMuXG4gICAgICB0aGlzLmN0eC50cmFuc2Zvcm0oLi4uZ2V0Q3VycmVudFRyYW5zZm9ybSh0aGlzLmNvbXBvc2l0ZUN0eCkpO1xuICAgIH1cblxuICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICByZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCk7XG4gICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgdGhpcy5jdHgudHJhbnNmb3JtKC4uLnRyYW5zZm9ybSk7XG4gICAgICB0aGlzLm91dHB1dFNjYWxlWCA9IHRyYW5zZm9ybVswXTtcbiAgICAgIHRoaXMub3V0cHV0U2NhbGVZID0gdHJhbnNmb3JtWzBdO1xuICAgIH1cbiAgICB0aGlzLmN0eC50cmFuc2Zvcm0oLi4udmlld3BvcnQudHJhbnNmb3JtKTtcbiAgICB0aGlzLnZpZXdwb3J0U2NhbGUgPSB2aWV3cG9ydC5zY2FsZTtcblxuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IGdldEN1cnJlbnRUcmFuc2Zvcm0odGhpcy5jdHgpO1xuICB9XG5cbiAgZXhlY3V0ZU9wZXJhdG9yTGlzdChcbiAgICBvcGVyYXRvckxpc3QsXG4gICAgZXhlY3V0aW9uU3RhcnRJZHgsXG4gICAgY29udGludWVDYWxsYmFjayxcbiAgICBzdGVwcGVyXG4gICkge1xuICAgIGNvbnN0IGFyZ3NBcnJheSA9IG9wZXJhdG9yTGlzdC5hcmdzQXJyYXk7XG4gICAgY29uc3QgZm5BcnJheSA9IG9wZXJhdG9yTGlzdC5mbkFycmF5O1xuICAgIGxldCBpID0gZXhlY3V0aW9uU3RhcnRJZHggfHwgMDtcbiAgICBjb25zdCBhcmdzQXJyYXlMZW4gPSBhcmdzQXJyYXkubGVuZ3RoO1xuXG4gICAgLy8gU29tZXRpbWVzIHRoZSBPcGVyYXRvckxpc3QgdG8gZXhlY3V0ZSBpcyBlbXB0eS5cbiAgICBpZiAoYXJnc0FycmF5TGVuID09PSBpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG5cbiAgICBjb25zdCBjaHVua09wZXJhdGlvbnMgPVxuICAgICAgYXJnc0FycmF5TGVuIC0gaSA+IEVYRUNVVElPTl9TVEVQUyAmJlxuICAgICAgdHlwZW9mIGNvbnRpbnVlQ2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIjtcbiAgICBjb25zdCBlbmRUaW1lID0gY2h1bmtPcGVyYXRpb25zID8gRGF0ZS5ub3coKSArIEVYRUNVVElPTl9USU1FIDogMDtcbiAgICBsZXQgc3RlcHMgPSAwO1xuXG4gICAgY29uc3QgY29tbW9uT2JqcyA9IHRoaXMuY29tbW9uT2JqcztcbiAgICBjb25zdCBvYmpzID0gdGhpcy5vYmpzO1xuICAgIGxldCBmbklkO1xuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGlmIChzdGVwcGVyICE9PSB1bmRlZmluZWQgJiYgaSA9PT0gc3RlcHBlci5uZXh0QnJlYWtQb2ludCkge1xuICAgICAgICBzdGVwcGVyLmJyZWFrSXQoaSwgY29udGludWVDYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuXG4gICAgICBmbklkID0gZm5BcnJheVtpXTtcblxuICAgICAgaWYgKGZuSWQgIT09IE9QUy5kZXBlbmRlbmN5KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItc3ByZWFkXG4gICAgICAgIHRoaXNbZm5JZF0uYXBwbHkodGhpcywgYXJnc0FycmF5W2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgZGVwT2JqSWQgb2YgYXJnc0FycmF5W2ldKSB7XG4gICAgICAgICAgY29uc3Qgb2Jqc1Bvb2wgPSBkZXBPYmpJZC5zdGFydHNXaXRoKFwiZ19cIikgPyBjb21tb25PYmpzIDogb2JqcztcblxuICAgICAgICAgIC8vIElmIHRoZSBwcm9taXNlIGlzbid0IHJlc29sdmVkIHlldCwgYWRkIHRoZSBjb250aW51ZUNhbGxiYWNrXG4gICAgICAgICAgLy8gdG8gdGhlIHByb21pc2UgYW5kIGJhaWwgb3V0LlxuICAgICAgICAgIGlmICghb2Jqc1Bvb2wuaGFzKGRlcE9iaklkKSkge1xuICAgICAgICAgICAgb2Jqc1Bvb2wuZ2V0KGRlcE9iaklkLCBjb250aW51ZUNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpKys7XG5cbiAgICAgIC8vIElmIHRoZSBlbnRpcmUgb3BlcmF0b3JMaXN0IHdhcyBleGVjdXRlZCwgc3RvcCBhcyB3ZXJlIGRvbmUuXG4gICAgICBpZiAoaSA9PT0gYXJnc0FycmF5TGVuKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgZXhlY3V0aW9uIHRvb2sgbG9uZ2VyIHRoZW4gYSBjZXJ0YWluIGFtb3VudCBvZiB0aW1lIGFuZFxuICAgICAgLy8gYGNvbnRpbnVlQ2FsbGJhY2tgIGlzIHNwZWNpZmllZCwgaW50ZXJydXB0IHRoZSBleGVjdXRpb24uXG4gICAgICBpZiAoY2h1bmtPcGVyYXRpb25zICYmICsrc3RlcHMgPiBFWEVDVVRJT05fU1RFUFMpIHtcbiAgICAgICAgaWYgKERhdGUubm93KCkgPiBlbmRUaW1lKSB7XG4gICAgICAgICAgY29udGludWVDYWxsYmFjaygpO1xuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHN0ZXBzID0gMDtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIG9wZXJhdG9yTGlzdCBpc24ndCBleGVjdXRlZCBjb21wbGV0ZWx5IHlldCBPUiB0aGUgZXhlY3V0aW9uXG4gICAgICAvLyB0aW1lIHdhcyBzaG9ydCBlbm91Z2gsIGRvIGFub3RoZXIgZXhlY3V0aW9uIHJvdW5kLlxuICAgIH1cbiAgfVxuXG4gICNyZXN0b3JlSW5pdGlhbFN0YXRlKCkge1xuICAgIC8vIEZpbmlzaGluZyBhbGwgb3BlbmVkIG9wZXJhdGlvbnMgc3VjaCBhcyBTTWFzayBncm91cCBwYWludGluZy5cbiAgICB3aGlsZSAodGhpcy5zdGF0ZVN0YWNrLmxlbmd0aCB8fCB0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2sgPSBudWxsO1xuICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcblxuICAgIGlmICh0aGlzLnRyYW5zcGFyZW50Q2FudmFzKSB7XG4gICAgICB0aGlzLmN0eCA9IHRoaXMuY29tcG9zaXRlQ3R4O1xuICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgdGhpcy5jdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApOyAvLyBBdm9pZCBhcHBseSB0cmFuc2Zvcm0gdHdpY2VcbiAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZSh0aGlzLnRyYW5zcGFyZW50Q2FudmFzLCAwLCAwKTtcbiAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgIHRoaXMudHJhbnNwYXJlbnRDYW52YXMgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGVuZERyYXdpbmcoKSB7XG4gICAgdGhpcy4jcmVzdG9yZUluaXRpYWxTdGF0ZSgpO1xuXG4gICAgdGhpcy5jYWNoZWRDYW52YXNlcy5jbGVhcigpO1xuICAgIHRoaXMuY2FjaGVkUGF0dGVybnMuY2xlYXIoKTtcblxuICAgIGZvciAoY29uc3QgY2FjaGUgb2YgdGhpcy5fY2FjaGVkQml0bWFwc01hcC52YWx1ZXMoKSkge1xuICAgICAgZm9yIChjb25zdCBjYW52YXMgb2YgY2FjaGUudmFsdWVzKCkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgIGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50XG4gICAgICAgICkge1xuICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYWNoZS5jbGVhcigpO1xuICAgIH1cbiAgICB0aGlzLl9jYWNoZWRCaXRtYXBzTWFwLmNsZWFyKCk7XG4gICAgdGhpcy4jZHJhd0ZpbHRlcigpO1xuICB9XG5cbiAgI2RyYXdGaWx0ZXIoKSB7XG4gICAgaWYgKHRoaXMucGFnZUNvbG9ycykge1xuICAgICAgY29uc3QgaGNtRmlsdGVySWQgPSB0aGlzLmZpbHRlckZhY3RvcnkuYWRkSENNRmlsdGVyKFxuICAgICAgICB0aGlzLnBhZ2VDb2xvcnMuZm9yZWdyb3VuZCxcbiAgICAgICAgdGhpcy5wYWdlQ29sb3JzLmJhY2tncm91bmRcbiAgICAgICk7XG4gICAgICBpZiAoaGNtRmlsdGVySWQgIT09IFwibm9uZVwiKSB7XG4gICAgICAgIGNvbnN0IHNhdmVkRmlsdGVyID0gdGhpcy5jdHguZmlsdGVyO1xuICAgICAgICB0aGlzLmN0eC5maWx0ZXIgPSBoY21GaWx0ZXJJZDtcbiAgICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMuY3R4LmNhbnZhcywgMCwgMCk7XG4gICAgICAgIHRoaXMuY3R4LmZpbHRlciA9IHNhdmVkRmlsdGVyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9zY2FsZUltYWdlKGltZywgaW52ZXJzZVRyYW5zZm9ybSkge1xuICAgIC8vIFZlcnRpY2FsIG9yIGhvcml6b250YWwgc2NhbGluZyBzaGFsbCBub3QgYmUgbW9yZSB0aGFuIDIgdG8gbm90IGxvc2UgdGhlXG4gICAgLy8gcGl4ZWxzIGR1cmluZyBkcmF3SW1hZ2Ugb3BlcmF0aW9uLCBwYWludGluZyBvbiB0aGUgdGVtcG9yYXJ5IGNhbnZhcyhlcylcbiAgICAvLyB0aGF0IGFyZSB0d2ljZSBzbWFsbGVyIGluIHNpemUuXG5cbiAgICAvLyBkaXNwbGF5V2lkdGggYW5kIGRpc3BsYXlIZWlnaHQgYXJlIHVzZWQgZm9yIFZpZGVvRnJhbWUuXG4gICAgY29uc3Qgd2lkdGggPSBpbWcud2lkdGggPz8gaW1nLmRpc3BsYXlXaWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBpbWcuaGVpZ2h0ID8/IGltZy5kaXNwbGF5SGVpZ2h0O1xuICAgIGxldCB3aWR0aFNjYWxlID0gTWF0aC5tYXgoXG4gICAgICBNYXRoLmh5cG90KGludmVyc2VUcmFuc2Zvcm1bMF0sIGludmVyc2VUcmFuc2Zvcm1bMV0pLFxuICAgICAgMVxuICAgICk7XG4gICAgbGV0IGhlaWdodFNjYWxlID0gTWF0aC5tYXgoXG4gICAgICBNYXRoLmh5cG90KGludmVyc2VUcmFuc2Zvcm1bMl0sIGludmVyc2VUcmFuc2Zvcm1bM10pLFxuICAgICAgMVxuICAgICk7XG5cbiAgICBsZXQgcGFpbnRXaWR0aCA9IHdpZHRoLFxuICAgICAgcGFpbnRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgbGV0IHRtcENhbnZhc0lkID0gXCJwcmVzY2FsZTFcIjtcbiAgICBsZXQgdG1wQ2FudmFzLCB0bXBDdHg7XG4gICAgd2hpbGUgKFxuICAgICAgKHdpZHRoU2NhbGUgPiAyICYmIHBhaW50V2lkdGggPiAxKSB8fFxuICAgICAgKGhlaWdodFNjYWxlID4gMiAmJiBwYWludEhlaWdodCA+IDEpXG4gICAgKSB7XG4gICAgICBsZXQgbmV3V2lkdGggPSBwYWludFdpZHRoLFxuICAgICAgICBuZXdIZWlnaHQgPSBwYWludEhlaWdodDtcbiAgICAgIGlmICh3aWR0aFNjYWxlID4gMiAmJiBwYWludFdpZHRoID4gMSkge1xuICAgICAgICAvLyBTZWUgYnVnIDE4MjA1MTEgKFdpbmRvd3Mgc3BlY2lmaWMgYnVnKS5cbiAgICAgICAgLy8gVE9ETzogb25jZSB0aGUgYWJvdmUgYnVnIGlzIGZpeGVkIHdlIGNvdWxkIHJldmVydCB0bzpcbiAgICAgICAgLy8gbmV3V2lkdGggPSBNYXRoLmNlaWwocGFpbnRXaWR0aCAvIDIpO1xuICAgICAgICBuZXdXaWR0aCA9XG4gICAgICAgICAgcGFpbnRXaWR0aCA+PSAxNjM4NFxuICAgICAgICAgICAgPyBNYXRoLmZsb29yKHBhaW50V2lkdGggLyAyKSAtIDEgfHwgMVxuICAgICAgICAgICAgOiBNYXRoLmNlaWwocGFpbnRXaWR0aCAvIDIpO1xuICAgICAgICB3aWR0aFNjYWxlIC89IHBhaW50V2lkdGggLyBuZXdXaWR0aDtcbiAgICAgIH1cbiAgICAgIGlmIChoZWlnaHRTY2FsZSA+IDIgJiYgcGFpbnRIZWlnaHQgPiAxKSB7XG4gICAgICAgIC8vIFRPRE86IHNlZSB0aGUgY29tbWVudCBhYm92ZS5cbiAgICAgICAgbmV3SGVpZ2h0ID1cbiAgICAgICAgICBwYWludEhlaWdodCA+PSAxNjM4NFxuICAgICAgICAgICAgPyBNYXRoLmZsb29yKHBhaW50SGVpZ2h0IC8gMikgLSAxIHx8IDFcbiAgICAgICAgICAgIDogTWF0aC5jZWlsKHBhaW50SGVpZ2h0KSAvIDI7XG4gICAgICAgIGhlaWdodFNjYWxlIC89IHBhaW50SGVpZ2h0IC8gbmV3SGVpZ2h0O1xuICAgICAgfVxuICAgICAgdG1wQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICAgIHRtcENhbnZhc0lkLFxuICAgICAgICBuZXdXaWR0aCxcbiAgICAgICAgbmV3SGVpZ2h0XG4gICAgICApO1xuICAgICAgdG1wQ3R4ID0gdG1wQ2FudmFzLmNvbnRleHQ7XG4gICAgICB0bXBDdHguY2xlYXJSZWN0KDAsIDAsIG5ld1dpZHRoLCBuZXdIZWlnaHQpO1xuICAgICAgdG1wQ3R4LmRyYXdJbWFnZShcbiAgICAgICAgaW1nLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICBwYWludFdpZHRoLFxuICAgICAgICBwYWludEhlaWdodCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgbmV3V2lkdGgsXG4gICAgICAgIG5ld0hlaWdodFxuICAgICAgKTtcbiAgICAgIGltZyA9IHRtcENhbnZhcy5jYW52YXM7XG4gICAgICBwYWludFdpZHRoID0gbmV3V2lkdGg7XG4gICAgICBwYWludEhlaWdodCA9IG5ld0hlaWdodDtcbiAgICAgIHRtcENhbnZhc0lkID0gdG1wQ2FudmFzSWQgPT09IFwicHJlc2NhbGUxXCIgPyBcInByZXNjYWxlMlwiIDogXCJwcmVzY2FsZTFcIjtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGltZyxcbiAgICAgIHBhaW50V2lkdGgsXG4gICAgICBwYWludEhlaWdodCxcbiAgICB9O1xuICB9XG5cbiAgX2NyZWF0ZU1hc2tDYW52YXMoaW1nKSB7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBpbWc7XG4gICAgY29uc3QgZmlsbENvbG9yID0gdGhpcy5jdXJyZW50LmZpbGxDb2xvcjtcbiAgICBjb25zdCBpc1BhdHRlcm5GaWxsID0gdGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsO1xuICAgIGNvbnN0IGN1cnJlbnRUcmFuc2Zvcm0gPSBnZXRDdXJyZW50VHJhbnNmb3JtKGN0eCk7XG5cbiAgICBsZXQgY2FjaGUsIGNhY2hlS2V5LCBzY2FsZWQsIG1hc2tDYW52YXM7XG4gICAgaWYgKChpbWcuYml0bWFwIHx8IGltZy5kYXRhKSAmJiBpbWcuY291bnQgPiAxKSB7XG4gICAgICBjb25zdCBtYWluS2V5ID0gaW1nLmJpdG1hcCB8fCBpbWcuZGF0YS5idWZmZXI7XG4gICAgICAvLyBXZSdyZSByZXVzaW5nIHRoZSBzYW1lIGltYWdlIHNldmVyYWwgdGltZXMsIHNvIHdlIGNhbiBjYWNoZSBpdC5cbiAgICAgIC8vIEluIGNhc2Ugd2UndmUgYSBwYXR0ZXJuIGZpbGwgd2UganVzdCBrZWVwIHRoZSBzY2FsZWQgdmVyc2lvbiBvZlxuICAgICAgLy8gdGhlIGltYWdlLlxuICAgICAgLy8gT25seSB0aGUgc2NhbGluZyBwYXJ0IG1hdHRlcnMsIHRoZSB0cmFuc2xhdGlvbiBwYXJ0IGlzIGp1c3QgdXNlZFxuICAgICAgLy8gdG8gY29tcHV0ZSBvZmZzZXRzIChidXQgbm90IHdoZW4gZmlsbGluZyBwYXR0ZXJucyBzZWUgIzE1NTczKS5cbiAgICAgIC8vIFRPRE86IGhhbmRsZSB0aGUgY2FzZSBvZiBhIHBhdHRlcm4gZmlsbCBpZiBpdCdzIHBvc3NpYmxlLlxuICAgICAgY2FjaGVLZXkgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgaXNQYXR0ZXJuRmlsbFxuICAgICAgICAgID8gY3VycmVudFRyYW5zZm9ybVxuICAgICAgICAgIDogW2N1cnJlbnRUcmFuc2Zvcm0uc2xpY2UoMCwgNCksIGZpbGxDb2xvcl1cbiAgICAgICk7XG5cbiAgICAgIGNhY2hlID0gdGhpcy5fY2FjaGVkQml0bWFwc01hcC5nZXQobWFpbktleSk7XG4gICAgICBpZiAoIWNhY2hlKSB7XG4gICAgICAgIGNhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9jYWNoZWRCaXRtYXBzTWFwLnNldChtYWluS2V5LCBjYWNoZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjYWNoZWRJbWFnZSA9IGNhY2hlLmdldChjYWNoZUtleSk7XG4gICAgICBpZiAoY2FjaGVkSW1hZ2UgJiYgIWlzUGF0dGVybkZpbGwpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IE1hdGgucm91bmQoXG4gICAgICAgICAgTWF0aC5taW4oY3VycmVudFRyYW5zZm9ybVswXSwgY3VycmVudFRyYW5zZm9ybVsyXSkgK1xuICAgICAgICAgICAgY3VycmVudFRyYW5zZm9ybVs0XVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBvZmZzZXRZID0gTWF0aC5yb3VuZChcbiAgICAgICAgICBNYXRoLm1pbihjdXJyZW50VHJhbnNmb3JtWzFdLCBjdXJyZW50VHJhbnNmb3JtWzNdKSArXG4gICAgICAgICAgICBjdXJyZW50VHJhbnNmb3JtWzVdXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2FudmFzOiBjYWNoZWRJbWFnZSxcbiAgICAgICAgICBvZmZzZXRYLFxuICAgICAgICAgIG9mZnNldFksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBzY2FsZWQgPSBjYWNoZWRJbWFnZTtcbiAgICB9XG5cbiAgICBpZiAoIXNjYWxlZCkge1xuICAgICAgbWFza0NhbnZhcyA9IHRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFwibWFza0NhbnZhc1wiLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIHB1dEJpbmFyeUltYWdlTWFzayhtYXNrQ2FudmFzLmNvbnRleHQsIGltZyk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBtYXNrIGNhbnZhcyBhdCB0aGUgc2l6ZSBpdCB3aWxsIGJlIGRyYXduIGF0IGFuZCBhbHNvIHNldFxuICAgIC8vIGl0cyB0cmFuc2Zvcm0gdG8gbWF0Y2ggdGhlIGN1cnJlbnQgdHJhbnNmb3JtIHNvIGlmIHRoZXJlIGFyZSBhbnlcbiAgICAvLyBwYXR0ZXJucyBhcHBsaWVkIHRoZXkgd2lsbCBiZSBhcHBsaWVkIHJlbGF0aXZlIHRvIHRoZSBjb3JyZWN0XG4gICAgLy8gdHJhbnNmb3JtLlxuXG4gICAgbGV0IG1hc2tUb0NhbnZhcyA9IFV0aWwudHJhbnNmb3JtKGN1cnJlbnRUcmFuc2Zvcm0sIFtcbiAgICAgIDEgLyB3aWR0aCxcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgLTEgLyBoZWlnaHQsXG4gICAgICAwLFxuICAgICAgMCxcbiAgICBdKTtcbiAgICBtYXNrVG9DYW52YXMgPSBVdGlsLnRyYW5zZm9ybShtYXNrVG9DYW52YXMsIFsxLCAwLCAwLCAxLCAwLCAtaGVpZ2h0XSk7XG4gICAgY29uc3QgW21pblgsIG1pblksIG1heFgsIG1heFldID0gVXRpbC5nZXRBeGlhbEFsaWduZWRCb3VuZGluZ0JveChcbiAgICAgIFswLCAwLCB3aWR0aCwgaGVpZ2h0XSxcbiAgICAgIG1hc2tUb0NhbnZhc1xuICAgICk7XG4gICAgY29uc3QgZHJhd25XaWR0aCA9IE1hdGgucm91bmQobWF4WCAtIG1pblgpIHx8IDE7XG4gICAgY29uc3QgZHJhd25IZWlnaHQgPSBNYXRoLnJvdW5kKG1heFkgLSBtaW5ZKSB8fCAxO1xuICAgIGNvbnN0IGZpbGxDYW52YXMgPSB0aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhcbiAgICAgIFwiZmlsbENhbnZhc1wiLFxuICAgICAgZHJhd25XaWR0aCxcbiAgICAgIGRyYXduSGVpZ2h0XG4gICAgKTtcbiAgICBjb25zdCBmaWxsQ3R4ID0gZmlsbENhbnZhcy5jb250ZXh0O1xuXG4gICAgLy8gVGhlIG9mZnNldCB3aWxsIGJlIHRoZSB0b3AtbGVmdCBjb3JkaW5hdGUgbWFzay5cbiAgICAvLyBJZiBvYmpUb0NhbnZhcyBpcyBbYSxiLGMsZCxlLGZdIHRoZW46XG4gICAgLy8gICAtIG9mZnNldFggPSBtaW4oYSwgYykgKyBlXG4gICAgLy8gICAtIG9mZnNldFkgPSBtaW4oYiwgZCkgKyBmXG4gICAgY29uc3Qgb2Zmc2V0WCA9IG1pblg7XG4gICAgY29uc3Qgb2Zmc2V0WSA9IG1pblk7XG4gICAgZmlsbEN0eC50cmFuc2xhdGUoLW9mZnNldFgsIC1vZmZzZXRZKTtcbiAgICBmaWxsQ3R4LnRyYW5zZm9ybSguLi5tYXNrVG9DYW52YXMpO1xuXG4gICAgaWYgKCFzY2FsZWQpIHtcbiAgICAgIC8vIFByZS1zY2FsZSBpZiBuZWVkZWQgdG8gaW1wcm92ZSBpbWFnZSBzbW9vdGhpbmcuXG4gICAgICBzY2FsZWQgPSB0aGlzLl9zY2FsZUltYWdlKFxuICAgICAgICBtYXNrQ2FudmFzLmNhbnZhcyxcbiAgICAgICAgZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UoZmlsbEN0eClcbiAgICAgICk7XG4gICAgICBzY2FsZWQgPSBzY2FsZWQuaW1nO1xuICAgICAgaWYgKGNhY2hlICYmIGlzUGF0dGVybkZpbGwpIHtcbiAgICAgICAgY2FjaGUuc2V0KGNhY2hlS2V5LCBzY2FsZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZpbGxDdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZ2V0SW1hZ2VTbW9vdGhpbmdFbmFibGVkKFxuICAgICAgZ2V0Q3VycmVudFRyYW5zZm9ybShmaWxsQ3R4KSxcbiAgICAgIGltZy5pbnRlcnBvbGF0ZVxuICAgICk7XG5cbiAgICBkcmF3SW1hZ2VBdEludGVnZXJDb29yZHMoXG4gICAgICBmaWxsQ3R4LFxuICAgICAgc2NhbGVkLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICBzY2FsZWQud2lkdGgsXG4gICAgICBzY2FsZWQuaGVpZ2h0LFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgICk7XG4gICAgZmlsbEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1pblwiO1xuXG4gICAgY29uc3QgaW52ZXJzZSA9IFV0aWwudHJhbnNmb3JtKGdldEN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKGZpbGxDdHgpLCBbXG4gICAgICAxLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICAxLFxuICAgICAgLW9mZnNldFgsXG4gICAgICAtb2Zmc2V0WSxcbiAgICBdKTtcbiAgICBmaWxsQ3R4LmZpbGxTdHlsZSA9IGlzUGF0dGVybkZpbGxcbiAgICAgID8gZmlsbENvbG9yLmdldFBhdHRlcm4oY3R4LCB0aGlzLCBpbnZlcnNlLCBQYXRoVHlwZS5GSUxMKVxuICAgICAgOiBmaWxsQ29sb3I7XG5cbiAgICBmaWxsQ3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgaWYgKGNhY2hlICYmICFpc1BhdHRlcm5GaWxsKSB7XG4gICAgICAvLyBUaGUgZmlsbCBjYW52YXMgaXMgcHV0IGluIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHRvIHRoZSBtYXNrIGltYWdlXG4gICAgICAvLyBzbyB3ZSBtdXN0IHJlbW92ZSBmcm9tIHRoZSBjYWNoZWQgY2FudmFzOiBpdCBtdXN0bid0IGJlIHVzZWQgYWdhaW4uXG4gICAgICB0aGlzLmNhY2hlZENhbnZhc2VzLmRlbGV0ZShcImZpbGxDYW52YXNcIik7XG4gICAgICBjYWNoZS5zZXQoY2FjaGVLZXksIGZpbGxDYW52YXMuY2FudmFzKTtcbiAgICB9XG5cbiAgICAvLyBSb3VuZCB0aGUgb2Zmc2V0cyB0byBhdm9pZCBkcmF3aW5nIGZyYWN0aW9uYWwgcGl4ZWxzLlxuICAgIHJldHVybiB7XG4gICAgICBjYW52YXM6IGZpbGxDYW52YXMuY2FudmFzLFxuICAgICAgb2Zmc2V0WDogTWF0aC5yb3VuZChvZmZzZXRYKSxcbiAgICAgIG9mZnNldFk6IE1hdGgucm91bmQob2Zmc2V0WSksXG4gICAgfTtcbiAgfVxuXG4gIC8vIEdyYXBoaWNzIHN0YXRlXG4gIHNldExpbmVXaWR0aCh3aWR0aCkge1xuICAgIGlmICh3aWR0aCAhPT0gdGhpcy5jdXJyZW50LmxpbmVXaWR0aCkge1xuICAgICAgdGhpcy5fY2FjaGVkU2NhbGVGb3JTdHJva2luZ1swXSA9IC0xO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQubGluZVdpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5jdHgubGluZVdpZHRoID0gd2lkdGg7XG4gIH1cblxuICBzZXRMaW5lQ2FwKHN0eWxlKSB7XG4gICAgdGhpcy5jdHgubGluZUNhcCA9IExJTkVfQ0FQX1NUWUxFU1tzdHlsZV07XG4gIH1cblxuICBzZXRMaW5lSm9pbihzdHlsZSkge1xuICAgIHRoaXMuY3R4LmxpbmVKb2luID0gTElORV9KT0lOX1NUWUxFU1tzdHlsZV07XG4gIH1cblxuICBzZXRNaXRlckxpbWl0KGxpbWl0KSB7XG4gICAgdGhpcy5jdHgubWl0ZXJMaW1pdCA9IGxpbWl0O1xuICB9XG5cbiAgc2V0RGFzaChkYXNoQXJyYXksIGRhc2hQaGFzZSkge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGlmIChjdHguc2V0TGluZURhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgY3R4LnNldExpbmVEYXNoKGRhc2hBcnJheSk7XG4gICAgICBjdHgubGluZURhc2hPZmZzZXQgPSBkYXNoUGhhc2U7XG4gICAgfVxuICB9XG5cbiAgc2V0UmVuZGVyaW5nSW50ZW50KGludGVudCkge1xuICAgIC8vIFRoaXMgb3BlcmF0aW9uIGlzIGlnbm9yZWQgc2luY2Ugd2UgaGF2ZW4ndCBmb3VuZCBhIHVzZSBjYXNlIGZvciBpdCB5ZXQuXG4gIH1cblxuICBzZXRGbGF0bmVzcyhmbGF0bmVzcykge1xuICAgIC8vIFRoaXMgb3BlcmF0aW9uIGlzIGlnbm9yZWQgc2luY2Ugd2UgaGF2ZW4ndCBmb3VuZCBhIHVzZSBjYXNlIGZvciBpdCB5ZXQuXG4gIH1cblxuICBzZXRHU3RhdGUoc3RhdGVzKSB7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Ygc3RhdGVzKSB7XG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlIFwiTFdcIjpcbiAgICAgICAgICB0aGlzLnNldExpbmVXaWR0aCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJMQ1wiOlxuICAgICAgICAgIHRoaXMuc2V0TGluZUNhcCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJMSlwiOlxuICAgICAgICAgIHRoaXMuc2V0TGluZUpvaW4odmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiTUxcIjpcbiAgICAgICAgICB0aGlzLnNldE1pdGVyTGltaXQodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRFwiOlxuICAgICAgICAgIHRoaXMuc2V0RGFzaCh2YWx1ZVswXSwgdmFsdWVbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiUklcIjpcbiAgICAgICAgICB0aGlzLnNldFJlbmRlcmluZ0ludGVudCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJGTFwiOlxuICAgICAgICAgIHRoaXMuc2V0RmxhdG5lc3ModmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRm9udFwiOlxuICAgICAgICAgIHRoaXMuc2V0Rm9udCh2YWx1ZVswXSwgdmFsdWVbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQ0FcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnQuc3Ryb2tlQWxwaGEgPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNhXCI6XG4gICAgICAgICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSB0aGlzLmN1cnJlbnQuZmlsbEFscGhhID0gdmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJCTVwiOlxuICAgICAgICAgIHRoaXMuY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU01hc2tcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2sgPSB2YWx1ZSA/IHRoaXMudGVtcFNNYXNrIDogbnVsbDtcbiAgICAgICAgICB0aGlzLnRlbXBTTWFzayA9IG51bGw7XG4gICAgICAgICAgdGhpcy5jaGVja1NNYXNrU3RhdGUoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlRSXCI6XG4gICAgICAgICAgdGhpcy5jdHguZmlsdGVyID0gdGhpcy5jdXJyZW50LnRyYW5zZmVyTWFwcyA9XG4gICAgICAgICAgICB0aGlzLmZpbHRlckZhY3RvcnkuYWRkRmlsdGVyKHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgaW5TTWFza01vZGUoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5zdXNwZW5kZWRDdHg7XG4gIH1cblxuICBjaGVja1NNYXNrU3RhdGUoKSB7XG4gICAgY29uc3QgaW5TTWFza01vZGUgPSB0aGlzLmluU01hc2tNb2RlO1xuICAgIGlmICh0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2sgJiYgIWluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLmJlZ2luU01hc2tNb2RlKCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jdXJyZW50LmFjdGl2ZVNNYXNrICYmIGluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLmVuZFNNYXNrTW9kZSgpO1xuICAgIH1cbiAgICAvLyBFbHNlLCB0aGUgc3RhdGUgaXMgb2theSBhbmQgbm90aGluZyBuZWVkcyB0byBiZSBkb25lLlxuICB9XG5cbiAgLyoqXG4gICAqIFNvZnQgbWFzayBtb2RlIHRha2VzIHRoZSBjdXJyZW50IG1haW4gZHJhd2luZyBjYW52YXMgYW5kIHJlcGxhY2VzIGl0IHdpdGhcbiAgICogYSB0ZW1wb3JhcnkgY2FudmFzLiBBbnkgZHJhd2luZyBvcGVyYXRpb25zIHRoYXQgaGFwcGVuIG9uIHRoZSB0ZW1wb3JhcnlcbiAgICogY2FudmFzIG5lZWQgdG8gYmUgY29tcG9zZWQgd2l0aCB0aGUgbWFpbiBjYW52YXMgdGhhdCB3YXMgc3VzcGVuZGVkIChzZWVcbiAgICogYGNvbXBvc2UoKWApLiBUaGUgdGVtcG9yYXJ5IGNhbnZhcyBhbHNvIGR1cGxpY2F0ZXMgbWFueSBvZiBpdHMgb3BlcmF0aW9uc1xuICAgKiBvbiB0aGUgc3VzcGVuZGVkIGNhbnZhcyB0byBrZWVwIHRoZW0gaW4gc3luYywgc28gdGhhdCB3aGVuIHRoZSBzb2Z0IG1hc2tcbiAgICogbW9kZSBlbmRzIGFueSBjbGlwcGluZyBwYXRocyBvciB0cmFuc2Zvcm1hdGlvbnMgd2lsbCBzdGlsbCBiZSBhY3RpdmUgYW5kIGluXG4gICAqIHRoZSByaWdodCBvcmRlciBvbiB0aGUgY2FudmFzJyBncmFwaGljcyBzdGF0ZSBzdGFjay5cbiAgICovXG4gIGJlZ2luU01hc2tNb2RlKCkge1xuICAgIGlmICh0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJiZWdpblNNYXNrTW9kZSBjYWxsZWQgd2hpbGUgYWxyZWFkeSBpbiBzbWFzayBtb2RlXCIpO1xuICAgIH1cbiAgICBjb25zdCBkcmF3bldpZHRoID0gdGhpcy5jdHguY2FudmFzLndpZHRoO1xuICAgIGNvbnN0IGRyYXduSGVpZ2h0ID0gdGhpcy5jdHguY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCBjYWNoZUlkID0gXCJzbWFza0dyb3VwQXRcIiArIHRoaXMuZ3JvdXBMZXZlbDtcbiAgICBjb25zdCBzY3JhdGNoQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBjYWNoZUlkLFxuICAgICAgZHJhd25XaWR0aCxcbiAgICAgIGRyYXduSGVpZ2h0XG4gICAgKTtcbiAgICB0aGlzLnN1c3BlbmRlZEN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGN0eCA9ICh0aGlzLmN0eCA9IHNjcmF0Y2hDYW52YXMuY29udGV4dCk7XG4gICAgY3R4LnNldFRyYW5zZm9ybSh0aGlzLnN1c3BlbmRlZEN0eC5nZXRUcmFuc2Zvcm0oKSk7XG4gICAgY29weUN0eFN0YXRlKHRoaXMuc3VzcGVuZGVkQ3R4LCBjdHgpO1xuICAgIG1pcnJvckNvbnRleHRPcGVyYXRpb25zKGN0eCwgdGhpcy5zdXNwZW5kZWRDdHgpO1xuXG4gICAgdGhpcy5zZXRHU3RhdGUoW1tcIkJNXCIsIFwic291cmNlLW92ZXJcIl1dKTtcbiAgfVxuXG4gIGVuZFNNYXNrTW9kZSgpIHtcbiAgICBpZiAoIXRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImVuZFNNYXNrTW9kZSBjYWxsZWQgd2hpbGUgbm90IGluIHNtYXNrIG1vZGVcIik7XG4gICAgfVxuICAgIC8vIFRoZSBzb2Z0IG1hc2sgaXMgZG9uZSwgbm93IHJlc3RvcmUgdGhlIHN1c3BlbmRlZCBjYW52YXMgYXMgdGhlIG1haW5cbiAgICAvLyBkcmF3aW5nIGNhbnZhcy5cbiAgICB0aGlzLmN0eC5fcmVtb3ZlTWlycm9yaW5nKCk7XG4gICAgY29weUN0eFN0YXRlKHRoaXMuY3R4LCB0aGlzLnN1c3BlbmRlZEN0eCk7XG4gICAgdGhpcy5jdHggPSB0aGlzLnN1c3BlbmRlZEN0eDtcblxuICAgIHRoaXMuc3VzcGVuZGVkQ3R4ID0gbnVsbDtcbiAgfVxuXG4gIGNvbXBvc2UoZGlydHlCb3gpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudC5hY3RpdmVTTWFzaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghZGlydHlCb3gpIHtcbiAgICAgIGRpcnR5Qm94ID0gWzAsIDAsIHRoaXMuY3R4LmNhbnZhcy53aWR0aCwgdGhpcy5jdHguY2FudmFzLmhlaWdodF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpcnR5Qm94WzBdID0gTWF0aC5mbG9vcihkaXJ0eUJveFswXSk7XG4gICAgICBkaXJ0eUJveFsxXSA9IE1hdGguZmxvb3IoZGlydHlCb3hbMV0pO1xuICAgICAgZGlydHlCb3hbMl0gPSBNYXRoLmNlaWwoZGlydHlCb3hbMl0pO1xuICAgICAgZGlydHlCb3hbM10gPSBNYXRoLmNlaWwoZGlydHlCb3hbM10pO1xuICAgIH1cbiAgICBjb25zdCBzbWFzayA9IHRoaXMuY3VycmVudC5hY3RpdmVTTWFzaztcbiAgICBjb25zdCBzdXNwZW5kZWRDdHggPSB0aGlzLnN1c3BlbmRlZEN0eDtcblxuICAgIHRoaXMuY29tcG9zZVNNYXNrKHN1c3BlbmRlZEN0eCwgc21hc2ssIHRoaXMuY3R4LCBkaXJ0eUJveCk7XG4gICAgLy8gV2hhdGV2ZXIgd2FzIGRyYXduIGhhcyBiZWVuIG1vdmVkIHRvIHRoZSBzdXNwZW5kZWQgY2FudmFzLCBub3cgY2xlYXIgaXRcbiAgICAvLyBvdXQgb2YgdGhlIGN1cnJlbnQgY2FudmFzLlxuICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICB0aGlzLmN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY3R4LmNhbnZhcy53aWR0aCwgdGhpcy5jdHguY2FudmFzLmhlaWdodCk7XG4gICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgY29tcG9zZVNNYXNrKGN0eCwgc21hc2ssIGxheWVyQ3R4LCBsYXllckJveCkge1xuICAgIGNvbnN0IGxheWVyT2Zmc2V0WCA9IGxheWVyQm94WzBdO1xuICAgIGNvbnN0IGxheWVyT2Zmc2V0WSA9IGxheWVyQm94WzFdO1xuICAgIGNvbnN0IGxheWVyV2lkdGggPSBsYXllckJveFsyXSAtIGxheWVyT2Zmc2V0WDtcbiAgICBjb25zdCBsYXllckhlaWdodCA9IGxheWVyQm94WzNdIC0gbGF5ZXJPZmZzZXRZO1xuICAgIGlmIChsYXllcldpZHRoID09PSAwIHx8IGxheWVySGVpZ2h0ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZ2VuZXJpY0NvbXBvc2VTTWFzayhcbiAgICAgIHNtYXNrLmNvbnRleHQsXG4gICAgICBsYXllckN0eCxcbiAgICAgIGxheWVyV2lkdGgsXG4gICAgICBsYXllckhlaWdodCxcbiAgICAgIHNtYXNrLnN1YnR5cGUsXG4gICAgICBzbWFzay5iYWNrZHJvcCxcbiAgICAgIHNtYXNrLnRyYW5zZmVyTWFwLFxuICAgICAgbGF5ZXJPZmZzZXRYLFxuICAgICAgbGF5ZXJPZmZzZXRZLFxuICAgICAgc21hc2sub2Zmc2V0WCxcbiAgICAgIHNtYXNrLm9mZnNldFlcbiAgICApO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcbiAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xuICAgIGN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgY3R4LmRyYXdJbWFnZShsYXllckN0eC5jYW52YXMsIDAsIDApO1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBnZW5lcmljQ29tcG9zZVNNYXNrKFxuICAgIG1hc2tDdHgsXG4gICAgbGF5ZXJDdHgsXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIHN1YnR5cGUsXG4gICAgYmFja2Ryb3AsXG4gICAgdHJhbnNmZXJNYXAsXG4gICAgbGF5ZXJPZmZzZXRYLFxuICAgIGxheWVyT2Zmc2V0WSxcbiAgICBtYXNrT2Zmc2V0WCxcbiAgICBtYXNrT2Zmc2V0WVxuICApIHtcbiAgICBsZXQgbWFza0NhbnZhcyA9IG1hc2tDdHguY2FudmFzO1xuICAgIGxldCBtYXNrWCA9IGxheWVyT2Zmc2V0WCAtIG1hc2tPZmZzZXRYO1xuICAgIGxldCBtYXNrWSA9IGxheWVyT2Zmc2V0WSAtIG1hc2tPZmZzZXRZO1xuXG4gICAgaWYgKGJhY2tkcm9wKSB7XG4gICAgICBjb25zdCBiYWNrZHJvcFJHQiA9IFV0aWwubWFrZUhleENvbG9yKC4uLmJhY2tkcm9wKTtcbiAgICAgIGlmIChcbiAgICAgICAgbWFza1ggPCAwIHx8XG4gICAgICAgIG1hc2tZIDwgMCB8fFxuICAgICAgICBtYXNrWCArIHdpZHRoID4gbWFza0NhbnZhcy53aWR0aCB8fFxuICAgICAgICBtYXNrWSArIGhlaWdodCA+IG1hc2tDYW52YXMuaGVpZ2h0XG4gICAgICApIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICAgICAgXCJtYXNrRXh0ZW5zaW9uXCIsXG4gICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5jb250ZXh0O1xuICAgICAgICBjdHguZHJhd0ltYWdlKG1hc2tDYW52YXMsIC1tYXNrWCwgLW1hc2tZKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tYXRvcFwiO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gYmFja2Ryb3BSR0I7XG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcblxuICAgICAgICBtYXNrQ2FudmFzID0gY2FudmFzLmNhbnZhcztcbiAgICAgICAgbWFza1ggPSBtYXNrWSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXNrQ3R4LnNhdmUoKTtcbiAgICAgICAgbWFza0N0eC5nbG9iYWxBbHBoYSA9IDE7XG4gICAgICAgIG1hc2tDdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgICAgICBjb25zdCBjbGlwID0gbmV3IFBhdGgyRCgpO1xuICAgICAgICBjbGlwLnJlY3QobWFza1gsIG1hc2tZLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgbWFza0N0eC5jbGlwKGNsaXApO1xuICAgICAgICBtYXNrQ3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tYXRvcFwiO1xuICAgICAgICBtYXNrQ3R4LmZpbGxTdHlsZSA9IGJhY2tkcm9wUkdCO1xuICAgICAgICBtYXNrQ3R4LmZpbGxSZWN0KG1hc2tYLCBtYXNrWSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIG1hc2tDdHgucmVzdG9yZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxheWVyQ3R4LnNhdmUoKTtcbiAgICBsYXllckN0eC5nbG9iYWxBbHBoYSA9IDE7XG4gICAgbGF5ZXJDdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuXG4gICAgaWYgKHN1YnR5cGUgPT09IFwiQWxwaGFcIiAmJiB0cmFuc2Zlck1hcCkge1xuICAgICAgbGF5ZXJDdHguZmlsdGVyID0gdGhpcy5maWx0ZXJGYWN0b3J5LmFkZEFscGhhRmlsdGVyKHRyYW5zZmVyTWFwKTtcbiAgICB9IGVsc2UgaWYgKHN1YnR5cGUgPT09IFwiTHVtaW5vc2l0eVwiKSB7XG4gICAgICBsYXllckN0eC5maWx0ZXIgPSB0aGlzLmZpbHRlckZhY3RvcnkuYWRkTHVtaW5vc2l0eUZpbHRlcih0cmFuc2Zlck1hcCk7XG4gICAgfVxuXG4gICAgY29uc3QgY2xpcCA9IG5ldyBQYXRoMkQoKTtcbiAgICBjbGlwLnJlY3QobGF5ZXJPZmZzZXRYLCBsYXllck9mZnNldFksIHdpZHRoLCBoZWlnaHQpO1xuICAgIGxheWVyQ3R4LmNsaXAoY2xpcCk7XG4gICAgbGF5ZXJDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJkZXN0aW5hdGlvbi1pblwiO1xuICAgIGxheWVyQ3R4LmRyYXdJbWFnZShcbiAgICAgIG1hc2tDYW52YXMsXG4gICAgICBtYXNrWCxcbiAgICAgIG1hc2tZLFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBsYXllck9mZnNldFgsXG4gICAgICBsYXllck9mZnNldFksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgICk7XG4gICAgbGF5ZXJDdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgc2F2ZSgpIHtcbiAgICBpZiAodGhpcy5pblNNYXNrTW9kZSkge1xuICAgICAgLy8gU01hc2sgbW9kZSBtYXkgYmUgdHVybmVkIG9uL29mZiBjYXVzaW5nIHVzIHRvIGxvc2UgZ3JhcGhpY3Mgc3RhdGUuXG4gICAgICAvLyBDb3B5IHRoZSB0ZW1wb3JhcnkgY2FudmFzIHN0YXRlIHRvIHRoZSBtYWluKHN1c3BlbmRlZCkgY2FudmFzIHRvIGtlZXBcbiAgICAgIC8vIGl0IGluIHN5bmMuXG4gICAgICBjb3B5Q3R4U3RhdGUodGhpcy5jdHgsIHRoaXMuc3VzcGVuZGVkQ3R4KTtcbiAgICB9XG4gICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgIGNvbnN0IG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICB0aGlzLnN0YXRlU3RhY2sucHVzaChvbGQpO1xuICAgIHRoaXMuY3VycmVudCA9IG9sZC5jbG9uZSgpO1xuICB9XG5cbiAgcmVzdG9yZSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZVN0YWNrLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKHRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgICAgdGhpcy5lbmRTTWFza01vZGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnN0YXRlU3RhY2sucG9wKCk7XG4gICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgIGlmICh0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICAvLyBHcmFwaGljcyBzdGF0ZSBpcyBzdG9yZWQgb24gdGhlIG1haW4oc3VzcGVuZGVkKSBjYW52YXMuIFJlc3RvcmUgaXRzXG4gICAgICAvLyBzdGF0ZSB0aGVuIGNvcHkgaXQgb3ZlciB0byB0aGUgdGVtcG9yYXJ5IGNhbnZhcy5cbiAgICAgIGNvcHlDdHhTdGF0ZSh0aGlzLnN1c3BlbmRlZEN0eCwgdGhpcy5jdHgpO1xuICAgIH1cbiAgICB0aGlzLmNoZWNrU01hc2tTdGF0ZSgpO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIGNsaXBwaW5nIHBhdGggaXMgcmVzZXQgKGZpeGVzIGlzc3VlNjQxMy5wZGYpLlxuICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuXG4gICAgdGhpcy5fY2FjaGVkU2NhbGVGb3JTdHJva2luZ1swXSA9IC0xO1xuICAgIHRoaXMuX2NhY2hlZEdldFNpbmdsZVBpeGVsV2lkdGggPSBudWxsO1xuICB9XG5cbiAgdHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICB0aGlzLmN0eC50cmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZik7XG5cbiAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nWzBdID0gLTE7XG4gICAgdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCA9IG51bGw7XG4gIH1cblxuICAvLyBQYXRoXG4gIGNvbnN0cnVjdFBhdGgob3AsIGRhdGEsIG1pbk1heCkge1xuICAgIGxldCBbcGF0aF0gPSBkYXRhO1xuICAgIGlmICghbWluTWF4KSB7XG4gICAgICAvLyBUaGUgcGF0aCBpcyBlbXB0eSwgc28gbm8gbmVlZCB0byB1cGRhdGUgdGhlIGN1cnJlbnQgbWluTWF4LlxuICAgICAgcGF0aCB8fD0gZGF0YVswXSA9IG5ldyBQYXRoMkQoKTtcbiAgICAgIHRoaXNbb3BdKHBhdGgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIShwYXRoIGluc3RhbmNlb2YgUGF0aDJEKSkge1xuICAgICAgLy8gVXNpbmcgYSBTVkcgc3RyaW5nIGlzIHNsaWdodGx5IHNsb3dlciB0aGFuIHVzaW5nIHRoZSBmb2xsb3dpbmcgbG9vcC5cbiAgICAgIGNvbnN0IHBhdGgyZCA9IChkYXRhWzBdID0gbmV3IFBhdGgyRCgpKTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHBhdGgubGVuZ3RoOyBpIDwgaWk7ICkge1xuICAgICAgICBzd2l0Y2ggKHBhdGhbaSsrXSkge1xuICAgICAgICAgIGNhc2UgRHJhd09QUy5tb3ZlVG86XG4gICAgICAgICAgICBwYXRoMmQubW92ZVRvKHBhdGhbaSsrXSwgcGF0aFtpKytdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgRHJhd09QUy5saW5lVG86XG4gICAgICAgICAgICBwYXRoMmQubGluZVRvKHBhdGhbaSsrXSwgcGF0aFtpKytdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgRHJhd09QUy5jdXJ2ZVRvOlxuICAgICAgICAgICAgcGF0aDJkLmJlemllckN1cnZlVG8oXG4gICAgICAgICAgICAgIHBhdGhbaSsrXSxcbiAgICAgICAgICAgICAgcGF0aFtpKytdLFxuICAgICAgICAgICAgICBwYXRoW2krK10sXG4gICAgICAgICAgICAgIHBhdGhbaSsrXSxcbiAgICAgICAgICAgICAgcGF0aFtpKytdLFxuICAgICAgICAgICAgICBwYXRoW2krK11cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIERyYXdPUFMuY2xvc2VQYXRoOlxuICAgICAgICAgICAgcGF0aDJkLmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHdhcm4oYFVucmVjb2duaXplZCBkcmF3aW5nIHBhdGggb3BlcmF0b3I6ICR7cGF0aFtpIC0gMV19YCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcGF0aCA9IHBhdGgyZDtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50LnVwZGF0ZVJlY3RNaW5NYXgoZ2V0Q3VycmVudFRyYW5zZm9ybSh0aGlzLmN0eCksIG1pbk1heCk7XG4gICAgdGhpc1tvcF0ocGF0aCk7XG4gIH1cblxuICBjbG9zZVBhdGgoKSB7XG4gICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gIH1cblxuICBzdHJva2UocGF0aCwgY29uc3VtZVBhdGggPSB0cnVlKSB7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgY29uc3Qgc3Ryb2tlQ29sb3IgPSB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3I7XG4gICAgLy8gRm9yIHN0cm9rZSB3ZSB3YW50IHRvIHRlbXBvcmFyaWx5IGNoYW5nZSB0aGUgZ2xvYmFsIGFscGhhIHRvIHRoZVxuICAgIC8vIHN0cm9raW5nIGFscGhhLlxuICAgIGN0eC5nbG9iYWxBbHBoYSA9IHRoaXMuY3VycmVudC5zdHJva2VBbHBoYTtcbiAgICBpZiAodGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgaWYgKHR5cGVvZiBzdHJva2VDb2xvciA9PT0gXCJvYmplY3RcIiAmJiBzdHJva2VDb2xvcj8uZ2V0UGF0dGVybikge1xuICAgICAgICBjb25zdCBiYXNlVHJhbnNmb3JtID0gc3Ryb2tlQ29sb3IuaXNNb2RpZnlpbmdDdXJyZW50VHJhbnNmb3JtKClcbiAgICAgICAgICA/IGN0eC5nZXRUcmFuc2Zvcm0oKVxuICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlQ29sb3IuZ2V0UGF0dGVybihcbiAgICAgICAgICBjdHgsXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICBnZXRDdXJyZW50VHJhbnNmb3JtSW52ZXJzZShjdHgpLFxuICAgICAgICAgIFBhdGhUeXBlLlNUUk9LRVxuICAgICAgICApO1xuICAgICAgICBpZiAoYmFzZVRyYW5zZm9ybSkge1xuICAgICAgICAgIGNvbnN0IG5ld1BhdGggPSBuZXcgUGF0aDJEKCk7XG4gICAgICAgICAgbmV3UGF0aC5hZGRQYXRoKFxuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIGN0eC5nZXRUcmFuc2Zvcm0oKS5pbnZlcnRTZWxmKCkubXVsdGlwbHlTZWxmKGJhc2VUcmFuc2Zvcm0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwYXRoID0gbmV3UGF0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2NhbGVBbmRTdHJva2UocGF0aCwgLyogc2F2ZVJlc3RvcmUgKi8gZmFsc2UpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXNjYWxlQW5kU3Ryb2tlKHBhdGgsIC8qIHNhdmVSZXN0b3JlICovIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29uc3VtZVBhdGgpIHtcbiAgICAgIHRoaXMuY29uc3VtZVBhdGgoXG4gICAgICAgIHBhdGgsXG4gICAgICAgIHRoaXMuY3VycmVudC5nZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KFxuICAgICAgICAgIFBhdGhUeXBlLlNUUk9LRSxcbiAgICAgICAgICBnZXRDdXJyZW50VHJhbnNmb3JtKHRoaXMuY3R4KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgICAvLyBSZXN0b3JlIHRoZSBnbG9iYWwgYWxwaGEgdG8gdGhlIGZpbGwgYWxwaGFcbiAgICBjdHguZ2xvYmFsQWxwaGEgPSB0aGlzLmN1cnJlbnQuZmlsbEFscGhhO1xuICB9XG5cbiAgY2xvc2VTdHJva2UocGF0aCkge1xuICAgIHRoaXMuc3Ryb2tlKHBhdGgpO1xuICB9XG5cbiAgZmlsbChwYXRoLCBjb25zdW1lUGF0aCA9IHRydWUpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBmaWxsQ29sb3IgPSB0aGlzLmN1cnJlbnQuZmlsbENvbG9yO1xuICAgIGNvbnN0IGlzUGF0dGVybkZpbGwgPSB0aGlzLmN1cnJlbnQucGF0dGVybkZpbGw7XG4gICAgbGV0IG5lZWRSZXN0b3JlID0gZmFsc2U7XG5cbiAgICBpZiAoaXNQYXR0ZXJuRmlsbCkge1xuICAgICAgY29uc3QgYmFzZVRyYW5zZm9ybSA9IGZpbGxDb2xvci5pc01vZGlmeWluZ0N1cnJlbnRUcmFuc2Zvcm0oKVxuICAgICAgICA/IGN0eC5nZXRUcmFuc2Zvcm0oKVxuICAgICAgICA6IG51bGw7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxDb2xvci5nZXRQYXR0ZXJuKFxuICAgICAgICBjdHgsXG4gICAgICAgIHRoaXMsXG4gICAgICAgIGdldEN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKGN0eCksXG4gICAgICAgIFBhdGhUeXBlLkZJTExcbiAgICAgICk7XG4gICAgICBpZiAoYmFzZVRyYW5zZm9ybSkge1xuICAgICAgICBjb25zdCBuZXdQYXRoID0gbmV3IFBhdGgyRCgpO1xuICAgICAgICBuZXdQYXRoLmFkZFBhdGgoXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgICBjdHguZ2V0VHJhbnNmb3JtKCkuaW52ZXJ0U2VsZigpLm11bHRpcGx5U2VsZihiYXNlVHJhbnNmb3JtKVxuICAgICAgICApO1xuICAgICAgICBwYXRoID0gbmV3UGF0aDtcbiAgICAgIH1cbiAgICAgIG5lZWRSZXN0b3JlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnRlcnNlY3QgPSB0aGlzLmN1cnJlbnQuZ2V0Q2xpcHBlZFBhdGhCb3VuZGluZ0JveCgpO1xuICAgIGlmICh0aGlzLmNvbnRlbnRWaXNpYmxlICYmIGludGVyc2VjdCAhPT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMucGVuZGluZ0VPRmlsbCkge1xuICAgICAgICBjdHguZmlsbChwYXRoLCBcImV2ZW5vZGRcIik7XG4gICAgICAgIHRoaXMucGVuZGluZ0VPRmlsbCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZpbGwocGF0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5lZWRSZXN0b3JlKSB7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgICBpZiAoY29uc3VtZVBhdGgpIHtcbiAgICAgIHRoaXMuY29uc3VtZVBhdGgocGF0aCwgaW50ZXJzZWN0KTtcbiAgICB9XG4gIH1cblxuICBlb0ZpbGwocGF0aCkge1xuICAgIHRoaXMucGVuZGluZ0VPRmlsbCA9IHRydWU7XG4gICAgdGhpcy5maWxsKHBhdGgpO1xuICB9XG5cbiAgZmlsbFN0cm9rZShwYXRoKSB7XG4gICAgdGhpcy5maWxsKHBhdGgsIGZhbHNlKTtcbiAgICB0aGlzLnN0cm9rZShwYXRoLCBmYWxzZSk7XG5cbiAgICB0aGlzLmNvbnN1bWVQYXRoKHBhdGgpO1xuICB9XG5cbiAgZW9GaWxsU3Ryb2tlKHBhdGgpIHtcbiAgICB0aGlzLnBlbmRpbmdFT0ZpbGwgPSB0cnVlO1xuICAgIHRoaXMuZmlsbFN0cm9rZShwYXRoKTtcbiAgfVxuXG4gIGNsb3NlRmlsbFN0cm9rZShwYXRoKSB7XG4gICAgdGhpcy5maWxsU3Ryb2tlKHBhdGgpO1xuICB9XG5cbiAgY2xvc2VFT0ZpbGxTdHJva2UocGF0aCkge1xuICAgIHRoaXMucGVuZGluZ0VPRmlsbCA9IHRydWU7XG4gICAgdGhpcy5maWxsU3Ryb2tlKHBhdGgpO1xuICB9XG5cbiAgZW5kUGF0aChwYXRoKSB7XG4gICAgdGhpcy5jb25zdW1lUGF0aChwYXRoKTtcbiAgfVxuXG4gIC8vIENsaXBwaW5nXG4gIGNsaXAoKSB7XG4gICAgdGhpcy5wZW5kaW5nQ2xpcCA9IE5PUk1BTF9DTElQO1xuICB9XG5cbiAgZW9DbGlwKCkge1xuICAgIHRoaXMucGVuZGluZ0NsaXAgPSBFT19DTElQO1xuICB9XG5cbiAgLy8gVGV4dFxuICBiZWdpblRleHQoKSB7XG4gICAgdGhpcy5jdXJyZW50LnRleHRNYXRyaXggPSBJREVOVElUWV9NQVRSSVg7XG4gICAgdGhpcy5jdXJyZW50LnRleHRNYXRyaXhTY2FsZSA9IDE7XG4gICAgdGhpcy5jdXJyZW50LnggPSB0aGlzLmN1cnJlbnQubGluZVggPSAwO1xuICAgIHRoaXMuY3VycmVudC55ID0gdGhpcy5jdXJyZW50LmxpbmVZID0gMDtcbiAgfVxuXG4gIGVuZFRleHQoKSB7XG4gICAgY29uc3QgcGF0aHMgPSB0aGlzLnBlbmRpbmdUZXh0UGF0aHM7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgaWYgKHBhdGhzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdQYXRoID0gbmV3IFBhdGgyRCgpO1xuICAgIGNvbnN0IGludlRyYW5zZiA9IGN0eC5nZXRUcmFuc2Zvcm0oKS5pbnZlcnRTZWxmKCk7XG4gICAgZm9yIChjb25zdCB7IHRyYW5zZm9ybSwgeCwgeSwgZm9udFNpemUsIHBhdGggfSBvZiBwYXRocykge1xuICAgICAgbmV3UGF0aC5hZGRQYXRoKFxuICAgICAgICBwYXRoLFxuICAgICAgICBuZXcgRE9NTWF0cml4KHRyYW5zZm9ybSlcbiAgICAgICAgICAucHJlTXVsdGlwbHlTZWxmKGludlRyYW5zZilcbiAgICAgICAgICAudHJhbnNsYXRlKHgsIHkpXG4gICAgICAgICAgLnNjYWxlKGZvbnRTaXplLCAtZm9udFNpemUpXG4gICAgICApO1xuICAgIH1cblxuICAgIGN0eC5jbGlwKG5ld1BhdGgpO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBkZWxldGUgdGhpcy5wZW5kaW5nVGV4dFBhdGhzO1xuICB9XG5cbiAgc2V0Q2hhclNwYWNpbmcoc3BhY2luZykge1xuICAgIHRoaXMuY3VycmVudC5jaGFyU3BhY2luZyA9IHNwYWNpbmc7XG4gIH1cblxuICBzZXRXb3JkU3BhY2luZyhzcGFjaW5nKSB7XG4gICAgdGhpcy5jdXJyZW50LndvcmRTcGFjaW5nID0gc3BhY2luZztcbiAgfVxuXG4gIHNldEhTY2FsZShzY2FsZSkge1xuICAgIHRoaXMuY3VycmVudC50ZXh0SFNjYWxlID0gc2NhbGUgLyAxMDA7XG4gIH1cblxuICBzZXRMZWFkaW5nKGxlYWRpbmcpIHtcbiAgICB0aGlzLmN1cnJlbnQubGVhZGluZyA9IC1sZWFkaW5nO1xuICB9XG5cbiAgc2V0Rm9udChmb250UmVmTmFtZSwgc2l6ZSkge1xuICAgIGNvbnN0IGZvbnRPYmogPSB0aGlzLmNvbW1vbk9ianMuZ2V0KGZvbnRSZWZOYW1lKTtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuXG4gICAgaWYgKCFmb250T2JqKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IGZpbmQgZm9udCBmb3IgJHtmb250UmVmTmFtZX1gKTtcbiAgICB9XG4gICAgY3VycmVudC5mb250TWF0cml4ID0gZm9udE9iai5mb250TWF0cml4IHx8IEZPTlRfSURFTlRJVFlfTUFUUklYO1xuXG4gICAgLy8gQSB2YWxpZCBtYXRyaXggbmVlZHMgYWxsIG1haW4gZGlhZ29uYWwgZWxlbWVudHMgdG8gYmUgbm9uLXplcm9cbiAgICAvLyBUaGlzIGFsc28gZW5zdXJlcyB3ZSBieXBhc3MgRkYgYnVnemlsbGEgYnVnICM3MTk4NDQuXG4gICAgaWYgKGN1cnJlbnQuZm9udE1hdHJpeFswXSA9PT0gMCB8fCBjdXJyZW50LmZvbnRNYXRyaXhbM10gPT09IDApIHtcbiAgICAgIHdhcm4oXCJJbnZhbGlkIGZvbnQgbWF0cml4IGZvciBmb250IFwiICsgZm9udFJlZk5hbWUpO1xuICAgIH1cblxuICAgIC8vIFRoZSBzcGVjIGZvciBUZiAoc2V0Rm9udCkgc2F5cyB0aGF0ICdzaXplJyBzcGVjaWZpZXMgdGhlIGZvbnQgJ3NjYWxlJyxcbiAgICAvLyBhbmQgaW4gc29tZSBkb2NzIHRoaXMgY2FuIGJlIG5lZ2F0aXZlIChpbnZlcnRlZCB4LXkgYXhlcykuXG4gICAgaWYgKHNpemUgPCAwKSB7XG4gICAgICBzaXplID0gLXNpemU7XG4gICAgICBjdXJyZW50LmZvbnREaXJlY3Rpb24gPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudC5mb250RGlyZWN0aW9uID0gMTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnQuZm9udCA9IGZvbnRPYmo7XG4gICAgdGhpcy5jdXJyZW50LmZvbnRTaXplID0gc2l6ZTtcblxuICAgIGlmIChmb250T2JqLmlzVHlwZTNGb250KSB7XG4gICAgICByZXR1cm47IC8vIHdlIGRvbid0IG5lZWQgY3R4LmZvbnQgZm9yIFR5cGUzIGZvbnRzXG4gICAgfVxuXG4gICAgY29uc3QgbmFtZSA9IGZvbnRPYmoubG9hZGVkTmFtZSB8fCBcInNhbnMtc2VyaWZcIjtcbiAgICBjb25zdCB0eXBlZmFjZSA9XG4gICAgICBmb250T2JqLnN5c3RlbUZvbnRJbmZvPy5jc3MgfHwgYFwiJHtuYW1lfVwiLCAke2ZvbnRPYmouZmFsbGJhY2tOYW1lfWA7XG5cbiAgICBsZXQgYm9sZCA9IFwibm9ybWFsXCI7XG4gICAgaWYgKGZvbnRPYmouYmxhY2spIHtcbiAgICAgIGJvbGQgPSBcIjkwMFwiO1xuICAgIH0gZWxzZSBpZiAoZm9udE9iai5ib2xkKSB7XG4gICAgICBib2xkID0gXCJib2xkXCI7XG4gICAgfVxuICAgIGNvbnN0IGl0YWxpYyA9IGZvbnRPYmouaXRhbGljID8gXCJpdGFsaWNcIiA6IFwibm9ybWFsXCI7XG5cbiAgICAvLyBTb21lIGZvbnQgYmFja2VuZHMgY2Fubm90IGhhbmRsZSBmb250cyBiZWxvdyBjZXJ0YWluIHNpemUuXG4gICAgLy8gS2VlcGluZyB0aGUgZm9udCBhdCBtaW5pbWFsIHNpemUgYW5kIHVzaW5nIHRoZSBmb250U2l6ZVNjYWxlIHRvIGNoYW5nZVxuICAgIC8vIHRoZSBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBiZWZvcmUgdGhlIGZpbGxUZXh0L3N0cm9rZVRleHQuXG4gICAgLy8gU2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTcyNjIyN1xuICAgIGxldCBicm93c2VyRm9udFNpemUgPSBzaXplO1xuICAgIGlmIChzaXplIDwgTUlOX0ZPTlRfU0laRSkge1xuICAgICAgYnJvd3NlckZvbnRTaXplID0gTUlOX0ZPTlRfU0laRTtcbiAgICB9IGVsc2UgaWYgKHNpemUgPiBNQVhfRk9OVF9TSVpFKSB7XG4gICAgICBicm93c2VyRm9udFNpemUgPSBNQVhfRk9OVF9TSVpFO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQuZm9udFNpemVTY2FsZSA9IHNpemUgLyBicm93c2VyRm9udFNpemU7XG5cbiAgICB0aGlzLmN0eC5mb250ID0gYCR7aXRhbGljfSAke2JvbGR9ICR7YnJvd3NlckZvbnRTaXplfXB4ICR7dHlwZWZhY2V9YDtcbiAgfVxuXG4gIHNldFRleHRSZW5kZXJpbmdNb2RlKG1vZGUpIHtcbiAgICB0aGlzLmN1cnJlbnQudGV4dFJlbmRlcmluZ01vZGUgPSBtb2RlO1xuICB9XG5cbiAgc2V0VGV4dFJpc2UocmlzZSkge1xuICAgIHRoaXMuY3VycmVudC50ZXh0UmlzZSA9IHJpc2U7XG4gIH1cblxuICBtb3ZlVGV4dCh4LCB5KSB7XG4gICAgdGhpcy5jdXJyZW50LnggPSB0aGlzLmN1cnJlbnQubGluZVggKz0geDtcbiAgICB0aGlzLmN1cnJlbnQueSA9IHRoaXMuY3VycmVudC5saW5lWSArPSB5O1xuICB9XG5cbiAgc2V0TGVhZGluZ01vdmVUZXh0KHgsIHkpIHtcbiAgICB0aGlzLnNldExlYWRpbmcoLXkpO1xuICAgIHRoaXMubW92ZVRleHQoeCwgeSk7XG4gIH1cblxuICBzZXRUZXh0TWF0cml4KGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICB0aGlzLmN1cnJlbnQudGV4dE1hdHJpeCA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICB0aGlzLmN1cnJlbnQudGV4dE1hdHJpeFNjYWxlID0gTWF0aC5oeXBvdChhLCBiKTtcblxuICAgIHRoaXMuY3VycmVudC54ID0gdGhpcy5jdXJyZW50LmxpbmVYID0gMDtcbiAgICB0aGlzLmN1cnJlbnQueSA9IHRoaXMuY3VycmVudC5saW5lWSA9IDA7XG4gIH1cblxuICBuZXh0TGluZSgpIHtcbiAgICB0aGlzLm1vdmVUZXh0KDAsIHRoaXMuY3VycmVudC5sZWFkaW5nKTtcbiAgfVxuXG4gICNnZXRTY2FsZWRQYXRoKHBhdGgsIGN1cnJlbnRUcmFuc2Zvcm0sIHRyYW5zZm9ybSkge1xuICAgIGNvbnN0IG5ld1BhdGggPSBuZXcgUGF0aDJEKCk7XG4gICAgbmV3UGF0aC5hZGRQYXRoKFxuICAgICAgcGF0aCxcbiAgICAgIG5ldyBET01NYXRyaXgodHJhbnNmb3JtKS5pbnZlcnRTZWxmKCkubXVsdGlwbHlTZWxmKGN1cnJlbnRUcmFuc2Zvcm0pXG4gICAgKTtcbiAgICByZXR1cm4gbmV3UGF0aDtcbiAgfVxuXG4gIHBhaW50Q2hhcihjaGFyYWN0ZXIsIHgsIHksIHBhdHRlcm5GaWxsVHJhbnNmb3JtLCBwYXR0ZXJuU3Ryb2tlVHJhbnNmb3JtKSB7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcbiAgICBjb25zdCBmb250ID0gY3VycmVudC5mb250O1xuICAgIGNvbnN0IHRleHRSZW5kZXJpbmdNb2RlID0gY3VycmVudC50ZXh0UmVuZGVyaW5nTW9kZTtcbiAgICBjb25zdCBmb250U2l6ZSA9IGN1cnJlbnQuZm9udFNpemUgLyBjdXJyZW50LmZvbnRTaXplU2NhbGU7XG4gICAgY29uc3QgZmlsbFN0cm9rZU1vZGUgPVxuICAgICAgdGV4dFJlbmRlcmluZ01vZGUgJiBUZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRV9NQVNLO1xuICAgIGNvbnN0IGlzQWRkVG9QYXRoU2V0ID0gISEoXG4gICAgICB0ZXh0UmVuZGVyaW5nTW9kZSAmIFRleHRSZW5kZXJpbmdNb2RlLkFERF9UT19QQVRIX0ZMQUdcbiAgICApO1xuICAgIGNvbnN0IHBhdHRlcm5GaWxsID0gY3VycmVudC5wYXR0ZXJuRmlsbCAmJiAhZm9udC5taXNzaW5nRmlsZTtcbiAgICBjb25zdCBwYXR0ZXJuU3Ryb2tlID0gY3VycmVudC5wYXR0ZXJuU3Ryb2tlICYmICFmb250Lm1pc3NpbmdGaWxlO1xuXG4gICAgbGV0IHBhdGg7XG4gICAgaWYgKFxuICAgICAgZm9udC5kaXNhYmxlRm9udEZhY2UgfHxcbiAgICAgIGlzQWRkVG9QYXRoU2V0IHx8XG4gICAgICBwYXR0ZXJuRmlsbCB8fFxuICAgICAgcGF0dGVyblN0cm9rZVxuICAgICkge1xuICAgICAgcGF0aCA9IGZvbnQuZ2V0UGF0aEdlbmVyYXRvcih0aGlzLmNvbW1vbk9ianMsIGNoYXJhY3Rlcik7XG4gICAgfVxuXG4gICAgaWYgKGZvbnQuZGlzYWJsZUZvbnRGYWNlIHx8IHBhdHRlcm5GaWxsIHx8IHBhdHRlcm5TdHJva2UpIHtcbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjdHgudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgY3R4LnNjYWxlKGZvbnRTaXplLCAtZm9udFNpemUpO1xuICAgICAgbGV0IGN1cnJlbnRUcmFuc2Zvcm07XG4gICAgICBpZiAoXG4gICAgICAgIGZpbGxTdHJva2VNb2RlID09PSBUZXh0UmVuZGVyaW5nTW9kZS5GSUxMIHx8XG4gICAgICAgIGZpbGxTdHJva2VNb2RlID09PSBUZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRVxuICAgICAgKSB7XG4gICAgICAgIGlmIChwYXR0ZXJuRmlsbFRyYW5zZm9ybSkge1xuICAgICAgICAgIGN1cnJlbnRUcmFuc2Zvcm0gPSBjdHguZ2V0VHJhbnNmb3JtKCk7XG4gICAgICAgICAgY3R4LnNldFRyYW5zZm9ybSguLi5wYXR0ZXJuRmlsbFRyYW5zZm9ybSk7XG4gICAgICAgICAgY3R4LmZpbGwoXG4gICAgICAgICAgICB0aGlzLiNnZXRTY2FsZWRQYXRoKHBhdGgsIGN1cnJlbnRUcmFuc2Zvcm0sIHBhdHRlcm5GaWxsVHJhbnNmb3JtKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3R4LmZpbGwocGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLlNUUk9LRSB8fFxuICAgICAgICBmaWxsU3Ryb2tlTW9kZSA9PT0gVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VcbiAgICAgICkge1xuICAgICAgICBpZiAocGF0dGVyblN0cm9rZVRyYW5zZm9ybSkge1xuICAgICAgICAgIGN1cnJlbnRUcmFuc2Zvcm0gfHw9IGN0eC5nZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICBjdHguc2V0VHJhbnNmb3JtKC4uLnBhdHRlcm5TdHJva2VUcmFuc2Zvcm0pO1xuICAgICAgICAgIGNvbnN0IHsgYSwgYiwgYywgZCB9ID0gY3VycmVudFRyYW5zZm9ybTtcbiAgICAgICAgICBjb25zdCBpbnZQYXR0ZXJuVHJhbnNmb3JtID0gVXRpbC5pbnZlcnNlVHJhbnNmb3JtKFxuICAgICAgICAgICAgcGF0dGVyblN0cm9rZVRyYW5zZm9ybVxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgdHJhbnNmID0gVXRpbC50cmFuc2Zvcm0oXG4gICAgICAgICAgICBbYSwgYiwgYywgZCwgMCwgMF0sXG4gICAgICAgICAgICBpbnZQYXR0ZXJuVHJhbnNmb3JtXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBbc3gsIHN5XSA9IFV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUodHJhbnNmKTtcblxuICAgICAgICAgIC8vIENhbmNlbCB0aGUgcGF0dGVybiBzY2FsaW5nIG9mIHRoZSBsaW5lIHdpZHRoLlxuICAgICAgICAgIC8vIElmIHN4IGFuZCBzeSBhcmUgZGlmZmVyZW50LCB1bmZvcnR1bmF0ZWx5IHdlIGNhbid0IGRvIGFueXRoaW5nIGFuZFxuICAgICAgICAgIC8vIHdlJ2xsIGhhdmUgYSByZW5kZXJpbmcgYnVnLlxuICAgICAgICAgIGN0eC5saW5lV2lkdGggKj0gTWF0aC5tYXgoc3gsIHN5KSAvIGZvbnRTaXplO1xuICAgICAgICAgIGN0eC5zdHJva2UoXG4gICAgICAgICAgICB0aGlzLiNnZXRTY2FsZWRQYXRoKHBhdGgsIGN1cnJlbnRUcmFuc2Zvcm0sIHBhdHRlcm5TdHJva2VUcmFuc2Zvcm0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHgubGluZVdpZHRoIC89IGZvbnRTaXplO1xuICAgICAgICAgIGN0eC5zdHJva2UocGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLkZJTEwgfHxcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFXG4gICAgICApIHtcbiAgICAgICAgY3R4LmZpbGxUZXh0KGNoYXJhY3RlciwgeCwgeSk7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGZpbGxTdHJva2VNb2RlID09PSBUZXh0UmVuZGVyaW5nTW9kZS5TVFJPS0UgfHxcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFXG4gICAgICApIHtcbiAgICAgICAgY3R4LnN0cm9rZVRleHQoY2hhcmFjdGVyLCB4LCB5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNBZGRUb1BhdGhTZXQpIHtcbiAgICAgIGNvbnN0IHBhdGhzID0gKHRoaXMucGVuZGluZ1RleHRQYXRocyB8fD0gW10pO1xuICAgICAgcGF0aHMucHVzaCh7XG4gICAgICAgIHRyYW5zZm9ybTogZ2V0Q3VycmVudFRyYW5zZm9ybShjdHgpLFxuICAgICAgICB4LFxuICAgICAgICB5LFxuICAgICAgICBmb250U2l6ZSxcbiAgICAgICAgcGF0aCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpc0ZvbnRTdWJwaXhlbEFBRW5hYmxlZCgpIHtcbiAgICAvLyBDaGVja3MgaWYgYW50aS1hbGlhc2luZyBpcyBlbmFibGVkIHdoZW4gc2NhbGVkIHRleHQgaXMgcGFpbnRlZC5cbiAgICAvLyBPbiBXaW5kb3dzIEdESSBzY2FsZWQgZm9udHMgbG9va3MgYmFkLlxuICAgIGNvbnN0IHsgY29udGV4dDogY3R4IH0gPSB0aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhcbiAgICAgIFwiaXNGb250U3VicGl4ZWxBQUVuYWJsZWRcIixcbiAgICAgIDEwLFxuICAgICAgMTBcbiAgICApO1xuICAgIGN0eC5zY2FsZSgxLjUsIDEpO1xuICAgIGN0eC5maWxsVGV4dChcIklcIiwgMCwgMTApO1xuICAgIGNvbnN0IGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDEwLCAxMCkuZGF0YTtcbiAgICBsZXQgZW5hYmxlZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAzOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkge1xuICAgICAgaWYgKGRhdGFbaV0gPiAwICYmIGRhdGFbaV0gPCAyNTUpIHtcbiAgICAgICAgZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiaXNGb250U3VicGl4ZWxBQUVuYWJsZWRcIiwgZW5hYmxlZCk7XG4gIH1cblxuICBzaG93VGV4dChnbHlwaHMpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGZvbnQgPSBjdXJyZW50LmZvbnQ7XG4gICAgaWYgKGZvbnQuaXNUeXBlM0ZvbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNob3dUeXBlM1RleHQoZ2x5cGhzKTtcbiAgICB9XG5cbiAgICBjb25zdCBmb250U2l6ZSA9IGN1cnJlbnQuZm9udFNpemU7XG4gICAgaWYgKGZvbnRTaXplID09PSAwKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGZvbnRTaXplU2NhbGUgPSBjdXJyZW50LmZvbnRTaXplU2NhbGU7XG4gICAgY29uc3QgY2hhclNwYWNpbmcgPSBjdXJyZW50LmNoYXJTcGFjaW5nO1xuICAgIGNvbnN0IHdvcmRTcGFjaW5nID0gY3VycmVudC53b3JkU3BhY2luZztcbiAgICBjb25zdCBmb250RGlyZWN0aW9uID0gY3VycmVudC5mb250RGlyZWN0aW9uO1xuICAgIGNvbnN0IHRleHRIU2NhbGUgPSBjdXJyZW50LnRleHRIU2NhbGUgKiBmb250RGlyZWN0aW9uO1xuICAgIGNvbnN0IGdseXBoc0xlbmd0aCA9IGdseXBocy5sZW5ndGg7XG4gICAgY29uc3QgdmVydGljYWwgPSBmb250LnZlcnRpY2FsO1xuICAgIGNvbnN0IHNwYWNpbmdEaXIgPSB2ZXJ0aWNhbCA/IDEgOiAtMTtcbiAgICBjb25zdCBkZWZhdWx0Vk1ldHJpY3MgPSBmb250LmRlZmF1bHRWTWV0cmljcztcbiAgICBjb25zdCB3aWR0aEFkdmFuY2VTY2FsZSA9IGZvbnRTaXplICogY3VycmVudC5mb250TWF0cml4WzBdO1xuXG4gICAgY29uc3Qgc2ltcGxlRmlsbFRleHQgPVxuICAgICAgY3VycmVudC50ZXh0UmVuZGVyaW5nTW9kZSA9PT0gVGV4dFJlbmRlcmluZ01vZGUuRklMTCAmJlxuICAgICAgIWZvbnQuZGlzYWJsZUZvbnRGYWNlICYmXG4gICAgICAhY3VycmVudC5wYXR0ZXJuRmlsbDtcblxuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnRyYW5zZm9ybSguLi5jdXJyZW50LnRleHRNYXRyaXgpO1xuICAgIGN0eC50cmFuc2xhdGUoY3VycmVudC54LCBjdXJyZW50LnkgKyBjdXJyZW50LnRleHRSaXNlKTtcblxuICAgIGlmIChmb250RGlyZWN0aW9uID4gMCkge1xuICAgICAgY3R4LnNjYWxlKHRleHRIU2NhbGUsIC0xKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LnNjYWxlKHRleHRIU2NhbGUsIDEpO1xuICAgIH1cblxuICAgIGxldCBwYXR0ZXJuRmlsbFRyYW5zZm9ybSwgcGF0dGVyblN0cm9rZVRyYW5zZm9ybTtcbiAgICBpZiAoY3VycmVudC5wYXR0ZXJuRmlsbCkge1xuICAgICAgY3R4LnNhdmUoKTtcbiAgICAgIGNvbnN0IHBhdHRlcm4gPSBjdXJyZW50LmZpbGxDb2xvci5nZXRQYXR0ZXJuKFxuICAgICAgICBjdHgsXG4gICAgICAgIHRoaXMsXG4gICAgICAgIGdldEN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKGN0eCksXG4gICAgICAgIFBhdGhUeXBlLkZJTExcbiAgICAgICk7XG4gICAgICBwYXR0ZXJuRmlsbFRyYW5zZm9ybSA9IGdldEN1cnJlbnRUcmFuc2Zvcm0oY3R4KTtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICBjdHguZmlsbFN0eWxlID0gcGF0dGVybjtcbiAgICB9XG5cbiAgICBpZiAoY3VycmVudC5wYXR0ZXJuU3Ryb2tlKSB7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY29uc3QgcGF0dGVybiA9IGN1cnJlbnQuc3Ryb2tlQ29sb3IuZ2V0UGF0dGVybihcbiAgICAgICAgY3R4LFxuICAgICAgICB0aGlzLFxuICAgICAgICBnZXRDdXJyZW50VHJhbnNmb3JtSW52ZXJzZShjdHgpLFxuICAgICAgICBQYXRoVHlwZS5TVFJPS0VcbiAgICAgICk7XG4gICAgICBwYXR0ZXJuU3Ryb2tlVHJhbnNmb3JtID0gZ2V0Q3VycmVudFRyYW5zZm9ybShjdHgpO1xuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHBhdHRlcm47XG4gICAgfVxuXG4gICAgbGV0IGxpbmVXaWR0aCA9IGN1cnJlbnQubGluZVdpZHRoO1xuICAgIGNvbnN0IHNjYWxlID0gY3VycmVudC50ZXh0TWF0cml4U2NhbGU7XG4gICAgaWYgKHNjYWxlID09PSAwIHx8IGxpbmVXaWR0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZmlsbFN0cm9rZU1vZGUgPVxuICAgICAgICBjdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlICYgVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VfTUFTSztcbiAgICAgIGlmIChcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLlNUUk9LRSB8fFxuICAgICAgICBmaWxsU3Ryb2tlTW9kZSA9PT0gVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VcbiAgICAgICkge1xuICAgICAgICBsaW5lV2lkdGggPSB0aGlzLmdldFNpbmdsZVBpeGVsV2lkdGgoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGluZVdpZHRoIC89IHNjYWxlO1xuICAgIH1cblxuICAgIGlmIChmb250U2l6ZVNjYWxlICE9PSAxLjApIHtcbiAgICAgIGN0eC5zY2FsZShmb250U2l6ZVNjYWxlLCBmb250U2l6ZVNjYWxlKTtcbiAgICAgIGxpbmVXaWR0aCAvPSBmb250U2l6ZVNjYWxlO1xuICAgIH1cblxuICAgIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XG5cbiAgICBpZiAoZm9udC5pc0ludmFsaWRQREZqc0ZvbnQpIHtcbiAgICAgIGNvbnN0IGNoYXJzID0gW107XG4gICAgICBsZXQgd2lkdGggPSAwO1xuICAgICAgZm9yIChjb25zdCBnbHlwaCBvZiBnbHlwaHMpIHtcbiAgICAgICAgY2hhcnMucHVzaChnbHlwaC51bmljb2RlKTtcbiAgICAgICAgd2lkdGggKz0gZ2x5cGgud2lkdGg7XG4gICAgICB9XG4gICAgICBjdHguZmlsbFRleHQoY2hhcnMuam9pbihcIlwiKSwgMCwgMCk7XG4gICAgICBjdXJyZW50LnggKz0gd2lkdGggKiB3aWR0aEFkdmFuY2VTY2FsZSAqIHRleHRIU2NhbGU7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgdGhpcy5jb21wb3NlKCk7XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgbGV0IHggPSAwLFxuICAgICAgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgZ2x5cGhzTGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBnbHlwaCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICB4ICs9IChzcGFjaW5nRGlyICogZ2x5cGggKiBmb250U2l6ZSkgLyAxMDAwO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3RvcmVOZWVkZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IHNwYWNpbmcgPSAoZ2x5cGguaXNTcGFjZSA/IHdvcmRTcGFjaW5nIDogMCkgKyBjaGFyU3BhY2luZztcbiAgICAgIGNvbnN0IGNoYXJhY3RlciA9IGdseXBoLmZvbnRDaGFyO1xuICAgICAgY29uc3QgYWNjZW50ID0gZ2x5cGguYWNjZW50O1xuICAgICAgbGV0IHNjYWxlZFgsIHNjYWxlZFk7XG4gICAgICBsZXQgd2lkdGggPSBnbHlwaC53aWR0aDtcbiAgICAgIGlmICh2ZXJ0aWNhbCkge1xuICAgICAgICBjb25zdCB2bWV0cmljID0gZ2x5cGgudm1ldHJpYyB8fCBkZWZhdWx0Vk1ldHJpY3M7XG4gICAgICAgIGNvbnN0IHZ4ID1cbiAgICAgICAgICAtKGdseXBoLnZtZXRyaWMgPyB2bWV0cmljWzFdIDogd2lkdGggKiAwLjUpICogd2lkdGhBZHZhbmNlU2NhbGU7XG4gICAgICAgIGNvbnN0IHZ5ID0gdm1ldHJpY1syXSAqIHdpZHRoQWR2YW5jZVNjYWxlO1xuXG4gICAgICAgIHdpZHRoID0gdm1ldHJpYyA/IC12bWV0cmljWzBdIDogd2lkdGg7XG4gICAgICAgIHNjYWxlZFggPSB2eCAvIGZvbnRTaXplU2NhbGU7XG4gICAgICAgIHNjYWxlZFkgPSAoeCArIHZ5KSAvIGZvbnRTaXplU2NhbGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2FsZWRYID0geCAvIGZvbnRTaXplU2NhbGU7XG4gICAgICAgIHNjYWxlZFkgPSAwO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm9udC5yZW1lYXN1cmUgJiYgd2lkdGggPiAwKSB7XG4gICAgICAgIC8vIFNvbWUgc3RhbmRhcmQgZm9udHMgbWF5IG5vdCBoYXZlIHRoZSBleGFjdCB3aWR0aDogcmVzY2FsZSBwZXJcbiAgICAgICAgLy8gY2hhcmFjdGVyIGlmIG1lYXN1cmVkIHdpZHRoIGlzIGdyZWF0ZXIgdGhhbiBleHBlY3RlZCBnbHlwaCB3aWR0aFxuICAgICAgICAvLyBhbmQgc3VicGl4ZWwtYWEgaXMgZW5hYmxlZCwgb3RoZXJ3aXNlIGp1c3QgY2VudGVyIHRoZSBnbHlwaC5cbiAgICAgICAgY29uc3QgbWVhc3VyZWRXaWR0aCA9XG4gICAgICAgICAgKChjdHgubWVhc3VyZVRleHQoY2hhcmFjdGVyKS53aWR0aCAqIDEwMDApIC8gZm9udFNpemUpICpcbiAgICAgICAgICBmb250U2l6ZVNjYWxlO1xuICAgICAgICBpZiAod2lkdGggPCBtZWFzdXJlZFdpZHRoICYmIHRoaXMuaXNGb250U3VicGl4ZWxBQUVuYWJsZWQpIHtcbiAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJTY2FsZVggPSB3aWR0aCAvIG1lYXN1cmVkV2lkdGg7XG4gICAgICAgICAgcmVzdG9yZU5lZWRlZCA9IHRydWU7XG4gICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICBjdHguc2NhbGUoY2hhcmFjdGVyU2NhbGVYLCAxKTtcbiAgICAgICAgICBzY2FsZWRYIC89IGNoYXJhY3RlclNjYWxlWDtcbiAgICAgICAgfSBlbHNlIGlmICh3aWR0aCAhPT0gbWVhc3VyZWRXaWR0aCkge1xuICAgICAgICAgIHNjYWxlZFggKz1cbiAgICAgICAgICAgICgoKHdpZHRoIC0gbWVhc3VyZWRXaWR0aCkgLyAyMDAwKSAqIGZvbnRTaXplKSAvIGZvbnRTaXplU2NhbGU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gT25seSBhdHRlbXB0IHRvIGRyYXcgdGhlIGdseXBoIGlmIGl0IGlzIGFjdHVhbGx5IGluIHRoZSBlbWJlZGRlZCBmb250XG4gICAgICAvLyBmaWxlIG9yIGlmIHRoZXJlIGlzbid0IGEgZm9udCBmaWxlIHNvIHRoZSBmYWxsYmFjayBmb250IGlzIHNob3duLlxuICAgICAgaWYgKHRoaXMuY29udGVudFZpc2libGUgJiYgKGdseXBoLmlzSW5Gb250IHx8IGZvbnQubWlzc2luZ0ZpbGUpKSB7XG4gICAgICAgIGlmIChzaW1wbGVGaWxsVGV4dCAmJiAhYWNjZW50KSB7XG4gICAgICAgICAgLy8gY29tbW9uIGNhc2VcbiAgICAgICAgICBjdHguZmlsbFRleHQoY2hhcmFjdGVyLCBzY2FsZWRYLCBzY2FsZWRZKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnBhaW50Q2hhcihcbiAgICAgICAgICAgIGNoYXJhY3RlcixcbiAgICAgICAgICAgIHNjYWxlZFgsXG4gICAgICAgICAgICBzY2FsZWRZLFxuICAgICAgICAgICAgcGF0dGVybkZpbGxUcmFuc2Zvcm0sXG4gICAgICAgICAgICBwYXR0ZXJuU3Ryb2tlVHJhbnNmb3JtXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoYWNjZW50KSB7XG4gICAgICAgICAgICBjb25zdCBzY2FsZWRBY2NlbnRYID1cbiAgICAgICAgICAgICAgc2NhbGVkWCArIChmb250U2l6ZSAqIGFjY2VudC5vZmZzZXQueCkgLyBmb250U2l6ZVNjYWxlO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVkQWNjZW50WSA9XG4gICAgICAgICAgICAgIHNjYWxlZFkgLSAoZm9udFNpemUgKiBhY2NlbnQub2Zmc2V0LnkpIC8gZm9udFNpemVTY2FsZTtcbiAgICAgICAgICAgIHRoaXMucGFpbnRDaGFyKFxuICAgICAgICAgICAgICBhY2NlbnQuZm9udENoYXIsXG4gICAgICAgICAgICAgIHNjYWxlZEFjY2VudFgsXG4gICAgICAgICAgICAgIHNjYWxlZEFjY2VudFksXG4gICAgICAgICAgICAgIHBhdHRlcm5GaWxsVHJhbnNmb3JtLFxuICAgICAgICAgICAgICBwYXR0ZXJuU3Ryb2tlVHJhbnNmb3JtXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGFyV2lkdGggPSB2ZXJ0aWNhbFxuICAgICAgICA/IHdpZHRoICogd2lkdGhBZHZhbmNlU2NhbGUgLSBzcGFjaW5nICogZm9udERpcmVjdGlvblxuICAgICAgICA6IHdpZHRoICogd2lkdGhBZHZhbmNlU2NhbGUgKyBzcGFjaW5nICogZm9udERpcmVjdGlvbjtcbiAgICAgIHggKz0gY2hhcldpZHRoO1xuXG4gICAgICBpZiAocmVzdG9yZU5lZWRlZCkge1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodmVydGljYWwpIHtcbiAgICAgIGN1cnJlbnQueSAtPSB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50LnggKz0geCAqIHRleHRIU2NhbGU7XG4gICAgfVxuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgdGhpcy5jb21wb3NlKCk7XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgc2hvd1R5cGUzVGV4dChnbHlwaHMpIHtcbiAgICAvLyBUeXBlMyBmb250cyAtIGVhY2ggZ2x5cGggaXMgYSBcIm1pbmktUERGXCJcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGZvbnQgPSBjdXJyZW50LmZvbnQ7XG4gICAgY29uc3QgZm9udFNpemUgPSBjdXJyZW50LmZvbnRTaXplO1xuICAgIGNvbnN0IGZvbnREaXJlY3Rpb24gPSBjdXJyZW50LmZvbnREaXJlY3Rpb247XG4gICAgY29uc3Qgc3BhY2luZ0RpciA9IGZvbnQudmVydGljYWwgPyAxIDogLTE7XG4gICAgY29uc3QgY2hhclNwYWNpbmcgPSBjdXJyZW50LmNoYXJTcGFjaW5nO1xuICAgIGNvbnN0IHdvcmRTcGFjaW5nID0gY3VycmVudC53b3JkU3BhY2luZztcbiAgICBjb25zdCB0ZXh0SFNjYWxlID0gY3VycmVudC50ZXh0SFNjYWxlICogZm9udERpcmVjdGlvbjtcbiAgICBjb25zdCBmb250TWF0cml4ID0gY3VycmVudC5mb250TWF0cml4IHx8IEZPTlRfSURFTlRJVFlfTUFUUklYO1xuICAgIGNvbnN0IGdseXBoc0xlbmd0aCA9IGdseXBocy5sZW5ndGg7XG4gICAgY29uc3QgaXNUZXh0SW52aXNpYmxlID1cbiAgICAgIGN1cnJlbnQudGV4dFJlbmRlcmluZ01vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLklOVklTSUJMRTtcbiAgICBsZXQgaSwgZ2x5cGgsIHdpZHRoLCBzcGFjaW5nTGVuZ3RoO1xuXG4gICAgaWYgKGlzVGV4dEludmlzaWJsZSB8fCBmb250U2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nWzBdID0gLTE7XG4gICAgdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCA9IG51bGw7XG5cbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC50cmFuc2Zvcm0oLi4uY3VycmVudC50ZXh0TWF0cml4KTtcbiAgICBjdHgudHJhbnNsYXRlKGN1cnJlbnQueCwgY3VycmVudC55ICsgY3VycmVudC50ZXh0UmlzZSk7XG5cbiAgICBjdHguc2NhbGUodGV4dEhTY2FsZSwgZm9udERpcmVjdGlvbik7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZ2x5cGhzTGVuZ3RoOyArK2kpIHtcbiAgICAgIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBnbHlwaCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBzcGFjaW5nTGVuZ3RoID0gKHNwYWNpbmdEaXIgKiBnbHlwaCAqIGZvbnRTaXplKSAvIDEwMDA7XG4gICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZShzcGFjaW5nTGVuZ3RoLCAwKTtcbiAgICAgICAgY3VycmVudC54ICs9IHNwYWNpbmdMZW5ndGggKiB0ZXh0SFNjYWxlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3BhY2luZyA9IChnbHlwaC5pc1NwYWNlID8gd29yZFNwYWNpbmcgOiAwKSArIGNoYXJTcGFjaW5nO1xuICAgICAgY29uc3Qgb3BlcmF0b3JMaXN0ID0gZm9udC5jaGFyUHJvY09wZXJhdG9yTGlzdFtnbHlwaC5vcGVyYXRvckxpc3RJZF07XG4gICAgICBpZiAoIW9wZXJhdG9yTGlzdCkge1xuICAgICAgICB3YXJuKGBUeXBlMyBjaGFyYWN0ZXIgXCIke2dseXBoLm9wZXJhdG9yTGlzdElkfVwiIGlzIG5vdCBhdmFpbGFibGUuYCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzaW5nVHlwZTMgPSBnbHlwaDtcbiAgICAgICAgdGhpcy5zYXZlKCk7XG4gICAgICAgIGN0eC5zY2FsZShmb250U2l6ZSwgZm9udFNpemUpO1xuICAgICAgICBjdHgudHJhbnNmb3JtKC4uLmZvbnRNYXRyaXgpO1xuICAgICAgICB0aGlzLmV4ZWN1dGVPcGVyYXRvckxpc3Qob3BlcmF0b3JMaXN0KTtcbiAgICAgICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gVXRpbC5hcHBseVRyYW5zZm9ybShbZ2x5cGgud2lkdGgsIDBdLCBmb250TWF0cml4KTtcbiAgICAgIHdpZHRoID0gdHJhbnNmb3JtZWRbMF0gKiBmb250U2l6ZSArIHNwYWNpbmc7XG5cbiAgICAgIGN0eC50cmFuc2xhdGUod2lkdGgsIDApO1xuICAgICAgY3VycmVudC54ICs9IHdpZHRoICogdGV4dEhTY2FsZTtcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICB0aGlzLnByb2Nlc3NpbmdUeXBlMyA9IG51bGw7XG4gIH1cblxuICAvLyBUeXBlMyBmb250c1xuICBzZXRDaGFyV2lkdGgoeFdpZHRoLCB5V2lkdGgpIHtcbiAgICAvLyBXZSBjYW4gc2FmZWx5IGlnbm9yZSB0aGlzIHNpbmNlIHRoZSB3aWR0aCBzaG91bGQgYmUgdGhlIHNhbWVcbiAgICAvLyBhcyB0aGUgd2lkdGggaW4gdGhlIFdpZHRocyBhcnJheS5cbiAgfVxuXG4gIHNldENoYXJXaWR0aEFuZEJvdW5kcyh4V2lkdGgsIHlXaWR0aCwgbGx4LCBsbHksIHVyeCwgdXJ5KSB7XG4gICAgdGhpcy5jdHgucmVjdChsbHgsIGxseSwgdXJ4IC0gbGx4LCB1cnkgLSBsbHkpO1xuICAgIHRoaXMuY3R4LmNsaXAoKTtcbiAgICB0aGlzLmVuZFBhdGgoKTtcbiAgfVxuXG4gIC8vIENvbG9yXG4gIGdldENvbG9yTl9QYXR0ZXJuKElSKSB7XG4gICAgbGV0IHBhdHRlcm47XG4gICAgaWYgKElSWzBdID09PSBcIlRpbGluZ1BhdHRlcm5cIikge1xuICAgICAgY29uc3QgYmFzZVRyYW5zZm9ybSA9IHRoaXMuYmFzZVRyYW5zZm9ybSB8fCBnZXRDdXJyZW50VHJhbnNmb3JtKHRoaXMuY3R4KTtcbiAgICAgIGNvbnN0IGNhbnZhc0dyYXBoaWNzRmFjdG9yeSA9IHtcbiAgICAgICAgY3JlYXRlQ2FudmFzR3JhcGhpY3M6IGN0eCA9PlxuICAgICAgICAgIG5ldyBDYW52YXNHcmFwaGljcyhcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIHRoaXMuY29tbW9uT2JqcyxcbiAgICAgICAgICAgIHRoaXMub2JqcyxcbiAgICAgICAgICAgIHRoaXMuY2FudmFzRmFjdG9yeSxcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRmFjdG9yeSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgb3B0aW9uYWxDb250ZW50Q29uZmlnOiB0aGlzLm9wdGlvbmFsQ29udGVudENvbmZpZyxcbiAgICAgICAgICAgICAgbWFya2VkQ29udGVudFN0YWNrOiB0aGlzLm1hcmtlZENvbnRlbnRTdGFjayxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApLFxuICAgICAgfTtcbiAgICAgIHBhdHRlcm4gPSBuZXcgVGlsaW5nUGF0dGVybihcbiAgICAgICAgSVIsXG4gICAgICAgIHRoaXMuY3R4LFxuICAgICAgICBjYW52YXNHcmFwaGljc0ZhY3RvcnksXG4gICAgICAgIGJhc2VUcmFuc2Zvcm1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdHRlcm4gPSB0aGlzLl9nZXRQYXR0ZXJuKElSWzFdLCBJUlsyXSk7XG4gICAgfVxuICAgIHJldHVybiBwYXR0ZXJuO1xuICB9XG5cbiAgc2V0U3Ryb2tlQ29sb3JOKCkge1xuICAgIHRoaXMuY3VycmVudC5zdHJva2VDb2xvciA9IHRoaXMuZ2V0Q29sb3JOX1BhdHRlcm4oYXJndW1lbnRzKTtcbiAgICB0aGlzLmN1cnJlbnQucGF0dGVyblN0cm9rZSA9IHRydWU7XG4gIH1cblxuICBzZXRGaWxsQ29sb3JOKCkge1xuICAgIHRoaXMuY3VycmVudC5maWxsQ29sb3IgPSB0aGlzLmdldENvbG9yTl9QYXR0ZXJuKGFyZ3VtZW50cyk7XG4gICAgdGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsID0gdHJ1ZTtcbiAgfVxuXG4gIHNldFN0cm9rZVJHQkNvbG9yKHIsIGcsIGIpIHtcbiAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY3VycmVudC5zdHJva2VDb2xvciA9IFV0aWwubWFrZUhleENvbG9yKFxuICAgICAgcixcbiAgICAgIGcsXG4gICAgICBiXG4gICAgKTtcbiAgICB0aGlzLmN1cnJlbnQucGF0dGVyblN0cm9rZSA9IGZhbHNlO1xuICB9XG5cbiAgc2V0U3Ryb2tlVHJhbnNwYXJlbnQoKSB7XG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XG4gICAgdGhpcy5jdXJyZW50LnBhdHRlcm5TdHJva2UgPSBmYWxzZTtcbiAgfVxuXG4gIHNldEZpbGxSR0JDb2xvcihyLCBnLCBiKSB7XG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5jdXJyZW50LmZpbGxDb2xvciA9IFV0aWwubWFrZUhleENvbG9yKHIsIGcsIGIpO1xuICAgIHRoaXMuY3VycmVudC5wYXR0ZXJuRmlsbCA9IGZhbHNlO1xuICB9XG5cbiAgc2V0RmlsbFRyYW5zcGFyZW50KCkge1xuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY3VycmVudC5maWxsQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XG4gICAgdGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsID0gZmFsc2U7XG4gIH1cblxuICBfZ2V0UGF0dGVybihvYmpJZCwgbWF0cml4ID0gbnVsbCkge1xuICAgIGxldCBwYXR0ZXJuO1xuICAgIGlmICh0aGlzLmNhY2hlZFBhdHRlcm5zLmhhcyhvYmpJZCkpIHtcbiAgICAgIHBhdHRlcm4gPSB0aGlzLmNhY2hlZFBhdHRlcm5zLmdldChvYmpJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdHRlcm4gPSBnZXRTaGFkaW5nUGF0dGVybih0aGlzLmdldE9iamVjdChvYmpJZCkpO1xuICAgICAgdGhpcy5jYWNoZWRQYXR0ZXJucy5zZXQob2JqSWQsIHBhdHRlcm4pO1xuICAgIH1cbiAgICBpZiAobWF0cml4KSB7XG4gICAgICBwYXR0ZXJuLm1hdHJpeCA9IG1hdHJpeDtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG4gIH1cblxuICBzaGFkaW5nRmlsbChvYmpJZCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcblxuICAgIHRoaXMuc2F2ZSgpO1xuICAgIGNvbnN0IHBhdHRlcm4gPSB0aGlzLl9nZXRQYXR0ZXJuKG9iaklkKTtcbiAgICBjdHguZmlsbFN0eWxlID0gcGF0dGVybi5nZXRQYXR0ZXJuKFxuICAgICAgY3R4LFxuICAgICAgdGhpcyxcbiAgICAgIGdldEN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKGN0eCksXG4gICAgICBQYXRoVHlwZS5TSEFESU5HXG4gICAgKTtcblxuICAgIGNvbnN0IGludiA9IGdldEN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKGN0eCk7XG4gICAgaWYgKGludikge1xuICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBjdHguY2FudmFzO1xuICAgICAgY29uc3QgW3gwLCB5MCwgeDEsIHkxXSA9IFV0aWwuZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3goXG4gICAgICAgIFswLCAwLCB3aWR0aCwgaGVpZ2h0XSxcbiAgICAgICAgaW52XG4gICAgICApO1xuXG4gICAgICB0aGlzLmN0eC5maWxsUmVjdCh4MCwgeTAsIHgxIC0geDAsIHkxIC0geTApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBIQUNLIHRvIGRyYXcgdGhlIGdyYWRpZW50IG9udG8gYW4gaW5maW5pdGUgcmVjdGFuZ2xlLlxuICAgICAgLy8gUERGIGdyYWRpZW50cyBhcmUgZHJhd24gYWNyb3NzIHRoZSBlbnRpcmUgaW1hZ2Ugd2hpbGVcbiAgICAgIC8vIENhbnZhcyBvbmx5IGFsbG93cyBncmFkaWVudHMgdG8gYmUgZHJhd24gaW4gYSByZWN0YW5nbGVcbiAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYnVnIHNob3VsZCBhbGxvdyB1cyB0byByZW1vdmUgdGhpcy5cbiAgICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY2NDg4NFxuXG4gICAgICB0aGlzLmN0eC5maWxsUmVjdCgtMWUxMCwgLTFlMTAsIDJlMTAsIDJlMTApO1xuICAgIH1cblxuICAgIHRoaXMuY29tcG9zZSh0aGlzLmN1cnJlbnQuZ2V0Q2xpcHBlZFBhdGhCb3VuZGluZ0JveCgpKTtcbiAgICB0aGlzLnJlc3RvcmUoKTtcbiAgfVxuXG4gIC8vIEltYWdlc1xuICBiZWdpbklubGluZUltYWdlKCkge1xuICAgIHVucmVhY2hhYmxlKFwiU2hvdWxkIG5vdCBjYWxsIGJlZ2luSW5saW5lSW1hZ2VcIik7XG4gIH1cblxuICBiZWdpbkltYWdlRGF0YSgpIHtcbiAgICB1bnJlYWNoYWJsZShcIlNob3VsZCBub3QgY2FsbCBiZWdpbkltYWdlRGF0YVwiKTtcbiAgfVxuXG4gIHBhaW50Rm9ybVhPYmplY3RCZWdpbihtYXRyaXgsIGJib3gpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zYXZlKCk7XG4gICAgdGhpcy5iYXNlVHJhbnNmb3JtU3RhY2sucHVzaCh0aGlzLmJhc2VUcmFuc2Zvcm0pO1xuXG4gICAgaWYgKG1hdHJpeCkge1xuICAgICAgdGhpcy50cmFuc2Zvcm0oLi4ubWF0cml4KTtcbiAgICB9XG4gICAgdGhpcy5iYXNlVHJhbnNmb3JtID0gZ2V0Q3VycmVudFRyYW5zZm9ybSh0aGlzLmN0eCk7XG5cbiAgICBpZiAoYmJveCkge1xuICAgICAgY29uc3Qgd2lkdGggPSBiYm94WzJdIC0gYmJveFswXTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGJib3hbM10gLSBiYm94WzFdO1xuICAgICAgdGhpcy5jdHgucmVjdChiYm94WzBdLCBiYm94WzFdLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIHRoaXMuY3VycmVudC51cGRhdGVSZWN0TWluTWF4KGdldEN1cnJlbnRUcmFuc2Zvcm0odGhpcy5jdHgpLCBiYm94KTtcbiAgICAgIHRoaXMuY2xpcCgpO1xuICAgICAgdGhpcy5lbmRQYXRoKCk7XG4gICAgfVxuICB9XG5cbiAgcGFpbnRGb3JtWE9iamVjdEVuZCgpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgdGhpcy5iYXNlVHJhbnNmb3JtID0gdGhpcy5iYXNlVHJhbnNmb3JtU3RhY2sucG9wKCk7XG4gIH1cblxuICBiZWdpbkdyb3VwKGdyb3VwKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zYXZlKCk7XG4gICAgLy8gSWYgdGhlcmUncyBhbiBhY3RpdmUgc29mdCBtYXNrIHdlIGRvbid0IHdhbnQgaXQgZW5hYmxlZCBmb3IgdGhlIGdyb3VwLCBzb1xuICAgIC8vIGNsZWFyIGl0IG91dC4gVGhlIG1hc2sgYW5kIHN1c3BlbmRlZCBjYW52YXMgd2lsbCBiZSByZXN0b3JlZCBpbiBlbmRHcm91cC5cbiAgICBpZiAodGhpcy5pblNNYXNrTW9kZSkge1xuICAgICAgdGhpcy5lbmRTTWFza01vZGUoKTtcbiAgICAgIHRoaXMuY3VycmVudC5hY3RpdmVTTWFzayA9IG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudEN0eCA9IHRoaXMuY3R4O1xuICAgIC8vIFRPRE8gbm9uLWlzb2xhdGVkIGdyb3VwcyAtIGFjY29yZGluZyB0byBSaWsgYXQgYWRvYmUgbm9uLWlzb2xhdGVkXG4gICAgLy8gZ3JvdXAgcmVzdWx0cyBhcmVuJ3QgdXN1YWxseSB0aGF0IGRpZmZlcmVudCBhbmQgdGhleSBldmVuIGhhdmUgdG9vbHNcbiAgICAvLyB0aGF0IGlnbm9yZSB0aGlzIHNldHRpbmcuIE5vdGVzIGZyb20gUmlrIG9uIGltcGxlbWVudGluZzpcbiAgICAvLyAtIFdoZW4geW91IGVuY291bnRlciBhbiB0cmFuc3BhcmVuY3kgZ3JvdXAsIGNyZWF0ZSBhIG5ldyBjYW52YXMgd2l0aFxuICAgIC8vIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBiYm94XG4gICAgLy8gLSBjb3B5IHRoZSBjb250ZW50IGZyb20gdGhlIHByZXZpb3VzIGNhbnZhcyB0byB0aGUgbmV3IGNhbnZhc1xuICAgIC8vIC0gZHJhdyBhcyB1c3VhbFxuICAgIC8vIC0gcmVtb3ZlIHRoZSBiYWNrZHJvcCBhbHBoYTpcbiAgICAvLyBhbHBoYU5ldyA9IDEgLSAoMSAtIGFscGhhKS8oMSAtIGFscGhhQmFja2Ryb3ApIHdpdGggJ2FscGhhJyB0aGUgYWxwaGFcbiAgICAvLyB2YWx1ZSBvZiB5b3VyIHRyYW5zcGFyZW5jeSBncm91cCBhbmQgJ2FscGhhQmFja2Ryb3AnIHRoZSBhbHBoYSBvZiB0aGVcbiAgICAvLyBiYWNrZHJvcFxuICAgIC8vIC0gcmVtb3ZlIGJhY2tncm91bmQgY29sb3I6XG4gICAgLy8gY29sb3JOZXcgPSBjb2xvciAtIGFscGhhTmV3ICpjb2xvckJhY2tkcm9wIC8oMSAtIGFscGhhTmV3KVxuICAgIGlmICghZ3JvdXAuaXNvbGF0ZWQpIHtcbiAgICAgIGluZm8oXCJUT0RPOiBTdXBwb3J0IG5vbi1pc29sYXRlZCBncm91cHMuXCIpO1xuICAgIH1cblxuICAgIC8vIFRPRE8ga25vY2tvdXQgLSBzdXBwb3NlZGx5IHBvc3NpYmxlIHdpdGggdGhlIGNsZXZlciB1c2Ugb2YgY29tcG9zaXRpbmdcbiAgICAvLyBtb2Rlcy5cbiAgICBpZiAoZ3JvdXAua25vY2tvdXQpIHtcbiAgICAgIHdhcm4oXCJLbm9ja291dCBncm91cHMgbm90IHN1cHBvcnRlZC5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFRyYW5zZm9ybSA9IGdldEN1cnJlbnRUcmFuc2Zvcm0oY3VycmVudEN0eCk7XG4gICAgaWYgKGdyb3VwLm1hdHJpeCkge1xuICAgICAgY3VycmVudEN0eC50cmFuc2Zvcm0oLi4uZ3JvdXAubWF0cml4KTtcbiAgICB9XG4gICAgaWYgKCFncm91cC5iYm94KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCb3VuZGluZyBib3ggaXMgcmVxdWlyZWQuXCIpO1xuICAgIH1cblxuICAgIC8vIEJhc2VkIG9uIHRoZSBjdXJyZW50IHRyYW5zZm9ybSBmaWd1cmUgb3V0IGhvdyBiaWcgdGhlIGJvdW5kaW5nIGJveFxuICAgIC8vIHdpbGwgYWN0dWFsbHkgYmUuXG4gICAgbGV0IGJvdW5kcyA9IFV0aWwuZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3goXG4gICAgICBncm91cC5iYm94LFxuICAgICAgZ2V0Q3VycmVudFRyYW5zZm9ybShjdXJyZW50Q3R4KVxuICAgICk7XG4gICAgLy8gQ2xpcCB0aGUgYm91bmRpbmcgYm94IHRvIHRoZSBjdXJyZW50IGNhbnZhcy5cbiAgICBjb25zdCBjYW52YXNCb3VuZHMgPSBbXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIGN1cnJlbnRDdHguY2FudmFzLndpZHRoLFxuICAgICAgY3VycmVudEN0eC5jYW52YXMuaGVpZ2h0LFxuICAgIF07XG4gICAgYm91bmRzID0gVXRpbC5pbnRlcnNlY3QoYm91bmRzLCBjYW52YXNCb3VuZHMpIHx8IFswLCAwLCAwLCAwXTtcbiAgICAvLyBVc2UgY2VpbCBpbiBjYXNlIHdlJ3JlIGJldHdlZW4gc2l6ZXMgc28gd2UgZG9uJ3QgY3JlYXRlIGNhbnZhcyB0aGF0IGlzXG4gICAgLy8gdG9vIHNtYWxsIGFuZCBtYWtlIHRoZSBjYW52YXMgYXQgbGVhc3QgMXgxIHBpeGVscy5cbiAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5mbG9vcihib3VuZHNbMF0pO1xuICAgIGNvbnN0IG9mZnNldFkgPSBNYXRoLmZsb29yKGJvdW5kc1sxXSk7XG4gICAgY29uc3QgZHJhd25XaWR0aCA9IE1hdGgubWF4KE1hdGguY2VpbChib3VuZHNbMl0pIC0gb2Zmc2V0WCwgMSk7XG4gICAgY29uc3QgZHJhd25IZWlnaHQgPSBNYXRoLm1heChNYXRoLmNlaWwoYm91bmRzWzNdKSAtIG9mZnNldFksIDEpO1xuXG4gICAgdGhpcy5jdXJyZW50LnN0YXJ0TmV3UGF0aEFuZENsaXBCb3goWzAsIDAsIGRyYXduV2lkdGgsIGRyYXduSGVpZ2h0XSk7XG5cbiAgICBsZXQgY2FjaGVJZCA9IFwiZ3JvdXBBdFwiICsgdGhpcy5ncm91cExldmVsO1xuICAgIGlmIChncm91cC5zbWFzaykge1xuICAgICAgLy8gVXNpbmcgdHdvIGNhY2hlIGVudHJpZXMgaXMgY2FzZSBpZiBtYXNrcyBhcmUgdXNlZCBvbmUgYWZ0ZXIgYW5vdGhlci5cbiAgICAgIGNhY2hlSWQgKz0gXCJfc21hc2tfXCIgKyAodGhpcy5zbWFza0NvdW50ZXIrKyAlIDIpO1xuICAgIH1cbiAgICBjb25zdCBzY3JhdGNoQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBjYWNoZUlkLFxuICAgICAgZHJhd25XaWR0aCxcbiAgICAgIGRyYXduSGVpZ2h0XG4gICAgKTtcbiAgICBjb25zdCBncm91cEN0eCA9IHNjcmF0Y2hDYW52YXMuY29udGV4dDtcblxuICAgIC8vIFNpbmNlIHdlIGNyZWF0ZWQgYSBuZXcgY2FudmFzIHRoYXQgaXMganVzdCB0aGUgc2l6ZSBvZiB0aGUgYm91bmRpbmcgYm94XG4gICAgLy8gd2UgaGF2ZSB0byB0cmFuc2xhdGUgdGhlIGdyb3VwIGN0eC5cbiAgICBncm91cEN0eC50cmFuc2xhdGUoLW9mZnNldFgsIC1vZmZzZXRZKTtcbiAgICBncm91cEN0eC50cmFuc2Zvcm0oLi4uY3VycmVudFRyYW5zZm9ybSk7XG5cbiAgICAvLyBBcHBseSB0aGUgYmJveCB0byB0aGUgZ3JvdXAgY29udGV4dC5cbiAgICBsZXQgY2xpcCA9IG5ldyBQYXRoMkQoKTtcbiAgICBjb25zdCBbeDAsIHkwLCB4MSwgeTFdID0gZ3JvdXAuYmJveDtcbiAgICBjbGlwLnJlY3QoeDAsIHkwLCB4MSAtIHgwLCB5MSAtIHkwKTtcbiAgICBpZiAoZ3JvdXAubWF0cml4KSB7XG4gICAgICBjb25zdCBwYXRoID0gbmV3IFBhdGgyRCgpO1xuICAgICAgcGF0aC5hZGRQYXRoKGNsaXAsIG5ldyBET01NYXRyaXgoZ3JvdXAubWF0cml4KSk7XG4gICAgICBjbGlwID0gcGF0aDtcbiAgICB9XG4gICAgZ3JvdXBDdHguY2xpcChjbGlwKTtcblxuICAgIGlmIChncm91cC5zbWFzaykge1xuICAgICAgLy8gU2F2aW5nIHN0YXRlIGFuZCBjYWNoZWQgbWFzayB0byBiZSB1c2VkIGluIHNldEdTdGF0ZS5cbiAgICAgIHRoaXMuc21hc2tTdGFjay5wdXNoKHtcbiAgICAgICAgY2FudmFzOiBzY3JhdGNoQ2FudmFzLmNhbnZhcyxcbiAgICAgICAgY29udGV4dDogZ3JvdXBDdHgsXG4gICAgICAgIG9mZnNldFgsXG4gICAgICAgIG9mZnNldFksXG4gICAgICAgIHN1YnR5cGU6IGdyb3VwLnNtYXNrLnN1YnR5cGUsXG4gICAgICAgIGJhY2tkcm9wOiBncm91cC5zbWFzay5iYWNrZHJvcCxcbiAgICAgICAgdHJhbnNmZXJNYXA6IGdyb3VwLnNtYXNrLnRyYW5zZmVyTWFwIHx8IG51bGwsXG4gICAgICAgIHN0YXJ0VHJhbnNmb3JtSW52ZXJzZTogbnVsbCwgLy8gdXNlZCBkdXJpbmcgc3VzcGVuZCBvcGVyYXRpb25cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZXR1cCB0aGUgY3VycmVudCBjdHggc28gd2hlbiB0aGUgZ3JvdXAgaXMgcG9wcGVkIHdlIGRyYXcgaXQgYXQgdGhlXG4gICAgICAvLyByaWdodCBsb2NhdGlvbi5cbiAgICAgIGN1cnJlbnRDdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgICAgY3VycmVudEN0eC50cmFuc2xhdGUob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICBjdXJyZW50Q3R4LnNhdmUoKTtcbiAgICB9XG4gICAgLy8gVGhlIHRyYW5zcGFyZW5jeSBncm91cCBpbmhlcml0cyBhbGwgb2ZmIHRoZSBjdXJyZW50IGdyYXBoaWNzIHN0YXRlXG4gICAgLy8gZXhjZXB0IHRoZSBibGVuZCBtb2RlLCBzb2Z0IG1hc2ssIGFuZCBhbHBoYSBjb25zdGFudHMuXG4gICAgY29weUN0eFN0YXRlKGN1cnJlbnRDdHgsIGdyb3VwQ3R4KTtcbiAgICB0aGlzLmN0eCA9IGdyb3VwQ3R4O1xuICAgIHRoaXMuc2V0R1N0YXRlKFtcbiAgICAgIFtcIkJNXCIsIFwic291cmNlLW92ZXJcIl0sXG4gICAgICBbXCJjYVwiLCAxXSxcbiAgICAgIFtcIkNBXCIsIDFdLFxuICAgIF0pO1xuICAgIHRoaXMuZ3JvdXBTdGFjay5wdXNoKGN1cnJlbnRDdHgpO1xuICAgIHRoaXMuZ3JvdXBMZXZlbCsrO1xuICB9XG5cbiAgZW5kR3JvdXAoZ3JvdXApIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5ncm91cExldmVsLS07XG4gICAgY29uc3QgZ3JvdXBDdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjdHggPSB0aGlzLmdyb3VwU3RhY2sucG9wKCk7XG4gICAgdGhpcy5jdHggPSBjdHg7XG4gICAgLy8gVHVybiBvZmYgaW1hZ2Ugc21vb3RoaW5nIHRvIGF2b2lkIHN1YiBwaXhlbCBpbnRlcnBvbGF0aW9uIHdoaWNoIGNhblxuICAgIC8vIGxvb2sga2luZCBvZiBibHVycnkgZm9yIHNvbWUgcGRmcy5cbiAgICB0aGlzLmN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcblxuICAgIGlmIChncm91cC5zbWFzaykge1xuICAgICAgdGhpcy50ZW1wU01hc2sgPSB0aGlzLnNtYXNrU3RhY2sucG9wKCk7XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgY29uc3QgY3VycmVudE10eCA9IGdldEN1cnJlbnRUcmFuc2Zvcm0odGhpcy5jdHgpO1xuICAgICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgICB0aGlzLmN0eC5zZXRUcmFuc2Zvcm0oLi4uY3VycmVudE10eCk7XG4gICAgICBjb25zdCBkaXJ0eUJveCA9IFV0aWwuZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3goXG4gICAgICAgIFswLCAwLCBncm91cEN0eC5jYW52YXMud2lkdGgsIGdyb3VwQ3R4LmNhbnZhcy5oZWlnaHRdLFxuICAgICAgICBjdXJyZW50TXR4XG4gICAgICApO1xuICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKGdyb3VwQ3R4LmNhbnZhcywgMCwgMCk7XG4gICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICB0aGlzLmNvbXBvc2UoZGlydHlCb3gpO1xuICAgIH1cbiAgfVxuXG4gIGJlZ2luQW5ub3RhdGlvbihpZCwgcmVjdCwgdHJhbnNmb3JtLCBtYXRyaXgsIGhhc093bkNhbnZhcykge1xuICAgIC8vIFRoZSBhbm5vdGF0aW9ucyBhcmUgZHJhd24ganVzdCBhZnRlciB0aGUgcGFnZSBjb250ZW50LlxuICAgIC8vIFRoZSBwYWdlIGNvbnRlbnQgZHJhd2luZyBjYW4gcG90ZW50aWFsbHkgaGF2ZSBzZXQgYSB0cmFuc2Zvcm0sXG4gICAgLy8gYSBjbGlwcGluZyBwYXRoLCB3aGF0ZXZlci4uLlxuICAgIC8vIFNvIGluIG9yZGVyIHRvIGhhdmUgc29tZXRoaW5nIGNsZWFuLCB3ZSByZXN0b3JlIHRoZSBpbml0aWFsIHN0YXRlLlxuICAgIHRoaXMuI3Jlc3RvcmVJbml0aWFsU3RhdGUoKTtcbiAgICByZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCk7XG5cbiAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgdGhpcy5zYXZlKCk7XG5cbiAgICBpZiAodGhpcy5iYXNlVHJhbnNmb3JtKSB7XG4gICAgICB0aGlzLmN0eC5zZXRUcmFuc2Zvcm0oLi4udGhpcy5iYXNlVHJhbnNmb3JtKTtcbiAgICB9XG5cbiAgICBpZiAocmVjdCkge1xuICAgICAgY29uc3Qgd2lkdGggPSByZWN0WzJdIC0gcmVjdFswXTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHJlY3RbM10gLSByZWN0WzFdO1xuXG4gICAgICBpZiAoaGFzT3duQ2FudmFzICYmIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcCkge1xuICAgICAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0uc2xpY2UoKTtcbiAgICAgICAgdHJhbnNmb3JtWzRdIC09IHJlY3RbMF07XG4gICAgICAgIHRyYW5zZm9ybVs1XSAtPSByZWN0WzFdO1xuXG4gICAgICAgIHJlY3QgPSByZWN0LnNsaWNlKCk7XG4gICAgICAgIHJlY3RbMF0gPSByZWN0WzFdID0gMDtcbiAgICAgICAgcmVjdFsyXSA9IHdpZHRoO1xuICAgICAgICByZWN0WzNdID0gaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IFtzY2FsZVgsIHNjYWxlWV0gPSBVdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKFxuICAgICAgICAgIGdldEN1cnJlbnRUcmFuc2Zvcm0odGhpcy5jdHgpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgdmlld3BvcnRTY2FsZSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgY2FudmFzV2lkdGggPSBNYXRoLmNlaWwoXG4gICAgICAgICAgd2lkdGggKiB0aGlzLm91dHB1dFNjYWxlWCAqIHZpZXdwb3J0U2NhbGVcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgY2FudmFzSGVpZ2h0ID0gTWF0aC5jZWlsKFxuICAgICAgICAgIGhlaWdodCAqIHRoaXMub3V0cHV0U2NhbGVZICogdmlld3BvcnRTY2FsZVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhcyA9IHRoaXMuY2FudmFzRmFjdG9yeS5jcmVhdGUoXG4gICAgICAgICAgY2FudmFzV2lkdGgsXG4gICAgICAgICAgY2FudmFzSGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgY2FudmFzLCBjb250ZXh0IH0gPSB0aGlzLmFubm90YXRpb25DYW52YXM7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcC5zZXQoaWQsIGNhbnZhcyk7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhcy5zYXZlZEN0eCA9IHRoaXMuY3R4O1xuICAgICAgICB0aGlzLmN0eCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgdGhpcy5jdHguc2V0VHJhbnNmb3JtKHNjYWxlWCwgMCwgMCwgLXNjYWxlWSwgMCwgaGVpZ2h0ICogc2NhbGVZKTtcblxuICAgICAgICByZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCk7XG5cbiAgICAgICAgLy8gQ29uc3VtZSBhIHBvdGVudGlhbCBwYXRoIGJlZm9yZSBjbGlwcGluZy5cbiAgICAgICAgdGhpcy5lbmRQYXRoKCk7XG5cbiAgICAgICAgdGhpcy5jdHgucmVjdChyZWN0WzBdLCByZWN0WzFdLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5jdHguY2xpcCgpO1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnQgPSBuZXcgQ2FudmFzRXh0cmFTdGF0ZShcbiAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCxcbiAgICAgIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHRcbiAgICApO1xuXG4gICAgdGhpcy50cmFuc2Zvcm0oLi4udHJhbnNmb3JtKTtcbiAgICB0aGlzLnRyYW5zZm9ybSguLi5tYXRyaXgpO1xuICB9XG5cbiAgZW5kQW5ub3RhdGlvbigpIHtcbiAgICBpZiAodGhpcy5hbm5vdGF0aW9uQ2FudmFzKSB7XG4gICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICB0aGlzLiNkcmF3RmlsdGVyKCk7XG5cbiAgICAgIHRoaXMuY3R4ID0gdGhpcy5hbm5vdGF0aW9uQ2FudmFzLnNhdmVkQ3R4O1xuICAgICAgZGVsZXRlIHRoaXMuYW5ub3RhdGlvbkNhbnZhcy5zYXZlZEN0eDtcbiAgICAgIGRlbGV0ZSB0aGlzLmFubm90YXRpb25DYW52YXM7XG4gICAgfVxuICB9XG5cbiAgcGFpbnRJbWFnZU1hc2tYT2JqZWN0KGltZykge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb3VudCA9IGltZy5jb3VudDtcbiAgICBpbWcgPSB0aGlzLmdldE9iamVjdChpbWcuZGF0YSwgaW1nKTtcbiAgICBpbWcuY291bnQgPSBjb3VudDtcblxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGdseXBoID0gdGhpcy5wcm9jZXNzaW5nVHlwZTM7XG5cbiAgICBpZiAoZ2x5cGgpIHtcbiAgICAgIGlmIChnbHlwaC5jb21waWxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGdseXBoLmNvbXBpbGVkID0gY29tcGlsZVR5cGUzR2x5cGgoaW1nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdseXBoLmNvbXBpbGVkKSB7XG4gICAgICAgIGN0eC5maWxsKGdseXBoLmNvbXBpbGVkKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBtYXNrID0gdGhpcy5fY3JlYXRlTWFza0NhbnZhcyhpbWcpO1xuICAgIGNvbnN0IG1hc2tDYW52YXMgPSBtYXNrLmNhbnZhcztcblxuICAgIGN0eC5zYXZlKCk7XG4gICAgLy8gVGhlIG1hc2sgaXMgZHJhd24gd2l0aCB0aGUgdHJhbnNmb3JtIGFwcGxpZWQuIFJlc2V0IHRoZSBjdXJyZW50XG4gICAgLy8gdHJhbnNmb3JtIHRvIGRyYXcgdG8gdGhlIGlkZW50aXR5LlxuICAgIGN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgY3R4LmRyYXdJbWFnZShtYXNrQ2FudmFzLCBtYXNrLm9mZnNldFgsIG1hc2sub2Zmc2V0WSk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICB0aGlzLmNvbXBvc2UoKTtcbiAgfVxuXG4gIHBhaW50SW1hZ2VNYXNrWE9iamVjdFJlcGVhdChcbiAgICBpbWcsXG4gICAgc2NhbGVYLFxuICAgIHNrZXdYID0gMCxcbiAgICBza2V3WSA9IDAsXG4gICAgc2NhbGVZLFxuICAgIHBvc2l0aW9uc1xuICApIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbWcgPSB0aGlzLmdldE9iamVjdChpbWcuZGF0YSwgaW1nKTtcblxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY29uc3QgY3VycmVudFRyYW5zZm9ybSA9IGdldEN1cnJlbnRUcmFuc2Zvcm0oY3R4KTtcbiAgICBjdHgudHJhbnNmb3JtKHNjYWxlWCwgc2tld1gsIHNrZXdZLCBzY2FsZVksIDAsIDApO1xuICAgIGNvbnN0IG1hc2sgPSB0aGlzLl9jcmVhdGVNYXNrQ2FudmFzKGltZyk7XG5cbiAgICBjdHguc2V0VHJhbnNmb3JtKFxuICAgICAgMSxcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgMSxcbiAgICAgIG1hc2sub2Zmc2V0WCAtIGN1cnJlbnRUcmFuc2Zvcm1bNF0sXG4gICAgICBtYXNrLm9mZnNldFkgLSBjdXJyZW50VHJhbnNmb3JtWzVdXG4gICAgKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwb3NpdGlvbnMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgY29uc3QgdHJhbnMgPSBVdGlsLnRyYW5zZm9ybShjdXJyZW50VHJhbnNmb3JtLCBbXG4gICAgICAgIHNjYWxlWCxcbiAgICAgICAgc2tld1gsXG4gICAgICAgIHNrZXdZLFxuICAgICAgICBzY2FsZVksXG4gICAgICAgIHBvc2l0aW9uc1tpXSxcbiAgICAgICAgcG9zaXRpb25zW2kgKyAxXSxcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCBbeCwgeV0gPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFswLCAwXSwgdHJhbnMpO1xuICAgICAgY3R4LmRyYXdJbWFnZShtYXNrLmNhbnZhcywgeCwgeSk7XG4gICAgfVxuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgdGhpcy5jb21wb3NlKCk7XG4gIH1cblxuICBwYWludEltYWdlTWFza1hPYmplY3RHcm91cChpbWFnZXMpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG5cbiAgICBjb25zdCBmaWxsQ29sb3IgPSB0aGlzLmN1cnJlbnQuZmlsbENvbG9yO1xuICAgIGNvbnN0IGlzUGF0dGVybkZpbGwgPSB0aGlzLmN1cnJlbnQucGF0dGVybkZpbGw7XG5cbiAgICBmb3IgKGNvbnN0IGltYWdlIG9mIGltYWdlcykge1xuICAgICAgY29uc3QgeyBkYXRhLCB3aWR0aCwgaGVpZ2h0LCB0cmFuc2Zvcm0gfSA9IGltYWdlO1xuXG4gICAgICBjb25zdCBtYXNrQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICAgIFwibWFza0NhbnZhc1wiLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0XG4gICAgICApO1xuICAgICAgY29uc3QgbWFza0N0eCA9IG1hc2tDYW52YXMuY29udGV4dDtcbiAgICAgIG1hc2tDdHguc2F2ZSgpO1xuXG4gICAgICBjb25zdCBpbWcgPSB0aGlzLmdldE9iamVjdChkYXRhLCBpbWFnZSk7XG4gICAgICBwdXRCaW5hcnlJbWFnZU1hc2sobWFza0N0eCwgaW1nKTtcblxuICAgICAgbWFza0N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1pblwiO1xuXG4gICAgICBtYXNrQ3R4LmZpbGxTdHlsZSA9IGlzUGF0dGVybkZpbGxcbiAgICAgICAgPyBmaWxsQ29sb3IuZ2V0UGF0dGVybihcbiAgICAgICAgICAgIG1hc2tDdHgsXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UoY3R4KSxcbiAgICAgICAgICAgIFBhdGhUeXBlLkZJTExcbiAgICAgICAgICApXG4gICAgICAgIDogZmlsbENvbG9yO1xuICAgICAgbWFza0N0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgbWFza0N0eC5yZXN0b3JlKCk7XG5cbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjdHgudHJhbnNmb3JtKC4uLnRyYW5zZm9ybSk7XG4gICAgICBjdHguc2NhbGUoMSwgLTEpO1xuICAgICAgZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzKFxuICAgICAgICBjdHgsXG4gICAgICAgIG1hc2tDYW52YXMuY2FudmFzLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0LFxuICAgICAgICAwLFxuICAgICAgICAtMSxcbiAgICAgICAgMSxcbiAgICAgICAgMVxuICAgICAgKTtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIHRoaXMuY29tcG9zZSgpO1xuICB9XG5cbiAgcGFpbnRJbWFnZVhPYmplY3Qob2JqSWQpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW1nRGF0YSA9IHRoaXMuZ2V0T2JqZWN0KG9iaklkKTtcbiAgICBpZiAoIWltZ0RhdGEpIHtcbiAgICAgIHdhcm4oXCJEZXBlbmRlbnQgaW1hZ2UgaXNuJ3QgcmVhZHkgeWV0XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGFpbnRJbmxpbmVJbWFnZVhPYmplY3QoaW1nRGF0YSk7XG4gIH1cblxuICBwYWludEltYWdlWE9iamVjdFJlcGVhdChvYmpJZCwgc2NhbGVYLCBzY2FsZVksIHBvc2l0aW9ucykge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbWdEYXRhID0gdGhpcy5nZXRPYmplY3Qob2JqSWQpO1xuICAgIGlmICghaW1nRGF0YSkge1xuICAgICAgd2FybihcIkRlcGVuZGVudCBpbWFnZSBpc24ndCByZWFkeSB5ZXRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgd2lkdGggPSBpbWdEYXRhLndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0O1xuICAgIGNvbnN0IG1hcCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHBvc2l0aW9ucy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICBtYXAucHVzaCh7XG4gICAgICAgIHRyYW5zZm9ybTogW3NjYWxlWCwgMCwgMCwgc2NhbGVZLCBwb3NpdGlvbnNbaV0sIHBvc2l0aW9uc1tpICsgMV1dLFxuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwLFxuICAgICAgICB3OiB3aWR0aCxcbiAgICAgICAgaDogaGVpZ2h0LFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMucGFpbnRJbmxpbmVJbWFnZVhPYmplY3RHcm91cChpbWdEYXRhLCBtYXApO1xuICB9XG5cbiAgYXBwbHlUcmFuc2Zlck1hcHNUb0NhbnZhcyhjdHgpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50LnRyYW5zZmVyTWFwcyAhPT0gXCJub25lXCIpIHtcbiAgICAgIGN0eC5maWx0ZXIgPSB0aGlzLmN1cnJlbnQudHJhbnNmZXJNYXBzO1xuICAgICAgY3R4LmRyYXdJbWFnZShjdHguY2FudmFzLCAwLCAwKTtcbiAgICAgIGN0eC5maWx0ZXIgPSBcIm5vbmVcIjtcbiAgICB9XG4gICAgcmV0dXJuIGN0eC5jYW52YXM7XG4gIH1cblxuICBhcHBseVRyYW5zZmVyTWFwc1RvQml0bWFwKGltZ0RhdGEpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50LnRyYW5zZmVyTWFwcyA9PT0gXCJub25lXCIpIHtcbiAgICAgIHJldHVybiBpbWdEYXRhLmJpdG1hcDtcbiAgICB9XG4gICAgY29uc3QgeyBiaXRtYXAsIHdpZHRoLCBoZWlnaHQgfSA9IGltZ0RhdGE7XG4gICAgY29uc3QgdG1wQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBcImlubGluZUltYWdlXCIsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgICk7XG4gICAgY29uc3QgdG1wQ3R4ID0gdG1wQ2FudmFzLmNvbnRleHQ7XG4gICAgdG1wQ3R4LmZpbHRlciA9IHRoaXMuY3VycmVudC50cmFuc2Zlck1hcHM7XG4gICAgdG1wQ3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApO1xuICAgIHRtcEN0eC5maWx0ZXIgPSBcIm5vbmVcIjtcblxuICAgIHJldHVybiB0bXBDYW52YXMuY2FudmFzO1xuICB9XG5cbiAgcGFpbnRJbmxpbmVJbWFnZVhPYmplY3QoaW1nRGF0YSkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB3aWR0aCA9IGltZ0RhdGEud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gaW1nRGF0YS5oZWlnaHQ7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG5cbiAgICB0aGlzLnNhdmUoKTtcblxuICAgIGlmIChcbiAgICAgICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHx8XG4gICAgICAhaXNOb2RlSlNcbiAgICApIHtcbiAgICAgIC8vIFRoZSBmaWx0ZXIsIGlmIGFueSwgd2lsbCBiZSBhcHBsaWVkIGluIGFwcGx5VHJhbnNmZXJNYXBzVG9CaXRtYXAuXG4gICAgICAvLyBJdCBtdXN0IGJlIGFwcGxpZWQgdG8gdGhlIGltYWdlIGJlZm9yZSByZXNjYWxpbmcgZWxzZSBzb21lIGFydGlmYWN0c1xuICAgICAgLy8gY291bGQgYXBwZWFyLlxuICAgICAgLy8gVGhlIGZpbmFsIHJlc3RvcmUgd2lsbCByZXNldCBpdCB0byBpdHMgdmFsdWUuXG4gICAgICBjb25zdCB7IGZpbHRlciB9ID0gY3R4O1xuICAgICAgaWYgKGZpbHRlciAhPT0gXCJub25lXCIgJiYgZmlsdGVyICE9PSBcIlwiKSB7XG4gICAgICAgIGN0eC5maWx0ZXIgPSBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBzY2FsZSB0aGUgaW1hZ2UgdG8gdGhlIHVuaXQgc3F1YXJlXG4gICAgY3R4LnNjYWxlKDEgLyB3aWR0aCwgLTEgLyBoZWlnaHQpO1xuXG4gICAgbGV0IGltZ1RvUGFpbnQ7XG4gICAgaWYgKGltZ0RhdGEuYml0bWFwKSB7XG4gICAgICBpbWdUb1BhaW50ID0gdGhpcy5hcHBseVRyYW5zZmVyTWFwc1RvQml0bWFwKGltZ0RhdGEpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAodHlwZW9mIEhUTUxFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIgJiYgaW1nRGF0YSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB8fFxuICAgICAgIWltZ0RhdGEuZGF0YVxuICAgICkge1xuICAgICAgLy8gdHlwZW9mIGNoZWNrIGlzIG5lZWRlZCBkdWUgdG8gbm9kZS5qcyBzdXBwb3J0LCBzZWUgaXNzdWUgIzg0ODlcbiAgICAgIGltZ1RvUGFpbnQgPSBpbWdEYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0bXBDYW52YXMgPSB0aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhcbiAgICAgICAgXCJpbmxpbmVJbWFnZVwiLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0XG4gICAgICApO1xuICAgICAgY29uc3QgdG1wQ3R4ID0gdG1wQ2FudmFzLmNvbnRleHQ7XG4gICAgICBwdXRCaW5hcnlJbWFnZURhdGEodG1wQ3R4LCBpbWdEYXRhKTtcbiAgICAgIGltZ1RvUGFpbnQgPSB0aGlzLmFwcGx5VHJhbnNmZXJNYXBzVG9DYW52YXModG1wQ3R4KTtcbiAgICB9XG5cbiAgICBjb25zdCBzY2FsZWQgPSB0aGlzLl9zY2FsZUltYWdlKFxuICAgICAgaW1nVG9QYWludCxcbiAgICAgIGdldEN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKGN0eClcbiAgICApO1xuICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBnZXRJbWFnZVNtb290aGluZ0VuYWJsZWQoXG4gICAgICBnZXRDdXJyZW50VHJhbnNmb3JtKGN0eCksXG4gICAgICBpbWdEYXRhLmludGVycG9sYXRlXG4gICAgKTtcblxuICAgIGRyYXdJbWFnZUF0SW50ZWdlckNvb3JkcyhcbiAgICAgIGN0eCxcbiAgICAgIHNjYWxlZC5pbWcsXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIHNjYWxlZC5wYWludFdpZHRoLFxuICAgICAgc2NhbGVkLnBhaW50SGVpZ2h0LFxuICAgICAgMCxcbiAgICAgIC1oZWlnaHQsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgICk7XG4gICAgdGhpcy5jb21wb3NlKCk7XG4gICAgdGhpcy5yZXN0b3JlKCk7XG4gIH1cblxuICBwYWludElubGluZUltYWdlWE9iamVjdEdyb3VwKGltZ0RhdGEsIG1hcCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBsZXQgaW1nVG9QYWludDtcbiAgICBpZiAoaW1nRGF0YS5iaXRtYXApIHtcbiAgICAgIGltZ1RvUGFpbnQgPSBpbWdEYXRhLmJpdG1hcDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdyA9IGltZ0RhdGEud2lkdGg7XG4gICAgICBjb25zdCBoID0gaW1nRGF0YS5oZWlnaHQ7XG5cbiAgICAgIGNvbnN0IHRtcENhbnZhcyA9IHRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFwiaW5saW5lSW1hZ2VcIiwgdywgaCk7XG4gICAgICBjb25zdCB0bXBDdHggPSB0bXBDYW52YXMuY29udGV4dDtcbiAgICAgIHB1dEJpbmFyeUltYWdlRGF0YSh0bXBDdHgsIGltZ0RhdGEpO1xuICAgICAgaW1nVG9QYWludCA9IHRoaXMuYXBwbHlUcmFuc2Zlck1hcHNUb0NhbnZhcyh0bXBDdHgpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgbWFwKSB7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnRyYW5zZm9ybSguLi5lbnRyeS50cmFuc2Zvcm0pO1xuICAgICAgY3R4LnNjYWxlKDEsIC0xKTtcbiAgICAgIGRyYXdJbWFnZUF0SW50ZWdlckNvb3JkcyhcbiAgICAgICAgY3R4LFxuICAgICAgICBpbWdUb1BhaW50LFxuICAgICAgICBlbnRyeS54LFxuICAgICAgICBlbnRyeS55LFxuICAgICAgICBlbnRyeS53LFxuICAgICAgICBlbnRyeS5oLFxuICAgICAgICAwLFxuICAgICAgICAtMSxcbiAgICAgICAgMSxcbiAgICAgICAgMVxuICAgICAgKTtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIHRoaXMuY29tcG9zZSgpO1xuICB9XG5cbiAgcGFpbnRTb2xpZENvbG9ySW1hZ2VNYXNrKCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgICB0aGlzLmNvbXBvc2UoKTtcbiAgfVxuXG4gIC8vIE1hcmtlZCBjb250ZW50XG5cbiAgbWFya1BvaW50KHRhZykge1xuICAgIC8vIFRPRE8gTWFya2VkIGNvbnRlbnQuXG4gIH1cblxuICBtYXJrUG9pbnRQcm9wcyh0YWcsIHByb3BlcnRpZXMpIHtcbiAgICAvLyBUT0RPIE1hcmtlZCBjb250ZW50LlxuICB9XG5cbiAgYmVnaW5NYXJrZWRDb250ZW50KHRhZykge1xuICAgIHRoaXMubWFya2VkQ29udGVudFN0YWNrLnB1c2goe1xuICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIGJlZ2luTWFya2VkQ29udGVudFByb3BzKHRhZywgcHJvcGVydGllcykge1xuICAgIGlmICh0YWcgPT09IFwiT0NcIikge1xuICAgICAgdGhpcy5tYXJrZWRDb250ZW50U3RhY2sucHVzaCh7XG4gICAgICAgIHZpc2libGU6IHRoaXMub3B0aW9uYWxDb250ZW50Q29uZmlnLmlzVmlzaWJsZShwcm9wZXJ0aWVzKSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcmtlZENvbnRlbnRTdGFjay5wdXNoKHtcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLmNvbnRlbnRWaXNpYmxlID0gdGhpcy5pc0NvbnRlbnRWaXNpYmxlKCk7XG4gIH1cblxuICBlbmRNYXJrZWRDb250ZW50KCkge1xuICAgIHRoaXMubWFya2VkQ29udGVudFN0YWNrLnBvcCgpO1xuICAgIHRoaXMuY29udGVudFZpc2libGUgPSB0aGlzLmlzQ29udGVudFZpc2libGUoKTtcbiAgfVxuXG4gIC8vIENvbXBhdGliaWxpdHlcblxuICBiZWdpbkNvbXBhdCgpIHtcbiAgICAvLyBUT0RPIGlnbm9yZSB1bmRlZmluZWQgb3BlcmF0b3JzIChzaG91bGQgd2UgZG8gdGhhdCBhbnl3YXk/KVxuICB9XG5cbiAgZW5kQ29tcGF0KCkge1xuICAgIC8vIFRPRE8gc3RvcCBpZ25vcmluZyB1bmRlZmluZWQgb3BlcmF0b3JzXG4gIH1cblxuICAvLyBIZWxwZXIgZnVuY3Rpb25zXG5cbiAgY29uc3VtZVBhdGgocGF0aCwgY2xpcEJveCkge1xuICAgIGNvbnN0IGlzRW1wdHkgPSB0aGlzLmN1cnJlbnQuaXNFbXB0eUNsaXAoKTtcbiAgICBpZiAodGhpcy5wZW5kaW5nQ2xpcCkge1xuICAgICAgdGhpcy5jdXJyZW50LnVwZGF0ZUNsaXBGcm9tUGF0aCgpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucGVuZGluZ0NsaXApIHtcbiAgICAgIHRoaXMuY29tcG9zZShjbGlwQm94KTtcbiAgICB9XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgaWYgKHRoaXMucGVuZGluZ0NsaXApIHtcbiAgICAgIGlmICghaXNFbXB0eSkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nQ2xpcCA9PT0gRU9fQ0xJUCkge1xuICAgICAgICAgIGN0eC5jbGlwKHBhdGgsIFwiZXZlbm9kZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHguY2xpcChwYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5wZW5kaW5nQ2xpcCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudC5zdGFydE5ld1BhdGhBbmRDbGlwQm94KHRoaXMuY3VycmVudC5jbGlwQm94KTtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gIH1cblxuICBnZXRTaW5nbGVQaXhlbFdpZHRoKCkge1xuICAgIGlmICghdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCkge1xuICAgICAgY29uc3QgbSA9IGdldEN1cnJlbnRUcmFuc2Zvcm0odGhpcy5jdHgpO1xuICAgICAgaWYgKG1bMV0gPT09IDAgJiYgbVsyXSA9PT0gMCkge1xuICAgICAgICAvLyBGYXN0IHBhdGhcbiAgICAgICAgdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCA9XG4gICAgICAgICAgMSAvIE1hdGgubWluKE1hdGguYWJzKG1bMF0pLCBNYXRoLmFicyhtWzNdKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBhYnNEZXQgPSBNYXRoLmFicyhtWzBdICogbVszXSAtIG1bMl0gKiBtWzFdKTtcbiAgICAgICAgY29uc3Qgbm9ybVggPSBNYXRoLmh5cG90KG1bMF0sIG1bMl0pO1xuICAgICAgICBjb25zdCBub3JtWSA9IE1hdGguaHlwb3QobVsxXSwgbVszXSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZEdldFNpbmdsZVBpeGVsV2lkdGggPSBNYXRoLm1heChub3JtWCwgbm9ybVkpIC8gYWJzRGV0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aDtcbiAgfVxuXG4gIGdldFNjYWxlRm9yU3Ryb2tpbmcoKSB7XG4gICAgLy8gQSBwaXhlbCBoYXMgdGhpY2tuZXNzWCA9IHRoaWNrbmVzc1kgPSAxO1xuICAgIC8vIEEgdHJhbnNmb3JtZWQgcGl4ZWwgaXMgYSBwYXJhbGxlbG9ncmFtIGFuZCB0aGUgdGhpY2tuZXNzZXNcbiAgICAvLyBjb3JyZXNwb25kcyB0byB0aGUgaGVpZ2h0cy5cbiAgICAvLyBUaGUgZ29hbCBvZiB0aGlzIGZ1bmN0aW9uIGlzIHRvIHJlc2NhbGUgYmVmb3JlIHNldHRpbmcgdGhlXG4gICAgLy8gbGluZVdpZHRoIGluIG9yZGVyIHRvIGhhdmUgYm90aCB0aGlja25lc3NlcyBncmVhdGVyIG9yIGVxdWFsXG4gICAgLy8gdG8gMSBhZnRlciB0cmFuc2Zvcm0uXG4gICAgaWYgKHRoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmdbMF0gPT09IC0xKSB7XG4gICAgICBjb25zdCB7IGxpbmVXaWR0aCB9ID0gdGhpcy5jdXJyZW50O1xuICAgICAgY29uc3QgeyBhLCBiLCBjLCBkIH0gPSB0aGlzLmN0eC5nZXRUcmFuc2Zvcm0oKTtcbiAgICAgIGxldCBzY2FsZVgsIHNjYWxlWTtcblxuICAgICAgaWYgKGIgPT09IDAgJiYgYyA9PT0gMCkge1xuICAgICAgICAvLyBGYXN0IHBhdGhcbiAgICAgICAgY29uc3Qgbm9ybVggPSBNYXRoLmFicyhhKTtcbiAgICAgICAgY29uc3Qgbm9ybVkgPSBNYXRoLmFicyhkKTtcbiAgICAgICAgaWYgKG5vcm1YID09PSBub3JtWSkge1xuICAgICAgICAgIGlmIChsaW5lV2lkdGggPT09IDApIHtcbiAgICAgICAgICAgIHNjYWxlWCA9IHNjYWxlWSA9IDEgLyBub3JtWDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVkTGluZVdpZHRoID0gbm9ybVggKiBsaW5lV2lkdGg7XG4gICAgICAgICAgICBzY2FsZVggPSBzY2FsZVkgPSBzY2FsZWRMaW5lV2lkdGggPCAxID8gMSAvIHNjYWxlZExpbmVXaWR0aCA6IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGxpbmVXaWR0aCA9PT0gMCkge1xuICAgICAgICAgIHNjYWxlWCA9IDEgLyBub3JtWDtcbiAgICAgICAgICBzY2FsZVkgPSAxIC8gbm9ybVk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2NhbGVkWExpbmVXaWR0aCA9IG5vcm1YICogbGluZVdpZHRoO1xuICAgICAgICAgIGNvbnN0IHNjYWxlZFlMaW5lV2lkdGggPSBub3JtWSAqIGxpbmVXaWR0aDtcbiAgICAgICAgICBzY2FsZVggPSBzY2FsZWRYTGluZVdpZHRoIDwgMSA/IDEgLyBzY2FsZWRYTGluZVdpZHRoIDogMTtcbiAgICAgICAgICBzY2FsZVkgPSBzY2FsZWRZTGluZVdpZHRoIDwgMSA/IDEgLyBzY2FsZWRZTGluZVdpZHRoIDogMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQSBwaXhlbCAoYmFzZSAoeCwgeSkpIGlzIHRyYW5zZm9ybWVkIGJ5IE0gaW50byBhIHBhcmFsbGVsb2dyYW06XG4gICAgICAgIC8vICAtIGl0cyBhcmVhIGlzIHxkZXQoTSl8O1xuICAgICAgICAvLyAgLSBoZWlnaHRZIChvcnRob2dvbmFsIHRvIE14KSBoYXMgYSBsZW5ndGg6IHxkZXQoTSl8IC8gbm9ybShNeCk7XG4gICAgICAgIC8vICAtIGhlaWdodFggKG9ydGhvZ29uYWwgdG8gTXkpIGhhcyBhIGxlbmd0aDogfGRldChNKXwgLyBub3JtKE15KS5cbiAgICAgICAgLy8gaGVpZ2h0WCBhbmQgaGVpZ2h0WSBhcmUgdGhlIHRoaWNrbmVzc2VzIG9mIHRoZSB0cmFuc2Zvcm1lZCBwaXhlbFxuICAgICAgICAvLyBhbmQgdGhleSBtdXN0IGJlIGJvdGggZ3JlYXRlciBvciBlcXVhbCB0byAxLlxuICAgICAgICBjb25zdCBhYnNEZXQgPSBNYXRoLmFicyhhICogZCAtIGIgKiBjKTtcbiAgICAgICAgY29uc3Qgbm9ybVggPSBNYXRoLmh5cG90KGEsIGIpO1xuICAgICAgICBjb25zdCBub3JtWSA9IE1hdGguaHlwb3QoYywgZCk7XG4gICAgICAgIGlmIChsaW5lV2lkdGggPT09IDApIHtcbiAgICAgICAgICBzY2FsZVggPSBub3JtWSAvIGFic0RldDtcbiAgICAgICAgICBzY2FsZVkgPSBub3JtWCAvIGFic0RldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBiYXNlQXJlYSA9IGxpbmVXaWR0aCAqIGFic0RldDtcbiAgICAgICAgICBzY2FsZVggPSBub3JtWSA+IGJhc2VBcmVhID8gbm9ybVkgLyBiYXNlQXJlYSA6IDE7XG4gICAgICAgICAgc2NhbGVZID0gbm9ybVggPiBiYXNlQXJlYSA/IG5vcm1YIC8gYmFzZUFyZWEgOiAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nWzBdID0gc2NhbGVYO1xuICAgICAgdGhpcy5fY2FjaGVkU2NhbGVGb3JTdHJva2luZ1sxXSA9IHNjYWxlWTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmc7XG4gIH1cblxuICAvLyBSZXNjYWxlIGJlZm9yZSBzdHJva2luZyBpbiBvcmRlciB0byBoYXZlIGEgZmluYWwgbGluZVdpZHRoXG4gIC8vIHdpdGggYm90aCB0aGlja25lc3NlcyBncmVhdGVyIG9yIGVxdWFsIHRvIDEuXG4gIHJlc2NhbGVBbmRTdHJva2UocGF0aCwgc2F2ZVJlc3RvcmUpIHtcbiAgICBjb25zdCB7XG4gICAgICBjdHgsXG4gICAgICBjdXJyZW50OiB7IGxpbmVXaWR0aCB9LFxuICAgIH0gPSB0aGlzO1xuICAgIGNvbnN0IFtzY2FsZVgsIHNjYWxlWV0gPSB0aGlzLmdldFNjYWxlRm9yU3Ryb2tpbmcoKTtcblxuICAgIGlmIChzY2FsZVggPT09IHNjYWxlWSkge1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IChsaW5lV2lkdGggfHwgMSkgKiBzY2FsZVg7XG4gICAgICBjdHguc3Ryb2tlKHBhdGgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRhc2hlcyA9IGN0eC5nZXRMaW5lRGFzaCgpO1xuICAgIGlmIChzYXZlUmVzdG9yZSkge1xuICAgICAgY3R4LnNhdmUoKTtcbiAgICB9XG5cbiAgICBjdHguc2NhbGUoc2NhbGVYLCBzY2FsZVkpO1xuICAgIFNDQUxFX01BVFJJWC5hID0gMSAvIHNjYWxlWDtcbiAgICBTQ0FMRV9NQVRSSVguZCA9IDEgLyBzY2FsZVk7XG4gICAgY29uc3QgbmV3UGF0aCA9IG5ldyBQYXRoMkQoKTtcbiAgICBuZXdQYXRoLmFkZFBhdGgocGF0aCwgU0NBTEVfTUFUUklYKTtcblxuICAgIC8vIEhvdyB0aGUgZGFzaGVkIGxpbmUgaXMgcmVuZGVyZWQgZGVwZW5kcyBvbiB0aGUgY3VycmVudCB0cmFuc2Zvcm0uLi5cbiAgICAvLyBzbyB3ZSBhZGRlZCBhIHJlc2NhbGUgdG8gaGFuZGxlIHRvbyB0aGluIGxpbmVzIGFuZCBjb25zZXF1ZW50bHlcbiAgICAvLyB0aGUgd2F5IHRoZSBsaW5lIGlzIGRhc2hlZCB3aWxsIGJlIG1vZGlmaWVkLlxuICAgIC8vIElmIHNjYWxlWCA9PT0gc2NhbGVZLCB0aGUgZGFzaGVkIGxpbmVzIHdpbGwgYmUgcmVuZGVyZWQgY29ycmVjdGx5XG4gICAgLy8gZWxzZSB3ZSdsbCBoYXZlIHNvbWUgYnVncyAoYnV0IG9ubHkgd2l0aCB0b28gdGhpbiBsaW5lcykuXG4gICAgLy8gSGVyZSB3ZSB0YWtlIHRoZSBtYXguLi4gd2h5IG5vdCB0YWtpbmcgdGhlIG1pbi4uLiBvciBzb21ldGhpbmcgZWxzZS5cbiAgICAvLyBBbnl3YXksIGFzIHNhaWQgaXQncyBidWdneSB3aGVuIHNjYWxlWCAhPT0gc2NhbGVZLlxuICAgIGlmIChkYXNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc2NhbGUgPSBNYXRoLm1heChzY2FsZVgsIHNjYWxlWSk7XG4gICAgICBjdHguc2V0TGluZURhc2goZGFzaGVzLm1hcCh4ID0+IHggLyBzY2FsZSkpO1xuICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0IC89IHNjYWxlO1xuICAgIH1cblxuICAgIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGggfHwgMTtcbiAgICBjdHguc3Ryb2tlKG5ld1BhdGgpO1xuXG4gICAgaWYgKHNhdmVSZXN0b3JlKSB7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgfVxuXG4gIGlzQ29udGVudFZpc2libGUoKSB7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMubWFya2VkQ29udGVudFN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBpZiAoIXRoaXMubWFya2VkQ29udGVudFN0YWNrW2ldLnZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5mb3IgKGNvbnN0IG9wIGluIE9QUykge1xuICBpZiAoQ2FudmFzR3JhcGhpY3MucHJvdG90eXBlW29wXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgQ2FudmFzR3JhcGhpY3MucHJvdG90eXBlW09QU1tvcF1dID0gQ2FudmFzR3JhcGhpY3MucHJvdG90eXBlW29wXTtcbiAgfVxufVxuXG5leHBvcnQgeyBDYW52YXNHcmFwaGljcyB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDE4IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jbGFzcyBHbG9iYWxXb3JrZXJPcHRpb25zIHtcbiAgc3RhdGljICNwb3J0ID0gbnVsbDtcblxuICBzdGF0aWMgI3NyYyA9IFwiXCI7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtXb3JrZXIgfCBudWxsfVxuICAgKi9cbiAgc3RhdGljIGdldCB3b3JrZXJQb3J0KCkge1xuICAgIHJldHVybiB0aGlzLiNwb3J0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7V29ya2VyIHwgbnVsbH0gd29ya2VyUG9ydCAtIERlZmluZXMgZ2xvYmFsIHBvcnQgZm9yIHdvcmtlciBwcm9jZXNzLlxuICAgKiAgIE92ZXJyaWRlcyB0aGUgYHdvcmtlclNyY2Agb3B0aW9uLlxuICAgKi9cbiAgc3RhdGljIHNldCB3b3JrZXJQb3J0KHZhbCkge1xuICAgIGlmIChcbiAgICAgICEodHlwZW9mIFdvcmtlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiB2YWwgaW5zdGFuY2VvZiBXb3JrZXIpICYmXG4gICAgICB2YWwgIT09IG51bGxcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYHdvcmtlclBvcnRgIHR5cGUuXCIpO1xuICAgIH1cbiAgICB0aGlzLiNwb3J0ID0gdmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IHdvcmtlclNyYygpIHtcbiAgICByZXR1cm4gdGhpcy4jc3JjO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB3b3JrZXJTcmMgLSBBIHN0cmluZyBjb250YWluaW5nIHRoZSBwYXRoIGFuZCBmaWxlbmFtZSBvZlxuICAgKiAgIHRoZSB3b3JrZXIgZmlsZS5cbiAgICpcbiAgICogICBOT1RFOiBUaGUgYHdvcmtlclNyY2Agb3B0aW9uIHNob3VsZCBhbHdheXMgYmUgc2V0LCBpbiBvcmRlciB0byBwcmV2ZW50XG4gICAqICAgICAgICAgYW55IGlzc3VlcyB3aGVuIHVzaW5nIHRoZSBQREYuanMgbGlicmFyeS5cbiAgICovXG4gIHN0YXRpYyBzZXQgd29ya2VyU3JjKHZhbCkge1xuICAgIGlmICh0eXBlb2YgdmFsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGB3b3JrZXJTcmNgIHR5cGUuXCIpO1xuICAgIH1cbiAgICB0aGlzLiNzcmMgPSB2YWw7XG4gIH1cbn1cblxuZXhwb3J0IHsgR2xvYmFsV29ya2VyT3B0aW9ucyB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDEyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBvYmplY3RGcm9tTWFwIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5cbmNsYXNzIE1ldGFkYXRhIHtcbiAgI21ldGFkYXRhTWFwO1xuXG4gICNkYXRhO1xuXG4gIGNvbnN0cnVjdG9yKHsgcGFyc2VkRGF0YSwgcmF3RGF0YSB9KSB7XG4gICAgdGhpcy4jbWV0YWRhdGFNYXAgPSBwYXJzZWREYXRhO1xuICAgIHRoaXMuI2RhdGEgPSByYXdEYXRhO1xuICB9XG5cbiAgZ2V0UmF3KCkge1xuICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICB9XG5cbiAgZ2V0KG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy4jbWV0YWRhdGFNYXAuZ2V0KG5hbWUpID8/IG51bGw7XG4gIH1cblxuICBnZXRBbGwoKSB7XG4gICAgcmV0dXJuIG9iamVjdEZyb21NYXAodGhpcy4jbWV0YWRhdGFNYXApO1xuICB9XG5cbiAgaGFzKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy4jbWV0YWRhdGFNYXAuaGFzKG5hbWUpO1xuICB9XG59XG5cbmV4cG9ydCB7IE1ldGFkYXRhIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjAgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIGluZm8sXG4gIG9iamVjdEZyb21NYXAsXG4gIFJlbmRlcmluZ0ludGVudEZsYWcsXG4gIHVucmVhY2hhYmxlLFxuICB3YXJuLFxufSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7IE11cm11ckhhc2gzXzY0IH0gZnJvbSBcIi4uL3NoYXJlZC9tdXJtdXJoYXNoMy5qc1wiO1xuXG5jb25zdCBJTlRFUk5BTCA9IFN5bWJvbChcIklOVEVSTkFMXCIpO1xuXG5jbGFzcyBPcHRpb25hbENvbnRlbnRHcm91cCB7XG4gICNpc0Rpc3BsYXkgPSBmYWxzZTtcblxuICAjaXNQcmludCA9IGZhbHNlO1xuXG4gICN1c2VyU2V0ID0gZmFsc2U7XG5cbiAgI3Zpc2libGUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmluZ0ludGVudCwgeyBuYW1lLCBpbnRlbnQsIHVzYWdlLCByYkdyb3VwcyB9KSB7XG4gICAgdGhpcy4jaXNEaXNwbGF5ID0gISEocmVuZGVyaW5nSW50ZW50ICYgUmVuZGVyaW5nSW50ZW50RmxhZy5ESVNQTEFZKTtcbiAgICB0aGlzLiNpc1ByaW50ID0gISEocmVuZGVyaW5nSW50ZW50ICYgUmVuZGVyaW5nSW50ZW50RmxhZy5QUklOVCk7XG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuaW50ZW50ID0gaW50ZW50O1xuICAgIHRoaXMudXNhZ2UgPSB1c2FnZTtcbiAgICB0aGlzLnJiR3JvdXBzID0gcmJHcm91cHM7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgdmlzaWJsZSgpIHtcbiAgICBpZiAodGhpcy4jdXNlclNldCkge1xuICAgICAgcmV0dXJuIHRoaXMuI3Zpc2libGU7XG4gICAgfVxuICAgIGlmICghdGhpcy4jdmlzaWJsZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB7IHByaW50LCB2aWV3IH0gPSB0aGlzLnVzYWdlO1xuXG4gICAgaWYgKHRoaXMuI2lzRGlzcGxheSkge1xuICAgICAgcmV0dXJuIHZpZXc/LnZpZXdTdGF0ZSAhPT0gXCJPRkZcIjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuI2lzUHJpbnQpIHtcbiAgICAgIHJldHVybiBwcmludD8ucHJpbnRTdGF0ZSAhPT0gXCJPRkZcIjtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgX3NldFZpc2libGUoaW50ZXJuYWwsIHZpc2libGUsIHVzZXJTZXQgPSBmYWxzZSkge1xuICAgIGlmIChpbnRlcm5hbCAhPT0gSU5URVJOQUwpIHtcbiAgICAgIHVucmVhY2hhYmxlKFwiSW50ZXJuYWwgbWV0aG9kIGBfc2V0VmlzaWJsZWAgY2FsbGVkLlwiKTtcbiAgICB9XG4gICAgdGhpcy4jdXNlclNldCA9IHVzZXJTZXQ7XG4gICAgdGhpcy4jdmlzaWJsZSA9IHZpc2libGU7XG4gIH1cbn1cblxuY2xhc3MgT3B0aW9uYWxDb250ZW50Q29uZmlnIHtcbiAgI2NhY2hlZEdldEhhc2ggPSBudWxsO1xuXG4gICNncm91cHMgPSBuZXcgTWFwKCk7XG5cbiAgI2luaXRpYWxIYXNoID0gbnVsbDtcblxuICAjb3JkZXIgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHJlbmRlcmluZ0ludGVudCA9IFJlbmRlcmluZ0ludGVudEZsYWcuRElTUExBWSkge1xuICAgIHRoaXMucmVuZGVyaW5nSW50ZW50ID0gcmVuZGVyaW5nSW50ZW50O1xuXG4gICAgdGhpcy5uYW1lID0gbnVsbDtcbiAgICB0aGlzLmNyZWF0b3IgPSBudWxsO1xuXG4gICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuY3JlYXRvciA9IGRhdGEuY3JlYXRvcjtcbiAgICB0aGlzLiNvcmRlciA9IGRhdGEub3JkZXI7XG4gICAgZm9yIChjb25zdCBncm91cCBvZiBkYXRhLmdyb3Vwcykge1xuICAgICAgdGhpcy4jZ3JvdXBzLnNldChcbiAgICAgICAgZ3JvdXAuaWQsXG4gICAgICAgIG5ldyBPcHRpb25hbENvbnRlbnRHcm91cChyZW5kZXJpbmdJbnRlbnQsIGdyb3VwKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5iYXNlU3RhdGUgPT09IFwiT0ZGXCIpIHtcbiAgICAgIGZvciAoY29uc3QgZ3JvdXAgb2YgdGhpcy4jZ3JvdXBzLnZhbHVlcygpKSB7XG4gICAgICAgIGdyb3VwLl9zZXRWaXNpYmxlKElOVEVSTkFMLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBvbiBvZiBkYXRhLm9uKSB7XG4gICAgICB0aGlzLiNncm91cHMuZ2V0KG9uKS5fc2V0VmlzaWJsZShJTlRFUk5BTCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBvZmYgb2YgZGF0YS5vZmYpIHtcbiAgICAgIHRoaXMuI2dyb3Vwcy5nZXQob2ZmKS5fc2V0VmlzaWJsZShJTlRFUk5BTCwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBtdXN0IGFsd2F5cyBydW4gKmxhc3QqIGluIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICB0aGlzLiNpbml0aWFsSGFzaCA9IHRoaXMuZ2V0SGFzaCgpO1xuICB9XG5cbiAgI2V2YWx1YXRlVmlzaWJpbGl0eUV4cHJlc3Npb24oYXJyYXkpIHtcbiAgICBjb25zdCBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBvcGVyYXRvciA9IGFycmF5WzBdO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBhcnJheVtpXTtcbiAgICAgIGxldCBzdGF0ZTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnQpKSB7XG4gICAgICAgIHN0YXRlID0gdGhpcy4jZXZhbHVhdGVWaXNpYmlsaXR5RXhwcmVzc2lvbihlbGVtZW50KTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy4jZ3JvdXBzLmhhcyhlbGVtZW50KSkge1xuICAgICAgICBzdGF0ZSA9IHRoaXMuI2dyb3Vwcy5nZXQoZWxlbWVudCkudmlzaWJsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2VsZW1lbnR9YCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgICAgICBjYXNlIFwiQW5kXCI6XG4gICAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk9yXCI6XG4gICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJOb3RcIjpcbiAgICAgICAgICByZXR1cm4gIXN0YXRlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3BlcmF0b3IgPT09IFwiQW5kXCI7XG4gIH1cblxuICBpc1Zpc2libGUoZ3JvdXApIHtcbiAgICBpZiAodGhpcy4jZ3JvdXBzLnNpemUgPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWdyb3VwKSB7XG4gICAgICBpbmZvKFwiT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZGVmaW5lZC5cIik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGdyb3VwLnR5cGUgPT09IFwiT0NHXCIpIHtcbiAgICAgIGlmICghdGhpcy4jZ3JvdXBzLmhhcyhncm91cC5pZCkpIHtcbiAgICAgICAgd2FybihgT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZm91bmQ6ICR7Z3JvdXAuaWR9YCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuI2dyb3Vwcy5nZXQoZ3JvdXAuaWQpLnZpc2libGU7XG4gICAgfSBlbHNlIGlmIChncm91cC50eXBlID09PSBcIk9DTURcIikge1xuICAgICAgLy8gUGVyIHRoZSBzcGVjLCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgcHJlZmVycmVkIGlmIGF2YWlsYWJsZS5cbiAgICAgIGlmIChncm91cC5leHByZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNldmFsdWF0ZVZpc2liaWxpdHlFeHByZXNzaW9uKGdyb3VwLmV4cHJlc3Npb24pO1xuICAgICAgfVxuICAgICAgaWYgKCFncm91cC5wb2xpY3kgfHwgZ3JvdXAucG9saWN5ID09PSBcIkFueU9uXCIpIHtcbiAgICAgICAgLy8gRGVmYXVsdFxuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGdyb3VwLmlkcykge1xuICAgICAgICAgIGlmICghdGhpcy4jZ3JvdXBzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHdhcm4oYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2lkfWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLiNncm91cHMuZ2V0KGlkKS52aXNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChncm91cC5wb2xpY3kgPT09IFwiQWxsT25cIikge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGdyb3VwLmlkcykge1xuICAgICAgICAgIGlmICghdGhpcy4jZ3JvdXBzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHdhcm4oYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2lkfWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghdGhpcy4jZ3JvdXBzLmdldChpZCkudmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZ3JvdXAucG9saWN5ID09PSBcIkFueU9mZlwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgZ3JvdXAuaWRzKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLiNncm91cHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgd2FybihgT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZm91bmQ6ICR7aWR9YCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0aGlzLiNncm91cHMuZ2V0KGlkKS52aXNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChncm91cC5wb2xpY3kgPT09IFwiQWxsT2ZmXCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBncm91cC5pZHMpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuI2dyb3Vwcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICB3YXJuKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtpZH1gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy4jZ3JvdXBzLmdldChpZCkudmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHdhcm4oYFVua25vd24gb3B0aW9uYWwgY29udGVudCBwb2xpY3kgJHtncm91cC5wb2xpY3l9LmApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHdhcm4oYFVua25vd24gZ3JvdXAgdHlwZSAke2dyb3VwLnR5cGV9LmApO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc2V0VmlzaWJpbGl0eShpZCwgdmlzaWJsZSA9IHRydWUsIHByZXNlcnZlUkIgPSB0cnVlKSB7XG4gICAgY29uc3QgZ3JvdXAgPSB0aGlzLiNncm91cHMuZ2V0KGlkKTtcbiAgICBpZiAoIWdyb3VwKSB7XG4gICAgICB3YXJuKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtpZH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgdmlzaWJpbGl0eSBpcyBhYm91dCB0byBiZSBzZXQgdG8gYHRydWVgIGFuZCB0aGUgZ3JvdXAgYmVsb25ncyB0b1xuICAgIC8vIGFueSByYWRpb2J1dHRvbiBncm91cHMsIGhpZGUgYWxsIG90aGVyIE9DR3MgaW4gdGhlc2UgcmFkaW9idXR0b24gZ3JvdXBzLFxuICAgIC8vIHByb3ZpZGVkIHRoYXQgcmFkaW9idXR0b24gc3RhdGUgcmVsYXRpb25zaGlwcyBhcmUgdG8gYmUgcHJlc2VydmVkLlxuICAgIGlmIChwcmVzZXJ2ZVJCICYmIHZpc2libGUgJiYgZ3JvdXAucmJHcm91cHMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IHJiR3JvdXAgb2YgZ3JvdXAucmJHcm91cHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBvdGhlcklkIG9mIHJiR3JvdXApIHtcbiAgICAgICAgICBpZiAob3RoZXJJZCAhPT0gaWQpIHtcbiAgICAgICAgICAgIHRoaXMuI2dyb3Vwcy5nZXQob3RoZXJJZCk/Ll9zZXRWaXNpYmxlKElOVEVSTkFMLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZ3JvdXAuX3NldFZpc2libGUoSU5URVJOQUwsICEhdmlzaWJsZSwgLyogdXNlclNldCA9ICovIHRydWUpO1xuXG4gICAgdGhpcy4jY2FjaGVkR2V0SGFzaCA9IG51bGw7XG4gIH1cblxuICBzZXRPQ0dTdGF0ZSh7IHN0YXRlLCBwcmVzZXJ2ZVJCIH0pIHtcbiAgICBsZXQgb3BlcmF0b3I7XG5cbiAgICBmb3IgKGNvbnN0IGVsZW0gb2Ygc3RhdGUpIHtcbiAgICAgIHN3aXRjaCAoZWxlbSkge1xuICAgICAgICBjYXNlIFwiT05cIjpcbiAgICAgICAgY2FzZSBcIk9GRlwiOlxuICAgICAgICBjYXNlIFwiVG9nZ2xlXCI6XG4gICAgICAgICAgb3BlcmF0b3IgPSBlbGVtO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBncm91cCA9IHRoaXMuI2dyb3Vwcy5nZXQoZWxlbSk7XG4gICAgICBpZiAoIWdyb3VwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgICAgICBjYXNlIFwiT05cIjpcbiAgICAgICAgICB0aGlzLnNldFZpc2liaWxpdHkoZWxlbSwgdHJ1ZSwgcHJlc2VydmVSQik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJPRkZcIjpcbiAgICAgICAgICB0aGlzLnNldFZpc2liaWxpdHkoZWxlbSwgZmFsc2UsIHByZXNlcnZlUkIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiVG9nZ2xlXCI6XG4gICAgICAgICAgdGhpcy5zZXRWaXNpYmlsaXR5KGVsZW0sICFncm91cC52aXNpYmxlLCBwcmVzZXJ2ZVJCKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLiNjYWNoZWRHZXRIYXNoID0gbnVsbDtcbiAgfVxuXG4gIGdldCBoYXNJbml0aWFsVmlzaWJpbGl0eSgpIHtcbiAgICByZXR1cm4gdGhpcy4jaW5pdGlhbEhhc2ggPT09IG51bGwgfHwgdGhpcy5nZXRIYXNoKCkgPT09IHRoaXMuI2luaXRpYWxIYXNoO1xuICB9XG5cbiAgZ2V0T3JkZXIoKSB7XG4gICAgaWYgKCF0aGlzLiNncm91cHMuc2l6ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLiNvcmRlcikge1xuICAgICAgcmV0dXJuIHRoaXMuI29yZGVyLnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBbLi4udGhpcy4jZ3JvdXBzLmtleXMoKV07XG4gIH1cblxuICBnZXRHcm91cHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2dyb3Vwcy5zaXplID4gMCA/IG9iamVjdEZyb21NYXAodGhpcy4jZ3JvdXBzKSA6IG51bGw7XG4gIH1cblxuICBnZXRHcm91cChpZCkge1xuICAgIHJldHVybiB0aGlzLiNncm91cHMuZ2V0KGlkKSB8fCBudWxsO1xuICB9XG5cbiAgZ2V0SGFzaCgpIHtcbiAgICBpZiAodGhpcy4jY2FjaGVkR2V0SGFzaCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMuI2NhY2hlZEdldEhhc2g7XG4gICAgfVxuICAgIGNvbnN0IGhhc2ggPSBuZXcgTXVybXVySGFzaDNfNjQoKTtcblxuICAgIGZvciAoY29uc3QgW2lkLCBncm91cF0gb2YgdGhpcy4jZ3JvdXBzKSB7XG4gICAgICBoYXNoLnVwZGF0ZShgJHtpZH06JHtncm91cC52aXNpYmxlfWApO1xuICAgIH1cbiAgICByZXR1cm4gKHRoaXMuI2NhY2hlZEdldEhhc2ggPSBoYXNoLmhleGRpZ2VzdCgpKTtcbiAgfVxufVxuXG5leHBvcnQgeyBPcHRpb25hbENvbnRlbnRDb25maWcgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9pbnRlcmZhY2VzXCIpLklQREZTdHJlYW19IElQREZTdHJlYW0gKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vaW50ZXJmYWNlc1wiKS5JUERGU3RyZWFtUmVhZGVyfSBJUERGU3RyZWFtUmVhZGVyICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9pbnRlcmZhY2VzXCIpLklQREZTdHJlYW1SYW5nZVJlYWRlcn0gSVBERlN0cmVhbVJhbmdlUmVhZGVyICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgaXNQZGZGaWxlIH0gZnJvbSBcIi4vZGlzcGxheV91dGlscy5qc1wiO1xuXG4vKiogQGltcGxlbWVudHMge0lQREZTdHJlYW19ICovXG5jbGFzcyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcGRmRGF0YVJhbmdlVHJhbnNwb3J0LFxuICAgIHsgZGlzYWJsZVJhbmdlID0gZmFsc2UsIGRpc2FibGVTdHJlYW0gPSBmYWxzZSB9XG4gICkge1xuICAgIGFzc2VydChcbiAgICAgIHBkZkRhdGFSYW5nZVRyYW5zcG9ydCxcbiAgICAgICdQREZEYXRhVHJhbnNwb3J0U3RyZWFtIC0gbWlzc2luZyByZXF1aXJlZCBcInBkZkRhdGFSYW5nZVRyYW5zcG9ydFwiIGFyZ3VtZW50LidcbiAgICApO1xuICAgIGNvbnN0IHsgbGVuZ3RoLCBpbml0aWFsRGF0YSwgcHJvZ3Jlc3NpdmVEb25lLCBjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSB9ID1cbiAgICAgIHBkZkRhdGFSYW5nZVRyYW5zcG9ydDtcblxuICAgIHRoaXMuX3F1ZXVlZENodW5rcyA9IFtdO1xuICAgIHRoaXMuX3Byb2dyZXNzaXZlRG9uZSA9IHByb2dyZXNzaXZlRG9uZTtcbiAgICB0aGlzLl9jb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSA9IGNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lO1xuXG4gICAgaWYgKGluaXRpYWxEYXRhPy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBQcmV2ZW50IGFueSBwb3NzaWJsZSBpc3N1ZXMgYnkgb25seSB0cmFuc2ZlcnJpbmcgYSBVaW50OEFycmF5IHRoYXRcbiAgICAgIC8vIGNvbXBsZXRlbHkgXCJ1dGlsaXplc1wiIGl0cyB1bmRlcmx5aW5nIEFycmF5QnVmZmVyLlxuICAgICAgY29uc3QgYnVmZmVyID1cbiAgICAgICAgaW5pdGlhbERhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICAgIGluaXRpYWxEYXRhLmJ5dGVMZW5ndGggPT09IGluaXRpYWxEYXRhLmJ1ZmZlci5ieXRlTGVuZ3RoXG4gICAgICAgICAgPyBpbml0aWFsRGF0YS5idWZmZXJcbiAgICAgICAgICA6IG5ldyBVaW50OEFycmF5KGluaXRpYWxEYXRhKS5idWZmZXI7XG4gICAgICB0aGlzLl9xdWV1ZWRDaHVua3MucHVzaChidWZmZXIpO1xuICAgIH1cblxuICAgIHRoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydCA9IHBkZkRhdGFSYW5nZVRyYW5zcG9ydDtcbiAgICB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZCA9ICFkaXNhYmxlU3RyZWFtO1xuICAgIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQgPSAhZGlzYWJsZVJhbmdlO1xuICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSBsZW5ndGg7XG5cbiAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fcmFuZ2VSZWFkZXJzID0gW107XG5cbiAgICBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQuYWRkUmFuZ2VMaXN0ZW5lcigoYmVnaW4sIGNodW5rKSA9PiB7XG4gICAgICB0aGlzLl9vblJlY2VpdmVEYXRhKHsgYmVnaW4sIGNodW5rIH0pO1xuICAgIH0pO1xuXG4gICAgcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmFkZFByb2dyZXNzTGlzdGVuZXIoKGxvYWRlZCwgdG90YWwpID0+IHtcbiAgICAgIHRoaXMuX29uUHJvZ3Jlc3MoeyBsb2FkZWQsIHRvdGFsIH0pO1xuICAgIH0pO1xuXG4gICAgcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmFkZFByb2dyZXNzaXZlUmVhZExpc3RlbmVyKGNodW5rID0+IHtcbiAgICAgIHRoaXMuX29uUmVjZWl2ZURhdGEoeyBjaHVuayB9KTtcbiAgICB9KTtcblxuICAgIHBkZkRhdGFSYW5nZVRyYW5zcG9ydC5hZGRQcm9ncmVzc2l2ZURvbmVMaXN0ZW5lcigoKSA9PiB7XG4gICAgICB0aGlzLl9vblByb2dyZXNzaXZlRG9uZSgpO1xuICAgIH0pO1xuXG4gICAgcGRmRGF0YVJhbmdlVHJhbnNwb3J0LnRyYW5zcG9ydFJlYWR5KCk7XG4gIH1cblxuICBfb25SZWNlaXZlRGF0YSh7IGJlZ2luLCBjaHVuayB9KSB7XG4gICAgLy8gUHJldmVudCBhbnkgcG9zc2libGUgaXNzdWVzIGJ5IG9ubHkgdHJhbnNmZXJyaW5nIGEgVWludDhBcnJheSB0aGF0XG4gICAgLy8gY29tcGxldGVseSBcInV0aWxpemVzXCIgaXRzIHVuZGVybHlpbmcgQXJyYXlCdWZmZXIuXG4gICAgY29uc3QgYnVmZmVyID1cbiAgICAgIGNodW5rIGluc3RhbmNlb2YgVWludDhBcnJheSAmJlxuICAgICAgY2h1bmsuYnl0ZUxlbmd0aCA9PT0gY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGhcbiAgICAgICAgPyBjaHVuay5idWZmZXJcbiAgICAgICAgOiBuZXcgVWludDhBcnJheShjaHVuaykuYnVmZmVyO1xuXG4gICAgaWYgKGJlZ2luID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICh0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcikge1xuICAgICAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlci5fZW5xdWV1ZShidWZmZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcXVldWVkQ2h1bmtzLnB1c2goYnVmZmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZm91bmQgPSB0aGlzLl9yYW5nZVJlYWRlcnMuc29tZShmdW5jdGlvbiAocmFuZ2VSZWFkZXIpIHtcbiAgICAgICAgaWYgKHJhbmdlUmVhZGVyLl9iZWdpbiAhPT0gYmVnaW4pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmFuZ2VSZWFkZXIuX2VucXVldWUoYnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICAgIGFzc2VydChcbiAgICAgICAgZm91bmQsXG4gICAgICAgIFwiX29uUmVjZWl2ZURhdGEgLSBubyBgUERGRGF0YVRyYW5zcG9ydFN0cmVhbVJhbmdlUmVhZGVyYCBpbnN0YW5jZSBmb3VuZC5cIlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBnZXQgX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/Ll9sb2FkZWQgPz8gMDtcbiAgfVxuXG4gIF9vblByb2dyZXNzKGV2dCkge1xuICAgIGlmIChldnQudG90YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gUmVwb3J0aW5nIHRvIGZpcnN0IHJhbmdlIHJlYWRlciwgaWYgaXQgZXhpc3RzLlxuICAgICAgdGhpcy5fcmFuZ2VSZWFkZXJzWzBdPy5vblByb2dyZXNzPy4oeyBsb2FkZWQ6IGV2dC5sb2FkZWQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyPy5vblByb2dyZXNzPy4oe1xuICAgICAgICBsb2FkZWQ6IGV2dC5sb2FkZWQsXG4gICAgICAgIHRvdGFsOiBldnQudG90YWwsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfb25Qcm9ncmVzc2l2ZURvbmUoKSB7XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/LnByb2dyZXNzaXZlRG9uZSgpO1xuICAgIHRoaXMuX3Byb2dyZXNzaXZlRG9uZSA9IHRydWU7XG4gIH1cblxuICBfcmVtb3ZlUmFuZ2VSZWFkZXIocmVhZGVyKSB7XG4gICAgY29uc3QgaSA9IHRoaXMuX3JhbmdlUmVhZGVycy5pbmRleE9mKHJlYWRlcik7XG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgdGhpcy5fcmFuZ2VSZWFkZXJzLnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH1cblxuICBnZXRGdWxsUmVhZGVyKCkge1xuICAgIGFzc2VydChcbiAgICAgICF0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcixcbiAgICAgIFwiUERGRGF0YVRyYW5zcG9ydFN0cmVhbS5nZXRGdWxsUmVhZGVyIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlLlwiXG4gICAgKTtcbiAgICBjb25zdCBxdWV1ZWRDaHVua3MgPSB0aGlzLl9xdWV1ZWRDaHVua3M7XG4gICAgdGhpcy5fcXVldWVkQ2h1bmtzID0gbnVsbDtcbiAgICByZXR1cm4gbmV3IFBERkRhdGFUcmFuc3BvcnRTdHJlYW1SZWFkZXIoXG4gICAgICB0aGlzLFxuICAgICAgcXVldWVkQ2h1bmtzLFxuICAgICAgdGhpcy5fcHJvZ3Jlc3NpdmVEb25lLFxuICAgICAgdGhpcy5fY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWVcbiAgICApO1xuICB9XG5cbiAgZ2V0UmFuZ2VSZWFkZXIoYmVnaW4sIGVuZCkge1xuICAgIGlmIChlbmQgPD0gdGhpcy5fcHJvZ3Jlc3NpdmVEYXRhTGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IFBERkRhdGFUcmFuc3BvcnRTdHJlYW1SYW5nZVJlYWRlcih0aGlzLCBiZWdpbiwgZW5kKTtcbiAgICB0aGlzLl9wZGZEYXRhUmFuZ2VUcmFuc3BvcnQucmVxdWVzdERhdGFSYW5nZShiZWdpbiwgZW5kKTtcbiAgICB0aGlzLl9yYW5nZVJlYWRlcnMucHVzaChyZWFkZXIpO1xuICAgIHJldHVybiByZWFkZXI7XG4gIH1cblxuICBjYW5jZWxBbGxSZXF1ZXN0cyhyZWFzb24pIHtcbiAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj8uY2FuY2VsKHJlYXNvbik7XG5cbiAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiB0aGlzLl9yYW5nZVJlYWRlcnMuc2xpY2UoMCkpIHtcbiAgICAgIHJlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG4gICAgdGhpcy5fcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmFib3J0KCk7XG4gIH1cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHtJUERGU3RyZWFtUmVhZGVyfSAqL1xuY2xhc3MgUERGRGF0YVRyYW5zcG9ydFN0cmVhbVJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHN0cmVhbSxcbiAgICBxdWV1ZWRDaHVua3MsXG4gICAgcHJvZ3Jlc3NpdmVEb25lID0gZmFsc2UsXG4gICAgY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUgPSBudWxsXG4gICkge1xuICAgIHRoaXMuX3N0cmVhbSA9IHN0cmVhbTtcbiAgICB0aGlzLl9kb25lID0gcHJvZ3Jlc3NpdmVEb25lIHx8IGZhbHNlO1xuICAgIHRoaXMuX2ZpbGVuYW1lID0gaXNQZGZGaWxlKGNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lKVxuICAgICAgPyBjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZVxuICAgICAgOiBudWxsO1xuICAgIHRoaXMuX3F1ZXVlZENodW5rcyA9IHF1ZXVlZENodW5rcyB8fCBbXTtcbiAgICB0aGlzLl9sb2FkZWQgPSAwO1xuICAgIGZvciAoY29uc3QgY2h1bmsgb2YgdGhpcy5fcXVldWVkQ2h1bmtzKSB7XG4gICAgICB0aGlzLl9sb2FkZWQgKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgdGhpcy5fcmVxdWVzdHMgPSBbXTtcbiAgICB0aGlzLl9oZWFkZXJzUmVhZHkgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBzdHJlYW0uX2Z1bGxSZXF1ZXN0UmVhZGVyID0gdGhpcztcblxuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gIH1cblxuICBfZW5xdWV1ZShjaHVuaykge1xuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm47IC8vIElnbm9yZSBuZXcgZGF0YS5cbiAgICB9XG4gICAgaWYgKHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5ID0gdGhpcy5fcmVxdWVzdHMuc2hpZnQoKTtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9xdWV1ZWRDaHVua3MucHVzaChjaHVuayk7XG4gICAgfVxuICAgIHRoaXMuX2xvYWRlZCArPSBjaHVuay5ieXRlTGVuZ3RoO1xuICB9XG5cbiAgZ2V0IGhlYWRlcnNSZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5faGVhZGVyc1JlYWR5O1xuICB9XG5cbiAgZ2V0IGZpbGVuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9maWxlbmFtZTtcbiAgfVxuXG4gIGdldCBpc1JhbmdlU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9zdHJlYW0uX2lzUmFuZ2VTdXBwb3J0ZWQ7XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cmVhbS5faXNTdHJlYW1pbmdTdXBwb3J0ZWQ7XG4gIH1cblxuICBnZXQgY29udGVudExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RyZWFtLl9jb250ZW50TGVuZ3RoO1xuICB9XG5cbiAgYXN5bmMgcmVhZCgpIHtcbiAgICBpZiAodGhpcy5fcXVldWVkQ2h1bmtzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5fcXVldWVkQ2h1bmtzLnNoaWZ0KCk7XG4gICAgICByZXR1cm4geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH07XG4gICAgfVxuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgfVxuICAgIGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgdGhpcy5fcmVxdWVzdHMucHVzaChyZXF1ZXN0Q2FwYWJpbGl0eSk7XG4gICAgcmV0dXJuIHJlcXVlc3RDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBjYW5jZWwocmVhc29uKSB7XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgfVxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBwcm9ncmVzc2l2ZURvbmUoKSB7XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gIH1cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHtJUERGU3RyZWFtUmFuZ2VSZWFkZXJ9ICovXG5jbGFzcyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIGJlZ2luLCBlbmQpIHtcbiAgICB0aGlzLl9zdHJlYW0gPSBzdHJlYW07XG4gICAgdGhpcy5fYmVnaW4gPSBiZWdpbjtcbiAgICB0aGlzLl9lbmQgPSBlbmQ7XG4gICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBudWxsO1xuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5fZG9uZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgfVxuXG4gIF9lbnF1ZXVlKGNodW5rKSB7XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybjsgLy8gaWdub3JlIG5ldyBkYXRhXG4gICAgfVxuICAgIGlmICh0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX3F1ZXVlZENodW5rID0gY2h1bms7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlcXVlc3RzQ2FwYWJpbGl0eSA9IHRoaXMuX3JlcXVlc3RzLnNoaWZ0KCk7XG4gICAgICByZXF1ZXN0c0NhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfSk7XG4gICAgICBmb3IgKGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5IG9mIHRoaXMuX3JlcXVlc3RzKSB7XG4gICAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gICAgdGhpcy5fc3RyZWFtLl9yZW1vdmVSYW5nZVJlYWRlcih0aGlzKTtcbiAgfVxuXG4gIGdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGlmICh0aGlzLl9xdWV1ZWRDaHVuaykge1xuICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLl9xdWV1ZWRDaHVuaztcbiAgICAgIHRoaXMuX3F1ZXVlZENodW5rID0gbnVsbDtcbiAgICAgIHJldHVybiB7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgICB0aGlzLl9yZXF1ZXN0cy5wdXNoKHJlcXVlc3RDYXBhYmlsaXR5KTtcbiAgICByZXR1cm4gcmVxdWVzdENhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICB0aGlzLl9kb25lID0gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5IG9mIHRoaXMuX3JlcXVlc3RzKSB7XG4gICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9zdHJlYW0uX3JlbW92ZVJhbmdlUmVhZGVyKHRoaXMpO1xuICB9XG59XG5cbmV4cG9ydCB7IFBERkRhdGFUcmFuc3BvcnRTdHJlYW0gfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxNyBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgc3RyaW5nVG9CeXRlcyB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG4vLyBUaGlzIGdldEZpbGVuYW1lRnJvbUNvbnRlbnREaXNwb3NpdGlvbkhlYWRlciBmdW5jdGlvbiBpcyBhZGFwdGVkIGZyb21cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9Sb2ItLVcvb3Blbi1pbi1icm93c2VyL2Jsb2IvN2UyZTM1YTM4YjhiNGU5ODFiMTFkYTdiMmYwMWRmMDE0OTA0OWU5Mi9leHRlbnNpb24vY29udGVudC1kaXNwb3NpdGlvbi5qc1xuLy8gd2l0aCB0aGUgZm9sbG93aW5nIGNoYW5nZXM6XG4vLyAtIE1vZGlmaWVkIHRvIGNvbmZvcm0gdG8gUERGLmpzJ3MgY29kaW5nIHN0eWxlLlxuLy8gLSBNb3ZlIHJldHVybiB0byB0aGUgZW5kIG9mIHRoZSBmdW5jdGlvbiB0byBwcmV2ZW50IEJhYmVsIGZyb20gZHJvcHBpbmcgdGhlXG4vLyAgIGZ1bmN0aW9uIGRlY2xhcmF0aW9ucy5cblxuLyoqXG4gKiBFeHRyYWN0IGZpbGUgbmFtZSBmcm9tIHRoZSBDb250ZW50LURpc3Bvc2l0aW9uIEhUVFAgcmVzcG9uc2UgaGVhZGVyLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50RGlzcG9zaXRpb25cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEZpbGVuYW1lLCBpZiBmb3VuZCBpbiB0aGUgQ29udGVudC1EaXNwb3NpdGlvbiBoZWFkZXIuXG4gKi9cbmZ1bmN0aW9uIGdldEZpbGVuYW1lRnJvbUNvbnRlbnREaXNwb3NpdGlvbkhlYWRlcihjb250ZW50RGlzcG9zaXRpb24pIHtcbiAgbGV0IG5lZWRzRW5jb2RpbmdGaXh1cCA9IHRydWU7XG5cbiAgLy8gZmlsZW5hbWUqPWV4dC12YWx1ZSAoXCJleHQtdmFsdWVcIiBmcm9tIFJGQyA1OTg3LCByZWZlcmVuY2VkIGJ5IFJGQyA2MjY2KS5cbiAgbGV0IHRtcCA9IHRvUGFyYW1SZWdFeHAoXCJmaWxlbmFtZVxcXFwqXCIsIFwiaVwiKS5leGVjKGNvbnRlbnREaXNwb3NpdGlvbik7XG4gIGlmICh0bXApIHtcbiAgICB0bXAgPSB0bXBbMV07XG4gICAgbGV0IGZpbGVuYW1lID0gcmZjMjYxNnVucXVvdGUodG1wKTtcbiAgICBmaWxlbmFtZSA9IHVuZXNjYXBlKGZpbGVuYW1lKTtcbiAgICBmaWxlbmFtZSA9IHJmYzU5ODdkZWNvZGUoZmlsZW5hbWUpO1xuICAgIGZpbGVuYW1lID0gcmZjMjA0N2RlY29kZShmaWxlbmFtZSk7XG4gICAgcmV0dXJuIGZpeHVwRW5jb2RpbmcoZmlsZW5hbWUpO1xuICB9XG5cbiAgLy8gQ29udGludWF0aW9ucyAoUkZDIDIyMzEgc2VjdGlvbiAzLCByZWZlcmVuY2VkIGJ5IFJGQyA1OTg3IHNlY3Rpb24gMy4xKS5cbiAgLy8gZmlsZW5hbWUqbio9cGFydFxuICAvLyBmaWxlbmFtZSpuPXBhcnRcbiAgdG1wID0gcmZjMjIzMWdldHBhcmFtKGNvbnRlbnREaXNwb3NpdGlvbik7XG4gIGlmICh0bXApIHtcbiAgICAvLyBSRkMgMjA0Nywgc2VjdGlvblxuICAgIGNvbnN0IGZpbGVuYW1lID0gcmZjMjA0N2RlY29kZSh0bXApO1xuICAgIHJldHVybiBmaXh1cEVuY29kaW5nKGZpbGVuYW1lKTtcbiAgfVxuXG4gIC8vIGZpbGVuYW1lPXZhbHVlIChSRkMgNTk4Nywgc2VjdGlvbiA0LjEpLlxuICB0bXAgPSB0b1BhcmFtUmVnRXhwKFwiZmlsZW5hbWVcIiwgXCJpXCIpLmV4ZWMoY29udGVudERpc3Bvc2l0aW9uKTtcbiAgaWYgKHRtcCkge1xuICAgIHRtcCA9IHRtcFsxXTtcbiAgICBsZXQgZmlsZW5hbWUgPSByZmMyNjE2dW5xdW90ZSh0bXApO1xuICAgIGZpbGVuYW1lID0gcmZjMjA0N2RlY29kZShmaWxlbmFtZSk7XG4gICAgcmV0dXJuIGZpeHVwRW5jb2RpbmcoZmlsZW5hbWUpO1xuICB9XG5cbiAgLy8gQWZ0ZXIgdGhpcyBsaW5lIHRoZXJlIGFyZSBvbmx5IGZ1bmN0aW9uIGRlY2xhcmF0aW9ucy4gV2UgY2Fubm90IHB1dFxuICAvLyBcInJldHVyblwiIGhlcmUgZm9yIHJlYWRhYmlsaXR5IGJlY2F1c2UgYmFiZWwgd291bGQgdGhlbiBkcm9wIHRoZSBmdW5jdGlvblxuICAvLyBkZWNsYXJhdGlvbnMuLi5cbiAgZnVuY3Rpb24gdG9QYXJhbVJlZ0V4cChhdHRyaWJ1dGVQYXR0ZXJuLCBmbGFncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKFxuICAgICAgXCIoPzpefDspXFxcXHMqXCIgK1xuICAgICAgICBhdHRyaWJ1dGVQYXR0ZXJuICtcbiAgICAgICAgXCJcXFxccyo9XFxcXHMqXCIgK1xuICAgICAgICAvLyBDYXB0dXJlczogdmFsdWUgPSB0b2tlbiB8IHF1b3RlZC1zdHJpbmdcbiAgICAgICAgLy8gKFJGQyAyNjE2LCBzZWN0aW9uIDMuNiBhbmQgcmVmZXJlbmNlZCBieSBSRkMgNjI2NiA0LjEpXG4gICAgICAgIFwiKFwiICtcbiAgICAgICAgJ1teXCI7XFxcXHNdW147XFxcXHNdKicgK1xuICAgICAgICBcInxcIiArXG4gICAgICAgICdcIig/OlteXCJcXFxcXFxcXF18XFxcXFxcXFxcIj8pK1wiPycgK1xuICAgICAgICBcIilcIixcbiAgICAgIGZsYWdzXG4gICAgKTtcbiAgfVxuICBmdW5jdGlvbiB0ZXh0ZGVjb2RlKGVuY29kaW5nLCB2YWx1ZSkge1xuICAgIGlmIChlbmNvZGluZykge1xuICAgICAgaWYgKCEvXltcXHgwMC1cXHhGRl0rJC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihlbmNvZGluZywgeyBmYXRhbDogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gc3RyaW5nVG9CeXRlcyh2YWx1ZSk7XG4gICAgICAgIHZhbHVlID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyKTtcbiAgICAgICAgbmVlZHNFbmNvZGluZ0ZpeHVwID0gZmFsc2U7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8gVGV4dERlY29kZXIgY29uc3RydWN0b3IgdGhyZXcgLSB1bnJlY29nbml6ZWQgZW5jb2RpbmcuXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBmdW5jdGlvbiBmaXh1cEVuY29kaW5nKHZhbHVlKSB7XG4gICAgaWYgKG5lZWRzRW5jb2RpbmdGaXh1cCAmJiAvW1xceDgwLVxceGZmXS8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIC8vIE1heWJlIG11bHRpLWJ5dGUgVVRGLTguXG4gICAgICB2YWx1ZSA9IHRleHRkZWNvZGUoXCJ1dGYtOFwiLCB2YWx1ZSk7XG4gICAgICBpZiAobmVlZHNFbmNvZGluZ0ZpeHVwKSB7XG4gICAgICAgIC8vIFRyeSBpc28tODg1OS0xIGVuY29kaW5nLlxuICAgICAgICB2YWx1ZSA9IHRleHRkZWNvZGUoXCJpc28tODg1OS0xXCIsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGZ1bmN0aW9uIHJmYzIyMzFnZXRwYXJhbShjb250ZW50RGlzcG9zaXRpb25TdHIpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gW107XG4gICAgbGV0IG1hdGNoO1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBhbGwgZmlsZW5hbWUqbj0gYW5kIGZpbGVuYW1lKm4qPSB3aXRoIG4gYmVpbmcgYW4gaW50ZWdlclxuICAgIC8vIG9mIGF0IGxlYXN0IHplcm8uIEFueSBub24temVybyBudW1iZXIgbXVzdCBub3Qgc3RhcnQgd2l0aCAnMCcuXG4gICAgY29uc3QgaXRlciA9IHRvUGFyYW1SZWdFeHAoXCJmaWxlbmFtZVxcXFwqKCg/ITBcXFxcZClcXFxcZCspKFxcXFwqPylcIiwgXCJpZ1wiKTtcbiAgICB3aGlsZSAoKG1hdGNoID0gaXRlci5leGVjKGNvbnRlbnREaXNwb3NpdGlvblN0cikpICE9PSBudWxsKSB7XG4gICAgICBsZXQgWywgbiwgcXVvdCwgcGFydF0gPSBtYXRjaDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcmVmZXItY29uc3RcbiAgICAgIG4gPSBwYXJzZUludChuLCAxMCk7XG4gICAgICBpZiAobiBpbiBtYXRjaGVzKSB7XG4gICAgICAgIC8vIElnbm9yZSBhbnl0aGluZyBhZnRlciB0aGUgaW52YWxpZCBzZWNvbmQgZmlsZW5hbWUqMC5cbiAgICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIG1hdGNoZXNbbl0gPSBbcXVvdCwgcGFydF07XG4gICAgfVxuICAgIGNvbnN0IHBhcnRzID0gW107XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBtYXRjaGVzLmxlbmd0aDsgKytuKSB7XG4gICAgICBpZiAoIShuIGluIG1hdGNoZXMpKSB7XG4gICAgICAgIC8vIE51bWJlcnMgbXVzdCBiZSBjb25zZWN1dGl2ZS4gVHJ1bmNhdGUgd2hlbiB0aGVyZSBpcyBhIGhvbGUuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGV0IFtxdW90LCBwYXJ0XSA9IG1hdGNoZXNbbl07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgICBwYXJ0ID0gcmZjMjYxNnVucXVvdGUocGFydCk7XG4gICAgICBpZiAocXVvdCkge1xuICAgICAgICBwYXJ0ID0gdW5lc2NhcGUocGFydCk7XG4gICAgICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgICAgcGFydCA9IHJmYzU5ODdkZWNvZGUocGFydCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cy5qb2luKFwiXCIpO1xuICB9XG4gIGZ1bmN0aW9uIHJmYzI2MTZ1bnF1b3RlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykpIHtcbiAgICAgIGNvbnN0IHBhcnRzID0gdmFsdWUuc2xpY2UoMSkuc3BsaXQoJ1xcXFxcIicpO1xuICAgICAgLy8gRmluZCB0aGUgZmlyc3QgdW5lc2NhcGVkIFwiIGFuZCB0ZXJtaW5hdGUgdGhlcmUuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IHF1b3RpbmRleCA9IHBhcnRzW2ldLmluZGV4T2YoJ1wiJyk7XG4gICAgICAgIGlmIChxdW90aW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgcGFydHNbaV0gPSBwYXJ0c1tpXS5zbGljZSgwLCBxdW90aW5kZXgpO1xuICAgICAgICAgIHBhcnRzLmxlbmd0aCA9IGkgKyAxOyAvLyBUcnVuY2F0ZXMgYW5kIHN0b3AgdGhlIGl0ZXJhdGlvbi5cbiAgICAgICAgfVxuICAgICAgICBwYXJ0c1tpXSA9IHBhcnRzW2ldLnJlcGxhY2VBbGwoL1xcXFwoLikvZywgXCIkMVwiKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gcGFydHMuam9pbignXCInKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGZ1bmN0aW9uIHJmYzU5ODdkZWNvZGUoZXh0dmFsdWUpIHtcbiAgICAvLyBEZWNvZGVzIFwiZXh0LXZhbHVlXCIgZnJvbSBSRkMgNTk4Ny5cbiAgICBjb25zdCBlbmNvZGluZ2VuZCA9IGV4dHZhbHVlLmluZGV4T2YoXCInXCIpO1xuICAgIGlmIChlbmNvZGluZ2VuZCA9PT0gLTEpIHtcbiAgICAgIC8vIFNvbWUgc2VydmVycyBzZW5kIFwiZmlsZW5hbWUqPVwiIHdpdGhvdXQgZW5jb2RpbmcgJ2xhbmd1YWdlJyBwcmVmaXgsXG4gICAgICAvLyBlLmcuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9Sb2ItLVcvb3Blbi1pbi1icm93c2VyL2lzc3Vlcy8yNlxuICAgICAgLy8gTGV0J3MgYWNjZXB0IHRoZSB2YWx1ZSBsaWtlIEZpcmVmb3ggKDU3KSAoQ2hyb21lIDYyIHJlamVjdHMgaXQpLlxuICAgICAgcmV0dXJuIGV4dHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCBlbmNvZGluZyA9IGV4dHZhbHVlLnNsaWNlKDAsIGVuY29kaW5nZW5kKTtcbiAgICBjb25zdCBsYW5ndmFsdWUgPSBleHR2YWx1ZS5zbGljZShlbmNvZGluZ2VuZCArIDEpO1xuICAgIC8vIElnbm9yZSBsYW5ndWFnZSAoUkZDIDU5ODcgc2VjdGlvbiAzLjIuMSwgYW5kIFJGQyA2MjY2IHNlY3Rpb24gNC4xICkuXG4gICAgY29uc3QgdmFsdWUgPSBsYW5ndmFsdWUucmVwbGFjZSgvXlteJ10qJy8sIFwiXCIpO1xuICAgIHJldHVybiB0ZXh0ZGVjb2RlKGVuY29kaW5nLCB2YWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gcmZjMjA0N2RlY29kZSh2YWx1ZSkge1xuICAgIC8vIFJGQyAyMDQ3LWRlY29kZSB0aGUgcmVzdWx0LiBGaXJlZm94IHRyaWVkIHRvIGRyb3Agc3VwcG9ydCBmb3IgaXQsIGJ1dFxuICAgIC8vIGJhY2tlZCBvdXQgYmVjYXVzZSBzb21lIHNlcnZlcnMgdXNlIGl0IC0gaHR0cHM6Ly9idWd6aWwubGEvODc1NjE1XG4gICAgLy8gRmlyZWZveCdzIGNvbmRpdGlvbiBmb3IgZGVjb2RpbmcgaXMgaGVyZTogaHR0cHM6Ly9zZWFyY2hmb3gub3JnL21vemlsbGEtY2VudHJhbC9yZXYvNGE1OTBhNWExNWUzNWQ4OGEzYjIzZGQ2YWMzYzQ3MWNmODViMDRhOC9uZXR3ZXJrL21pbWUvbnNNSU1FSGVhZGVyUGFyYW1JbXBsLmNwcCM3NDItNzQ4XG5cbiAgICAvLyBXZSBhcmUgbW9yZSBzdHJpY3QgYW5kIG9ubHkgcmVjb2duaXplIFJGQyAyMDQ3LWVuY29kaW5nIGlmIHRoZSB2YWx1ZVxuICAgIC8vIHN0YXJ0cyB3aXRoIFwiPT9cIiwgc2luY2UgdGhlbiBpdCBpcyBsaWtlbHkgdGhhdCB0aGUgZnVsbCB2YWx1ZSBpc1xuICAgIC8vIFJGQyAyMDQ3LWVuY29kZWQuXG5cbiAgICAvLyBGaXJlZm94IGFsc28gZGVjb2RlcyB3b3JkcyBldmVuIHdoZXJlIFJGQyAyMDQ3IHNlY3Rpb24gNSBzdGF0ZXM6XG4gICAgLy8gXCJBbiAnZW5jb2RlZC13b3JkJyBNVVNUIE5PVCBhcHBlYXIgd2l0aGluIGEgJ3F1b3RlZC1zdHJpbmcnLlwiXG4gICAgaWYgKCF2YWx1ZS5zdGFydHNXaXRoKFwiPT9cIikgfHwgL1tcXHgwMC1cXHgxOVxceDgwLVxceGZmXS8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gUkZDIDIwNDcsIHNlY3Rpb24gMi40XG4gICAgLy8gZW5jb2RlZC13b3JkID0gXCI9P1wiIGNoYXJzZXQgXCI/XCIgZW5jb2RpbmcgXCI/XCIgZW5jb2RlZC10ZXh0IFwiPz1cIlxuICAgIC8vIGNoYXJzZXQgPSB0b2tlbiAoYnV0IGxldCdzIHJlc3RyaWN0IHRvIGNoYXJhY3RlcnMgdGhhdCBkZW5vdGUgYVxuICAgIC8vICAgICAgIHBvc3NpYmx5IHZhbGlkIGVuY29kaW5nKS5cbiAgICAvLyBlbmNvZGluZyA9IHEgb3IgYlxuICAgIC8vIGVuY29kZWQtdGV4dCA9IGFueSBwcmludGFibGUgQVNDSUkgY2hhcmFjdGVyIG90aGVyIHRoYW4gPyBvciBzcGFjZS5cbiAgICAvLyAgICAgICAgLi4uIGJ1dCBGaXJlZm94IHBlcm1pdHMgPyBhbmQgc3BhY2UuXG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2VBbGwoXG4gICAgICAvPVxcPyhbXFx3LV0qKVxcPyhbUXFCYl0pXFw/KCg/OlteP118XFw/KD8hPSkpKilcXD89L2csXG4gICAgICBmdW5jdGlvbiAobWF0Y2hlcywgY2hhcnNldCwgZW5jb2RpbmcsIHRleHQpIHtcbiAgICAgICAgaWYgKGVuY29kaW5nID09PSBcInFcIiB8fCBlbmNvZGluZyA9PT0gXCJRXCIpIHtcbiAgICAgICAgICAvLyBSRkMgMjA0NyBzZWN0aW9uIDQuMi5cbiAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlQWxsKFwiX1wiLCBcIiBcIik7XG4gICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZUFsbCgvPShbMC05YS1mQS1GXXsyfSkvZywgZnVuY3Rpb24gKG1hdGNoLCBoZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGhleCwgMTYpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdGV4dGRlY29kZShjaGFyc2V0LCB0ZXh0KTtcbiAgICAgICAgfSAvLyBlbHNlIGVuY29kaW5nIGlzIGIgb3IgQiAtIGJhc2U2NCAoUkZDIDIwNDcgc2VjdGlvbiA0LjEpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGV4dCA9IGF0b2IodGV4dCk7XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgcmV0dXJuIHRleHRkZWNvZGUoY2hhcnNldCwgdGV4dCk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBcIlwiO1xufVxuXG5leHBvcnQgeyBnZXRGaWxlbmFtZUZyb21Db250ZW50RGlzcG9zaXRpb25IZWFkZXIgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYXNzZXJ0LCBSZXNwb25zZUV4Y2VwdGlvbiB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgZ2V0RmlsZW5hbWVGcm9tQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyIH0gZnJvbSBcIi4vY29udGVudF9kaXNwb3NpdGlvbi5qc1wiO1xuaW1wb3J0IHsgaXNQZGZGaWxlIH0gZnJvbSBcIi4vZGlzcGxheV91dGlscy5qc1wiO1xuXG5mdW5jdGlvbiBjcmVhdGVIZWFkZXJzKGlzSHR0cCwgaHR0cEhlYWRlcnMpIHtcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cbiAgaWYgKCFpc0h0dHAgfHwgIWh0dHBIZWFkZXJzIHx8IHR5cGVvZiBodHRwSGVhZGVycyAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBoZWFkZXJzO1xuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIGh0dHBIZWFkZXJzKSB7XG4gICAgY29uc3QgdmFsID0gaHR0cEhlYWRlcnNba2V5XTtcbiAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgdmFsKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhlYWRlcnM7XG59XG5cbmZ1bmN0aW9uIGdldFJlc3BvbnNlT3JpZ2luKHVybCkge1xuICAvLyBOb3RhYmx5LCBudWxsIGlzIGRpc3RpbmN0IGZyb20gXCJudWxsXCIgc3RyaW5nIChlLmcuIGZyb20gZmlsZTotVVJMcykuXG4gIHJldHVybiBVUkwucGFyc2UodXJsKT8ub3JpZ2luID8/IG51bGw7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlUmFuZ2VSZXF1ZXN0Q2FwYWJpbGl0aWVzKHtcbiAgcmVzcG9uc2VIZWFkZXJzLFxuICBpc0h0dHAsXG4gIHJhbmdlQ2h1bmtTaXplLFxuICBkaXNhYmxlUmFuZ2UsXG59KSB7XG4gIGlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpIHtcbiAgICBhc3NlcnQoXG4gICAgICBOdW1iZXIuaXNJbnRlZ2VyKHJhbmdlQ2h1bmtTaXplKSAmJiByYW5nZUNodW5rU2l6ZSA+IDAsXG4gICAgICBcInJhbmdlQ2h1bmtTaXplIG11c3QgYmUgYW4gaW50ZWdlciBsYXJnZXIgdGhhbiB6ZXJvLlwiXG4gICAgKTtcbiAgfVxuICBjb25zdCByZXR1cm5WYWx1ZXMgPSB7XG4gICAgYWxsb3dSYW5nZVJlcXVlc3RzOiBmYWxzZSxcbiAgICBzdWdnZXN0ZWRMZW5ndGg6IHVuZGVmaW5lZCxcbiAgfTtcblxuICBjb25zdCBsZW5ndGggPSBwYXJzZUludChyZXNwb25zZUhlYWRlcnMuZ2V0KFwiQ29udGVudC1MZW5ndGhcIiksIDEwKTtcbiAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGxlbmd0aCkpIHtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWVzO1xuICB9XG5cbiAgcmV0dXJuVmFsdWVzLnN1Z2dlc3RlZExlbmd0aCA9IGxlbmd0aDtcblxuICBpZiAobGVuZ3RoIDw9IDIgKiByYW5nZUNodW5rU2l6ZSkge1xuICAgIC8vIFRoZSBmaWxlIHNpemUgaXMgc21hbGxlciB0aGFuIHRoZSBzaXplIG9mIHR3byBjaHVua3MsIHNvIGl0IGRvZXMgbm90XG4gICAgLy8gbWFrZSBhbnkgc2Vuc2UgdG8gYWJvcnQgdGhlIHJlcXVlc3QgYW5kIHJldHJ5IHdpdGggYSByYW5nZSByZXF1ZXN0LlxuICAgIHJldHVybiByZXR1cm5WYWx1ZXM7XG4gIH1cblxuICBpZiAoZGlzYWJsZVJhbmdlIHx8ICFpc0h0dHApIHtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWVzO1xuICB9XG4gIGlmIChyZXNwb25zZUhlYWRlcnMuZ2V0KFwiQWNjZXB0LVJhbmdlc1wiKSAhPT0gXCJieXRlc1wiKSB7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlcztcbiAgfVxuXG4gIGNvbnN0IGNvbnRlbnRFbmNvZGluZyA9IHJlc3BvbnNlSGVhZGVycy5nZXQoXCJDb250ZW50LUVuY29kaW5nXCIpIHx8IFwiaWRlbnRpdHlcIjtcbiAgaWYgKGNvbnRlbnRFbmNvZGluZyAhPT0gXCJpZGVudGl0eVwiKSB7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlcztcbiAgfVxuXG4gIHJldHVyblZhbHVlcy5hbGxvd1JhbmdlUmVxdWVzdHMgPSB0cnVlO1xuICByZXR1cm4gcmV0dXJuVmFsdWVzO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKHJlc3BvbnNlSGVhZGVycykge1xuICBjb25zdCBjb250ZW50RGlzcG9zaXRpb24gPSByZXNwb25zZUhlYWRlcnMuZ2V0KFwiQ29udGVudC1EaXNwb3NpdGlvblwiKTtcbiAgaWYgKGNvbnRlbnREaXNwb3NpdGlvbikge1xuICAgIGxldCBmaWxlbmFtZSA9IGdldEZpbGVuYW1lRnJvbUNvbnRlbnREaXNwb3NpdGlvbkhlYWRlcihjb250ZW50RGlzcG9zaXRpb24pO1xuICAgIGlmIChmaWxlbmFtZS5pbmNsdWRlcyhcIiVcIikpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbGVuYW1lID0gZGVjb2RlVVJJQ29tcG9uZW50KGZpbGVuYW1lKTtcbiAgICAgIH0gY2F0Y2gge31cbiAgICB9XG4gICAgaWYgKGlzUGRmRmlsZShmaWxlbmFtZSkpIHtcbiAgICAgIHJldHVybiBmaWxlbmFtZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlRXJyb3Ioc3RhdHVzLCB1cmwpIHtcbiAgcmV0dXJuIG5ldyBSZXNwb25zZUV4Y2VwdGlvbihcbiAgICBgVW5leHBlY3RlZCBzZXJ2ZXIgcmVzcG9uc2UgKCR7c3RhdHVzfSkgd2hpbGUgcmV0cmlldmluZyBQREYgXCIke3VybH1cIi5gLFxuICAgIHN0YXR1cyxcbiAgICAvKiBtaXNzaW5nID0gKi8gc3RhdHVzID09PSA0MDQgfHwgKHN0YXR1cyA9PT0gMCAmJiB1cmwuc3RhcnRzV2l0aChcImZpbGU6XCIpKVxuICApO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVJlc3BvbnNlU3RhdHVzKHN0YXR1cykge1xuICByZXR1cm4gc3RhdHVzID09PSAyMDAgfHwgc3RhdHVzID09PSAyMDY7XG59XG5cbmV4cG9ydCB7XG4gIGNyZWF0ZUhlYWRlcnMsXG4gIGNyZWF0ZVJlc3BvbnNlRXJyb3IsXG4gIGV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXIsXG4gIGdldFJlc3BvbnNlT3JpZ2luLFxuICB2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyxcbiAgdmFsaWRhdGVSZXNwb25zZVN0YXR1cyxcbn07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEFib3J0RXhjZXB0aW9uLCBhc3NlcnQsIHdhcm4gfSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUhlYWRlcnMsXG4gIGNyZWF0ZVJlc3BvbnNlRXJyb3IsXG4gIGV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXIsXG4gIGdldFJlc3BvbnNlT3JpZ2luLFxuICB2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyxcbiAgdmFsaWRhdGVSZXNwb25zZVN0YXR1cyxcbn0gZnJvbSBcIi4vbmV0d29ya191dGlscy5qc1wiO1xuXG5pZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnTW9kdWxlIFwiLi9mZXRjaF9zdHJlYW0uanNcIiBzaGFsbCBub3QgYmUgdXNlZCB3aXRoIE1PWkNFTlRSQUwgYnVpbGRzLidcbiAgKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRmV0Y2hPcHRpb25zKGhlYWRlcnMsIHdpdGhDcmVkZW50aWFscywgYWJvcnRDb250cm9sbGVyKSB7XG4gIHJldHVybiB7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIGhlYWRlcnMsXG4gICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgIG1vZGU6IFwiY29yc1wiLFxuICAgIGNyZWRlbnRpYWxzOiB3aXRoQ3JlZGVudGlhbHMgPyBcImluY2x1ZGVcIiA6IFwic2FtZS1vcmlnaW5cIixcbiAgICByZWRpcmVjdDogXCJmb2xsb3dcIixcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0QXJyYXlCdWZmZXIodmFsKSB7XG4gIGlmICh2YWwgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgcmV0dXJuIHZhbC5idWZmZXI7XG4gIH1cbiAgaWYgKHZhbCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICB3YXJuKGBnZXRBcnJheUJ1ZmZlciAtIHVuZXhwZWN0ZWQgZGF0YSBmb3JtYXQ6ICR7dmFsfWApO1xuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmFsKS5idWZmZXI7XG59XG5cbi8qKiBAaW1wbGVtZW50cyB7SVBERlN0cmVhbX0gKi9cbmNsYXNzIFBERkZldGNoU3RyZWFtIHtcbiAgX3Jlc3BvbnNlT3JpZ2luID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLmlzSHR0cCA9IC9eaHR0cHM/Oi9pLnRlc3Qoc291cmNlLnVybCk7XG4gICAgdGhpcy5oZWFkZXJzID0gY3JlYXRlSGVhZGVycyh0aGlzLmlzSHR0cCwgc291cmNlLmh0dHBIZWFkZXJzKTtcblxuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzID0gW107XG4gIH1cblxuICBnZXQgX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/Ll9sb2FkZWQgPz8gMDtcbiAgfVxuXG4gIGdldEZ1bGxSZWFkZXIoKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgIXRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLFxuICAgICAgXCJQREZGZXRjaFN0cmVhbS5nZXRGdWxsUmVhZGVyIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlLlwiXG4gICAgKTtcbiAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlciA9IG5ldyBQREZGZXRjaFN0cmVhbVJlYWRlcih0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI7XG4gIH1cblxuICBnZXRSYW5nZVJlYWRlcihiZWdpbiwgZW5kKSB7XG4gICAgaWYgKGVuZCA8PSB0aGlzLl9wcm9ncmVzc2l2ZURhdGFMZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZWFkZXIgPSBuZXcgUERGRmV0Y2hTdHJlYW1SYW5nZVJlYWRlcih0aGlzLCBiZWdpbiwgZW5kKTtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnB1c2gocmVhZGVyKTtcbiAgICByZXR1cm4gcmVhZGVyO1xuICB9XG5cbiAgY2FuY2VsQWxsUmVxdWVzdHMocmVhc29uKSB7XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/LmNhbmNlbChyZWFzb24pO1xuXG4gICAgZm9yIChjb25zdCByZWFkZXIgb2YgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycy5zbGljZSgwKSkge1xuICAgICAgcmVhZGVyLmNhbmNlbChyZWFzb24pO1xuICAgIH1cbiAgfVxufVxuXG4vKiogQGltcGxlbWVudHMge0lQREZTdHJlYW1SZWFkZXJ9ICovXG5jbGFzcyBQREZGZXRjaFN0cmVhbVJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHN0cmVhbSkge1xuICAgIHRoaXMuX3N0cmVhbSA9IHN0cmVhbTtcbiAgICB0aGlzLl9yZWFkZXIgPSBudWxsO1xuICAgIHRoaXMuX2xvYWRlZCA9IDA7XG4gICAgdGhpcy5fZmlsZW5hbWUgPSBudWxsO1xuICAgIGNvbnN0IHNvdXJjZSA9IHN0cmVhbS5zb3VyY2U7XG4gICAgdGhpcy5fd2l0aENyZWRlbnRpYWxzID0gc291cmNlLndpdGhDcmVkZW50aWFscyB8fCBmYWxzZTtcbiAgICB0aGlzLl9jb250ZW50TGVuZ3RoID0gc291cmNlLmxlbmd0aDtcbiAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eSA9IFByb21pc2Uud2l0aFJlc29sdmVycygpO1xuICAgIHRoaXMuX2Rpc2FibGVSYW5nZSA9IHNvdXJjZS5kaXNhYmxlUmFuZ2UgfHwgZmFsc2U7XG4gICAgdGhpcy5fcmFuZ2VDaHVua1NpemUgPSBzb3VyY2UucmFuZ2VDaHVua1NpemU7XG4gICAgaWYgKCF0aGlzLl9yYW5nZUNodW5rU2l6ZSAmJiAhdGhpcy5fZGlzYWJsZVJhbmdlKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlUmFuZ2UgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZCA9ICFzb3VyY2UuZGlzYWJsZVN0cmVhbTtcbiAgICB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkID0gIXNvdXJjZS5kaXNhYmxlUmFuZ2U7XG4gICAgLy8gQWx3YXlzIGNyZWF0ZSBhIGNvcHkgb2YgdGhlIGhlYWRlcnMuXG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHN0cmVhbS5oZWFkZXJzKTtcblxuICAgIGNvbnN0IHVybCA9IHNvdXJjZS51cmw7XG4gICAgZmV0Y2goXG4gICAgICB1cmwsXG4gICAgICBjcmVhdGVGZXRjaE9wdGlvbnMoaGVhZGVycywgdGhpcy5fd2l0aENyZWRlbnRpYWxzLCB0aGlzLl9hYm9ydENvbnRyb2xsZXIpXG4gICAgKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBzdHJlYW0uX3Jlc3BvbnNlT3JpZ2luID0gZ2V0UmVzcG9uc2VPcmlnaW4ocmVzcG9uc2UudXJsKTtcblxuICAgICAgICBpZiAoIXZhbGlkYXRlUmVzcG9uc2VTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgICAgICAgIHRocm93IGNyZWF0ZVJlc3BvbnNlRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCB1cmwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgICAgIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnJlc29sdmUoKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzO1xuXG4gICAgICAgIGNvbnN0IHsgYWxsb3dSYW5nZVJlcXVlc3RzLCBzdWdnZXN0ZWRMZW5ndGggfSA9XG4gICAgICAgICAgdmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXMoe1xuICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICAgICAgaXNIdHRwOiBzdHJlYW0uaXNIdHRwLFxuICAgICAgICAgICAgcmFuZ2VDaHVua1NpemU6IHRoaXMuX3JhbmdlQ2h1bmtTaXplLFxuICAgICAgICAgICAgZGlzYWJsZVJhbmdlOiB0aGlzLl9kaXNhYmxlUmFuZ2UsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCA9IGFsbG93UmFuZ2VSZXF1ZXN0cztcbiAgICAgICAgLy8gU2V0dGluZyByaWdodCBjb250ZW50IGxlbmd0aC5cbiAgICAgICAgdGhpcy5fY29udGVudExlbmd0aCA9IHN1Z2dlc3RlZExlbmd0aCB8fCB0aGlzLl9jb250ZW50TGVuZ3RoO1xuXG4gICAgICAgIHRoaXMuX2ZpbGVuYW1lID0gZXh0cmFjdEZpbGVuYW1lRnJvbUhlYWRlcihyZXNwb25zZUhlYWRlcnMpO1xuXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gc3RvcCByZWFkaW5nIHdoZW4gcmFuZ2UgaXMgc3VwcG9ydGVkIGFuZCBzdHJlYW1pbmcgaXNcbiAgICAgICAgLy8gZGlzYWJsZWQuXG4gICAgICAgIGlmICghdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgJiYgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCkge1xuICAgICAgICAgIHRoaXMuY2FuY2VsKG5ldyBBYm9ydEV4Y2VwdGlvbihcIlN0cmVhbWluZyBpcyBkaXNhYmxlZC5cIikpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnJlamVjdCk7XG5cbiAgICB0aGlzLm9uUHJvZ3Jlc3MgPSBudWxsO1xuICB9XG5cbiAgZ2V0IGhlYWRlcnNSZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIGdldCBmaWxlbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlsZW5hbWU7XG4gIH1cblxuICBnZXQgY29udGVudExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGVudExlbmd0aDtcbiAgfVxuXG4gIGdldCBpc1JhbmdlU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZDtcbiAgfVxuXG4gIGFzeW5jIHJlYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucHJvbWlzZTtcbiAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCB0aGlzLl9yZWFkZXIucmVhZCgpO1xuICAgIGlmIChkb25lKSB7XG4gICAgICByZXR1cm4geyB2YWx1ZSwgZG9uZSB9O1xuICAgIH1cbiAgICB0aGlzLl9sb2FkZWQgKz0gdmFsdWUuYnl0ZUxlbmd0aDtcbiAgICB0aGlzLm9uUHJvZ3Jlc3M/Lih7XG4gICAgICBsb2FkZWQ6IHRoaXMuX2xvYWRlZCxcbiAgICAgIHRvdGFsOiB0aGlzLl9jb250ZW50TGVuZ3RoLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgdmFsdWU6IGdldEFycmF5QnVmZmVyKHZhbHVlKSwgZG9uZTogZmFsc2UgfTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICB0aGlzLl9yZWFkZXI/LmNhbmNlbChyZWFzb24pO1xuICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICB9XG59XG5cbi8qKiBAaW1wbGVtZW50cyB7SVBERlN0cmVhbVJhbmdlUmVhZGVyfSAqL1xuY2xhc3MgUERGRmV0Y2hTdHJlYW1SYW5nZVJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHN0cmVhbSwgYmVnaW4sIGVuZCkge1xuICAgIHRoaXMuX3N0cmVhbSA9IHN0cmVhbTtcbiAgICB0aGlzLl9yZWFkZXIgPSBudWxsO1xuICAgIHRoaXMuX2xvYWRlZCA9IDA7XG4gICAgY29uc3Qgc291cmNlID0gc3RyZWFtLnNvdXJjZTtcbiAgICB0aGlzLl93aXRoQ3JlZGVudGlhbHMgPSBzb3VyY2Uud2l0aENyZWRlbnRpYWxzIHx8IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgPSAhc291cmNlLmRpc2FibGVTdHJlYW07XG5cbiAgICB0aGlzLl9hYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgLy8gQWx3YXlzIGNyZWF0ZSBhIGNvcHkgb2YgdGhlIGhlYWRlcnMuXG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHN0cmVhbS5oZWFkZXJzKTtcbiAgICBoZWFkZXJzLmFwcGVuZChcIlJhbmdlXCIsIGBieXRlcz0ke2JlZ2lufS0ke2VuZCAtIDF9YCk7XG5cbiAgICBjb25zdCB1cmwgPSBzb3VyY2UudXJsO1xuICAgIGZldGNoKFxuICAgICAgdXJsLFxuICAgICAgY3JlYXRlRmV0Y2hPcHRpb25zKGhlYWRlcnMsIHRoaXMuX3dpdGhDcmVkZW50aWFscywgdGhpcy5fYWJvcnRDb250cm9sbGVyKVxuICAgIClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VPcmlnaW4gPSBnZXRSZXNwb25zZU9yaWdpbihyZXNwb25zZS51cmwpO1xuXG4gICAgICAgIGlmIChyZXNwb25zZU9yaWdpbiAhPT0gc3RyZWFtLl9yZXNwb25zZU9yaWdpbikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBFeHBlY3RlZCByYW5nZSByZXNwb25zZS1vcmlnaW4gXCIke3Jlc3BvbnNlT3JpZ2lufVwiIHRvIG1hdGNoIFwiJHtzdHJlYW0uX3Jlc3BvbnNlT3JpZ2lufVwiLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdmFsaWRhdGVSZXNwb25zZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgICAgICAgdGhyb3cgY3JlYXRlUmVzcG9uc2VFcnJvcihyZXNwb25zZS5zdGF0dXMsIHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgICB0aGlzLl9yZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCh0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZWplY3QpO1xuXG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgfVxuXG4gIGdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQ7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGF3YWl0IHRoaXMuX3JlYWRDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgdGhpcy5fcmVhZGVyLnJlYWQoKTtcbiAgICBpZiAoZG9uZSkge1xuICAgICAgcmV0dXJuIHsgdmFsdWUsIGRvbmUgfTtcbiAgICB9XG4gICAgdGhpcy5fbG9hZGVkICs9IHZhbHVlLmJ5dGVMZW5ndGg7XG4gICAgdGhpcy5vblByb2dyZXNzPy4oeyBsb2FkZWQ6IHRoaXMuX2xvYWRlZCB9KTtcblxuICAgIHJldHVybiB7IHZhbHVlOiBnZXRBcnJheUJ1ZmZlcih2YWx1ZSksIGRvbmU6IGZhbHNlIH07XG4gIH1cblxuICBjYW5jZWwocmVhc29uKSB7XG4gICAgdGhpcy5fcmVhZGVyPy5jYW5jZWwocmVhc29uKTtcbiAgICB0aGlzLl9hYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBQREZGZXRjaFN0cmVhbSB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDEyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBhc3NlcnQsIHN0cmluZ1RvQnl0ZXMsIHdhcm4gfSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUhlYWRlcnMsXG4gIGNyZWF0ZVJlc3BvbnNlRXJyb3IsXG4gIGV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXIsXG4gIGdldFJlc3BvbnNlT3JpZ2luLFxuICB2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyxcbn0gZnJvbSBcIi4vbmV0d29ya191dGlscy5qc1wiO1xuXG5pZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnTW9kdWxlIFwiLi9uZXR3b3JrLmpzXCIgc2hhbGwgbm90IGJlIHVzZWQgd2l0aCBNT1pDRU5UUkFMIGJ1aWxkcy4nXG4gICk7XG59XG5cbmNvbnN0IE9LX1JFU1BPTlNFID0gMjAwO1xuY29uc3QgUEFSVElBTF9DT05URU5UX1JFU1BPTlNFID0gMjA2O1xuXG5mdW5jdGlvbiBnZXRBcnJheUJ1ZmZlcih4aHIpIHtcbiAgY29uc3QgZGF0YSA9IHhoci5yZXNwb25zZTtcbiAgaWYgKHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXMoZGF0YSkuYnVmZmVyO1xufVxuXG5jbGFzcyBOZXR3b3JrTWFuYWdlciB7XG4gIF9yZXNwb25zZU9yaWdpbiA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoeyB1cmwsIGh0dHBIZWFkZXJzLCB3aXRoQ3JlZGVudGlhbHMgfSkge1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMuaXNIdHRwID0gL15odHRwcz86L2kudGVzdCh1cmwpO1xuICAgIHRoaXMuaGVhZGVycyA9IGNyZWF0ZUhlYWRlcnModGhpcy5pc0h0dHAsIGh0dHBIZWFkZXJzKTtcbiAgICB0aGlzLndpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFscyB8fCBmYWxzZTtcblxuICAgIHRoaXMuY3VyclhocklkID0gMDtcbiAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICByZXF1ZXN0KGFyZ3MpIHtcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICBjb25zdCB4aHJJZCA9IHRoaXMuY3VyclhocklkKys7XG4gICAgY29uc3QgcGVuZGluZ1JlcXVlc3QgPSAodGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdID0geyB4aHIgfSk7XG5cbiAgICB4aHIub3BlbihcIkdFVFwiLCB0aGlzLnVybCk7XG4gICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRoaXMud2l0aENyZWRlbnRpYWxzO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiB0aGlzLmhlYWRlcnMpIHtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNIdHRwICYmIFwiYmVnaW5cIiBpbiBhcmdzICYmIFwiZW5kXCIgaW4gYXJncykge1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJSYW5nZVwiLCBgYnl0ZXM9JHthcmdzLmJlZ2lufS0ke2FyZ3MuZW5kIC0gMX1gKTtcbiAgICAgIHBlbmRpbmdSZXF1ZXN0LmV4cGVjdGVkU3RhdHVzID0gUEFSVElBTF9DT05URU5UX1JFU1BPTlNFO1xuICAgIH0gZWxzZSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5leHBlY3RlZFN0YXR1cyA9IE9LX1JFU1BPTlNFO1xuICAgIH1cbiAgICB4aHIucmVzcG9uc2VUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xuXG4gICAgYXNzZXJ0KGFyZ3Mub25FcnJvciwgXCJFeHBlY3RlZCBgb25FcnJvcmAgY2FsbGJhY2sgdG8gYmUgcHJvdmlkZWQuXCIpO1xuICAgIHhoci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgYXJncy5vbkVycm9yKHhoci5zdGF0dXMpO1xuICAgIH07XG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHRoaXMub25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMsIHhocklkKTtcbiAgICB4aHIub25wcm9ncmVzcyA9IHRoaXMub25Qcm9ncmVzcy5iaW5kKHRoaXMsIHhocklkKTtcblxuICAgIHBlbmRpbmdSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkID0gYXJncy5vbkhlYWRlcnNSZWNlaXZlZDtcbiAgICBwZW5kaW5nUmVxdWVzdC5vbkRvbmUgPSBhcmdzLm9uRG9uZTtcbiAgICBwZW5kaW5nUmVxdWVzdC5vbkVycm9yID0gYXJncy5vbkVycm9yO1xuICAgIHBlbmRpbmdSZXF1ZXN0Lm9uUHJvZ3Jlc3MgPSBhcmdzLm9uUHJvZ3Jlc3M7XG5cbiAgICB4aHIuc2VuZChudWxsKTtcblxuICAgIHJldHVybiB4aHJJZDtcbiAgfVxuXG4gIG9uUHJvZ3Jlc3MoeGhySWQsIGV2dCkge1xuICAgIGNvbnN0IHBlbmRpbmdSZXF1ZXN0ID0gdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdO1xuICAgIGlmICghcGVuZGluZ1JlcXVlc3QpIHtcbiAgICAgIHJldHVybjsgLy8gTWF5YmUgYWJvcnRSZXF1ZXN0IHdhcyBjYWxsZWQuLi5cbiAgICB9XG4gICAgcGVuZGluZ1JlcXVlc3Qub25Qcm9ncmVzcz8uKGV2dCk7XG4gIH1cblxuICBvblN0YXRlQ2hhbmdlKHhocklkLCBldnQpIHtcbiAgICBjb25zdCBwZW5kaW5nUmVxdWVzdCA9IHRoaXMucGVuZGluZ1JlcXVlc3RzW3hocklkXTtcbiAgICBpZiAoIXBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICByZXR1cm47IC8vIE1heWJlIGFib3J0UmVxdWVzdCB3YXMgY2FsbGVkLi4uXG4gICAgfVxuXG4gICAgY29uc3QgeGhyID0gcGVuZGluZ1JlcXVlc3QueGhyO1xuICAgIGlmICh4aHIucmVhZHlTdGF0ZSA+PSAyICYmIHBlbmRpbmdSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkKSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5vbkhlYWRlcnNSZWNlaXZlZCgpO1xuICAgICAgZGVsZXRlIHBlbmRpbmdSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkO1xuICAgIH1cblxuICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghKHhocklkIGluIHRoaXMucGVuZGluZ1JlcXVlc3RzKSkge1xuICAgICAgLy8gVGhlIFhIUiByZXF1ZXN0IG1pZ2h0IGhhdmUgYmVlbiBhYm9ydGVkIGluIG9uSGVhZGVyc1JlY2VpdmVkKClcbiAgICAgIC8vIGNhbGxiYWNrLCBpbiB3aGljaCBjYXNlIHdlIHNob3VsZCBhYm9ydCByZXF1ZXN0LlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdSZXF1ZXN0c1t4aHJJZF07XG5cbiAgICAvLyBTdWNjZXNzIHN0YXR1cyA9PSAwIGNhbiBiZSBvbiBmdHAsIGZpbGUgYW5kIG90aGVyIHByb3RvY29scy5cbiAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMCAmJiB0aGlzLmlzSHR0cCkge1xuICAgICAgcGVuZGluZ1JlcXVlc3Qub25FcnJvcih4aHIuc3RhdHVzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeGhyU3RhdHVzID0geGhyLnN0YXR1cyB8fCBPS19SRVNQT05TRTtcblxuICAgIC8vIEZyb20gaHR0cDovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMxNC5odG1sI3NlYzE0LjM1LjI6XG4gICAgLy8gXCJBIHNlcnZlciBNQVkgaWdub3JlIHRoZSBSYW5nZSBoZWFkZXJcIi4gVGhpcyBtZWFucyBpdCdzIHBvc3NpYmxlIHRvXG4gICAgLy8gZ2V0IGEgMjAwIHJhdGhlciB0aGFuIGEgMjA2IHJlc3BvbnNlIGZyb20gYSByYW5nZSByZXF1ZXN0LlxuICAgIGNvbnN0IG9rX3Jlc3BvbnNlX29uX3JhbmdlX3JlcXVlc3QgPVxuICAgICAgeGhyU3RhdHVzID09PSBPS19SRVNQT05TRSAmJlxuICAgICAgcGVuZGluZ1JlcXVlc3QuZXhwZWN0ZWRTdGF0dXMgPT09IFBBUlRJQUxfQ09OVEVOVF9SRVNQT05TRTtcblxuICAgIGlmIChcbiAgICAgICFva19yZXNwb25zZV9vbl9yYW5nZV9yZXF1ZXN0ICYmXG4gICAgICB4aHJTdGF0dXMgIT09IHBlbmRpbmdSZXF1ZXN0LmV4cGVjdGVkU3RhdHVzXG4gICAgKSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5vbkVycm9yKHhoci5zdGF0dXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNodW5rID0gZ2V0QXJyYXlCdWZmZXIoeGhyKTtcbiAgICBpZiAoeGhyU3RhdHVzID09PSBQQVJUSUFMX0NPTlRFTlRfUkVTUE9OU0UpIHtcbiAgICAgIGNvbnN0IHJhbmdlSGVhZGVyID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1SYW5nZVwiKTtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSAvYnl0ZXMgKFxcZCspLShcXGQrKVxcLyhcXGQrKS8uZXhlYyhyYW5nZUhlYWRlcik7XG4gICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICBwZW5kaW5nUmVxdWVzdC5vbkRvbmUoe1xuICAgICAgICAgIGJlZ2luOiBwYXJzZUludChtYXRjaGVzWzFdLCAxMCksXG4gICAgICAgICAgY2h1bmssXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybihgTWlzc2luZyBvciBpbnZhbGlkIFwiQ29udGVudC1SYW5nZVwiIGhlYWRlci5gKTtcbiAgICAgICAgcGVuZGluZ1JlcXVlc3Qub25FcnJvcigwKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNodW5rKSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5vbkRvbmUoe1xuICAgICAgICBiZWdpbjogMCxcbiAgICAgICAgY2h1bmssXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGVuZGluZ1JlcXVlc3Qub25FcnJvcih4aHIuc3RhdHVzKTtcbiAgICB9XG4gIH1cblxuICBnZXRSZXF1ZXN0WGhyKHhocklkKSB7XG4gICAgcmV0dXJuIHRoaXMucGVuZGluZ1JlcXVlc3RzW3hocklkXS54aHI7XG4gIH1cblxuICBpc1BlbmRpbmdSZXF1ZXN0KHhocklkKSB7XG4gICAgcmV0dXJuIHhocklkIGluIHRoaXMucGVuZGluZ1JlcXVlc3RzO1xuICB9XG5cbiAgYWJvcnRSZXF1ZXN0KHhocklkKSB7XG4gICAgY29uc3QgeGhyID0gdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdLnhocjtcbiAgICBkZWxldGUgdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdO1xuICAgIHhoci5hYm9ydCgpO1xuICB9XG59XG5cbi8qKiBAaW1wbGVtZW50cyB7SVBERlN0cmVhbX0gKi9cbmNsYXNzIFBERk5ldHdvcmtTdHJlYW0ge1xuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5fbWFuYWdlciA9IG5ldyBOZXR3b3JrTWFuYWdlcihzb3VyY2UpO1xuICAgIHRoaXMuX3JhbmdlQ2h1bmtTaXplID0gc291cmNlLnJhbmdlQ2h1bmtTaXplO1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzID0gW107XG4gIH1cblxuICBfb25SYW5nZVJlcXVlc3RSZWFkZXJDbG9zZWQocmVhZGVyKSB7XG4gICAgY29uc3QgaSA9IHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuaW5kZXhPZihyZWFkZXIpO1xuICAgIGlmIChpID49IDApIHtcbiAgICAgIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxuXG4gIGdldEZ1bGxSZWFkZXIoKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgIXRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLFxuICAgICAgXCJQREZOZXR3b3JrU3RyZWFtLmdldEZ1bGxSZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuXCJcbiAgICApO1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbmV3IFBERk5ldHdvcmtTdHJlYW1GdWxsUmVxdWVzdFJlYWRlcihcbiAgICAgIHRoaXMuX21hbmFnZXIsXG4gICAgICB0aGlzLl9zb3VyY2VcbiAgICApO1xuICAgIHJldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcjtcbiAgfVxuXG4gIGdldFJhbmdlUmVhZGVyKGJlZ2luLCBlbmQpIHtcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgUERGTmV0d29ya1N0cmVhbVJhbmdlUmVxdWVzdFJlYWRlcihcbiAgICAgIHRoaXMuX21hbmFnZXIsXG4gICAgICBiZWdpbixcbiAgICAgIGVuZFxuICAgICk7XG4gICAgcmVhZGVyLm9uQ2xvc2VkID0gdGhpcy5fb25SYW5nZVJlcXVlc3RSZWFkZXJDbG9zZWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnB1c2gocmVhZGVyKTtcbiAgICByZXR1cm4gcmVhZGVyO1xuICB9XG5cbiAgY2FuY2VsQWxsUmVxdWVzdHMocmVhc29uKSB7XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/LmNhbmNlbChyZWFzb24pO1xuXG4gICAgZm9yIChjb25zdCByZWFkZXIgb2YgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycy5zbGljZSgwKSkge1xuICAgICAgcmVhZGVyLmNhbmNlbChyZWFzb24pO1xuICAgIH1cbiAgfVxufVxuXG4vKiogQGltcGxlbWVudHMge0lQREZTdHJlYW1SZWFkZXJ9ICovXG5jbGFzcyBQREZOZXR3b3JrU3RyZWFtRnVsbFJlcXVlc3RSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBzb3VyY2UpIHtcbiAgICB0aGlzLl9tYW5hZ2VyID0gbWFuYWdlcjtcblxuICAgIHRoaXMuX3VybCA9IHNvdXJjZS51cmw7XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RJZCA9IG1hbmFnZXIucmVxdWVzdCh7XG4gICAgICBvbkhlYWRlcnNSZWNlaXZlZDogdGhpcy5fb25IZWFkZXJzUmVjZWl2ZWQuYmluZCh0aGlzKSxcbiAgICAgIG9uRG9uZTogdGhpcy5fb25Eb25lLmJpbmQodGhpcyksXG4gICAgICBvbkVycm9yOiB0aGlzLl9vbkVycm9yLmJpbmQodGhpcyksXG4gICAgICBvblByb2dyZXNzOiB0aGlzLl9vblByb2dyZXNzLmJpbmQodGhpcyksXG4gICAgfSk7XG4gICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgICB0aGlzLl9kaXNhYmxlUmFuZ2UgPSBzb3VyY2UuZGlzYWJsZVJhbmdlIHx8IGZhbHNlO1xuICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSBzb3VyY2UubGVuZ3RoOyAvLyBPcHRpb25hbFxuICAgIHRoaXMuX3JhbmdlQ2h1bmtTaXplID0gc291cmNlLnJhbmdlQ2h1bmtTaXplO1xuICAgIGlmICghdGhpcy5fcmFuZ2VDaHVua1NpemUgJiYgIXRoaXMuX2Rpc2FibGVSYW5nZSkge1xuICAgICAgdGhpcy5fZGlzYWJsZVJhbmdlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuX2NhY2hlZENodW5rcyA9IFtdO1xuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5fZG9uZSA9IGZhbHNlO1xuICAgIHRoaXMuX3N0b3JlZEVycm9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2ZpbGVuYW1lID0gbnVsbDtcblxuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gIH1cblxuICBfb25IZWFkZXJzUmVjZWl2ZWQoKSB7XG4gICAgY29uc3QgZnVsbFJlcXVlc3RYaHJJZCA9IHRoaXMuX2Z1bGxSZXF1ZXN0SWQ7XG4gICAgY29uc3QgZnVsbFJlcXVlc3RYaHIgPSB0aGlzLl9tYW5hZ2VyLmdldFJlcXVlc3RYaHIoZnVsbFJlcXVlc3RYaHJJZCk7XG5cbiAgICB0aGlzLl9tYW5hZ2VyLl9yZXNwb25zZU9yaWdpbiA9IGdldFJlc3BvbnNlT3JpZ2luKFxuICAgICAgZnVsbFJlcXVlc3RYaHIucmVzcG9uc2VVUkxcbiAgICApO1xuXG4gICAgY29uc3QgcmF3UmVzcG9uc2VIZWFkZXJzID0gZnVsbFJlcXVlc3RYaHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk7XG4gICAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gbmV3IEhlYWRlcnMoXG4gICAgICByYXdSZXNwb25zZUhlYWRlcnNcbiAgICAgICAgPyByYXdSZXNwb25zZUhlYWRlcnNcbiAgICAgICAgICAgIC50cmltU3RhcnQoKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1teXFxTIF0rJC8sIFwiXCIpIC8vIE5vdCBgdHJpbUVuZGAsIHRvIGtlZXAgcmVndWxhciBzcGFjZXMuXG4gICAgICAgICAgICAuc3BsaXQoL1tcXHJcXG5dKy8pXG4gICAgICAgICAgICAubWFwKHggPT4ge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCAuLi52YWxdID0geC5zcGxpdChcIjogXCIpO1xuICAgICAgICAgICAgICByZXR1cm4gW2tleSwgdmFsLmpvaW4oXCI6IFwiKV07XG4gICAgICAgICAgICB9KVxuICAgICAgICA6IFtdXG4gICAgKTtcblxuICAgIGNvbnN0IHsgYWxsb3dSYW5nZVJlcXVlc3RzLCBzdWdnZXN0ZWRMZW5ndGggfSA9XG4gICAgICB2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyh7XG4gICAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgaXNIdHRwOiB0aGlzLl9tYW5hZ2VyLmlzSHR0cCxcbiAgICAgICAgcmFuZ2VDaHVua1NpemU6IHRoaXMuX3JhbmdlQ2h1bmtTaXplLFxuICAgICAgICBkaXNhYmxlUmFuZ2U6IHRoaXMuX2Rpc2FibGVSYW5nZSxcbiAgICAgIH0pO1xuXG4gICAgaWYgKGFsbG93UmFuZ2VSZXF1ZXN0cykge1xuICAgICAgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCA9IHRydWU7XG4gICAgfVxuICAgIC8vIFNldHRpbmcgcmlnaHQgY29udGVudCBsZW5ndGguXG4gICAgdGhpcy5fY29udGVudExlbmd0aCA9IHN1Z2dlc3RlZExlbmd0aCB8fCB0aGlzLl9jb250ZW50TGVuZ3RoO1xuXG4gICAgdGhpcy5fZmlsZW5hbWUgPSBleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKHJlc3BvbnNlSGVhZGVycyk7XG5cbiAgICBpZiAodGhpcy5faXNSYW5nZVN1cHBvcnRlZCkge1xuICAgICAgLy8gTk9URTogYnkgY2FuY2VsbGluZyB0aGUgZnVsbCByZXF1ZXN0LCBhbmQgdGhlbiBpc3N1aW5nIHJhbmdlXG4gICAgICAvLyByZXF1ZXN0cywgdGhlcmUgd2lsbCBiZSBhbiBpc3N1ZSBmb3Igc2l0ZXMgd2hlcmUgeW91IGNhbiBvbmx5XG4gICAgICAvLyByZXF1ZXN0IHRoZSBwZGYgb25jZS4gSG93ZXZlciwgaWYgdGhpcyBpcyB0aGUgY2FzZSwgdGhlbiB0aGVcbiAgICAgIC8vIHNlcnZlciBzaG91bGQgbm90IGJlIHJldHVybmluZyB0aGF0IGl0IGNhbiBzdXBwb3J0IHJhbmdlIHJlcXVlc3RzLlxuICAgICAgdGhpcy5fbWFuYWdlci5hYm9ydFJlcXVlc3QoZnVsbFJlcXVlc3RYaHJJZCk7XG4gICAgfVxuXG4gICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX29uRG9uZShkYXRhKSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGlmICh0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5ID0gdGhpcy5fcmVxdWVzdHMuc2hpZnQoKTtcbiAgICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiBkYXRhLmNodW5rLCBkb25lOiBmYWxzZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZENodW5rcy5wdXNoKGRhdGEuY2h1bmspO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9kb25lID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5fY2FjaGVkQ2h1bmtzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgfVxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBfb25FcnJvcihzdGF0dXMpIHtcbiAgICB0aGlzLl9zdG9yZWRFcnJvciA9IGNyZWF0ZVJlc3BvbnNlRXJyb3Ioc3RhdHVzLCB0aGlzLl91cmwpO1xuICAgIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnJlamVjdCh0aGlzLl9zdG9yZWRFcnJvcik7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVqZWN0KHRoaXMuX3N0b3JlZEVycm9yKTtcbiAgICB9XG4gICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9jYWNoZWRDaHVua3MubGVuZ3RoID0gMDtcbiAgfVxuXG4gIF9vblByb2dyZXNzKGV2dCkge1xuICAgIHRoaXMub25Qcm9ncmVzcz8uKHtcbiAgICAgIGxvYWRlZDogZXZ0LmxvYWRlZCxcbiAgICAgIHRvdGFsOiBldnQubGVuZ3RoQ29tcHV0YWJsZSA/IGV2dC50b3RhbCA6IHRoaXMuX2NvbnRlbnRMZW5ndGgsXG4gICAgfSk7XG4gIH1cblxuICBnZXQgZmlsZW5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpbGVuYW1lO1xuICB9XG5cbiAgZ2V0IGlzUmFuZ2VTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ7XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGNvbnRlbnRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRMZW5ndGg7XG4gIH1cblxuICBnZXQgaGVhZGVyc1JlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgYXN5bmMgcmVhZCgpIHtcbiAgICBhd2FpdCB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5wcm9taXNlO1xuXG4gICAgaWYgKHRoaXMuX3N0b3JlZEVycm9yKSB7XG4gICAgICB0aHJvdyB0aGlzLl9zdG9yZWRFcnJvcjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2NhY2hlZENodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjaHVuayA9IHRoaXMuX2NhY2hlZENodW5rcy5zaGlmdCgpO1xuICAgICAgcmV0dXJuIHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9O1xuICAgIH1cbiAgICBpZiAodGhpcy5fZG9uZSkge1xuICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSA9IFByb21pc2Uud2l0aFJlc29sdmVycygpO1xuICAgIHRoaXMuX3JlcXVlc3RzLnB1c2gocmVxdWVzdENhcGFiaWxpdHkpO1xuICAgIHJldHVybiByZXF1ZXN0Q2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIHRoaXMuX2RvbmUgPSB0cnVlO1xuICAgIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnJlamVjdChyZWFzb24pO1xuICAgIGZvciAoY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgIH1cbiAgICB0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPSAwO1xuICAgIGlmICh0aGlzLl9tYW5hZ2VyLmlzUGVuZGluZ1JlcXVlc3QodGhpcy5fZnVsbFJlcXVlc3RJZCkpIHtcbiAgICAgIHRoaXMuX21hbmFnZXIuYWJvcnRSZXF1ZXN0KHRoaXMuX2Z1bGxSZXF1ZXN0SWQpO1xuICAgIH1cbiAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlciA9IG51bGw7XG4gIH1cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHtJUERGU3RyZWFtUmFuZ2VSZWFkZXJ9ICovXG5jbGFzcyBQREZOZXR3b3JrU3RyZWFtUmFuZ2VSZXF1ZXN0UmVhZGVyIHtcbiAgY29uc3RydWN0b3IobWFuYWdlciwgYmVnaW4sIGVuZCkge1xuICAgIHRoaXMuX21hbmFnZXIgPSBtYW5hZ2VyO1xuXG4gICAgdGhpcy5fdXJsID0gbWFuYWdlci51cmw7XG4gICAgdGhpcy5fcmVxdWVzdElkID0gbWFuYWdlci5yZXF1ZXN0KHtcbiAgICAgIGJlZ2luLFxuICAgICAgZW5kLFxuICAgICAgb25IZWFkZXJzUmVjZWl2ZWQ6IHRoaXMuX29uSGVhZGVyc1JlY2VpdmVkLmJpbmQodGhpcyksXG4gICAgICBvbkRvbmU6IHRoaXMuX29uRG9uZS5iaW5kKHRoaXMpLFxuICAgICAgb25FcnJvcjogdGhpcy5fb25FcnJvci5iaW5kKHRoaXMpLFxuICAgICAgb25Qcm9ncmVzczogdGhpcy5fb25Qcm9ncmVzcy5iaW5kKHRoaXMpLFxuICAgIH0pO1xuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBudWxsO1xuICAgIHRoaXMuX2RvbmUgPSBmYWxzZTtcbiAgICB0aGlzLl9zdG9yZWRFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gICAgdGhpcy5vbkNsb3NlZCA9IG51bGw7XG4gIH1cblxuICBfb25IZWFkZXJzUmVjZWl2ZWQoKSB7XG4gICAgY29uc3QgcmVzcG9uc2VPcmlnaW4gPSBnZXRSZXNwb25zZU9yaWdpbihcbiAgICAgIHRoaXMuX21hbmFnZXIuZ2V0UmVxdWVzdFhocih0aGlzLl9yZXF1ZXN0SWQpPy5yZXNwb25zZVVSTFxuICAgICk7XG5cbiAgICBpZiAocmVzcG9uc2VPcmlnaW4gIT09IHRoaXMuX21hbmFnZXIuX3Jlc3BvbnNlT3JpZ2luKSB7XG4gICAgICB0aGlzLl9zdG9yZWRFcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgYEV4cGVjdGVkIHJhbmdlIHJlc3BvbnNlLW9yaWdpbiBcIiR7cmVzcG9uc2VPcmlnaW59XCIgdG8gbWF0Y2ggXCIke3RoaXMuX21hbmFnZXIuX3Jlc3BvbnNlT3JpZ2lufVwiLmBcbiAgICAgICk7XG4gICAgICB0aGlzLl9vbkVycm9yKDApO1xuICAgIH1cbiAgfVxuXG4gIF9jbG9zZSgpIHtcbiAgICB0aGlzLm9uQ2xvc2VkPy4odGhpcyk7XG4gIH1cblxuICBfb25Eb25lKGRhdGEpIHtcbiAgICBjb25zdCBjaHVuayA9IGRhdGEuY2h1bms7XG4gICAgaWYgKHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5ID0gdGhpcy5fcmVxdWVzdHMuc2hpZnQoKTtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9xdWV1ZWRDaHVuayA9IGNodW5rO1xuICAgIH1cbiAgICB0aGlzLl9kb25lID0gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5IG9mIHRoaXMuX3JlcXVlc3RzKSB7XG4gICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9jbG9zZSgpO1xuICB9XG5cbiAgX29uRXJyb3Ioc3RhdHVzKSB7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPz89IGNyZWF0ZVJlc3BvbnNlRXJyb3Ioc3RhdHVzLCB0aGlzLl91cmwpO1xuICAgIGZvciAoY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlamVjdCh0aGlzLl9zdG9yZWRFcnJvcik7XG4gICAgfVxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBudWxsO1xuICB9XG5cbiAgX29uUHJvZ3Jlc3MoZXZ0KSB7XG4gICAgaWYgKCF0aGlzLmlzU3RyZWFtaW5nU3VwcG9ydGVkKSB7XG4gICAgICB0aGlzLm9uUHJvZ3Jlc3M/Lih7IGxvYWRlZDogZXZ0LmxvYWRlZCB9KTtcbiAgICB9XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgcmVhZCgpIHtcbiAgICBpZiAodGhpcy5fc3RvcmVkRXJyb3IpIHtcbiAgICAgIHRocm93IHRoaXMuX3N0b3JlZEVycm9yO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcXVldWVkQ2h1bmsgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5fcXVldWVkQ2h1bms7XG4gICAgICB0aGlzLl9xdWV1ZWRDaHVuayA9IG51bGw7XG4gICAgICByZXR1cm4geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH07XG4gICAgfVxuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgfVxuICAgIGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgdGhpcy5fcmVxdWVzdHMucHVzaChyZXF1ZXN0Q2FwYWJpbGl0eSk7XG4gICAgcmV0dXJuIHJlcXVlc3RDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBjYW5jZWwocmVhc29uKSB7XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgfVxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gICAgaWYgKHRoaXMuX21hbmFnZXIuaXNQZW5kaW5nUmVxdWVzdCh0aGlzLl9yZXF1ZXN0SWQpKSB7XG4gICAgICB0aGlzLl9tYW5hZ2VyLmFib3J0UmVxdWVzdCh0aGlzLl9yZXF1ZXN0SWQpO1xuICAgIH1cbiAgICB0aGlzLl9jbG9zZSgpO1xuICB9XG59XG5cbmV4cG9ydCB7IFBERk5ldHdvcmtTdHJlYW0gfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qIGdsb2JhbHMgcHJvY2VzcyAqL1xuXG5pbXBvcnQgeyBBYm9ydEV4Y2VwdGlvbiwgYXNzZXJ0IH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4vbmV0d29ya191dGlscy5qc1wiO1xuXG5pZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnTW9kdWxlIFwiLi9ub2RlX3N0cmVhbS5qc1wiIHNoYWxsIG5vdCBiZSB1c2VkIHdpdGggTU9aQ0VOVFJBTCBidWlsZHMuJ1xuICApO1xufVxuXG5jb25zdCB1cmxSZWdleCA9IC9eW2Etel1bYS16MC05XFwtKy5dKzovaTtcblxuZnVuY3Rpb24gcGFyc2VVcmxPclBhdGgoc291cmNlVXJsKSB7XG4gIGlmICh1cmxSZWdleC50ZXN0KHNvdXJjZVVybCkpIHtcbiAgICByZXR1cm4gbmV3IFVSTChzb3VyY2VVcmwpO1xuICB9XG4gIGNvbnN0IHVybCA9IHByb2Nlc3MuZ2V0QnVpbHRpbk1vZHVsZShcInVybFwiKTtcbiAgcmV0dXJuIG5ldyBVUkwodXJsLnBhdGhUb0ZpbGVVUkwoc291cmNlVXJsKSk7XG59XG5cbmNsYXNzIFBERk5vZGVTdHJlYW0ge1xuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLnVybCA9IHBhcnNlVXJsT3JQYXRoKHNvdXJjZS51cmwpO1xuICAgIGFzc2VydChcbiAgICAgIHRoaXMudXJsLnByb3RvY29sID09PSBcImZpbGU6XCIsXG4gICAgICBcIlBERk5vZGVTdHJlYW0gb25seSBzdXBwb3J0cyBmaWxlOi8vIFVSTHMuXCJcbiAgICApO1xuXG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIgPSBudWxsO1xuICAgIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMgPSBbXTtcbiAgfVxuXG4gIGdldCBfcHJvZ3Jlc3NpdmVEYXRhTGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj8uX2xvYWRlZCA/PyAwO1xuICB9XG5cbiAgZ2V0RnVsbFJlYWRlcigpIHtcbiAgICBhc3NlcnQoXG4gICAgICAhdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIsXG4gICAgICBcIlBERk5vZGVTdHJlYW0uZ2V0RnVsbFJlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZS5cIlxuICAgICk7XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIgPSBuZXcgUERGTm9kZVN0cmVhbUZzRnVsbFJlYWRlcih0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI7XG4gIH1cblxuICBnZXRSYW5nZVJlYWRlcihzdGFydCwgZW5kKSB7XG4gICAgaWYgKGVuZCA8PSB0aGlzLl9wcm9ncmVzc2l2ZURhdGFMZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCByYW5nZVJlYWRlciA9IG5ldyBQREZOb2RlU3RyZWFtRnNSYW5nZVJlYWRlcih0aGlzLCBzdGFydCwgZW5kKTtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnB1c2gocmFuZ2VSZWFkZXIpO1xuICAgIHJldHVybiByYW5nZVJlYWRlcjtcbiAgfVxuXG4gIGNhbmNlbEFsbFJlcXVlc3RzKHJlYXNvbikge1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyPy5jYW5jZWwocmVhc29uKTtcblxuICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuc2xpY2UoMCkpIHtcbiAgICAgIHJlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgUERGTm9kZVN0cmVhbUZzRnVsbFJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHN0cmVhbSkge1xuICAgIHRoaXMuX3VybCA9IHN0cmVhbS51cmw7XG4gICAgdGhpcy5fZG9uZSA9IGZhbHNlO1xuICAgIHRoaXMuX3N0b3JlZEVycm9yID0gbnVsbDtcbiAgICB0aGlzLm9uUHJvZ3Jlc3MgPSBudWxsO1xuICAgIGNvbnN0IHNvdXJjZSA9IHN0cmVhbS5zb3VyY2U7XG4gICAgdGhpcy5fY29udGVudExlbmd0aCA9IHNvdXJjZS5sZW5ndGg7IC8vIG9wdGlvbmFsXG4gICAgdGhpcy5fbG9hZGVkID0gMDtcbiAgICB0aGlzLl9maWxlbmFtZSA9IG51bGw7XG5cbiAgICB0aGlzLl9kaXNhYmxlUmFuZ2UgPSBzb3VyY2UuZGlzYWJsZVJhbmdlIHx8IGZhbHNlO1xuICAgIHRoaXMuX3JhbmdlQ2h1bmtTaXplID0gc291cmNlLnJhbmdlQ2h1bmtTaXplO1xuICAgIGlmICghdGhpcy5fcmFuZ2VDaHVua1NpemUgJiYgIXRoaXMuX2Rpc2FibGVSYW5nZSkge1xuICAgICAgdGhpcy5fZGlzYWJsZVJhbmdlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZCA9ICFzb3VyY2UuZGlzYWJsZVN0cmVhbTtcbiAgICB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkID0gIXNvdXJjZS5kaXNhYmxlUmFuZ2U7XG5cbiAgICB0aGlzLl9yZWFkYWJsZVN0cmVhbSA9IG51bGw7XG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eSA9IFByb21pc2Uud2l0aFJlc29sdmVycygpO1xuXG4gICAgY29uc3QgZnMgPSBwcm9jZXNzLmdldEJ1aWx0aW5Nb2R1bGUoXCJmc1wiKTtcbiAgICBmcy5wcm9taXNlcy5sc3RhdCh0aGlzLl91cmwpLnRoZW4oXG4gICAgICBzdGF0ID0+IHtcbiAgICAgICAgLy8gU2V0dGluZyByaWdodCBjb250ZW50IGxlbmd0aC5cbiAgICAgICAgdGhpcy5fY29udGVudExlbmd0aCA9IHN0YXQuc2l6ZTtcblxuICAgICAgICB0aGlzLl9zZXRSZWFkYWJsZVN0cmVhbShmcy5jcmVhdGVSZWFkU3RyZWFtKHRoaXMuX3VybCkpO1xuICAgICAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgICB9LFxuICAgICAgZXJyb3IgPT4ge1xuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gXCJFTk9FTlRcIikge1xuICAgICAgICAgIGVycm9yID0gY3JlYXRlUmVzcG9uc2VFcnJvcigvKiBzdGF0dXMgPSAqLyAwLCB0aGlzLl91cmwuaHJlZik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RvcmVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZ2V0IGhlYWRlcnNSZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIGdldCBmaWxlbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlsZW5hbWU7XG4gIH1cblxuICBnZXQgY29udGVudExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGVudExlbmd0aDtcbiAgfVxuXG4gIGdldCBpc1JhbmdlU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZDtcbiAgfVxuXG4gIGFzeW5jIHJlYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5fcmVhZENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICBpZiAodGhpcy5fZG9uZSkge1xuICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3RvcmVkRXJyb3IpIHtcbiAgICAgIHRocm93IHRoaXMuX3N0b3JlZEVycm9yO1xuICAgIH1cblxuICAgIGNvbnN0IGNodW5rID0gdGhpcy5fcmVhZGFibGVTdHJlYW0ucmVhZCgpO1xuICAgIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fcmVhZENhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgICAgIHJldHVybiB0aGlzLnJlYWQoKTtcbiAgICB9XG4gICAgdGhpcy5fbG9hZGVkICs9IGNodW5rLmxlbmd0aDtcbiAgICB0aGlzLm9uUHJvZ3Jlc3M/Lih7XG4gICAgICBsb2FkZWQ6IHRoaXMuX2xvYWRlZCxcbiAgICAgIHRvdGFsOiB0aGlzLl9jb250ZW50TGVuZ3RoLFxuICAgIH0pO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgYHJlYWQoKWAgbWV0aG9kIHJldHVybnMgQXJyYXlCdWZmZXIuXG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmspLmJ1ZmZlcjtcbiAgICByZXR1cm4geyB2YWx1ZTogYnVmZmVyLCBkb25lOiBmYWxzZSB9O1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIC8vIENhbGwgYHRoaXMuX2Vycm9yKClgIG1ldGhvZCB3aGVuIGNhbmNlbCBpcyBjYWxsZWRcbiAgICAvLyBiZWZvcmUgX3JlYWRhYmxlU3RyZWFtIGlzIHNldC5cbiAgICBpZiAoIXRoaXMuX3JlYWRhYmxlU3RyZWFtKSB7XG4gICAgICB0aGlzLl9lcnJvcihyZWFzb24pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9yZWFkYWJsZVN0cmVhbS5kZXN0cm95KHJlYXNvbik7XG4gIH1cblxuICBfZXJyb3IocmVhc29uKSB7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPSByZWFzb247XG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX3NldFJlYWRhYmxlU3RyZWFtKHJlYWRhYmxlU3RyZWFtKSB7XG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0gPSByZWFkYWJsZVN0cmVhbTtcbiAgICByZWFkYWJsZVN0cmVhbS5vbihcInJlYWRhYmxlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJlYWRhYmxlU3RyZWFtLm9uKFwiZW5kXCIsICgpID0+IHtcbiAgICAgIC8vIERlc3Ryb3kgcmVhZGFibGUgdG8gbWluaW1pemUgcmVzb3VyY2UgdXNhZ2UuXG4gICAgICByZWFkYWJsZVN0cmVhbS5kZXN0cm95KCk7XG4gICAgICB0aGlzLl9kb25lID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJlYWRhYmxlU3RyZWFtLm9uKFwiZXJyb3JcIiwgcmVhc29uID0+IHtcbiAgICAgIHRoaXMuX2Vycm9yKHJlYXNvbik7XG4gICAgfSk7XG5cbiAgICAvLyBXZSBuZWVkIHRvIHN0b3AgcmVhZGluZyB3aGVuIHJhbmdlIGlzIHN1cHBvcnRlZCBhbmQgc3RyZWFtaW5nIGlzXG4gICAgLy8gZGlzYWJsZWQuXG4gICAgaWYgKCF0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZCAmJiB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkKSB7XG4gICAgICB0aGlzLl9lcnJvcihuZXcgQWJvcnRFeGNlcHRpb24oXCJzdHJlYW1pbmcgaXMgZGlzYWJsZWRcIikpO1xuICAgIH1cblxuICAgIC8vIERlc3Ryb3kgUmVhZGFibGVTdHJlYW0gaWYgYWxyZWFkeSBpbiBlcnJvcmVkIHN0YXRlLlxuICAgIGlmICh0aGlzLl9zdG9yZWRFcnJvcikge1xuICAgICAgdGhpcy5fcmVhZGFibGVTdHJlYW0uZGVzdHJveSh0aGlzLl9zdG9yZWRFcnJvcik7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFBERk5vZGVTdHJlYW1Gc1JhbmdlUmVhZGVyIHtcbiAgY29uc3RydWN0b3Ioc3RyZWFtLCBzdGFydCwgZW5kKSB7XG4gICAgdGhpcy5fdXJsID0gc3RyZWFtLnVybDtcbiAgICB0aGlzLl9kb25lID0gZmFsc2U7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPSBudWxsO1xuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gICAgdGhpcy5fbG9hZGVkID0gMDtcbiAgICB0aGlzLl9yZWFkYWJsZVN0cmVhbSA9IG51bGw7XG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJlYW0uc291cmNlO1xuICAgIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkID0gIXNvdXJjZS5kaXNhYmxlU3RyZWFtO1xuXG4gICAgY29uc3QgZnMgPSBwcm9jZXNzLmdldEJ1aWx0aW5Nb2R1bGUoXCJmc1wiKTtcbiAgICB0aGlzLl9zZXRSZWFkYWJsZVN0cmVhbShcbiAgICAgIGZzLmNyZWF0ZVJlYWRTdHJlYW0odGhpcy5fdXJsLCB7IHN0YXJ0LCBlbmQ6IGVuZCAtIDEgfSlcbiAgICApO1xuICB9XG5cbiAgZ2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZDtcbiAgfVxuXG4gIGFzeW5jIHJlYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5fcmVhZENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICBpZiAodGhpcy5fZG9uZSkge1xuICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3RvcmVkRXJyb3IpIHtcbiAgICAgIHRocm93IHRoaXMuX3N0b3JlZEVycm9yO1xuICAgIH1cblxuICAgIGNvbnN0IGNodW5rID0gdGhpcy5fcmVhZGFibGVTdHJlYW0ucmVhZCgpO1xuICAgIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fcmVhZENhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgICAgIHJldHVybiB0aGlzLnJlYWQoKTtcbiAgICB9XG4gICAgdGhpcy5fbG9hZGVkICs9IGNodW5rLmxlbmd0aDtcbiAgICB0aGlzLm9uUHJvZ3Jlc3M/Lih7IGxvYWRlZDogdGhpcy5fbG9hZGVkIH0pO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgYHJlYWQoKWAgbWV0aG9kIHJldHVybnMgQXJyYXlCdWZmZXIuXG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmspLmJ1ZmZlcjtcbiAgICByZXR1cm4geyB2YWx1ZTogYnVmZmVyLCBkb25lOiBmYWxzZSB9O1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIC8vIENhbGwgYHRoaXMuX2Vycm9yKClgIG1ldGhvZCB3aGVuIGNhbmNlbCBpcyBjYWxsZWRcbiAgICAvLyBiZWZvcmUgX3JlYWRhYmxlU3RyZWFtIGlzIHNldC5cbiAgICBpZiAoIXRoaXMuX3JlYWRhYmxlU3RyZWFtKSB7XG4gICAgICB0aGlzLl9lcnJvcihyZWFzb24pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9yZWFkYWJsZVN0cmVhbS5kZXN0cm95KHJlYXNvbik7XG4gIH1cblxuICBfZXJyb3IocmVhc29uKSB7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPSByZWFzb247XG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX3NldFJlYWRhYmxlU3RyZWFtKHJlYWRhYmxlU3RyZWFtKSB7XG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0gPSByZWFkYWJsZVN0cmVhbTtcbiAgICByZWFkYWJsZVN0cmVhbS5vbihcInJlYWRhYmxlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJlYWRhYmxlU3RyZWFtLm9uKFwiZW5kXCIsICgpID0+IHtcbiAgICAgIC8vIERlc3Ryb3kgcmVhZGFibGVTdHJlYW0gdG8gbWluaW1pemUgcmVzb3VyY2UgdXNhZ2UuXG4gICAgICByZWFkYWJsZVN0cmVhbS5kZXN0cm95KCk7XG4gICAgICB0aGlzLl9kb25lID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJlYWRhYmxlU3RyZWFtLm9uKFwiZXJyb3JcIiwgcmVhc29uID0+IHtcbiAgICAgIHRoaXMuX2Vycm9yKHJlYXNvbik7XG4gICAgfSk7XG5cbiAgICAvLyBEZXN0cm95IHJlYWRhYmxlU3RyZWFtIGlmIGFscmVhZHkgaW4gZXJyb3JlZCBzdGF0ZS5cbiAgICBpZiAodGhpcy5fc3RvcmVkRXJyb3IpIHtcbiAgICAgIHRoaXMuX3JlYWRhYmxlU3RyZWFtLmRlc3Ryb3kodGhpcy5fc3RvcmVkRXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBQREZOb2RlU3RyZWFtIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTUgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9kaXNwbGF5X3V0aWxzXCIpLlBhZ2VWaWV3cG9ydH0gUGFnZVZpZXdwb3J0ICovXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vYXBpXCIpLlRleHRDb250ZW50fSBUZXh0Q29udGVudCAqL1xuXG5pbXBvcnQge1xuICBBYm9ydEV4Y2VwdGlvbixcbiAgRmVhdHVyZVRlc3QsXG4gIHNoYWRvdyxcbiAgVXRpbCxcbiAgd2Fybixcbn0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQgeyBPdXRwdXRTY2FsZSwgc2V0TGF5ZXJEaW1lbnNpb25zIH0gZnJvbSBcIi4vZGlzcGxheV91dGlscy5qc1wiO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHRMYXllclBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7UmVhZGFibGVTdHJlYW0gfCBUZXh0Q29udGVudH0gdGV4dENvbnRlbnRTb3VyY2UgLSBUZXh0IGNvbnRlbnQgdG9cbiAqICAgcmVuZGVyLCBpLmUuIHRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgcGFnZSdzIGBzdHJlYW1UZXh0Q29udGVudGAgb3JcbiAqICAgYGdldFRleHRDb250ZW50YCBtZXRob2QuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBUaGUgRE9NIG5vZGUgdGhhdCB3aWxsIGNvbnRhaW4gdGhlIHRleHRcbiAqICAgcnVucy5cbiAqIEBwcm9wZXJ0eSB7UGFnZVZpZXdwb3J0fSB2aWV3cG9ydCAtIFRoZSB0YXJnZXQgdmlld3BvcnQgdG8gcHJvcGVybHkgbGF5b3V0XG4gKiAgIHRoZSB0ZXh0IHJ1bnMuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0TGF5ZXJVcGRhdGVQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge1BhZ2VWaWV3cG9ydH0gdmlld3BvcnQgLSBUaGUgdGFyZ2V0IHZpZXdwb3J0IHRvIHByb3Blcmx5IGxheW91dFxuICogICB0aGUgdGV4dCBydW5zLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gW29uQmVmb3JlXSAtIENhbGxiYWNrIGludm9rZWQgYmVmb3JlIHRoZSB0ZXh0TGF5ZXIgaXNcbiAqICAgdXBkYXRlZCBpbiB0aGUgRE9NLlxuICovXG5cbmNvbnN0IE1BWF9URVhUX0RJVlNfVE9fUkVOREVSID0gMTAwMDAwO1xuY29uc3QgREVGQVVMVF9GT05UX1NJWkUgPSAzMDtcblxuY2xhc3MgVGV4dExheWVyIHtcbiAgI2NhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcblxuICAjY29udGFpbmVyID0gbnVsbDtcblxuICAjZGlzYWJsZVByb2Nlc3NJdGVtcyA9IGZhbHNlO1xuXG4gICNmb250SW5zcGVjdG9yRW5hYmxlZCA9ICEhZ2xvYmFsVGhpcy5Gb250SW5zcGVjdG9yPy5lbmFibGVkO1xuXG4gICNsYW5nID0gbnVsbDtcblxuICAjbGF5b3V0VGV4dFBhcmFtcyA9IG51bGw7XG5cbiAgI3BhZ2VIZWlnaHQgPSAwO1xuXG4gICNwYWdlV2lkdGggPSAwO1xuXG4gICNyZWFkZXIgPSBudWxsO1xuXG4gICNyb290Q29udGFpbmVyID0gbnVsbDtcblxuICAjcm90YXRpb24gPSAwO1xuXG4gICNzY2FsZSA9IDA7XG5cbiAgI3N0eWxlQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICN0ZXh0Q29udGVudEl0ZW1zU3RyID0gW107XG5cbiAgI3RleHRDb250ZW50U291cmNlID0gbnVsbDtcblxuICAjdGV4dERpdnMgPSBbXTtcblxuICAjdGV4dERpdlByb3BlcnRpZXMgPSBuZXcgV2Vha01hcCgpO1xuXG4gICN0cmFuc2Zvcm0gPSBudWxsO1xuXG4gIHN0YXRpYyAjYXNjZW50Q2FjaGUgPSBuZXcgTWFwKCk7XG5cbiAgc3RhdGljICNjYW52YXNDb250ZXh0cyA9IG5ldyBNYXAoKTtcblxuICBzdGF0aWMgI2NhbnZhc0N0eEZvbnRzID0gbmV3IFdlYWtNYXAoKTtcblxuICBzdGF0aWMgI21pbkZvbnRTaXplID0gbnVsbDtcblxuICBzdGF0aWMgI3BlbmRpbmdUZXh0TGF5ZXJzID0gbmV3IFNldCgpO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1RleHRMYXllclBhcmFtZXRlcnN9IG9wdGlvbnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHsgdGV4dENvbnRlbnRTb3VyY2UsIGNvbnRhaW5lciwgdmlld3BvcnQgfSkge1xuICAgIGlmICh0ZXh0Q29udGVudFNvdXJjZSBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSB7XG4gICAgICB0aGlzLiN0ZXh0Q29udGVudFNvdXJjZSA9IHRleHRDb250ZW50U291cmNlO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJHRU5FUklDXCIpKSAmJlxuICAgICAgdHlwZW9mIHRleHRDb250ZW50U291cmNlID09PSBcIm9iamVjdFwiXG4gICAgKSB7XG4gICAgICB0aGlzLiN0ZXh0Q29udGVudFNvdXJjZSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodGV4dENvbnRlbnRTb3VyY2UpO1xuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIFwidGV4dENvbnRlbnRTb3VyY2VcIiBwYXJhbWV0ZXIgc3BlY2lmaWVkLicpO1xuICAgIH1cbiAgICB0aGlzLiNjb250YWluZXIgPSB0aGlzLiNyb290Q29udGFpbmVyID0gY29udGFpbmVyO1xuXG4gICAgdGhpcy4jc2NhbGUgPSB2aWV3cG9ydC5zY2FsZSAqIE91dHB1dFNjYWxlLnBpeGVsUmF0aW87XG4gICAgdGhpcy4jcm90YXRpb24gPSB2aWV3cG9ydC5yb3RhdGlvbjtcbiAgICB0aGlzLiNsYXlvdXRUZXh0UGFyYW1zID0ge1xuICAgICAgZGl2OiBudWxsLFxuICAgICAgcHJvcGVydGllczogbnVsbCxcbiAgICAgIGN0eDogbnVsbCxcbiAgICB9O1xuICAgIGNvbnN0IHsgcGFnZVdpZHRoLCBwYWdlSGVpZ2h0LCBwYWdlWCwgcGFnZVkgfSA9IHZpZXdwb3J0LnJhd0RpbXM7XG4gICAgdGhpcy4jdHJhbnNmb3JtID0gWzEsIDAsIDAsIC0xLCAtcGFnZVgsIHBhZ2VZICsgcGFnZUhlaWdodF07XG4gICAgdGhpcy4jcGFnZVdpZHRoID0gcGFnZVdpZHRoO1xuICAgIHRoaXMuI3BhZ2VIZWlnaHQgPSBwYWdlSGVpZ2h0O1xuXG4gICAgVGV4dExheWVyLiNlbnN1cmVNaW5Gb250U2l6ZUNvbXB1dGVkKCk7XG5cbiAgICBzZXRMYXllckRpbWVuc2lvbnMoY29udGFpbmVyLCB2aWV3cG9ydCk7XG5cbiAgICAvLyBBbHdheXMgY2xlYW4tdXAgdGhlIHRlbXBvcmFyeSBjYW52YXMgb25jZSByZW5kZXJpbmcgaXMgbm8gbG9uZ2VyIHBlbmRpbmcuXG4gICAgdGhpcy4jY2FwYWJpbGl0eS5wcm9taXNlXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIFRleHRMYXllci4jcGVuZGluZ1RleHRMYXllcnMuZGVsZXRlKHRoaXMpO1xuICAgICAgICB0aGlzLiNsYXlvdXRUZXh0UGFyYW1zID0gbnVsbDtcbiAgICAgICAgdGhpcy4jc3R5bGVDYWNoZSA9IG51bGw7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgLy8gQXZvaWQgXCJVbmNhdWdodCBwcm9taXNlXCIgbWVzc2FnZXMgaW4gdGhlIGNvbnNvbGUuXG4gICAgICB9KTtcblxuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpIHtcbiAgICAgIC8vIEZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicGFnZVdpZHRoXCIsIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLiNwYWdlV2lkdGg7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhZ2VIZWlnaHRcIiwge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuI3BhZ2VIZWlnaHQ7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGZvbnRGYW1pbHlNYXAoKSB7XG4gICAgY29uc3QgeyBpc1dpbmRvd3MsIGlzRmlyZWZveCB9ID0gRmVhdHVyZVRlc3QucGxhdGZvcm07XG4gICAgcmV0dXJuIHNoYWRvdyhcbiAgICAgIHRoaXMsXG4gICAgICBcImZvbnRGYW1pbHlNYXBcIixcbiAgICAgIG5ldyBNYXAoW1xuICAgICAgICBbXG4gICAgICAgICAgXCJzYW5zLXNlcmlmXCIsXG4gICAgICAgICAgYCR7aXNXaW5kb3dzICYmIGlzRmlyZWZveCA/IFwiQ2FsaWJyaSwgXCIgOiBcIlwifXNhbnMtc2VyaWZgLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgXCJtb25vc3BhY2VcIixcbiAgICAgICAgICBgJHtpc1dpbmRvd3MgJiYgaXNGaXJlZm94ID8gXCJMdWNpZGEgQ29uc29sZSwgXCIgOiBcIlwifW1vbm9zcGFjZWAsXG4gICAgICAgIF0sXG4gICAgICBdKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIHRoZSB0ZXh0TGF5ZXIuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHB1bXAgPSAoKSA9PiB7XG4gICAgICB0aGlzLiNyZWFkZXIucmVhZCgpLnRoZW4oKHsgdmFsdWUsIGRvbmUgfSkgPT4ge1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgIHRoaXMuI2NhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNsYW5nID8/PSB2YWx1ZS5sYW5nO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuI3N0eWxlQ2FjaGUsIHZhbHVlLnN0eWxlcyk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NJdGVtcyh2YWx1ZS5pdGVtcyk7XG4gICAgICAgIHB1bXAoKTtcbiAgICAgIH0sIHRoaXMuI2NhcGFiaWxpdHkucmVqZWN0KTtcbiAgICB9O1xuICAgIHRoaXMuI3JlYWRlciA9IHRoaXMuI3RleHRDb250ZW50U291cmNlLmdldFJlYWRlcigpO1xuICAgIFRleHRMYXllci4jcGVuZGluZ1RleHRMYXllcnMuYWRkKHRoaXMpO1xuICAgIHB1bXAoKTtcblxuICAgIHJldHVybiB0aGlzLiNjYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGEgcHJldmlvdXNseSByZW5kZXJlZCB0ZXh0TGF5ZXIsIGlmIG5lY2Vzc2FyeS5cbiAgICogQHBhcmFtIHtUZXh0TGF5ZXJVcGRhdGVQYXJhbWV0ZXJzfSBvcHRpb25zXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICB1cGRhdGUoeyB2aWV3cG9ydCwgb25CZWZvcmUgPSBudWxsIH0pIHtcbiAgICBjb25zdCBzY2FsZSA9IHZpZXdwb3J0LnNjYWxlICogT3V0cHV0U2NhbGUucGl4ZWxSYXRpbztcbiAgICBjb25zdCByb3RhdGlvbiA9IHZpZXdwb3J0LnJvdGF0aW9uO1xuXG4gICAgaWYgKHJvdGF0aW9uICE9PSB0aGlzLiNyb3RhdGlvbikge1xuICAgICAgb25CZWZvcmU/LigpO1xuICAgICAgdGhpcy4jcm90YXRpb24gPSByb3RhdGlvbjtcbiAgICAgIHNldExheWVyRGltZW5zaW9ucyh0aGlzLiNyb290Q29udGFpbmVyLCB7IHJvdGF0aW9uIH0pO1xuICAgIH1cblxuICAgIGlmIChzY2FsZSAhPT0gdGhpcy4jc2NhbGUpIHtcbiAgICAgIG9uQmVmb3JlPy4oKTtcbiAgICAgIHRoaXMuI3NjYWxlID0gc2NhbGU7XG4gICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgIGRpdjogbnVsbCxcbiAgICAgICAgcHJvcGVydGllczogbnVsbCxcbiAgICAgICAgY3R4OiBUZXh0TGF5ZXIuI2dldEN0eCh0aGlzLiNsYW5nKSxcbiAgICAgIH07XG4gICAgICBmb3IgKGNvbnN0IGRpdiBvZiB0aGlzLiN0ZXh0RGl2cykge1xuICAgICAgICBwYXJhbXMucHJvcGVydGllcyA9IHRoaXMuI3RleHREaXZQcm9wZXJ0aWVzLmdldChkaXYpO1xuICAgICAgICBwYXJhbXMuZGl2ID0gZGl2O1xuICAgICAgICB0aGlzLiNsYXlvdXQocGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VsIHJlbmRlcmluZyBvZiB0aGUgdGV4dExheWVyLlxuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKi9cbiAgY2FuY2VsKCkge1xuICAgIGNvbnN0IGFib3J0RXggPSBuZXcgQWJvcnRFeGNlcHRpb24oXCJUZXh0TGF5ZXIgdGFzayBjYW5jZWxsZWQuXCIpO1xuXG4gICAgdGhpcy4jcmVhZGVyPy5jYW5jZWwoYWJvcnRFeCkuY2F0Y2goKCkgPT4ge1xuICAgICAgLy8gQXZvaWQgXCJVbmNhdWdodCBwcm9taXNlXCIgbWVzc2FnZXMgaW4gdGhlIGNvbnNvbGUuXG4gICAgfSk7XG4gICAgdGhpcy4jcmVhZGVyID0gbnVsbDtcblxuICAgIHRoaXMuI2NhcGFiaWxpdHkucmVqZWN0KGFib3J0RXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBcnJheTxIVE1MRWxlbWVudD59IEhUTUwgZWxlbWVudHMgdGhhdCBjb3JyZXNwb25kIHRvIHRoZSB0ZXh0IGl0ZW1zXG4gICAqICAgb2YgdGhlIHRleHRDb250ZW50IGlucHV0LlxuICAgKiAgIFRoaXMgaXMgb3V0cHV0IGFuZCB3aWxsIGluaXRpYWxseSBiZSBzZXQgdG8gYW4gZW1wdHkgYXJyYXkuXG4gICAqL1xuICBnZXQgdGV4dERpdnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3RleHREaXZzO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fSBTdHJpbmdzIHRoYXQgY29ycmVzcG9uZCB0byB0aGUgYHN0cmAgcHJvcGVydHkgb2ZcbiAgICogICB0aGUgdGV4dCBpdGVtcyBvZiB0aGUgdGV4dENvbnRlbnQgaW5wdXQuXG4gICAqICAgVGhpcyBpcyBvdXRwdXQgYW5kIHdpbGwgaW5pdGlhbGx5IGJlIHNldCB0byBhbiBlbXB0eSBhcnJheVxuICAgKi9cbiAgZ2V0IHRleHRDb250ZW50SXRlbXNTdHIoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3RleHRDb250ZW50SXRlbXNTdHI7XG4gIH1cblxuICAjcHJvY2Vzc0l0ZW1zKGl0ZW1zKSB7XG4gICAgaWYgKHRoaXMuI2Rpc2FibGVQcm9jZXNzSXRlbXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jbGF5b3V0VGV4dFBhcmFtcy5jdHggPz89IFRleHRMYXllci4jZ2V0Q3R4KHRoaXMuI2xhbmcpO1xuXG4gICAgY29uc3QgdGV4dERpdnMgPSB0aGlzLiN0ZXh0RGl2cyxcbiAgICAgIHRleHRDb250ZW50SXRlbXNTdHIgPSB0aGlzLiN0ZXh0Q29udGVudEl0ZW1zU3RyO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAvLyBObyBwb2ludCBpbiByZW5kZXJpbmcgbWFueSBkaXZzIGFzIGl0IHdvdWxkIG1ha2UgdGhlIGJyb3dzZXJcbiAgICAgIC8vIHVudXNhYmxlIGV2ZW4gYWZ0ZXIgdGhlIGRpdnMgYXJlIHJlbmRlcmVkLlxuICAgICAgaWYgKHRleHREaXZzLmxlbmd0aCA+IE1BWF9URVhUX0RJVlNfVE9fUkVOREVSKSB7XG4gICAgICAgIHdhcm4oXCJJZ25vcmluZyBhZGRpdGlvbmFsIHRleHREaXZzIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlwiKTtcblxuICAgICAgICB0aGlzLiNkaXNhYmxlUHJvY2Vzc0l0ZW1zID0gdHJ1ZTsgLy8gQXZvaWQgbXVsdGlwbGUgd2FybmluZ3MgZm9yIG9uZSBwYWdlLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLnN0ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBpdGVtLnR5cGUgPT09IFwiYmVnaW5NYXJrZWRDb250ZW50UHJvcHNcIiB8fFxuICAgICAgICAgIGl0ZW0udHlwZSA9PT0gXCJiZWdpbk1hcmtlZENvbnRlbnRcIlxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLiNjb250YWluZXI7XG4gICAgICAgICAgdGhpcy4jY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgdGhpcy4jY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtYXJrZWRDb250ZW50XCIpO1xuICAgICAgICAgIGlmIChpdGVtLmlkICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLiNjb250YWluZXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgYCR7aXRlbS5pZH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyZW50LmFwcGVuZCh0aGlzLiNjb250YWluZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gXCJlbmRNYXJrZWRDb250ZW50XCIpIHtcbiAgICAgICAgICB0aGlzLiNjb250YWluZXIgPSB0aGlzLiNjb250YWluZXIucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRleHRDb250ZW50SXRlbXNTdHIucHVzaChpdGVtLnN0cik7XG4gICAgICB0aGlzLiNhcHBlbmRUZXh0KGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gICNhcHBlbmRUZXh0KGdlb20pIHtcbiAgICAvLyBJbml0aWFsaXplIGFsbCB1c2VkIHByb3BlcnRpZXMgdG8ga2VlcCB0aGUgY2FjaGVzIG1vbm9tb3JwaGljLlxuICAgIGNvbnN0IHRleHREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBjb25zdCB0ZXh0RGl2UHJvcGVydGllcyA9IHtcbiAgICAgIGFuZ2xlOiAwLFxuICAgICAgY2FudmFzV2lkdGg6IDAsXG4gICAgICBoYXNUZXh0OiBnZW9tLnN0ciAhPT0gXCJcIixcbiAgICAgIGhhc0VPTDogZ2VvbS5oYXNFT0wsXG4gICAgICBmb250U2l6ZTogMCxcbiAgICB9O1xuICAgIHRoaXMuI3RleHREaXZzLnB1c2godGV4dERpdik7XG5cbiAgICBjb25zdCB0eCA9IFV0aWwudHJhbnNmb3JtKHRoaXMuI3RyYW5zZm9ybSwgZ2VvbS50cmFuc2Zvcm0pO1xuICAgIGxldCBhbmdsZSA9IE1hdGguYXRhbjIodHhbMV0sIHR4WzBdKTtcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMuI3N0eWxlQ2FjaGVbZ2VvbS5mb250TmFtZV07XG4gICAgaWYgKHN0eWxlLnZlcnRpY2FsKSB7XG4gICAgICBhbmdsZSArPSBNYXRoLlBJIC8gMjtcbiAgICB9XG5cbiAgICBsZXQgZm9udEZhbWlseSA9XG4gICAgICAodGhpcy4jZm9udEluc3BlY3RvckVuYWJsZWQgJiYgc3R5bGUuZm9udFN1YnN0aXR1dGlvbikgfHxcbiAgICAgIHN0eWxlLmZvbnRGYW1pbHk7XG5cbiAgICAvLyBXb3JrYXJvdW5kIGZvciBidWcgMTkyMjA2My5cbiAgICBmb250RmFtaWx5ID0gVGV4dExheWVyLmZvbnRGYW1pbHlNYXAuZ2V0KGZvbnRGYW1pbHkpIHx8IGZvbnRGYW1pbHk7XG4gICAgY29uc3QgZm9udEhlaWdodCA9IE1hdGguaHlwb3QodHhbMl0sIHR4WzNdKTtcbiAgICBjb25zdCBmb250QXNjZW50ID1cbiAgICAgIGZvbnRIZWlnaHQgKiBUZXh0TGF5ZXIuI2dldEFzY2VudChmb250RmFtaWx5LCBzdHlsZSwgdGhpcy4jbGFuZyk7XG5cbiAgICBsZXQgbGVmdCwgdG9wO1xuICAgIGlmIChhbmdsZSA9PT0gMCkge1xuICAgICAgbGVmdCA9IHR4WzRdO1xuICAgICAgdG9wID0gdHhbNV0gLSBmb250QXNjZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBsZWZ0ID0gdHhbNF0gKyBmb250QXNjZW50ICogTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgdG9wID0gdHhbNV0gLSBmb250QXNjZW50ICogTWF0aC5jb3MoYW5nbGUpO1xuICAgIH1cblxuICAgIGNvbnN0IHNjYWxlRmFjdG9yU3RyID0gXCJjYWxjKHZhcigtLXRvdGFsLXNjYWxlLWZhY3RvcikgKlwiO1xuICAgIGNvbnN0IGRpdlN0eWxlID0gdGV4dERpdi5zdHlsZTtcbiAgICAvLyBTZXR0aW5nIHRoZSBzdHlsZSBwcm9wZXJ0aWVzIGluZGl2aWR1YWxseSwgcmF0aGVyIHRoYW4gYWxsIGF0IG9uY2UsXG4gICAgLy8gc2hvdWxkIGJlIE9LIHNpbmNlIHRoZSBgdGV4dERpdmAgaXNuJ3QgYXBwZW5kZWQgdG8gdGhlIGRvY3VtZW50IHlldC5cbiAgICBpZiAodGhpcy4jY29udGFpbmVyID09PSB0aGlzLiNyb290Q29udGFpbmVyKSB7XG4gICAgICBkaXZTdHlsZS5sZWZ0ID0gYCR7KCgxMDAgKiBsZWZ0KSAvIHRoaXMuI3BhZ2VXaWR0aCkudG9GaXhlZCgyKX0lYDtcbiAgICAgIGRpdlN0eWxlLnRvcCA9IGAkeygoMTAwICogdG9wKSAvIHRoaXMuI3BhZ2VIZWlnaHQpLnRvRml4ZWQoMil9JWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdlJ3JlIGluIGEgbWFya2VkIGNvbnRlbnQgc3BhbiwgaGVuY2Ugd2UgY2FuJ3QgdXNlIHBlcmNlbnRzLlxuICAgICAgZGl2U3R5bGUubGVmdCA9IGAke3NjYWxlRmFjdG9yU3RyfSR7bGVmdC50b0ZpeGVkKDIpfXB4KWA7XG4gICAgICBkaXZTdHlsZS50b3AgPSBgJHtzY2FsZUZhY3RvclN0cn0ke3RvcC50b0ZpeGVkKDIpfXB4KWA7XG4gICAgfVxuICAgIC8vIFdlIG11bHRpcGx5IHRoZSBmb250IHNpemUgYnkgI21pbkZvbnRTaXplLCBhbmQgdGhlbiAjbGF5b3V0IHdpbGxcbiAgICAvLyBzY2FsZSB0aGUgZWxlbWVudCBieSAxLyNtaW5Gb250U2l6ZS4gVGhpcyBhbGxvd3MgdXMgdG8gZWZmZWN0aXZlbHlcbiAgICAvLyBpZ25vcmUgdGhlIG1pbmltdW0gZm9udCBzaXplIGVuZm9yY2VkIGJ5IHRoZSBicm93c2VyLCBzbyB0aGF0IHRoZSB0ZXh0XG4gICAgLy8gbGF5ZXIgPHNwYW4+cyBjYW4gYWx3YXlzIG1hdGNoIHRoZSBzaXplIG9mIHRoZSB0ZXh0IGluIHRoZSBjYW52YXMuXG4gICAgZGl2U3R5bGUuZm9udFNpemUgPSBgJHtzY2FsZUZhY3RvclN0cn0keyhUZXh0TGF5ZXIuI21pbkZvbnRTaXplICogZm9udEhlaWdodCkudG9GaXhlZCgyKX1weClgO1xuICAgIGRpdlN0eWxlLmZvbnRGYW1pbHkgPSBmb250RmFtaWx5O1xuXG4gICAgdGV4dERpdlByb3BlcnRpZXMuZm9udFNpemUgPSBmb250SGVpZ2h0O1xuXG4gICAgLy8gS2VlcHMgc2NyZWVuIHJlYWRlcnMgZnJvbSBwYXVzaW5nIG9uIGV2ZXJ5IG5ldyB0ZXh0IHNwYW4uXG4gICAgdGV4dERpdi5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwicHJlc2VudGF0aW9uXCIpO1xuXG4gICAgdGV4dERpdi50ZXh0Q29udGVudCA9IGdlb20uc3RyO1xuICAgIC8vIGdlb20uZGlyIG1heSBiZSAndHRiJyBmb3IgdmVydGljYWwgdGV4dHMuXG4gICAgdGV4dERpdi5kaXIgPSBnZW9tLmRpcjtcblxuICAgIC8vIGBmb250TmFtZWAgaXMgb25seSB1c2VkIGJ5IHRoZSBGb250SW5zcGVjdG9yLCBhbmQgd2Ugb25seSB1c2UgYGRhdGFzZXRgXG4gICAgLy8gaGVyZSB0byBtYWtlIHRoZSBmb250IG5hbWUgYXZhaWxhYmxlIGluIHRoZSBkZWJ1Z2dlci5cbiAgICBpZiAodGhpcy4jZm9udEluc3BlY3RvckVuYWJsZWQpIHtcbiAgICAgIHRleHREaXYuZGF0YXNldC5mb250TmFtZSA9XG4gICAgICAgIHN0eWxlLmZvbnRTdWJzdGl0dXRpb25Mb2FkZWROYW1lIHx8IGdlb20uZm9udE5hbWU7XG4gICAgfVxuICAgIGlmIChhbmdsZSAhPT0gMCkge1xuICAgICAgdGV4dERpdlByb3BlcnRpZXMuYW5nbGUgPSBhbmdsZSAqICgxODAgLyBNYXRoLlBJKTtcbiAgICB9XG4gICAgLy8gV2UgZG9uJ3QgYm90aGVyIHNjYWxpbmcgc2luZ2xlLWNoYXIgdGV4dCBkaXZzLCBiZWNhdXNlIGl0IGhhcyB2ZXJ5XG4gICAgLy8gbGl0dGxlIGVmZmVjdCBvbiB0ZXh0IGhpZ2hsaWdodGluZy4gVGhpcyBtYWtlcyBzY3JvbGxpbmcgb24gZG9jcyB3aXRoXG4gICAgLy8gbG90cyBvZiBzdWNoIGRpdnMgYSBsb3QgZmFzdGVyLlxuICAgIGxldCBzaG91bGRTY2FsZVRleHQgPSBmYWxzZTtcbiAgICBpZiAoZ2VvbS5zdHIubGVuZ3RoID4gMSkge1xuICAgICAgc2hvdWxkU2NhbGVUZXh0ID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGdlb20uc3RyICE9PSBcIiBcIiAmJiBnZW9tLnRyYW5zZm9ybVswXSAhPT0gZ2VvbS50cmFuc2Zvcm1bM10pIHtcbiAgICAgIGNvbnN0IGFic1NjYWxlWCA9IE1hdGguYWJzKGdlb20udHJhbnNmb3JtWzBdKSxcbiAgICAgICAgYWJzU2NhbGVZID0gTWF0aC5hYnMoZ2VvbS50cmFuc2Zvcm1bM10pO1xuICAgICAgLy8gV2hlbiB0aGUgaG9yaXpvbnRhbC92ZXJ0aWNhbCBzY2FsaW5nIGRpZmZlcnMgc2lnbmlmaWNhbnRseSwgYWxzbyBzY2FsZVxuICAgICAgLy8gZXZlbiBzaW5nbGUtY2hhciB0ZXh0IHRvIGltcHJvdmUgaGlnaGxpZ2h0aW5nIChmaXhlcyBpc3N1ZTExNzEzLnBkZikuXG4gICAgICBpZiAoXG4gICAgICAgIGFic1NjYWxlWCAhPT0gYWJzU2NhbGVZICYmXG4gICAgICAgIE1hdGgubWF4KGFic1NjYWxlWCwgYWJzU2NhbGVZKSAvIE1hdGgubWluKGFic1NjYWxlWCwgYWJzU2NhbGVZKSA+IDEuNVxuICAgICAgKSB7XG4gICAgICAgIHNob3VsZFNjYWxlVGV4dCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzaG91bGRTY2FsZVRleHQpIHtcbiAgICAgIHRleHREaXZQcm9wZXJ0aWVzLmNhbnZhc1dpZHRoID0gc3R5bGUudmVydGljYWwgPyBnZW9tLmhlaWdodCA6IGdlb20ud2lkdGg7XG4gICAgfVxuICAgIHRoaXMuI3RleHREaXZQcm9wZXJ0aWVzLnNldCh0ZXh0RGl2LCB0ZXh0RGl2UHJvcGVydGllcyk7XG5cbiAgICAvLyBGaW5hbGx5LCBsYXlvdXQgYW5kIGFwcGVuZCB0aGUgdGV4dCB0byB0aGUgRE9NLlxuICAgIHRoaXMuI2xheW91dFRleHRQYXJhbXMuZGl2ID0gdGV4dERpdjtcbiAgICB0aGlzLiNsYXlvdXRUZXh0UGFyYW1zLnByb3BlcnRpZXMgPSB0ZXh0RGl2UHJvcGVydGllcztcbiAgICB0aGlzLiNsYXlvdXQodGhpcy4jbGF5b3V0VGV4dFBhcmFtcyk7XG5cbiAgICBpZiAodGV4dERpdlByb3BlcnRpZXMuaGFzVGV4dCkge1xuICAgICAgdGhpcy4jY29udGFpbmVyLmFwcGVuZCh0ZXh0RGl2KTtcbiAgICB9XG4gICAgaWYgKHRleHREaXZQcm9wZXJ0aWVzLmhhc0VPTCkge1xuICAgICAgY29uc3QgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIik7XG4gICAgICBici5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwicHJlc2VudGF0aW9uXCIpO1xuICAgICAgdGhpcy4jY29udGFpbmVyLmFwcGVuZChicik7XG4gICAgfVxuICB9XG5cbiAgI2xheW91dChwYXJhbXMpIHtcbiAgICBjb25zdCB7IGRpdiwgcHJvcGVydGllcywgY3R4IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgeyBzdHlsZSB9ID0gZGl2O1xuXG4gICAgbGV0IHRyYW5zZm9ybSA9IFwiXCI7XG4gICAgaWYgKFRleHRMYXllci4jbWluRm9udFNpemUgPiAxKSB7XG4gICAgICB0cmFuc2Zvcm0gPSBgc2NhbGUoJHsxIC8gVGV4dExheWVyLiNtaW5Gb250U2l6ZX0pYDtcbiAgICB9XG5cbiAgICBpZiAocHJvcGVydGllcy5jYW52YXNXaWR0aCAhPT0gMCAmJiBwcm9wZXJ0aWVzLmhhc1RleHQpIHtcbiAgICAgIGNvbnN0IHsgZm9udEZhbWlseSB9ID0gc3R5bGU7XG4gICAgICBjb25zdCB7IGNhbnZhc1dpZHRoLCBmb250U2l6ZSB9ID0gcHJvcGVydGllcztcblxuICAgICAgVGV4dExheWVyLiNlbnN1cmVDdHhGb250KGN0eCwgZm9udFNpemUgKiB0aGlzLiNzY2FsZSwgZm9udEZhbWlseSk7XG4gICAgICAvLyBPbmx5IG1lYXN1cmUgdGhlIHdpZHRoIGZvciBtdWx0aS1jaGFyIHRleHQgZGl2cywgc2VlIGBhcHBlbmRUZXh0YC5cbiAgICAgIGNvbnN0IHsgd2lkdGggfSA9IGN0eC5tZWFzdXJlVGV4dChkaXYudGV4dENvbnRlbnQpO1xuXG4gICAgICBpZiAod2lkdGggPiAwKSB7XG4gICAgICAgIHRyYW5zZm9ybSA9IGBzY2FsZVgoJHsoY2FudmFzV2lkdGggKiB0aGlzLiNzY2FsZSkgLyB3aWR0aH0pICR7dHJhbnNmb3JtfWA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9wZXJ0aWVzLmFuZ2xlICE9PSAwKSB7XG4gICAgICB0cmFuc2Zvcm0gPSBgcm90YXRlKCR7cHJvcGVydGllcy5hbmdsZX1kZWcpICR7dHJhbnNmb3JtfWA7XG4gICAgfVxuICAgIGlmICh0cmFuc2Zvcm0ubGVuZ3RoID4gMCkge1xuICAgICAgc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbi11cCBnbG9iYWwgdGV4dExheWVyIGRhdGEuXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICBzdGF0aWMgY2xlYW51cCgpIHtcbiAgICBpZiAodGhpcy4jcGVuZGluZ1RleHRMYXllcnMuc2l6ZSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jYXNjZW50Q2FjaGUuY2xlYXIoKTtcblxuICAgIGZvciAoY29uc3QgeyBjYW52YXMgfSBvZiB0aGlzLiNjYW52YXNDb250ZXh0cy52YWx1ZXMoKSkge1xuICAgICAgY2FudmFzLnJlbW92ZSgpO1xuICAgIH1cbiAgICB0aGlzLiNjYW52YXNDb250ZXh0cy5jbGVhcigpO1xuICB9XG5cbiAgc3RhdGljICNnZXRDdHgobGFuZyA9IG51bGwpIHtcbiAgICBsZXQgY3R4ID0gdGhpcy4jY2FudmFzQ29udGV4dHMuZ2V0KChsYW5nIHx8PSBcIlwiKSk7XG4gICAgaWYgKCFjdHgpIHtcbiAgICAgIC8vIFdlIGRvbid0IHVzZSBhbiBPZmZzY3JlZW5DYW52YXMgaGVyZSBiZWNhdXNlIHdlIHVzZSBzZXJpZi9zYW5zIHNlcmlmXG4gICAgICAvLyBmb250cyB3aXRoIGl0IGFuZCB0aGV5IGRlcGVuZHMgb24gdGhlIGxvY2FsZS5cbiAgICAgIC8vIEluIEZpcmVmb3gsIHRoZSA8aHRtbD4gZWxlbWVudCBnZXQgYSBsYW5nIGF0dHJpYnV0ZSB0aGF0IGRlcGVuZHMgb25cbiAgICAgIC8vIHdoYXQgRmx1ZW50IHJldHVybnMgZm9yIHRoZSBsb2NhbGUgYW5kIHRoZSBPZmZzY3JlZW5DYW52YXMgdXNlc1xuICAgICAgLy8gdGhlIE9TIGxvY2FsZS5cbiAgICAgIC8vIFRob3NlIHR3byBsb2NhbGVzIGNhbiBiZSBkaWZmZXJlbnQgYW5kIGNvbnNlcXVlbnRseSB0aGUgdXNlZCBmb250cyB3aWxsXG4gICAgICAvLyBiZSBkaWZmZXJlbnQgKHNlZSBidWcgMTg2OTAwMSkuXG4gICAgICAvLyBJZGVhbGx5LCB3ZSBzaG91bGQgdXNlIGluIHRoZSB0ZXh0IGxheWVyIHRoZSBmb250cyB3ZSd2ZSBpbiB0aGUgcGRmIChvclxuICAgICAgLy8gdGhlaXIgcmVwbGFjZW1lbnRzIHdoZW4gdGhleSBhcmVuJ3QgZW1iZWRkZWQpIGFuZCB0aGVuIHdlIGNhbiB1c2UgYW5cbiAgICAgIC8vIE9mZnNjcmVlbkNhbnZhcy5cbiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICBjYW52YXMuY2xhc3NOYW1lID0gXCJoaWRkZW5DYW52YXNFbGVtZW50XCI7XG4gICAgICBjYW52YXMubGFuZyA9IGxhbmc7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChjYW52YXMpO1xuICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiLCB7XG4gICAgICAgIGFscGhhOiBmYWxzZSxcbiAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlLFxuICAgICAgfSk7XG4gICAgICB0aGlzLiNjYW52YXNDb250ZXh0cy5zZXQobGFuZywgY3R4KTtcblxuICAgICAgLy8gQWxzbywgaW5pdGlhbGl6ZSBzdGF0ZSBmb3IgdGhlIGAjZW5zdXJlQ3R4Rm9udGAgbWV0aG9kLlxuICAgICAgdGhpcy4jY2FudmFzQ3R4Rm9udHMuc2V0KGN0eCwgeyBzaXplOiAwLCBmYW1pbHk6IFwiXCIgfSk7XG4gICAgfVxuICAgIHJldHVybiBjdHg7XG4gIH1cblxuICBzdGF0aWMgI2Vuc3VyZUN0eEZvbnQoY3R4LCBzaXplLCBmYW1pbHkpIHtcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLiNjYW52YXNDdHhGb250cy5nZXQoY3R4KTtcbiAgICBpZiAoc2l6ZSA9PT0gY2FjaGVkLnNpemUgJiYgZmFtaWx5ID09PSBjYWNoZWQuZmFtaWx5KSB7XG4gICAgICByZXR1cm47IC8vIFRoZSBmb250IGlzIGFscmVhZHkgc2V0LlxuICAgIH1cbiAgICBjdHguZm9udCA9IGAke3NpemV9cHggJHtmYW1pbHl9YDtcbiAgICBjYWNoZWQuc2l6ZSA9IHNpemU7XG4gICAgY2FjaGVkLmZhbWlseSA9IGZhbWlseTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBtaW5pbXVtIGZvbnQgc2l6ZSBlbmZvcmNlZCBieSB0aGUgYnJvd3Nlci5cbiAgICovXG4gIHN0YXRpYyAjZW5zdXJlTWluRm9udFNpemVDb21wdXRlZCgpIHtcbiAgICBpZiAodGhpcy4jbWluRm9udFNpemUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkaXYuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgZGl2LnN0eWxlLmxpbmVIZWlnaHQgPSAxO1xuICAgIGRpdi5zdHlsZS5mb250U2l6ZSA9IFwiMXB4XCI7XG4gICAgZGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGRpdi50ZXh0Q29udGVudCA9IFwiWFwiO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGRpdik7XG4gICAgLy8gSW4gYGRpc3BsYXk6YmxvY2tgIGVsZW1lbnRzIGNvbnRhaW4gYSBzaW5nbGUgbGluZSBvZiB0ZXh0LFxuICAgIC8vIHRoZSBoZWlnaHQgbWF0Y2hlcyB0aGUgbGluZSBoZWlnaHQgKHdoaWNoLCB3aGVuIHNldCB0byAxLFxuICAgIC8vIG1hdGNoZXMgdGhlIGFjdHVhbCBmb250IHNpemUpLlxuICAgIHRoaXMuI21pbkZvbnRTaXplID0gZGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICBkaXYucmVtb3ZlKCk7XG4gIH1cblxuICBzdGF0aWMgI2dldEFzY2VudChmb250RmFtaWx5LCBzdHlsZSwgbGFuZykge1xuICAgIGNvbnN0IGNhY2hlZEFzY2VudCA9IHRoaXMuI2FzY2VudENhY2hlLmdldChmb250RmFtaWx5KTtcbiAgICBpZiAoY2FjaGVkQXNjZW50KSB7XG4gICAgICByZXR1cm4gY2FjaGVkQXNjZW50O1xuICAgIH1cbiAgICBjb25zdCBjdHggPSB0aGlzLiNnZXRDdHgobGFuZyk7XG5cbiAgICBjdHguY2FudmFzLndpZHRoID0gY3R4LmNhbnZhcy5oZWlnaHQgPSBERUZBVUxUX0ZPTlRfU0laRTtcbiAgICB0aGlzLiNlbnN1cmVDdHhGb250KGN0eCwgREVGQVVMVF9GT05UX1NJWkUsIGZvbnRGYW1pbHkpO1xuICAgIGNvbnN0IG1ldHJpY3MgPSBjdHgubWVhc3VyZVRleHQoXCJcIik7XG5cbiAgICBjb25zdCBhc2NlbnQgPSBtZXRyaWNzLmZvbnRCb3VuZGluZ0JveEFzY2VudDtcbiAgICBjb25zdCBkZXNjZW50ID0gTWF0aC5hYnMobWV0cmljcy5mb250Qm91bmRpbmdCb3hEZXNjZW50KTtcblxuICAgIGN0eC5jYW52YXMud2lkdGggPSBjdHguY2FudmFzLmhlaWdodCA9IDA7XG4gICAgbGV0IHJhdGlvID0gMC44OyAvLyBERUZBVUxUX0ZPTlRfQVNDRU5UXG5cbiAgICBpZiAoYXNjZW50KSB7XG4gICAgICByYXRpbyA9IGFzY2VudCAvIChhc2NlbnQgKyBkZXNjZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKFxuICAgICAgICAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB8fFxuICAgICAgICBGZWF0dXJlVGVzdC5wbGF0Zm9ybS5pc0ZpcmVmb3hcbiAgICAgICkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIFwiRW5hYmxlIHRoZSBgZG9tLnRleHRNZXRyaWNzLmZvbnRCb3VuZGluZ0JveC5lbmFibGVkYCBwcmVmZXJlbmNlIFwiICtcbiAgICAgICAgICAgIFwiaW4gYGFib3V0OmNvbmZpZ2AgdG8gaW1wcm92ZSBUZXh0TGF5ZXIgcmVuZGVyaW5nLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoc3R5bGUuYXNjZW50KSB7XG4gICAgICAgIHJhdGlvID0gc3R5bGUuYXNjZW50O1xuICAgICAgfSBlbHNlIGlmIChzdHlsZS5kZXNjZW50KSB7XG4gICAgICAgIHJhdGlvID0gMSArIHN0eWxlLmRlc2NlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jYXNjZW50Q2FjaGUuc2V0KGZvbnRGYW1pbHksIHJhdGlvKTtcbiAgICByZXR1cm4gcmF0aW87XG4gIH1cbn1cblxuZXhwb3J0IHsgVGV4dExheWVyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjEgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9hcGlcIikuVGV4dENvbnRlbnR9IFRleHRDb250ZW50ICovXG5cbmNsYXNzIFhmYVRleHQge1xuICAvKipcbiAgICogV2FsayBhbiBYRkEgdHJlZSBhbmQgY3JlYXRlIGFuIGFycmF5IG9mIHRleHQgbm9kZXMgdGhhdCBpcyBjb21wYXRpYmxlXG4gICAqIHdpdGggYSByZWd1bGFyIFBERnMgVGV4dENvbnRlbnQuIEN1cnJlbnRseSwgb25seSBUZXh0SXRlbS5zdHIgaXMgc3VwcG9ydGVkLFxuICAgKiBhbGwgb3RoZXIgZmllbGRzIGFuZCBzdHlsZXMgaGF2ZW4ndCBiZWVuIGltcGxlbWVudGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0geGZhIC0gQW4gWEZBIGZha2UgRE9NIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybnMge1RleHRDb250ZW50fVxuICAgKi9cbiAgc3RhdGljIHRleHRDb250ZW50KHhmYSkge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgaXRlbXMsXG4gICAgICBzdHlsZXM6IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgfTtcbiAgICBmdW5jdGlvbiB3YWxrKG5vZGUpIHtcbiAgICAgIGlmICghbm9kZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsZXQgc3RyID0gbnVsbDtcbiAgICAgIGNvbnN0IG5hbWUgPSBub2RlLm5hbWU7XG4gICAgICBpZiAobmFtZSA9PT0gXCIjdGV4dFwiKSB7XG4gICAgICAgIHN0ciA9IG5vZGUudmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKCFYZmFUZXh0LnNob3VsZEJ1aWxkVGV4dChuYW1lKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKG5vZGU/LmF0dHJpYnV0ZXM/LnRleHRDb250ZW50KSB7XG4gICAgICAgIHN0ciA9IG5vZGUuYXR0cmlidXRlcy50ZXh0Q29udGVudDtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS52YWx1ZSkge1xuICAgICAgICBzdHIgPSBub2RlLnZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKHN0ciAhPT0gbnVsbCkge1xuICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICBzdHIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgICAgICB3YWxrKGNoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2Fsayh4ZmEpO1xuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBET00gbm9kZSBuYW1lLiAobG93ZXIgY2FzZSlcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIERPTSBub2RlIHNob3VsZCBoYXZlIGEgY29ycmVzcG9uZGluZyB0ZXh0XG4gICAqIG5vZGUuXG4gICAqL1xuICBzdGF0aWMgc2hvdWxkQnVpbGRUZXh0KG5hbWUpIHtcbiAgICByZXR1cm4gIShcbiAgICAgIG5hbWUgPT09IFwidGV4dGFyZWFcIiB8fFxuICAgICAgbmFtZSA9PT0gXCJpbnB1dFwiIHx8XG4gICAgICBuYW1lID09PSBcIm9wdGlvblwiIHx8XG4gICAgICBuYW1lID09PSBcInNlbGVjdFwiXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgeyBYZmFUZXh0IH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQG1vZHVsZSBwZGZqc0xpYlxuICovXG5cbmltcG9ydCB7XG4gIF9pc1ZhbGlkRXhwbGljaXREZXN0LFxuICBBYm9ydEV4Y2VwdGlvbixcbiAgQW5ub3RhdGlvbk1vZGUsXG4gIGFzc2VydCxcbiAgRmVhdHVyZVRlc3QsXG4gIGdldFZlcmJvc2l0eUxldmVsLFxuICBpbmZvLFxuICBpc05vZGVKUyxcbiAgUmVuZGVyaW5nSW50ZW50RmxhZyxcbiAgc2V0VmVyYm9zaXR5TGV2ZWwsXG4gIHNoYWRvdyxcbiAgc3RyaW5nVG9CeXRlcyxcbiAgdW5yZWFjaGFibGUsXG4gIHdhcm4sXG59IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHtcbiAgQW5ub3RhdGlvblN0b3JhZ2UsXG4gIFByaW50QW5ub3RhdGlvblN0b3JhZ2UsXG4gIFNlcmlhbGl6YWJsZUVtcHR5LFxufSBmcm9tIFwiLi9hbm5vdGF0aW9uX3N0b3JhZ2UuanNcIjtcbmltcG9ydCB7IEZvbnRGYWNlT2JqZWN0LCBGb250TG9hZGVyIH0gZnJvbSBcIi4vZm9udF9sb2FkZXIuanNcIjtcbmltcG9ydCB7XG4gIGlzRGF0YVNjaGVtZSxcbiAgaXNWYWxpZEZldGNoVXJsLFxuICBQYWdlVmlld3BvcnQsXG4gIFJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbixcbiAgU3RhdFRpbWVyLFxufSBmcm9tIFwiLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBNZXNzYWdlSGFuZGxlciwgd3JhcFJlYXNvbiB9IGZyb20gXCIuLi9zaGFyZWQvbWVzc2FnZV9oYW5kbGVyLmpzXCI7XG5pbXBvcnQge1xuICBOb2RlQ2FudmFzRmFjdG9yeSxcbiAgTm9kZUNNYXBSZWFkZXJGYWN0b3J5LFxuICBOb2RlRmlsdGVyRmFjdG9yeSxcbiAgTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5LFxuICBOb2RlV2FzbUZhY3RvcnksXG59IGZyb20gXCJkaXNwbGF5LW5vZGVfdXRpbHNcIjtcbmltcG9ydCB7IENhbnZhc0dyYXBoaWNzIH0gZnJvbSBcIi4vY2FudmFzLmpzXCI7XG5pbXBvcnQgeyBET01DYW52YXNGYWN0b3J5IH0gZnJvbSBcIi4vY2FudmFzX2ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IERPTUNNYXBSZWFkZXJGYWN0b3J5IH0gZnJvbSBcImRpc3BsYXktY21hcF9yZWFkZXJfZmFjdG9yeVwiO1xuaW1wb3J0IHsgRE9NRmlsdGVyRmFjdG9yeSB9IGZyb20gXCIuL2ZpbHRlcl9mYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSB9IGZyb20gXCJkaXNwbGF5LXN0YW5kYXJkX2ZvbnRkYXRhX2ZhY3RvcnlcIjtcbmltcG9ydCB7IERPTVdhc21GYWN0b3J5IH0gZnJvbSBcImRpc3BsYXktd2FzbV9mYWN0b3J5XCI7XG5pbXBvcnQgeyBHbG9iYWxXb3JrZXJPcHRpb25zIH0gZnJvbSBcIi4vd29ya2VyX29wdGlvbnMuanNcIjtcbmltcG9ydCB7IE1ldGFkYXRhIH0gZnJvbSBcIi4vbWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IE9wdGlvbmFsQ29udGVudENvbmZpZyB9IGZyb20gXCIuL29wdGlvbmFsX2NvbnRlbnRfY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtIH0gZnJvbSBcIi4vdHJhbnNwb3J0X3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgUERGRmV0Y2hTdHJlYW0gfSBmcm9tIFwiZGlzcGxheS1mZXRjaF9zdHJlYW1cIjtcbmltcG9ydCB7IFBERk5ldHdvcmtTdHJlYW0gfSBmcm9tIFwiZGlzcGxheS1uZXR3b3JrXCI7XG5pbXBvcnQgeyBQREZOb2RlU3RyZWFtIH0gZnJvbSBcImRpc3BsYXktbm9kZV9zdHJlYW1cIjtcbmltcG9ydCB7IFRleHRMYXllciB9IGZyb20gXCIuL3RleHRfbGF5ZXIuanNcIjtcbmltcG9ydCB7IFhmYVRleHQgfSBmcm9tIFwiLi94ZmFfdGV4dC5qc1wiO1xuXG5jb25zdCBERUZBVUxUX1JBTkdFX0NIVU5LX1NJWkUgPSA2NTUzNjsgLy8gMl4xNiA9IDY1NTM2XG5jb25zdCBSRU5ERVJJTkdfQ0FOQ0VMTEVEX1RJTUVPVVQgPSAxMDA7IC8vIG1zXG5cbi8qKlxuICogQHR5cGVkZWYgeyBJbnQ4QXJyYXkgfCBVaW50OEFycmF5IHwgVWludDhDbGFtcGVkQXJyYXkgfFxuICogICAgICAgICAgICBJbnQxNkFycmF5IHwgVWludDE2QXJyYXkgfFxuICogICAgICAgICAgICBJbnQzMkFycmF5IHwgVWludDMyQXJyYXkgfCBGbG9hdDMyQXJyYXkgfFxuICogICAgICAgICAgICBGbG9hdDY0QXJyYXlcbiAqIH0gVHlwZWRBcnJheVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVmUHJveHlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBudW1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBnZW5cbiAqL1xuXG4vKipcbiAqIERvY3VtZW50IGluaXRpYWxpemF0aW9uIC8gbG9hZGluZyBwYXJhbWV0ZXJzIG9iamVjdC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEb2N1bWVudEluaXRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge3N0cmluZyB8IFVSTH0gW3VybF0gLSBUaGUgVVJMIG9mIHRoZSBQREYuXG4gKiBAcHJvcGVydHkge1R5cGVkQXJyYXkgfCBBcnJheUJ1ZmZlciB8IEFycmF5PG51bWJlcj4gfCBzdHJpbmd9IFtkYXRhXSAtXG4gKiAgIEJpbmFyeSBQREYgZGF0YS5cbiAqICAgVXNlIFR5cGVkQXJyYXlzIChVaW50OEFycmF5KSB0byBpbXByb3ZlIHRoZSBtZW1vcnkgdXNhZ2UuIElmIFBERiBkYXRhIGlzXG4gKiAgIEJBU0U2NC1lbmNvZGVkLCB1c2UgYGF0b2IoKWAgdG8gY29udmVydCBpdCB0byBhIGJpbmFyeSBzdHJpbmcgZmlyc3QuXG4gKlxuICogICBOT1RFOiBJZiBUeXBlZEFycmF5cyBhcmUgdXNlZCB0aGV5IHdpbGwgZ2VuZXJhbGx5IGJlIHRyYW5zZmVycmVkIHRvIHRoZVxuICogICB3b3JrZXItdGhyZWFkLiBUaGlzIHdpbGwgaGVscCByZWR1Y2UgbWFpbi10aHJlYWQgbWVtb3J5IHVzYWdlLCBob3dldmVyXG4gKiAgIGl0IHdpbGwgdGFrZSBvd25lcnNoaXAgb2YgdGhlIFR5cGVkQXJyYXlzLlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtodHRwSGVhZGVyc10gLSBCYXNpYyBhdXRoZW50aWNhdGlvbiBoZWFkZXJzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd2l0aENyZWRlbnRpYWxzXSAtIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdFxuICogICBjcm9zcy1zaXRlIEFjY2Vzcy1Db250cm9sIHJlcXVlc3RzIHNob3VsZCBiZSBtYWRlIHVzaW5nIGNyZWRlbnRpYWxzIHN1Y2hcbiAqICAgYXMgY29va2llcyBvciBhdXRob3JpemF0aW9uIGhlYWRlcnMuIFRoZSBkZWZhdWx0IGlzIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3Bhc3N3b3JkXSAtIEZvciBkZWNyeXB0aW5nIHBhc3N3b3JkLXByb3RlY3RlZCBQREZzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsZW5ndGhdIC0gVGhlIFBERiBmaWxlIGxlbmd0aC4gSXQncyB1c2VkIGZvciBwcm9ncmVzc1xuICogICByZXBvcnRzIGFuZCByYW5nZSByZXF1ZXN0cyBvcGVyYXRpb25zLlxuICogQHByb3BlcnR5IHtQREZEYXRhUmFuZ2VUcmFuc3BvcnR9IFtyYW5nZV0gLSBBbGxvd3MgZm9yIHVzaW5nIGEgY3VzdG9tIHJhbmdlXG4gKiAgIHRyYW5zcG9ydCBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmFuZ2VDaHVua1NpemVdIC0gU3BlY2lmeSBtYXhpbXVtIG51bWJlciBvZiBieXRlcyBmZXRjaGVkXG4gKiAgIHBlciByYW5nZSByZXF1ZXN0LiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB7QGxpbmsgREVGQVVMVF9SQU5HRV9DSFVOS19TSVpFfS5cbiAqIEBwcm9wZXJ0eSB7UERGV29ya2VyfSBbd29ya2VyXSAtIFRoZSB3b3JrZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGxvYWRpbmcgYW5kXG4gKiAgIHBhcnNpbmcgdGhlIFBERiBkYXRhLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt2ZXJib3NpdHldIC0gQ29udHJvbHMgdGhlIGxvZ2dpbmcgbGV2ZWw7IHRoZSBjb25zdGFudHNcbiAqICAgZnJvbSB7QGxpbmsgVmVyYm9zaXR5TGV2ZWx9IHNob3VsZCBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtkb2NCYXNlVXJsXSAtIFRoZSBiYXNlIFVSTCBvZiB0aGUgZG9jdW1lbnQsIHVzZWQgd2hlblxuICogICBhdHRlbXB0aW5nIHRvIHJlY292ZXIgdmFsaWQgYWJzb2x1dGUgVVJMcyBmb3IgYW5ub3RhdGlvbnMsIGFuZCBvdXRsaW5lXG4gKiAgIGl0ZW1zLCB0aGF0IChpbmNvcnJlY3RseSkgb25seSBzcGVjaWZ5IHJlbGF0aXZlIFVSTHMuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NNYXBVcmxdIC0gVGhlIFVSTCB3aGVyZSB0aGUgcHJlZGVmaW5lZCBBZG9iZSBDTWFwcyBhcmVcbiAqICAgbG9jYXRlZC4gSW5jbHVkZSB0aGUgdHJhaWxpbmcgc2xhc2guXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjTWFwUGFja2VkXSAtIFNwZWNpZmllcyBpZiB0aGUgQWRvYmUgQ01hcHMgYXJlIGJpbmFyeVxuICogICBwYWNrZWQgb3Igbm90LiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAuXG4gKiBAcHJvcGVydHkge09iamVjdH0gW0NNYXBSZWFkZXJGYWN0b3J5XSAtIFRoZSBmYWN0b3J5IHRoYXQgd2lsbCBiZSB1c2VkIHdoZW5cbiAqICAgcmVhZGluZyBidWlsdC1pbiBDTWFwIGZpbGVzLlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB7RE9NQ01hcFJlYWRlckZhY3Rvcnl9LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtpY2NVcmxdIC0gVGhlIFVSTCB3aGVyZSB0aGUgcHJlZGVmaW5lZCBJQ0MgcHJvZmlsZXMgYXJlXG4gKiAgIGxvY2F0ZWQuIEluY2x1ZGUgdGhlIHRyYWlsaW5nIHNsYXNoLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlU3lzdGVtRm9udHNdIC0gV2hlbiBgdHJ1ZWAsIGZvbnRzIHRoYXQgYXJlbid0XG4gKiAgIGVtYmVkZGVkIGluIHRoZSBQREYgZG9jdW1lbnQgd2lsbCBmYWxsYmFjayB0byBhIHN5c3RlbSBmb250LlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAgaW4gd2ViIGVudmlyb25tZW50cyBhbmQgYGZhbHNlYCBpbiBOb2RlLmpzO1xuICogICB1bmxlc3MgYGRpc2FibGVGb250RmFjZSA9PT0gdHJ1ZWAgaW4gd2hpY2ggY2FzZSB0aGlzIGRlZmF1bHRzIHRvIGBmYWxzZWBcbiAqICAgcmVnYXJkbGVzcyBvZiB0aGUgZW52aXJvbm1lbnQgKHRvIHByZXZlbnQgY29tcGxldGVseSBicm9rZW4gZm9udHMpLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtzdGFuZGFyZEZvbnREYXRhVXJsXSAtIFRoZSBVUkwgd2hlcmUgdGhlIHN0YW5kYXJkIGZvbnRcbiAqICAgZmlsZXMgYXJlIGxvY2F0ZWQuIEluY2x1ZGUgdGhlIHRyYWlsaW5nIHNsYXNoLlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtTdGFuZGFyZEZvbnREYXRhRmFjdG9yeV0gLSBUaGUgZmFjdG9yeSB0aGF0IHdpbGwgYmUgdXNlZFxuICogICB3aGVuIHJlYWRpbmcgdGhlIHN0YW5kYXJkIGZvbnQgZmlsZXMuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHtET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeX0uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3dhc21VcmxdIC0gVGhlIFVSTCB3aGVyZSB0aGUgd2FzbSBmaWxlcyBhcmUgbG9jYXRlZC5cbiAqICAgSW5jbHVkZSB0aGUgdHJhaWxpbmcgc2xhc2guXG4gKiBAcHJvcGVydHkge09iamVjdH0gW1dhc21GYWN0b3J5XSAtIFRoZSBmYWN0b3J5IHRoYXQgd2lsbCBiZSB1c2VkXG4gKiAgIHdoZW4gcmVhZGluZyB0aGUgd2FzbSBmaWxlcy5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMge0RPTVdhc21GYWN0b3J5fS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZVdvcmtlckZldGNoXSAtIEVuYWJsZSB1c2luZyB0aGUgRmV0Y2ggQVBJIGluIHRoZVxuICogICB3b3JrZXItdGhyZWFkIHdoZW4gcmVhZGluZyBDTWFwIGFuZCBzdGFuZGFyZCBmb250IGZpbGVzLiBXaGVuIGB0cnVlYCxcbiAqICAgdGhlIGBDTWFwUmVhZGVyRmFjdG9yeWAsIGBTdGFuZGFyZEZvbnREYXRhRmFjdG9yeWAsIGFuZCBgV2FzbUZhY3RvcnlgXG4gKiAgIG9wdGlvbnMgYXJlIGlnbm9yZWQuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYCBpbiB3ZWIgZW52aXJvbm1lbnRzIGFuZCBgZmFsc2VgIGluIE5vZGUuanMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VXYXNtXSAtIEF0dGVtcHQgdG8gdXNlIFdlYkFzc2VtYmx5IGluIG9yZGVyIHRvXG4gKiAgICBpbXByb3ZlIGUuZy4gaW1hZ2UgZGVjb2RpbmcgcGVyZm9ybWFuY2UuXG4gKiAgICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzdG9wQXRFcnJvcnNdIC0gUmVqZWN0IGNlcnRhaW4gcHJvbWlzZXMsIGUuZy5cbiAqICAgYGdldE9wZXJhdG9yTGlzdGAsIGBnZXRUZXh0Q29udGVudGAsIGFuZCBgUmVuZGVyVGFza2AsIHdoZW4gdGhlIGFzc29jaWF0ZWRcbiAqICAgUERGIGRhdGEgY2Fubm90IGJlIHN1Y2Nlc3NmdWxseSBwYXJzZWQsIGluc3RlYWQgb2YgYXR0ZW1wdGluZyB0byByZWNvdmVyXG4gKiAgIHdoYXRldmVyIHBvc3NpYmxlIG9mIHRoZSBkYXRhLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhJbWFnZVNpemVdIC0gVGhlIG1heGltdW0gYWxsb3dlZCBpbWFnZSBzaXplIGluIHRvdGFsXG4gKiAgIHBpeGVscywgaS5lLiB3aWR0aCAqIGhlaWdodC4gSW1hZ2VzIGFib3ZlIHRoaXMgdmFsdWUgd2lsbCBub3QgYmUgcmVuZGVyZWQuXG4gKiAgIFVzZSAtMSBmb3Igbm8gbGltaXQsIHdoaWNoIGlzIGFsc28gdGhlIGRlZmF1bHQgdmFsdWUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpc0V2YWxTdXBwb3J0ZWRdIC0gRGV0ZXJtaW5lcyBpZiB3ZSBjYW4gZXZhbHVhdGUgc3RyaW5nc1xuICogICBhcyBKYXZhU2NyaXB0LiBQcmltYXJpbHkgdXNlZCB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIFBERiBmdW5jdGlvbnMuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2lzT2Zmc2NyZWVuQ2FudmFzU3VwcG9ydGVkXSAtIERldGVybWluZXMgaWYgd2UgY2FuIHVzZVxuICogICBgT2Zmc2NyZWVuQ2FudmFzYCBpbiB0aGUgd29ya2VyLiBQcmltYXJpbHkgdXNlZCB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mXG4gKiAgIGltYWdlIGNvbnZlcnNpb24vcmVuZGVyaW5nLlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAgaW4gd2ViIGVudmlyb25tZW50cyBhbmQgYGZhbHNlYCBpbiBOb2RlLmpzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaXNJbWFnZURlY29kZXJTdXBwb3J0ZWRdIC0gRGV0ZXJtaW5lcyBpZiB3ZSBjYW4gdXNlXG4gKiAgIGBJbWFnZURlY29kZXJgIGluIHRoZSB3b3JrZXIuIFByaW1hcmlseSB1c2VkIHRvIGltcHJvdmUgcGVyZm9ybWFuY2Ugb2ZcbiAqICAgaW1hZ2UgY29udmVyc2lvbi9yZW5kZXJpbmcuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYCBpbiB3ZWIgZW52aXJvbm1lbnRzIGFuZCBgZmFsc2VgIGluIE5vZGUuanMuXG4gKlxuICogICBOT1RFOiBBbHNvIHRlbXBvcmFyaWx5IGRpc2FibGVkIGluIENocm9taXVtIGJyb3dzZXJzLCB1bnRpbCB3ZSBubyBsb25nZXJcbiAqICAgc3VwcG9ydCB0aGUgYWZmZWN0ZWQgYnJvd3NlciB2ZXJzaW9ucywgYmVjYXVzZSBvZiB2YXJpb3VzIGJ1Z3M6XG4gKlxuICogICAgLSBDcmFzaGVzIHdoZW4gdXNpbmcgdGhlIEJNUCBkZWNvZGVyIHdpdGggaHVnZSBpbWFnZXMsIGUuZy4gaXNzdWU2NzQxLnBkZjtcbiAqICAgICAgc2VlIGh0dHBzOi8vaXNzdWVzLmNocm9taXVtLm9yZy9pc3N1ZXMvMzc0ODA3MDAxXG4gKlxuICogICAgLSBCcm9rZW4gaW1hZ2VzIHdoZW4gdXNpbmcgdGhlIEpQRUcgZGVjb2RlciB3aXRoIGltYWdlcyB0aGF0IGhhdmUgY3VzdG9tXG4gKiAgICAgIGNvbG91ciBwcm9maWxlcywgZS5nLiBHaXRIdWIgZGlzY3Vzc2lvbiAxOTAzMDtcbiAqICAgICAgc2VlIGh0dHBzOi8vaXNzdWVzLmNocm9taXVtLm9yZy9pc3N1ZXMvMzc4ODY5ODEwXG4gKlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYW52YXNNYXhBcmVhSW5CeXRlc10gLSBUaGUgaW50ZWdlciB2YWx1ZSBpcyB1c2VkIHRvXG4gKiAgIGtub3cgd2hlbiBhbiBpbWFnZSBtdXN0IGJlIHJlc2l6ZWQgKHVzZXMgYE9mZnNjcmVlbkNhbnZhc2AgaW4gdGhlIHdvcmtlcikuXG4gKiAgIElmIGl0J3MgLTEgdGhlbiBhIHBvc3NpYmx5IHNsb3cgYWxnb3JpdGhtIGlzIHVzZWQgdG8gZ3Vlc3MgdGhlIG1heCB2YWx1ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVGb250RmFjZV0gLSBCeSBkZWZhdWx0IGZvbnRzIGFyZSBjb252ZXJ0ZWQgdG9cbiAqICAgT3BlblR5cGUgZm9udHMgYW5kIGxvYWRlZCB2aWEgdGhlIEZvbnQgTG9hZGluZyBBUEkgb3IgYEBmb250LWZhY2VgIHJ1bGVzLlxuICogICBJZiBkaXNhYmxlZCwgZm9udHMgd2lsbCBiZSByZW5kZXJlZCB1c2luZyBhIGJ1aWx0LWluIGZvbnQgcmVuZGVyZXIgdGhhdFxuICogICBjb25zdHJ1Y3RzIHRoZSBnbHlwaHMgd2l0aCBwcmltaXRpdmUgcGF0aCBjb21tYW5kcy5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYCBpbiB3ZWIgZW52aXJvbm1lbnRzIGFuZCBgdHJ1ZWAgaW4gTm9kZS5qcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ZvbnRFeHRyYVByb3BlcnRpZXNdIC0gSW5jbHVkZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMsXG4gKiAgIHdoaWNoIGFyZSB1bnVzZWQgZHVyaW5nIHJlbmRlcmluZyBvZiBQREYgZG9jdW1lbnRzLCB3aGVuIGV4cG9ydGluZyB0aGVcbiAqICAgcGFyc2VkIGZvbnQgZGF0YSBmcm9tIHRoZSB3b3JrZXItdGhyZWFkLiBUaGlzIG1heSBiZSB1c2VmdWwgZm9yIGRlYnVnZ2luZ1xuICogICBwdXJwb3NlcyAoYW5kIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5KSwgYnV0IG5vdGUgdGhhdCBpdCB3aWxsIGxlYWQgdG9cbiAqICAgaW5jcmVhc2VkIG1lbW9yeSB1c2FnZS4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2VuYWJsZVhmYV0gLSBSZW5kZXIgWGZhIGZvcm1zIGlmIGFueS5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAqIEBwcm9wZXJ0eSB7SFRNTERvY3VtZW50fSBbb3duZXJEb2N1bWVudF0gLSBTcGVjaWZ5IGFuIGV4cGxpY2l0IGRvY3VtZW50XG4gKiAgIGNvbnRleHQgdG8gY3JlYXRlIGVsZW1lbnRzIHdpdGggYW5kIHRvIGxvYWQgcmVzb3VyY2VzLCBzdWNoIGFzIGZvbnRzLFxuICogICBpbnRvLiBEZWZhdWx0cyB0byB0aGUgY3VycmVudCBkb2N1bWVudC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVSYW5nZV0gLSBEaXNhYmxlIHJhbmdlIHJlcXVlc3QgbG9hZGluZyBvZiBQREZcbiAqICAgZmlsZXMuIFdoZW4gZW5hYmxlZCwgYW5kIGlmIHRoZSBzZXJ2ZXIgc3VwcG9ydHMgcGFydGlhbCBjb250ZW50IHJlcXVlc3RzLFxuICogICB0aGVuIHRoZSBQREYgd2lsbCBiZSBmZXRjaGVkIGluIGNodW5rcy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVTdHJlYW1dIC0gRGlzYWJsZSBzdHJlYW1pbmcgb2YgUERGIGZpbGUgZGF0YS5cbiAqICAgQnkgZGVmYXVsdCBQREYuanMgYXR0ZW1wdHMgdG8gbG9hZCBQREYgZmlsZXMgaW4gY2h1bmtzLiBUaGUgZGVmYXVsdCB2YWx1ZVxuICogICBpcyBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZGlzYWJsZUF1dG9GZXRjaF0gLSBEaXNhYmxlIHByZS1mZXRjaGluZyBvZiBQREYgZmlsZVxuICogICBkYXRhLiBXaGVuIHJhbmdlIHJlcXVlc3RzIGFyZSBlbmFibGVkIFBERi5qcyB3aWxsIGF1dG9tYXRpY2FsbHkga2VlcFxuICogICBmZXRjaGluZyBtb3JlIGRhdGEgZXZlbiBpZiBpdCBpc24ndCBuZWVkZWQgdG8gZGlzcGxheSB0aGUgY3VycmVudCBwYWdlLlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICpcbiAqICAgTk9URTogSXQgaXMgYWxzbyBuZWNlc3NhcnkgdG8gZGlzYWJsZSBzdHJlYW1pbmcsIHNlZSBhYm92ZSwgaW4gb3JkZXIgZm9yXG4gKiAgIGRpc2FibGluZyBvZiBwcmUtZmV0Y2hpbmcgdG8gd29yayBjb3JyZWN0bHkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwZGZCdWddIC0gRW5hYmxlcyBzcGVjaWFsIGhvb2tzIGZvciBkZWJ1Z2dpbmcgUERGLmpzXG4gKiAgIChzZWUgYHdlYi9kZWJ1Z2dlci5qc2ApLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtDYW52YXNGYWN0b3J5XSAtIFRoZSBmYWN0b3J5IHRoYXQgd2lsbCBiZSB1c2VkIHdoZW5cbiAqICAgIGNyZWF0aW5nIGNhbnZhc2VzLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB7RE9NQ2FudmFzRmFjdG9yeX0uXG4gKiBAcHJvcGVydHkge09iamVjdH0gW0ZpbHRlckZhY3RvcnldIC0gVGhlIGZhY3RvcnkgdGhhdCB3aWxsIGJlIHVzZWQgdG9cbiAqICAgIGNyZWF0ZSBTVkcgZmlsdGVycyB3aGVuIHJlbmRlcmluZyBzb21lIGltYWdlcyBvbiB0aGUgbWFpbiBjYW52YXMuXG4gKiAgICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB7RE9NRmlsdGVyRmFjdG9yeX0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtlbmFibGVIV0FdIC0gRW5hYmxlcyBoYXJkd2FyZSBhY2NlbGVyYXRpb24gZm9yXG4gKiAgIHJlbmRlcmluZy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIG1haW4gZW50cnkgcG9pbnQgZm9yIGxvYWRpbmcgYSBQREYgYW5kIGludGVyYWN0aW5nIHdpdGggaXQuXG4gKlxuICogTk9URTogSWYgYSBVUkwgaXMgdXNlZCB0byBmZXRjaCB0aGUgUERGIGRhdGEgYSBzdGFuZGFyZCBGZXRjaCBBUEkgY2FsbCAob3JcbiAqIFhIUiBhcyBmYWxsYmFjaykgaXMgdXNlZCwgd2hpY2ggbWVhbnMgaXQgbXVzdCBmb2xsb3cgc2FtZSBvcmlnaW4gcnVsZXMsXG4gKiBlLmcuIG5vIGNyb3NzLWRvbWFpbiByZXF1ZXN0cyB3aXRob3V0IENPUlMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmcgfCBVUkwgfCBUeXBlZEFycmF5IHwgQXJyYXlCdWZmZXIgfCBEb2N1bWVudEluaXRQYXJhbWV0ZXJzfVxuICogICBzcmMgLSBDYW4gYmUgYSBVUkwgd2hlcmUgYSBQREYgZmlsZSBpcyBsb2NhdGVkLCBhIHR5cGVkIGFycmF5IChVaW50OEFycmF5KVxuICogICAgICAgICBhbHJlYWR5IHBvcHVsYXRlZCB3aXRoIGRhdGEsIG9yIGEgcGFyYW1ldGVyIG9iamVjdC5cbiAqIEByZXR1cm5zIHtQREZEb2N1bWVudExvYWRpbmdUYXNrfVxuICovXG5mdW5jdGlvbiBnZXREb2N1bWVudChzcmMgPSB7fSkge1xuICBpZiAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJHRU5FUklDXCIpKSB7XG4gICAgaWYgKHR5cGVvZiBzcmMgPT09IFwic3RyaW5nXCIgfHwgc3JjIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICBzcmMgPSB7IHVybDogc3JjIH07XG4gICAgfSBlbHNlIGlmIChzcmMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcoc3JjKSkge1xuICAgICAgc3JjID0geyBkYXRhOiBzcmMgfTtcbiAgICB9XG4gIH1cbiAgY29uc3QgdGFzayA9IG5ldyBQREZEb2N1bWVudExvYWRpbmdUYXNrKCk7XG4gIGNvbnN0IHsgZG9jSWQgfSA9IHRhc2s7XG5cbiAgY29uc3QgdXJsID0gc3JjLnVybCA/IGdldFVybFByb3Aoc3JjLnVybCkgOiBudWxsO1xuICBjb25zdCBkYXRhID0gc3JjLmRhdGEgPyBnZXREYXRhUHJvcChzcmMuZGF0YSkgOiBudWxsO1xuICBjb25zdCBodHRwSGVhZGVycyA9IHNyYy5odHRwSGVhZGVycyB8fCBudWxsO1xuICBjb25zdCB3aXRoQ3JlZGVudGlhbHMgPSBzcmMud2l0aENyZWRlbnRpYWxzID09PSB0cnVlO1xuICBjb25zdCBwYXNzd29yZCA9IHNyYy5wYXNzd29yZCA/PyBudWxsO1xuICBjb25zdCByYW5nZVRyYW5zcG9ydCA9XG4gICAgc3JjLnJhbmdlIGluc3RhbmNlb2YgUERGRGF0YVJhbmdlVHJhbnNwb3J0ID8gc3JjLnJhbmdlIDogbnVsbDtcbiAgY29uc3QgcmFuZ2VDaHVua1NpemUgPVxuICAgIE51bWJlci5pc0ludGVnZXIoc3JjLnJhbmdlQ2h1bmtTaXplKSAmJiBzcmMucmFuZ2VDaHVua1NpemUgPiAwXG4gICAgICA/IHNyYy5yYW5nZUNodW5rU2l6ZVxuICAgICAgOiBERUZBVUxUX1JBTkdFX0NIVU5LX1NJWkU7XG4gIGxldCB3b3JrZXIgPSBzcmMud29ya2VyIGluc3RhbmNlb2YgUERGV29ya2VyID8gc3JjLndvcmtlciA6IG51bGw7XG4gIGNvbnN0IHZlcmJvc2l0eSA9IHNyYy52ZXJib3NpdHk7XG4gIC8vIElnbm9yZSBcImRhdGE6XCItVVJMcywgc2luY2UgdGhleSBjYW4ndCBiZSB1c2VkIHRvIHJlY292ZXIgdmFsaWQgYWJzb2x1dGVcbiAgLy8gVVJMcyBhbnl3YXkuIFdlIHdhbnQgdG8gYXZvaWQgc2VuZGluZyB0aGVtIHRvIHRoZSB3b3JrZXItdGhyZWFkLCBzaW5jZVxuICAvLyB0aGV5IGNvbnRhaW4gdGhlICplbnRpcmUqIFBERiBkb2N1bWVudCBhbmQgY2FuIHRodXMgYmUgYXJiaXRyYXJpbHkgbG9uZy5cbiAgY29uc3QgZG9jQmFzZVVybCA9XG4gICAgdHlwZW9mIHNyYy5kb2NCYXNlVXJsID09PSBcInN0cmluZ1wiICYmICFpc0RhdGFTY2hlbWUoc3JjLmRvY0Jhc2VVcmwpXG4gICAgICA/IHNyYy5kb2NCYXNlVXJsXG4gICAgICA6IG51bGw7XG4gIGNvbnN0IGNNYXBVcmwgPSBnZXRGYWN0b3J5VXJsUHJvcChzcmMuY01hcFVybCk7XG4gIGNvbnN0IGNNYXBQYWNrZWQgPSBzcmMuY01hcFBhY2tlZCAhPT0gZmFsc2U7XG4gIGNvbnN0IENNYXBSZWFkZXJGYWN0b3J5ID1cbiAgICBzcmMuQ01hcFJlYWRlckZhY3RvcnkgfHxcbiAgICAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJHRU5FUklDXCIpICYmIGlzTm9kZUpTXG4gICAgICA/IE5vZGVDTWFwUmVhZGVyRmFjdG9yeVxuICAgICAgOiBET01DTWFwUmVhZGVyRmFjdG9yeSk7XG4gIGNvbnN0IGljY1VybCA9IGdldEZhY3RvcnlVcmxQcm9wKHNyYy5pY2NVcmwpO1xuICBjb25zdCBzdGFuZGFyZEZvbnREYXRhVXJsID0gZ2V0RmFjdG9yeVVybFByb3Aoc3JjLnN0YW5kYXJkRm9udERhdGFVcmwpO1xuICBjb25zdCBTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSA9XG4gICAgc3JjLlN0YW5kYXJkRm9udERhdGFGYWN0b3J5IHx8XG4gICAgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSAmJiBpc05vZGVKU1xuICAgICAgPyBOb2RlU3RhbmRhcmRGb250RGF0YUZhY3RvcnlcbiAgICAgIDogRE9NU3RhbmRhcmRGb250RGF0YUZhY3RvcnkpO1xuICBjb25zdCB3YXNtVXJsID0gZ2V0RmFjdG9yeVVybFByb3Aoc3JjLndhc21VcmwpO1xuICBjb25zdCBXYXNtRmFjdG9yeSA9XG4gICAgc3JjLldhc21GYWN0b3J5IHx8XG4gICAgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSAmJiBpc05vZGVKU1xuICAgICAgPyBOb2RlV2FzbUZhY3RvcnlcbiAgICAgIDogRE9NV2FzbUZhY3RvcnkpO1xuICBjb25zdCBpZ25vcmVFcnJvcnMgPSBzcmMuc3RvcEF0RXJyb3JzICE9PSB0cnVlO1xuICBjb25zdCBtYXhJbWFnZVNpemUgPVxuICAgIE51bWJlci5pc0ludGVnZXIoc3JjLm1heEltYWdlU2l6ZSkgJiYgc3JjLm1heEltYWdlU2l6ZSA+IC0xXG4gICAgICA/IHNyYy5tYXhJbWFnZVNpemVcbiAgICAgIDogLTE7XG4gIGNvbnN0IGlzRXZhbFN1cHBvcnRlZCA9IHNyYy5pc0V2YWxTdXBwb3J0ZWQgIT09IGZhbHNlO1xuICBjb25zdCBpc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZCA9XG4gICAgdHlwZW9mIHNyYy5pc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZCA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gc3JjLmlzT2Zmc2NyZWVuQ2FudmFzU3VwcG9ydGVkXG4gICAgICA6ICFpc05vZGVKUztcbiAgY29uc3QgaXNJbWFnZURlY29kZXJTdXBwb3J0ZWQgPVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgIHR5cGVvZiBzcmMuaXNJbWFnZURlY29kZXJTdXBwb3J0ZWQgPT09IFwiYm9vbGVhblwiXG4gICAgICA/IHNyYy5pc0ltYWdlRGVjb2RlclN1cHBvcnRlZFxuICAgICAgOiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbiAgICAgICAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpXG4gICAgICAgID8gdHJ1ZVxuICAgICAgICA6IHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiQ0hST01FXCIpXG4gICAgICAgICAgPyBmYWxzZVxuICAgICAgICAgIDogIWlzTm9kZUpTICYmIChGZWF0dXJlVGVzdC5wbGF0Zm9ybS5pc0ZpcmVmb3ggfHwgIWdsb2JhbFRoaXMuY2hyb21lKTtcbiAgY29uc3QgY2FudmFzTWF4QXJlYUluQnl0ZXMgPSBOdW1iZXIuaXNJbnRlZ2VyKHNyYy5jYW52YXNNYXhBcmVhSW5CeXRlcylcbiAgICA/IHNyYy5jYW52YXNNYXhBcmVhSW5CeXRlc1xuICAgIDogLTE7XG4gIGNvbnN0IGRpc2FibGVGb250RmFjZSA9XG4gICAgdHlwZW9mIHNyYy5kaXNhYmxlRm9udEZhY2UgPT09IFwiYm9vbGVhblwiID8gc3JjLmRpc2FibGVGb250RmFjZSA6IGlzTm9kZUpTO1xuICBjb25zdCBmb250RXh0cmFQcm9wZXJ0aWVzID0gc3JjLmZvbnRFeHRyYVByb3BlcnRpZXMgPT09IHRydWU7XG4gIGNvbnN0IGVuYWJsZVhmYSA9IHNyYy5lbmFibGVYZmEgPT09IHRydWU7XG4gIGNvbnN0IG93bmVyRG9jdW1lbnQgPSBzcmMub3duZXJEb2N1bWVudCB8fCBnbG9iYWxUaGlzLmRvY3VtZW50O1xuICBjb25zdCBkaXNhYmxlUmFuZ2UgPSBzcmMuZGlzYWJsZVJhbmdlID09PSB0cnVlO1xuICBjb25zdCBkaXNhYmxlU3RyZWFtID0gc3JjLmRpc2FibGVTdHJlYW0gPT09IHRydWU7XG4gIGNvbnN0IGRpc2FibGVBdXRvRmV0Y2ggPSBzcmMuZGlzYWJsZUF1dG9GZXRjaCA9PT0gdHJ1ZTtcbiAgY29uc3QgcGRmQnVnID0gc3JjLnBkZkJ1ZyA9PT0gdHJ1ZTtcbiAgY29uc3QgQ2FudmFzRmFjdG9yeSA9XG4gICAgc3JjLkNhbnZhc0ZhY3RvcnkgfHxcbiAgICAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJHRU5FUklDXCIpICYmIGlzTm9kZUpTXG4gICAgICA/IE5vZGVDYW52YXNGYWN0b3J5XG4gICAgICA6IERPTUNhbnZhc0ZhY3RvcnkpO1xuICBjb25zdCBGaWx0ZXJGYWN0b3J5ID1cbiAgICBzcmMuRmlsdGVyRmFjdG9yeSB8fFxuICAgICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIkdFTkVSSUNcIikgJiYgaXNOb2RlSlNcbiAgICAgID8gTm9kZUZpbHRlckZhY3RvcnlcbiAgICAgIDogRE9NRmlsdGVyRmFjdG9yeSk7XG4gIGNvbnN0IGVuYWJsZUhXQSA9IHNyYy5lbmFibGVIV0EgPT09IHRydWU7XG4gIGNvbnN0IHVzZVdhc20gPSBzcmMudXNlV2FzbSAhPT0gZmFsc2U7XG5cbiAgLy8gUGFyYW1ldGVycyB3aG9zZSBkZWZhdWx0IHZhbHVlcyBkZXBlbmQgb24gb3RoZXIgcGFyYW1ldGVycy5cbiAgY29uc3QgbGVuZ3RoID0gcmFuZ2VUcmFuc3BvcnQgPyByYW5nZVRyYW5zcG9ydC5sZW5ndGggOiAoc3JjLmxlbmd0aCA/PyBOYU4pO1xuICBjb25zdCB1c2VTeXN0ZW1Gb250cyA9XG4gICAgdHlwZW9mIHNyYy51c2VTeXN0ZW1Gb250cyA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gc3JjLnVzZVN5c3RlbUZvbnRzXG4gICAgICA6ICFpc05vZGVKUyAmJiAhZGlzYWJsZUZvbnRGYWNlO1xuICBjb25zdCB1c2VXb3JrZXJGZXRjaCA9XG4gICAgdHlwZW9mIHNyYy51c2VXb3JrZXJGZXRjaCA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gc3JjLnVzZVdvcmtlckZldGNoXG4gICAgICA6ICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHx8XG4gICAgICAgICEhKFxuICAgICAgICAgIENNYXBSZWFkZXJGYWN0b3J5ID09PSBET01DTWFwUmVhZGVyRmFjdG9yeSAmJlxuICAgICAgICAgIFN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID09PSBET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSAmJlxuICAgICAgICAgIFdhc21GYWN0b3J5ID09PSBET01XYXNtRmFjdG9yeSAmJlxuICAgICAgICAgIGNNYXBVcmwgJiZcbiAgICAgICAgICBzdGFuZGFyZEZvbnREYXRhVXJsICYmXG4gICAgICAgICAgd2FzbVVybCAmJlxuICAgICAgICAgIGlzVmFsaWRGZXRjaFVybChjTWFwVXJsLCBkb2N1bWVudC5iYXNlVVJJKSAmJlxuICAgICAgICAgIGlzVmFsaWRGZXRjaFVybChzdGFuZGFyZEZvbnREYXRhVXJsLCBkb2N1bWVudC5iYXNlVVJJKSAmJlxuICAgICAgICAgIGlzVmFsaWRGZXRjaFVybCh3YXNtVXJsLCBkb2N1bWVudC5iYXNlVVJJKVxuICAgICAgICApO1xuXG4gIC8vIFBhcmFtZXRlcnMgb25seSBpbnRlbmRlZCBmb3IgZGV2ZWxvcG1lbnQvdGVzdGluZyBwdXJwb3Nlcy5cbiAgY29uc3Qgc3R5bGVFbGVtZW50ID1cbiAgICB0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIilcbiAgICAgID8gc3JjLnN0eWxlRWxlbWVudFxuICAgICAgOiBudWxsO1xuXG4gIC8vIFNldCB0aGUgbWFpbi10aHJlYWQgdmVyYm9zaXR5IGxldmVsLlxuICBzZXRWZXJib3NpdHlMZXZlbCh2ZXJib3NpdHkpO1xuXG4gIC8vIEVuc3VyZSB0aGF0IHRoZSB2YXJpb3VzIGZhY3RvcmllcyBjYW4gYmUgaW5pdGlhbGl6ZWQsIHdoZW4gbmVjZXNzYXJ5LFxuICAvLyBzaW5jZSB0aGUgdXNlciBtYXkgcHJvdmlkZSAqY3VzdG9tKiBvbmVzLlxuICBjb25zdCB0cmFuc3BvcnRGYWN0b3J5ID0ge1xuICAgIGNhbnZhc0ZhY3Rvcnk6IG5ldyBDYW52YXNGYWN0b3J5KHsgb3duZXJEb2N1bWVudCwgZW5hYmxlSFdBIH0pLFxuICAgIGZpbHRlckZhY3Rvcnk6IG5ldyBGaWx0ZXJGYWN0b3J5KHsgZG9jSWQsIG93bmVyRG9jdW1lbnQgfSksXG4gICAgY01hcFJlYWRlckZhY3Rvcnk6XG4gICAgICAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB8fFxuICAgICAgdXNlV29ya2VyRmV0Y2hcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogbmV3IENNYXBSZWFkZXJGYWN0b3J5KHsgYmFzZVVybDogY01hcFVybCwgaXNDb21wcmVzc2VkOiBjTWFwUGFja2VkIH0pLFxuICAgIHN0YW5kYXJkRm9udERhdGFGYWN0b3J5OlxuICAgICAgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkgfHxcbiAgICAgIHVzZVdvcmtlckZldGNoXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IG5ldyBTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSh7IGJhc2VVcmw6IHN0YW5kYXJkRm9udERhdGFVcmwgfSksXG4gICAgd2FzbUZhY3Rvcnk6XG4gICAgICAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB8fFxuICAgICAgdXNlV29ya2VyRmV0Y2hcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogbmV3IFdhc21GYWN0b3J5KHsgYmFzZVVybDogd2FzbVVybCB9KSxcbiAgfTtcblxuICBpZiAoIXdvcmtlcikge1xuICAgIGNvbnN0IHdvcmtlclBhcmFtcyA9IHtcbiAgICAgIHZlcmJvc2l0eSxcbiAgICAgIHBvcnQ6IEdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyUG9ydCxcbiAgICB9O1xuICAgIC8vIFdvcmtlciB3YXMgbm90IHByb3ZpZGVkIC0tIGNyZWF0aW5nIGFuZCBvd25pbmcgb3VyIG93bi4gSWYgbWVzc2FnZSBwb3J0XG4gICAgLy8gaXMgc3BlY2lmaWVkIGluIGdsb2JhbCB3b3JrZXIgb3B0aW9ucywgdXNpbmcgaXQuXG4gICAgd29ya2VyID0gd29ya2VyUGFyYW1zLnBvcnRcbiAgICAgID8gUERGV29ya2VyLmZyb21Qb3J0KHdvcmtlclBhcmFtcylcbiAgICAgIDogbmV3IFBERldvcmtlcih3b3JrZXJQYXJhbXMpO1xuICAgIHRhc2suX3dvcmtlciA9IHdvcmtlcjtcbiAgfVxuXG4gIGNvbnN0IGRvY1BhcmFtcyA9IHtcbiAgICBkb2NJZCxcbiAgICBhcGlWZXJzaW9uOlxuICAgICAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmICFQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKVxuICAgICAgICA/IFBERkpTRGV2LmV2YWwoXCJCVU5ETEVfVkVSU0lPTlwiKVxuICAgICAgICA6IG51bGwsXG4gICAgZGF0YSxcbiAgICBwYXNzd29yZCxcbiAgICBkaXNhYmxlQXV0b0ZldGNoLFxuICAgIHJhbmdlQ2h1bmtTaXplLFxuICAgIGxlbmd0aCxcbiAgICBkb2NCYXNlVXJsLFxuICAgIGVuYWJsZVhmYSxcbiAgICBldmFsdWF0b3JPcHRpb25zOiB7XG4gICAgICBtYXhJbWFnZVNpemUsXG4gICAgICBkaXNhYmxlRm9udEZhY2UsXG4gICAgICBpZ25vcmVFcnJvcnMsXG4gICAgICBpc0V2YWxTdXBwb3J0ZWQsXG4gICAgICBpc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZCxcbiAgICAgIGlzSW1hZ2VEZWNvZGVyU3VwcG9ydGVkLFxuICAgICAgY2FudmFzTWF4QXJlYUluQnl0ZXMsXG4gICAgICBmb250RXh0cmFQcm9wZXJ0aWVzLFxuICAgICAgdXNlU3lzdGVtRm9udHMsXG4gICAgICB1c2VXYXNtLFxuICAgICAgdXNlV29ya2VyRmV0Y2gsXG4gICAgICBjTWFwVXJsLFxuICAgICAgaWNjVXJsLFxuICAgICAgc3RhbmRhcmRGb250RGF0YVVybCxcbiAgICAgIHdhc21VcmwsXG4gICAgfSxcbiAgfTtcbiAgY29uc3QgdHJhbnNwb3J0UGFyYW1zID0ge1xuICAgIG93bmVyRG9jdW1lbnQsXG4gICAgcGRmQnVnLFxuICAgIHN0eWxlRWxlbWVudCxcbiAgICBsb2FkaW5nUGFyYW1zOiB7XG4gICAgICBkaXNhYmxlQXV0b0ZldGNoLFxuICAgICAgZW5hYmxlWGZhLFxuICAgIH0sXG4gIH07XG5cbiAgd29ya2VyLnByb21pc2VcbiAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGFzay5kZXN0cm95ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTG9hZGluZyBhYm9ydGVkXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHdvcmtlci5kZXN0cm95ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV29ya2VyIHdhcyBkZXN0cm95ZWRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdvcmtlcklkUHJvbWlzZSA9IHdvcmtlci5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXG4gICAgICAgIFwiR2V0RG9jUmVxdWVzdFwiLFxuICAgICAgICBkb2NQYXJhbXMsXG4gICAgICAgIGRhdGEgPyBbZGF0YS5idWZmZXJdIDogbnVsbFxuICAgICAgKTtcblxuICAgICAgbGV0IG5ldHdvcmtTdHJlYW07XG4gICAgICBpZiAocmFuZ2VUcmFuc3BvcnQpIHtcbiAgICAgICAgbmV0d29ya1N0cmVhbSA9IG5ldyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtKHJhbmdlVHJhbnNwb3J0LCB7XG4gICAgICAgICAgZGlzYWJsZVJhbmdlLFxuICAgICAgICAgIGRpc2FibGVTdHJlYW0sXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICghZGF0YSkge1xuICAgICAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkOiBOZXR3b3JrU3RyZWFtXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZ2V0RG9jdW1lbnQgLSBubyBgdXJsYCBwYXJhbWV0ZXIgcHJvdmlkZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBOZXR3b3JrU3RyZWFtO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSAmJlxuICAgICAgICAgIGlzTm9kZUpTXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChpc1ZhbGlkRmV0Y2hVcmwodXJsKSkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB0eXBlb2YgZmV0Y2ggPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgICAgICAgICAgdHlwZW9mIFJlc3BvbnNlID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgICAgICAgICAgICEoXCJib2R5XCIgaW4gUmVzcG9uc2UucHJvdG90eXBlKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBcImdldERvY3VtZW50IC0gdGhlIEZldGNoIEFQSSB3YXMgZGlzYWJsZWQgaW4gTm9kZS5qcywgc2VlIGAtLW5vLWV4cGVyaW1lbnRhbC1mZXRjaGAuXCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE5ldHdvcmtTdHJlYW0gPSBQREZGZXRjaFN0cmVhbTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgTmV0d29ya1N0cmVhbSA9IFBERk5vZGVTdHJlYW07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE5ldHdvcmtTdHJlYW0gPSBpc1ZhbGlkRmV0Y2hVcmwodXJsKVxuICAgICAgICAgICAgPyBQREZGZXRjaFN0cmVhbVxuICAgICAgICAgICAgOiBQREZOZXR3b3JrU3RyZWFtO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV0d29ya1N0cmVhbSA9IG5ldyBOZXR3b3JrU3RyZWFtKHtcbiAgICAgICAgICB1cmwsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIGh0dHBIZWFkZXJzLFxuICAgICAgICAgIHdpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICByYW5nZUNodW5rU2l6ZSxcbiAgICAgICAgICBkaXNhYmxlUmFuZ2UsXG4gICAgICAgICAgZGlzYWJsZVN0cmVhbSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB3b3JrZXJJZFByb21pc2UudGhlbih3b3JrZXJJZCA9PiB7XG4gICAgICAgIGlmICh0YXNrLmRlc3Ryb3llZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxvYWRpbmcgYWJvcnRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod29ya2VyLmRlc3Ryb3llZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIldvcmtlciB3YXMgZGVzdHJveWVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUhhbmRsZXIgPSBuZXcgTWVzc2FnZUhhbmRsZXIoZG9jSWQsIHdvcmtlcklkLCB3b3JrZXIucG9ydCk7XG4gICAgICAgIGNvbnN0IHRyYW5zcG9ydCA9IG5ldyBXb3JrZXJUcmFuc3BvcnQoXG4gICAgICAgICAgbWVzc2FnZUhhbmRsZXIsXG4gICAgICAgICAgdGFzayxcbiAgICAgICAgICBuZXR3b3JrU3RyZWFtLFxuICAgICAgICAgIHRyYW5zcG9ydFBhcmFtcyxcbiAgICAgICAgICB0cmFuc3BvcnRGYWN0b3J5XG4gICAgICAgICk7XG4gICAgICAgIHRhc2suX3RyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgICAgICAgbWVzc2FnZUhhbmRsZXIuc2VuZChcIlJlYWR5XCIsIG51bGwpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgICAuY2F0Y2godGFzay5fY2FwYWJpbGl0eS5yZWplY3QpO1xuXG4gIHJldHVybiB0YXNrO1xufVxuXG5mdW5jdGlvbiBnZXRVcmxQcm9wKHZhbCkge1xuICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gICAgcmV0dXJuIG51bGw7IC8vIFRoZSAndXJsJyBpcyB1bnVzZWQgd2l0aCBgUERGRGF0YVJhbmdlVHJhbnNwb3J0YC5cbiAgfVxuICBpZiAodmFsIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgcmV0dXJuIHZhbC5ocmVmO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSAmJlxuICAgICAgaXNOb2RlSlNcbiAgICApIHtcbiAgICAgIHJldHVybiB2YWw7IC8vIFVzZSB0aGUgdXJsIGFzLWlzIGluIE5vZGUuanMgZW52aXJvbm1lbnRzLlxuICAgIH1cblxuICAgIC8vIFRoZSBmdWxsIHBhdGggaXMgcmVxdWlyZWQgaW4gdGhlICd1cmwnIGZpZWxkLlxuICAgIGNvbnN0IHVybCA9IFVSTC5wYXJzZSh2YWwsIHdpbmRvdy5sb2NhdGlvbik7XG4gICAgaWYgKHVybCkge1xuICAgICAgcmV0dXJuIHVybC5ocmVmO1xuICAgIH1cbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgXCJJbnZhbGlkIFBERiB1cmwgZGF0YTogXCIgK1xuICAgICAgXCJlaXRoZXIgc3RyaW5nIG9yIFVSTC1vYmplY3QgaXMgZXhwZWN0ZWQgaW4gdGhlIHVybCBwcm9wZXJ0eS5cIlxuICApO1xufVxuXG5mdW5jdGlvbiBnZXREYXRhUHJvcCh2YWwpIHtcbiAgLy8gQ29udmVydGluZyBzdHJpbmcgb3IgYXJyYXktbGlrZSBkYXRhIHRvIFVpbnQ4QXJyYXkuXG4gIGlmIChcbiAgICB0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSAmJlxuICAgIGlzTm9kZUpTICYmXG4gICAgdHlwZW9mIEJ1ZmZlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG4gICAgdmFsIGluc3RhbmNlb2YgQnVmZmVyIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJQbGVhc2UgcHJvdmlkZSBiaW5hcnkgZGF0YSBhcyBgVWludDhBcnJheWAsIHJhdGhlciB0aGFuIGBCdWZmZXJgLlwiXG4gICAgKTtcbiAgfVxuICBpZiAodmFsIGluc3RhbmNlb2YgVWludDhBcnJheSAmJiB2YWwuYnl0ZUxlbmd0aCA9PT0gdmFsLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgLy8gVXNlIHRoZSBkYXRhIGFzLWlzIHdoZW4gaXQncyBhbHJlYWR5IGEgVWludDhBcnJheSB0aGF0IGNvbXBsZXRlbHlcbiAgICAvLyBcInV0aWxpemVzXCIgaXRzIHVuZGVybHlpbmcgQXJyYXlCdWZmZXIsIHRvIHByZXZlbnQgYW55IHBvc3NpYmxlXG4gICAgLy8gaXNzdWVzIHdoZW4gdHJhbnNmZXJyaW5nIGl0IHRvIHRoZSB3b3JrZXItdGhyZWFkLlxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9CeXRlcyh2YWwpO1xuICB9XG4gIGlmIChcbiAgICB2YWwgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fFxuICAgIEFycmF5QnVmZmVyLmlzVmlldyh2YWwpIHx8XG4gICAgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgIWlzTmFOKHZhbD8ubGVuZ3RoKSlcbiAgKSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIFwiSW52YWxpZCBQREYgYmluYXJ5IGRhdGE6IGVpdGhlciBUeXBlZEFycmF5LCBcIiArXG4gICAgICBcInN0cmluZywgb3IgYXJyYXktbGlrZSBvYmplY3QgaXMgZXhwZWN0ZWQgaW4gdGhlIGRhdGEgcHJvcGVydHkuXCJcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0RmFjdG9yeVVybFByb3AodmFsKSB7XG4gIGlmICh0eXBlb2YgdmFsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKHZhbC5lbmRzV2l0aChcIi9cIikpIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmYWN0b3J5IHVybDogXCIke3ZhbH1cIiBtdXN0IGluY2x1ZGUgdHJhaWxpbmcgc2xhc2guYCk7XG59XG5cbmNvbnN0IGlzUmVmUHJveHkgPSB2ID0+XG4gIHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmXG4gIE51bWJlci5pc0ludGVnZXIodj8ubnVtKSAmJlxuICB2Lm51bSA+PSAwICYmXG4gIE51bWJlci5pc0ludGVnZXIodj8uZ2VuKSAmJlxuICB2LmdlbiA+PSAwO1xuXG5jb25zdCBpc05hbWVQcm94eSA9IHYgPT4gdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHY/Lm5hbWUgPT09IFwic3RyaW5nXCI7XG5cbmNvbnN0IGlzVmFsaWRFeHBsaWNpdERlc3QgPSBfaXNWYWxpZEV4cGxpY2l0RGVzdC5iaW5kKFxuICBudWxsLFxuICAvKiB2YWxpZFJlZiA9ICovIGlzUmVmUHJveHksXG4gIC8qIHZhbGlkTmFtZSA9ICovIGlzTmFtZVByb3h5XG4pO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9uUHJvZ3Jlc3NQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge251bWJlcn0gbG9hZGVkIC0gQ3VycmVudGx5IGxvYWRlZCBudW1iZXIgb2YgYnl0ZXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gdG90YWwgLSBUb3RhbCBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIFBERiBmaWxlLlxuICovXG5cbi8qKlxuICogVGhlIGxvYWRpbmcgdGFzayBjb250cm9scyB0aGUgb3BlcmF0aW9ucyByZXF1aXJlZCB0byBsb2FkIGEgUERGIGRvY3VtZW50XG4gKiAoc3VjaCBhcyBuZXR3b3JrIHJlcXVlc3RzKSBhbmQgcHJvdmlkZXMgYSB3YXkgdG8gbGlzdGVuIGZvciBjb21wbGV0aW9uLFxuICogYWZ0ZXIgd2hpY2ggaW5kaXZpZHVhbCBwYWdlcyBjYW4gYmUgcmVuZGVyZWQuXG4gKi9cbmNsYXNzIFBERkRvY3VtZW50TG9hZGluZ1Rhc2sge1xuICBzdGF0aWMgI2RvY0lkID0gMDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdHJhbnNwb3J0ID0gbnVsbDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF93b3JrZXIgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGRvY3VtZW50IGxvYWRpbmcgdGFzay5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGRvY0lkID0gYGQke1BERkRvY3VtZW50TG9hZGluZ1Rhc2suI2RvY0lkKyt9YDtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgbG9hZGluZyB0YXNrIGlzIGRlc3Ryb3llZCBvciBub3QuXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZGVzdHJveWVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRvIHJlcXVlc3QgYSBwYXNzd29yZCBpZiBhIHdyb25nIG9yIG5vIHBhc3N3b3JkIHdhcyBwcm92aWRlZC5cbiAgICogVGhlIGNhbGxiYWNrIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzOiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZFxuICAgKiB3aXRoIHRoZSBuZXcgcGFzc3dvcmQsIGFuZCBhIHJlYXNvbiAoc2VlIHtAbGluayBQYXNzd29yZFJlc3BvbnNlc30pLlxuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBvblBhc3N3b3JkID0gbnVsbDtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdG8gYmUgYWJsZSB0byBtb25pdG9yIHRoZSBsb2FkaW5nIHByb2dyZXNzIG9mIHRoZSBQREYgZmlsZVxuICAgKiAobmVjZXNzYXJ5IHRvIGltcGxlbWVudCBlLmcuIGEgbG9hZGluZyBiYXIpLlxuICAgKiBUaGUgY2FsbGJhY2sgcmVjZWl2ZXMgYW4ge0BsaW5rIE9uUHJvZ3Jlc3NQYXJhbWV0ZXJzfSBhcmd1bWVudC5cbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgb25Qcm9ncmVzcyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFByb21pc2UgZm9yIGRvY3VtZW50IGxvYWRpbmcgdGFzayBjb21wbGV0aW9uLlxuICAgKiBAdHlwZSB7UHJvbWlzZTxQREZEb2N1bWVudFByb3h5Pn1cbiAgICovXG4gIGdldCBwcm9taXNlKCkge1xuICAgIHJldHVybiB0aGlzLl9jYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQWJvcnQgYWxsIG5ldHdvcmsgcmVxdWVzdHMgYW5kIGRlc3Ryb3kgdGhlIHdvcmtlci5cbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gZGVzdHJ1Y3Rpb24gaXNcbiAgICogICBjb21wbGV0ZWQuXG4gICAqL1xuICBhc3luYyBkZXN0cm95KCkge1xuICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHtcbiAgICAgIGF3YWl0IHRoaXMuX3RyYW5zcG9ydD8uZGVzdHJveSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAodGhpcy5fd29ya2VyPy5wb3J0KSB7XG4gICAgICAgICAgdGhpcy5fd29ya2VyLl9wZW5kaW5nRGVzdHJveSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5fdHJhbnNwb3J0Py5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBpZiAodGhpcy5fd29ya2VyPy5wb3J0KSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX3dvcmtlci5fcGVuZGluZ0Rlc3Ryb3k7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG51bGw7XG5cbiAgICB0aGlzLl93b3JrZXI/LmRlc3Ryb3koKTtcbiAgICB0aGlzLl93b3JrZXIgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGVtcHQgdG8gZmV0Y2ggdGhlIHJhdyBkYXRhIG9mIHRoZSBQREYgZG9jdW1lbnQsIHdoZW4gZS5nLlxuICAgKiAgLSBBbiBleGNlcHRpb24gd2FzIHRocm93biBkdXJpbmcgZG9jdW1lbnQgaW5pdGlhbGl6YXRpb24uXG4gICAqICAtIEFuIGBvblBhc3N3b3JkYCBjYWxsYmFjayBpcyBkZWxheWluZyBpbml0aWFsaXphdGlvbi5cbiAgICogQHJldHVybnMge1Byb21pc2U8VWludDhBcnJheT59XG4gICAqL1xuICBhc3luYyBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RGF0YSgpO1xuICB9XG59XG5cbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdG8gc3VwcG9ydCByYW5nZSByZXF1ZXN0cyBmaWxlIGxvYWRpbmcuXG4gKlxuICogTk9URTogVGhlIFR5cGVkQXJyYXlzIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IgYW5kIHJlbGV2YW50IG1ldGhvZHMgYmVsb3dcbiAqIHdpbGwgZ2VuZXJhbGx5IGJlIHRyYW5zZmVycmVkIHRvIHRoZSB3b3JrZXItdGhyZWFkLiBUaGlzIHdpbGwgaGVscCByZWR1Y2VcbiAqIG1haW4tdGhyZWFkIG1lbW9yeSB1c2FnZSwgaG93ZXZlciBpdCB3aWxsIHRha2Ugb3duZXJzaGlwIG9mIHRoZSBUeXBlZEFycmF5cy5cbiAqL1xuY2xhc3MgUERGRGF0YVJhbmdlVHJhbnNwb3J0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGhcbiAgICogQHBhcmFtIHtVaW50OEFycmF5fG51bGx9IGluaXRpYWxEYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Byb2dyZXNzaXZlRG9uZV1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZV1cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIGxlbmd0aCxcbiAgICBpbml0aWFsRGF0YSxcbiAgICBwcm9ncmVzc2l2ZURvbmUgPSBmYWxzZSxcbiAgICBjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSA9IG51bGxcbiAgKSB7XG4gICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgdGhpcy5pbml0aWFsRGF0YSA9IGluaXRpYWxEYXRhO1xuICAgIHRoaXMucHJvZ3Jlc3NpdmVEb25lID0gcHJvZ3Jlc3NpdmVEb25lO1xuICAgIHRoaXMuY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUgPSBjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZTtcblxuICAgIHRoaXMuX3JhbmdlTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5fcHJvZ3Jlc3NMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLl9wcm9ncmVzc2l2ZVJlYWRMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLl9wcm9ncmVzc2l2ZURvbmVMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lclxuICAgKi9cbiAgYWRkUmFuZ2VMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIHRoaXMuX3JhbmdlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyXG4gICAqL1xuICBhZGRQcm9ncmVzc0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5fcHJvZ3Jlc3NMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXJcbiAgICovXG4gIGFkZFByb2dyZXNzaXZlUmVhZExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyXG4gICAqL1xuICBhZGRQcm9ncmVzc2l2ZURvbmVMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIHRoaXMuX3Byb2dyZXNzaXZlRG9uZUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYmVnaW5cbiAgICogQHBhcmFtIHtVaW50OEFycmF5fG51bGx9IGNodW5rXG4gICAqL1xuICBvbkRhdGFSYW5nZShiZWdpbiwgY2h1bmspIHtcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMuX3JhbmdlTGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcihiZWdpbiwgY2h1bmspO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbG9hZGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdG90YWxcbiAgICovXG4gIG9uRGF0YVByb2dyZXNzKGxvYWRlZCwgdG90YWwpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NMaXN0ZW5lcnMpIHtcbiAgICAgICAgbGlzdGVuZXIobG9hZGVkLCB0b3RhbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtVaW50OEFycmF5fG51bGx9IGNodW5rXG4gICAqL1xuICBvbkRhdGFQcm9ncmVzc2l2ZVJlYWQoY2h1bmspIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzKSB7XG4gICAgICAgIGxpc3RlbmVyKGNodW5rKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uRGF0YVByb2dyZXNzaXZlRG9uZSgpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXJzKSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB0cmFuc3BvcnRSZWFkeSgpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpblxuICAgKiBAcGFyYW0ge251bWJlcn0gZW5kXG4gICAqL1xuICByZXF1ZXN0RGF0YVJhbmdlKGJlZ2luLCBlbmQpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBQREZEYXRhUmFuZ2VUcmFuc3BvcnQucmVxdWVzdERhdGFSYW5nZVwiKTtcbiAgfVxuXG4gIGFib3J0KCkge31cbn1cblxuLyoqXG4gKiBQcm94eSB0byBhIGBQREZEb2N1bWVudGAgaW4gdGhlIHdvcmtlciB0aHJlYWQuXG4gKi9cbmNsYXNzIFBERkRvY3VtZW50UHJveHkge1xuICBjb25zdHJ1Y3RvcihwZGZJbmZvLCB0cmFuc3BvcnQpIHtcbiAgICB0aGlzLl9wZGZJbmZvID0gcGRmSW5mbztcbiAgICB0aGlzLl90cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG5cbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgICAvLyBGb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdldE5ldHdvcmtTdHJlYW1OYW1lXCIsIHtcbiAgICAgICAgdmFsdWU6ICgpID0+IHRoaXMuX3RyYW5zcG9ydC5nZXROZXR3b3JrU3RyZWFtTmFtZSgpLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRYRkFEYXRhc2V0c1wiLCB7XG4gICAgICAgIHZhbHVlOiAoKSA9PiB0aGlzLl90cmFuc3BvcnQuZ2V0WEZBRGF0YXNldHMoKSxcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2V0WFJlZlByZXZWYWx1ZVwiLCB7XG4gICAgICAgIHZhbHVlOiAoKSA9PiB0aGlzLl90cmFuc3BvcnQuZ2V0WFJlZlByZXZWYWx1ZSgpLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRTdGFydFhSZWZQb3NcIiwge1xuICAgICAgICB2YWx1ZTogKCkgPT4gdGhpcy5fdHJhbnNwb3J0LmdldFN0YXJ0WFJlZlBvcygpLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRBbm5vdEFycmF5XCIsIHtcbiAgICAgICAgdmFsdWU6IHBhZ2VJbmRleCA9PiB0aGlzLl90cmFuc3BvcnQuZ2V0QW5ub3RBcnJheShwYWdlSW5kZXgpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBbm5vdGF0aW9uU3RvcmFnZX0gU3RvcmFnZSBmb3IgYW5ub3RhdGlvbiBkYXRhIGluIGZvcm1zLlxuICAgKi9cbiAgZ2V0IGFubm90YXRpb25TdG9yYWdlKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuYW5ub3RhdGlvblN0b3JhZ2U7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge09iamVjdH0gVGhlIGNhbnZhcyBmYWN0b3J5IGluc3RhbmNlLlxuICAgKi9cbiAgZ2V0IGNhbnZhc0ZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5jYW52YXNGYWN0b3J5O1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtPYmplY3R9IFRoZSBmaWx0ZXIgZmFjdG9yeSBpbnN0YW5jZS5cbiAgICovXG4gIGdldCBmaWx0ZXJGYWN0b3J5KCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZmlsdGVyRmFjdG9yeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfSBUb3RhbCBudW1iZXIgb2YgcGFnZXMgaW4gdGhlIFBERiBmaWxlLlxuICAgKi9cbiAgZ2V0IG51bVBhZ2VzKCkge1xuICAgIHJldHVybiB0aGlzLl9wZGZJbmZvLm51bVBhZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmcgfCBudWxsPn0gQSAobm90IGd1YXJhbnRlZWQgdG8gYmUpIHVuaXF1ZSBJRCB0byBpZGVudGlmeVxuICAgKiAgIHRoZSBQREYgZG9jdW1lbnQuXG4gICAqICAgTk9URTogVGhlIGZpcnN0IGVsZW1lbnQgd2lsbCBhbHdheXMgYmUgZGVmaW5lZCBmb3IgYWxsIFBERiBkb2N1bWVudHMsXG4gICAqICAgd2hlcmVhcyB0aGUgc2Vjb25kIGVsZW1lbnQgaXMgb25seSBkZWZpbmVkIGZvciAqbW9kaWZpZWQqIFBERiBkb2N1bWVudHMuXG4gICAqL1xuICBnZXQgZmluZ2VycHJpbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl9wZGZJbmZvLmZpbmdlcnByaW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IFhGQSBmb3JtLlxuICAgKi9cbiAgZ2V0IGlzUHVyZVhmYSgpIHtcbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiaXNQdXJlWGZhXCIsICEhdGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOT1RFOiBUaGlzIGlzIChtb3N0bHkpIGludGVuZGVkIHRvIHN1cHBvcnQgcHJpbnRpbmcgb2YgWEZBIGZvcm1zLlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0IHwgbnVsbH0gQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhIEhUTUwgdHJlZSBzdHJ1Y3R1cmVcbiAgICogICB0byByZW5kZXIgdGhlIFhGQSwgb3IgYG51bGxgIHdoZW4gbm8gWEZBIGZvcm0gZXhpc3RzLlxuICAgKi9cbiAgZ2V0IGFsbFhmYUh0bWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5faHRtbEZvclhmYTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGFnZU51bWJlciAtIFRoZSBwYWdlIG51bWJlciB0byBnZXQuIFRoZSBmaXJzdCBwYWdlIGlzIDEuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFBERlBhZ2VQcm94eT59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGhcbiAgICogICBhIHtAbGluayBQREZQYWdlUHJveHl9IG9iamVjdC5cbiAgICovXG4gIGdldFBhZ2UocGFnZU51bWJlcikge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGFnZShwYWdlTnVtYmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1JlZlByb3h5fSByZWYgLSBUaGUgcGFnZSByZWZlcmVuY2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG51bWJlcj59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggdGhlIHBhZ2UgaW5kZXgsXG4gICAqICAgc3RhcnRpbmcgZnJvbSB6ZXJvLCB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVmZXJlbmNlLlxuICAgKi9cbiAgZ2V0UGFnZUluZGV4KHJlZikge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGFnZUluZGV4KHJlZik7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0PHN0cmluZywgQXJyYXk8YW55Pj4+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZFxuICAgKiAgIHdpdGggYSBtYXBwaW5nIGZyb20gbmFtZWQgZGVzdGluYXRpb25zIHRvIHJlZmVyZW5jZXMuXG4gICAqXG4gICAqIFRoaXMgY2FuIGJlIHNsb3cgZm9yIGxhcmdlIGRvY3VtZW50cy4gVXNlIGBnZXREZXN0aW5hdGlvbmAgaW5zdGVhZC5cbiAgICovXG4gIGdldERlc3RpbmF0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldERlc3RpbmF0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBuYW1lZCBkZXN0aW5hdGlvbiB0byBnZXQuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5PGFueT4gfCBudWxsPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhbGxcbiAgICogICBpbmZvcm1hdGlvbiBvZiB0aGUgZ2l2ZW4gbmFtZWQgZGVzdGluYXRpb24sIG9yIGBudWxsYCB3aGVuIHRoZSBuYW1lZFxuICAgKiAgIGRlc3RpbmF0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldERlc3RpbmF0aW9uKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXREZXN0aW5hdGlvbihpZCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8QXJyYXk8c3RyaW5nPiB8IG51bGw+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoXG4gICAqICAgYW4ge0FycmF5fSBjb250YWluaW5nIHRoZSBwYWdlIGxhYmVscyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhlIHBhZ2VcbiAgICogICBpbmRleGVzLCBvciBgbnVsbGAgd2hlbiBubyBwYWdlIGxhYmVscyBhcmUgcHJlc2VudCBpbiB0aGUgUERGIGZpbGUuXG4gICAqL1xuICBnZXRQYWdlTGFiZWxzKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGFnZUxhYmVscygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYSB7c3RyaW5nfVxuICAgKiAgIGNvbnRhaW5pbmcgdGhlIHBhZ2UgbGF5b3V0IG5hbWUuXG4gICAqL1xuICBnZXRQYWdlTGF5b3V0KCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGFnZUxheW91dCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYSB7c3RyaW5nfVxuICAgKiAgIGNvbnRhaW5pbmcgdGhlIHBhZ2UgbW9kZSBuYW1lLlxuICAgKi9cbiAgZ2V0UGFnZU1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlTW9kZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdCB8IG51bGw+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGFuXG4gICAqICAge09iamVjdH0gY29udGFpbmluZyB0aGUgdmlld2VyIHByZWZlcmVuY2VzLCBvciBgbnVsbGAgd2hlbiBubyB2aWV3ZXJcbiAgICogICBwcmVmZXJlbmNlcyBhcmUgcHJlc2VudCBpbiB0aGUgUERGIGZpbGUuXG4gICAqL1xuICBnZXRWaWV3ZXJQcmVmZXJlbmNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldFZpZXdlclByZWZlcmVuY2VzKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55IHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYW4ge0FycmF5fVxuICAgKiAgIGNvbnRhaW5pbmcgdGhlIGRlc3RpbmF0aW9uLCBvciBgbnVsbGAgd2hlbiBubyBvcGVuIGFjdGlvbiBpcyBwcmVzZW50XG4gICAqICAgaW4gdGhlIFBERi5cbiAgICovXG4gIGdldE9wZW5BY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRPcGVuQWN0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhIGxvb2t1cCB0YWJsZVxuICAgKiAgIGZvciBtYXBwaW5nIG5hbWVkIGF0dGFjaG1lbnRzIHRvIHRoZWlyIGNvbnRlbnQuXG4gICAqL1xuICBnZXRBdHRhY2htZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldEF0dGFjaG1lbnRzKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0IHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGhcbiAgICogICBhbiB7T2JqZWN0fSB3aXRoIHRoZSBKYXZhU2NyaXB0IGFjdGlvbnM6XG4gICAqICAgICAtIGZyb20gdGhlIG5hbWUgdHJlZS5cbiAgICogICAgIC0gZnJvbSBBIG9yIEFBIGVudHJpZXMgaW4gdGhlIGNhdGFsb2cgZGljdGlvbmFyeS5cbiAgICogICAsIG9yIGBudWxsYCBpZiBubyBKYXZhU2NyaXB0IGV4aXN0cy5cbiAgICovXG4gIGdldEpTQWN0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldERvY0pTQWN0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtPYmplY3R9IE91dGxpbmVOb2RlXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0aXRsZVxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IGJvbGRcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBpdGFsaWNcbiAgICogQHByb3BlcnR5IHtVaW50OENsYW1wZWRBcnJheX0gY29sb3IgLSBUaGUgY29sb3IgaW4gUkdCIGZvcm1hdCB0byB1c2UgZm9yXG4gICAqICAgZGlzcGxheSBwdXJwb3Nlcy5cbiAgICogQHByb3BlcnR5IHtzdHJpbmcgfCBBcnJheTxhbnk+IHwgbnVsbH0gZGVzdFxuICAgKiBAcHJvcGVydHkge3N0cmluZyB8IG51bGx9IHVybFxuICAgKiBAcHJvcGVydHkge3N0cmluZyB8IHVuZGVmaW5lZH0gdW5zYWZlVXJsXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbiB8IHVuZGVmaW5lZH0gbmV3V2luZG93XG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyIHwgdW5kZWZpbmVkfSBjb3VudFxuICAgKiBAcHJvcGVydHkge0FycmF5PE91dGxpbmVOb2RlPn0gaXRlbXNcbiAgICovXG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5PE91dGxpbmVOb2RlPj59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYW5cbiAgICogICB7QXJyYXl9IHRoYXQgaXMgYSB0cmVlIG91dGxpbmUgKGlmIGl0IGhhcyBvbmUpIG9mIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldE91dGxpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRPdXRsaW5lKCk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gR2V0T3B0aW9uYWxDb250ZW50Q29uZmlnUGFyYW1ldGVyc1xuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2ludGVudF0gLSBEZXRlcm1pbmVzIHRoZSBvcHRpb25hbCBjb250ZW50IGdyb3VwcyB0aGF0XG4gICAqICAgYXJlIHZpc2libGUgYnkgZGVmYXVsdDsgdmFsaWQgdmFsdWVzIGFyZTpcbiAgICogICAgLSAnZGlzcGxheScgKHZpZXdhYmxlIGdyb3VwcykuXG4gICAqICAgIC0gJ3ByaW50JyAocHJpbnRhYmxlIGdyb3VwcykuXG4gICAqICAgIC0gJ2FueScgKGFsbCBncm91cHMpLlxuICAgKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzICdkaXNwbGF5Jy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7R2V0T3B0aW9uYWxDb250ZW50Q29uZmlnUGFyYW1ldGVyc30gW3BhcmFtc10gLSBPcHRpb25hbCBjb250ZW50XG4gICAqICAgY29uZmlnIHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9wdGlvbmFsQ29udGVudENvbmZpZz59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGhcbiAgICogICBhbiB7QGxpbmsgT3B0aW9uYWxDb250ZW50Q29uZmlnfSB0aGF0IGNvbnRhaW5zIGFsbCB0aGUgb3B0aW9uYWwgY29udGVudFxuICAgKiAgIGdyb3VwcyAoYXNzdW1pbmcgdGhhdCB0aGUgZG9jdW1lbnQgaGFzIGFueSkuXG4gICAqL1xuICBnZXRPcHRpb25hbENvbnRlbnRDb25maWcoeyBpbnRlbnQgPSBcImRpc3BsYXlcIiB9ID0ge30pIHtcbiAgICBjb25zdCB7IHJlbmRlcmluZ0ludGVudCB9ID0gdGhpcy5fdHJhbnNwb3J0LmdldFJlbmRlcmluZ0ludGVudChpbnRlbnQpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRPcHRpb25hbENvbnRlbnRDb25maWcocmVuZGVyaW5nSW50ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheTxudW1iZXI+IHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGhcbiAgICogICBhbiB7QXJyYXl9IHRoYXQgY29udGFpbnMgdGhlIHBlcm1pc3Npb24gZmxhZ3MgZm9yIHRoZSBQREYgZG9jdW1lbnQsIG9yXG4gICAqICAgYG51bGxgIHdoZW4gbm8gcGVybWlzc2lvbnMgYXJlIHByZXNlbnQgaW4gdGhlIFBERiBmaWxlLlxuICAgKi9cbiAgZ2V0UGVybWlzc2lvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQZXJtaXNzaW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHsgaW5mbzogT2JqZWN0LCBtZXRhZGF0YTogTWV0YWRhdGEgfT59IEEgcHJvbWlzZSB0aGF0IGlzXG4gICAqICAgcmVzb2x2ZWQgd2l0aCBhbiB7T2JqZWN0fSB0aGF0IGhhcyBgaW5mb2AgYW5kIGBtZXRhZGF0YWAgcHJvcGVydGllcy5cbiAgICogICBgaW5mb2AgaXMgYW4ge09iamVjdH0gZmlsbGVkIHdpdGggYW55dGhpbmcgYXZhaWxhYmxlIGluIHRoZSBpbmZvcm1hdGlvblxuICAgKiAgIGRpY3Rpb25hcnkgYW5kIHNpbWlsYXJseSBgbWV0YWRhdGFgIGlzIGEge01ldGFkYXRhfSBvYmplY3Qgd2l0aFxuICAgKiAgIGluZm9ybWF0aW9uIGZyb20gdGhlIG1ldGFkYXRhIHNlY3Rpb24gb2YgdGhlIFBERi5cbiAgICovXG4gIGdldE1ldGFkYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0TWV0YWRhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXJrSW5mb1xuICAgKiBQcm9wZXJ0aWVzIGNvcnJlc3BvbmQgdG8gVGFibGUgMzIxIG9mIHRoZSBQREYgMzIwMDAtMToyMDA4IHNwZWMuXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gTWFya2VkXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gVXNlclByb3BlcnRpZXNcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBTdXNwZWN0c1xuICAgKi9cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8TWFya0luZm8gfCBudWxsPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aFxuICAgKiAgIGEge01hcmtJbmZvfSBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgTWFya0luZm8gZmxhZ3MgZm9yIHRoZSBQREZcbiAgICogICBkb2N1bWVudCwgb3IgYG51bGxgIHdoZW4gbm8gTWFya0luZm8gdmFsdWVzIGFyZSBwcmVzZW50IGluIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldE1hcmtJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0TWFya0luZm8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxVaW50OEFycmF5Pn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhXG4gICAqICAge1VpbnQ4QXJyYXl9IGNvbnRhaW5pbmcgdGhlIHJhdyBkYXRhIG9mIHRoZSBQREYgZG9jdW1lbnQuXG4gICAqL1xuICBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFVpbnQ4QXJyYXk+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGFcbiAgICogICB7VWludDhBcnJheX0gY29udGFpbmluZyB0aGUgZnVsbCBkYXRhIG9mIHRoZSBzYXZlZCBkb2N1bWVudC5cbiAgICovXG4gIHNhdmVEb2N1bWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LnNhdmVEb2N1bWVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHsgbGVuZ3RoOiBudW1iZXIgfT59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlXG4gICAqICAgZG9jdW1lbnQncyBkYXRhIGlzIGxvYWRlZC4gSXQgaXMgcmVzb2x2ZWQgd2l0aCBhbiB7T2JqZWN0fSB0aGF0IGNvbnRhaW5zXG4gICAqICAgdGhlIGBsZW5ndGhgIHByb3BlcnR5IHRoYXQgaW5kaWNhdGVzIHNpemUgb2YgdGhlIFBERiBkYXRhIGluIGJ5dGVzLlxuICAgKi9cbiAgZ2V0RG93bmxvYWRJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZG93bmxvYWRJbmZvQ2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IHRoZSBkb2N1bWVudCBvbiBib3RoIHRoZSBtYWluIGFuZCB3b3JrZXJcbiAgICogdGhyZWFkcy5cbiAgICpcbiAgICogTk9URTogRG8gbm90LCB1bmRlciBhbnkgY2lyY3Vtc3RhbmNlcywgY2FsbCB0aGlzIG1ldGhvZCB3aGVuIHJlbmRlcmluZyBpc1xuICAgKiBjdXJyZW50bHkgb25nb2luZyBzaW5jZSB0aGF0IG1heSBsZWFkIHRvIHJlbmRlcmluZyBlcnJvcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2tlZXBMb2FkZWRGb250c10gLSBMZXQgZm9udHMgcmVtYWluIGF0dGFjaGVkIHRvIHRoZSBET00uXG4gICAqICAgTk9URTogVGhpcyB3aWxsIGluY3JlYXNlIHBlcnNpc3RlbnQgbWVtb3J5IHVzYWdlLCBoZW5jZSBkb24ndCB1c2UgdGhpc1xuICAgKiAgIG9wdGlvbiB1bmxlc3MgYWJzb2x1dGVseSBuZWNlc3NhcnkuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGNsZWFuLXVwIGhhcyBmaW5pc2hlZC5cbiAgICovXG4gIGNsZWFudXAoa2VlcExvYWRlZEZvbnRzID0gZmFsc2UpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LnN0YXJ0Q2xlYW51cChrZWVwTG9hZGVkRm9udHMgfHwgdGhpcy5pc1B1cmVYZmEpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSBjdXJyZW50IGRvY3VtZW50IGluc3RhbmNlIGFuZCB0ZXJtaW5hdGVzIHRoZSB3b3JrZXIuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHJldHVybiB0aGlzLmxvYWRpbmdUYXNrLmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1JlZlByb3h5fSByZWYgLSBUaGUgcGFnZSByZWZlcmVuY2UuXG4gICAqIEByZXR1cm5zIHtudW1iZXIgfCBudWxsfSBUaGUgcGFnZSBudW1iZXIsIGlmIGl0J3MgY2FjaGVkLlxuICAgKi9cbiAgY2FjaGVkUGFnZU51bWJlcihyZWYpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmNhY2hlZFBhZ2VOdW1iZXIocmVmKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7RG9jdW1lbnRJbml0UGFyYW1ldGVyc30gQSBzdWJzZXQgb2YgdGhlIGN1cnJlbnRcbiAgICogICB7RG9jdW1lbnRJbml0UGFyYW1ldGVyc30sIHdoaWNoIGFyZSBuZWVkZWQgaW4gdGhlIHZpZXdlci5cbiAgICovXG4gIGdldCBsb2FkaW5nUGFyYW1zKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQubG9hZGluZ1BhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7UERGRG9jdW1lbnRMb2FkaW5nVGFza30gVGhlIGxvYWRpbmdUYXNrIGZvciB0aGUgY3VycmVudCBkb2N1bWVudC5cbiAgICovXG4gIGdldCBsb2FkaW5nVGFzaygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmxvYWRpbmdUYXNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdDxzdHJpbmcsIEFycmF5PE9iamVjdD4+IHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzXG4gICAqICAgcmVzb2x2ZWQgd2l0aCBhbiB7T2JqZWN0fSBjb250YWluaW5nIC9BY3JvRm9ybSBmaWVsZCBkYXRhIGZvciB0aGUgSlNcbiAgICogICBzYW5kYm94LCBvciBgbnVsbGAgd2hlbiBubyBmaWVsZCBkYXRhIGlzIHByZXNlbnQgaW4gdGhlIFBERiBmaWxlLlxuICAgKi9cbiAgZ2V0RmllbGRPYmplY3RzKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RmllbGRPYmplY3RzKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYHRydWVgXG4gICAqICAgaWYgc29tZSAvQWNyb0Zvcm0gZmllbGRzIGhhdmUgSmF2YVNjcmlwdCBhY3Rpb25zLlxuICAgKi9cbiAgaGFzSlNBY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuaGFzSlNBY3Rpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8QXJyYXk8c3RyaW5nPiB8IG51bGw+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGFuXG4gICAqICAge0FycmF5PHN0cmluZz59IGNvbnRhaW5pbmcgSURzIG9mIGFubm90YXRpb25zIHRoYXQgaGF2ZSBhIGNhbGN1bGF0aW9uXG4gICAqICAgYWN0aW9uLCBvciBgbnVsbGAgd2hlbiBubyBzdWNoIGFubm90YXRpb25zIGFyZSBwcmVzZW50IGluIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldENhbGN1bGF0aW9uT3JkZXJJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRDYWxjdWxhdGlvbk9yZGVySWRzKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYWdlIGdldFZpZXdwb3J0IHBhcmFtZXRlcnMuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gR2V0Vmlld3BvcnRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge251bWJlcn0gc2NhbGUgLSBUaGUgZGVzaXJlZCBzY2FsZSBvZiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSAtIFRoZSBkZXNpcmVkIHJvdGF0aW9uLCBpbiBkZWdyZWVzLCBvZlxuICogICB0aGUgdmlld3BvcnQuIElmIG9taXR0ZWQgaXQgZGVmYXVsdHMgdG8gdGhlIHBhZ2Ugcm90YXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29mZnNldFhdIC0gVGhlIGhvcml6b250YWwsIGkuZS4geC1heGlzLCBvZmZzZXQuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGAwYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0WV0gLSBUaGUgdmVydGljYWwsIGkuZS4geS1heGlzLCBvZmZzZXQuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGAwYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RvbnRGbGlwXSAtIElmIHRydWUsIHRoZSB5LWF4aXMgd2lsbCBub3QgYmVcbiAqICAgZmxpcHBlZC4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAqL1xuXG4vKipcbiAqIFBhZ2UgZ2V0VGV4dENvbnRlbnQgcGFyYW1ldGVycy5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBnZXRUZXh0Q29udGVudFBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2luY2x1ZGVNYXJrZWRDb250ZW50XSAtIFdoZW4gdHJ1ZSBpbmNsdWRlIG1hcmtlZFxuICogICBjb250ZW50IGl0ZW1zIGluIHRoZSBpdGVtcyBhcnJheSBvZiBUZXh0Q29udGVudC4gVGhlIGRlZmF1bHQgaXMgYGZhbHNlYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVOb3JtYWxpemF0aW9uXSAtIFdoZW4gdHJ1ZSB0aGUgdGV4dCBpcyAqbm90KlxuICogICBub3JtYWxpemVkIGluIHRoZSB3b3JrZXItdGhyZWFkLiBUaGUgZGVmYXVsdCBpcyBgZmFsc2VgLlxuICovXG5cbi8qKlxuICogUGFnZSB0ZXh0IGNvbnRlbnQuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dENvbnRlbnRcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8VGV4dEl0ZW0gfCBUZXh0TWFya2VkQ29udGVudD59IGl0ZW1zIC0gQXJyYXkgb2ZcbiAqICAge0BsaW5rIFRleHRJdGVtfSBhbmQge0BsaW5rIFRleHRNYXJrZWRDb250ZW50fSBvYmplY3RzLiBUZXh0TWFya2VkQ29udGVudFxuICogICBpdGVtcyBhcmUgaW5jbHVkZWQgd2hlbiBpbmNsdWRlTWFya2VkQ29udGVudCBpcyB0cnVlLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCBUZXh0U3R5bGU+fSBzdHlsZXMgLSB7QGxpbmsgVGV4dFN0eWxlfSBvYmplY3RzLFxuICogICBpbmRleGVkIGJ5IGZvbnQgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nIHwgbnVsbH0gbGFuZyAtIFRoZSBkb2N1bWVudCAvTGFuZyBhdHRyaWJ1dGUuXG4gKi9cblxuLyoqXG4gKiBQYWdlIHRleHQgY29udGVudCBwYXJ0LlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHRJdGVtXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc3RyIC0gVGV4dCBjb250ZW50LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGRpciAtIFRleHQgZGlyZWN0aW9uOiAndHRiJywgJ2x0cicgb3IgJ3J0bCcuXG4gKiBAcHJvcGVydHkge0FycmF5PGFueT59IHRyYW5zZm9ybSAtIFRyYW5zZm9ybWF0aW9uIG1hdHJpeC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWR0aCAtIFdpZHRoIGluIGRldmljZSBzcGFjZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHQgLSBIZWlnaHQgaW4gZGV2aWNlIHNwYWNlLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZvbnROYW1lIC0gRm9udCBuYW1lIHVzZWQgYnkgUERGLmpzIGZvciBjb252ZXJ0ZWQgZm9udC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaGFzRU9MIC0gSW5kaWNhdGluZyBpZiB0aGUgdGV4dCBjb250ZW50IGlzIGZvbGxvd2VkIGJ5IGFcbiAqICAgbGluZS1icmVhay5cbiAqL1xuXG4vKipcbiAqIFBhZ2UgdGV4dCBtYXJrZWQgY29udGVudCBwYXJ0LlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHRNYXJrZWRDb250ZW50XG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSAtIEVpdGhlciAnYmVnaW5NYXJrZWRDb250ZW50JyxcbiAqICAgJ2JlZ2luTWFya2VkQ29udGVudFByb3BzJywgb3IgJ2VuZE1hcmtlZENvbnRlbnQnLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGlkIC0gVGhlIG1hcmtlZCBjb250ZW50IGlkZW50aWZpZXIuIE9ubHkgdXNlZCBmb3IgdHlwZVxuICogICAnYmVnaW5NYXJrZWRDb250ZW50UHJvcHMnLlxuICovXG5cbi8qKlxuICogVGV4dCBzdHlsZS5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0U3R5bGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBhc2NlbnQgLSBGb250IGFzY2VudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkZXNjZW50IC0gRm9udCBkZXNjZW50LlxuICogQHByb3BlcnR5IHtib29sZWFufSB2ZXJ0aWNhbCAtIFdoZXRoZXIgb3Igbm90IHRoZSB0ZXh0IGlzIGluIHZlcnRpY2FsIG1vZGUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZm9udEZhbWlseSAtIFRoZSBwb3NzaWJsZSBmb250IGZhbWlseS5cbiAqL1xuXG4vKipcbiAqIFBhZ2UgYW5ub3RhdGlvbiBwYXJhbWV0ZXJzLlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEdldEFubm90YXRpb25zUGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtpbnRlbnRdIC0gRGV0ZXJtaW5lcyB0aGUgYW5ub3RhdGlvbnMgdGhhdCBhcmUgZmV0Y2hlZCxcbiAqICAgY2FuIGJlICdkaXNwbGF5JyAodmlld2FibGUgYW5ub3RhdGlvbnMpLCAncHJpbnQnIChwcmludGFibGUgYW5ub3RhdGlvbnMpLFxuICogICBvciAnYW55JyAoYWxsIGFubm90YXRpb25zKS4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgJ2Rpc3BsYXknLlxuICovXG5cbi8qKlxuICogUGFnZSByZW5kZXIgcGFyYW1ldGVycy5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBSZW5kZXJQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY2FudmFzQ29udGV4dCAtIEEgMkQgY29udGV4dCBvZiBhIERPTVxuICogICBDYW52YXMgb2JqZWN0LlxuICogQHByb3BlcnR5IHtQYWdlVmlld3BvcnR9IHZpZXdwb3J0IC0gUmVuZGVyaW5nIHZpZXdwb3J0IG9idGFpbmVkIGJ5IGNhbGxpbmdcbiAqICAgdGhlIGBQREZQYWdlUHJveHkuZ2V0Vmlld3BvcnRgIG1ldGhvZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbaW50ZW50XSAtIFJlbmRlcmluZyBpbnRlbnQsIGNhbiBiZSAnZGlzcGxheScsICdwcmludCcsXG4gKiAgIG9yICdhbnknLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyAnZGlzcGxheScuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2Fubm90YXRpb25Nb2RlXSBDb250cm9scyB3aGljaCBhbm5vdGF0aW9ucyBhcmUgcmVuZGVyZWRcbiAqICAgb250byB0aGUgY2FudmFzLCBmb3IgYW5ub3RhdGlvbnMgd2l0aCBhcHBlYXJhbmNlLWRhdGE7IHRoZSB2YWx1ZXMgZnJvbVxuICogICB7QGxpbmsgQW5ub3RhdGlvbk1vZGV9IHNob3VsZCBiZSB1c2VkLiBUaGUgZm9sbG93aW5nIHZhbHVlcyBhcmUgc3VwcG9ydGVkOlxuICogICAgLSBgQW5ub3RhdGlvbk1vZGUuRElTQUJMRWAsIHdoaWNoIGRpc2FibGVzIGFsbCBhbm5vdGF0aW9ucy5cbiAqICAgIC0gYEFubm90YXRpb25Nb2RlLkVOQUJMRWAsIHdoaWNoIGluY2x1ZGVzIGFsbCBwb3NzaWJsZSBhbm5vdGF0aW9ucyAodGh1c1xuICogICAgICBpdCBhbHNvIGRlcGVuZHMgb24gdGhlIGBpbnRlbnRgLW9wdGlvbiwgc2VlIGFib3ZlKS5cbiAqICAgIC0gYEFubm90YXRpb25Nb2RlLkVOQUJMRV9GT1JNU2AsIHdoaWNoIGV4Y2x1ZGVzIGFubm90YXRpb25zIHRoYXQgY29udGFpblxuICogICAgICBpbnRlcmFjdGl2ZSBmb3JtIGVsZW1lbnRzICh0aG9zZSB3aWxsIGJlIHJlbmRlcmVkIGluIHRoZSBkaXNwbGF5IGxheWVyKS5cbiAqICAgIC0gYEFubm90YXRpb25Nb2RlLkVOQUJMRV9TVE9SQUdFYCwgd2hpY2ggaW5jbHVkZXMgYWxsIHBvc3NpYmxlIGFubm90YXRpb25zXG4gKiAgICAgIChhcyBhYm92ZSkgYnV0IHdoZXJlIGludGVyYWN0aXZlIGZvcm0gZWxlbWVudHMgYXJlIHVwZGF0ZWQgd2l0aCBkYXRhXG4gKiAgICAgIGZyb20gdGhlIHtAbGluayBBbm5vdGF0aW9uU3RvcmFnZX0taW5zdGFuY2U7IHVzZWZ1bCBlLmcuIGZvciBwcmludGluZy5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYEFubm90YXRpb25Nb2RlLkVOQUJMRWAuXG4gKiBAcHJvcGVydHkge0FycmF5PGFueT59IFt0cmFuc2Zvcm1dIC0gQWRkaXRpb25hbCB0cmFuc2Zvcm0sIGFwcGxpZWQganVzdFxuICogICBiZWZvcmUgdmlld3BvcnQgdHJhbnNmb3JtLlxuICogQHByb3BlcnR5IHtDYW52YXNHcmFkaWVudCB8IENhbnZhc1BhdHRlcm4gfCBzdHJpbmd9IFtiYWNrZ3JvdW5kXSAtIEJhY2tncm91bmRcbiAqICAgdG8gdXNlIGZvciB0aGUgY2FudmFzLlxuICogICBBbnkgdmFsaWQgYGNhbnZhcy5maWxsU3R5bGVgIGNhbiBiZSB1c2VkOiBhIGBET01TdHJpbmdgIHBhcnNlZCBhcyBDU1NcbiAqICAgPGNvbG9yPiB2YWx1ZSwgYSBgQ2FudmFzR3JhZGllbnRgIG9iamVjdCAoYSBsaW5lYXIgb3IgcmFkaWFsIGdyYWRpZW50KSBvclxuICogICBhIGBDYW52YXNQYXR0ZXJuYCBvYmplY3QgKGEgcmVwZXRpdGl2ZSBpbWFnZSkuIFRoZSBkZWZhdWx0IHZhbHVlIGlzXG4gKiAgICdyZ2IoMjU1LDI1NSwyNTUpJy5cbiAqXG4gKiAgIE5PVEU6IFRoaXMgb3B0aW9uIG1heSBiZSBwYXJ0aWFsbHksIG9yIGNvbXBsZXRlbHksIGlnbm9yZWQgd2hlbiB0aGVcbiAqICAgYHBhZ2VDb2xvcnNgLW9wdGlvbiBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtwYWdlQ29sb3JzXSAtIE92ZXJ3cml0ZXMgYmFja2dyb3VuZCBhbmQgZm9yZWdyb3VuZCBjb2xvcnNcbiAqICAgd2l0aCB1c2VyIGRlZmluZWQgb25lcyBpbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5IGluIGhpZ2ggY29udHJhc3RcbiAqICAgbW9kZS5cbiAqIEBwcm9wZXJ0eSB7UHJvbWlzZTxPcHRpb25hbENvbnRlbnRDb25maWc+fSBbb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZV0gLVxuICogICBBIHByb21pc2UgdGhhdCBzaG91bGQgcmVzb2x2ZSB3aXRoIGFuIHtAbGluayBPcHRpb25hbENvbnRlbnRDb25maWd9XG4gKiAgIGNyZWF0ZWQgZnJvbSBgUERGRG9jdW1lbnRQcm94eS5nZXRPcHRpb25hbENvbnRlbnRDb25maWdgLiBJZiBgbnVsbGAsXG4gKiAgIHRoZSBjb25maWd1cmF0aW9uIHdpbGwgYmUgZmV0Y2hlZCBhdXRvbWF0aWNhbGx5IHdpdGggdGhlIGRlZmF1bHQgdmlzaWJpbGl0eVxuICogICBzdGF0ZXMgc2V0LlxuICogQHByb3BlcnR5IHtNYXA8c3RyaW5nLCBIVE1MQ2FudmFzRWxlbWVudD59IFthbm5vdGF0aW9uQ2FudmFzTWFwXSAtIE1hcCBzb21lXG4gKiAgIGFubm90YXRpb24gaWRzIHdpdGggY2FudmFzZXMgdXNlZCB0byByZW5kZXIgdGhlbS5cbiAqIEBwcm9wZXJ0eSB7UHJpbnRBbm5vdGF0aW9uU3RvcmFnZX0gW3ByaW50QW5ub3RhdGlvblN0b3JhZ2VdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpc0VkaXRpbmddIC0gUmVuZGVyIHRoZSBwYWdlIGluIGVkaXRpbmcgbW9kZS5cbiAqL1xuXG4vKipcbiAqIFBhZ2UgZ2V0T3BlcmF0b3JMaXN0IHBhcmFtZXRlcnMuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gR2V0T3BlcmF0b3JMaXN0UGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtpbnRlbnRdIC0gUmVuZGVyaW5nIGludGVudCwgY2FuIGJlICdkaXNwbGF5JywgJ3ByaW50JyxcbiAqICAgb3IgJ2FueScuIFRoZSBkZWZhdWx0IHZhbHVlIGlzICdkaXNwbGF5Jy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbYW5ub3RhdGlvbk1vZGVdIENvbnRyb2xzIHdoaWNoIGFubm90YXRpb25zIGFyZSBpbmNsdWRlZFxuICogICBpbiB0aGUgb3BlcmF0b3JMaXN0LCBmb3IgYW5ub3RhdGlvbnMgd2l0aCBhcHBlYXJhbmNlLWRhdGE7IHRoZSB2YWx1ZXMgZnJvbVxuICogICB7QGxpbmsgQW5ub3RhdGlvbk1vZGV9IHNob3VsZCBiZSB1c2VkLiBUaGUgZm9sbG93aW5nIHZhbHVlcyBhcmUgc3VwcG9ydGVkOlxuICogICAgLSBgQW5ub3RhdGlvbk1vZGUuRElTQUJMRWAsIHdoaWNoIGRpc2FibGVzIGFsbCBhbm5vdGF0aW9ucy5cbiAqICAgIC0gYEFubm90YXRpb25Nb2RlLkVOQUJMRWAsIHdoaWNoIGluY2x1ZGVzIGFsbCBwb3NzaWJsZSBhbm5vdGF0aW9ucyAodGh1c1xuICogICAgICBpdCBhbHNvIGRlcGVuZHMgb24gdGhlIGBpbnRlbnRgLW9wdGlvbiwgc2VlIGFib3ZlKS5cbiAqICAgIC0gYEFubm90YXRpb25Nb2RlLkVOQUJMRV9GT1JNU2AsIHdoaWNoIGV4Y2x1ZGVzIGFubm90YXRpb25zIHRoYXQgY29udGFpblxuICogICAgICBpbnRlcmFjdGl2ZSBmb3JtIGVsZW1lbnRzICh0aG9zZSB3aWxsIGJlIHJlbmRlcmVkIGluIHRoZSBkaXNwbGF5IGxheWVyKS5cbiAqICAgIC0gYEFubm90YXRpb25Nb2RlLkVOQUJMRV9TVE9SQUdFYCwgd2hpY2ggaW5jbHVkZXMgYWxsIHBvc3NpYmxlIGFubm90YXRpb25zXG4gKiAgICAgIChhcyBhYm92ZSkgYnV0IHdoZXJlIGludGVyYWN0aXZlIGZvcm0gZWxlbWVudHMgYXJlIHVwZGF0ZWQgd2l0aCBkYXRhXG4gKiAgICAgIGZyb20gdGhlIHtAbGluayBBbm5vdGF0aW9uU3RvcmFnZX0taW5zdGFuY2U7IHVzZWZ1bCBlLmcuIGZvciBwcmludGluZy5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYEFubm90YXRpb25Nb2RlLkVOQUJMRWAuXG4gKiBAcHJvcGVydHkge1ByaW50QW5ub3RhdGlvblN0b3JhZ2V9IFtwcmludEFubm90YXRpb25TdG9yYWdlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbaXNFZGl0aW5nXSAtIFJlbmRlciB0aGUgcGFnZSBpbiBlZGl0aW5nIG1vZGUuXG4gKi9cblxuLyoqXG4gKiBTdHJ1Y3R1cmUgdHJlZSBub2RlLiBUaGUgcm9vdCBub2RlIHdpbGwgaGF2ZSBhIHJvbGUgXCJSb290XCIuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RydWN0VHJlZU5vZGVcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8U3RydWN0VHJlZU5vZGUgfCBTdHJ1Y3RUcmVlQ29udGVudD59IGNoaWxkcmVuIC0gQXJyYXkgb2ZcbiAqICAge0BsaW5rIFN0cnVjdFRyZWVOb2RlfSBhbmQge0BsaW5rIFN0cnVjdFRyZWVDb250ZW50fSBvYmplY3RzLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHJvbGUgLSBlbGVtZW50J3Mgcm9sZSwgYWxyZWFkeSBtYXBwZWQgaWYgYSByb2xlIG1hcCBleGlzdHNcbiAqIGluIHRoZSBQREYuXG4gKi9cblxuLyoqXG4gKiBTdHJ1Y3R1cmUgdHJlZSBjb250ZW50LlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0cnVjdFRyZWVDb250ZW50XG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSAtIGVpdGhlciBcImNvbnRlbnRcIiBmb3IgcGFnZSBhbmQgc3RyZWFtIHN0cnVjdHVyZVxuICogICBlbGVtZW50cyBvciBcIm9iamVjdFwiIGZvciBvYmplY3QgcmVmZXJlbmNlcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZCAtIHVuaXF1ZSBpZCB0aGF0IHdpbGwgbWFwIHRvIHRoZSB0ZXh0IGxheWVyLlxuICovXG5cbi8qKlxuICogUERGIHBhZ2Ugb3BlcmF0b3IgbGlzdC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQREZPcGVyYXRvckxpc3RcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gZm5BcnJheSAtIEFycmF5IGNvbnRhaW5pbmcgdGhlIG9wZXJhdG9yIGZ1bmN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8YW55Pn0gYXJnc0FycmF5IC0gQXJyYXkgY29udGFpbmluZyB0aGUgYXJndW1lbnRzIG9mIHRoZVxuICogICBmdW5jdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBQcm94eSB0byBhIGBQREZQYWdlYCBpbiB0aGUgd29ya2VyIHRocmVhZC5cbiAqL1xuY2xhc3MgUERGUGFnZVByb3h5IHtcbiAgI3BlbmRpbmdDbGVhbnVwID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocGFnZUluZGV4LCBwYWdlSW5mbywgdHJhbnNwb3J0LCBwZGZCdWcgPSBmYWxzZSkge1xuICAgIHRoaXMuX3BhZ2VJbmRleCA9IHBhZ2VJbmRleDtcbiAgICB0aGlzLl9wYWdlSW5mbyA9IHBhZ2VJbmZvO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgICB0aGlzLl9zdGF0cyA9IHBkZkJ1ZyA/IG5ldyBTdGF0VGltZXIoKSA6IG51bGw7XG4gICAgdGhpcy5fcGRmQnVnID0gcGRmQnVnO1xuICAgIC8qKiBAdHlwZSB7UERGT2JqZWN0c30gKi9cbiAgICB0aGlzLmNvbW1vbk9ianMgPSB0cmFuc3BvcnQuY29tbW9uT2JqcztcbiAgICB0aGlzLm9ianMgPSBuZXcgUERGT2JqZWN0cygpO1xuXG4gICAgdGhpcy5faW50ZW50U3RhdGVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn0gUGFnZSBudW1iZXIgb2YgdGhlIHBhZ2UuIEZpcnN0IHBhZ2UgaXMgMS5cbiAgICovXG4gIGdldCBwYWdlTnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLl9wYWdlSW5kZXggKyAxO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgZGVncmVlcyB0aGUgcGFnZSBpcyByb3RhdGVkIGNsb2Nrd2lzZS5cbiAgICovXG4gIGdldCByb3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnJvdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7UmVmUHJveHkgfCBudWxsfSBUaGUgcmVmZXJlbmNlIHRoYXQgcG9pbnRzIHRvIHRoaXMgcGFnZS5cbiAgICovXG4gIGdldCByZWYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnJlZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfSBUaGUgZGVmYXVsdCBzaXplIG9mIHVuaXRzIGluIDEvNzJuZHMgb2YgYW4gaW5jaC5cbiAgICovXG4gIGdldCB1c2VyVW5pdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFnZUluZm8udXNlclVuaXQ7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge0FycmF5PG51bWJlcj59IEFuIGFycmF5IG9mIHRoZSB2aXNpYmxlIHBvcnRpb24gb2YgdGhlIFBERiBwYWdlIGluXG4gICAqICAgdXNlciBzcGFjZSB1bml0cyBbeDEsIHkxLCB4MiwgeTJdLlxuICAgKi9cbiAgZ2V0IHZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnZpZXc7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtHZXRWaWV3cG9ydFBhcmFtZXRlcnN9IHBhcmFtcyAtIFZpZXdwb3J0IHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtQYWdlVmlld3BvcnR9IENvbnRhaW5zICd3aWR0aCcgYW5kICdoZWlnaHQnIHByb3BlcnRpZXNcbiAgICogICBhbG9uZyB3aXRoIHRyYW5zZm9ybXMgcmVxdWlyZWQgZm9yIHJlbmRlcmluZy5cbiAgICovXG4gIGdldFZpZXdwb3J0KHtcbiAgICBzY2FsZSxcbiAgICByb3RhdGlvbiA9IHRoaXMucm90YXRlLFxuICAgIG9mZnNldFggPSAwLFxuICAgIG9mZnNldFkgPSAwLFxuICAgIGRvbnRGbGlwID0gZmFsc2UsXG4gIH0gPSB7fSkge1xuICAgIHJldHVybiBuZXcgUGFnZVZpZXdwb3J0KHtcbiAgICAgIHZpZXdCb3g6IHRoaXMudmlldyxcbiAgICAgIHVzZXJVbml0OiB0aGlzLnVzZXJVbml0LFxuICAgICAgc2NhbGUsXG4gICAgICByb3RhdGlvbixcbiAgICAgIG9mZnNldFgsXG4gICAgICBvZmZzZXRZLFxuICAgICAgZG9udEZsaXAsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtHZXRBbm5vdGF0aW9uc1BhcmFtZXRlcnN9IFtwYXJhbXNdIC0gQW5ub3RhdGlvbiBwYXJhbWV0ZXJzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheTxhbnk+Pn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhblxuICAgKiAgIHtBcnJheX0gb2YgdGhlIGFubm90YXRpb24gb2JqZWN0cy5cbiAgICovXG4gIGdldEFubm90YXRpb25zKHsgaW50ZW50ID0gXCJkaXNwbGF5XCIgfSA9IHt9KSB7XG4gICAgY29uc3QgeyByZW5kZXJpbmdJbnRlbnQgfSA9IHRoaXMuX3RyYW5zcG9ydC5nZXRSZW5kZXJpbmdJbnRlbnQoaW50ZW50KTtcblxuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0QW5ub3RhdGlvbnModGhpcy5fcGFnZUluZGV4LCByZW5kZXJpbmdJbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYW5cbiAgICogICB7T2JqZWN0fSB3aXRoIEpTIGFjdGlvbnMuXG4gICAqL1xuICBnZXRKU0FjdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlSlNBY3Rpb25zKHRoaXMuX3BhZ2VJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge09iamVjdH0gVGhlIGZpbHRlciBmYWN0b3J5IGluc3RhbmNlLlxuICAgKi9cbiAgZ2V0IGZpbHRlckZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5maWx0ZXJGYWN0b3J5O1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufSBUcnVlIGlmIG9ubHkgWEZBIGZvcm0uXG4gICAqL1xuICBnZXQgaXNQdXJlWGZhKCkge1xuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJpc1B1cmVYZmFcIiwgISF0aGlzLl90cmFuc3BvcnQuX2h0bWxGb3JYZmEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdCB8IG51bGw+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoXG4gICAqICAgYW4ge09iamVjdH0gd2l0aCBhIGZha2UgRE9NIG9iamVjdCAoYSB0cmVlIHN0cnVjdHVyZSB3aGVyZSBlbGVtZW50c1xuICAgKiAgIGFyZSB7T2JqZWN0fSB3aXRoIGEgbmFtZSwgYXR0cmlidXRlcyAoY2xhc3MsIHN0eWxlLCAuLi4pLCB2YWx1ZSBhbmRcbiAgICogICBjaGlsZHJlbiwgdmVyeSBzaW1pbGFyIHRvIGEgSFRNTCBET00gdHJlZSksIG9yIGBudWxsYCBpZiBubyBYRkEgZXhpc3RzLlxuICAgKi9cbiAgYXN5bmMgZ2V0WGZhKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuX2h0bWxGb3JYZmE/LmNoaWxkcmVuW3RoaXMuX3BhZ2VJbmRleF0gfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCZWdpbnMgdGhlIHByb2Nlc3Mgb2YgcmVuZGVyaW5nIGEgcGFnZSB0byB0aGUgZGVzaXJlZCBjb250ZXh0LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlbmRlclBhcmFtZXRlcnN9IHBhcmFtcyAtIFBhZ2UgcmVuZGVyIHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtSZW5kZXJUYXNrfSBBbiBvYmplY3QgdGhhdCBjb250YWlucyBhIHByb21pc2UgdGhhdCBpc1xuICAgKiAgIHJlc29sdmVkIHdoZW4gdGhlIHBhZ2UgZmluaXNoZXMgcmVuZGVyaW5nLlxuICAgKi9cbiAgcmVuZGVyKHtcbiAgICBjYW52YXNDb250ZXh0LFxuICAgIHZpZXdwb3J0LFxuICAgIGludGVudCA9IFwiZGlzcGxheVwiLFxuICAgIGFubm90YXRpb25Nb2RlID0gQW5ub3RhdGlvbk1vZGUuRU5BQkxFLFxuICAgIHRyYW5zZm9ybSA9IG51bGwsXG4gICAgYmFja2dyb3VuZCA9IG51bGwsXG4gICAgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSA9IG51bGwsXG4gICAgYW5ub3RhdGlvbkNhbnZhc01hcCA9IG51bGwsXG4gICAgcGFnZUNvbG9ycyA9IG51bGwsXG4gICAgcHJpbnRBbm5vdGF0aW9uU3RvcmFnZSA9IG51bGwsXG4gICAgaXNFZGl0aW5nID0gZmFsc2UsXG4gIH0pIHtcbiAgICB0aGlzLl9zdGF0cz8udGltZShcIk92ZXJhbGxcIik7XG5cbiAgICBjb25zdCBpbnRlbnRBcmdzID0gdGhpcy5fdHJhbnNwb3J0LmdldFJlbmRlcmluZ0ludGVudChcbiAgICAgIGludGVudCxcbiAgICAgIGFubm90YXRpb25Nb2RlLFxuICAgICAgcHJpbnRBbm5vdGF0aW9uU3RvcmFnZSxcbiAgICAgIGlzRWRpdGluZ1xuICAgICk7XG4gICAgY29uc3QgeyByZW5kZXJpbmdJbnRlbnQsIGNhY2hlS2V5IH0gPSBpbnRlbnRBcmdzO1xuICAgIC8vIElmIHRoZXJlIHdhcyBhIHBlbmRpbmcgZGVzdHJveSwgY2FuY2VsIGl0IHNvIG5vIGNsZWFudXAgaGFwcGVucyBkdXJpbmdcbiAgICAvLyB0aGlzIGNhbGwgdG8gcmVuZGVyLlxuICAgIHRoaXMuI3BlbmRpbmdDbGVhbnVwID0gZmFsc2U7XG5cbiAgICBvcHRpb25hbENvbnRlbnRDb25maWdQcm9taXNlIHx8PVxuICAgICAgdGhpcy5fdHJhbnNwb3J0LmdldE9wdGlvbmFsQ29udGVudENvbmZpZyhyZW5kZXJpbmdJbnRlbnQpO1xuXG4gICAgbGV0IGludGVudFN0YXRlID0gdGhpcy5faW50ZW50U3RhdGVzLmdldChjYWNoZUtleSk7XG4gICAgaWYgKCFpbnRlbnRTdGF0ZSkge1xuICAgICAgaW50ZW50U3RhdGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgdGhpcy5faW50ZW50U3RhdGVzLnNldChjYWNoZUtleSwgaW50ZW50U3RhdGUpO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSB0aGF0IGEgcGVuZGluZyBgc3RyZWFtUmVhZGVyYCBjYW5jZWwgdGltZW91dCBpcyBhbHdheXMgYWJvcnRlZC5cbiAgICBpZiAoaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGludGVudFN0YXRlLnN0cmVhbVJlYWRlckNhbmNlbFRpbWVvdXQpO1xuICAgICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgaW50ZW50UHJpbnQgPSAhIShyZW5kZXJpbmdJbnRlbnQgJiBSZW5kZXJpbmdJbnRlbnRGbGFnLlBSSU5UKTtcblxuICAgIC8vIElmIHRoZXJlJ3Mgbm8gZGlzcGxheVJlYWR5Q2FwYWJpbGl0eSB5ZXQsIHRoZW4gdGhlIG9wZXJhdG9yTGlzdFxuICAgIC8vIHdhcyBuZXZlciByZXF1ZXN0ZWQgYmVmb3JlLiBNYWtlIHRoZSByZXF1ZXN0IGFuZCBjcmVhdGUgdGhlIHByb21pc2UuXG4gICAgaWYgKCFpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5KSB7XG4gICAgICBpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgICBpbnRlbnRTdGF0ZS5vcGVyYXRvckxpc3QgPSB7XG4gICAgICAgIGZuQXJyYXk6IFtdLFxuICAgICAgICBhcmdzQXJyYXk6IFtdLFxuICAgICAgICBsYXN0Q2h1bms6IGZhbHNlLFxuICAgICAgICBzZXBhcmF0ZUFubm90czogbnVsbCxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX3N0YXRzPy50aW1lKFwiUGFnZSBSZXF1ZXN0XCIpO1xuICAgICAgdGhpcy5fcHVtcE9wZXJhdG9yTGlzdChpbnRlbnRBcmdzKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wbGV0ZSA9IGVycm9yID0+IHtcbiAgICAgIGludGVudFN0YXRlLnJlbmRlclRhc2tzLmRlbGV0ZShpbnRlcm5hbFJlbmRlclRhc2spO1xuXG4gICAgICAvLyBBdHRlbXB0IHRvIHJlZHVjZSBtZW1vcnkgdXNhZ2UgZHVyaW5nICpwcmludGluZyosIGJ5IGFsd2F5cyBydW5uaW5nXG4gICAgICAvLyBjbGVhbnVwIGltbWVkaWF0ZWx5IG9uY2UgcmVuZGVyaW5nIGhhcyBmaW5pc2hlZC5cbiAgICAgIGlmIChpbnRlbnRQcmludCkge1xuICAgICAgICB0aGlzLiNwZW5kaW5nQ2xlYW51cCA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLiN0cnlDbGVhbnVwKCk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBpbnRlcm5hbFJlbmRlclRhc2suY2FwYWJpbGl0eS5yZWplY3QoZXJyb3IpO1xuXG4gICAgICAgIHRoaXMuX2Fib3J0T3BlcmF0b3JMaXN0KHtcbiAgICAgICAgICBpbnRlbnRTdGF0ZSxcbiAgICAgICAgICByZWFzb246IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvciksXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW50ZXJuYWxSZW5kZXJUYXNrLmNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fc3RhdHMpIHtcbiAgICAgICAgdGhpcy5fc3RhdHMudGltZUVuZChcIlJlbmRlcmluZ1wiKTtcbiAgICAgICAgdGhpcy5fc3RhdHMudGltZUVuZChcIk92ZXJhbGxcIik7XG5cbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuU3RhdHM/LmVuYWJsZWQpIHtcbiAgICAgICAgICBnbG9iYWxUaGlzLlN0YXRzLmFkZCh0aGlzLnBhZ2VOdW1iZXIsIHRoaXMuX3N0YXRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBpbnRlcm5hbFJlbmRlclRhc2sgPSBuZXcgSW50ZXJuYWxSZW5kZXJUYXNrKHtcbiAgICAgIGNhbGxiYWNrOiBjb21wbGV0ZSxcbiAgICAgIC8vIE9ubHkgaW5jbHVkZSB0aGUgcmVxdWlyZWQgcHJvcGVydGllcywgYW5kICpub3QqIHRoZSBlbnRpcmUgb2JqZWN0LlxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGNhbnZhc0NvbnRleHQsXG4gICAgICAgIHZpZXdwb3J0LFxuICAgICAgICB0cmFuc2Zvcm0sXG4gICAgICAgIGJhY2tncm91bmQsXG4gICAgICB9LFxuICAgICAgb2JqczogdGhpcy5vYmpzLFxuICAgICAgY29tbW9uT2JqczogdGhpcy5jb21tb25PYmpzLFxuICAgICAgYW5ub3RhdGlvbkNhbnZhc01hcCxcbiAgICAgIG9wZXJhdG9yTGlzdDogaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0LFxuICAgICAgcGFnZUluZGV4OiB0aGlzLl9wYWdlSW5kZXgsXG4gICAgICBjYW52YXNGYWN0b3J5OiB0aGlzLl90cmFuc3BvcnQuY2FudmFzRmFjdG9yeSxcbiAgICAgIGZpbHRlckZhY3Rvcnk6IHRoaXMuX3RyYW5zcG9ydC5maWx0ZXJGYWN0b3J5LFxuICAgICAgdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lOiAhaW50ZW50UHJpbnQsXG4gICAgICBwZGZCdWc6IHRoaXMuX3BkZkJ1ZyxcbiAgICAgIHBhZ2VDb2xvcnMsXG4gICAgfSk7XG5cbiAgICAoaW50ZW50U3RhdGUucmVuZGVyVGFza3MgfHw9IG5ldyBTZXQoKSkuYWRkKGludGVybmFsUmVuZGVyVGFzayk7XG4gICAgY29uc3QgcmVuZGVyVGFzayA9IGludGVybmFsUmVuZGVyVGFzay50YXNrO1xuXG4gICAgUHJvbWlzZS5hbGwoW1xuICAgICAgaW50ZW50U3RhdGUuZGlzcGxheVJlYWR5Q2FwYWJpbGl0eS5wcm9taXNlLFxuICAgICAgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSxcbiAgICBdKVxuICAgICAgLnRoZW4oKFt0cmFuc3BhcmVuY3ksIG9wdGlvbmFsQ29udGVudENvbmZpZ10pID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RhdHM/LnRpbWUoXCJSZW5kZXJpbmdcIik7XG5cbiAgICAgICAgaWYgKCEob3B0aW9uYWxDb250ZW50Q29uZmlnLnJlbmRlcmluZ0ludGVudCAmIHJlbmRlcmluZ0ludGVudCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcIk11c3QgdXNlIHRoZSBzYW1lIGBpbnRlbnRgLWFyZ3VtZW50IHdoZW4gY2FsbGluZyB0aGUgYFBERlBhZ2VQcm94eS5yZW5kZXJgIFwiICtcbiAgICAgICAgICAgICAgXCJhbmQgYFBERkRvY3VtZW50UHJveHkuZ2V0T3B0aW9uYWxDb250ZW50Q29uZmlnYCBtZXRob2RzLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpbnRlcm5hbFJlbmRlclRhc2suaW5pdGlhbGl6ZUdyYXBoaWNzKHtcbiAgICAgICAgICB0cmFuc3BhcmVuY3ksXG4gICAgICAgICAgb3B0aW9uYWxDb250ZW50Q29uZmlnLFxuICAgICAgICB9KTtcbiAgICAgICAgaW50ZXJuYWxSZW5kZXJUYXNrLm9wZXJhdG9yTGlzdENoYW5nZWQoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29tcGxldGUpO1xuXG4gICAgcmV0dXJuIHJlbmRlclRhc2s7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtHZXRPcGVyYXRvckxpc3RQYXJhbWV0ZXJzfSBwYXJhbXMgLSBQYWdlIGdldE9wZXJhdG9yTGlzdFxuICAgKiAgIHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFBERk9wZXJhdG9yTGlzdD59IEEgcHJvbWlzZSByZXNvbHZlZCB3aXRoIGFuXG4gICAqICAge0BsaW5rIFBERk9wZXJhdG9yTGlzdH0gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgcGFnZSdzIG9wZXJhdG9yIGxpc3QuXG4gICAqL1xuICBnZXRPcGVyYXRvckxpc3Qoe1xuICAgIGludGVudCA9IFwiZGlzcGxheVwiLFxuICAgIGFubm90YXRpb25Nb2RlID0gQW5ub3RhdGlvbk1vZGUuRU5BQkxFLFxuICAgIHByaW50QW5ub3RhdGlvblN0b3JhZ2UgPSBudWxsLFxuICAgIGlzRWRpdGluZyA9IGZhbHNlLFxuICB9ID0ge30pIHtcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmICFQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkOiBnZXRPcGVyYXRvckxpc3RcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZXJhdG9yTGlzdENoYW5nZWQoKSB7XG4gICAgICBpZiAoaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0Lmxhc3RDaHVuaykge1xuICAgICAgICBpbnRlbnRTdGF0ZS5vcExpc3RSZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKGludGVudFN0YXRlLm9wZXJhdG9yTGlzdCk7XG5cbiAgICAgICAgaW50ZW50U3RhdGUucmVuZGVyVGFza3MuZGVsZXRlKG9wTGlzdFRhc2spO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGludGVudEFyZ3MgPSB0aGlzLl90cmFuc3BvcnQuZ2V0UmVuZGVyaW5nSW50ZW50KFxuICAgICAgaW50ZW50LFxuICAgICAgYW5ub3RhdGlvbk1vZGUsXG4gICAgICBwcmludEFubm90YXRpb25TdG9yYWdlLFxuICAgICAgaXNFZGl0aW5nLFxuICAgICAgLyogaXNPcExpc3QgPSAqLyB0cnVlXG4gICAgKTtcbiAgICBsZXQgaW50ZW50U3RhdGUgPSB0aGlzLl9pbnRlbnRTdGF0ZXMuZ2V0KGludGVudEFyZ3MuY2FjaGVLZXkpO1xuICAgIGlmICghaW50ZW50U3RhdGUpIHtcbiAgICAgIGludGVudFN0YXRlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIHRoaXMuX2ludGVudFN0YXRlcy5zZXQoaW50ZW50QXJncy5jYWNoZUtleSwgaW50ZW50U3RhdGUpO1xuICAgIH1cbiAgICBsZXQgb3BMaXN0VGFzaztcblxuICAgIGlmICghaW50ZW50U3RhdGUub3BMaXN0UmVhZENhcGFiaWxpdHkpIHtcbiAgICAgIG9wTGlzdFRhc2sgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgb3BMaXN0VGFzay5vcGVyYXRvckxpc3RDaGFuZ2VkID0gb3BlcmF0b3JMaXN0Q2hhbmdlZDtcbiAgICAgIGludGVudFN0YXRlLm9wTGlzdFJlYWRDYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgICAoaW50ZW50U3RhdGUucmVuZGVyVGFza3MgfHw9IG5ldyBTZXQoKSkuYWRkKG9wTGlzdFRhc2spO1xuICAgICAgaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0ID0ge1xuICAgICAgICBmbkFycmF5OiBbXSxcbiAgICAgICAgYXJnc0FycmF5OiBbXSxcbiAgICAgICAgbGFzdENodW5rOiBmYWxzZSxcbiAgICAgICAgc2VwYXJhdGVBbm5vdHM6IG51bGwsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9zdGF0cz8udGltZShcIlBhZ2UgUmVxdWVzdFwiKTtcbiAgICAgIHRoaXMuX3B1bXBPcGVyYXRvckxpc3QoaW50ZW50QXJncyk7XG4gICAgfVxuICAgIHJldHVybiBpbnRlbnRTdGF0ZS5vcExpc3RSZWFkQ2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIE5PVEU6IEFsbCBvY2N1cnJlbmNlcyBvZiB3aGl0ZXNwYWNlIHdpbGwgYmUgcmVwbGFjZWQgYnlcbiAgICogc3RhbmRhcmQgc3BhY2VzICgweDIwKS5cbiAgICpcbiAgICogQHBhcmFtIHtnZXRUZXh0Q29udGVudFBhcmFtZXRlcnN9IHBhcmFtcyAtIGdldFRleHRDb250ZW50IHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtSZWFkYWJsZVN0cmVhbX0gU3RyZWFtIGZvciByZWFkaW5nIHRleHQgY29udGVudCBjaHVua3MuXG4gICAqL1xuICBzdHJlYW1UZXh0Q29udGVudCh7XG4gICAgaW5jbHVkZU1hcmtlZENvbnRlbnQgPSBmYWxzZSxcbiAgICBkaXNhYmxlTm9ybWFsaXphdGlvbiA9IGZhbHNlLFxuICB9ID0ge30pIHtcbiAgICBjb25zdCBURVhUX0NPTlRFTlRfQ0hVTktfU0laRSA9IDEwMDtcblxuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhTdHJlYW0oXG4gICAgICBcIkdldFRleHRDb250ZW50XCIsXG4gICAgICB7XG4gICAgICAgIHBhZ2VJbmRleDogdGhpcy5fcGFnZUluZGV4LFxuICAgICAgICBpbmNsdWRlTWFya2VkQ29udGVudDogaW5jbHVkZU1hcmtlZENvbnRlbnQgPT09IHRydWUsXG4gICAgICAgIGRpc2FibGVOb3JtYWxpemF0aW9uOiBkaXNhYmxlTm9ybWFsaXphdGlvbiA9PT0gdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGhpZ2hXYXRlck1hcms6IFRFWFRfQ09OVEVOVF9DSFVOS19TSVpFLFxuICAgICAgICBzaXplKHRleHRDb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHRleHRDb250ZW50Lml0ZW1zLmxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE5PVEU6IEFsbCBvY2N1cnJlbmNlcyBvZiB3aGl0ZXNwYWNlIHdpbGwgYmUgcmVwbGFjZWQgYnlcbiAgICogc3RhbmRhcmQgc3BhY2VzICgweDIwKS5cbiAgICpcbiAgICogQHBhcmFtIHtnZXRUZXh0Q29udGVudFBhcmFtZXRlcnN9IHBhcmFtcyAtIGdldFRleHRDb250ZW50IHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFRleHRDb250ZW50Pn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhXG4gICAqICAge0BsaW5rIFRleHRDb250ZW50fSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSBwYWdlJ3MgdGV4dCBjb250ZW50LlxuICAgKi9cbiAgZ2V0VGV4dENvbnRlbnQocGFyYW1zID0ge30pIHtcbiAgICBpZiAodGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhKSB7XG4gICAgICAvLyBUT0RPOiBXZSBuZWVkIHRvIHJldmlzaXQgdGhpcyBvbmNlIHRoZSBYRkEgZm9yZWdyb3VuZCBwYXRjaCBsYW5kcyBhbmRcbiAgICAgIC8vIG9ubHkgZG8gdGhpcyBmb3Igbm9uLWZvcmVncm91bmQgWEZBLlxuICAgICAgcmV0dXJuIHRoaXMuZ2V0WGZhKCkudGhlbih4ZmEgPT4gWGZhVGV4dC50ZXh0Q29udGVudCh4ZmEpKTtcbiAgICB9XG4gICAgY29uc3QgcmVhZGFibGVTdHJlYW0gPSB0aGlzLnN0cmVhbVRleHRDb250ZW50KHBhcmFtcyk7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgZnVuY3Rpb24gcHVtcCgpIHtcbiAgICAgICAgcmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uICh7IHZhbHVlLCBkb25lIH0pIHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0Q29udGVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRleHRDb250ZW50LmxhbmcgPz89IHZhbHVlLmxhbmc7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0ZXh0Q29udGVudC5zdHlsZXMsIHZhbHVlLnN0eWxlcyk7XG4gICAgICAgICAgdGV4dENvbnRlbnQuaXRlbXMucHVzaCguLi52YWx1ZS5pdGVtcyk7XG4gICAgICAgICAgcHVtcCgpO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZWFkZXIgPSByZWFkYWJsZVN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgIGNvbnN0IHRleHRDb250ZW50ID0ge1xuICAgICAgICBpdGVtczogW10sXG4gICAgICAgIHN0eWxlczogT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgICAgbGFuZzogbnVsbCxcbiAgICAgIH07XG4gICAgICBwdW1wKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8U3RydWN0VHJlZU5vZGU+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGFcbiAgICogICB7QGxpbmsgU3RydWN0VHJlZU5vZGV9IG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHBhZ2UncyBzdHJ1Y3R1cmUgdHJlZSxcbiAgICogICBvciBgbnVsbGAgd2hlbiBubyBzdHJ1Y3R1cmUgdHJlZSBpcyBwcmVzZW50IGZvciB0aGUgY3VycmVudCBwYWdlLlxuICAgKi9cbiAgZ2V0U3RydWN0VHJlZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldFN0cnVjdFRyZWUodGhpcy5fcGFnZUluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGUgcGFnZSBvYmplY3QuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG5cbiAgICBjb25zdCB3YWl0T24gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGludGVudFN0YXRlIG9mIHRoaXMuX2ludGVudFN0YXRlcy52YWx1ZXMoKSkge1xuICAgICAgdGhpcy5fYWJvcnRPcGVyYXRvckxpc3Qoe1xuICAgICAgICBpbnRlbnRTdGF0ZSxcbiAgICAgICAgcmVhc29uOiBuZXcgRXJyb3IoXCJQYWdlIHdhcyBkZXN0cm95ZWQuXCIpLFxuICAgICAgICBmb3JjZTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaW50ZW50U3RhdGUub3BMaXN0UmVhZENhcGFiaWxpdHkpIHtcbiAgICAgICAgLy8gQXZvaWQgZXJyb3JzIGJlbG93LCBzaW5jZSB0aGUgcmVuZGVyVGFza3MgYXJlIGp1c3Qgc3R1YnMuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBpbnRlcm5hbFJlbmRlclRhc2sgb2YgaW50ZW50U3RhdGUucmVuZGVyVGFza3MpIHtcbiAgICAgICAgd2FpdE9uLnB1c2goaW50ZXJuYWxSZW5kZXJUYXNrLmNvbXBsZXRlZCk7XG4gICAgICAgIGludGVybmFsUmVuZGVyVGFzay5jYW5jZWwoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5vYmpzLmNsZWFyKCk7XG4gICAgdGhpcy4jcGVuZGluZ0NsZWFudXAgPSBmYWxzZTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbCh3YWl0T24pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IHRoZSBwYWdlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZXNldFN0YXRzXSAtIFJlc2V0IHBhZ2Ugc3RhdHMsIGlmIGVuYWJsZWQuXG4gICAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IEluZGljYXRlcyBpZiBjbGVhbi11cCB3YXMgc3VjY2Vzc2Z1bGx5IHJ1bi5cbiAgICovXG4gIGNsZWFudXAocmVzZXRTdGF0cyA9IGZhbHNlKSB7XG4gICAgdGhpcy4jcGVuZGluZ0NsZWFudXAgPSB0cnVlO1xuICAgIGNvbnN0IHN1Y2Nlc3MgPSB0aGlzLiN0cnlDbGVhbnVwKCk7XG5cbiAgICBpZiAocmVzZXRTdGF0cyAmJiBzdWNjZXNzKSB7XG4gICAgICB0aGlzLl9zdGF0cyAmJj0gbmV3IFN0YXRUaW1lcigpO1xuICAgIH1cbiAgICByZXR1cm4gc3VjY2VzcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRlbXB0cyB0byBjbGVhbiB1cCBpZiByZW5kZXJpbmcgaXMgaW4gYSBzdGF0ZSB3aGVyZSB0aGF0J3MgcG9zc2libGUuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBJbmRpY2F0ZXMgaWYgY2xlYW4tdXAgd2FzIHN1Y2Nlc3NmdWxseSBydW4uXG4gICAqL1xuICAjdHJ5Q2xlYW51cCgpIHtcbiAgICBpZiAoIXRoaXMuI3BlbmRpbmdDbGVhbnVwIHx8IHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAoY29uc3QgeyByZW5kZXJUYXNrcywgb3BlcmF0b3JMaXN0IH0gb2YgdGhpcy5faW50ZW50U3RhdGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocmVuZGVyVGFza3Muc2l6ZSA+IDAgfHwgIW9wZXJhdG9yTGlzdC5sYXN0Q2h1bmspIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9pbnRlbnRTdGF0ZXMuY2xlYXIoKTtcbiAgICB0aGlzLm9ianMuY2xlYXIoKTtcbiAgICB0aGlzLiNwZW5kaW5nQ2xlYW51cCA9IGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfc3RhcnRSZW5kZXJQYWdlKHRyYW5zcGFyZW5jeSwgY2FjaGVLZXkpIHtcbiAgICBjb25zdCBpbnRlbnRTdGF0ZSA9IHRoaXMuX2ludGVudFN0YXRlcy5nZXQoY2FjaGVLZXkpO1xuICAgIGlmICghaW50ZW50U3RhdGUpIHtcbiAgICAgIHJldHVybjsgLy8gUmVuZGVyaW5nIHdhcyBjYW5jZWxsZWQuXG4gICAgfVxuICAgIHRoaXMuX3N0YXRzPy50aW1lRW5kKFwiUGFnZSBSZXF1ZXN0XCIpO1xuXG4gICAgLy8gVE9ETyBSZWZhY3RvciBSZW5kZXJQYWdlUmVxdWVzdCB0byBzZXBhcmF0ZSByZW5kZXJpbmdcbiAgICAvLyBhbmQgb3BlcmF0b3IgbGlzdCBsb2dpY1xuICAgIGludGVudFN0YXRlLmRpc3BsYXlSZWFkeUNhcGFiaWxpdHk/LnJlc29sdmUodHJhbnNwYXJlbmN5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlclBhZ2VDaHVuayhvcGVyYXRvckxpc3RDaHVuaywgaW50ZW50U3RhdGUpIHtcbiAgICAvLyBBZGQgdGhlIG5ldyBjaHVuayB0byB0aGUgY3VycmVudCBvcGVyYXRvciBsaXN0LlxuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IG9wZXJhdG9yTGlzdENodW5rLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGludGVudFN0YXRlLm9wZXJhdG9yTGlzdC5mbkFycmF5LnB1c2gob3BlcmF0b3JMaXN0Q2h1bmsuZm5BcnJheVtpXSk7XG4gICAgICBpbnRlbnRTdGF0ZS5vcGVyYXRvckxpc3QuYXJnc0FycmF5LnB1c2gob3BlcmF0b3JMaXN0Q2h1bmsuYXJnc0FycmF5W2ldKTtcbiAgICB9XG4gICAgaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0Lmxhc3RDaHVuayA9IG9wZXJhdG9yTGlzdENodW5rLmxhc3RDaHVuaztcbiAgICBpbnRlbnRTdGF0ZS5vcGVyYXRvckxpc3Quc2VwYXJhdGVBbm5vdHMgPSBvcGVyYXRvckxpc3RDaHVuay5zZXBhcmF0ZUFubm90cztcblxuICAgIC8vIE5vdGlmeSBhbGwgdGhlIHJlbmRlcmluZyB0YXNrcyB0aGVyZSBhcmUgbW9yZSBvcGVyYXRvcnMgdG8gYmUgY29uc3VtZWQuXG4gICAgZm9yIChjb25zdCBpbnRlcm5hbFJlbmRlclRhc2sgb2YgaW50ZW50U3RhdGUucmVuZGVyVGFza3MpIHtcbiAgICAgIGludGVybmFsUmVuZGVyVGFzay5vcGVyYXRvckxpc3RDaGFuZ2VkKCk7XG4gICAgfVxuXG4gICAgaWYgKG9wZXJhdG9yTGlzdENodW5rLmxhc3RDaHVuaykge1xuICAgICAgdGhpcy4jdHJ5Q2xlYW51cCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3B1bXBPcGVyYXRvckxpc3Qoe1xuICAgIHJlbmRlcmluZ0ludGVudCxcbiAgICBjYWNoZUtleSxcbiAgICBhbm5vdGF0aW9uU3RvcmFnZVNlcmlhbGl6YWJsZSxcbiAgICBtb2RpZmllZElkcyxcbiAgfSkge1xuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgTnVtYmVyLmlzSW50ZWdlcihyZW5kZXJpbmdJbnRlbnQpICYmIHJlbmRlcmluZ0ludGVudCA+IDAsXG4gICAgICAgICdfcHVtcE9wZXJhdG9yTGlzdDogRXhwZWN0ZWQgdmFsaWQgXCJyZW5kZXJpbmdJbnRlbnRcIiBhcmd1bWVudC4nXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB7IG1hcCwgdHJhbnNmZXIgfSA9IGFubm90YXRpb25TdG9yYWdlU2VyaWFsaXphYmxlO1xuXG4gICAgY29uc3QgcmVhZGFibGVTdHJlYW0gPSB0aGlzLl90cmFuc3BvcnQubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhTdHJlYW0oXG4gICAgICBcIkdldE9wZXJhdG9yTGlzdFwiLFxuICAgICAge1xuICAgICAgICBwYWdlSW5kZXg6IHRoaXMuX3BhZ2VJbmRleCxcbiAgICAgICAgaW50ZW50OiByZW5kZXJpbmdJbnRlbnQsXG4gICAgICAgIGNhY2hlS2V5LFxuICAgICAgICBhbm5vdGF0aW9uU3RvcmFnZTogbWFwLFxuICAgICAgICBtb2RpZmllZElkcyxcbiAgICAgIH0sXG4gICAgICB0cmFuc2ZlclxuICAgICk7XG4gICAgY29uc3QgcmVhZGVyID0gcmVhZGFibGVTdHJlYW0uZ2V0UmVhZGVyKCk7XG5cbiAgICBjb25zdCBpbnRlbnRTdGF0ZSA9IHRoaXMuX2ludGVudFN0YXRlcy5nZXQoY2FjaGVLZXkpO1xuICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlciA9IHJlYWRlcjtcblxuICAgIGNvbnN0IHB1bXAgPSAoKSA9PiB7XG4gICAgICByZWFkZXIucmVhZCgpLnRoZW4oXG4gICAgICAgICh7IHZhbHVlLCBkb25lIH0pID0+IHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX3RyYW5zcG9ydC5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gSWdub3JlIGFueSBwZW5kaW5nIHJlcXVlc3RzIGlmIHRoZSB3b3JrZXIgd2FzIHRlcm1pbmF0ZWQuXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX3JlbmRlclBhZ2VDaHVuayh2YWx1ZSwgaW50ZW50U3RhdGUpO1xuICAgICAgICAgIHB1bXAoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVhc29uID0+IHtcbiAgICAgICAgICBpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXIgPSBudWxsO1xuXG4gICAgICAgICAgaWYgKHRoaXMuX3RyYW5zcG9ydC5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gSWdub3JlIGFueSBwZW5kaW5nIHJlcXVlc3RzIGlmIHRoZSB3b3JrZXIgd2FzIHRlcm1pbmF0ZWQuXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbnRlbnRTdGF0ZS5vcGVyYXRvckxpc3QpIHtcbiAgICAgICAgICAgIC8vIE1hcmsgb3BlcmF0b3IgbGlzdCBhcyBjb21wbGV0ZS5cbiAgICAgICAgICAgIGludGVudFN0YXRlLm9wZXJhdG9yTGlzdC5sYXN0Q2h1bmsgPSB0cnVlO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGludGVybmFsUmVuZGVyVGFzayBvZiBpbnRlbnRTdGF0ZS5yZW5kZXJUYXNrcykge1xuICAgICAgICAgICAgICBpbnRlcm5hbFJlbmRlclRhc2sub3BlcmF0b3JMaXN0Q2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jdHJ5Q2xlYW51cCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5KSB7XG4gICAgICAgICAgICBpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5LnJlamVjdChyZWFzb24pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaW50ZW50U3RhdGUub3BMaXN0UmVhZENhcGFiaWxpdHkpIHtcbiAgICAgICAgICAgIGludGVudFN0YXRlLm9wTGlzdFJlYWRDYXBhYmlsaXR5LnJlamVjdChyZWFzb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH07XG4gICAgcHVtcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYWJvcnRPcGVyYXRvckxpc3QoeyBpbnRlbnRTdGF0ZSwgcmVhc29uLCBmb3JjZSA9IGZhbHNlIH0pIHtcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8IFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHJlYXNvbiBpbnN0YW5jZW9mIEVycm9yLFxuICAgICAgICAnX2Fib3J0T3BlcmF0b3JMaXN0OiBFeHBlY3RlZCB2YWxpZCBcInJlYXNvblwiIGFyZ3VtZW50LidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHRoYXQgYSBwZW5kaW5nIGBzdHJlYW1SZWFkZXJgIGNhbmNlbCB0aW1lb3V0IGlzIGFsd2F5cyBhYm9ydGVkLlxuICAgIGlmIChpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXJDYW5jZWxUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQoaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCk7XG4gICAgICBpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXJDYW5jZWxUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIWZvcmNlKSB7XG4gICAgICAvLyBFbnN1cmUgdGhhdCBhbiBFcnJvciBvY2N1cnJpbmcgaW4gKm9ubHkqIG9uZSBgSW50ZXJuYWxSZW5kZXJUYXNrYCwgZS5nLlxuICAgICAgLy8gbXVsdGlwbGUgcmVuZGVyKCkgY2FsbHMgb24gdGhlIHNhbWUgY2FudmFzLCB3b24ndCBicmVhayBhbGwgcmVuZGVyaW5nLlxuICAgICAgaWYgKGludGVudFN0YXRlLnJlbmRlclRhc2tzLnNpemUgPiAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIERvbid0IGltbWVkaWF0ZWx5IGFib3J0IHBhcnNpbmcgb24gdGhlIHdvcmtlci10aHJlYWQgd2hlbiByZW5kZXJpbmcgaXNcbiAgICAgIC8vIGNhbmNlbGxlZCwgc2luY2UgdGhhdCB3aWxsIHVubmVjZXNzYXJpbHkgZGVsYXkgcmUtcmVuZGVyaW5nIHdoZW4gKGZvclxuICAgICAgLy8gcGFydGlhbGx5IHBhcnNlZCBwYWdlcykgZS5nLiB6b29taW5nL3JvdGF0aW9uIG9jY3VycyBpbiB0aGUgdmlld2VyLlxuICAgICAgaWYgKHJlYXNvbiBpbnN0YW5jZW9mIFJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbikge1xuICAgICAgICBsZXQgZGVsYXkgPSBSRU5ERVJJTkdfQ0FOQ0VMTEVEX1RJTUVPVVQ7XG4gICAgICAgIGlmIChyZWFzb24uZXh0cmFEZWxheSA+IDAgJiYgcmVhc29uLmV4dHJhRGVsYXkgPCAvKiBtcyA9ICovIDEwMDApIHtcbiAgICAgICAgICAvLyBBYm92ZSwgd2UgcHJldmVudCB0aGUgdG90YWwgZGVsYXkgZnJvbSBiZWNvbWluZyBhcmJpdHJhcmlseSBsYXJnZS5cbiAgICAgICAgICBkZWxheSArPSByZWFzb24uZXh0cmFEZWxheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlckNhbmNlbFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXJDYW5jZWxUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICB0aGlzLl9hYm9ydE9wZXJhdG9yTGlzdCh7IGludGVudFN0YXRlLCByZWFzb24sIGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyXG4gICAgICAuY2FuY2VsKG5ldyBBYm9ydEV4Y2VwdGlvbihyZWFzb24ubWVzc2FnZSkpXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvLyBBdm9pZCBcIlVuY2F1Z2h0IHByb21pc2VcIiBtZXNzYWdlcyBpbiB0aGUgY29uc29sZS5cbiAgICAgIH0pO1xuICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlciA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5fdHJhbnNwb3J0LmRlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgYW55IHBlbmRpbmcgcmVxdWVzdHMgaWYgdGhlIHdvcmtlciB3YXMgdGVybWluYXRlZC5cbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBjdXJyZW50IGBpbnRlbnRTdGF0ZWAsIHNpbmNlIGEgY2FuY2VsbGVkIGBnZXRPcGVyYXRvckxpc3RgXG4gICAgLy8gY2FsbCBvbiB0aGUgd29ya2VyLXRocmVhZCBjYW5ub3QgYmUgcmUtc3RhcnRlZC4uLlxuICAgIGZvciAoY29uc3QgW2N1ckNhY2hlS2V5LCBjdXJJbnRlbnRTdGF0ZV0gb2YgdGhpcy5faW50ZW50U3RhdGVzKSB7XG4gICAgICBpZiAoY3VySW50ZW50U3RhdGUgPT09IGludGVudFN0YXRlKSB7XG4gICAgICAgIHRoaXMuX2ludGVudFN0YXRlcy5kZWxldGUoY3VyQ2FjaGVLZXkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gLi4uIGFuZCBmb3JjZSBjbGVhbi11cCB0byBlbnN1cmUgdGhhdCBhbnkgb2xkIHN0YXRlIGlzIGFsd2F5cyByZW1vdmVkLlxuICAgIHRoaXMuY2xlYW51cCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtTdGF0VGltZXIgfCBudWxsfSBSZXR1cm5zIHBhZ2Ugc3RhdHMsIGlmIGVuYWJsZWQ7IHJldHVybnMgYG51bGxgXG4gICAqICAgb3RoZXJ3aXNlLlxuICAgKi9cbiAgZ2V0IHN0YXRzKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0cztcbiAgfVxufVxuXG5jbGFzcyBMb29wYmFja1BvcnQge1xuICAjbGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuXG4gICNkZWZlcnJlZCA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gIHBvc3RNZXNzYWdlKG9iaiwgdHJhbnNmZXIpIHtcbiAgICBjb25zdCBldmVudCA9IHtcbiAgICAgIGRhdGE6IHN0cnVjdHVyZWRDbG9uZShvYmosIHRyYW5zZmVyID8geyB0cmFuc2ZlciB9IDogbnVsbCksXG4gICAgfTtcblxuICAgIHRoaXMuI2RlZmVycmVkLnRoZW4oKCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBbbGlzdGVuZXJdIG9mIHRoaXMuI2xpc3RlbmVycykge1xuICAgICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFkZEV2ZW50TGlzdGVuZXIobmFtZSwgbGlzdGVuZXIsIG9wdGlvbnMgPSBudWxsKSB7XG4gICAgbGV0IHJtQWJvcnQgPSBudWxsO1xuICAgIGlmIChvcHRpb25zPy5zaWduYWwgaW5zdGFuY2VvZiBBYm9ydFNpZ25hbCkge1xuICAgICAgY29uc3QgeyBzaWduYWwgfSA9IG9wdGlvbnM7XG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgd2FybihcIkxvb3BiYWNrUG9ydCAtIGNhbm5vdCB1c2UgYW4gYGFib3J0ZWRgIHNpZ25hbC5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9uQWJvcnQgPSAoKSA9PiB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgbGlzdGVuZXIpO1xuICAgICAgcm1BYm9ydCA9ICgpID0+IHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCk7XG5cbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCk7XG4gICAgfVxuICAgIHRoaXMuI2xpc3RlbmVycy5zZXQobGlzdGVuZXIsIHJtQWJvcnQpO1xuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IHJtQWJvcnQgPSB0aGlzLiNsaXN0ZW5lcnMuZ2V0KGxpc3RlbmVyKTtcbiAgICBybUFib3J0Py4oKTtcblxuICAgIHRoaXMuI2xpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICB9XG5cbiAgdGVybWluYXRlKCkge1xuICAgIGZvciAoY29uc3QgWywgcm1BYm9ydF0gb2YgdGhpcy4jbGlzdGVuZXJzKSB7XG4gICAgICBybUFib3J0Py4oKTtcbiAgICB9XG4gICAgdGhpcy4jbGlzdGVuZXJzLmNsZWFyKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQREZXb3JrZXJQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW25hbWVdIC0gVGhlIG5hbWUgb2YgdGhlIHdvcmtlci5cbiAqIEBwcm9wZXJ0eSB7V29ya2VyfSBbcG9ydF0gLSBUaGUgYHdvcmtlclBvcnRgIG9iamVjdC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdmVyYm9zaXR5XSAtIENvbnRyb2xzIHRoZSBsb2dnaW5nIGxldmVsO1xuICogICB0aGUgY29uc3RhbnRzIGZyb20ge0BsaW5rIFZlcmJvc2l0eUxldmVsfSBzaG91bGQgYmUgdXNlZC5cbiAqL1xuXG4vKipcbiAqIFBERi5qcyB3ZWIgd29ya2VyIGFic3RyYWN0aW9uIHRoYXQgY29udHJvbHMgdGhlIGluc3RhbnRpYXRpb24gb2YgUERGXG4gKiBkb2N1bWVudHMuIE1lc3NhZ2UgaGFuZGxlcnMgYXJlIHVzZWQgdG8gcGFzcyBpbmZvcm1hdGlvbiBmcm9tIHRoZSBtYWluXG4gKiB0aHJlYWQgdG8gdGhlIHdvcmtlciB0aHJlYWQgYW5kIHZpY2UgdmVyc2EuIElmIHRoZSBjcmVhdGlvbiBvZiBhIHdlYlxuICogd29ya2VyIGlzIG5vdCBwb3NzaWJsZSwgYSBcImZha2VcIiB3b3JrZXIgd2lsbCBiZSB1c2VkIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHtQREZXb3JrZXJQYXJhbWV0ZXJzfSBwYXJhbXMgLSBUaGUgd29ya2VyIGluaXRpYWxpemF0aW9uIHBhcmFtZXRlcnMuXG4gKi9cbmNsYXNzIFBERldvcmtlciB7XG4gIHN0YXRpYyAjZmFrZVdvcmtlcklkID0gMDtcblxuICBzdGF0aWMgI2lzV29ya2VyRGlzYWJsZWQgPSBmYWxzZTtcblxuICBzdGF0aWMgI3dvcmtlclBvcnRzO1xuXG4gIHN0YXRpYyB7XG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSkge1xuICAgICAgaWYgKGlzTm9kZUpTKSB7XG4gICAgICAgIC8vIFdvcmtlcnMgYXJlbid0IHN1cHBvcnRlZCBpbiBOb2RlLmpzLCBmb3JjZS1kaXNhYmxpbmcgdGhlbSB0aGVyZS5cbiAgICAgICAgdGhpcy4jaXNXb3JrZXJEaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgICAgR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmMgfHw9IFBERkpTRGV2LnRlc3QoXCJMSUJcIilcbiAgICAgICAgICA/IFwiLi4vcGRmLndvcmtlci5qc1wiXG4gICAgICAgICAgOiBcIi4vcGRmLndvcmtlci5tanNcIjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgVVJMcyBoYXZlIHRoZSBzYW1lIG9yaWdpbi4gRm9yIG5vbi1IVFRQIGJhc2VkIFVSTHMsIHJldHVybnNcbiAgICAgIC8vIGZhbHNlLlxuICAgICAgdGhpcy5faXNTYW1lT3JpZ2luID0gKGJhc2VVcmwsIG90aGVyVXJsKSA9PiB7XG4gICAgICAgIGNvbnN0IGJhc2UgPSBVUkwucGFyc2UoYmFzZVVybCk7XG4gICAgICAgIGlmICghYmFzZT8ub3JpZ2luIHx8IGJhc2Uub3JpZ2luID09PSBcIm51bGxcIikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gbm9uLUhUVFAgdXJsXG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3RoZXIgPSBuZXcgVVJMKG90aGVyVXJsLCBiYXNlKTtcbiAgICAgICAgcmV0dXJuIGJhc2Uub3JpZ2luID09PSBvdGhlci5vcmlnaW47XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9jcmVhdGVDRE5XcmFwcGVyID0gdXJsID0+IHtcbiAgICAgICAgLy8gV2Ugd2lsbCByZWx5IG9uIGJsb2IgVVJMJ3MgcHJvcGVydHkgdG8gc3BlY2lmeSBvcmlnaW4uXG4gICAgICAgIC8vIFdlIHdhbnQgdGhpcyBmdW5jdGlvbiB0byBmYWlsIGluIGNhc2UgaWYgY3JlYXRlT2JqZWN0VVJMIG9yIEJsb2IgZG9cbiAgICAgICAgLy8gbm90IGV4aXN0IG9yIGZhaWwgZm9yIHNvbWUgcmVhc29uIC0tIG91ciBXb3JrZXIgY3JlYXRpb24gd2lsbCBmYWlsXG4gICAgICAgIC8vIGFueXdheS5cbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IGBhd2FpdCBpbXBvcnQoXCIke3VybH1cIik7YDtcbiAgICAgICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwoXG4gICAgICAgICAgbmV3IEJsb2IoW3dyYXBwZXJdLCB7IHR5cGU6IFwidGV4dC9qYXZhc2NyaXB0XCIgfSlcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIG5hbWUgPSBudWxsLFxuICAgIHBvcnQgPSBudWxsLFxuICAgIHZlcmJvc2l0eSA9IGdldFZlcmJvc2l0eUxldmVsKCksXG4gIH0gPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnZlcmJvc2l0eSA9IHZlcmJvc2l0eTtcblxuICAgIHRoaXMuX3JlYWR5Q2FwYWJpbGl0eSA9IFByb21pc2Uud2l0aFJlc29sdmVycygpO1xuICAgIHRoaXMuX3BvcnQgPSBudWxsO1xuICAgIHRoaXMuX3dlYldvcmtlciA9IG51bGw7XG4gICAgdGhpcy5fbWVzc2FnZUhhbmRsZXIgPSBudWxsO1xuXG4gICAgaWYgKFxuICAgICAgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpICYmXG4gICAgICBwb3J0XG4gICAgKSB7XG4gICAgICBpZiAoUERGV29ya2VyLiN3b3JrZXJQb3J0cz8uaGFzKHBvcnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSBQREZXb3JrZXIgcGVyIHBvcnQuXCIpO1xuICAgICAgfVxuICAgICAgKFBERldvcmtlci4jd29ya2VyUG9ydHMgfHw9IG5ldyBXZWFrTWFwKCkpLnNldChwb3J0LCB0aGlzKTtcbiAgICAgIHRoaXMuX2luaXRpYWxpemVGcm9tUG9ydChwb3J0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faW5pdGlhbGl6ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb21pc2UgZm9yIHdvcmtlciBpbml0aWFsaXphdGlvbiBjb21wbGV0aW9uLlxuICAgKiBAdHlwZSB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGdldCBwcm9taXNlKCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gICNyZXNvbHZlKCkge1xuICAgIHRoaXMuX3JlYWR5Q2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgLy8gU2VuZCBnbG9iYWwgc2V0dGluZywgZS5nLiB2ZXJib3NpdHkgbGV2ZWwuXG4gICAgdGhpcy5fbWVzc2FnZUhhbmRsZXIuc2VuZChcImNvbmZpZ3VyZVwiLCB7XG4gICAgICB2ZXJib3NpdHk6IHRoaXMudmVyYm9zaXR5LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGB3b3JrZXJQb3J0YCwgd2hlbiBpdCBleGlzdHMuXG4gICAqIEB0eXBlIHtXb3JrZXJ9XG4gICAqL1xuICBnZXQgcG9ydCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcG9ydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBNZXNzYWdlSGFuZGxlci1pbnN0YW5jZS5cbiAgICogQHR5cGUge01lc3NhZ2VIYW5kbGVyfVxuICAgKi9cbiAgZ2V0IG1lc3NhZ2VIYW5kbGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9tZXNzYWdlSGFuZGxlcjtcbiAgfVxuXG4gIF9pbml0aWFsaXplRnJvbVBvcnQocG9ydCkge1xuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZDogX2luaXRpYWxpemVGcm9tUG9ydFwiKTtcbiAgICB9XG4gICAgdGhpcy5fcG9ydCA9IHBvcnQ7XG4gICAgdGhpcy5fbWVzc2FnZUhhbmRsZXIgPSBuZXcgTWVzc2FnZUhhbmRsZXIoXCJtYWluXCIsIFwid29ya2VyXCIsIHBvcnQpO1xuICAgIHRoaXMuX21lc3NhZ2VIYW5kbGVyLm9uKFwicmVhZHlcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gSWdub3JpbmcgXCJyZWFkeVwiIGV2ZW50IC0tIE1lc3NhZ2VIYW5kbGVyIHNob3VsZCBhbHJlYWR5IGJlIGluaXRpYWxpemVkXG4gICAgICAvLyBhbmQgcmVhZHkgdG8gYWNjZXB0IG1lc3NhZ2VzLlxuICAgIH0pO1xuICAgIHRoaXMuI3Jlc29sdmUoKTtcbiAgfVxuXG4gIF9pbml0aWFsaXplKCkge1xuICAgIC8vIElmIHdvcmtlciBzdXBwb3J0IGlzbid0IGRpc2FibGVkIGV4cGxpY2l0IGFuZCB0aGUgYnJvd3NlciBoYXMgd29ya2VyXG4gICAgLy8gc3VwcG9ydCwgY3JlYXRlIGEgbmV3IHdlYiB3b3JrZXIgYW5kIHRlc3QgaWYgaXQvdGhlIGJyb3dzZXIgZnVsZmlsbHNcbiAgICAvLyBhbGwgcmVxdWlyZW1lbnRzIHRvIHJ1biBwYXJ0cyBvZiBwZGYuanMgaW4gYSB3ZWIgd29ya2VyLlxuICAgIC8vIFJpZ2h0IG5vdywgdGhlIHJlcXVpcmVtZW50IGlzLCB0aGF0IGFuIFVpbnQ4QXJyYXkgaXMgc3RpbGwgYW5cbiAgICAvLyBVaW50OEFycmF5IGFzIGl0IGFycml2ZXMgb24gdGhlIHdvcmtlci5cbiAgICBpZiAoXG4gICAgICBQREZXb3JrZXIuI2lzV29ya2VyRGlzYWJsZWQgfHxcbiAgICAgIFBERldvcmtlci4jbWFpblRocmVhZFdvcmtlck1lc3NhZ2VIYW5kbGVyXG4gICAgKSB7XG4gICAgICB0aGlzLl9zZXR1cEZha2VXb3JrZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHsgd29ya2VyU3JjIH0gPSBQREZXb3JrZXI7XG5cbiAgICB0cnkge1xuICAgICAgLy8gV3JhcHMgd29ya2VyU3JjIHBhdGggaW50byBibG9iIFVSTCwgaWYgdGhlIGZvcm1lciBkb2VzIG5vdCBiZWxvbmdcbiAgICAgIC8vIHRvIHRoZSBzYW1lIG9yaWdpbi5cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIFBERkpTRGV2LnRlc3QoXCJHRU5FUklDXCIpICYmXG4gICAgICAgICFQREZXb3JrZXIuX2lzU2FtZU9yaWdpbih3aW5kb3cubG9jYXRpb24sIHdvcmtlclNyYylcbiAgICAgICkge1xuICAgICAgICB3b3JrZXJTcmMgPSBQREZXb3JrZXIuX2NyZWF0ZUNETldyYXBwZXIoXG4gICAgICAgICAgbmV3IFVSTCh3b3JrZXJTcmMsIHdpbmRvdy5sb2NhdGlvbikuaHJlZlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3b3JrZXIgPSBuZXcgV29ya2VyKHdvcmtlclNyYywgeyB0eXBlOiBcIm1vZHVsZVwiIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZUhhbmRsZXIgPSBuZXcgTWVzc2FnZUhhbmRsZXIoXCJtYWluXCIsIFwid29ya2VyXCIsIHdvcmtlcik7XG4gICAgICBjb25zdCB0ZXJtaW5hdGVFYXJseSA9ICgpID0+IHtcbiAgICAgICAgYWMuYWJvcnQoKTtcbiAgICAgICAgbWVzc2FnZUhhbmRsZXIuZGVzdHJveSgpO1xuICAgICAgICB3b3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgIHRoaXMuX3JlYWR5Q2FwYWJpbGl0eS5yZWplY3QobmV3IEVycm9yKFwiV29ya2VyIHdhcyBkZXN0cm95ZWRcIikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBmYWtlIHdvcmtlciBpZiB0aGUgdGVybWluYXRpb24gaXMgY2F1c2VkIGJ5IGFuXG4gICAgICAgICAgLy8gZXJyb3IgKGUuZy4gTmV0d29ya0Vycm9yIC8gU2VjdXJpdHlFcnJvcikuXG4gICAgICAgICAgdGhpcy5fc2V0dXBGYWtlV29ya2VyKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFjID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiZXJyb3JcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGlmICghdGhpcy5fd2ViV29ya2VyKSB7XG4gICAgICAgICAgICAvLyBXb3JrZXIgZmFpbGVkIHRvIGluaXRpYWxpemUgZHVlIHRvIGFuIGVycm9yLiBDbGVhbiB1cCBhbmQgZmFsbFxuICAgICAgICAgICAgLy8gYmFjayB0byB0aGUgZmFrZSB3b3JrZXIuXG4gICAgICAgICAgICB0ZXJtaW5hdGVFYXJseSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBzaWduYWw6IGFjLnNpZ25hbCB9XG4gICAgICApO1xuXG4gICAgICBtZXNzYWdlSGFuZGxlci5vbihcInRlc3RcIiwgZGF0YSA9PiB7XG4gICAgICAgIGFjLmFib3J0KCk7XG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCB8fCAhZGF0YSkge1xuICAgICAgICAgIHRlcm1pbmF0ZUVhcmx5KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21lc3NhZ2VIYW5kbGVyID0gbWVzc2FnZUhhbmRsZXI7XG4gICAgICAgIHRoaXMuX3BvcnQgPSB3b3JrZXI7XG4gICAgICAgIHRoaXMuX3dlYldvcmtlciA9IHdvcmtlcjtcblxuICAgICAgICB0aGlzLiNyZXNvbHZlKCk7XG4gICAgICB9KTtcblxuICAgICAgbWVzc2FnZUhhbmRsZXIub24oXCJyZWFkeVwiLCBkYXRhID0+IHtcbiAgICAgICAgYWMuYWJvcnQoKTtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgdGVybWluYXRlRWFybHkoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzZW5kVGVzdCgpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBXZSBuZWVkIGZhbGxiYWNrIHRvIGEgZmFrZWQgd29ya2VyLlxuICAgICAgICAgIHRoaXMuX3NldHVwRmFrZVdvcmtlcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2VuZFRlc3QgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlc3RPYmogPSBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICAvLyBFbnN1cmUgdGhhdCB3ZSBjYW4gdXNlIGBwb3N0TWVzc2FnZWAgdHJhbnNmZXJzLlxuICAgICAgICBtZXNzYWdlSGFuZGxlci5zZW5kKFwidGVzdFwiLCB0ZXN0T2JqLCBbdGVzdE9iai5idWZmZXJdKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEl0IG1pZ2h0IHRha2UgdGltZSBmb3IgdGhlIHdvcmtlciB0byBpbml0aWFsaXplLiBXZSB3aWxsIHRyeSB0byBzZW5kXG4gICAgICAvLyB0aGUgXCJ0ZXN0XCIgbWVzc2FnZSBpbW1lZGlhdGVseSwgYW5kIG9uY2UgdGhlIFwicmVhZHlcIiBtZXNzYWdlIGFycml2ZXMuXG4gICAgICAvLyBUaGUgd29ya2VyIHNoYWxsIHByb2Nlc3Mgb25seSB0aGUgZmlyc3QgcmVjZWl2ZWQgXCJ0ZXN0XCIgbWVzc2FnZS5cbiAgICAgIHNlbmRUZXN0KCk7XG4gICAgICByZXR1cm47XG4gICAgfSBjYXRjaCB7XG4gICAgICBpbmZvKFwiVGhlIHdvcmtlciBoYXMgYmVlbiBkaXNhYmxlZC5cIik7XG4gICAgfVxuICAgIC8vIEVpdGhlciB3b3JrZXJzIGFyZSBub3Qgc3VwcG9ydGVkIG9yIGhhdmUgdGhyb3duIGFuIGV4Y2VwdGlvbi5cbiAgICAvLyBUaHVzLCB3ZSBmYWxsYmFjayB0byBhIGZha2VkIHdvcmtlci5cbiAgICB0aGlzLl9zZXR1cEZha2VXb3JrZXIoKTtcbiAgfVxuXG4gIF9zZXR1cEZha2VXb3JrZXIoKSB7XG4gICAgaWYgKCFQREZXb3JrZXIuI2lzV29ya2VyRGlzYWJsZWQpIHtcbiAgICAgIHdhcm4oXCJTZXR0aW5nIHVwIGZha2Ugd29ya2VyLlwiKTtcbiAgICAgIFBERldvcmtlci4jaXNXb3JrZXJEaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgUERGV29ya2VyLl9zZXR1cEZha2VXb3JrZXJHbG9iYWxcbiAgICAgIC50aGVuKFdvcmtlck1lc3NhZ2VIYW5kbGVyID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgdGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlamVjdChuZXcgRXJyb3IoXCJXb3JrZXIgd2FzIGRlc3Ryb3llZFwiKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvcnQgPSBuZXcgTG9vcGJhY2tQb3J0KCk7XG4gICAgICAgIHRoaXMuX3BvcnQgPSBwb3J0O1xuXG4gICAgICAgIC8vIEFsbCBmYWtlIHdvcmtlcnMgdXNlIHRoZSBzYW1lIHBvcnQsIG1ha2luZyBpZCB1bmlxdWUuXG4gICAgICAgIGNvbnN0IGlkID0gYGZha2Uke1BERldvcmtlci4jZmFrZVdvcmtlcklkKyt9YDtcblxuICAgICAgICAvLyBJZiB0aGUgbWFpbiB0aHJlYWQgaXMgb3VyIHdvcmtlciwgc2V0dXAgdGhlIGhhbmRsaW5nIGZvciB0aGVcbiAgICAgICAgLy8gbWVzc2FnZXMgLS0gdGhlIG1haW4gdGhyZWFkIHNlbmRzIHRvIGl0IHNlbGYuXG4gICAgICAgIGNvbnN0IHdvcmtlckhhbmRsZXIgPSBuZXcgTWVzc2FnZUhhbmRsZXIoaWQgKyBcIl93b3JrZXJcIiwgaWQsIHBvcnQpO1xuICAgICAgICBXb3JrZXJNZXNzYWdlSGFuZGxlci5zZXR1cCh3b3JrZXJIYW5kbGVyLCBwb3J0KTtcblxuICAgICAgICB0aGlzLl9tZXNzYWdlSGFuZGxlciA9IG5ldyBNZXNzYWdlSGFuZGxlcihpZCwgaWQgKyBcIl93b3JrZXJcIiwgcG9ydCk7XG4gICAgICAgIHRoaXMuI3Jlc29sdmUoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgdGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlamVjdChcbiAgICAgICAgICBuZXcgRXJyb3IoYFNldHRpbmcgdXAgZmFrZSB3b3JrZXIgZmFpbGVkOiBcIiR7cmVhc29uLm1lc3NhZ2V9XCIuYClcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSB3b3JrZXIgaW5zdGFuY2UuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgIC8vIFdlIG5lZWQgdG8gdGVybWluYXRlIG9ubHkgd2ViIHdvcmtlciBjcmVhdGVkIHJlc291cmNlLlxuICAgIHRoaXMuX3dlYldvcmtlcj8udGVybWluYXRlKCk7XG4gICAgdGhpcy5fd2ViV29ya2VyID0gbnVsbDtcblxuICAgIFBERldvcmtlci4jd29ya2VyUG9ydHM/LmRlbGV0ZSh0aGlzLl9wb3J0KTtcbiAgICB0aGlzLl9wb3J0ID0gbnVsbDtcblxuICAgIHRoaXMuX21lc3NhZ2VIYW5kbGVyPy5kZXN0cm95KCk7XG4gICAgdGhpcy5fbWVzc2FnZUhhbmRsZXIgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UERGV29ya2VyUGFyYW1ldGVyc30gcGFyYW1zIC0gVGhlIHdvcmtlciBpbml0aWFsaXphdGlvbiBwYXJhbWV0ZXJzLlxuICAgKiBAcmV0dXJucyB7UERGV29ya2VyfVxuICAgKi9cbiAgc3RhdGljIGZyb21Qb3J0KHBhcmFtcykge1xuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZDogZnJvbVBvcnRcIik7XG4gICAgfVxuICAgIGlmICghcGFyYW1zPy5wb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQREZXb3JrZXIuZnJvbVBvcnQgLSBpbnZhbGlkIG1ldGhvZCBzaWduYXR1cmUuXCIpO1xuICAgIH1cbiAgICBjb25zdCBjYWNoZWRQb3J0ID0gdGhpcy4jd29ya2VyUG9ydHM/LmdldChwYXJhbXMucG9ydCk7XG4gICAgaWYgKGNhY2hlZFBvcnQpIHtcbiAgICAgIGlmIChjYWNoZWRQb3J0Ll9wZW5kaW5nRGVzdHJveSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJQREZXb3JrZXIuZnJvbVBvcnQgLSB0aGUgd29ya2VyIGlzIGJlaW5nIGRlc3Ryb3llZC5cXG5cIiArXG4gICAgICAgICAgICBcIlBsZWFzZSByZW1lbWJlciB0byBhd2FpdCBgUERGRG9jdW1lbnRMb2FkaW5nVGFzay5kZXN0cm95KClgLWNhbGxzLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FjaGVkUG9ydDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQREZXb3JrZXIocGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBgd29ya2VyU3JjYCwgd2hlbiBpdCBleGlzdHMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IHdvcmtlclNyYygpIHtcbiAgICBpZiAoR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmMpIHtcbiAgICAgIHJldHVybiBHbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyYztcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBcIkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjXCIgc3BlY2lmaWVkLicpO1xuICB9XG5cbiAgc3RhdGljIGdldCAjbWFpblRocmVhZFdvcmtlck1lc3NhZ2VIYW5kbGVyKCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZ2xvYmFsVGhpcy5wZGZqc1dvcmtlcj8uV29ya2VyTWVzc2FnZUhhbmRsZXIgfHwgbnVsbDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIExvYWRzIHdvcmtlciBjb2RlIGludG8gdGhlIG1haW4tdGhyZWFkLlxuICBzdGF0aWMgZ2V0IF9zZXR1cEZha2VXb3JrZXJHbG9iYWwoKSB7XG4gICAgY29uc3QgbG9hZGVyID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuI21haW5UaHJlYWRXb3JrZXJNZXNzYWdlSGFuZGxlcikge1xuICAgICAgICAvLyBUaGUgd29ya2VyIHdhcyBhbHJlYWR5IGxvYWRlZCB1c2luZyBlLmcuIGEgYDxzY3JpcHQ+YCB0YWcuXG4gICAgICAgIHJldHVybiB0aGlzLiNtYWluVGhyZWFkV29ya2VyTWVzc2FnZUhhbmRsZXI7XG4gICAgICB9XG4gICAgICBjb25zdCB3b3JrZXIgPVxuICAgICAgICB0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICA/IGF3YWl0IGltcG9ydChcInBkZmpzL3BkZi53b3JrZXIuanNcIilcbiAgICAgICAgICA6IGF3YWl0IF9fcmF3X2ltcG9ydF9fKHRoaXMud29ya2VyU3JjKTtcbiAgICAgIHJldHVybiB3b3JrZXIuV29ya2VyTWVzc2FnZUhhbmRsZXI7XG4gICAgfTtcblxuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJfc2V0dXBGYWtlV29ya2VyR2xvYmFsXCIsIGxvYWRlcigpKTtcbiAgfVxufVxuXG4vKipcbiAqIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgV29ya2VyVHJhbnNwb3J0IHtcbiAgI21ldGhvZFByb21pc2VzID0gbmV3IE1hcCgpO1xuXG4gICNwYWdlQ2FjaGUgPSBuZXcgTWFwKCk7XG5cbiAgI3BhZ2VQcm9taXNlcyA9IG5ldyBNYXAoKTtcblxuICAjcGFnZVJlZkNhY2hlID0gbmV3IE1hcCgpO1xuXG4gICNwYXNzd29yZENhcGFiaWxpdHkgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2VIYW5kbGVyLCBsb2FkaW5nVGFzaywgbmV0d29ya1N0cmVhbSwgcGFyYW1zLCBmYWN0b3J5KSB7XG4gICAgdGhpcy5tZXNzYWdlSGFuZGxlciA9IG1lc3NhZ2VIYW5kbGVyO1xuICAgIHRoaXMubG9hZGluZ1Rhc2sgPSBsb2FkaW5nVGFzaztcbiAgICB0aGlzLmNvbW1vbk9ianMgPSBuZXcgUERGT2JqZWN0cygpO1xuICAgIHRoaXMuZm9udExvYWRlciA9IG5ldyBGb250TG9hZGVyKHtcbiAgICAgIG93bmVyRG9jdW1lbnQ6IHBhcmFtcy5vd25lckRvY3VtZW50LFxuICAgICAgc3R5bGVFbGVtZW50OiBwYXJhbXMuc3R5bGVFbGVtZW50LFxuICAgIH0pO1xuICAgIHRoaXMubG9hZGluZ1BhcmFtcyA9IHBhcmFtcy5sb2FkaW5nUGFyYW1zO1xuICAgIHRoaXMuX3BhcmFtcyA9IHBhcmFtcztcblxuICAgIHRoaXMuY2FudmFzRmFjdG9yeSA9IGZhY3RvcnkuY2FudmFzRmFjdG9yeTtcbiAgICB0aGlzLmZpbHRlckZhY3RvcnkgPSBmYWN0b3J5LmZpbHRlckZhY3Rvcnk7XG4gICAgdGhpcy5jTWFwUmVhZGVyRmFjdG9yeSA9IGZhY3RvcnkuY01hcFJlYWRlckZhY3Rvcnk7XG4gICAgdGhpcy5zdGFuZGFyZEZvbnREYXRhRmFjdG9yeSA9IGZhY3Rvcnkuc3RhbmRhcmRGb250RGF0YUZhY3Rvcnk7XG4gICAgdGhpcy53YXNtRmFjdG9yeSA9IGZhY3Rvcnkud2FzbUZhY3Rvcnk7XG5cbiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHRoaXMuZGVzdHJveUNhcGFiaWxpdHkgPSBudWxsO1xuXG4gICAgdGhpcy5fbmV0d29ya1N0cmVhbSA9IG5ldHdvcmtTdHJlYW07XG4gICAgdGhpcy5fZnVsbFJlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fbGFzdFByb2dyZXNzID0gbnVsbDtcbiAgICB0aGlzLmRvd25sb2FkSW5mb0NhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcblxuICAgIHRoaXMuc2V0dXBNZXNzYWdlSGFuZGxlcigpO1xuXG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkge1xuICAgICAgLy8gRm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXROZXR3b3JrU3RyZWFtTmFtZVwiLCB7XG4gICAgICAgIHZhbHVlOiAoKSA9PiBuZXR3b3JrU3RyZWFtPy5jb25zdHJ1Y3Rvcj8ubmFtZSB8fCBudWxsLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRYRkFEYXRhc2V0c1wiLCB7XG4gICAgICAgIHZhbHVlOiAoKSA9PlxuICAgICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0WEZBRGF0YXNldHNcIiwgbnVsbCksXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdldFhSZWZQcmV2VmFsdWVcIiwge1xuICAgICAgICB2YWx1ZTogKCkgPT5cbiAgICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldFhSZWZQcmV2VmFsdWVcIiwgbnVsbCksXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdldFN0YXJ0WFJlZlBvc1wiLCB7XG4gICAgICAgIHZhbHVlOiAoKSA9PlxuICAgICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0U3RhcnRYUmVmUG9zXCIsIG51bGwpLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRBbm5vdEFycmF5XCIsIHtcbiAgICAgICAgdmFsdWU6IHBhZ2VJbmRleCA9PlxuICAgICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0QW5ub3RBcnJheVwiLCB7IHBhZ2VJbmRleCB9KSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gICNjYWNoZVNpbXBsZU1ldGhvZChuYW1lLCBkYXRhID0gbnVsbCkge1xuICAgIGNvbnN0IGNhY2hlZFByb21pc2UgPSB0aGlzLiNtZXRob2RQcm9taXNlcy5nZXQobmFtZSk7XG4gICAgaWYgKGNhY2hlZFByb21pc2UpIHtcbiAgICAgIHJldHVybiBjYWNoZWRQcm9taXNlO1xuICAgIH1cbiAgICBjb25zdCBwcm9taXNlID0gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UobmFtZSwgZGF0YSk7XG5cbiAgICB0aGlzLiNtZXRob2RQcm9taXNlcy5zZXQobmFtZSwgcHJvbWlzZSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICBnZXQgYW5ub3RhdGlvblN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyh0aGlzLCBcImFubm90YXRpb25TdG9yYWdlXCIsIG5ldyBBbm5vdGF0aW9uU3RvcmFnZSgpKTtcbiAgfVxuXG4gIGdldFJlbmRlcmluZ0ludGVudChcbiAgICBpbnRlbnQsXG4gICAgYW5ub3RhdGlvbk1vZGUgPSBBbm5vdGF0aW9uTW9kZS5FTkFCTEUsXG4gICAgcHJpbnRBbm5vdGF0aW9uU3RvcmFnZSA9IG51bGwsXG4gICAgaXNFZGl0aW5nID0gZmFsc2UsXG4gICAgaXNPcExpc3QgPSBmYWxzZVxuICApIHtcbiAgICBsZXQgcmVuZGVyaW5nSW50ZW50ID0gUmVuZGVyaW5nSW50ZW50RmxhZy5ESVNQTEFZOyAvLyBEZWZhdWx0IHZhbHVlLlxuICAgIGxldCBhbm5vdGF0aW9uU3RvcmFnZVNlcmlhbGl6YWJsZSA9IFNlcmlhbGl6YWJsZUVtcHR5O1xuXG4gICAgc3dpdGNoIChpbnRlbnQpIHtcbiAgICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgICAgcmVuZGVyaW5nSW50ZW50ID0gUmVuZGVyaW5nSW50ZW50RmxhZy5BTlk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImRpc3BsYXlcIjpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJpbnRcIjpcbiAgICAgICAgcmVuZGVyaW5nSW50ZW50ID0gUmVuZGVyaW5nSW50ZW50RmxhZy5QUklOVDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB3YXJuKGBnZXRSZW5kZXJpbmdJbnRlbnQgLSBpbnZhbGlkIGludGVudDogJHtpbnRlbnR9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgYW5ub3RhdGlvblN0b3JhZ2UgPVxuICAgICAgcmVuZGVyaW5nSW50ZW50ICYgUmVuZGVyaW5nSW50ZW50RmxhZy5QUklOVCAmJlxuICAgICAgcHJpbnRBbm5vdGF0aW9uU3RvcmFnZSBpbnN0YW5jZW9mIFByaW50QW5ub3RhdGlvblN0b3JhZ2VcbiAgICAgICAgPyBwcmludEFubm90YXRpb25TdG9yYWdlXG4gICAgICAgIDogdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcblxuICAgIHN3aXRjaCAoYW5ub3RhdGlvbk1vZGUpIHtcbiAgICAgIGNhc2UgQW5ub3RhdGlvbk1vZGUuRElTQUJMRTpcbiAgICAgICAgcmVuZGVyaW5nSW50ZW50ICs9IFJlbmRlcmluZ0ludGVudEZsYWcuQU5OT1RBVElPTlNfRElTQUJMRTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFubm90YXRpb25Nb2RlLkVOQUJMRTpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFubm90YXRpb25Nb2RlLkVOQUJMRV9GT1JNUzpcbiAgICAgICAgcmVuZGVyaW5nSW50ZW50ICs9IFJlbmRlcmluZ0ludGVudEZsYWcuQU5OT1RBVElPTlNfRk9STVM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBBbm5vdGF0aW9uTW9kZS5FTkFCTEVfU1RPUkFHRTpcbiAgICAgICAgcmVuZGVyaW5nSW50ZW50ICs9IFJlbmRlcmluZ0ludGVudEZsYWcuQU5OT1RBVElPTlNfU1RPUkFHRTtcblxuICAgICAgICBhbm5vdGF0aW9uU3RvcmFnZVNlcmlhbGl6YWJsZSA9IGFubm90YXRpb25TdG9yYWdlLnNlcmlhbGl6YWJsZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB3YXJuKGBnZXRSZW5kZXJpbmdJbnRlbnQgLSBpbnZhbGlkIGFubm90YXRpb25Nb2RlOiAke2Fubm90YXRpb25Nb2RlfWApO1xuICAgIH1cblxuICAgIGlmIChpc0VkaXRpbmcpIHtcbiAgICAgIHJlbmRlcmluZ0ludGVudCArPSBSZW5kZXJpbmdJbnRlbnRGbGFnLklTX0VESVRJTkc7XG4gICAgfVxuICAgIGlmIChpc09wTGlzdCkge1xuICAgICAgcmVuZGVyaW5nSW50ZW50ICs9IFJlbmRlcmluZ0ludGVudEZsYWcuT1BMSVNUO1xuICAgIH1cblxuICAgIGNvbnN0IHsgaWRzOiBtb2RpZmllZElkcywgaGFzaDogbW9kaWZpZWRJZHNIYXNoIH0gPVxuICAgICAgYW5ub3RhdGlvblN0b3JhZ2UubW9kaWZpZWRJZHM7XG5cbiAgICBjb25zdCBjYWNoZUtleUJ1ZiA9IFtcbiAgICAgIHJlbmRlcmluZ0ludGVudCxcbiAgICAgIGFubm90YXRpb25TdG9yYWdlU2VyaWFsaXphYmxlLmhhc2gsXG4gICAgICBtb2RpZmllZElkc0hhc2gsXG4gICAgXTtcblxuICAgIHJldHVybiB7XG4gICAgICByZW5kZXJpbmdJbnRlbnQsXG4gICAgICBjYWNoZUtleTogY2FjaGVLZXlCdWYuam9pbihcIl9cIiksXG4gICAgICBhbm5vdGF0aW9uU3RvcmFnZVNlcmlhbGl6YWJsZSxcbiAgICAgIG1vZGlmaWVkSWRzLFxuICAgIH07XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmRlc3Ryb3lDYXBhYmlsaXR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5kZXN0cm95Q2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIH1cblxuICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgICB0aGlzLmRlc3Ryb3lDYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG5cbiAgICB0aGlzLiNwYXNzd29yZENhcGFiaWxpdHk/LnJlamVjdChcbiAgICAgIG5ldyBFcnJvcihcIldvcmtlciB3YXMgZGVzdHJveWVkIGR1cmluZyBvblBhc3N3b3JkIGNhbGxiYWNrXCIpXG4gICAgKTtcblxuICAgIGNvbnN0IHdhaXRPbiA9IFtdO1xuICAgIC8vIFdlIG5lZWQgdG8gd2FpdCBmb3IgYWxsIHJlbmRlcmluZ3MgdG8gYmUgY29tcGxldGVkLCBlLmcuXG4gICAgLy8gdGltZW91dC9yQUYgY2FuIHRha2UgYSBsb25nIHRpbWUuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHRoaXMuI3BhZ2VDYWNoZS52YWx1ZXMoKSkge1xuICAgICAgd2FpdE9uLnB1c2gocGFnZS5fZGVzdHJveSgpKTtcbiAgICB9XG4gICAgdGhpcy4jcGFnZUNhY2hlLmNsZWFyKCk7XG4gICAgdGhpcy4jcGFnZVByb21pc2VzLmNsZWFyKCk7XG4gICAgdGhpcy4jcGFnZVJlZkNhY2hlLmNsZWFyKCk7XG4gICAgLy8gQWxsb3cgYEFubm90YXRpb25TdG9yYWdlYC1yZWxhdGVkIGNsZWFuLXVwIHdoZW4gZGVzdHJveWluZyB0aGUgZG9jdW1lbnQuXG4gICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoXCJhbm5vdGF0aW9uU3RvcmFnZVwiKSkge1xuICAgICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5yZXNldE1vZGlmaWVkKCk7XG4gICAgfVxuICAgIC8vIFdlIGFsc28gbmVlZCB0byB3YWl0IGZvciB0aGUgd29ya2VyIHRvIGZpbmlzaCBpdHMgbG9uZyBydW5uaW5nIHRhc2tzLlxuICAgIGNvbnN0IHRlcm1pbmF0ZWQgPSB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIlRlcm1pbmF0ZVwiLCBudWxsKTtcbiAgICB3YWl0T24ucHVzaCh0ZXJtaW5hdGVkKTtcblxuICAgIFByb21pc2UuYWxsKHdhaXRPbikudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLmNvbW1vbk9ianMuY2xlYXIoKTtcbiAgICAgIHRoaXMuZm9udExvYWRlci5jbGVhcigpO1xuICAgICAgdGhpcy4jbWV0aG9kUHJvbWlzZXMuY2xlYXIoKTtcbiAgICAgIHRoaXMuZmlsdGVyRmFjdG9yeS5kZXN0cm95KCk7XG4gICAgICBUZXh0TGF5ZXIuY2xlYW51cCgpO1xuXG4gICAgICB0aGlzLl9uZXR3b3JrU3RyZWFtPy5jYW5jZWxBbGxSZXF1ZXN0cyhcbiAgICAgICAgbmV3IEFib3J0RXhjZXB0aW9uKFwiV29ya2VyIHdhcyB0ZXJtaW5hdGVkLlwiKVxuICAgICAgKTtcblxuICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlcj8uZGVzdHJveSgpO1xuICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlciA9IG51bGw7XG5cbiAgICAgIHRoaXMuZGVzdHJveUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgIH0sIHRoaXMuZGVzdHJveUNhcGFiaWxpdHkucmVqZWN0KTtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95Q2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgc2V0dXBNZXNzYWdlSGFuZGxlcigpIHtcbiAgICBjb25zdCB7IG1lc3NhZ2VIYW5kbGVyLCBsb2FkaW5nVGFzayB9ID0gdGhpcztcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiR2V0UmVhZGVyXCIsIChkYXRhLCBzaW5rKSA9PiB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMuX25ldHdvcmtTdHJlYW0sXG4gICAgICAgIFwiR2V0UmVhZGVyIC0gbm8gYElQREZTdHJlYW1gIGluc3RhbmNlIGF2YWlsYWJsZS5cIlxuICAgICAgKTtcbiAgICAgIHRoaXMuX2Z1bGxSZWFkZXIgPSB0aGlzLl9uZXR3b3JrU3RyZWFtLmdldEZ1bGxSZWFkZXIoKTtcbiAgICAgIHRoaXMuX2Z1bGxSZWFkZXIub25Qcm9ncmVzcyA9IGV2dCA9PiB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICBsb2FkZWQ6IGV2dC5sb2FkZWQsXG4gICAgICAgICAgdG90YWw6IGV2dC50b3RhbCxcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBzaW5rLm9uUHVsbCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fZnVsbFJlYWRlclxuICAgICAgICAgIC5yZWFkKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoeyB2YWx1ZSwgZG9uZSB9KSB7XG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICBzaW5rLmNsb3NlKCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2VydChcbiAgICAgICAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgICAgXCJHZXRSZWFkZXIgLSBleHBlY3RlZCBhbiBBcnJheUJ1ZmZlci5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIEVucXVldWUgZGF0YSBjaHVuayBpbnRvIHNpbmssIGFuZCB0cmFuc2ZlciBpdFxuICAgICAgICAgICAgLy8gdG8gb3RoZXIgc2lkZSBhcyBgVHJhbnNmZXJhYmxlYCBvYmplY3QuXG4gICAgICAgICAgICBzaW5rLmVucXVldWUobmV3IFVpbnQ4QXJyYXkodmFsdWUpLCAxLCBbdmFsdWVdKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgICAgc2luay5lcnJvcihyZWFzb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgc2luay5vbkNhbmNlbCA9IHJlYXNvbiA9PiB7XG4gICAgICAgIHRoaXMuX2Z1bGxSZWFkZXIuY2FuY2VsKHJlYXNvbik7XG5cbiAgICAgICAgc2luay5yZWFkeS5jYXRjaChyZWFkeVJlYXNvbiA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIElnbm9yZSBhbnkgcGVuZGluZyByZXF1ZXN0cyBpZiB0aGUgd29ya2VyIHdhcyB0ZXJtaW5hdGVkLlxuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyByZWFkeVJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJSZWFkZXJIZWFkZXJzUmVhZHlcIiwgYXN5bmMgZGF0YSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLl9mdWxsUmVhZGVyLmhlYWRlcnNSZWFkeTtcblxuICAgICAgY29uc3QgeyBpc1N0cmVhbWluZ1N1cHBvcnRlZCwgaXNSYW5nZVN1cHBvcnRlZCwgY29udGVudExlbmd0aCB9ID1cbiAgICAgICAgdGhpcy5fZnVsbFJlYWRlcjtcblxuICAgICAgLy8gSWYgc3RyZWFtIG9yIHJhbmdlIGFyZSBkaXNhYmxlZCwgaXQncyBvdXIgb25seSB3YXkgdG8gcmVwb3J0XG4gICAgICAvLyBsb2FkaW5nIHByb2dyZXNzLlxuICAgICAgaWYgKCFpc1N0cmVhbWluZ1N1cHBvcnRlZCB8fCAhaXNSYW5nZVN1cHBvcnRlZCkge1xuICAgICAgICBpZiAodGhpcy5fbGFzdFByb2dyZXNzKSB7XG4gICAgICAgICAgbG9hZGluZ1Rhc2sub25Qcm9ncmVzcz8uKHRoaXMuX2xhc3RQcm9ncmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZnVsbFJlYWRlci5vblByb2dyZXNzID0gZXZ0ID0+IHtcbiAgICAgICAgICBsb2FkaW5nVGFzay5vblByb2dyZXNzPy4oe1xuICAgICAgICAgICAgbG9hZGVkOiBldnQubG9hZGVkLFxuICAgICAgICAgICAgdG90YWw6IGV2dC50b3RhbCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgaXNTdHJlYW1pbmdTdXBwb3J0ZWQsIGlzUmFuZ2VTdXBwb3J0ZWQsIGNvbnRlbnRMZW5ndGggfTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiR2V0UmFuZ2VSZWFkZXJcIiwgKGRhdGEsIHNpbmspID0+IHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgdGhpcy5fbmV0d29ya1N0cmVhbSxcbiAgICAgICAgXCJHZXRSYW5nZVJlYWRlciAtIG5vIGBJUERGU3RyZWFtYCBpbnN0YW5jZSBhdmFpbGFibGUuXCJcbiAgICAgICk7XG4gICAgICBjb25zdCByYW5nZVJlYWRlciA9IHRoaXMuX25ldHdvcmtTdHJlYW0uZ2V0UmFuZ2VSZWFkZXIoXG4gICAgICAgIGRhdGEuYmVnaW4sXG4gICAgICAgIGRhdGEuZW5kXG4gICAgICApO1xuXG4gICAgICAvLyBXaGVuIHN0cmVhbWluZyBpcyBlbmFibGVkLCBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGRhdGEgcmVxdWVzdGVkIGhlcmVcbiAgICAgIC8vIGhhcyBhbHJlYWR5IGJlZW4gZmV0Y2hlZCB2aWEgdGhlIGBfZnVsbFJlcXVlc3RSZWFkZXJgIGltcGxlbWVudGF0aW9uLlxuICAgICAgLy8gSG93ZXZlciwgZ2l2ZW4gdGhhdCB0aGUgUERGIGRhdGEgaXMgbG9hZGVkIGFzeW5jaHJvbm91c2x5IG9uIHRoZVxuICAgICAgLy8gbWFpbi10aHJlYWQgYW5kIHRoZW4gc2VudCB2aWEgYHBvc3RNZXNzYWdlYCB0byB0aGUgd29ya2VyLXRocmVhZCxcbiAgICAgIC8vIGl0IG1heSBub3QgaGF2ZSBiZWVuIGF2YWlsYWJsZSBkdXJpbmcgcGFyc2luZyAoaGVuY2UgdGhlIGF0dGVtcHQgdG9cbiAgICAgIC8vIHVzZSByYW5nZSByZXF1ZXN0cyBoZXJlKS5cbiAgICAgIC8vXG4gICAgICAvLyBUbyBhdm9pZCB3YXN0aW5nIHRpbWUgYW5kIHJlc291cmNlcyBoZXJlLCB3ZSdsbCB0aHVzICpub3QqIGRpc3BhdGNoXG4gICAgICAvLyByYW5nZSByZXF1ZXN0cyBpZiB0aGUgZGF0YSB3YXMgYWxyZWFkeSBsb2FkZWQgYnV0IGhhcyBub3QgYmVlbiBzZW50IHRvXG4gICAgICAvLyB0aGUgd29ya2VyLXRocmVhZCB5ZXQgKHdoaWNoIHdpbGwgaGFwcGVuIHZpYSB0aGUgYF9mdWxsUmVxdWVzdFJlYWRlcmApLlxuICAgICAgaWYgKCFyYW5nZVJlYWRlcikge1xuICAgICAgICBzaW5rLmNsb3NlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2luay5vblB1bGwgPSAoKSA9PiB7XG4gICAgICAgIHJhbmdlUmVhZGVyXG4gICAgICAgICAgLnJlYWQoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh7IHZhbHVlLCBkb25lIH0pIHtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgIHNpbmsuY2xvc2UoKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXNzZXJ0KFxuICAgICAgICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICBcIkdldFJhbmdlUmVhZGVyIC0gZXhwZWN0ZWQgYW4gQXJyYXlCdWZmZXIuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzaW5rLmVucXVldWUobmV3IFVpbnQ4QXJyYXkodmFsdWUpLCAxLCBbdmFsdWVdKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgICAgc2luay5lcnJvcihyZWFzb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgc2luay5vbkNhbmNlbCA9IHJlYXNvbiA9PiB7XG4gICAgICAgIHJhbmdlUmVhZGVyLmNhbmNlbChyZWFzb24pO1xuXG4gICAgICAgIHNpbmsucmVhZHkuY2F0Y2gocmVhZHlSZWFzb24gPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgYW55IHBlbmRpbmcgcmVxdWVzdHMgaWYgdGhlIHdvcmtlciB3YXMgdGVybWluYXRlZC5cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgcmVhZHlSZWFzb247XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiR2V0RG9jXCIsICh7IHBkZkluZm8gfSkgPT4ge1xuICAgICAgdGhpcy5fbnVtUGFnZXMgPSBwZGZJbmZvLm51bVBhZ2VzO1xuICAgICAgdGhpcy5faHRtbEZvclhmYSA9IHBkZkluZm8uaHRtbEZvclhmYTtcbiAgICAgIGRlbGV0ZSBwZGZJbmZvLmh0bWxGb3JYZmE7XG4gICAgICBsb2FkaW5nVGFzay5fY2FwYWJpbGl0eS5yZXNvbHZlKG5ldyBQREZEb2N1bWVudFByb3h5KHBkZkluZm8sIHRoaXMpKTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiRG9jRXhjZXB0aW9uXCIsIGV4ID0+IHtcbiAgICAgIGxvYWRpbmdUYXNrLl9jYXBhYmlsaXR5LnJlamVjdCh3cmFwUmVhc29uKGV4KSk7XG4gICAgfSk7XG5cbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIlBhc3N3b3JkUmVxdWVzdFwiLCBleCA9PiB7XG4gICAgICB0aGlzLiNwYXNzd29yZENhcGFiaWxpdHkgPSBQcm9taXNlLndpdGhSZXNvbHZlcnMoKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFsb2FkaW5nVGFzay5vblBhc3N3b3JkKSB7XG4gICAgICAgICAgdGhyb3cgd3JhcFJlYXNvbihleCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cGRhdGVQYXNzd29yZCA9IHBhc3N3b3JkID0+IHtcbiAgICAgICAgICBpZiAocGFzc3dvcmQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgdGhpcy4jcGFzc3dvcmRDYXBhYmlsaXR5LnJlamVjdChwYXNzd29yZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuI3Bhc3N3b3JkQ2FwYWJpbGl0eS5yZXNvbHZlKHsgcGFzc3dvcmQgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsb2FkaW5nVGFzay5vblBhc3N3b3JkKHVwZGF0ZVBhc3N3b3JkLCBleC5jb2RlKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLiNwYXNzd29yZENhcGFiaWxpdHkucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy4jcGFzc3dvcmRDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgfSk7XG5cbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIkRhdGFMb2FkZWRcIiwgZGF0YSA9PiB7XG4gICAgICAvLyBGb3IgY29uc2lzdGVuY3k6IEVuc3VyZSB0aGF0IHByb2dyZXNzIGlzIGFsd2F5cyByZXBvcnRlZCB3aGVuIHRoZVxuICAgICAgLy8gZW50aXJlIFBERiBmaWxlIGhhcyBiZWVuIGxvYWRlZCwgcmVnYXJkbGVzcyBvZiBob3cgaXQgd2FzIGZldGNoZWQuXG4gICAgICBsb2FkaW5nVGFzay5vblByb2dyZXNzPy4oe1xuICAgICAgICBsb2FkZWQ6IGRhdGEubGVuZ3RoLFxuICAgICAgICB0b3RhbDogZGF0YS5sZW5ndGgsXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5kb3dubG9hZEluZm9DYXBhYmlsaXR5LnJlc29sdmUoZGF0YSk7XG4gICAgfSk7XG5cbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIlN0YXJ0UmVuZGVyUGFnZVwiLCBkYXRhID0+IHtcbiAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICByZXR1cm47IC8vIElnbm9yZSBhbnkgcGVuZGluZyByZXF1ZXN0cyBpZiB0aGUgd29ya2VyIHdhcyB0ZXJtaW5hdGVkLlxuICAgICAgfVxuXG4gICAgICBjb25zdCBwYWdlID0gdGhpcy4jcGFnZUNhY2hlLmdldChkYXRhLnBhZ2VJbmRleCk7XG4gICAgICBwYWdlLl9zdGFydFJlbmRlclBhZ2UoZGF0YS50cmFuc3BhcmVuY3ksIGRhdGEuY2FjaGVLZXkpO1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJjb21tb25vYmpcIiwgKFtpZCwgdHlwZSwgZXhwb3J0ZWREYXRhXSkgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybiBudWxsOyAvLyBJZ25vcmUgYW55IHBlbmRpbmcgcmVxdWVzdHMgaWYgdGhlIHdvcmtlciB3YXMgdGVybWluYXRlZC5cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29tbW9uT2Jqcy5oYXMoaWQpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcIkZvbnRcIjpcbiAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIGV4cG9ydGVkRGF0YSkge1xuICAgICAgICAgICAgY29uc3QgZXhwb3J0ZWRFcnJvciA9IGV4cG9ydGVkRGF0YS5lcnJvcjtcbiAgICAgICAgICAgIHdhcm4oYEVycm9yIGR1cmluZyBmb250IGxvYWRpbmc6ICR7ZXhwb3J0ZWRFcnJvcn1gKTtcbiAgICAgICAgICAgIHRoaXMuY29tbW9uT2Jqcy5yZXNvbHZlKGlkLCBleHBvcnRlZEVycm9yKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGluc3BlY3RGb250ID1cbiAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5wZGZCdWcgJiYgZ2xvYmFsVGhpcy5Gb250SW5zcGVjdG9yPy5lbmFibGVkXG4gICAgICAgICAgICAgID8gKGZvbnQsIHVybCkgPT4gZ2xvYmFsVGhpcy5Gb250SW5zcGVjdG9yLmZvbnRBZGRlZChmb250LCB1cmwpXG4gICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBmb250ID0gbmV3IEZvbnRGYWNlT2JqZWN0KGV4cG9ydGVkRGF0YSwgaW5zcGVjdEZvbnQpO1xuXG4gICAgICAgICAgdGhpcy5mb250TG9hZGVyXG4gICAgICAgICAgICAuYmluZChmb250KVxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IG1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkZvbnRGYWxsYmFja1wiLCB7IGlkIH0pKVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWZvbnQuZm9udEV4dHJhUHJvcGVydGllcyAmJiBmb250LmRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBJbW1lZGlhdGVseSByZWxlYXNlIHRoZSBgZm9udC5kYXRhYCBwcm9wZXJ0eSBvbmNlIHRoZSBmb250XG4gICAgICAgICAgICAgICAgLy8gaGFzIGJlZW4gYXR0YWNoZWQgdG8gdGhlIERPTSwgc2luY2UgaXQncyBubyBsb25nZXIgbmVlZGVkLFxuICAgICAgICAgICAgICAgIC8vIHJhdGhlciB0aGFuIHdhaXRpbmcgZm9yIGEgYFBERkRvY3VtZW50UHJveHkuY2xlYW51cGAgY2FsbC5cbiAgICAgICAgICAgICAgICAvLyBTaW5jZSBgZm9udC5kYXRhYCBjb3VsZCBiZSB2ZXJ5IGxhcmdlLCBlLmcuIGluIHNvbWUgY2FzZXNcbiAgICAgICAgICAgICAgICAvLyBtdWx0aXBsZSBtZWdhYnl0ZXMsIHRoaXMgd2lsbCBoZWxwIHJlZHVjZSBtZW1vcnkgdXNhZ2UuXG4gICAgICAgICAgICAgICAgZm9udC5kYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmNvbW1vbk9ianMucmVzb2x2ZShpZCwgZm9udCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkNvcHlMb2NhbEltYWdlXCI6XG4gICAgICAgICAgY29uc3QgeyBpbWFnZVJlZiB9ID0gZXhwb3J0ZWREYXRhO1xuICAgICAgICAgIGFzc2VydChpbWFnZVJlZiwgXCJUaGUgaW1hZ2VSZWYgbXVzdCBiZSBkZWZpbmVkLlwiKTtcblxuICAgICAgICAgIGZvciAoY29uc3QgcGFnZVByb3h5IG9mIHRoaXMuI3BhZ2VDYWNoZS52YWx1ZXMoKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbLCBkYXRhXSBvZiBwYWdlUHJveHkub2Jqcykge1xuICAgICAgICAgICAgICBpZiAoZGF0YT8ucmVmICE9PSBpbWFnZVJlZikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICghZGF0YS5kYXRhTGVuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5jb21tb25PYmpzLnJlc29sdmUoaWQsIHN0cnVjdHVyZWRDbG9uZShkYXRhKSk7XG4gICAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGFMZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRm9udFBhdGhcIjpcbiAgICAgICAgY2FzZSBcIkltYWdlXCI6XG4gICAgICAgIGNhc2UgXCJQYXR0ZXJuXCI6XG4gICAgICAgICAgdGhpcy5jb21tb25PYmpzLnJlc29sdmUoaWQsIGV4cG9ydGVkRGF0YSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHb3QgdW5rbm93biBjb21tb24gb2JqZWN0IHR5cGUgJHt0eXBlfWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwib2JqXCIsIChbaWQsIHBhZ2VJbmRleCwgdHlwZSwgaW1hZ2VEYXRhXSkgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIC8vIElnbm9yZSBhbnkgcGVuZGluZyByZXF1ZXN0cyBpZiB0aGUgd29ya2VyIHdhcyB0ZXJtaW5hdGVkLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhZ2VQcm94eSA9IHRoaXMuI3BhZ2VDYWNoZS5nZXQocGFnZUluZGV4KTtcbiAgICAgIGlmIChwYWdlUHJveHkub2Jqcy5oYXMoaWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIERvbid0IHN0b3JlIGRhdGEgKmFmdGVyKiBjbGVhbnVwIGhhcyBzdWNjZXNzZnVsbHkgcnVuLCBzZWUgYnVnIDE4NTQxNDUuXG4gICAgICBpZiAocGFnZVByb3h5Ll9pbnRlbnRTdGF0ZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICBpbWFnZURhdGE/LmJpdG1hcD8uY2xvc2UoKTsgLy8gUmVsZWFzZSBhbnkgYEltYWdlQml0bWFwYCBkYXRhLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwiSW1hZ2VcIjpcbiAgICAgICAgY2FzZSBcIlBhdHRlcm5cIjpcbiAgICAgICAgICBwYWdlUHJveHkub2Jqcy5yZXNvbHZlKGlkLCBpbWFnZURhdGEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVua25vd24gb2JqZWN0IHR5cGUgJHt0eXBlfWApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJEb2NQcm9ncmVzc1wiLCBkYXRhID0+IHtcbiAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICByZXR1cm47IC8vIElnbm9yZSBhbnkgcGVuZGluZyByZXF1ZXN0cyBpZiB0aGUgd29ya2VyIHdhcyB0ZXJtaW5hdGVkLlxuICAgICAgfVxuICAgICAgbG9hZGluZ1Rhc2sub25Qcm9ncmVzcz8uKHtcbiAgICAgICAgbG9hZGVkOiBkYXRhLmxvYWRlZCxcbiAgICAgICAgdG90YWw6IGRhdGEudG90YWwsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiRmV0Y2hCaW5hcnlEYXRhXCIsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQ6IEZldGNoQmluYXJ5RGF0YVwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXb3JrZXIgd2FzIGRlc3Ryb3llZC5cIik7XG4gICAgICB9XG4gICAgICBjb25zdCBmYWN0b3J5ID0gdGhpc1tkYXRhLnR5cGVdO1xuXG4gICAgICBpZiAoIWZhY3RvcnkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGAke2RhdGEudHlwZX0gbm90IGluaXRpYWxpemVkLCBzZWUgdGhlIFxcYHVzZVdvcmtlckZldGNoXFxgIHBhcmFtZXRlci5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFjdG9yeS5mZXRjaChkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldERhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0RGF0YVwiLCBudWxsKTtcbiAgfVxuXG4gIHNhdmVEb2N1bWVudCgpIHtcbiAgICBpZiAodGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zaXplIDw9IDApIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIFwic2F2ZURvY3VtZW50IGNhbGxlZCB3aGlsZSBgYW5ub3RhdGlvblN0b3JhZ2VgIGlzIGVtcHR5LCBcIiArXG4gICAgICAgICAgXCJwbGVhc2UgdXNlIHRoZSBnZXREYXRhLW1ldGhvZCBpbnN0ZWFkLlwiXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB7IG1hcCwgdHJhbnNmZXIgfSA9IHRoaXMuYW5ub3RhdGlvblN0b3JhZ2Uuc2VyaWFsaXphYmxlO1xuXG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXJcbiAgICAgIC5zZW5kV2l0aFByb21pc2UoXG4gICAgICAgIFwiU2F2ZURvY3VtZW50XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpc1B1cmVYZmE6ICEhdGhpcy5faHRtbEZvclhmYSxcbiAgICAgICAgICBudW1QYWdlczogdGhpcy5fbnVtUGFnZXMsXG4gICAgICAgICAgYW5ub3RhdGlvblN0b3JhZ2U6IG1hcCxcbiAgICAgICAgICBmaWxlbmFtZTogdGhpcy5fZnVsbFJlYWRlcj8uZmlsZW5hbWUgPz8gbnVsbCxcbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNmZXJcbiAgICAgIClcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5yZXNldE1vZGlmaWVkKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGdldFBhZ2UocGFnZU51bWJlcikge1xuICAgIGlmIChcbiAgICAgICFOdW1iZXIuaXNJbnRlZ2VyKHBhZ2VOdW1iZXIpIHx8XG4gICAgICBwYWdlTnVtYmVyIDw9IDAgfHxcbiAgICAgIHBhZ2VOdW1iZXIgPiB0aGlzLl9udW1QYWdlc1xuICAgICkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgcGFnZSByZXF1ZXN0LlwiKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFnZUluZGV4ID0gcGFnZU51bWJlciAtIDEsXG4gICAgICBjYWNoZWRQcm9taXNlID0gdGhpcy4jcGFnZVByb21pc2VzLmdldChwYWdlSW5kZXgpO1xuICAgIGlmIChjYWNoZWRQcm9taXNlKSB7XG4gICAgICByZXR1cm4gY2FjaGVkUHJvbWlzZTtcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMubWVzc2FnZUhhbmRsZXJcbiAgICAgIC5zZW5kV2l0aFByb21pc2UoXCJHZXRQYWdlXCIsIHtcbiAgICAgICAgcGFnZUluZGV4LFxuICAgICAgfSlcbiAgICAgIC50aGVuKHBhZ2VJbmZvID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNwb3J0IGRlc3Ryb3llZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZUluZm8ucmVmU3RyKSB7XG4gICAgICAgICAgdGhpcy4jcGFnZVJlZkNhY2hlLnNldChwYWdlSW5mby5yZWZTdHIsIHBhZ2VOdW1iZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFnZSA9IG5ldyBQREZQYWdlUHJveHkoXG4gICAgICAgICAgcGFnZUluZGV4LFxuICAgICAgICAgIHBhZ2VJbmZvLFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgdGhpcy5fcGFyYW1zLnBkZkJ1Z1xuICAgICAgICApO1xuICAgICAgICB0aGlzLiNwYWdlQ2FjaGUuc2V0KHBhZ2VJbmRleCwgcGFnZSk7XG4gICAgICAgIHJldHVybiBwYWdlO1xuICAgICAgfSk7XG4gICAgdGhpcy4jcGFnZVByb21pc2VzLnNldChwYWdlSW5kZXgsIHByb21pc2UpO1xuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgZ2V0UGFnZUluZGV4KHJlZikge1xuICAgIGlmICghaXNSZWZQcm94eShyZWYpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiSW52YWxpZCBwYWdlSW5kZXggcmVxdWVzdC5cIikpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRQYWdlSW5kZXhcIiwge1xuICAgICAgbnVtOiByZWYubnVtLFxuICAgICAgZ2VuOiByZWYuZ2VuLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0QW5ub3RhdGlvbnMocGFnZUluZGV4LCBpbnRlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRBbm5vdGF0aW9uc1wiLCB7XG4gICAgICBwYWdlSW5kZXgsXG4gICAgICBpbnRlbnQsXG4gICAgfSk7XG4gIH1cblxuICBnZXRGaWVsZE9iamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2NhY2hlU2ltcGxlTWV0aG9kKFwiR2V0RmllbGRPYmplY3RzXCIpO1xuICB9XG5cbiAgaGFzSlNBY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLiNjYWNoZVNpbXBsZU1ldGhvZChcIkhhc0pTQWN0aW9uc1wiKTtcbiAgfVxuXG4gIGdldENhbGN1bGF0aW9uT3JkZXJJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0Q2FsY3VsYXRpb25PcmRlcklkc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldERlc3RpbmF0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXREZXN0aW5hdGlvbnNcIiwgbnVsbCk7XG4gIH1cblxuICBnZXREZXN0aW5hdGlvbihpZCkge1xuICAgIGlmICh0eXBlb2YgaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIGRlc3RpbmF0aW9uIHJlcXVlc3QuXCIpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0RGVzdGluYXRpb25cIiwge1xuICAgICAgaWQsXG4gICAgfSk7XG4gIH1cblxuICBnZXRQYWdlTGFiZWxzKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldFBhZ2VMYWJlbHNcIiwgbnVsbCk7XG4gIH1cblxuICBnZXRQYWdlTGF5b3V0KCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldFBhZ2VMYXlvdXRcIiwgbnVsbCk7XG4gIH1cblxuICBnZXRQYWdlTW9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRQYWdlTW9kZVwiLCBudWxsKTtcbiAgfVxuXG4gIGdldFZpZXdlclByZWZlcmVuY2VzKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldFZpZXdlclByZWZlcmVuY2VzXCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0T3BlbkFjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRPcGVuQWN0aW9uXCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0QXR0YWNobWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0QXR0YWNobWVudHNcIiwgbnVsbCk7XG4gIH1cblxuICBnZXREb2NKU0FjdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2NhY2hlU2ltcGxlTWV0aG9kKFwiR2V0RG9jSlNBY3Rpb25zXCIpO1xuICB9XG5cbiAgZ2V0UGFnZUpTQWN0aW9ucyhwYWdlSW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRQYWdlSlNBY3Rpb25zXCIsIHtcbiAgICAgIHBhZ2VJbmRleCxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFN0cnVjdFRyZWUocGFnZUluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0U3RydWN0VHJlZVwiLCB7XG4gICAgICBwYWdlSW5kZXgsXG4gICAgfSk7XG4gIH1cblxuICBnZXRPdXRsaW5lKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldE91dGxpbmVcIiwgbnVsbCk7XG4gIH1cblxuICBnZXRPcHRpb25hbENvbnRlbnRDb25maWcocmVuZGVyaW5nSW50ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuI2NhY2hlU2ltcGxlTWV0aG9kKFwiR2V0T3B0aW9uYWxDb250ZW50Q29uZmlnXCIpLnRoZW4oXG4gICAgICBkYXRhID0+IG5ldyBPcHRpb25hbENvbnRlbnRDb25maWcoZGF0YSwgcmVuZGVyaW5nSW50ZW50KVxuICAgICk7XG4gIH1cblxuICBnZXRQZXJtaXNzaW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRQZXJtaXNzaW9uc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldE1ldGFkYXRhKCkge1xuICAgIGNvbnN0IG5hbWUgPSBcIkdldE1ldGFkYXRhXCIsXG4gICAgICBjYWNoZWRQcm9taXNlID0gdGhpcy4jbWV0aG9kUHJvbWlzZXMuZ2V0KG5hbWUpO1xuICAgIGlmIChjYWNoZWRQcm9taXNlKSB7XG4gICAgICByZXR1cm4gY2FjaGVkUHJvbWlzZTtcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMubWVzc2FnZUhhbmRsZXJcbiAgICAgIC5zZW5kV2l0aFByb21pc2UobmFtZSwgbnVsbClcbiAgICAgIC50aGVuKHJlc3VsdHMgPT4gKHtcbiAgICAgICAgaW5mbzogcmVzdWx0c1swXSxcbiAgICAgICAgbWV0YWRhdGE6IHJlc3VsdHNbMV0gPyBuZXcgTWV0YWRhdGEocmVzdWx0c1sxXSkgOiBudWxsLFxuICAgICAgICBjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZTogdGhpcy5fZnVsbFJlYWRlcj8uZmlsZW5hbWUgPz8gbnVsbCxcbiAgICAgICAgY29udGVudExlbmd0aDogdGhpcy5fZnVsbFJlYWRlcj8uY29udGVudExlbmd0aCA/PyBudWxsLFxuICAgICAgfSkpO1xuICAgIHRoaXMuI21ldGhvZFByb21pc2VzLnNldChuYW1lLCBwcm9taXNlKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIGdldE1hcmtJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldE1hcmtJbmZvXCIsIG51bGwpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnRDbGVhbnVwKGtlZXBMb2FkZWRGb250cyA9IGZhbHNlKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47IC8vIE5vIG5lZWQgdG8gbWFudWFsbHkgY2xlYW4tdXAgd2hlbiBkZXN0cnVjdGlvbiBoYXMgc3RhcnRlZC5cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJDbGVhbnVwXCIsIG51bGwpO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHRoaXMuI3BhZ2VDYWNoZS52YWx1ZXMoKSkge1xuICAgICAgY29uc3QgY2xlYW51cFN1Y2Nlc3NmdWwgPSBwYWdlLmNsZWFudXAoKTtcblxuICAgICAgaWYgKCFjbGVhbnVwU3VjY2Vzc2Z1bCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYHN0YXJ0Q2xlYW51cDogUGFnZSAke3BhZ2UucGFnZU51bWJlcn0gaXMgY3VycmVudGx5IHJlbmRlcmluZy5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY29tbW9uT2Jqcy5jbGVhcigpO1xuICAgIGlmICgha2VlcExvYWRlZEZvbnRzKSB7XG4gICAgICB0aGlzLmZvbnRMb2FkZXIuY2xlYXIoKTtcbiAgICB9XG4gICAgdGhpcy4jbWV0aG9kUHJvbWlzZXMuY2xlYXIoKTtcbiAgICB0aGlzLmZpbHRlckZhY3RvcnkuZGVzdHJveSgvKiBrZWVwSENNID0gKi8gdHJ1ZSk7XG4gICAgVGV4dExheWVyLmNsZWFudXAoKTtcbiAgfVxuXG4gIGNhY2hlZFBhZ2VOdW1iZXIocmVmKSB7XG4gICAgaWYgKCFpc1JlZlByb3h5KHJlZikpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZWZTdHIgPSByZWYuZ2VuID09PSAwID8gYCR7cmVmLm51bX1SYCA6IGAke3JlZi5udW19UiR7cmVmLmdlbn1gO1xuICAgIHJldHVybiB0aGlzLiNwYWdlUmVmQ2FjaGUuZ2V0KHJlZlN0cikgPz8gbnVsbDtcbiAgfVxufVxuXG5jb25zdCBJTklUSUFMX0RBVEEgPSBTeW1ib2woXCJJTklUSUFMX0RBVEFcIik7XG5cbi8qKlxuICogQSBQREYgZG9jdW1lbnQgYW5kIHBhZ2UgaXMgYnVpbHQgb2YgbWFueSBvYmplY3RzLiBFLmcuIHRoZXJlIGFyZSBvYmplY3RzIGZvclxuICogZm9udHMsIGltYWdlcywgcmVuZGVyaW5nIGNvZGUsIGV0Yy4gVGhlc2Ugb2JqZWN0cyBtYXkgZ2V0IHByb2Nlc3NlZCBpbnNpZGUgb2ZcbiAqIGEgd29ya2VyLiBUaGlzIGNsYXNzIGltcGxlbWVudHMgc29tZSBiYXNpYyBtZXRob2RzIHRvIG1hbmFnZSB0aGVzZSBvYmplY3RzLlxuICovXG5jbGFzcyBQREZPYmplY3RzIHtcbiAgI29ianMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIC8qKlxuICAgKiBFbnN1cmVzIHRoZXJlIGlzIGFuIG9iamVjdCBkZWZpbmVkIGZvciBgb2JqSWRgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqSWRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gICNlbnN1cmVPYmoob2JqSWQpIHtcbiAgICByZXR1cm4gKHRoaXMuI29ianNbb2JqSWRdIHx8PSB7XG4gICAgICAuLi5Qcm9taXNlLndpdGhSZXNvbHZlcnMoKSxcbiAgICAgIGRhdGE6IElOSVRJQUxfREFUQSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBjYWxsZWQgKndpdGhvdXQqIGNhbGxiYWNrLCB0aGlzIHJldHVybnMgdGhlIGRhdGEgb2YgYG9iaklkYCBidXQgdGhlXG4gICAqIG9iamVjdCBuZWVkcyB0byBiZSByZXNvbHZlZC4gSWYgaXQgaXNuJ3QsIHRoaXMgbWV0aG9kIHRocm93cy5cbiAgICpcbiAgICogSWYgY2FsbGVkICp3aXRoKiBhIGNhbGxiYWNrLCB0aGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdpdGggdGhlIGRhdGEgb2YgdGhlXG4gICAqIG9iamVjdCBvbmNlIHRoZSBvYmplY3QgaXMgcmVzb2x2ZWQuIFRoYXQgbWVhbnMsIGlmIHlvdSBjYWxsIHRoaXMgbWV0aG9kXG4gICAqIGFuZCB0aGUgb2JqZWN0IGlzIGFscmVhZHkgcmVzb2x2ZWQsIHRoZSBjYWxsYmFjayBnZXRzIGNhbGxlZCByaWdodCBhd2F5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqSWRcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgKiBAcmV0dXJucyB7YW55fVxuICAgKi9cbiAgZ2V0KG9iaklkLCBjYWxsYmFjayA9IG51bGwpIHtcbiAgICAvLyBJZiB0aGVyZSBpcyBhIGNhbGxiYWNrLCB0aGVuIHRoZSBnZXQgY2FuIGJlIGFzeW5jIGFuZCB0aGUgb2JqZWN0IGlzXG4gICAgLy8gbm90IHJlcXVpcmVkIHRvIGJlIHJlc29sdmVkIHJpZ2h0IG5vdy5cbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IG9iaiA9IHRoaXMuI2Vuc3VyZU9iaihvYmpJZCk7XG4gICAgICBvYmoucHJvbWlzZS50aGVuKCgpID0+IGNhbGxiYWNrKG9iai5kYXRhKSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gSWYgdGhlcmUgaXNuJ3QgYSBjYWxsYmFjaywgdGhlIHVzZXIgZXhwZWN0cyB0byBnZXQgdGhlIHJlc29sdmVkIGRhdGFcbiAgICAvLyBkaXJlY3RseS5cbiAgICBjb25zdCBvYmogPSB0aGlzLiNvYmpzW29iaklkXTtcbiAgICAvLyBJZiB0aGVyZSBpc24ndCBhbiBvYmplY3QgeWV0IG9yIHRoZSBvYmplY3QgaXNuJ3QgcmVzb2x2ZWQsIHRoZW4gdGhlXG4gICAgLy8gZGF0YSBpc24ndCByZWFkeSB5ZXQhXG4gICAgaWYgKCFvYmogfHwgb2JqLmRhdGEgPT09IElOSVRJQUxfREFUQSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXF1ZXN0aW5nIG9iamVjdCB0aGF0IGlzbid0IHJlc29sdmVkIHlldCAke29iaklkfS5gKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iai5kYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmpJZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGhhcyhvYmpJZCkge1xuICAgIGNvbnN0IG9iaiA9IHRoaXMuI29ianNbb2JqSWRdO1xuICAgIHJldHVybiAhIW9iaiAmJiBvYmouZGF0YSAhPT0gSU5JVElBTF9EQVRBO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmpJZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGRlbGV0ZShvYmpJZCkge1xuICAgIGNvbnN0IG9iaiA9IHRoaXMuI29ianNbb2JqSWRdO1xuICAgIGlmICghb2JqIHx8IG9iai5kYXRhID09PSBJTklUSUFMX0RBVEEpIHtcbiAgICAgIC8vIE9ubHkgYWxsb3cgcmVtb3ZpbmcgdGhlIG9iamVjdCAqYWZ0ZXIqIGl0J3MgYmVlbiByZXNvbHZlZC5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZGVsZXRlIHRoaXMuI29ianNbb2JqSWRdO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmVzIHRoZSBvYmplY3QgYG9iaklkYCB3aXRoIG9wdGlvbmFsIGBkYXRhYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9iaklkXG4gICAqIEBwYXJhbSB7YW55fSBbZGF0YV1cbiAgICovXG4gIHJlc29sdmUob2JqSWQsIGRhdGEgPSBudWxsKSB7XG4gICAgY29uc3Qgb2JqID0gdGhpcy4jZW5zdXJlT2JqKG9iaklkKTtcbiAgICBvYmouZGF0YSA9IGRhdGE7XG4gICAgb2JqLnJlc29sdmUoKTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIGZvciAoY29uc3Qgb2JqSWQgaW4gdGhpcy4jb2Jqcykge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzLiNvYmpzW29iaklkXTtcbiAgICAgIGRhdGE/LmJpdG1hcD8uY2xvc2UoKTsgLy8gUmVsZWFzZSBhbnkgYEltYWdlQml0bWFwYCBkYXRhLlxuICAgIH1cbiAgICB0aGlzLiNvYmpzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuXG4gICpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICBmb3IgKGNvbnN0IG9iaklkIGluIHRoaXMuI29ianMpIHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcy4jb2Jqc1tvYmpJZF07XG5cbiAgICAgIGlmIChkYXRhID09PSBJTklUSUFMX0RBVEEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB5aWVsZCBbb2JqSWQsIGRhdGFdO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFsbG93cyBjb250cm9sbGluZyBvZiB0aGUgcmVuZGVyaW5nIHRhc2tzLlxuICovXG5jbGFzcyBSZW5kZXJUYXNrIHtcbiAgI2ludGVybmFsUmVuZGVyVGFzayA9IG51bGw7XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZvciBpbmNyZW1lbnRhbCByZW5kZXJpbmcgLS0gYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkXG4gICAqIGVhY2ggdGltZSB0aGUgcmVuZGVyaW5nIGlzIHBhdXNlZC4gIFRvIGNvbnRpbnVlIHJlbmRlcmluZyBjYWxsIHRoZVxuICAgKiBmdW5jdGlvbiB0aGF0IGlzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgY2FsbGJhY2suXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIG9uQ29udGludWUgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBzeW5jaHJvbm91c2x5IGNhbGxlZCB3aGVuIHRoZSByZW5kZXJpbmcgdGFza3NcbiAgICogZmluaXNoZXMgd2l0aCBhbiBlcnJvciAoZWl0aGVyIGJlY2F1c2Ugb2YgYW4gYWN0dWFsIGVycm9yLCBvciBiZWNhdXNlIHRoZVxuICAgKiByZW5kZXJpbmcgaXMgY2FuY2VsbGVkKS5cbiAgICpcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKiBAcGFyYW0ge0Vycm9yfSBlcnJvclxuICAgKi9cbiAgb25FcnJvciA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoaW50ZXJuYWxSZW5kZXJUYXNrKSB7XG4gICAgdGhpcy4jaW50ZXJuYWxSZW5kZXJUYXNrID0gaW50ZXJuYWxSZW5kZXJUYXNrO1xuXG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkge1xuICAgICAgLy8gRm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRPcGVyYXRvckxpc3RcIiwge1xuICAgICAgICB2YWx1ZTogKCkgPT4gdGhpcy4jaW50ZXJuYWxSZW5kZXJUYXNrLm9wZXJhdG9yTGlzdCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9taXNlIGZvciByZW5kZXJpbmcgdGFzayBjb21wbGV0aW9uLlxuICAgKiBAdHlwZSB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGdldCBwcm9taXNlKCkge1xuICAgIHJldHVybiB0aGlzLiNpbnRlcm5hbFJlbmRlclRhc2suY2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgdGhlIHJlbmRlcmluZyB0YXNrLiBJZiB0aGUgdGFzayBpcyBjdXJyZW50bHkgcmVuZGVyaW5nIGl0IHdpbGxcbiAgICogbm90IGJlIGNhbmNlbGxlZCB1bnRpbCBncmFwaGljcyBwYXVzZXMgd2l0aCBhIHRpbWVvdXQuIFRoZSBwcm9taXNlIHRoYXRcbiAgICogdGhpcyBvYmplY3QgZXh0ZW5kcyB3aWxsIGJlIHJlamVjdGVkIHdoZW4gY2FuY2VsbGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2V4dHJhRGVsYXldXG4gICAqL1xuICBjYW5jZWwoZXh0cmFEZWxheSA9IDApIHtcbiAgICB0aGlzLiNpbnRlcm5hbFJlbmRlclRhc2suY2FuY2VsKC8qIGVycm9yID0gKi8gbnVsbCwgZXh0cmFEZWxheSk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciBmb3JtIGZpZWxkcyBhcmUgcmVuZGVyZWQgc2VwYXJhdGVseSBmcm9tIHRoZSBtYWluIG9wZXJhdG9yTGlzdC5cbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgc2VwYXJhdGVBbm5vdHMoKSB7XG4gICAgY29uc3QgeyBzZXBhcmF0ZUFubm90cyB9ID0gdGhpcy4jaW50ZXJuYWxSZW5kZXJUYXNrLm9wZXJhdG9yTGlzdDtcbiAgICBpZiAoIXNlcGFyYXRlQW5ub3RzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHsgYW5ub3RhdGlvbkNhbnZhc01hcCB9ID0gdGhpcy4jaW50ZXJuYWxSZW5kZXJUYXNrO1xuICAgIHJldHVybiAoXG4gICAgICBzZXBhcmF0ZUFubm90cy5mb3JtIHx8XG4gICAgICAoc2VwYXJhdGVBbm5vdHMuY2FudmFzICYmIGFubm90YXRpb25DYW52YXNNYXA/LnNpemUgPiAwKVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIEludGVybmFsUmVuZGVyVGFzayB7XG4gICNyQUYgPSBudWxsO1xuXG4gIHN0YXRpYyAjY2FudmFzSW5Vc2UgPSBuZXcgV2Vha1NldCgpO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBjYWxsYmFjayxcbiAgICBwYXJhbXMsXG4gICAgb2JqcyxcbiAgICBjb21tb25PYmpzLFxuICAgIGFubm90YXRpb25DYW52YXNNYXAsXG4gICAgb3BlcmF0b3JMaXN0LFxuICAgIHBhZ2VJbmRleCxcbiAgICBjYW52YXNGYWN0b3J5LFxuICAgIGZpbHRlckZhY3RvcnksXG4gICAgdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZmFsc2UsXG4gICAgcGRmQnVnID0gZmFsc2UsXG4gICAgcGFnZUNvbG9ycyA9IG51bGwsXG4gIH0pIHtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5vYmpzID0gb2JqcztcbiAgICB0aGlzLmNvbW1vbk9ianMgPSBjb21tb25PYmpzO1xuICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcCA9IGFubm90YXRpb25DYW52YXNNYXA7XG4gICAgdGhpcy5vcGVyYXRvckxpc3RJZHggPSBudWxsO1xuICAgIHRoaXMub3BlcmF0b3JMaXN0ID0gb3BlcmF0b3JMaXN0O1xuICAgIHRoaXMuX3BhZ2VJbmRleCA9IHBhZ2VJbmRleDtcbiAgICB0aGlzLmNhbnZhc0ZhY3RvcnkgPSBjYW52YXNGYWN0b3J5O1xuICAgIHRoaXMuZmlsdGVyRmFjdG9yeSA9IGZpbHRlckZhY3Rvcnk7XG4gICAgdGhpcy5fcGRmQnVnID0gcGRmQnVnO1xuICAgIHRoaXMucGFnZUNvbG9ycyA9IHBhZ2VDb2xvcnM7XG5cbiAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICB0aGlzLmdyYXBoaWNzUmVhZHlDYWxsYmFjayA9IG51bGw7XG4gICAgdGhpcy5ncmFwaGljc1JlYWR5ID0gZmFsc2U7XG4gICAgdGhpcy5fdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lID1cbiAgICAgIHVzZVJlcXVlc3RBbmltYXRpb25GcmFtZSA9PT0gdHJ1ZSAmJiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xuICAgIHRoaXMuY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgdGhpcy5jYXBhYmlsaXR5ID0gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG4gICAgdGhpcy50YXNrID0gbmV3IFJlbmRlclRhc2sodGhpcyk7XG4gICAgLy8gY2FjaGluZyB0aGlzLWJvdW5kIG1ldGhvZHNcbiAgICB0aGlzLl9jYW5jZWxCb3VuZCA9IHRoaXMuY2FuY2VsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY29udGludWVCb3VuZCA9IHRoaXMuX2NvbnRpbnVlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fc2NoZWR1bGVOZXh0Qm91bmQgPSB0aGlzLl9zY2hlZHVsZU5leHQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9uZXh0Qm91bmQgPSB0aGlzLl9uZXh0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY2FudmFzID0gcGFyYW1zLmNhbnZhc0NvbnRleHQuY2FudmFzO1xuICB9XG5cbiAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jYXBhYmlsaXR5LnByb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgLy8gSWdub3JpbmcgZXJyb3JzLCBzaW5jZSB3ZSBvbmx5IHdhbnQgdG8ga25vdyB3aGVuIHJlbmRlcmluZyBpc1xuICAgICAgLy8gbm8gbG9uZ2VyIHBlbmRpbmcuXG4gICAgfSk7XG4gIH1cblxuICBpbml0aWFsaXplR3JhcGhpY3MoeyB0cmFuc3BhcmVuY3kgPSBmYWxzZSwgb3B0aW9uYWxDb250ZW50Q29uZmlnIH0pIHtcbiAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2NhbnZhcykge1xuICAgICAgaWYgKEludGVybmFsUmVuZGVyVGFzay4jY2FudmFzSW5Vc2UuaGFzKHRoaXMuX2NhbnZhcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiQ2Fubm90IHVzZSB0aGUgc2FtZSBjYW52YXMgZHVyaW5nIG11bHRpcGxlIHJlbmRlcigpIG9wZXJhdGlvbnMuIFwiICtcbiAgICAgICAgICAgIFwiVXNlIGRpZmZlcmVudCBjYW52YXMgb3IgZW5zdXJlIHByZXZpb3VzIG9wZXJhdGlvbnMgd2VyZSBcIiArXG4gICAgICAgICAgICBcImNhbmNlbGxlZCBvciBjb21wbGV0ZWQuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIEludGVybmFsUmVuZGVyVGFzay4jY2FudmFzSW5Vc2UuYWRkKHRoaXMuX2NhbnZhcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BkZkJ1ZyAmJiBnbG9iYWxUaGlzLlN0ZXBwZXJNYW5hZ2VyPy5lbmFibGVkKSB7XG4gICAgICB0aGlzLnN0ZXBwZXIgPSBnbG9iYWxUaGlzLlN0ZXBwZXJNYW5hZ2VyLmNyZWF0ZSh0aGlzLl9wYWdlSW5kZXgpO1xuICAgICAgdGhpcy5zdGVwcGVyLmluaXQodGhpcy5vcGVyYXRvckxpc3QpO1xuICAgICAgdGhpcy5zdGVwcGVyLm5leHRCcmVha1BvaW50ID0gdGhpcy5zdGVwcGVyLmdldE5leHRCcmVha1BvaW50KCk7XG4gICAgfVxuICAgIGNvbnN0IHsgY2FudmFzQ29udGV4dCwgdmlld3BvcnQsIHRyYW5zZm9ybSwgYmFja2dyb3VuZCB9ID0gdGhpcy5wYXJhbXM7XG5cbiAgICB0aGlzLmdmeCA9IG5ldyBDYW52YXNHcmFwaGljcyhcbiAgICAgIGNhbnZhc0NvbnRleHQsXG4gICAgICB0aGlzLmNvbW1vbk9ianMsXG4gICAgICB0aGlzLm9ianMsXG4gICAgICB0aGlzLmNhbnZhc0ZhY3RvcnksXG4gICAgICB0aGlzLmZpbHRlckZhY3RvcnksXG4gICAgICB7IG9wdGlvbmFsQ29udGVudENvbmZpZyB9LFxuICAgICAgdGhpcy5hbm5vdGF0aW9uQ2FudmFzTWFwLFxuICAgICAgdGhpcy5wYWdlQ29sb3JzXG4gICAgKTtcbiAgICB0aGlzLmdmeC5iZWdpbkRyYXdpbmcoe1xuICAgICAgdHJhbnNmb3JtLFxuICAgICAgdmlld3BvcnQsXG4gICAgICB0cmFuc3BhcmVuY3ksXG4gICAgICBiYWNrZ3JvdW5kLFxuICAgIH0pO1xuICAgIHRoaXMub3BlcmF0b3JMaXN0SWR4ID0gMDtcbiAgICB0aGlzLmdyYXBoaWNzUmVhZHkgPSB0cnVlO1xuICAgIHRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrPy4oKTtcbiAgfVxuXG4gIGNhbmNlbChlcnJvciA9IG51bGwsIGV4dHJhRGVsYXkgPSAwKSB7XG4gICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxsZWQgPSB0cnVlO1xuICAgIHRoaXMuZ2Z4Py5lbmREcmF3aW5nKCk7XG4gICAgaWYgKHRoaXMuI3JBRikge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuI3JBRik7XG4gICAgICB0aGlzLiNyQUYgPSBudWxsO1xuICAgIH1cbiAgICBJbnRlcm5hbFJlbmRlclRhc2suI2NhbnZhc0luVXNlLmRlbGV0ZSh0aGlzLl9jYW52YXMpO1xuXG4gICAgZXJyb3IgfHw9IG5ldyBSZW5kZXJpbmdDYW5jZWxsZWRFeGNlcHRpb24oXG4gICAgICBgUmVuZGVyaW5nIGNhbmNlbGxlZCwgcGFnZSAke3RoaXMuX3BhZ2VJbmRleCArIDF9YCxcbiAgICAgIGV4dHJhRGVsYXlcbiAgICApO1xuICAgIHRoaXMuY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgdGhpcy50YXNrLm9uRXJyb3I/LihlcnJvcik7XG4gIH1cblxuICBvcGVyYXRvckxpc3RDaGFuZ2VkKCkge1xuICAgIGlmICghdGhpcy5ncmFwaGljc1JlYWR5KSB7XG4gICAgICB0aGlzLmdyYXBoaWNzUmVhZHlDYWxsYmFjayB8fD0gdGhpcy5fY29udGludWVCb3VuZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zdGVwcGVyPy51cGRhdGVPcGVyYXRvckxpc3QodGhpcy5vcGVyYXRvckxpc3QpO1xuXG4gICAgaWYgKHRoaXMucnVubmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jb250aW51ZSgpO1xuICB9XG5cbiAgX2NvbnRpbnVlKCkge1xuICAgIHRoaXMucnVubmluZyA9IHRydWU7XG4gICAgaWYgKHRoaXMuY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnRhc2sub25Db250aW51ZSkge1xuICAgICAgdGhpcy50YXNrLm9uQ29udGludWUodGhpcy5fc2NoZWR1bGVOZXh0Qm91bmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zY2hlZHVsZU5leHQoKTtcbiAgICB9XG4gIH1cblxuICBfc2NoZWR1bGVOZXh0KCkge1xuICAgIGlmICh0aGlzLl91c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHRoaXMuI3JBRiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB0aGlzLiNyQUYgPSBudWxsO1xuICAgICAgICB0aGlzLl9uZXh0Qm91bmQoKS5jYXRjaCh0aGlzLl9jYW5jZWxCb3VuZCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbih0aGlzLl9uZXh0Qm91bmQpLmNhdGNoKHRoaXMuX2NhbmNlbEJvdW5kKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfbmV4dCgpIHtcbiAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5vcGVyYXRvckxpc3RJZHggPSB0aGlzLmdmeC5leGVjdXRlT3BlcmF0b3JMaXN0KFxuICAgICAgdGhpcy5vcGVyYXRvckxpc3QsXG4gICAgICB0aGlzLm9wZXJhdG9yTGlzdElkeCxcbiAgICAgIHRoaXMuX2NvbnRpbnVlQm91bmQsXG4gICAgICB0aGlzLnN0ZXBwZXJcbiAgICApO1xuICAgIGlmICh0aGlzLm9wZXJhdG9yTGlzdElkeCA9PT0gdGhpcy5vcGVyYXRvckxpc3QuYXJnc0FycmF5Lmxlbmd0aCkge1xuICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy5vcGVyYXRvckxpc3QubGFzdENodW5rKSB7XG4gICAgICAgIHRoaXMuZ2Z4LmVuZERyYXdpbmcoKTtcbiAgICAgICAgSW50ZXJuYWxSZW5kZXJUYXNrLiNjYW52YXNJblVzZS5kZWxldGUodGhpcy5fY2FudmFzKTtcblxuICAgICAgICB0aGlzLmNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuY29uc3QgdmVyc2lvbiA9XG4gIHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiA/IFBERkpTRGV2LmV2YWwoXCJCVU5ETEVfVkVSU0lPTlwiKSA6IG51bGw7XG4vKiogQHR5cGUge3N0cmluZ30gKi9cbmNvbnN0IGJ1aWxkID1cbiAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiID8gUERGSlNEZXYuZXZhbChcIkJVTkRMRV9CVUlMRFwiKSA6IG51bGw7XG5cbmV4cG9ydCB7XG4gIGJ1aWxkLFxuICBnZXREb2N1bWVudCxcbiAgaXNWYWxpZEV4cGxpY2l0RGVzdCxcbiAgTG9vcGJhY2tQb3J0LFxuICBQREZEYXRhUmFuZ2VUcmFuc3BvcnQsXG4gIFBERkRvY3VtZW50TG9hZGluZ1Rhc2ssXG4gIFBERkRvY3VtZW50UHJveHksXG4gIFBERlBhZ2VQcm94eSxcbiAgUERGV29ya2VyLFxuICBSZW5kZXJUYXNrLFxuICB2ZXJzaW9uLFxufTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBQTEVBU0UgTk9URTogVGhpcyBmaWxlIGlzIGN1cnJlbnRseSBpbXBvcnRlZCBpbiBib3RoIHRoZSBgLi4vZGlzcGxheS9gIGFuZFxuICogICAgICAgICAgICAgIGAuLi9zY3JpcHRpbmdfYXBpL2AgZm9sZGVycywgaGVuY2UgYmUgRVhUUkVNRUxZIGNhcmVmdWwgYWJvdXRcbiAqICAgICAgICAgICAgICBpbnRyb2R1Y2luZyBhbnkgZGVwZW5kZW5jaWVzIGhlcmUgc2luY2UgdGhhdCBjYW4gbGVhZCB0byBhblxuICogICAgICAgICAgICAgIHVuZXhwZWN0ZWQvdW5uZWNlc3Nhcnkgc2l6ZSBpbmNyZWFzZSBvZiB0aGUgKmJ1aWx0KiBmaWxlcy5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlQ29sb3JDb21wKG4pIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgbikpICogMjU1KVxuICAgIC50b1N0cmluZygxNilcbiAgICAucGFkU3RhcnQoMiwgXCIwXCIpO1xufVxuXG5mdW5jdGlvbiBzY2FsZUFuZENsYW1wKHgpIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgMjU1ICogeCkpO1xufVxuXG4vLyBQREYgc3BlY2lmaWNhdGlvbnMgc2VjdGlvbiAxMC4zXG5jbGFzcyBDb2xvckNvbnZlcnRlcnMge1xuICBzdGF0aWMgQ01ZS19HKFtjLCB5LCBtLCBrXSkge1xuICAgIHJldHVybiBbXCJHXCIsIDEgLSBNYXRoLm1pbigxLCAwLjMgKiBjICsgMC41OSAqIG0gKyAwLjExICogeSArIGspXTtcbiAgfVxuXG4gIHN0YXRpYyBHX0NNWUsoW2ddKSB7XG4gICAgcmV0dXJuIFtcIkNNWUtcIiwgMCwgMCwgMCwgMSAtIGddO1xuICB9XG5cbiAgc3RhdGljIEdfUkdCKFtnXSkge1xuICAgIHJldHVybiBbXCJSR0JcIiwgZywgZywgZ107XG4gIH1cblxuICBzdGF0aWMgR19yZ2IoW2ddKSB7XG4gICAgZyA9IHNjYWxlQW5kQ2xhbXAoZyk7XG4gICAgcmV0dXJuIFtnLCBnLCBnXTtcbiAgfVxuXG4gIHN0YXRpYyBHX0hUTUwoW2ddKSB7XG4gICAgY29uc3QgRyA9IG1ha2VDb2xvckNvbXAoZyk7XG4gICAgcmV0dXJuIGAjJHtHfSR7R30ke0d9YDtcbiAgfVxuXG4gIHN0YXRpYyBSR0JfRyhbciwgZywgYl0pIHtcbiAgICByZXR1cm4gW1wiR1wiLCAwLjMgKiByICsgMC41OSAqIGcgKyAwLjExICogYl07XG4gIH1cblxuICBzdGF0aWMgUkdCX3JnYihjb2xvcikge1xuICAgIHJldHVybiBjb2xvci5tYXAoc2NhbGVBbmRDbGFtcCk7XG4gIH1cblxuICBzdGF0aWMgUkdCX0hUTUwoY29sb3IpIHtcbiAgICByZXR1cm4gYCMke2NvbG9yLm1hcChtYWtlQ29sb3JDb21wKS5qb2luKFwiXCIpfWA7XG4gIH1cblxuICBzdGF0aWMgVF9IVE1MKCkge1xuICAgIHJldHVybiBcIiMwMDAwMDAwMFwiO1xuICB9XG5cbiAgc3RhdGljIFRfcmdiKCkge1xuICAgIHJldHVybiBbbnVsbF07XG4gIH1cblxuICBzdGF0aWMgQ01ZS19SR0IoW2MsIHksIG0sIGtdKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIFwiUkdCXCIsXG4gICAgICAxIC0gTWF0aC5taW4oMSwgYyArIGspLFxuICAgICAgMSAtIE1hdGgubWluKDEsIG0gKyBrKSxcbiAgICAgIDEgLSBNYXRoLm1pbigxLCB5ICsgayksXG4gICAgXTtcbiAgfVxuXG4gIHN0YXRpYyBDTVlLX3JnYihbYywgeSwgbSwga10pIHtcbiAgICByZXR1cm4gW1xuICAgICAgc2NhbGVBbmRDbGFtcCgxIC0gTWF0aC5taW4oMSwgYyArIGspKSxcbiAgICAgIHNjYWxlQW5kQ2xhbXAoMSAtIE1hdGgubWluKDEsIG0gKyBrKSksXG4gICAgICBzY2FsZUFuZENsYW1wKDEgLSBNYXRoLm1pbigxLCB5ICsgaykpLFxuICAgIF07XG4gIH1cblxuICBzdGF0aWMgQ01ZS19IVE1MKGNvbXBvbmVudHMpIHtcbiAgICBjb25zdCByZ2IgPSB0aGlzLkNNWUtfUkdCKGNvbXBvbmVudHMpLnNsaWNlKDEpO1xuICAgIHJldHVybiB0aGlzLlJHQl9IVE1MKHJnYik7XG4gIH1cblxuICBzdGF0aWMgUkdCX0NNWUsoW3IsIGcsIGJdKSB7XG4gICAgY29uc3QgYyA9IDEgLSByO1xuICAgIGNvbnN0IG0gPSAxIC0gZztcbiAgICBjb25zdCB5ID0gMSAtIGI7XG4gICAgY29uc3QgayA9IE1hdGgubWluKGMsIG0sIHkpO1xuICAgIHJldHVybiBbXCJDTVlLXCIsIGMsIG0sIHksIGtdO1xuICB9XG59XG5cbmV4cG9ydCB7IENvbG9yQ29udmVydGVycyB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDE1IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTVkdfTlMgfSBmcm9tIFwiLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5pbXBvcnQgeyB1bnJlYWNoYWJsZSB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG5jbGFzcyBCYXNlU1ZHRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmIChcbiAgICAgICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpICYmXG4gICAgICB0aGlzLmNvbnN0cnVjdG9yID09PSBCYXNlU1ZHRmFjdG9yeVxuICAgICkge1xuICAgICAgdW5yZWFjaGFibGUoXCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlU1ZHRmFjdG9yeS5cIik7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlKHdpZHRoLCBoZWlnaHQsIHNraXBEaW1lbnNpb25zID0gZmFsc2UpIHtcbiAgICBpZiAod2lkdGggPD0gMCB8fCBoZWlnaHQgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBTVkcgZGltZW5zaW9uc1wiKTtcbiAgICB9XG4gICAgY29uc3Qgc3ZnID0gdGhpcy5fY3JlYXRlU1ZHKFwic3ZnOnN2Z1wiKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwidmVyc2lvblwiLCBcIjEuMVwiKTtcblxuICAgIGlmICghc2tpcERpbWVuc2lvbnMpIHtcbiAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBgJHt3aWR0aH1weGApO1xuICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBgJHtoZWlnaHR9cHhgKTtcbiAgICB9XG5cbiAgICBzdmcuc2V0QXR0cmlidXRlKFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcIm5vbmVcIik7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgYDAgMCAke3dpZHRofSAke2hlaWdodH1gKTtcblxuICAgIHJldHVybiBzdmc7XG4gIH1cblxuICBjcmVhdGVFbGVtZW50KHR5cGUpIHtcbiAgICBpZiAodHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgU1ZHIGVsZW1lbnQgdHlwZVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZVNWRyh0eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBfY3JlYXRlU1ZHKHR5cGUpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgX2NyZWF0ZVNWR2AgY2FsbGVkLlwiKTtcbiAgfVxufVxuXG5jbGFzcyBET01TVkdGYWN0b3J5IGV4dGVuZHMgQmFzZVNWR0ZhY3Rvcnkge1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgX2NyZWF0ZVNWRyh0eXBlKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhTVkdfTlMsIHR5cGUpO1xuICB9XG59XG5cbmV4cG9ydCB7IEJhc2VTVkdGYWN0b3J5LCBET01TVkdGYWN0b3J5IH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjEgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vYW5ub3RhdGlvbl9zdG9yYWdlXCIpLkFubm90YXRpb25TdG9yYWdlfSBBbm5vdGF0aW9uU3RvcmFnZSAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2Rpc3BsYXlfdXRpbHNcIikuUGFnZVZpZXdwb3J0fSBQYWdlVmlld3BvcnQgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vLi4vd2ViL2ludGVyZmFjZXNcIikuSVBERkxpbmtTZXJ2aWNlfSBJUERGTGlua1NlcnZpY2UgKi9cblxuaW1wb3J0IHsgWGZhVGV4dCB9IGZyb20gXCIuL3hmYV90ZXh0LmpzXCI7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gWGZhTGF5ZXJQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge1BhZ2VWaWV3cG9ydH0gdmlld3BvcnRcbiAqIEBwcm9wZXJ0eSB7SFRNTERpdkVsZW1lbnR9IGRpdlxuICogQHByb3BlcnR5IHtPYmplY3R9IHhmYUh0bWxcbiAqIEBwcm9wZXJ0eSB7QW5ub3RhdGlvblN0b3JhZ2V9IFthbm5vdGF0aW9uU3RvcmFnZV1cbiAqIEBwcm9wZXJ0eSB7SVBERkxpbmtTZXJ2aWNlfSBsaW5rU2VydmljZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtpbnRlbnRdIC0gKGRlZmF1bHQgdmFsdWUgaXMgJ2Rpc3BsYXknKS5cbiAqL1xuXG5jbGFzcyBYZmFMYXllciB7XG4gIHN0YXRpYyBzZXR1cFN0b3JhZ2UoaHRtbCwgaWQsIGVsZW1lbnQsIHN0b3JhZ2UsIGludGVudCkge1xuICAgIGNvbnN0IHN0b3JlZERhdGEgPSBzdG9yYWdlLmdldFZhbHVlKGlkLCB7IHZhbHVlOiBudWxsIH0pO1xuICAgIHN3aXRjaCAoZWxlbWVudC5uYW1lKSB7XG4gICAgICBjYXNlIFwidGV4dGFyZWFcIjpcbiAgICAgICAgaWYgKHN0b3JlZERhdGEudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICBodG1sLnRleHRDb250ZW50ID0gc3RvcmVkRGF0YS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZW50ID09PSBcInByaW50XCIpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBodG1sLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBldmVudCA9PiB7XG4gICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiaW5wdXRcIjpcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGVsZW1lbnQuYXR0cmlidXRlcy50eXBlID09PSBcInJhZGlvXCIgfHxcbiAgICAgICAgICBlbGVtZW50LmF0dHJpYnV0ZXMudHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChzdG9yZWREYXRhLnZhbHVlID09PSBlbGVtZW50LmF0dHJpYnV0ZXMueGZhT24pIHtcbiAgICAgICAgICAgIGh0bWwuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0b3JlZERhdGEudmFsdWUgPT09IGVsZW1lbnQuYXR0cmlidXRlcy54ZmFPZmYpIHtcbiAgICAgICAgICAgIC8vIFRoZSBjaGVja2VkIGF0dHJpYnV0ZSBtYXkgaGF2ZSBiZWVuIHNldCB3aGVuIG9wZW5pbmcgdGhlIGZpbGUsXG4gICAgICAgICAgICAvLyB1bnNldCB0aHJvdWdoIHRoZSBVSSBhbmQgd2UncmUgaGVyZSBiZWNhdXNlIG9mIHByaW50aW5nLlxuICAgICAgICAgICAgaHRtbC5yZW1vdmVBdHRyaWJ1dGUoXCJjaGVja2VkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW50ZW50ID09PSBcInByaW50XCIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBodG1sLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQudGFyZ2V0LmNoZWNrZWRcbiAgICAgICAgICAgICAgICA/IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ4ZmFPblwiKVxuICAgICAgICAgICAgICAgIDogZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcInhmYU9mZlwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzdG9yZWREYXRhLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBodG1sLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHN0b3JlZERhdGEudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW50ZW50ID09PSBcInByaW50XCIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBodG1sLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBldmVudCA9PiB7XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlOiBldmVudC50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwic2VsZWN0XCI6XG4gICAgICAgIGlmIChzdG9yZWREYXRhLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgaHRtbC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBzdG9yZWREYXRhLnZhbHVlKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBlbGVtZW50LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uLmF0dHJpYnV0ZXMudmFsdWUgPT09IHN0b3JlZERhdGEudmFsdWUpIHtcbiAgICAgICAgICAgICAgb3B0aW9uLmF0dHJpYnV0ZXMuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb24uYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShcInNlbGVjdGVkXCIpKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb24uYXR0cmlidXRlcy5zZWxlY3RlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaHRtbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBldmVudC50YXJnZXQub3B0aW9ucztcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9XG4gICAgICAgICAgICBvcHRpb25zLnNlbGVjdGVkSW5kZXggPT09IC0xXG4gICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICA6IG9wdGlvbnNbb3B0aW9ucy5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNldEF0dHJpYnV0ZXMoeyBodG1sLCBlbGVtZW50LCBzdG9yYWdlID0gbnVsbCwgaW50ZW50LCBsaW5rU2VydmljZSB9KSB7XG4gICAgY29uc3QgeyBhdHRyaWJ1dGVzIH0gPSBlbGVtZW50O1xuICAgIGNvbnN0IGlzSFRNTEFuY2hvckVsZW1lbnQgPSBodG1sIGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQ7XG5cbiAgICBpZiAoYXR0cmlidXRlcy50eXBlID09PSBcInJhZGlvXCIpIHtcbiAgICAgIC8vIEF2b2lkIHRvIGhhdmUgYSByYWRpbyBncm91cCB3aGVuIHByaW50aW5nIHdpdGggdGhlIHNhbWUgYXMgb25lXG4gICAgICAvLyBhbHJlYWR5IGRpc3BsYXllZC5cbiAgICAgIGF0dHJpYnV0ZXMubmFtZSA9IGAke2F0dHJpYnV0ZXMubmFtZX0tJHtpbnRlbnR9YDtcbiAgICB9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcykpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlIFwiY2xhc3NcIjpcbiAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICBodG1sLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkYXRhSWRcIjpcbiAgICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGFkZCBkYXRhSWQgaW4gdGhlIGh0bWwgb2JqZWN0IGJ1dCBpdCBjYW5cbiAgICAgICAgICAvLyBiZSB1c2VmdWwgdG8ga25vdyBpdHMgdmFsdWUgd2hlbiB3cml0aW5nIHByaW50aW5nIHRlc3RzOlxuICAgICAgICAgIC8vIGluIHRoaXMgY2FzZSwgZG9uJ3Qgc2tpcCBkYXRhSWQgdG8gaGF2ZSBpdHMgdmFsdWUuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJpZFwiOlxuICAgICAgICAgIGh0bWwuc2V0QXR0cmlidXRlKFwiZGF0YS1lbGVtZW50LWlkXCIsIHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihodG1sLnN0eWxlLCB2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0ZXh0Q29udGVudFwiOlxuICAgICAgICAgIGh0bWwudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoIWlzSFRNTEFuY2hvckVsZW1lbnQgfHwgKGtleSAhPT0gXCJocmVmXCIgJiYga2V5ICE9PSBcIm5ld1dpbmRvd1wiKSkge1xuICAgICAgICAgICAgaHRtbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0hUTUxBbmNob3JFbGVtZW50KSB7XG4gICAgICBsaW5rU2VydmljZS5hZGRMaW5rQXR0cmlidXRlcyhcbiAgICAgICAgaHRtbCxcbiAgICAgICAgYXR0cmlidXRlcy5ocmVmLFxuICAgICAgICBhdHRyaWJ1dGVzLm5ld1dpbmRvd1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIHZhbHVlIGFmdGVyIHRoZSBvdGhlcnMgdG8gYmUgc3VyZSB0byBvdmVyd3JpdGUgYW55IG90aGVyIHZhbHVlcy5cbiAgICBpZiAoc3RvcmFnZSAmJiBhdHRyaWJ1dGVzLmRhdGFJZCkge1xuICAgICAgdGhpcy5zZXR1cFN0b3JhZ2UoaHRtbCwgYXR0cmlidXRlcy5kYXRhSWQsIGVsZW1lbnQsIHN0b3JhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIFhGQSBsYXllci5cbiAgICpcbiAgICogQHBhcmFtIHtYZmFMYXllclBhcmFtZXRlcnN9IHBhcmFtZXRlcnNcbiAgICovXG4gIHN0YXRpYyByZW5kZXIocGFyYW1ldGVycykge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSBwYXJhbWV0ZXJzLmFubm90YXRpb25TdG9yYWdlO1xuICAgIGNvbnN0IGxpbmtTZXJ2aWNlID0gcGFyYW1ldGVycy5saW5rU2VydmljZTtcbiAgICBjb25zdCByb290ID0gcGFyYW1ldGVycy54ZmFIdG1sO1xuICAgIGNvbnN0IGludGVudCA9IHBhcmFtZXRlcnMuaW50ZW50IHx8IFwiZGlzcGxheVwiO1xuICAgIGNvbnN0IHJvb3RIdG1sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChyb290Lm5hbWUpO1xuICAgIGlmIChyb290LmF0dHJpYnV0ZXMpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyh7XG4gICAgICAgIGh0bWw6IHJvb3RIdG1sLFxuICAgICAgICBlbGVtZW50OiByb290LFxuICAgICAgICBpbnRlbnQsXG4gICAgICAgIGxpbmtTZXJ2aWNlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNOb3RGb3JSaWNoVGV4dCA9IGludGVudCAhPT0gXCJyaWNoVGV4dFwiO1xuICAgIGNvbnN0IHJvb3REaXYgPSBwYXJhbWV0ZXJzLmRpdjtcbiAgICByb290RGl2LmFwcGVuZChyb290SHRtbCk7XG5cbiAgICBpZiAocGFyYW1ldGVycy52aWV3cG9ydCkge1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0gYG1hdHJpeCgke3BhcmFtZXRlcnMudmlld3BvcnQudHJhbnNmb3JtLmpvaW4oXCIsXCIpfSlgO1xuICAgICAgcm9vdERpdi5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgfVxuXG4gICAgLy8gU2V0IGRlZmF1bHRzLlxuICAgIGlmIChpc05vdEZvclJpY2hUZXh0KSB7XG4gICAgICByb290RGl2LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwieGZhTGF5ZXIgeGZhRm9udFwiKTtcbiAgICB9XG5cbiAgICAvLyBUZXh0IG5vZGVzIHVzZWQgZm9yIHRoZSB0ZXh0IGhpZ2hsaWdodGVyLlxuICAgIGNvbnN0IHRleHREaXZzID0gW107XG5cbiAgICAvLyBJbiB0aGUgcmljaCB0ZXh0IGNvbnRleHQsIGl0J3MgcG9zc2libGUgdG8ganVzdCBoYXZlIGEgdGV4dCBub2RlIHdpdGhvdXRcbiAgICAvLyBhIHJvb3QgZWxlbWVudCwgc28gd2UgaGFuZGxlIHRoaXMgY2FzZSBoZXJlIChzZWUgaXNzdWUgMTcyMTUpLlxuICAgIGlmIChyb290LmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKHJvb3QudmFsdWUpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJvb3QudmFsdWUpO1xuICAgICAgICByb290SHRtbC5hcHBlbmQobm9kZSk7XG4gICAgICAgIGlmIChpc05vdEZvclJpY2hUZXh0ICYmIFhmYVRleHQuc2hvdWxkQnVpbGRUZXh0KHJvb3QubmFtZSkpIHtcbiAgICAgICAgICB0ZXh0RGl2cy5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4geyB0ZXh0RGl2cyB9O1xuICAgIH1cblxuICAgIGNvbnN0IHN0YWNrID0gW1tyb290LCAtMSwgcm9vdEh0bWxdXTtcblxuICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBbcGFyZW50LCBpLCBodG1sXSA9IHN0YWNrLmF0KC0xKTtcbiAgICAgIGlmIChpICsgMSA9PT0gcGFyZW50LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoaWxkID0gcGFyZW50LmNoaWxkcmVuWysrc3RhY2suYXQoLTEpWzFdXTtcbiAgICAgIGlmIChjaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBuYW1lIH0gPSBjaGlsZDtcbiAgICAgIGlmIChuYW1lID09PSBcIiN0ZXh0XCIpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNoaWxkLnZhbHVlKTtcbiAgICAgICAgdGV4dERpdnMucHVzaChub2RlKTtcbiAgICAgICAgaHRtbC5hcHBlbmQobm9kZSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGlsZEh0bWwgPSBjaGlsZD8uYXR0cmlidXRlcz8ueG1sbnNcbiAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoY2hpbGQuYXR0cmlidXRlcy54bWxucywgbmFtZSlcbiAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xuXG4gICAgICBodG1sLmFwcGVuZChjaGlsZEh0bWwpO1xuICAgICAgaWYgKGNoaWxkLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICBodG1sOiBjaGlsZEh0bWwsXG4gICAgICAgICAgZWxlbWVudDogY2hpbGQsXG4gICAgICAgICAgc3RvcmFnZSxcbiAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgbGlua1NlcnZpY2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hpbGQuY2hpbGRyZW4/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3RhY2sucHVzaChbY2hpbGQsIC0xLCBjaGlsZEh0bWxdKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGQudmFsdWUpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNoaWxkLnZhbHVlKTtcbiAgICAgICAgaWYgKGlzTm90Rm9yUmljaFRleHQgJiYgWGZhVGV4dC5zaG91bGRCdWlsZFRleHQobmFtZSkpIHtcbiAgICAgICAgICB0ZXh0RGl2cy5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkSHRtbC5hcHBlbmQobm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVE9ETzogcmUtZW5hYmxlIHRoYXQgc3R1ZmYgb25jZSB3ZSd2ZSBKUyBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBTZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTcxOTQ2NS5cbiAgICAgKlxuICAgICAqIGZvciAoY29uc3QgZWwgb2Ygcm9vdERpdi5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAqIFwiLnhmYURpc2FibGVkIGlucHV0LCAueGZhRGlzYWJsZWQgdGV4dGFyZWFcIlxuICAgICAqICkpIHtcbiAgICAgKiBlbC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgKiB9XG4gICAgICogZm9yIChjb25zdCBlbCBvZiByb290RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICogXCIueGZhUmVhZE9ubHkgaW5wdXQsIC54ZmFSZWFkT25seSB0ZXh0YXJlYVwiXG4gICAgICogKSkge1xuICAgICAqIGVsLnNldEF0dHJpYnV0ZShcInJlYWRPbmx5XCIsIHRydWUpO1xuICAgICAqIH1cbiAgICAgKi9cblxuICAgIGZvciAoY29uc3QgZWwgb2Ygcm9vdERpdi5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgXCIueGZhTm9uSW50ZXJhY3RpdmUgaW5wdXQsIC54ZmFOb25JbnRlcmFjdGl2ZSB0ZXh0YXJlYVwiXG4gICAgKSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFwicmVhZE9ubHlcIiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHREaXZzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBYRkEgbGF5ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7WGZhTGF5ZXJQYXJhbWV0ZXJzfSBwYXJhbWV0ZXJzXG4gICAqL1xuICBzdGF0aWMgdXBkYXRlKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBgbWF0cml4KCR7cGFyYW1ldGVycy52aWV3cG9ydC50cmFuc2Zvcm0uam9pbihcIixcIil9KWA7XG4gICAgcGFyYW1ldGVycy5kaXYuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIHBhcmFtZXRlcnMuZGl2LmhpZGRlbiA9IGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCB7IFhmYUxheWVyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTQgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9hcGlcIikuUERGUGFnZVByb3h5fSBQREZQYWdlUHJveHkgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9kaXNwbGF5X3V0aWxzXCIpLlBhZ2VWaWV3cG9ydH0gUGFnZVZpZXdwb3J0ICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi8uLi93ZWIvdGV4dF9hY2Nlc3NpYmlsaXR5LmpzXCIpLlRleHRBY2Nlc3NpYmlsaXR5TWFuYWdlcn0gVGV4dEFjY2Vzc2liaWxpdHlNYW5hZ2VyICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi8uLi93ZWIvaW50ZXJmYWNlc1wiKS5JRG93bmxvYWRNYW5hZ2VyfSBJRG93bmxvYWRNYW5hZ2VyICovXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4uLy4uL3dlYi9pbnRlcmZhY2VzXCIpLklQREZMaW5rU2VydmljZX0gSVBERkxpbmtTZXJ2aWNlICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9zcmMvZGlzcGxheS9lZGl0b3IvdG9vbHMuanNcIikuQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcn0gQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlciAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vLi4vd2ViL3N0cnVjdF90cmVlX2xheWVyX2J1aWxkZXIuanNcIikuU3RydWN0VHJlZUxheWVyQnVpbGRlcn0gU3RydWN0VHJlZUxheWVyQnVpbGRlciAqL1xuXG5pbXBvcnQge1xuICBBbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLFxuICBBbm5vdGF0aW9uRWRpdG9yVHlwZSxcbiAgQW5ub3RhdGlvblByZWZpeCxcbiAgQW5ub3RhdGlvblR5cGUsXG4gIEZlYXR1cmVUZXN0LFxuICBMSU5FX0ZBQ1RPUixcbiAgc2hhZG93LFxuICB1bnJlYWNoYWJsZSxcbiAgVXRpbCxcbiAgd2Fybixcbn0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQgeyBQREZEYXRlU3RyaW5nLCBzZXRMYXllckRpbWVuc2lvbnMgfSBmcm9tIFwiLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBBbm5vdGF0aW9uU3RvcmFnZSB9IGZyb20gXCIuL2Fubm90YXRpb25fc3RvcmFnZS5qc1wiO1xuaW1wb3J0IHsgQ29sb3JDb252ZXJ0ZXJzIH0gZnJvbSBcIi4uL3NoYXJlZC9zY3JpcHRpbmdfdXRpbHMuanNcIjtcbmltcG9ydCB7IERPTVNWR0ZhY3RvcnkgfSBmcm9tIFwiLi9zdmdfZmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgWGZhTGF5ZXIgfSBmcm9tIFwiLi94ZmFfbGF5ZXIuanNcIjtcblxuY29uc3QgREVGQVVMVF9UQUJfSU5ERVggPSAxMDAwO1xuY29uc3QgREVGQVVMVF9GT05UX1NJWkUgPSA5O1xuY29uc3QgR2V0RWxlbWVudHNCeU5hbWVTZXQgPSBuZXcgV2Vha1NldCgpO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFubm90YXRpb25FbGVtZW50UGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtPYmplY3R9IGRhdGFcbiAqIEBwcm9wZXJ0eSB7SFRNTERpdkVsZW1lbnR9IGxheWVyXG4gKiBAcHJvcGVydHkge0lQREZMaW5rU2VydmljZX0gbGlua1NlcnZpY2VcbiAqIEBwcm9wZXJ0eSB7SURvd25sb2FkTWFuYWdlcn0gW2Rvd25sb2FkTWFuYWdlcl1cbiAqIEBwcm9wZXJ0eSB7QW5ub3RhdGlvblN0b3JhZ2V9IFthbm5vdGF0aW9uU3RvcmFnZV1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbaW1hZ2VSZXNvdXJjZXNQYXRoXSAtIFBhdGggZm9yIGltYWdlIHJlc291cmNlcywgbWFpbmx5XG4gKiAgIGZvciBhbm5vdGF0aW9uIGljb25zLiBJbmNsdWRlIHRyYWlsaW5nIHNsYXNoLlxuICogQHByb3BlcnR5IHtib29sZWFufSByZW5kZXJGb3Jtc1xuICogQHByb3BlcnR5IHtPYmplY3R9IHN2Z0ZhY3RvcnlcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2VuYWJsZVNjcmlwdGluZ11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2hhc0pTQWN0aW9uc11cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbZmllbGRPYmplY3RzXVxuICovXG5cbmNsYXNzIEFubm90YXRpb25FbGVtZW50RmFjdG9yeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FbGVtZW50UGFyYW1ldGVyc30gcGFyYW1ldGVyc1xuICAgKiBAcmV0dXJucyB7QW5ub3RhdGlvbkVsZW1lbnR9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBzdWJ0eXBlID0gcGFyYW1ldGVycy5kYXRhLmFubm90YXRpb25UeXBlO1xuXG4gICAgc3dpdGNoIChzdWJ0eXBlKSB7XG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLkxJTks6XG4gICAgICAgIHJldHVybiBuZXcgTGlua0Fubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLlRFWFQ6XG4gICAgICAgIHJldHVybiBuZXcgVGV4dEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLldJREdFVDpcbiAgICAgICAgY29uc3QgZmllbGRUeXBlID0gcGFyYW1ldGVycy5kYXRhLmZpZWxkVHlwZTtcblxuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgICAgY2FzZSBcIkJ0blwiOlxuICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMuZGF0YS5yYWRpb0J1dHRvbikge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IFJhZGlvQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtZXRlcnMuZGF0YS5jaGVja0JveCkge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IENoZWNrYm94V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFB1c2hCdXR0b25XaWRnZXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcbiAgICAgICAgICBjYXNlIFwiQ2hcIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hvaWNlV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgICAgY2FzZSBcIlNpZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaWduYXR1cmVXaWRnZXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFdpZGdldEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLlBPUFVQOlxuICAgICAgICByZXR1cm4gbmV3IFBvcHVwQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuRlJFRVRFWFQ6XG4gICAgICAgIHJldHVybiBuZXcgRnJlZVRleHRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5MSU5FOlxuICAgICAgICByZXR1cm4gbmV3IExpbmVBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5TUVVBUkU6XG4gICAgICAgIHJldHVybiBuZXcgU3F1YXJlQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuQ0lSQ0xFOlxuICAgICAgICByZXR1cm4gbmV3IENpcmNsZUFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLlBPTFlMSU5FOlxuICAgICAgICByZXR1cm4gbmV3IFBvbHlsaW5lQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuQ0FSRVQ6XG4gICAgICAgIHJldHVybiBuZXcgQ2FyZXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5JTks6XG4gICAgICAgIHJldHVybiBuZXcgSW5rQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuUE9MWUdPTjpcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuSElHSExJR0hUOlxuICAgICAgICByZXR1cm4gbmV3IEhpZ2hsaWdodEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLlVOREVSTElORTpcbiAgICAgICAgcmV0dXJuIG5ldyBVbmRlcmxpbmVBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5TUVVJR0dMWTpcbiAgICAgICAgcmV0dXJuIG5ldyBTcXVpZ2dseUFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLlNUUklLRU9VVDpcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJpa2VPdXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5TVEFNUDpcbiAgICAgICAgcmV0dXJuIG5ldyBTdGFtcEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLkZJTEVBVFRBQ0hNRU5UOlxuICAgICAgICByZXR1cm4gbmV3IEZpbGVBdHRhY2htZW50QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBuZXcgQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIEFubm90YXRpb25FbGVtZW50IHtcbiAgI3VwZGF0ZXMgPSBudWxsO1xuXG4gICNoYXNCb3JkZXIgPSBmYWxzZTtcblxuICAjcG9wdXBFbGVtZW50ID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwYXJhbWV0ZXJzLFxuICAgIHtcbiAgICAgIGlzUmVuZGVyYWJsZSA9IGZhbHNlLFxuICAgICAgaWdub3JlQm9yZGVyID0gZmFsc2UsXG4gICAgICBjcmVhdGVRdWFkcmlsYXRlcmFscyA9IGZhbHNlLFxuICAgIH0gPSB7fVxuICApIHtcbiAgICB0aGlzLmlzUmVuZGVyYWJsZSA9IGlzUmVuZGVyYWJsZTtcbiAgICB0aGlzLmRhdGEgPSBwYXJhbWV0ZXJzLmRhdGE7XG4gICAgdGhpcy5sYXllciA9IHBhcmFtZXRlcnMubGF5ZXI7XG4gICAgdGhpcy5saW5rU2VydmljZSA9IHBhcmFtZXRlcnMubGlua1NlcnZpY2U7XG4gICAgdGhpcy5kb3dubG9hZE1hbmFnZXIgPSBwYXJhbWV0ZXJzLmRvd25sb2FkTWFuYWdlcjtcbiAgICB0aGlzLmltYWdlUmVzb3VyY2VzUGF0aCA9IHBhcmFtZXRlcnMuaW1hZ2VSZXNvdXJjZXNQYXRoO1xuICAgIHRoaXMucmVuZGVyRm9ybXMgPSBwYXJhbWV0ZXJzLnJlbmRlckZvcm1zO1xuICAgIHRoaXMuc3ZnRmFjdG9yeSA9IHBhcmFtZXRlcnMuc3ZnRmFjdG9yeTtcbiAgICB0aGlzLmFubm90YXRpb25TdG9yYWdlID0gcGFyYW1ldGVycy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICB0aGlzLmVuYWJsZVNjcmlwdGluZyA9IHBhcmFtZXRlcnMuZW5hYmxlU2NyaXB0aW5nO1xuICAgIHRoaXMuaGFzSlNBY3Rpb25zID0gcGFyYW1ldGVycy5oYXNKU0FjdGlvbnM7XG4gICAgdGhpcy5fZmllbGRPYmplY3RzID0gcGFyYW1ldGVycy5maWVsZE9iamVjdHM7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJhbWV0ZXJzLnBhcmVudDtcblxuICAgIGlmIChpc1JlbmRlcmFibGUpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5fY3JlYXRlQ29udGFpbmVyKGlnbm9yZUJvcmRlcik7XG4gICAgfVxuICAgIGlmIChjcmVhdGVRdWFkcmlsYXRlcmFscykge1xuICAgICAgdGhpcy5fY3JlYXRlUXVhZHJpbGF0ZXJhbHMoKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX2hhc1BvcHVwRGF0YSh7IHRpdGxlT2JqLCBjb250ZW50c09iaiwgcmljaFRleHQgfSkge1xuICAgIHJldHVybiAhISh0aXRsZU9iaj8uc3RyIHx8IGNvbnRlbnRzT2JqPy5zdHIgfHwgcmljaFRleHQ/LnN0cik7XG4gIH1cblxuICBnZXQgX2lzRWRpdGFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VkaXRhYmxlO1xuICB9XG5cbiAgZ2V0IGhhc1BvcHVwRGF0YSgpIHtcbiAgICByZXR1cm4gQW5ub3RhdGlvbkVsZW1lbnQuX2hhc1BvcHVwRGF0YSh0aGlzLmRhdGEpO1xuICB9XG5cbiAgdXBkYXRlRWRpdGVkKHBhcmFtcykge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLiN1cGRhdGVzIHx8PSB7XG4gICAgICByZWN0OiB0aGlzLmRhdGEucmVjdC5zbGljZSgwKSxcbiAgICB9O1xuXG4gICAgY29uc3QgeyByZWN0IH0gPSBwYXJhbXM7XG5cbiAgICBpZiAocmVjdCkge1xuICAgICAgdGhpcy4jc2V0UmVjdEVkaXRlZChyZWN0KTtcbiAgICB9XG5cbiAgICB0aGlzLiNwb3B1cEVsZW1lbnQ/LnBvcHVwLnVwZGF0ZUVkaXRlZChwYXJhbXMpO1xuICB9XG5cbiAgcmVzZXRFZGl0ZWQoKSB7XG4gICAgaWYgKCF0aGlzLiN1cGRhdGVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI3NldFJlY3RFZGl0ZWQodGhpcy4jdXBkYXRlcy5yZWN0KTtcbiAgICB0aGlzLiNwb3B1cEVsZW1lbnQ/LnBvcHVwLnJlc2V0RWRpdGVkKCk7XG4gICAgdGhpcy4jdXBkYXRlcyA9IG51bGw7XG4gIH1cblxuICAjc2V0UmVjdEVkaXRlZChyZWN0KSB7XG4gICAgY29uc3Qge1xuICAgICAgY29udGFpbmVyOiB7IHN0eWxlIH0sXG4gICAgICBkYXRhOiB7IHJlY3Q6IGN1cnJlbnRSZWN0LCByb3RhdGlvbiB9LFxuICAgICAgcGFyZW50OiB7XG4gICAgICAgIHZpZXdwb3J0OiB7XG4gICAgICAgICAgcmF3RGltczogeyBwYWdlV2lkdGgsIHBhZ2VIZWlnaHQsIHBhZ2VYLCBwYWdlWSB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9ID0gdGhpcztcbiAgICBjdXJyZW50UmVjdD8uc3BsaWNlKDAsIDQsIC4uLnJlY3QpO1xuICAgIHN0eWxlLmxlZnQgPSBgJHsoMTAwICogKHJlY3RbMF0gLSBwYWdlWCkpIC8gcGFnZVdpZHRofSVgO1xuICAgIHN0eWxlLnRvcCA9IGAkeygxMDAgKiAocGFnZUhlaWdodCAtIHJlY3RbM10gKyBwYWdlWSkpIC8gcGFnZUhlaWdodH0lYDtcbiAgICBpZiAocm90YXRpb24gPT09IDApIHtcbiAgICAgIHN0eWxlLndpZHRoID0gYCR7KDEwMCAqIC8qIHdpZHRoID0gKi8gKHJlY3RbMl0gLSByZWN0WzBdKSkgLyBwYWdlV2lkdGh9JWA7XG4gICAgICBzdHlsZS5oZWlnaHQgPSBgJHsoMTAwICogLyogaGVpZ2h0ID0gKi8gKHJlY3RbM10gLSByZWN0WzFdKSkgLyBwYWdlSGVpZ2h0fSVgO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFJvdGF0aW9uKHJvdGF0aW9uKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGVtcHR5IGNvbnRhaW5lciBmb3IgdGhlIGFubm90YXRpb24ncyBIVE1MIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaWdub3JlQm9yZGVyXG4gICAqIEBtZW1iZXJvZiBBbm5vdGF0aW9uRWxlbWVudFxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IEEgc2VjdGlvbiBlbGVtZW50LlxuICAgKi9cbiAgX2NyZWF0ZUNvbnRhaW5lcihpZ25vcmVCb3JkZXIpIHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgcGFyZW50OiB7IHBhZ2UsIHZpZXdwb3J0IH0sXG4gICAgfSA9IHRoaXM7XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKTtcbiAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1hbm5vdGF0aW9uLWlkXCIsIGRhdGEuaWQpO1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCkpIHtcbiAgICAgIGNvbnRhaW5lci50YWJJbmRleCA9IERFRkFVTFRfVEFCX0lOREVYO1xuICAgIH1cbiAgICBjb25zdCB7IHN0eWxlIH0gPSBjb250YWluZXI7XG5cbiAgICAvLyBUaGUgYWNjZXNzaWJpbGl0eSBtYW5hZ2VyIHdpbGwgbW92ZSB0aGUgYW5ub3RhdGlvbiBpbiB0aGUgRE9NIGluXG4gICAgLy8gb3JkZXIgdG8gbWF0Y2ggdGhlIHZpc3VhbCBvcmRlcmluZy5cbiAgICAvLyBCdXQgaWYgYW4gYW5ub3RhdGlvbiBpcyBhYm92ZSBhbiBvdGhlciBvbmUsIHRoZW4gd2UgbXVzdCBkcmF3IGl0XG4gICAgLy8gYWZ0ZXIgdGhlIG90aGVyIG9uZSB3aGF0ZXZlciB0aGUgb3JkZXIgaXMgaW4gdGhlIERPTSwgaGVuY2UgdGhlXG4gICAgLy8gdXNlIG9mIHRoZSB6LWluZGV4LlxuICAgIHN0eWxlLnpJbmRleCA9IHRoaXMucGFyZW50LnpJbmRleCsrO1xuXG4gICAgaWYgKGRhdGEuYWx0ZXJuYXRpdmVUZXh0KSB7XG4gICAgICBjb250YWluZXIudGl0bGUgPSBkYXRhLmFsdGVybmF0aXZlVGV4dDtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5ub1JvdGF0ZSkge1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJub3JvdGF0ZVwiKTtcbiAgICB9XG5cbiAgICBpZiAoIWRhdGEucmVjdCB8fCB0aGlzIGluc3RhbmNlb2YgUG9wdXBBbm5vdGF0aW9uRWxlbWVudCkge1xuICAgICAgY29uc3QgeyByb3RhdGlvbiB9ID0gZGF0YTtcbiAgICAgIGlmICghZGF0YS5oYXNPd25DYW52YXMgJiYgcm90YXRpb24gIT09IDApIHtcbiAgICAgICAgdGhpcy5zZXRSb3RhdGlvbihyb3RhdGlvbiwgY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcztcblxuICAgIGlmICghaWdub3JlQm9yZGVyICYmIGRhdGEuYm9yZGVyU3R5bGUud2lkdGggPiAwKSB7XG4gICAgICBzdHlsZS5ib3JkZXJXaWR0aCA9IGAke2RhdGEuYm9yZGVyU3R5bGUud2lkdGh9cHhgO1xuXG4gICAgICBjb25zdCBob3Jpem9udGFsUmFkaXVzID0gZGF0YS5ib3JkZXJTdHlsZS5ob3Jpem9udGFsQ29ybmVyUmFkaXVzO1xuICAgICAgY29uc3QgdmVydGljYWxSYWRpdXMgPSBkYXRhLmJvcmRlclN0eWxlLnZlcnRpY2FsQ29ybmVyUmFkaXVzO1xuICAgICAgaWYgKGhvcml6b250YWxSYWRpdXMgPiAwIHx8IHZlcnRpY2FsUmFkaXVzID4gMCkge1xuICAgICAgICBjb25zdCByYWRpdXMgPSBgY2FsYygke2hvcml6b250YWxSYWRpdXN9cHggKiB2YXIoLS10b3RhbC1zY2FsZS1mYWN0b3IpKSAvIGNhbGMoJHt2ZXJ0aWNhbFJhZGl1c31weCAqIHZhcigtLXRvdGFsLXNjYWxlLWZhY3RvcikpYDtcbiAgICAgICAgc3R5bGUuYm9yZGVyUmFkaXVzID0gcmFkaXVzO1xuICAgICAgfSBlbHNlIGlmICh0aGlzIGluc3RhbmNlb2YgUmFkaW9CdXR0b25XaWRnZXRBbm5vdGF0aW9uRWxlbWVudCkge1xuICAgICAgICBjb25zdCByYWRpdXMgPSBgY2FsYygke3dpZHRofXB4ICogdmFyKC0tdG90YWwtc2NhbGUtZmFjdG9yKSkgLyBjYWxjKCR7aGVpZ2h0fXB4ICogdmFyKC0tdG90YWwtc2NhbGUtZmFjdG9yKSlgO1xuICAgICAgICBzdHlsZS5ib3JkZXJSYWRpdXMgPSByYWRpdXM7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAoZGF0YS5ib3JkZXJTdHlsZS5zdHlsZSkge1xuICAgICAgICBjYXNlIEFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUuU09MSUQ6XG4gICAgICAgICAgc3R5bGUuYm9yZGVyU3R5bGUgPSBcInNvbGlkXCI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBBbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLkRBU0hFRDpcbiAgICAgICAgICBzdHlsZS5ib3JkZXJTdHlsZSA9IFwiZGFzaGVkXCI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBBbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLkJFVkVMRUQ6XG4gICAgICAgICAgd2FybihcIlVuaW1wbGVtZW50ZWQgYm9yZGVyIHN0eWxlOiBiZXZlbGVkXCIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZS5JTlNFVDpcbiAgICAgICAgICB3YXJuKFwiVW5pbXBsZW1lbnRlZCBib3JkZXIgc3R5bGU6IGluc2V0XCIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZS5VTkRFUkxJTkU6XG4gICAgICAgICAgc3R5bGUuYm9yZGVyQm90dG9tU3R5bGUgPSBcInNvbGlkXCI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgYm9yZGVyQ29sb3IgPSBkYXRhLmJvcmRlckNvbG9yIHx8IG51bGw7XG4gICAgICBpZiAoYm9yZGVyQ29sb3IpIHtcbiAgICAgICAgdGhpcy4jaGFzQm9yZGVyID0gdHJ1ZTtcbiAgICAgICAgc3R5bGUuYm9yZGVyQ29sb3IgPSBVdGlsLm1ha2VIZXhDb2xvcihcbiAgICAgICAgICBib3JkZXJDb2xvclswXSB8IDAsXG4gICAgICAgICAgYm9yZGVyQ29sb3JbMV0gfCAwLFxuICAgICAgICAgIGJvcmRlckNvbG9yWzJdIHwgMFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVHJhbnNwYXJlbnQgKGludmlzaWJsZSkgYm9yZGVyLCBzbyBkbyBub3QgZHJhdyBpdCBhdCBhbGwuXG4gICAgICAgIHN0eWxlLmJvcmRlcldpZHRoID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEbyAqbm90KiBtb2RpZnkgYGRhdGEucmVjdGAsIHNpbmNlIHRoYXQgd2lsbCBjb3JydXB0IHRoZSBhbm5vdGF0aW9uXG4gICAgLy8gcG9zaXRpb24gb24gc3Vic2VxdWVudCBjYWxscyB0byBgX2NyZWF0ZUNvbnRhaW5lcmAgKHNlZSBpc3N1ZSA2ODA0KS5cbiAgICBjb25zdCByZWN0ID0gVXRpbC5ub3JtYWxpemVSZWN0KFtcbiAgICAgIGRhdGEucmVjdFswXSxcbiAgICAgIHBhZ2Uudmlld1szXSAtIGRhdGEucmVjdFsxXSArIHBhZ2Uudmlld1sxXSxcbiAgICAgIGRhdGEucmVjdFsyXSxcbiAgICAgIHBhZ2Uudmlld1szXSAtIGRhdGEucmVjdFszXSArIHBhZ2Uudmlld1sxXSxcbiAgICBdKTtcbiAgICBjb25zdCB7IHBhZ2VXaWR0aCwgcGFnZUhlaWdodCwgcGFnZVgsIHBhZ2VZIH0gPSB2aWV3cG9ydC5yYXdEaW1zO1xuXG4gICAgc3R5bGUubGVmdCA9IGAkeygxMDAgKiAocmVjdFswXSAtIHBhZ2VYKSkgLyBwYWdlV2lkdGh9JWA7XG4gICAgc3R5bGUudG9wID0gYCR7KDEwMCAqIChyZWN0WzFdIC0gcGFnZVkpKSAvIHBhZ2VIZWlnaHR9JWA7XG5cbiAgICBjb25zdCB7IHJvdGF0aW9uIH0gPSBkYXRhO1xuICAgIGlmIChkYXRhLmhhc093bkNhbnZhcyB8fCByb3RhdGlvbiA9PT0gMCkge1xuICAgICAgc3R5bGUud2lkdGggPSBgJHsoMTAwICogd2lkdGgpIC8gcGFnZVdpZHRofSVgO1xuICAgICAgc3R5bGUuaGVpZ2h0ID0gYCR7KDEwMCAqIGhlaWdodCkgLyBwYWdlSGVpZ2h0fSVgO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFJvdGF0aW9uKHJvdGF0aW9uLCBjb250YWluZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cblxuICBzZXRSb3RhdGlvbihhbmdsZSwgY29udGFpbmVyID0gdGhpcy5jb250YWluZXIpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5yZWN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcGFnZVdpZHRoLCBwYWdlSGVpZ2h0IH0gPSB0aGlzLnBhcmVudC52aWV3cG9ydC5yYXdEaW1zO1xuICAgIGxldCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXM7XG5cbiAgICBpZiAoYW5nbGUgJSAxODAgIT09IDApIHtcbiAgICAgIFt3aWR0aCwgaGVpZ2h0XSA9IFtoZWlnaHQsIHdpZHRoXTtcbiAgICB9XG4gICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7KDEwMCAqIHdpZHRoKSAvIHBhZ2VXaWR0aH0lYDtcbiAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7KDEwMCAqIGhlaWdodCkgLyBwYWdlSGVpZ2h0fSVgO1xuXG4gICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtbWFpbi1yb3RhdGlvblwiLCAoMzYwIC0gYW5nbGUpICUgMzYwKTtcbiAgfVxuXG4gIGdldCBfY29tbW9uQWN0aW9ucygpIHtcbiAgICBjb25zdCBzZXRDb2xvciA9IChqc05hbWUsIHN0eWxlTmFtZSwgZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGNvbG9yID0gZXZlbnQuZGV0YWlsW2pzTmFtZV07XG4gICAgICBjb25zdCBjb2xvclR5cGUgPSBjb2xvclswXTtcbiAgICAgIGNvbnN0IGNvbG9yQXJyYXkgPSBjb2xvci5zbGljZSgxKTtcbiAgICAgIGV2ZW50LnRhcmdldC5zdHlsZVtzdHlsZU5hbWVdID1cbiAgICAgICAgQ29sb3JDb252ZXJ0ZXJzW2Ake2NvbG9yVHlwZX1fSFRNTGBdKGNvbG9yQXJyYXkpO1xuICAgICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zZXRWYWx1ZSh0aGlzLmRhdGEuaWQsIHtcbiAgICAgICAgW3N0eWxlTmFtZV06IENvbG9yQ29udmVydGVyc1tgJHtjb2xvclR5cGV9X3JnYmBdKGNvbG9yQXJyYXkpLFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJfY29tbW9uQWN0aW9uc1wiLCB7XG4gICAgICBkaXNwbGF5OiBldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IHsgZGlzcGxheSB9ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICAvLyBTZWUgc2NyaXB0aW5nL2NvbnN0YW50cy5qcyBmb3IgdGhlIHZhbHVlcyBvZiBgRGlzcGxheWAuXG4gICAgICAgIC8vIDAgPSB2aXNpYmxlLCAxID0gaGlkZGVuLCAyID0gbm9QcmludCBhbmQgMyA9IG5vVmlldy5cbiAgICAgICAgY29uc3QgaGlkZGVuID0gZGlzcGxheSAlIDIgPT09IDE7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyBcImhpZGRlblwiIDogXCJ2aXNpYmxlXCI7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvblN0b3JhZ2Uuc2V0VmFsdWUodGhpcy5kYXRhLmlkLCB7XG4gICAgICAgICAgbm9WaWV3OiBoaWRkZW4sXG4gICAgICAgICAgbm9QcmludDogZGlzcGxheSA9PT0gMSB8fCBkaXNwbGF5ID09PSAyLFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBwcmludDogZXZlbnQgPT4ge1xuICAgICAgICB0aGlzLmFubm90YXRpb25TdG9yYWdlLnNldFZhbHVlKHRoaXMuZGF0YS5pZCwge1xuICAgICAgICAgIG5vUHJpbnQ6ICFldmVudC5kZXRhaWwucHJpbnQsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhpZGRlbjogZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCB7IGhpZGRlbiB9ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gaGlkZGVuID8gXCJoaWRkZW5cIiA6IFwidmlzaWJsZVwiO1xuICAgICAgICB0aGlzLmFubm90YXRpb25TdG9yYWdlLnNldFZhbHVlKHRoaXMuZGF0YS5pZCwge1xuICAgICAgICAgIG5vUHJpbnQ6IGhpZGRlbixcbiAgICAgICAgICBub1ZpZXc6IGhpZGRlbixcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZm9jdXM6IGV2ZW50ID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBldmVudC50YXJnZXQuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiBmYWxzZSB9KSwgMCk7XG4gICAgICB9LFxuICAgICAgdXNlck5hbWU6IGV2ZW50ID0+IHtcbiAgICAgICAgLy8gdG9vbHRpcFxuICAgICAgICBldmVudC50YXJnZXQudGl0bGUgPSBldmVudC5kZXRhaWwudXNlck5hbWU7XG4gICAgICB9LFxuICAgICAgcmVhZG9ubHk6IGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LmRpc2FibGVkID0gZXZlbnQuZGV0YWlsLnJlYWRvbmx5O1xuICAgICAgfSxcbiAgICAgIHJlcXVpcmVkOiBldmVudCA9PiB7XG4gICAgICAgIHRoaXMuX3NldFJlcXVpcmVkKGV2ZW50LnRhcmdldCwgZXZlbnQuZGV0YWlsLnJlcXVpcmVkKTtcbiAgICAgIH0sXG4gICAgICBiZ0NvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiYmdDb2xvclwiLCBcImJhY2tncm91bmRDb2xvclwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgZmlsbENvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiZmlsbENvbG9yXCIsIFwiYmFja2dyb3VuZENvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBmZ0NvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiZmdDb2xvclwiLCBcImNvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICB0ZXh0Q29sb3I6IGV2ZW50ID0+IHtcbiAgICAgICAgc2V0Q29sb3IoXCJ0ZXh0Q29sb3JcIiwgXCJjb2xvclwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgYm9yZGVyQ29sb3I6IGV2ZW50ID0+IHtcbiAgICAgICAgc2V0Q29sb3IoXCJib3JkZXJDb2xvclwiLCBcImJvcmRlckNvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBzdHJva2VDb2xvcjogZXZlbnQgPT4ge1xuICAgICAgICBzZXRDb2xvcihcInN0cm9rZUNvbG9yXCIsIFwiYm9yZGVyQ29sb3JcIiwgZXZlbnQpO1xuICAgICAgfSxcbiAgICAgIHJvdGF0aW9uOiBldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gZXZlbnQuZGV0YWlsLnJvdGF0aW9uO1xuICAgICAgICB0aGlzLnNldFJvdGF0aW9uKGFuZ2xlKTtcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zZXRWYWx1ZSh0aGlzLmRhdGEuaWQsIHtcbiAgICAgICAgICByb3RhdGlvbjogYW5nbGUsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIF9kaXNwYXRjaEV2ZW50RnJvbVNhbmRib3goYWN0aW9ucywganNFdmVudCkge1xuICAgIGNvbnN0IGNvbW1vbkFjdGlvbnMgPSB0aGlzLl9jb21tb25BY3Rpb25zO1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhqc0V2ZW50LmRldGFpbCkpIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IGFjdGlvbnNbbmFtZV0gfHwgY29tbW9uQWN0aW9uc1tuYW1lXTtcbiAgICAgIGFjdGlvbj8uKGpzRXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhlbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZVNjcmlwdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNvbWUgcHJvcGVydGllcyBtYXkgaGF2ZSBiZWVuIHVwZGF0ZWQgdGhhbmtzIHRvIEpTLlxuICAgIGNvbnN0IHN0b3JlZERhdGEgPSB0aGlzLmFubm90YXRpb25TdG9yYWdlLmdldFJhd1ZhbHVlKHRoaXMuZGF0YS5pZCk7XG4gICAgaWYgKCFzdG9yZWREYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29tbW9uQWN0aW9ucyA9IHRoaXMuX2NvbW1vbkFjdGlvbnM7XG4gICAgZm9yIChjb25zdCBbYWN0aW9uTmFtZSwgZGV0YWlsXSBvZiBPYmplY3QuZW50cmllcyhzdG9yZWREYXRhKSkge1xuICAgICAgY29uc3QgYWN0aW9uID0gY29tbW9uQWN0aW9uc1thY3Rpb25OYW1lXTtcbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgY29uc3QgZXZlbnRQcm94eSA9IHtcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIFthY3Rpb25OYW1lXTogZGV0YWlsLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFyZ2V0OiBlbGVtZW50LFxuICAgICAgICB9O1xuICAgICAgICBhY3Rpb24oZXZlbnRQcm94eSk7XG4gICAgICAgIC8vIFRoZSBhY3Rpb24gaGFzIGJlZW4gY29uc3VtZWQ6IG5vIG5lZWQgdG8ga2VlcCBpdC5cbiAgICAgICAgZGVsZXRlIHN0b3JlZERhdGFbYWN0aW9uTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBxdWFkcmlsYXRlcmFscyBmcm9tIHRoZSBhbm5vdGF0aW9uJ3MgcXVhZHBvaW50cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1lbWJlcm9mIEFubm90YXRpb25FbGVtZW50XG4gICAqL1xuICBfY3JlYXRlUXVhZHJpbGF0ZXJhbHMoKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHF1YWRQb2ludHMgfSA9IHRoaXMuZGF0YTtcbiAgICBpZiAoIXF1YWRQb2ludHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBbcmVjdEJsWCwgcmVjdEJsWSwgcmVjdFRyWCwgcmVjdFRyWV0gPSB0aGlzLmRhdGEucmVjdC5tYXAoeCA9PlxuICAgICAgTWF0aC5mcm91bmQoeClcbiAgICApO1xuXG4gICAgaWYgKHF1YWRQb2ludHMubGVuZ3RoID09PSA4KSB7XG4gICAgICBjb25zdCBbdHJYLCB0clksIGJsWCwgYmxZXSA9IHF1YWRQb2ludHMuc3ViYXJyYXkoMiwgNik7XG4gICAgICBpZiAoXG4gICAgICAgIHJlY3RUclggPT09IHRyWCAmJlxuICAgICAgICByZWN0VHJZID09PSB0clkgJiZcbiAgICAgICAgcmVjdEJsWCA9PT0gYmxYICYmXG4gICAgICAgIHJlY3RCbFkgPT09IGJsWVxuICAgICAgKSB7XG4gICAgICAgIC8vIFRoZSBxdWFkcG9pbnRzIGNvdmVyIHRoZSB3aG9sZSBhbm5vdGF0aW9uIHJlY3RhbmdsZSwgc28gbm8gbmVlZCB0b1xuICAgICAgICAvLyBjcmVhdGUgYSBxdWFkcmlsYXRlcmFsLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgeyBzdHlsZSB9ID0gdGhpcy5jb250YWluZXI7XG4gICAgbGV0IHN2Z0J1ZmZlcjtcbiAgICBpZiAodGhpcy4jaGFzQm9yZGVyKSB7XG4gICAgICBjb25zdCB7IGJvcmRlckNvbG9yLCBib3JkZXJXaWR0aCB9ID0gc3R5bGU7XG4gICAgICBzdHlsZS5ib3JkZXJXaWR0aCA9IDA7XG4gICAgICBzdmdCdWZmZXIgPSBbXG4gICAgICAgIFwidXJsKCdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCxcIixcbiAgICAgICAgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiYCxcbiAgICAgICAgYCBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMSAxXCI+YCxcbiAgICAgICAgYDxnIGZpbGw9XCJ0cmFuc3BhcmVudFwiIHN0cm9rZT1cIiR7Ym9yZGVyQ29sb3J9XCIgc3Ryb2tlLXdpZHRoPVwiJHtib3JkZXJXaWR0aH1cIj5gLFxuICAgICAgXTtcbiAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNCb3JkZXJcIik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkge1xuICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc0NsaXBQYXRoXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHdpZHRoID0gcmVjdFRyWCAtIHJlY3RCbFg7XG4gICAgY29uc3QgaGVpZ2h0ID0gcmVjdFRyWSAtIHJlY3RCbFk7XG5cbiAgICBjb25zdCB7IHN2Z0ZhY3RvcnkgfSA9IHRoaXM7XG4gICAgY29uc3Qgc3ZnID0gc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnXCIpO1xuICAgIHN2Zy5jbGFzc0xpc3QuYWRkKFwicXVhZHJpbGF0ZXJhbHNDb250YWluZXJcIik7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIDApO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgMCk7XG4gICAgY29uc3QgZGVmcyA9IHN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcImRlZnNcIik7XG4gICAgc3ZnLmFwcGVuZChkZWZzKTtcbiAgICBjb25zdCBjbGlwUGF0aCA9IHN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcImNsaXBQYXRoXCIpO1xuICAgIGNvbnN0IGlkID0gYGNsaXBwYXRoXyR7dGhpcy5kYXRhLmlkfWA7XG4gICAgY2xpcFBhdGguc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xuICAgIGNsaXBQYXRoLnNldEF0dHJpYnV0ZShcImNsaXBQYXRoVW5pdHNcIiwgXCJvYmplY3RCb3VuZGluZ0JveFwiKTtcbiAgICBkZWZzLmFwcGVuZChjbGlwUGF0aCk7XG5cbiAgICBmb3IgKGxldCBpID0gMiwgaWkgPSBxdWFkUG9pbnRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDgpIHtcbiAgICAgIGNvbnN0IHRyWCA9IHF1YWRQb2ludHNbaV07XG4gICAgICBjb25zdCB0clkgPSBxdWFkUG9pbnRzW2kgKyAxXTtcbiAgICAgIGNvbnN0IGJsWCA9IHF1YWRQb2ludHNbaSArIDJdO1xuICAgICAgY29uc3QgYmxZID0gcXVhZFBvaW50c1tpICsgM107XG4gICAgICBjb25zdCByZWN0ID0gc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwicmVjdFwiKTtcbiAgICAgIGNvbnN0IHggPSAoYmxYIC0gcmVjdEJsWCkgLyB3aWR0aDtcbiAgICAgIGNvbnN0IHkgPSAocmVjdFRyWSAtIHRyWSkgLyBoZWlnaHQ7XG4gICAgICBjb25zdCByZWN0V2lkdGggPSAodHJYIC0gYmxYKSAvIHdpZHRoO1xuICAgICAgY29uc3QgcmVjdEhlaWdodCA9ICh0clkgLSBibFkpIC8gaGVpZ2h0O1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIHgpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIHkpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCByZWN0V2lkdGgpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgcmVjdEhlaWdodCk7XG4gICAgICBjbGlwUGF0aC5hcHBlbmQocmVjdCk7XG4gICAgICBzdmdCdWZmZXI/LnB1c2goXG4gICAgICAgIGA8cmVjdCB2ZWN0b3ItZWZmZWN0PVwibm9uLXNjYWxpbmctc3Ryb2tlXCIgeD1cIiR7eH1cIiB5PVwiJHt5fVwiIHdpZHRoPVwiJHtyZWN0V2lkdGh9XCIgaGVpZ2h0PVwiJHtyZWN0SGVpZ2h0fVwiLz5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLiNoYXNCb3JkZXIpIHtcbiAgICAgIHN2Z0J1ZmZlci5wdXNoKGA8L2c+PC9zdmc+JylgKTtcbiAgICAgIHN0eWxlLmJhY2tncm91bmRJbWFnZSA9IHN2Z0J1ZmZlci5qb2luKFwiXCIpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChzdmcpO1xuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmNsaXBQYXRoID0gYHVybCgjJHtpZH0pYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBwb3B1cCBmb3IgdGhlIGFubm90YXRpb24ncyBIVE1MIGVsZW1lbnQuIFRoaXMgaXMgdXNlZCBmb3JcbiAgICogYW5ub3RhdGlvbnMgdGhhdCBkbyBub3QgaGF2ZSBhIFBvcHVwIGVudHJ5IGluIHRoZSBkaWN0aW9uYXJ5LCBidXRcbiAgICogYXJlIG9mIGEgdHlwZSB0aGF0IHdvcmtzIHdpdGggcG9wdXBzIChzdWNoIGFzIEhpZ2hsaWdodCBhbm5vdGF0aW9ucykuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZW1iZXJvZiBBbm5vdGF0aW9uRWxlbWVudFxuICAgKi9cbiAgX2NyZWF0ZVBvcHVwKCkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcblxuICAgIGNvbnN0IHBvcHVwID0gKHRoaXMuI3BvcHVwRWxlbWVudCA9IG5ldyBQb3B1cEFubm90YXRpb25FbGVtZW50KHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY29sb3I6IGRhdGEuY29sb3IsXG4gICAgICAgIHRpdGxlT2JqOiBkYXRhLnRpdGxlT2JqLFxuICAgICAgICBtb2RpZmljYXRpb25EYXRlOiBkYXRhLm1vZGlmaWNhdGlvbkRhdGUsXG4gICAgICAgIGNvbnRlbnRzT2JqOiBkYXRhLmNvbnRlbnRzT2JqLFxuICAgICAgICByaWNoVGV4dDogZGF0YS5yaWNoVGV4dCxcbiAgICAgICAgcGFyZW50UmVjdDogZGF0YS5yZWN0LFxuICAgICAgICBib3JkZXJTdHlsZTogMCxcbiAgICAgICAgaWQ6IGBwb3B1cF8ke2RhdGEuaWR9YCxcbiAgICAgICAgcm90YXRpb246IGRhdGEucm90YXRpb24sXG4gICAgICB9LFxuICAgICAgcGFyZW50OiB0aGlzLnBhcmVudCxcbiAgICAgIGVsZW1lbnRzOiBbdGhpc10sXG4gICAgfSkpO1xuICAgIHRoaXMucGFyZW50LmRpdi5hcHBlbmQocG9wdXAucmVuZGVyKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0aGUgYW5ub3RhdGlvbidzIEhUTUwgZWxlbWVudChzKS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvbkVsZW1lbnRcbiAgICovXG4gIHJlbmRlcigpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgQW5ub3RhdGlvbkVsZW1lbnQucmVuZGVyYCBjYWxsZWRcIik7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge0FycmF5fVxuICAgKi9cbiAgX2dldEVsZW1lbnRzQnlOYW1lKG5hbWUsIHNraXBJZCA9IG51bGwpIHtcbiAgICBjb25zdCBmaWVsZHMgPSBbXTtcblxuICAgIGlmICh0aGlzLl9maWVsZE9iamVjdHMpIHtcbiAgICAgIGNvbnN0IGZpZWxkT2JqID0gdGhpcy5fZmllbGRPYmplY3RzW25hbWVdO1xuICAgICAgaWYgKGZpZWxkT2JqKSB7XG4gICAgICAgIGZvciAoY29uc3QgeyBwYWdlLCBpZCwgZXhwb3J0VmFsdWVzIH0gb2YgZmllbGRPYmopIHtcbiAgICAgICAgICBpZiAocGFnZSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaWQgPT09IHNraXBJZCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGV4cG9ydFZhbHVlID1cbiAgICAgICAgICAgIHR5cGVvZiBleHBvcnRWYWx1ZXMgPT09IFwic3RyaW5nXCIgPyBleHBvcnRWYWx1ZXMgOiBudWxsO1xuXG4gICAgICAgICAgY29uc3QgZG9tRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBgW2RhdGEtZWxlbWVudC1pZD1cIiR7aWR9XCJdYFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGRvbUVsZW1lbnQgJiYgIUdldEVsZW1lbnRzQnlOYW1lU2V0Lmhhcyhkb21FbGVtZW50KSkge1xuICAgICAgICAgICAgd2FybihgX2dldEVsZW1lbnRzQnlOYW1lIC0gZWxlbWVudCBub3QgYWxsb3dlZDogJHtpZH1gKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmaWVsZHMucHVzaCh7IGlkLCBleHBvcnRWYWx1ZSwgZG9tRWxlbWVudCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZpZWxkcztcbiAgICB9XG4gICAgLy8gRmFsbGJhY2sgdG8gYSByZWd1bGFyIERPTSBsb29rdXAsIHRvIGVuc3VyZSB0aGF0IHRoZSBzdGFuZGFsb25lXG4gICAgLy8gdmlld2VyIGNvbXBvbmVudHMgd29uJ3QgYnJlYWsuXG4gICAgZm9yIChjb25zdCBkb21FbGVtZW50IG9mIGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKG5hbWUpKSB7XG4gICAgICBjb25zdCB7IGV4cG9ydFZhbHVlIH0gPSBkb21FbGVtZW50O1xuICAgICAgY29uc3QgaWQgPSBkb21FbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZWxlbWVudC1pZFwiKTtcbiAgICAgIGlmIChpZCA9PT0gc2tpcElkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFHZXRFbGVtZW50c0J5TmFtZVNldC5oYXMoZG9tRWxlbWVudCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBmaWVsZHMucHVzaCh7IGlkLCBleHBvcnRWYWx1ZSwgZG9tRWxlbWVudCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZpZWxkcztcbiAgfVxuXG4gIHNob3coKSB7XG4gICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5oaWRkZW4gPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5wb3B1cD8ubWF5YmVTaG93KCk7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgdGhpcy5jb250YWluZXIuaGlkZGVuID0gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5wb3B1cD8uZm9yY2VIaWRlKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBIVE1MIGVsZW1lbnQocykgd2hpY2ggY2FuIHRyaWdnZXIgYSBwb3B1cCB3aGVuIGNsaWNrZWQgb3IgaG92ZXJlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvbkVsZW1lbnRcbiAgICogQHJldHVybnMge0FycmF5PEhUTUxFbGVtZW50PnxIVE1MRWxlbWVudH0gQW4gYXJyYXkgb2YgZWxlbWVudHMgb3IgYW5cbiAgICogICAgICAgICAgZWxlbWVudC5cbiAgICovXG4gIGdldEVsZW1lbnRzVG9UcmlnZ2VyUG9wdXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbiAgYWRkSGlnaGxpZ2h0QXJlYSgpIHtcbiAgICBjb25zdCB0cmlnZ2VycyA9IHRoaXMuZ2V0RWxlbWVudHNUb1RyaWdnZXJQb3B1cCgpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHRyaWdnZXJzKSkge1xuICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRyaWdnZXJzKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodEFyZWFcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyaWdnZXJzLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRBcmVhXCIpO1xuICAgIH1cbiAgfVxuXG4gIF9lZGl0T25Eb3VibGVDbGljaygpIHtcbiAgICBpZiAoIXRoaXMuX2lzRWRpdGFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgYW5ub3RhdGlvbkVkaXRvclR5cGU6IG1vZGUsXG4gICAgICBkYXRhOiB7IGlkOiBlZGl0SWQgfSxcbiAgICB9ID0gdGhpcztcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJzd2l0Y2hhbm5vdGF0aW9uZWRpdG9ybW9kZVwiLCB7XG4gICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgbW9kZSxcbiAgICAgICAgZWRpdElkLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgd2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5yZWN0WzJdIC0gdGhpcy5kYXRhLnJlY3RbMF07XG4gIH1cblxuICBnZXQgaGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEucmVjdFszXSAtIHRoaXMuZGF0YS5yZWN0WzFdO1xuICB9XG59XG5cbmNsYXNzIExpbmtBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycywgb3B0aW9ucyA9IG51bGwpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGU6IHRydWUsXG4gICAgICBpZ25vcmVCb3JkZXI6ICEhb3B0aW9ucz8uaWdub3JlQm9yZGVyLFxuICAgICAgY3JlYXRlUXVhZHJpbGF0ZXJhbHM6IHRydWUsXG4gICAgfSk7XG4gICAgdGhpcy5pc1Rvb2x0aXBPbmx5ID0gcGFyYW1ldGVycy5kYXRhLmlzVG9vbHRpcE9ubHk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkYXRhLCBsaW5rU2VydmljZSB9ID0gdGhpcztcbiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgbGluay5zZXRBdHRyaWJ1dGUoXCJkYXRhLWVsZW1lbnQtaWRcIiwgZGF0YS5pZCk7XG4gICAgbGV0IGlzQm91bmQgPSBmYWxzZTtcblxuICAgIGlmIChkYXRhLnVybCkge1xuICAgICAgbGlua1NlcnZpY2UuYWRkTGlua0F0dHJpYnV0ZXMobGluaywgZGF0YS51cmwsIGRhdGEubmV3V2luZG93KTtcbiAgICAgIGlzQm91bmQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoZGF0YS5hY3Rpb24pIHtcbiAgICAgIHRoaXMuX2JpbmROYW1lZEFjdGlvbihsaW5rLCBkYXRhLmFjdGlvbik7XG4gICAgICBpc0JvdW5kID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGRhdGEuYXR0YWNobWVudCkge1xuICAgICAgdGhpcy4jYmluZEF0dGFjaG1lbnQobGluaywgZGF0YS5hdHRhY2htZW50LCBkYXRhLmF0dGFjaG1lbnREZXN0KTtcbiAgICAgIGlzQm91bmQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoZGF0YS5zZXRPQ0dTdGF0ZSkge1xuICAgICAgdGhpcy4jYmluZFNldE9DR1N0YXRlKGxpbmssIGRhdGEuc2V0T0NHU3RhdGUpO1xuICAgICAgaXNCb3VuZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChkYXRhLmRlc3QpIHtcbiAgICAgIHRoaXMuX2JpbmRMaW5rKGxpbmssIGRhdGEuZGVzdCk7XG4gICAgICBpc0JvdW5kID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKFxuICAgICAgICBkYXRhLmFjdGlvbnMgJiZcbiAgICAgICAgKGRhdGEuYWN0aW9ucy5BY3Rpb24gfHxcbiAgICAgICAgICBkYXRhLmFjdGlvbnNbXCJNb3VzZSBVcFwiXSB8fFxuICAgICAgICAgIGRhdGEuYWN0aW9uc1tcIk1vdXNlIERvd25cIl0pICYmXG4gICAgICAgIHRoaXMuZW5hYmxlU2NyaXB0aW5nICYmXG4gICAgICAgIHRoaXMuaGFzSlNBY3Rpb25zXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5fYmluZEpTQWN0aW9uKGxpbmssIGRhdGEpO1xuICAgICAgICBpc0JvdW5kID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEucmVzZXRGb3JtKSB7XG4gICAgICAgIHRoaXMuX2JpbmRSZXNldEZvcm1BY3Rpb24obGluaywgZGF0YS5yZXNldEZvcm0pO1xuICAgICAgICBpc0JvdW5kID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1Rvb2x0aXBPbmx5ICYmICFpc0JvdW5kKSB7XG4gICAgICAgIHRoaXMuX2JpbmRMaW5rKGxpbmssIFwiXCIpO1xuICAgICAgICBpc0JvdW5kID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibGlua0Fubm90YXRpb25cIik7XG4gICAgaWYgKGlzQm91bmQpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChsaW5rKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICAjc2V0SW50ZXJuYWxMaW5rKCkge1xuICAgIHRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtaW50ZXJuYWwtbGlua1wiLCBcIlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGludGVybmFsIGxpbmtzIHRvIHRoZSBsaW5rIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsaW5rXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0aW5hdGlvblxuICAgKiBAbWVtYmVyb2YgTGlua0Fubm90YXRpb25FbGVtZW50XG4gICAqL1xuICBfYmluZExpbmsobGluaywgZGVzdGluYXRpb24pIHtcbiAgICBsaW5rLmhyZWYgPSB0aGlzLmxpbmtTZXJ2aWNlLmdldERlc3RpbmF0aW9uSGFzaChkZXN0aW5hdGlvbik7XG4gICAgbGluay5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgaWYgKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHRoaXMubGlua1NlcnZpY2UuZ29Ub0Rlc3RpbmF0aW9uKGRlc3RpbmF0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIGlmIChkZXN0aW5hdGlvbiB8fCBkZXN0aW5hdGlvbiA9PT0gLyogaXNUb29sdGlwT25seSA9ICovIFwiXCIpIHtcbiAgICAgIHRoaXMuI3NldEludGVybmFsTGluaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIG5hbWVkIGFjdGlvbnMgdG8gdGhlIGxpbmsgZWxlbWVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IGxpbmtcbiAgICogQHBhcmFtIHtPYmplY3R9IGFjdGlvblxuICAgKiBAbWVtYmVyb2YgTGlua0Fubm90YXRpb25FbGVtZW50XG4gICAqL1xuICBfYmluZE5hbWVkQWN0aW9uKGxpbmssIGFjdGlvbikge1xuICAgIGxpbmsuaHJlZiA9IHRoaXMubGlua1NlcnZpY2UuZ2V0QW5jaG9yVXJsKFwiXCIpO1xuICAgIGxpbmsub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMubGlua1NlcnZpY2UuZXhlY3V0ZU5hbWVkQWN0aW9uKGFjdGlvbik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICB0aGlzLiNzZXRJbnRlcm5hbExpbmsoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGF0dGFjaG1lbnRzIHRvIHRoZSBsaW5rIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsaW5rXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhdHRhY2htZW50XG4gICAqIEBwYXJhbSB7c3RyfSBbZGVzdF1cbiAgICovXG4gICNiaW5kQXR0YWNobWVudChsaW5rLCBhdHRhY2htZW50LCBkZXN0ID0gbnVsbCkge1xuICAgIGxpbmsuaHJlZiA9IHRoaXMubGlua1NlcnZpY2UuZ2V0QW5jaG9yVXJsKFwiXCIpO1xuICAgIGlmIChhdHRhY2htZW50LmRlc2NyaXB0aW9uKSB7XG4gICAgICBsaW5rLnRpdGxlID0gYXR0YWNobWVudC5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgbGluay5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgdGhpcy5kb3dubG9hZE1hbmFnZXI/Lm9wZW5PckRvd25sb2FkRGF0YShcbiAgICAgICAgYXR0YWNobWVudC5jb250ZW50LFxuICAgICAgICBhdHRhY2htZW50LmZpbGVuYW1lLFxuICAgICAgICBkZXN0XG4gICAgICApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgdGhpcy4jc2V0SW50ZXJuYWxMaW5rKCk7XG4gIH1cblxuICAvKipcbiAgICogQmluZCBTZXRPQ0dTdGF0ZSBhY3Rpb25zIHRvIHRoZSBsaW5rIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsaW5rXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb25cbiAgICovXG4gICNiaW5kU2V0T0NHU3RhdGUobGluaywgYWN0aW9uKSB7XG4gICAgbGluay5ocmVmID0gdGhpcy5saW5rU2VydmljZS5nZXRBbmNob3JVcmwoXCJcIik7XG4gICAgbGluay5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgdGhpcy5saW5rU2VydmljZS5leGVjdXRlU2V0T0NHU3RhdGUoYWN0aW9uKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIHRoaXMuI3NldEludGVybmFsTGluaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmQgSlMgYWN0aW9ucyB0byB0aGUgbGluayBlbGVtZW50LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gbGlua1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiBAbWVtYmVyb2YgTGlua0Fubm90YXRpb25FbGVtZW50XG4gICAqL1xuICBfYmluZEpTQWN0aW9uKGxpbmssIGRhdGEpIHtcbiAgICBsaW5rLmhyZWYgPSB0aGlzLmxpbmtTZXJ2aWNlLmdldEFuY2hvclVybChcIlwiKTtcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKFtcbiAgICAgIFtcIkFjdGlvblwiLCBcIm9uY2xpY2tcIl0sXG4gICAgICBbXCJNb3VzZSBVcFwiLCBcIm9ubW91c2V1cFwiXSxcbiAgICAgIFtcIk1vdXNlIERvd25cIiwgXCJvbm1vdXNlZG93blwiXSxcbiAgICBdKTtcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMoZGF0YS5hY3Rpb25zKSkge1xuICAgICAgY29uc3QganNOYW1lID0gbWFwLmdldChuYW1lKTtcbiAgICAgIGlmICghanNOYW1lKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgbGlua1tqc05hbWVdID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaChcImRpc3BhdGNoZXZlbnRpbnNhbmRib3hcIiwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoIWxpbmsub25jbGljaykge1xuICAgICAgbGluay5vbmNsaWNrID0gKCkgPT4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuI3NldEludGVybmFsTGluaygpO1xuICB9XG5cbiAgX2JpbmRSZXNldEZvcm1BY3Rpb24obGluaywgcmVzZXRGb3JtKSB7XG4gICAgY29uc3Qgb3RoZXJDbGlja0FjdGlvbiA9IGxpbmsub25jbGljaztcbiAgICBpZiAoIW90aGVyQ2xpY2tBY3Rpb24pIHtcbiAgICAgIGxpbmsuaHJlZiA9IHRoaXMubGlua1NlcnZpY2UuZ2V0QW5jaG9yVXJsKFwiXCIpO1xuICAgIH1cbiAgICB0aGlzLiNzZXRJbnRlcm5hbExpbmsoKTtcblxuICAgIGlmICghdGhpcy5fZmllbGRPYmplY3RzKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgX2JpbmRSZXNldEZvcm1BY3Rpb24gLSBcInJlc2V0Rm9ybVwiIGFjdGlvbiBub3Qgc3VwcG9ydGVkLCBgICtcbiAgICAgICAgICBcImVuc3VyZSB0aGF0IHRoZSBgZmllbGRPYmplY3RzYCBwYXJhbWV0ZXIgaXMgcHJvdmlkZWQuXCJcbiAgICAgICk7XG4gICAgICBpZiAoIW90aGVyQ2xpY2tBY3Rpb24pIHtcbiAgICAgICAgbGluay5vbmNsaWNrID0gKCkgPT4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGluay5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgb3RoZXJDbGlja0FjdGlvbj8uKCk7XG5cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZmllbGRzOiByZXNldEZvcm1GaWVsZHMsXG4gICAgICAgIHJlZnM6IHJlc2V0Rm9ybVJlZnMsXG4gICAgICAgIGluY2x1ZGUsXG4gICAgICB9ID0gcmVzZXRGb3JtO1xuXG4gICAgICBjb25zdCBhbGxGaWVsZHMgPSBbXTtcbiAgICAgIGlmIChyZXNldEZvcm1GaWVsZHMubGVuZ3RoICE9PSAwIHx8IHJlc2V0Rm9ybVJlZnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkSWRzID0gbmV3IFNldChyZXNldEZvcm1SZWZzKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZE5hbWUgb2YgcmVzZXRGb3JtRmllbGRzKSB7XG4gICAgICAgICAgY29uc3QgZmllbGRzID0gdGhpcy5fZmllbGRPYmplY3RzW2ZpZWxkTmFtZV0gfHwgW107XG4gICAgICAgICAgZm9yIChjb25zdCB7IGlkIH0gb2YgZmllbGRzKSB7XG4gICAgICAgICAgICBmaWVsZElkcy5hZGQoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGZpZWxkcyBvZiBPYmplY3QudmFsdWVzKHRoaXMuX2ZpZWxkT2JqZWN0cykpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgICAgICAgaWYgKGZpZWxkSWRzLmhhcyhmaWVsZC5pZCkgPT09IGluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgYWxsRmllbGRzLnB1c2goZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZHMgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLl9maWVsZE9iamVjdHMpKSB7XG4gICAgICAgICAgYWxsRmllbGRzLnB1c2goLi4uZmllbGRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICAgIGNvbnN0IGFsbElkcyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBhbGxGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gZmllbGQ7XG4gICAgICAgIGFsbElkcy5wdXNoKGlkKTtcbiAgICAgICAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmaWVsZC5kZWZhdWx0VmFsdWUgfHwgXCJcIjtcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWUgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XG4gICAgICAgICAgY2FzZSBcInJhZGlvYnV0dG9uXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQuZGVmYXVsdFZhbHVlID09PSBmaWVsZC5leHBvcnRWYWx1ZXM7XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJjb21ib2JveFwiOlxuICAgICAgICAgIGNhc2UgXCJsaXN0Ym94XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQuZGVmYXVsdFZhbHVlIHx8IFwiXCI7XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRvbUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1lbGVtZW50LWlkPVwiJHtpZH1cIl1gKTtcbiAgICAgICAgaWYgKCFkb21FbGVtZW50KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAoIUdldEVsZW1lbnRzQnlOYW1lU2V0Lmhhcyhkb21FbGVtZW50KSkge1xuICAgICAgICAgIHdhcm4oYF9iaW5kUmVzZXRGb3JtQWN0aW9uIC0gZWxlbWVudCBub3QgYWxsb3dlZDogJHtpZH1gKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBkb21FbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicmVzZXRmb3JtXCIpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZW5hYmxlU2NyaXB0aW5nKSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWVzIGluIHRoZSBzYW5kYm94LlxuICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaChcImRpc3BhdGNoZXZlbnRpbnNhbmRib3hcIiwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGlkOiBcImFwcFwiLFxuICAgICAgICAgICAgaWRzOiBhbGxJZHMsXG4gICAgICAgICAgICBuYW1lOiBcIlJlc2V0Rm9ybVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgfVxufVxuXG5jbGFzcyBUZXh0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGV4dEFubm90YXRpb25cIik7XG5cbiAgICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgaW1hZ2Uuc3JjID1cbiAgICAgIHRoaXMuaW1hZ2VSZXNvdXJjZXNQYXRoICtcbiAgICAgIFwiYW5ub3RhdGlvbi1cIiArXG4gICAgICB0aGlzLmRhdGEubmFtZS50b0xvd2VyQ2FzZSgpICtcbiAgICAgIFwiLnN2Z1wiO1xuICAgIGltYWdlLnNldEF0dHJpYnV0ZShcImRhdGEtbDEwbi1pZFwiLCBcInBkZmpzLXRleHQtYW5ub3RhdGlvbi10eXBlXCIpO1xuICAgIGltYWdlLnNldEF0dHJpYnV0ZShcbiAgICAgIFwiZGF0YS1sMTBuLWFyZ3NcIixcbiAgICAgIEpTT04uc3RyaW5naWZ5KHsgdHlwZTogdGhpcy5kYXRhLm5hbWUgfSlcbiAgICApO1xuXG4gICAgaWYgKCF0aGlzLmRhdGEucG9wdXBSZWYgJiYgdGhpcy5oYXNQb3B1cERhdGEpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGltYWdlKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIHJlbmRlcigpIHtcbiAgICAvLyBTaG93IG9ubHkgdGhlIGNvbnRhaW5lciBmb3IgdW5zdXBwb3J0ZWQgZmllbGQgdHlwZXMuXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbiAgc2hvd0VsZW1lbnRBbmRIaWRlQ2FudmFzKGVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5kYXRhLmhhc093bkNhbnZhcykge1xuICAgICAgaWYgKGVsZW1lbnQucHJldmlvdXNTaWJsaW5nPy5ub2RlTmFtZSA9PT0gXCJDQU5WQVNcIikge1xuICAgICAgICBlbGVtZW50LnByZXZpb3VzU2libGluZy5oaWRkZW4gPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfZ2V0S2V5TW9kaWZpZXIoZXZlbnQpIHtcbiAgICByZXR1cm4gRmVhdHVyZVRlc3QucGxhdGZvcm0uaXNNYWMgPyBldmVudC5tZXRhS2V5IDogZXZlbnQuY3RybEtleTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGVsZW1lbnREYXRhLCBiYXNlTmFtZSwgZXZlbnROYW1lLCB2YWx1ZUdldHRlcikge1xuICAgIGlmIChiYXNlTmFtZS5pbmNsdWRlcyhcIm1vdXNlXCIpKSB7XG4gICAgICAvLyBNb3VzZSBldmVudHNcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihiYXNlTmFtZSwgZXZlbnQgPT4ge1xuICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaChcImRpc3BhdGNoZXZlbnRpbnNhbmRib3hcIiwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGlkOiB0aGlzLmRhdGEuaWQsXG4gICAgICAgICAgICBuYW1lOiBldmVudE5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVHZXR0ZXIoZXZlbnQpLFxuICAgICAgICAgICAgc2hpZnQ6IGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuX2dldEtleU1vZGlmaWVyKGV2ZW50KSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOb24tbW91c2UgZXZlbnRzXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoYmFzZU5hbWUsIGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGJhc2VOYW1lID09PSBcImJsdXJcIikge1xuICAgICAgICAgIGlmICghZWxlbWVudERhdGEuZm9jdXNlZCB8fCAhZXZlbnQucmVsYXRlZFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50RGF0YS5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoYmFzZU5hbWUgPT09IFwiZm9jdXNcIikge1xuICAgICAgICAgIGlmIChlbGVtZW50RGF0YS5mb2N1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnREYXRhLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YWx1ZUdldHRlcikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKFwiZGlzcGF0Y2hldmVudGluc2FuZGJveFwiLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgaWQ6IHRoaXMuZGF0YS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZUdldHRlcihldmVudCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZWxlbWVudCwgZWxlbWVudERhdGEsIG5hbWVzLCBnZXR0ZXIpIHtcbiAgICBmb3IgKGNvbnN0IFtiYXNlTmFtZSwgZXZlbnROYW1lXSBvZiBuYW1lcykge1xuICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gXCJBY3Rpb25cIiB8fCB0aGlzLmRhdGEuYWN0aW9ucz8uW2V2ZW50TmFtZV0pIHtcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gXCJGb2N1c1wiIHx8IGV2ZW50TmFtZSA9PT0gXCJCbHVyXCIpIHtcbiAgICAgICAgICBlbGVtZW50RGF0YSB8fD0geyBmb2N1c2VkOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICBlbGVtZW50RGF0YSxcbiAgICAgICAgICBiYXNlTmFtZSxcbiAgICAgICAgICBldmVudE5hbWUsXG4gICAgICAgICAgZ2V0dGVyXG4gICAgICAgICk7XG4gICAgICAgIGlmIChldmVudE5hbWUgPT09IFwiRm9jdXNcIiAmJiAhdGhpcy5kYXRhLmFjdGlvbnM/LkJsdXIpIHtcbiAgICAgICAgICAvLyBFbnN1cmUgdGhhdCBlbGVtZW50RGF0YSB3aWxsIGhhdmUgdGhlIGNvcnJlY3QgdmFsdWUuXG4gICAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcihlbGVtZW50LCBlbGVtZW50RGF0YSwgXCJibHVyXCIsIFwiQmx1clwiLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT09IFwiQmx1clwiICYmICF0aGlzLmRhdGEuYWN0aW9ucz8uRm9jdXMpIHtcbiAgICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGVsZW1lbnREYXRhLCBcImZvY3VzXCIsIFwiRm9jdXNcIiwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpIHtcbiAgICBjb25zdCBjb2xvciA9IHRoaXMuZGF0YS5iYWNrZ3JvdW5kQ29sb3IgfHwgbnVsbDtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9XG4gICAgICBjb2xvciA9PT0gbnVsbFxuICAgICAgICA/IFwidHJhbnNwYXJlbnRcIlxuICAgICAgICA6IFV0aWwubWFrZUhleENvbG9yKGNvbG9yWzBdLCBjb2xvclsxXSwgY29sb3JbMl0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IHRleHQgc3R5bGVzIHRvIHRoZSB0ZXh0IGluIHRoZSBlbGVtZW50LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0hUTUxEaXZFbGVtZW50fSBlbGVtZW50XG4gICAqIEBtZW1iZXJvZiBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnRcbiAgICovXG4gIF9zZXRUZXh0U3R5bGUoZWxlbWVudCkge1xuICAgIGNvbnN0IFRFWFRfQUxJR05NRU5UID0gW1wibGVmdFwiLCBcImNlbnRlclwiLCBcInJpZ2h0XCJdO1xuICAgIGNvbnN0IHsgZm9udENvbG9yIH0gPSB0aGlzLmRhdGEuZGVmYXVsdEFwcGVhcmFuY2VEYXRhO1xuICAgIGNvbnN0IGZvbnRTaXplID1cbiAgICAgIHRoaXMuZGF0YS5kZWZhdWx0QXBwZWFyYW5jZURhdGEuZm9udFNpemUgfHwgREVGQVVMVF9GT05UX1NJWkU7XG5cbiAgICBjb25zdCBzdHlsZSA9IGVsZW1lbnQuc3R5bGU7XG5cbiAgICAvLyBUT0RPOiBJZiB0aGUgZm9udC1zaXplIGlzIHplcm8sIGNhbGN1bGF0ZSBpdCBiYXNlZCBvbiB0aGUgaGVpZ2h0IGFuZFxuICAgIC8vICAgICAgIHdpZHRoIG9mIHRoZSBlbGVtZW50LlxuICAgIC8vIE5vdCBzZXR0aW5nIGBzdHlsZS5mb250U2l6ZWAgd2lsbCB1c2UgdGhlIGRlZmF1bHQgZm9udC1zaXplIGZvciBub3cuXG5cbiAgICAvLyBXZSBkb24ndCB1c2UgdGhlIGZvbnQsIGFzIHNwZWNpZmllZCBpbiB0aGUgUERGIGRvY3VtZW50LCBmb3IgdGhlIDxpbnB1dD5cbiAgICAvLyBlbGVtZW50LiBIZW5jZSB1c2luZyB0aGUgb3JpZ2luYWwgYGZvbnRTaXplYCBjb3VsZCBsb29rIGJhZCwgd2hpY2ggaXMgd2h5XG4gICAgLy8gaXQncyBpbnN0ZWFkIGJhc2VkIG9uIHRoZSBmaWVsZCBoZWlnaHQuXG4gICAgLy8gSWYgdGhlIGhlaWdodCBpcyBcImJpZ1wiIHRoZW4gaXQgY291bGQgbGVhZCB0byBhIHRvbyBiaWcgZm9udCBzaXplXG4gICAgLy8gc28gaW4gdGhpcyBjYXNlIHVzZSB0aGUgb25lIHdlJ3ZlIGluIHRoZSBwZGYgKGhlbmNlIHRoZSBtaW4pLlxuICAgIGxldCBjb21wdXRlZEZvbnRTaXplO1xuICAgIGNvbnN0IEJPUkRFUl9TSVpFID0gMjtcbiAgICBjb25zdCByb3VuZFRvT25lRGVjaW1hbCA9IHggPT4gTWF0aC5yb3VuZCgxMCAqIHgpIC8gMTA7XG4gICAgaWYgKHRoaXMuZGF0YS5tdWx0aUxpbmUpIHtcbiAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGguYWJzKFxuICAgICAgICB0aGlzLmRhdGEucmVjdFszXSAtIHRoaXMuZGF0YS5yZWN0WzFdIC0gQk9SREVSX1NJWkVcbiAgICAgICk7XG4gICAgICBjb25zdCBudW1iZXJPZkxpbmVzID0gTWF0aC5yb3VuZChoZWlnaHQgLyAoTElORV9GQUNUT1IgKiBmb250U2l6ZSkpIHx8IDE7XG4gICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gaGVpZ2h0IC8gbnVtYmVyT2ZMaW5lcztcbiAgICAgIGNvbXB1dGVkRm9udFNpemUgPSBNYXRoLm1pbihcbiAgICAgICAgZm9udFNpemUsXG4gICAgICAgIHJvdW5kVG9PbmVEZWNpbWFsKGxpbmVIZWlnaHQgLyBMSU5FX0ZBQ1RPUilcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGguYWJzKFxuICAgICAgICB0aGlzLmRhdGEucmVjdFszXSAtIHRoaXMuZGF0YS5yZWN0WzFdIC0gQk9SREVSX1NJWkVcbiAgICAgICk7XG4gICAgICBjb21wdXRlZEZvbnRTaXplID0gTWF0aC5taW4oXG4gICAgICAgIGZvbnRTaXplLFxuICAgICAgICByb3VuZFRvT25lRGVjaW1hbChoZWlnaHQgLyBMSU5FX0ZBQ1RPUilcbiAgICAgICk7XG4gICAgfVxuICAgIHN0eWxlLmZvbnRTaXplID0gYGNhbGMoJHtjb21wdXRlZEZvbnRTaXplfXB4ICogdmFyKC0tdG90YWwtc2NhbGUtZmFjdG9yKSlgO1xuXG4gICAgc3R5bGUuY29sb3IgPSBVdGlsLm1ha2VIZXhDb2xvcihmb250Q29sb3JbMF0sIGZvbnRDb2xvclsxXSwgZm9udENvbG9yWzJdKTtcblxuICAgIGlmICh0aGlzLmRhdGEudGV4dEFsaWdubWVudCAhPT0gbnVsbCkge1xuICAgICAgc3R5bGUudGV4dEFsaWduID0gVEVYVF9BTElHTk1FTlRbdGhpcy5kYXRhLnRleHRBbGlnbm1lbnRdO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRSZXF1aXJlZChlbGVtZW50LCBpc1JlcXVpcmVkKSB7XG4gICAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwicmVxdWlyZWRcIik7XG4gICAgfVxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1yZXF1aXJlZFwiLCBpc1JlcXVpcmVkKTtcbiAgfVxufVxuXG5jbGFzcyBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPVxuICAgICAgcGFyYW1ldGVycy5yZW5kZXJGb3JtcyB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmhhc093bkNhbnZhcyB8fFxuICAgICAgKCFwYXJhbWV0ZXJzLmRhdGEuaGFzQXBwZWFyYW5jZSAmJiAhIXBhcmFtZXRlcnMuZGF0YS5maWVsZFZhbHVlKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSB9KTtcbiAgfVxuXG4gIHNldFByb3BlcnR5T25TaWJsaW5ncyhiYXNlLCBrZXksIHZhbHVlLCBrZXlJblN0b3JhZ2UpIHtcbiAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5fZ2V0RWxlbWVudHNCeU5hbWUoXG4gICAgICBiYXNlLm5hbWUsXG4gICAgICAvKiBza2lwSWQgPSAqLyBiYXNlLmlkXG4gICAgKSkge1xuICAgICAgaWYgKGVsZW1lbnQuZG9tRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmRvbUVsZW1lbnRba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgc3RvcmFnZS5zZXRWYWx1ZShlbGVtZW50LmlkLCB7IFtrZXlJblN0b3JhZ2VdOiB2YWx1ZSB9KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuYW5ub3RhdGlvblN0b3JhZ2U7XG4gICAgY29uc3QgaWQgPSB0aGlzLmRhdGEuaWQ7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGV4dFdpZGdldEFubm90YXRpb25cIik7XG5cbiAgICBsZXQgZWxlbWVudCA9IG51bGw7XG4gICAgaWYgKHRoaXMucmVuZGVyRm9ybXMpIHtcbiAgICAgIC8vIE5PVEU6IFdlIGNhbm5vdCBzZXQgdGhlIHZhbHVlcyB1c2luZyBgZWxlbWVudC52YWx1ZWAgYmVsb3csIHNpbmNlIGl0XG4gICAgICAvLyAgICAgICBwcmV2ZW50cyB0aGUgQW5ub3RhdGlvbkxheWVyIHJhc3Rlcml6ZXIgaW4gYHRlc3QvZHJpdmVyLmpzYFxuICAgICAgLy8gICAgICAgZnJvbSBwYXJzaW5nIHRoZSBlbGVtZW50cyBjb3JyZWN0bHkgZm9yIHRoZSByZWZlcmVuY2UgdGVzdHMuXG4gICAgICBjb25zdCBzdG9yZWREYXRhID0gc3RvcmFnZS5nZXRWYWx1ZShpZCwge1xuICAgICAgICB2YWx1ZTogdGhpcy5kYXRhLmZpZWxkVmFsdWUsXG4gICAgICB9KTtcbiAgICAgIGxldCB0ZXh0Q29udGVudCA9IHN0b3JlZERhdGEudmFsdWUgfHwgXCJcIjtcbiAgICAgIGNvbnN0IG1heExlbiA9IHN0b3JhZ2UuZ2V0VmFsdWUoaWQsIHtcbiAgICAgICAgY2hhckxpbWl0OiB0aGlzLmRhdGEubWF4TGVuLFxuICAgICAgfSkuY2hhckxpbWl0O1xuICAgICAgaWYgKG1heExlbiAmJiB0ZXh0Q29udGVudC5sZW5ndGggPiBtYXhMZW4pIHtcbiAgICAgICAgdGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudC5zbGljZSgwLCBtYXhMZW4pO1xuICAgICAgfVxuXG4gICAgICBsZXQgZmllbGRGb3JtYXR0ZWRWYWx1ZXMgPVxuICAgICAgICBzdG9yZWREYXRhLmZvcm1hdHRlZFZhbHVlIHx8IHRoaXMuZGF0YS50ZXh0Q29udGVudD8uam9pbihcIlxcblwiKSB8fCBudWxsO1xuICAgICAgaWYgKGZpZWxkRm9ybWF0dGVkVmFsdWVzICYmIHRoaXMuZGF0YS5jb21iKSB7XG4gICAgICAgIGZpZWxkRm9ybWF0dGVkVmFsdWVzID0gZmllbGRGb3JtYXR0ZWRWYWx1ZXMucmVwbGFjZUFsbCgvXFxzKy9nLCBcIlwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZWxlbWVudERhdGEgPSB7XG4gICAgICAgIHVzZXJWYWx1ZTogdGV4dENvbnRlbnQsXG4gICAgICAgIGZvcm1hdHRlZFZhbHVlOiBmaWVsZEZvcm1hdHRlZFZhbHVlcyxcbiAgICAgICAgbGFzdENvbW1pdHRlZFZhbHVlOiBudWxsLFxuICAgICAgICBjb21taXRLZXk6IDEsXG4gICAgICAgIGZvY3VzZWQ6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuZGF0YS5tdWx0aUxpbmUpIHtcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGZpZWxkRm9ybWF0dGVkVmFsdWVzID8/IHRleHRDb250ZW50O1xuICAgICAgICBpZiAodGhpcy5kYXRhLmRvTm90U2Nyb2xsKSB7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvd1kgPSBcImhpZGRlblwiO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBlbGVtZW50LnR5cGUgPSB0aGlzLmRhdGEucGFzc3dvcmQgPyBcInBhc3N3b3JkXCIgOiBcInRleHRcIjtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBmaWVsZEZvcm1hdHRlZFZhbHVlcyA/PyB0ZXh0Q29udGVudCk7XG4gICAgICAgIGlmICh0aGlzLmRhdGEuZG9Ob3RTY3JvbGwpIHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93WCA9IFwiaGlkZGVuXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRhdGEuaGFzT3duQ2FudmFzKSB7XG4gICAgICAgIGVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIEdldEVsZW1lbnRzQnlOYW1lU2V0LmFkZChlbGVtZW50KTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1lbGVtZW50LWlkXCIsIGlkKTtcblxuICAgICAgZWxlbWVudC5kaXNhYmxlZCA9IHRoaXMuZGF0YS5yZWFkT25seTtcbiAgICAgIGVsZW1lbnQubmFtZSA9IHRoaXMuZGF0YS5maWVsZE5hbWU7XG4gICAgICBlbGVtZW50LnRhYkluZGV4ID0gREVGQVVMVF9UQUJfSU5ERVg7XG5cbiAgICAgIHRoaXMuX3NldFJlcXVpcmVkKGVsZW1lbnQsIHRoaXMuZGF0YS5yZXF1aXJlZCk7XG5cbiAgICAgIGlmIChtYXhMZW4pIHtcbiAgICAgICAgZWxlbWVudC5tYXhMZW5ndGggPSBtYXhMZW47XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGV2ZW50ID0+IHtcbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5T25TaWJsaW5ncyhcbiAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgIFwidmFsdWVcIixcbiAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUsXG4gICAgICAgICAgXCJ2YWx1ZVwiXG4gICAgICAgICk7XG4gICAgICAgIGVsZW1lbnREYXRhLmZvcm1hdHRlZFZhbHVlID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldGZvcm1cIiwgZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSB0aGlzLmRhdGEuZGVmYXVsdEZpZWxkVmFsdWUgPz8gXCJcIjtcbiAgICAgICAgZWxlbWVudC52YWx1ZSA9IGVsZW1lbnREYXRhLnVzZXJWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgZWxlbWVudERhdGEuZm9ybWF0dGVkVmFsdWUgPSBudWxsO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCBibHVyTGlzdGVuZXIgPSBldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IHsgZm9ybWF0dGVkVmFsdWUgfSA9IGVsZW1lbnREYXRhO1xuICAgICAgICBpZiAoZm9ybWF0dGVkVmFsdWUgIT09IG51bGwgJiYgZm9ybWF0dGVkVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGZvcm1hdHRlZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlc2V0IHRoZSBjdXJzb3IgcG9zaXRpb24gdG8gdGhlIHN0YXJ0IG9mIHRoZSBmaWVsZCAoaXNzdWUgMTIzNTkpLlxuICAgICAgICBldmVudC50YXJnZXQuc2Nyb2xsTGVmdCA9IDA7XG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5lbmFibGVTY3JpcHRpbmcgJiYgdGhpcy5oYXNKU0FjdGlvbnMpIHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIGlmIChlbGVtZW50RGF0YS5mb2N1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcbiAgICAgICAgICBpZiAoZWxlbWVudERhdGEudXNlclZhbHVlKSB7XG4gICAgICAgICAgICB0YXJnZXQudmFsdWUgPSBlbGVtZW50RGF0YS51c2VyVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnREYXRhLmxhc3RDb21taXR0ZWRWYWx1ZSA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICBlbGVtZW50RGF0YS5jb21taXRLZXkgPSAxO1xuICAgICAgICAgIGlmICghdGhpcy5kYXRhLmFjdGlvbnM/LkZvY3VzKSB7XG4gICAgICAgICAgICBlbGVtZW50RGF0YS5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZyb21zYW5kYm94XCIsIGpzRXZlbnQgPT4ge1xuICAgICAgICAgIHRoaXMuc2hvd0VsZW1lbnRBbmRIaWRlQ2FudmFzKGpzRXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICBjb25zdCBhY3Rpb25zID0ge1xuICAgICAgICAgICAgdmFsdWUoZXZlbnQpIHtcbiAgICAgICAgICAgICAgZWxlbWVudERhdGEudXNlclZhbHVlID0gZXZlbnQuZGV0YWlsLnZhbHVlID8/IFwiXCI7XG4gICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IGVsZW1lbnREYXRhLnVzZXJWYWx1ZS50b1N0cmluZygpIH0pO1xuICAgICAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSBlbGVtZW50RGF0YS51c2VyVmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUoZXZlbnQpIHtcbiAgICAgICAgICAgICAgY29uc3QgeyBmb3JtYXR0ZWRWYWx1ZSB9ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICAgICAgICBlbGVtZW50RGF0YS5mb3JtYXR0ZWRWYWx1ZSA9IGZvcm1hdHRlZFZhbHVlO1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0ICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIC8vIElucHV0IGhhc24ndCB0aGUgZm9jdXMgc28gZGlzcGxheSBmb3JtYXR0ZWQgc3RyaW5nXG4gICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gZm9ybWF0dGVkVmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxSYW5nZShldmVudCkge1xuICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoLi4uZXZlbnQuZGV0YWlsLnNlbFJhbmdlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGFyTGltaXQ6IGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgeyBjaGFyTGltaXQgfSA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xuICAgICAgICAgICAgICBpZiAoY2hhckxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcIm1heExlbmd0aFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKFwibWF4TGVuZ3RoXCIsIGNoYXJMaW1pdCk7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGVsZW1lbnREYXRhLnVzZXJWYWx1ZTtcbiAgICAgICAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPD0gY2hhckxpbWl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMCwgY2hhckxpbWl0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gZWxlbWVudERhdGEudXNlclZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWUgfSk7XG5cbiAgICAgICAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IFwiS2V5c3Ryb2tlXCIsXG4gICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgIHdpbGxDb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBjb21taXRLZXk6IDEsXG4gICAgICAgICAgICAgICAgICBzZWxTdGFydDogdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICAgICAgICAgICAgc2VsRW5kOiB0YXJnZXQuc2VsZWN0aW9uRW5kLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnRGcm9tU2FuZGJveChhY3Rpb25zLCBqc0V2ZW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRXZlbiBpZiB0aGUgZmllbGQgaGFzbid0IGFueSBhY3Rpb25zXG4gICAgICAgIC8vIGxlYXZpbmcgaXQgY2FuIHN0aWxsIHRyaWdnZXIgc29tZSBhY3Rpb25zIHdpdGggQ2FsY3VsYXRlXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIGVsZW1lbnREYXRhLmNvbW1pdEtleSA9IDE7XG4gICAgICAgICAgLy8gSWYgdGhlIGtleSBpcyBvbmUgb2YgRXNjYXBlLCBFbnRlciB0aGVuIHRoZSBkYXRhIGFyZSBjb21taXR0ZWQuXG4gICAgICAgICAgLy8gSWYgd2UndmUgYSBUYWIgdGhlbiBkYXRhIHdpbGwgYmUgY29tbWl0dGVkIG9uIGJsdXIuXG4gICAgICAgICAgbGV0IGNvbW1pdEtleSA9IC0xO1xuICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIGNvbW1pdEtleSA9IDA7XG4gICAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIiAmJiAhdGhpcy5kYXRhLm11bHRpTGluZSkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSd2ZSBhIG11bHRpbGluZSBmaWVsZCwgXCJFbnRlclwiIGtleSBpcyBhIGtleSBhcyB0aGUgb3RoZXJcbiAgICAgICAgICAgIC8vIGhlbmNlIHdlIGRvbid0IGNvbW1pdCB0aGUgZGF0YSAoQWNyb2JhdCBiZWhhdmVzIHRoZSBzYW1lIHdheSlcbiAgICAgICAgICAgIC8vIChzZWUgaXNzdWUgIzE1NjI3KS5cbiAgICAgICAgICAgIGNvbW1pdEtleSA9IDI7XG4gICAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09IFwiVGFiXCIpIHtcbiAgICAgICAgICAgIGVsZW1lbnREYXRhLmNvbW1pdEtleSA9IDM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb21taXRLZXkgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICBpZiAoZWxlbWVudERhdGEubGFzdENvbW1pdHRlZFZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50RGF0YS5sYXN0Q29tbWl0dGVkVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAvLyBTYXZlIHRoZSBlbnRlcmVkIHZhbHVlXG4gICAgICAgICAgZWxlbWVudERhdGEudXNlclZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgbmFtZTogXCJLZXlzdHJva2VcIixcbiAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgIHdpbGxDb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgIGNvbW1pdEtleSxcbiAgICAgICAgICAgICAgc2VsU3RhcnQ6IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25TdGFydCxcbiAgICAgICAgICAgICAgc2VsRW5kOiBldmVudC50YXJnZXQuc2VsZWN0aW9uRW5kLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IF9ibHVyTGlzdGVuZXIgPSBibHVyTGlzdGVuZXI7XG4gICAgICAgIGJsdXJMaXN0ZW5lciA9IG51bGw7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIGlmICghZWxlbWVudERhdGEuZm9jdXNlZCB8fCAhZXZlbnQucmVsYXRlZFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXRoaXMuZGF0YS5hY3Rpb25zPy5CbHVyKSB7XG4gICAgICAgICAgICBlbGVtZW50RGF0YS5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICBlbGVtZW50RGF0YS51c2VyVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICBpZiAoZWxlbWVudERhdGEubGFzdENvbW1pdHRlZFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBcIktleXN0cm9rZVwiLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgIHdpbGxDb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tbWl0S2V5OiBlbGVtZW50RGF0YS5jb21taXRLZXksXG4gICAgICAgICAgICAgICAgc2VsU3RhcnQ6IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25TdGFydCxcbiAgICAgICAgICAgICAgICBzZWxFbmQ6IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25FbmQsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX2JsdXJMaXN0ZW5lcihldmVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuYWN0aW9ucz8uS2V5c3Ryb2tlKSB7XG4gICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JlaW5wdXRcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgZWxlbWVudERhdGEubGFzdENvbW1pdHRlZFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgdGFyZ2V0IH0gPSBldmVudDtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQgfSA9IHRhcmdldDtcblxuICAgICAgICAgICAgbGV0IHNlbFN0YXJ0ID0gc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgICAgIHNlbEVuZCA9IHNlbGVjdGlvbkVuZDtcblxuICAgICAgICAgICAgc3dpdGNoIChldmVudC5pbnB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9yYXdnaXQuY29tL3czYy9pbnB1dC1ldmVudHMvdjEvaW5kZXguaHRtbCNpbnRlcmZhY2UtSW5wdXRFdmVudC1BdHRyaWJ1dGVzXG4gICAgICAgICAgICAgIGNhc2UgXCJkZWxldGVXb3JkQmFja3dhcmRcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoMCwgc2VsZWN0aW9uU3RhcnQpXG4gICAgICAgICAgICAgICAgICAubWF0Y2goL1xcdypbXlxcd10qJC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgc2VsU3RhcnQgLT0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwiZGVsZXRlV29yZEZvcndhcmRcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoc2VsZWN0aW9uU3RhcnQpXG4gICAgICAgICAgICAgICAgICAubWF0Y2goL15bXlxcd10qXFx3Ki8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgc2VsRW5kICs9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZUNvbnRlbnRCYWNrd2FyZFwiOlxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25TdGFydCA9PT0gc2VsZWN0aW9uRW5kKSB7XG4gICAgICAgICAgICAgICAgICBzZWxTdGFydCAtPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZUNvbnRlbnRGb3J3YXJkXCI6XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09PSBzZWxlY3Rpb25FbmQpIHtcbiAgICAgICAgICAgICAgICAgIHNlbEVuZCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2UgaGFuZGxlIHRoZSBldmVudCBvdXJzZWx2ZXMuXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBcIktleXN0cm9rZVwiLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgIGNoYW5nZTogZGF0YSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHdpbGxDb21taXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNlbFN0YXJ0LFxuICAgICAgICAgICAgICAgIHNlbEVuZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoXG4gICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICBlbGVtZW50RGF0YSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbXCJmb2N1c1wiLCBcIkZvY3VzXCJdLFxuICAgICAgICAgICAgW1wiYmx1clwiLCBcIkJsdXJcIl0sXG4gICAgICAgICAgICBbXCJtb3VzZWRvd25cIiwgXCJNb3VzZSBEb3duXCJdLFxuICAgICAgICAgICAgW1wibW91c2VlbnRlclwiLCBcIk1vdXNlIEVudGVyXCJdLFxuICAgICAgICAgICAgW1wibW91c2VsZWF2ZVwiLCBcIk1vdXNlIEV4aXRcIl0sXG4gICAgICAgICAgICBbXCJtb3VzZXVwXCIsIFwiTW91c2UgVXBcIl0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBldmVudCA9PiBldmVudC50YXJnZXQudmFsdWVcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJsdXJMaXN0ZW5lcikge1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGJsdXJMaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuY29tYikge1xuICAgICAgICBjb25zdCBmaWVsZFdpZHRoID0gdGhpcy5kYXRhLnJlY3RbMl0gLSB0aGlzLmRhdGEucmVjdFswXTtcbiAgICAgICAgY29uc3QgY29tYldpZHRoID0gZmllbGRXaWR0aCAvIG1heExlbjtcblxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb21iXCIpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmxldHRlclNwYWNpbmcgPSBgY2FsYygke2NvbWJXaWR0aH1weCAqIHZhcigtLXRvdGFsLXNjYWxlLWZhY3RvcikgLSAxY2gpYDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5kYXRhLmZpZWxkVmFsdWU7XG4gICAgICBlbGVtZW50LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xuICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJ0YWJsZS1jZWxsXCI7XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuaGFzT3duQ2FudmFzKSB7XG4gICAgICAgIGVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9zZXRUZXh0U3R5bGUoZWxlbWVudCk7XG4gICAgdGhpcy5fc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpO1xuICAgIHRoaXMuX3NldERlZmF1bHRQcm9wZXJ0aWVzRnJvbUpTKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBTaWduYXR1cmVXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIFdpZGdldEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHsgaXNSZW5kZXJhYmxlOiAhIXBhcmFtZXRlcnMuZGF0YS5oYXNPd25DYW52YXMgfSk7XG4gIH1cbn1cblxuY2xhc3MgQ2hlY2tib3hXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIFdpZGdldEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHsgaXNSZW5kZXJhYmxlOiBwYXJhbWV0ZXJzLnJlbmRlckZvcm1zIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLmFubm90YXRpb25TdG9yYWdlO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgaWQgPSBkYXRhLmlkO1xuICAgIGxldCB2YWx1ZSA9IHN0b3JhZ2UuZ2V0VmFsdWUoaWQsIHtcbiAgICAgIHZhbHVlOiBkYXRhLmV4cG9ydFZhbHVlID09PSBkYXRhLmZpZWxkVmFsdWUsXG4gICAgfSkudmFsdWU7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgLy8gVGhlIHZhbHVlIGhhcyBiZWVuIGNoYW5nZWQgdGhyb3VnaCBqcyBhbmQgc2V0IGluIGFubm90YXRpb25TdG9yYWdlLlxuICAgICAgdmFsdWUgPSB2YWx1ZSAhPT0gXCJPZmZcIjtcbiAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWUgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImJ1dHRvbldpZGdldEFubm90YXRpb25cIiwgXCJjaGVja0JveFwiKTtcblxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgR2V0RWxlbWVudHNCeU5hbWVTZXQuYWRkKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1lbGVtZW50LWlkXCIsIGlkKTtcblxuICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBkYXRhLnJlYWRPbmx5O1xuICAgIHRoaXMuX3NldFJlcXVpcmVkKGVsZW1lbnQsIHRoaXMuZGF0YS5yZXF1aXJlZCk7XG4gICAgZWxlbWVudC50eXBlID0gXCJjaGVja2JveFwiO1xuICAgIGVsZW1lbnQubmFtZSA9IGRhdGEuZmllbGROYW1lO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIHRydWUpO1xuICAgIH1cbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImV4cG9ydFZhbHVlXCIsIGRhdGEuZXhwb3J0VmFsdWUpO1xuICAgIGVsZW1lbnQudGFiSW5kZXggPSBERUZBVUxUX1RBQl9JTkRFWDtcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBldmVudCA9PiB7XG4gICAgICBjb25zdCB7IG5hbWUsIGNoZWNrZWQgfSA9IGV2ZW50LnRhcmdldDtcbiAgICAgIGZvciAoY29uc3QgY2hlY2tib3ggb2YgdGhpcy5fZ2V0RWxlbWVudHNCeU5hbWUobmFtZSwgLyogc2tpcElkID0gKi8gaWQpKSB7XG4gICAgICAgIGNvbnN0IGN1ckNoZWNrZWQgPSBjaGVja2VkICYmIGNoZWNrYm94LmV4cG9ydFZhbHVlID09PSBkYXRhLmV4cG9ydFZhbHVlO1xuICAgICAgICBpZiAoY2hlY2tib3guZG9tRWxlbWVudCkge1xuICAgICAgICAgIGNoZWNrYm94LmRvbUVsZW1lbnQuY2hlY2tlZCA9IGN1ckNoZWNrZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShjaGVja2JveC5pZCwgeyB2YWx1ZTogY3VyQ2hlY2tlZCB9KTtcbiAgICAgIH1cbiAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IGNoZWNrZWQgfSk7XG4gICAgfSk7XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldGZvcm1cIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gZGF0YS5kZWZhdWx0RmllbGRWYWx1ZSB8fCBcIk9mZlwiO1xuICAgICAgZXZlbnQudGFyZ2V0LmNoZWNrZWQgPSBkZWZhdWx0VmFsdWUgPT09IGRhdGEuZXhwb3J0VmFsdWU7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5lbmFibGVTY3JpcHRpbmcgJiYgdGhpcy5oYXNKU0FjdGlvbnMpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZyb21zYW5kYm94XCIsIGpzRXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb25zID0ge1xuICAgICAgICAgIHZhbHVlKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC50YXJnZXQuY2hlY2tlZCA9IGV2ZW50LmRldGFpbC52YWx1ZSAhPT0gXCJPZmZcIjtcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IGV2ZW50LnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnRGcm9tU2FuZGJveChhY3Rpb25zLCBqc0V2ZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgW1xuICAgICAgICAgIFtcImNoYW5nZVwiLCBcIlZhbGlkYXRlXCJdLFxuICAgICAgICAgIFtcImNoYW5nZVwiLCBcIkFjdGlvblwiXSxcbiAgICAgICAgICBbXCJmb2N1c1wiLCBcIkZvY3VzXCJdLFxuICAgICAgICAgIFtcImJsdXJcIiwgXCJCbHVyXCJdLFxuICAgICAgICAgIFtcIm1vdXNlZG93blwiLCBcIk1vdXNlIERvd25cIl0sXG4gICAgICAgICAgW1wibW91c2VlbnRlclwiLCBcIk1vdXNlIEVudGVyXCJdLFxuICAgICAgICAgIFtcIm1vdXNlbGVhdmVcIiwgXCJNb3VzZSBFeGl0XCJdLFxuICAgICAgICAgIFtcIm1vdXNldXBcIiwgXCJNb3VzZSBVcFwiXSxcbiAgICAgICAgXSxcbiAgICAgICAgZXZlbnQgPT4gZXZlbnQudGFyZ2V0LmNoZWNrZWRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpO1xuICAgIHRoaXMuX3NldERlZmF1bHRQcm9wZXJ0aWVzRnJvbUpTKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBSYWRpb0J1dHRvbldpZGdldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGU6IHBhcmFtZXRlcnMucmVuZGVyRm9ybXMgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImJ1dHRvbldpZGdldEFubm90YXRpb25cIiwgXCJyYWRpb0J1dHRvblwiKTtcbiAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGlkID0gZGF0YS5pZDtcbiAgICBsZXQgdmFsdWUgPSBzdG9yYWdlLmdldFZhbHVlKGlkLCB7XG4gICAgICB2YWx1ZTogZGF0YS5maWVsZFZhbHVlID09PSBkYXRhLmJ1dHRvblZhbHVlLFxuICAgIH0pLnZhbHVlO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIC8vIFRoZSB2YWx1ZSBoYXMgYmVlbiBjaGFuZ2VkIHRocm91Z2gganMgYW5kIHNldCBpbiBhbm5vdGF0aW9uU3RvcmFnZS5cbiAgICAgIHZhbHVlID0gdmFsdWUgIT09IGRhdGEuYnV0dG9uVmFsdWU7XG4gICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlIH0pO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IG11bHRpcGxlIHJhZGlvIGJ1dHRvbnMgYXJlIGNoZWNrZWQuXG4gICAgICAvLyBTbyBpZiB0aGlzIG9uZSBpcyBjaGVja2VkIHdlIGp1c3QgcmVzZXQgdGhlIG90aGVyIG9uZXMuXG4gICAgICAvLyAoc2VlIGJ1ZyAxODY0MTM2KS4gVGhlbiB3aGVuIHRoZSBvdGhlciBvbmVzIHdpbGwgYmUgcmVuZGVyZWQgdGhleSB3aWxsXG4gICAgICAvLyB1bmNoZWNrZWQgKGJlY2F1c2Ugb2YgdGhlaXIgdmFsdWUgaW4gdGhlIHN0b3JhZ2UpLlxuICAgICAgLy8gQ29uc2VxdWVudGx5LCB0aGUgZmlyc3QgY2hlY2tlZCByYWRpbyBidXR0b24gd2lsbCBiZSB0aGUgb25seSBjaGVja2VkXG4gICAgICAvLyBvbmUuXG4gICAgICBmb3IgKGNvbnN0IHJhZGlvIG9mIHRoaXMuX2dldEVsZW1lbnRzQnlOYW1lKFxuICAgICAgICBkYXRhLmZpZWxkTmFtZSxcbiAgICAgICAgLyogc2tpcElkID0gKi8gaWRcbiAgICAgICkpIHtcbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShyYWRpby5pZCwgeyB2YWx1ZTogZmFsc2UgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBHZXRFbGVtZW50c0J5TmFtZVNldC5hZGQoZWxlbWVudCk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWVsZW1lbnQtaWRcIiwgaWQpO1xuXG4gICAgZWxlbWVudC5kaXNhYmxlZCA9IGRhdGEucmVhZE9ubHk7XG4gICAgdGhpcy5fc2V0UmVxdWlyZWQoZWxlbWVudCwgdGhpcy5kYXRhLnJlcXVpcmVkKTtcbiAgICBlbGVtZW50LnR5cGUgPSBcInJhZGlvXCI7XG4gICAgZWxlbWVudC5uYW1lID0gZGF0YS5maWVsZE5hbWU7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIiwgdHJ1ZSk7XG4gICAgfVxuICAgIGVsZW1lbnQudGFiSW5kZXggPSBERUZBVUxUX1RBQl9JTkRFWDtcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBldmVudCA9PiB7XG4gICAgICBjb25zdCB7IG5hbWUsIGNoZWNrZWQgfSA9IGV2ZW50LnRhcmdldDtcbiAgICAgIGZvciAoY29uc3QgcmFkaW8gb2YgdGhpcy5fZ2V0RWxlbWVudHNCeU5hbWUobmFtZSwgLyogc2tpcElkID0gKi8gaWQpKSB7XG4gICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUocmFkaW8uaWQsIHsgdmFsdWU6IGZhbHNlIH0pO1xuICAgICAgfVxuICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZTogY2hlY2tlZCB9KTtcbiAgICB9KTtcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0Zm9ybVwiLCBldmVudCA9PiB7XG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBkYXRhLmRlZmF1bHRGaWVsZFZhbHVlO1xuICAgICAgZXZlbnQudGFyZ2V0LmNoZWNrZWQgPVxuICAgICAgICBkZWZhdWx0VmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgZGVmYXVsdFZhbHVlID09PSBkYXRhLmJ1dHRvblZhbHVlO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuZW5hYmxlU2NyaXB0aW5nICYmIHRoaXMuaGFzSlNBY3Rpb25zKSB7XG4gICAgICBjb25zdCBwZGZCdXR0b25WYWx1ZSA9IGRhdGEuYnV0dG9uVmFsdWU7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVmcm9tc2FuZGJveFwiLCBqc0V2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgYWN0aW9ucyA9IHtcbiAgICAgICAgICB2YWx1ZTogZXZlbnQgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IHBkZkJ1dHRvblZhbHVlID09PSBldmVudC5kZXRhaWwudmFsdWU7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJhZGlvIG9mIHRoaXMuX2dldEVsZW1lbnRzQnlOYW1lKGV2ZW50LnRhcmdldC5uYW1lKSkge1xuICAgICAgICAgICAgICBjb25zdCBjdXJDaGVja2VkID0gY2hlY2tlZCAmJiByYWRpby5pZCA9PT0gaWQ7XG4gICAgICAgICAgICAgIGlmIChyYWRpby5kb21FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmFkaW8uZG9tRWxlbWVudC5jaGVja2VkID0gY3VyQ2hlY2tlZDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKHJhZGlvLmlkLCB7IHZhbHVlOiBjdXJDaGVja2VkIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnRGcm9tU2FuZGJveChhY3Rpb25zLCBqc0V2ZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgW1xuICAgICAgICAgIFtcImNoYW5nZVwiLCBcIlZhbGlkYXRlXCJdLFxuICAgICAgICAgIFtcImNoYW5nZVwiLCBcIkFjdGlvblwiXSxcbiAgICAgICAgICBbXCJmb2N1c1wiLCBcIkZvY3VzXCJdLFxuICAgICAgICAgIFtcImJsdXJcIiwgXCJCbHVyXCJdLFxuICAgICAgICAgIFtcIm1vdXNlZG93blwiLCBcIk1vdXNlIERvd25cIl0sXG4gICAgICAgICAgW1wibW91c2VlbnRlclwiLCBcIk1vdXNlIEVudGVyXCJdLFxuICAgICAgICAgIFtcIm1vdXNlbGVhdmVcIiwgXCJNb3VzZSBFeGl0XCJdLFxuICAgICAgICAgIFtcIm1vdXNldXBcIiwgXCJNb3VzZSBVcFwiXSxcbiAgICAgICAgXSxcbiAgICAgICAgZXZlbnQgPT4gZXZlbnQudGFyZ2V0LmNoZWNrZWRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpO1xuICAgIHRoaXMuX3NldERlZmF1bHRQcm9wZXJ0aWVzRnJvbUpTKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBQdXNoQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBMaW5rQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpZ25vcmVCb3JkZXI6IHBhcmFtZXRlcnMuZGF0YS5oYXNBcHBlYXJhbmNlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIFRoZSByZW5kZXJpbmcgYW5kIGZ1bmN0aW9uYWxpdHkgb2YgYSBwdXNoIGJ1dHRvbiB3aWRnZXQgYW5ub3RhdGlvbiBpc1xuICAgIC8vIGVxdWFsIHRvIHRoYXQgb2YgYSBsaW5rIGFubm90YXRpb24sIGJ1dCBtYXkgaGF2ZSBtb3JlIGZ1bmN0aW9uYWxpdHksIHN1Y2hcbiAgICAvLyBhcyBwZXJmb3JtaW5nIGFjdGlvbnMgb24gZm9ybSBmaWVsZHMgKHJlc2V0dGluZywgc3VibWl0dGluZywgZXQgY2V0ZXJhKS5cbiAgICBjb25zdCBjb250YWluZXIgPSBzdXBlci5yZW5kZXIoKTtcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcImJ1dHRvbldpZGdldEFubm90YXRpb25cIiwgXCJwdXNoQnV0dG9uXCIpO1xuXG4gICAgY29uc3QgbGlua0VsZW1lbnQgPSBjb250YWluZXIubGFzdENoaWxkO1xuICAgIGlmICh0aGlzLmVuYWJsZVNjcmlwdGluZyAmJiB0aGlzLmhhc0pTQWN0aW9ucyAmJiBsaW5rRWxlbWVudCkge1xuICAgICAgdGhpcy5fc2V0RGVmYXVsdFByb3BlcnRpZXNGcm9tSlMobGlua0VsZW1lbnQpO1xuXG4gICAgICBsaW5rRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlZnJvbXNhbmRib3hcIiwganNFdmVudCA9PiB7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnRGcm9tU2FuZGJveCh7fSwganNFdmVudCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG59XG5cbmNsYXNzIENob2ljZVdpZGdldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGU6IHBhcmFtZXRlcnMucmVuZGVyRm9ybXMgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImNob2ljZVdpZGdldEFubm90YXRpb25cIik7XG4gICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuYW5ub3RhdGlvblN0b3JhZ2U7XG4gICAgY29uc3QgaWQgPSB0aGlzLmRhdGEuaWQ7XG5cbiAgICBjb25zdCBzdG9yZWREYXRhID0gc3RvcmFnZS5nZXRWYWx1ZShpZCwge1xuICAgICAgdmFsdWU6IHRoaXMuZGF0YS5maWVsZFZhbHVlLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gICAgR2V0RWxlbWVudHNCeU5hbWVTZXQuYWRkKHNlbGVjdEVsZW1lbnQpO1xuICAgIHNlbGVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1lbGVtZW50LWlkXCIsIGlkKTtcblxuICAgIHNlbGVjdEVsZW1lbnQuZGlzYWJsZWQgPSB0aGlzLmRhdGEucmVhZE9ubHk7XG4gICAgdGhpcy5fc2V0UmVxdWlyZWQoc2VsZWN0RWxlbWVudCwgdGhpcy5kYXRhLnJlcXVpcmVkKTtcbiAgICBzZWxlY3RFbGVtZW50Lm5hbWUgPSB0aGlzLmRhdGEuZmllbGROYW1lO1xuICAgIHNlbGVjdEVsZW1lbnQudGFiSW5kZXggPSBERUZBVUxUX1RBQl9JTkRFWDtcblxuICAgIGxldCBhZGRBbkVtcHR5RW50cnkgPSB0aGlzLmRhdGEuY29tYm8gJiYgdGhpcy5kYXRhLm9wdGlvbnMubGVuZ3RoID4gMDtcblxuICAgIGlmICghdGhpcy5kYXRhLmNvbWJvKSB7XG4gICAgICAvLyBMaXN0IGJveGVzIGhhdmUgYSBzaXplIGFuZCAob3B0aW9uYWxseSkgbXVsdGlwbGUgc2VsZWN0aW9uLlxuICAgICAgc2VsZWN0RWxlbWVudC5zaXplID0gdGhpcy5kYXRhLm9wdGlvbnMubGVuZ3RoO1xuICAgICAgaWYgKHRoaXMuZGF0YS5tdWx0aVNlbGVjdCkge1xuICAgICAgICBzZWxlY3RFbGVtZW50Lm11bHRpcGxlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxlY3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldGZvcm1cIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gdGhpcy5kYXRhLmRlZmF1bHRGaWVsZFZhbHVlO1xuICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygc2VsZWN0RWxlbWVudC5vcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IG9wdGlvbi52YWx1ZSA9PT0gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSW5zZXJ0IHRoZSBvcHRpb25zIGludG8gdGhlIGNob2ljZSBmaWVsZC5cbiAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiB0aGlzLmRhdGEub3B0aW9ucykge1xuICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gb3B0aW9uLmRpc3BsYXlWYWx1ZTtcbiAgICAgIG9wdGlvbkVsZW1lbnQudmFsdWUgPSBvcHRpb24uZXhwb3J0VmFsdWU7XG4gICAgICBpZiAoc3RvcmVkRGF0YS52YWx1ZS5pbmNsdWRlcyhvcHRpb24uZXhwb3J0VmFsdWUpKSB7XG4gICAgICAgIG9wdGlvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIiwgdHJ1ZSk7XG4gICAgICAgIGFkZEFuRW1wdHlFbnRyeSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmQob3B0aW9uRWxlbWVudCk7XG4gICAgfVxuXG4gICAgbGV0IHJlbW92ZUVtcHR5RW50cnkgPSBudWxsO1xuICAgIGlmIChhZGRBbkVtcHR5RW50cnkpIHtcbiAgICAgIGNvbnN0IG5vbmVPcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG5vbmVPcHRpb25FbGVtZW50LnZhbHVlID0gXCIgXCI7XG4gICAgICBub25lT3B0aW9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJoaWRkZW5cIiwgdHJ1ZSk7XG4gICAgICBub25lT3B0aW9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLCB0cnVlKTtcbiAgICAgIHNlbGVjdEVsZW1lbnQucHJlcGVuZChub25lT3B0aW9uRWxlbWVudCk7XG5cbiAgICAgIHJlbW92ZUVtcHR5RW50cnkgPSAoKSA9PiB7XG4gICAgICAgIG5vbmVPcHRpb25FbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICBzZWxlY3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCByZW1vdmVFbXB0eUVudHJ5KTtcbiAgICAgICAgcmVtb3ZlRW1wdHlFbnRyeSA9IG51bGw7XG4gICAgICB9O1xuICAgICAgc2VsZWN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgcmVtb3ZlRW1wdHlFbnRyeSk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0VmFsdWUgPSBpc0V4cG9ydCA9PiB7XG4gICAgICBjb25zdCBuYW1lID0gaXNFeHBvcnQgPyBcInZhbHVlXCIgOiBcInRleHRDb250ZW50XCI7XG4gICAgICBjb25zdCB7IG9wdGlvbnMsIG11bHRpcGxlIH0gPSBzZWxlY3RFbGVtZW50O1xuICAgICAgaWYgKCFtdWx0aXBsZSkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5zZWxlY3RlZEluZGV4ID09PSAtMVxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogb3B0aW9uc1tvcHRpb25zLnNlbGVjdGVkSW5kZXhdW25hbWVdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXJcbiAgICAgICAgLmNhbGwob3B0aW9ucywgb3B0aW9uID0+IG9wdGlvbi5zZWxlY3RlZClcbiAgICAgICAgLm1hcChvcHRpb24gPT4gb3B0aW9uW25hbWVdKTtcbiAgICB9O1xuXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gZ2V0VmFsdWUoLyogaXNFeHBvcnQgKi8gZmFsc2UpO1xuXG4gICAgY29uc3QgZ2V0SXRlbXMgPSBldmVudCA9PiB7XG4gICAgICBjb25zdCBvcHRpb25zID0gZXZlbnQudGFyZ2V0Lm9wdGlvbnM7XG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKG9wdGlvbnMsIG9wdGlvbiA9PiAoe1xuICAgICAgICBkaXNwbGF5VmFsdWU6IG9wdGlvbi50ZXh0Q29udGVudCxcbiAgICAgICAgZXhwb3J0VmFsdWU6IG9wdGlvbi52YWx1ZSxcbiAgICAgIH0pKTtcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuZW5hYmxlU2NyaXB0aW5nICYmIHRoaXMuaGFzSlNBY3Rpb25zKSB7XG4gICAgICBzZWxlY3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVmcm9tc2FuZGJveFwiLCBqc0V2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgYWN0aW9ucyA9IHtcbiAgICAgICAgICB2YWx1ZShldmVudCkge1xuICAgICAgICAgICAgcmVtb3ZlRW1wdHlFbnRyeT8uKCk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmRldGFpbC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IG5ldyBTZXQoQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV0pO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygc2VsZWN0RWxlbWVudC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHZhbHVlcy5oYXMob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlKC8qIGlzRXhwb3J0ICovIHRydWUpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxlY3RlZFZhbHVlcyA9IGdldFZhbHVlKC8qIGlzRXhwb3J0ICovIGZhbHNlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG11bHRpcGxlU2VsZWN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50Lm11bHRpcGxlID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlbW92ZShldmVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHNlbGVjdEVsZW1lbnQub3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuZGV0YWlsLnJlbW92ZTtcbiAgICAgICAgICAgIG9wdGlvbnNbaW5kZXhdLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50LnJlbW92ZShpbmRleCk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGkgPSBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4LmNhbGwoXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBvcHRpb24gPT4gb3B0aW9uLnNlbGVjdGVkXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmIChpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnNbMF0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnZXRWYWx1ZSgvKiBpc0V4cG9ydCAqLyB0cnVlKSxcbiAgICAgICAgICAgICAgaXRlbXM6IGdldEl0ZW1zKGV2ZW50KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMgPSBnZXRWYWx1ZSgvKiBpc0V4cG9ydCAqLyBmYWxzZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbGVhcihldmVudCkge1xuICAgICAgICAgICAgd2hpbGUgKHNlbGVjdEVsZW1lbnQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQucmVtb3ZlKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZTogbnVsbCwgaXRlbXM6IFtdIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMgPSBnZXRWYWx1ZSgvKiBpc0V4cG9ydCAqLyBmYWxzZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbnNlcnQoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5kZXgsIGRpc3BsYXlWYWx1ZSwgZXhwb3J0VmFsdWUgfSA9IGV2ZW50LmRldGFpbC5pbnNlcnQ7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RDaGlsZCA9IHNlbGVjdEVsZW1lbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICBvcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGlzcGxheVZhbHVlO1xuICAgICAgICAgICAgb3B0aW9uRWxlbWVudC52YWx1ZSA9IGV4cG9ydFZhbHVlO1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgc2VsZWN0Q2hpbGQuYmVmb3JlKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmQob3B0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnZXRWYWx1ZSgvKiBpc0V4cG9ydCAqLyB0cnVlKSxcbiAgICAgICAgICAgICAgaXRlbXM6IGdldEl0ZW1zKGV2ZW50KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMgPSBnZXRWYWx1ZSgvKiBpc0V4cG9ydCAqLyBmYWxzZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpdGVtcyhldmVudCkge1xuICAgICAgICAgICAgY29uc3QgeyBpdGVtcyB9ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICAgICAgd2hpbGUgKHNlbGVjdEVsZW1lbnQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQucmVtb3ZlKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgZGlzcGxheVZhbHVlLCBleHBvcnRWYWx1ZSB9ID0gaXRlbTtcbiAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkaXNwbGF5VmFsdWU7XG4gICAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQudmFsdWUgPSBleHBvcnRWYWx1ZTtcbiAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmQob3B0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0RWxlbWVudC5vcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5vcHRpb25zWzBdLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlKC8qIGlzRXhwb3J0ICovIHRydWUpLFxuICAgICAgICAgICAgICBpdGVtczogZ2V0SXRlbXMoZXZlbnQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxlY3RlZFZhbHVlcyA9IGdldFZhbHVlKC8qIGlzRXhwb3J0ICovIGZhbHNlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluZGljZXMoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGljZXMgPSBuZXcgU2V0KGV2ZW50LmRldGFpbC5pbmRpY2VzKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGV2ZW50LnRhcmdldC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGluZGljZXMuaGFzKG9wdGlvbi5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnZXRWYWx1ZSgvKiBpc0V4cG9ydCAqLyB0cnVlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMgPSBnZXRWYWx1ZSgvKiBpc0V4cG9ydCAqLyBmYWxzZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlZGl0YWJsZShldmVudCkge1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmRpc2FibGVkID0gIWV2ZW50LmRldGFpbC5lZGl0YWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50RnJvbVNhbmRib3goYWN0aW9ucywganNFdmVudCk7XG4gICAgICB9KTtcblxuICAgICAgc2VsZWN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBleHBvcnRWYWx1ZSA9IGdldFZhbHVlKC8qIGlzRXhwb3J0ICovIHRydWUpO1xuICAgICAgICBjb25zdCBjaGFuZ2UgPSBnZXRWYWx1ZSgvKiBpc0V4cG9ydCAqLyBmYWxzZSk7XG4gICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IGV4cG9ydFZhbHVlIH0pO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWU6IFwiS2V5c3Ryb2tlXCIsXG4gICAgICAgICAgICB2YWx1ZTogc2VsZWN0ZWRWYWx1ZXMsXG4gICAgICAgICAgICBjaGFuZ2UsXG4gICAgICAgICAgICBjaGFuZ2VFeDogZXhwb3J0VmFsdWUsXG4gICAgICAgICAgICB3aWxsQ29tbWl0OiBmYWxzZSxcbiAgICAgICAgICAgIGNvbW1pdEtleTogMSxcbiAgICAgICAgICAgIGtleURvd246IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKFxuICAgICAgICBzZWxlY3RFbGVtZW50LFxuICAgICAgICBudWxsLFxuICAgICAgICBbXG4gICAgICAgICAgW1wiZm9jdXNcIiwgXCJGb2N1c1wiXSxcbiAgICAgICAgICBbXCJibHVyXCIsIFwiQmx1clwiXSxcbiAgICAgICAgICBbXCJtb3VzZWRvd25cIiwgXCJNb3VzZSBEb3duXCJdLFxuICAgICAgICAgIFtcIm1vdXNlZW50ZXJcIiwgXCJNb3VzZSBFbnRlclwiXSxcbiAgICAgICAgICBbXCJtb3VzZWxlYXZlXCIsIFwiTW91c2UgRXhpdFwiXSxcbiAgICAgICAgICBbXCJtb3VzZXVwXCIsIFwiTW91c2UgVXBcIl0sXG4gICAgICAgICAgW1wiaW5wdXRcIiwgXCJBY3Rpb25cIl0sXG4gICAgICAgICAgW1wiaW5wdXRcIiwgXCJWYWxpZGF0ZVwiXSxcbiAgICAgICAgXSxcbiAgICAgICAgZXZlbnQgPT4gZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZTogZ2V0VmFsdWUoLyogaXNFeHBvcnQgKi8gdHJ1ZSkgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLmNvbWJvKSB7XG4gICAgICB0aGlzLl9zZXRUZXh0U3R5bGUoc2VsZWN0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEp1c3QgdXNlIHRoZSBkZWZhdWx0IGZvbnQgc2l6ZS4uLlxuICAgICAgLy8gaXQncyBhIGJpdCBoYXJkIHRvIGd1ZXNzIHdoYXQgaXMgYSBnb29kIHNpemUuXG4gICAgfVxuICAgIHRoaXMuX3NldEJhY2tncm91bmRDb2xvcihzZWxlY3RFbGVtZW50KTtcbiAgICB0aGlzLl9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhzZWxlY3RFbGVtZW50KTtcblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChzZWxlY3RFbGVtZW50KTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgUG9wdXBBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IHsgZGF0YSwgZWxlbWVudHMgfSA9IHBhcmFtZXRlcnM7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGU6IEFubm90YXRpb25FbGVtZW50Ll9oYXNQb3B1cERhdGEoZGF0YSkgfSk7XG4gICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzO1xuICAgIHRoaXMucG9wdXAgPSBudWxsO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJwb3B1cEFubm90YXRpb25cIik7XG5cbiAgICBjb25zdCBwb3B1cCA9ICh0aGlzLnBvcHVwID0gbmV3IFBvcHVwRWxlbWVudCh7XG4gICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgY29sb3I6IHRoaXMuZGF0YS5jb2xvcixcbiAgICAgIHRpdGxlT2JqOiB0aGlzLmRhdGEudGl0bGVPYmosXG4gICAgICBtb2RpZmljYXRpb25EYXRlOiB0aGlzLmRhdGEubW9kaWZpY2F0aW9uRGF0ZSxcbiAgICAgIGNvbnRlbnRzT2JqOiB0aGlzLmRhdGEuY29udGVudHNPYmosXG4gICAgICByaWNoVGV4dDogdGhpcy5kYXRhLnJpY2hUZXh0LFxuICAgICAgcmVjdDogdGhpcy5kYXRhLnJlY3QsXG4gICAgICBwYXJlbnRSZWN0OiB0aGlzLmRhdGEucGFyZW50UmVjdCB8fCBudWxsLFxuICAgICAgcGFyZW50OiB0aGlzLnBhcmVudCxcbiAgICAgIGVsZW1lbnRzOiB0aGlzLmVsZW1lbnRzLFxuICAgICAgb3BlbjogdGhpcy5kYXRhLm9wZW4sXG4gICAgfSkpO1xuXG4gICAgY29uc3QgZWxlbWVudElkcyA9IFtdO1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XG4gICAgICBlbGVtZW50LnBvcHVwID0gcG9wdXA7XG4gICAgICBlbGVtZW50LmNvbnRhaW5lci5hcmlhSGFzUG9wdXAgPSBcImRpYWxvZ1wiO1xuICAgICAgZWxlbWVudElkcy5wdXNoKGVsZW1lbnQuZGF0YS5pZCk7XG4gICAgICBlbGVtZW50LmFkZEhpZ2hsaWdodEFyZWEoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXG4gICAgICBcImFyaWEtY29udHJvbHNcIixcbiAgICAgIGVsZW1lbnRJZHMubWFwKGlkID0+IGAke0Fubm90YXRpb25QcmVmaXh9JHtpZH1gKS5qb2luKFwiLFwiKVxuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgUG9wdXBFbGVtZW50IHtcbiAgI2JvdW5kS2V5RG93biA9IHRoaXMuI2tleURvd24uYmluZCh0aGlzKTtcblxuICAjYm91bmRIaWRlID0gdGhpcy4jaGlkZS5iaW5kKHRoaXMpO1xuXG4gICNib3VuZFNob3cgPSB0aGlzLiNzaG93LmJpbmQodGhpcyk7XG5cbiAgI2JvdW5kVG9nZ2xlID0gdGhpcy4jdG9nZ2xlLmJpbmQodGhpcyk7XG5cbiAgI2NvbG9yID0gbnVsbDtcblxuICAjY29udGFpbmVyID0gbnVsbDtcblxuICAjY29udGVudHNPYmogPSBudWxsO1xuXG4gICNkYXRlT2JqID0gbnVsbDtcblxuICAjZWxlbWVudHMgPSBudWxsO1xuXG4gICNwYXJlbnQgPSBudWxsO1xuXG4gICNwYXJlbnRSZWN0ID0gbnVsbDtcblxuICAjcGlubmVkID0gZmFsc2U7XG5cbiAgI3BvcHVwID0gbnVsbDtcblxuICAjcG9zaXRpb24gPSBudWxsO1xuXG4gICNyZWN0ID0gbnVsbDtcblxuICAjcmljaFRleHQgPSBudWxsO1xuXG4gICN0aXRsZU9iaiA9IG51bGw7XG5cbiAgI3VwZGF0ZXMgPSBudWxsO1xuXG4gICN3YXNWaXNpYmxlID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGNvbnRhaW5lcixcbiAgICBjb2xvcixcbiAgICBlbGVtZW50cyxcbiAgICB0aXRsZU9iaixcbiAgICBtb2RpZmljYXRpb25EYXRlLFxuICAgIGNvbnRlbnRzT2JqLFxuICAgIHJpY2hUZXh0LFxuICAgIHBhcmVudCxcbiAgICByZWN0LFxuICAgIHBhcmVudFJlY3QsXG4gICAgb3BlbixcbiAgfSkge1xuICAgIHRoaXMuI2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB0aGlzLiN0aXRsZU9iaiA9IHRpdGxlT2JqO1xuICAgIHRoaXMuI2NvbnRlbnRzT2JqID0gY29udGVudHNPYmo7XG4gICAgdGhpcy4jcmljaFRleHQgPSByaWNoVGV4dDtcbiAgICB0aGlzLiNwYXJlbnQgPSBwYXJlbnQ7XG4gICAgdGhpcy4jY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLiNyZWN0ID0gcmVjdDtcbiAgICB0aGlzLiNwYXJlbnRSZWN0ID0gcGFyZW50UmVjdDtcbiAgICB0aGlzLiNlbGVtZW50cyA9IGVsZW1lbnRzO1xuXG4gICAgLy8gVGhlIG1vZGlmaWNhdGlvbiBkYXRlIGlzIHNob3duIGluIHRoZSBwb3B1cCBpbnN0ZWFkIG9mIHRoZSBjcmVhdGlvblxuICAgIC8vIGRhdGUgaWYgaXQgaXMgYXZhaWxhYmxlIGFuZCBjYW4gYmUgcGFyc2VkIGNvcnJlY3RseSwgd2hpY2ggaXNcbiAgICAvLyBjb25zaXN0ZW50IHdpdGggb3RoZXIgdmlld2VycyBzdWNoIGFzIEFkb2JlIEFjcm9iYXQuXG4gICAgdGhpcy4jZGF0ZU9iaiA9IFBERkRhdGVTdHJpbmcudG9EYXRlT2JqZWN0KG1vZGlmaWNhdGlvbkRhdGUpO1xuXG4gICAgdGhpcy50cmlnZ2VyID0gZWxlbWVudHMuZmxhdE1hcChlID0+IGUuZ2V0RWxlbWVudHNUb1RyaWdnZXJQb3B1cCgpKTtcbiAgICAvLyBBdHRhY2ggdGhlIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgdHJpZ2dlciBlbGVtZW50LlxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLnRyaWdnZXIpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuI2JvdW5kVG9nZ2xlKTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgdGhpcy4jYm91bmRTaG93KTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgdGhpcy4jYm91bmRIaWRlKTtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwVHJpZ2dlckFyZWFcIik7XG4gICAgfVxuXG4gICAgLy8gQXR0YWNoIHRoZSBldmVudCBsaXN0ZW5lciB0byB0b2dnbGUgdGhlIHBvcHVwIHdpdGggdGhlIGtleWJvYXJkLlxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgZWxlbWVudC5jb250YWluZXI/LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuI2JvdW5kS2V5RG93bik7XG4gICAgfVxuXG4gICAgdGhpcy4jY29udGFpbmVyLmhpZGRlbiA9IHRydWU7XG4gICAgaWYgKG9wZW4pIHtcbiAgICAgIHRoaXMuI3RvZ2dsZSgpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpIHtcbiAgICAgIC8vIFNpbmNlIHRoZSBwb3B1cCBpcyBsYXppbHkgY3JlYXRlZCwgd2UgbmVlZCB0byBlbnN1cmUgdGhhdCBpdCdsbCBiZVxuICAgICAgLy8gY3JlYXRlZCBhbmQgZGlzcGxheWVkIGR1cmluZyByZWZlcmVuY2UgdGVzdHMuXG4gICAgICB0aGlzLiNwYXJlbnQucG9wdXBTaG93LnB1c2goYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy4jY29udGFpbmVyLmhpZGRlbikge1xuICAgICAgICAgIHRoaXMuI3Nob3coKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLiNwb3B1cCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBvcHVwID0gKHRoaXMuI3BvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgcG9wdXAuY2xhc3NOYW1lID0gXCJwb3B1cFwiO1xuXG4gICAgaWYgKHRoaXMuI2NvbG9yKSB7XG4gICAgICBjb25zdCBiYXNlQ29sb3IgPSAocG9wdXAuc3R5bGUub3V0bGluZUNvbG9yID0gVXRpbC5tYWtlSGV4Q29sb3IoXG4gICAgICAgIC4uLnRoaXMuI2NvbG9yXG4gICAgICApKTtcbiAgICAgIHBvcHVwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGBjb2xvci1taXgoaW4gc3JnYiwgJHtiYXNlQ29sb3J9IDMwJSwgd2hpdGUpYDtcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBoZWFkZXIuY2xhc3NOYW1lID0gXCJoZWFkZXJcIjtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICBoZWFkZXIuYXBwZW5kKHRpdGxlKTtcbiAgICAoeyBkaXI6IHRpdGxlLmRpciwgc3RyOiB0aXRsZS50ZXh0Q29udGVudCB9ID0gdGhpcy4jdGl0bGVPYmopO1xuICAgIHBvcHVwLmFwcGVuZChoZWFkZXIpO1xuXG4gICAgaWYgKHRoaXMuI2RhdGVPYmopIHtcbiAgICAgIGNvbnN0IG1vZGlmaWNhdGlvbkRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgIG1vZGlmaWNhdGlvbkRhdGUuY2xhc3NMaXN0LmFkZChcInBvcHVwRGF0ZVwiKTtcbiAgICAgIG1vZGlmaWNhdGlvbkRhdGUuc2V0QXR0cmlidXRlKFxuICAgICAgICBcImRhdGEtbDEwbi1pZFwiLFxuICAgICAgICBcInBkZmpzLWFubm90YXRpb24tZGF0ZS10aW1lLXN0cmluZ1wiXG4gICAgICApO1xuICAgICAgbW9kaWZpY2F0aW9uRGF0ZS5zZXRBdHRyaWJ1dGUoXG4gICAgICAgIFwiZGF0YS1sMTBuLWFyZ3NcIixcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBkYXRlT2JqOiB0aGlzLiNkYXRlT2JqLnZhbHVlT2YoKSB9KVxuICAgICAgKTtcbiAgICAgIGhlYWRlci5hcHBlbmQobW9kaWZpY2F0aW9uRGF0ZSk7XG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IHRoaXMuI2h0bWw7XG4gICAgaWYgKGh0bWwpIHtcbiAgICAgIFhmYUxheWVyLnJlbmRlcih7XG4gICAgICAgIHhmYUh0bWw6IGh0bWwsXG4gICAgICAgIGludGVudDogXCJyaWNoVGV4dFwiLFxuICAgICAgICBkaXY6IHBvcHVwLFxuICAgICAgfSk7XG4gICAgICBwb3B1cC5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZChcInJpY2hUZXh0XCIsIFwicG9wdXBDb250ZW50XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjb250ZW50cyA9IHRoaXMuX2Zvcm1hdENvbnRlbnRzKHRoaXMuI2NvbnRlbnRzT2JqKTtcbiAgICAgIHBvcHVwLmFwcGVuZChjb250ZW50cyk7XG4gICAgfVxuICAgIHRoaXMuI2NvbnRhaW5lci5hcHBlbmQocG9wdXApO1xuICB9XG5cbiAgZ2V0ICNodG1sKCkge1xuICAgIGNvbnN0IHJpY2hUZXh0ID0gdGhpcy4jcmljaFRleHQ7XG4gICAgY29uc3QgY29udGVudHNPYmogPSB0aGlzLiNjb250ZW50c09iajtcbiAgICBpZiAoXG4gICAgICByaWNoVGV4dD8uc3RyICYmXG4gICAgICAoIWNvbnRlbnRzT2JqPy5zdHIgfHwgY29udGVudHNPYmouc3RyID09PSByaWNoVGV4dC5zdHIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy4jcmljaFRleHQuaHRtbCB8fCBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGdldCAjZm9udFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2h0bWw/LmF0dHJpYnV0ZXM/LnN0eWxlPy5mb250U2l6ZSB8fCAwO1xuICB9XG5cbiAgZ2V0ICNmb250Q29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2h0bWw/LmF0dHJpYnV0ZXM/LnN0eWxlPy5jb2xvciB8fCBudWxsO1xuICB9XG5cbiAgI21ha2VQb3B1cENvbnRlbnQodGV4dCkge1xuICAgIGNvbnN0IHBvcHVwTGluZXMgPSBbXTtcbiAgICBjb25zdCBwb3B1cENvbnRlbnQgPSB7XG4gICAgICBzdHI6IHRleHQsXG4gICAgICBodG1sOiB7XG4gICAgICAgIG5hbWU6IFwiZGl2XCIsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICBkaXI6IFwiYXV0b1wiLFxuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwicFwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IHBvcHVwTGluZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBjb25zdCBsaW5lQXR0cmlidXRlcyA9IHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGNvbG9yOiB0aGlzLiNmb250Q29sb3IsXG4gICAgICAgIGZvbnRTaXplOiB0aGlzLiNmb250U2l6ZVxuICAgICAgICAgID8gYGNhbGMoJHt0aGlzLiNmb250U2l6ZX1weCAqIHZhcigtLXRvdGFsLXNjYWxlLWZhY3RvcikpYFxuICAgICAgICAgIDogXCJcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGV4dC5zcGxpdChcIlxcblwiKSkge1xuICAgICAgcG9wdXBMaW5lcy5wdXNoKHtcbiAgICAgICAgbmFtZTogXCJzcGFuXCIsXG4gICAgICAgIHZhbHVlOiBsaW5lLFxuICAgICAgICBhdHRyaWJ1dGVzOiBsaW5lQXR0cmlidXRlcyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcG9wdXBDb250ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0aGUgY29udGVudHMgb2YgdGhlIHBvcHVwIGJ5IGFkZGluZyBuZXdsaW5lcyB3aGVyZSBuZWNlc3NhcnkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgc3RyaW5nPn0gY29udGVudHNPYmpcbiAgICogQG1lbWJlcm9mIFBvcHVwRWxlbWVudFxuICAgKiBAcmV0dXJucyB7SFRNTFBhcmFncmFwaEVsZW1lbnR9XG4gICAqL1xuICBfZm9ybWF0Q29udGVudHMoeyBzdHIsIGRpciB9KSB7XG4gICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHAuY2xhc3NMaXN0LmFkZChcInBvcHVwQ29udGVudFwiKTtcbiAgICBwLmRpciA9IGRpcjtcbiAgICBjb25zdCBsaW5lcyA9IHN0ci5zcGxpdCgvKD86XFxyXFxuP3xcXG4pLyk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbGluZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgcC5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGluZSkpO1xuICAgICAgaWYgKGkgPCBpaSAtIDEpIHtcbiAgICAgICAgcC5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICAja2V5RG93bihldmVudCkge1xuICAgIGlmIChldmVudC5hbHRLZXkgfHwgZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiIHx8IChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIgJiYgdGhpcy4jcGlubmVkKSkge1xuICAgICAgdGhpcy4jdG9nZ2xlKCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlRWRpdGVkKHsgcmVjdCwgcG9wdXBDb250ZW50IH0pIHtcbiAgICB0aGlzLiN1cGRhdGVzIHx8PSB7XG4gICAgICBjb250ZW50c09iajogdGhpcy4jY29udGVudHNPYmosXG4gICAgICByaWNoVGV4dDogdGhpcy4jcmljaFRleHQsXG4gICAgfTtcbiAgICBpZiAocmVjdCkge1xuICAgICAgdGhpcy4jcG9zaXRpb24gPSBudWxsO1xuICAgIH1cbiAgICBpZiAocG9wdXBDb250ZW50KSB7XG4gICAgICB0aGlzLiNyaWNoVGV4dCA9IHRoaXMuI21ha2VQb3B1cENvbnRlbnQocG9wdXBDb250ZW50KTtcbiAgICAgIHRoaXMuI2NvbnRlbnRzT2JqID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy4jcG9wdXA/LnJlbW92ZSgpO1xuICAgIHRoaXMuI3BvcHVwID0gbnVsbDtcbiAgfVxuXG4gIHJlc2V0RWRpdGVkKCkge1xuICAgIGlmICghdGhpcy4jdXBkYXRlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAoeyBjb250ZW50c09iajogdGhpcy4jY29udGVudHNPYmosIHJpY2hUZXh0OiB0aGlzLiNyaWNoVGV4dCB9ID1cbiAgICAgIHRoaXMuI3VwZGF0ZXMpO1xuICAgIHRoaXMuI3VwZGF0ZXMgPSBudWxsO1xuICAgIHRoaXMuI3BvcHVwPy5yZW1vdmUoKTtcbiAgICB0aGlzLiNwb3B1cCA9IG51bGw7XG4gICAgdGhpcy4jcG9zaXRpb24gPSBudWxsO1xuICB9XG5cbiAgI3NldFBvc2l0aW9uKCkge1xuICAgIGlmICh0aGlzLiNwb3NpdGlvbiAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBwYWdlOiB7IHZpZXcgfSxcbiAgICAgIHZpZXdwb3J0OiB7XG4gICAgICAgIHJhd0RpbXM6IHsgcGFnZVdpZHRoLCBwYWdlSGVpZ2h0LCBwYWdlWCwgcGFnZVkgfSxcbiAgICAgIH0sXG4gICAgfSA9IHRoaXMuI3BhcmVudDtcblxuICAgIGxldCB1c2VQYXJlbnRSZWN0ID0gISF0aGlzLiNwYXJlbnRSZWN0O1xuICAgIGxldCByZWN0ID0gdXNlUGFyZW50UmVjdCA/IHRoaXMuI3BhcmVudFJlY3QgOiB0aGlzLiNyZWN0O1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLiNlbGVtZW50cykge1xuICAgICAgaWYgKCFyZWN0IHx8IFV0aWwuaW50ZXJzZWN0KGVsZW1lbnQuZGF0YS5yZWN0LCByZWN0KSAhPT0gbnVsbCkge1xuICAgICAgICByZWN0ID0gZWxlbWVudC5kYXRhLnJlY3Q7XG4gICAgICAgIHVzZVBhcmVudFJlY3QgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkUmVjdCA9IFV0aWwubm9ybWFsaXplUmVjdChbXG4gICAgICByZWN0WzBdLFxuICAgICAgdmlld1szXSAtIHJlY3RbMV0gKyB2aWV3WzFdLFxuICAgICAgcmVjdFsyXSxcbiAgICAgIHZpZXdbM10gLSByZWN0WzNdICsgdmlld1sxXSxcbiAgICBdKTtcblxuICAgIGNvbnN0IEhPUklaT05UQUxfU1BBQ0VfQUZURVJfQU5OT1RBVElPTiA9IDU7XG4gICAgY29uc3QgcGFyZW50V2lkdGggPSB1c2VQYXJlbnRSZWN0XG4gICAgICA/IHJlY3RbMl0gLSByZWN0WzBdICsgSE9SSVpPTlRBTF9TUEFDRV9BRlRFUl9BTk5PVEFUSU9OXG4gICAgICA6IDA7XG4gICAgY29uc3QgcG9wdXBMZWZ0ID0gbm9ybWFsaXplZFJlY3RbMF0gKyBwYXJlbnRXaWR0aDtcbiAgICBjb25zdCBwb3B1cFRvcCA9IG5vcm1hbGl6ZWRSZWN0WzFdO1xuICAgIHRoaXMuI3Bvc2l0aW9uID0gW1xuICAgICAgKDEwMCAqIChwb3B1cExlZnQgLSBwYWdlWCkpIC8gcGFnZVdpZHRoLFxuICAgICAgKDEwMCAqIChwb3B1cFRvcCAtIHBhZ2VZKSkgLyBwYWdlSGVpZ2h0LFxuICAgIF07XG5cbiAgICBjb25zdCB7IHN0eWxlIH0gPSB0aGlzLiNjb250YWluZXI7XG4gICAgc3R5bGUubGVmdCA9IGAke3RoaXMuI3Bvc2l0aW9uWzBdfSVgO1xuICAgIHN0eWxlLnRvcCA9IGAke3RoaXMuI3Bvc2l0aW9uWzFdfSVgO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgcG9wdXAuXG4gICAqL1xuICAjdG9nZ2xlKCkge1xuICAgIHRoaXMuI3Bpbm5lZCA9ICF0aGlzLiNwaW5uZWQ7XG4gICAgaWYgKHRoaXMuI3Bpbm5lZCkge1xuICAgICAgdGhpcy4jc2hvdygpO1xuICAgICAgdGhpcy4jY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLiNib3VuZFRvZ2dsZSk7XG4gICAgICB0aGlzLiNjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4jYm91bmRLZXlEb3duKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jaGlkZSgpO1xuICAgICAgdGhpcy4jY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLiNib3VuZFRvZ2dsZSk7XG4gICAgICB0aGlzLiNjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4jYm91bmRLZXlEb3duKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvdyB0aGUgcG9wdXAuXG4gICAqL1xuICAjc2hvdygpIHtcbiAgICBpZiAoIXRoaXMuI3BvcHVwKSB7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICB0aGlzLiNzZXRQb3NpdGlvbigpO1xuICAgICAgdGhpcy4jY29udGFpbmVyLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgdGhpcy4jY29udGFpbmVyLnN0eWxlLnpJbmRleCA9XG4gICAgICAgIHBhcnNlSW50KHRoaXMuI2NvbnRhaW5lci5zdHlsZS56SW5kZXgpICsgMTAwMDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuI3Bpbm5lZCkge1xuICAgICAgdGhpcy4jY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJmb2N1c2VkXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBwb3B1cC5cbiAgICovXG4gICNoaWRlKCkge1xuICAgIHRoaXMuI2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiZm9jdXNlZFwiKTtcbiAgICBpZiAodGhpcy4jcGlubmVkIHx8ICF0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNjb250YWluZXIuaGlkZGVuID0gdHJ1ZTtcbiAgICB0aGlzLiNjb250YWluZXIuc3R5bGUuekluZGV4ID1cbiAgICAgIHBhcnNlSW50KHRoaXMuI2NvbnRhaW5lci5zdHlsZS56SW5kZXgpIC0gMTAwMDtcbiAgfVxuXG4gIGZvcmNlSGlkZSgpIHtcbiAgICB0aGlzLiN3YXNWaXNpYmxlID0gdGhpcy5pc1Zpc2libGU7XG4gICAgaWYgKCF0aGlzLiN3YXNWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI2NvbnRhaW5lci5oaWRkZW4gPSB0cnVlO1xuICB9XG5cbiAgbWF5YmVTaG93KCkge1xuICAgIGlmICghdGhpcy4jd2FzVmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuI3BvcHVwKSB7XG4gICAgICB0aGlzLiNzaG93KCk7XG4gICAgfVxuICAgIHRoaXMuI3dhc1Zpc2libGUgPSBmYWxzZTtcbiAgICB0aGlzLiNjb250YWluZXIuaGlkZGVuID0gZmFsc2U7XG4gIH1cblxuICBnZXQgaXNWaXNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLiNjb250YWluZXIuaGlkZGVuID09PSBmYWxzZTtcbiAgfVxufVxuXG5jbGFzcyBGcmVlVGV4dEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGU6IHRydWUsIGlnbm9yZUJvcmRlcjogdHJ1ZSB9KTtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gcGFyYW1ldGVycy5kYXRhLnRleHRDb250ZW50O1xuICAgIHRoaXMudGV4dFBvc2l0aW9uID0gcGFyYW1ldGVycy5kYXRhLnRleHRQb3NpdGlvbjtcbiAgICB0aGlzLmFubm90YXRpb25FZGl0b3JUeXBlID0gQW5ub3RhdGlvbkVkaXRvclR5cGUuRlJFRVRFWFQ7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImZyZWVUZXh0QW5ub3RhdGlvblwiKTtcblxuICAgIGlmICh0aGlzLnRleHRDb250ZW50KSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImFubm90YXRpb25UZXh0Q29udGVudFwiKTtcbiAgICAgIGNvbnRlbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImNvbW1lbnRcIik7XG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGhpcy50ZXh0Q29udGVudCkge1xuICAgICAgICBjb25zdCBsaW5lU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBsaW5lU3Bhbi50ZXh0Q29udGVudCA9IGxpbmU7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kKGxpbmVTcGFuKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChjb250ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5wb3B1cFJlZiAmJiB0aGlzLmhhc1BvcHVwRGF0YSkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9lZGl0T25Eb3VibGVDbGljaygpO1xuXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG59XG5cbmNsYXNzIExpbmVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgI2xpbmUgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZTogdHJ1ZSwgaWdub3JlQm9yZGVyOiB0cnVlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJsaW5lQW5ub3RhdGlvblwiKTtcblxuICAgIC8vIENyZWF0ZSBhbiBpbnZpc2libGUgbGluZSB3aXRoIHRoZSBzYW1lIHN0YXJ0aW5nIGFuZCBlbmRpbmcgY29vcmRpbmF0ZXNcbiAgICAvLyB0aGF0IGFjdHMgYXMgdGhlIHRyaWdnZXIgZm9yIHRoZSBwb3B1cC4gT25seSB0aGUgbGluZSBpdHNlbGYgc2hvdWxkXG4gICAgLy8gdHJpZ2dlciB0aGUgcG9wdXAsIG5vdCB0aGUgZW50aXJlIGNvbnRhaW5lci5cbiAgICBjb25zdCB7IGRhdGEsIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXM7XG4gICAgY29uc3Qgc3ZnID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZShcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgLyogc2tpcERpbWVuc2lvbnMgPSAqLyB0cnVlXG4gICAgKTtcblxuICAgIC8vIFBERiBjb29yZGluYXRlcyBhcmUgY2FsY3VsYXRlZCBmcm9tIGEgYm90dG9tIGxlZnQgb3JpZ2luLCBzbyB0cmFuc2Zvcm1cbiAgICAvLyB0aGUgbGluZSBjb29yZGluYXRlcyB0byBhIHRvcCBsZWZ0IG9yaWdpbiBmb3IgdGhlIFNWRyBlbGVtZW50LlxuICAgIGNvbnN0IGxpbmUgPSAodGhpcy4jbGluZSA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmxpbmVcIikpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwieDFcIiwgZGF0YS5yZWN0WzJdIC0gZGF0YS5saW5lQ29vcmRpbmF0ZXNbMF0pO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwieTFcIiwgZGF0YS5yZWN0WzNdIC0gZGF0YS5saW5lQ29vcmRpbmF0ZXNbMV0pO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwieDJcIiwgZGF0YS5yZWN0WzJdIC0gZGF0YS5saW5lQ29vcmRpbmF0ZXNbMl0pO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwieTJcIiwgZGF0YS5yZWN0WzNdIC0gZGF0YS5saW5lQ29vcmRpbmF0ZXNbM10pO1xuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSAnc3Ryb2tlLXdpZHRoJyBpcyBhbHdheXMgbm9uLXplcm8sIHNpbmNlIG90aGVyd2lzZSBpdFxuICAgIC8vIHdvbid0IGJlIHBvc3NpYmxlIHRvIG9wZW4vY2xvc2UgdGhlIHBvcHVwIChub3RlIGUuZy4gaXNzdWUgMTExMjIpLlxuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGRhdGEuYm9yZGVyU3R5bGUud2lkdGggfHwgMSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKTtcblxuICAgIHN2Zy5hcHBlbmQobGluZSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHN2Zyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHBvcHVwIG91cnNlbHZlcyBzbyB0aGF0IHdlIGNhbiBiaW5kIGl0IHRvIHRoZSBsaW5lIGluc3RlYWRcbiAgICAvLyBvZiB0byB0aGUgZW50aXJlIGNvbnRhaW5lciAod2hpY2ggaXMgdGhlIGRlZmF1bHQpLlxuICAgIGlmICghZGF0YS5wb3B1cFJlZiAmJiB0aGlzLmhhc1BvcHVwRGF0YSkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICBnZXRFbGVtZW50c1RvVHJpZ2dlclBvcHVwKCkge1xuICAgIHJldHVybiB0aGlzLiNsaW5lO1xuICB9XG5cbiAgYWRkSGlnaGxpZ2h0QXJlYSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGlnaGxpZ2h0QXJlYVwiKTtcbiAgfVxufVxuXG5jbGFzcyBTcXVhcmVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgI3NxdWFyZSA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHsgaXNSZW5kZXJhYmxlOiB0cnVlLCBpZ25vcmVCb3JkZXI6IHRydWUgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcInNxdWFyZUFubm90YXRpb25cIik7XG5cbiAgICAvLyBDcmVhdGUgYW4gaW52aXNpYmxlIHNxdWFyZSB3aXRoIHRoZSBzYW1lIHJlY3RhbmdsZSB0aGF0IGFjdHMgYXMgdGhlXG4gICAgLy8gdHJpZ2dlciBmb3IgdGhlIHBvcHVwLiBPbmx5IHRoZSBzcXVhcmUgaXRzZWxmIHNob3VsZCB0cmlnZ2VyIHRoZVxuICAgIC8vIHBvcHVwLCBub3QgdGhlIGVudGlyZSBjb250YWluZXIuXG4gICAgY29uc3QgeyBkYXRhLCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzO1xuICAgIGNvbnN0IHN2ZyA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGUoXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIC8qIHNraXBEaW1lbnNpb25zID0gKi8gdHJ1ZVxuICAgICk7XG5cbiAgICAvLyBUaGUgYnJvd3NlciBkcmF3cyBoYWxmIG9mIHRoZSBib3JkZXJzIGluc2lkZSB0aGUgc3F1YXJlIGFuZCBoYWxmIG9mXG4gICAgLy8gdGhlIGJvcmRlcnMgb3V0c2lkZSB0aGUgc3F1YXJlIGJ5IGRlZmF1bHQuIFRoaXMgYmVoYXZpb3IgY2Fubm90IGJlXG4gICAgLy8gY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5LCBzbyBjb3JyZWN0IGZvciB0aGF0IGhlcmUuXG4gICAgY29uc3QgYm9yZGVyV2lkdGggPSBkYXRhLmJvcmRlclN0eWxlLndpZHRoO1xuICAgIGNvbnN0IHNxdWFyZSA9ICh0aGlzLiNzcXVhcmUgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpyZWN0XCIpKTtcbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwieFwiLCBib3JkZXJXaWR0aCAvIDIpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJ5XCIsIGJvcmRlcldpZHRoIC8gMik7XG4gICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHdpZHRoIC0gYm9yZGVyV2lkdGgpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgaGVpZ2h0IC0gYm9yZGVyV2lkdGgpO1xuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSAnc3Ryb2tlLXdpZHRoJyBpcyBhbHdheXMgbm9uLXplcm8sIHNpbmNlIG90aGVyd2lzZSBpdFxuICAgIC8vIHdvbid0IGJlIHBvc3NpYmxlIHRvIG9wZW4vY2xvc2UgdGhlIHBvcHVwIChub3RlIGUuZy4gaXNzdWUgMTExMjIpLlxuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgYm9yZGVyV2lkdGggfHwgMSk7XG4gICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcInRyYW5zcGFyZW50XCIpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwidHJhbnNwYXJlbnRcIik7XG5cbiAgICBzdmcuYXBwZW5kKHNxdWFyZSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHN2Zyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHBvcHVwIG91cnNlbHZlcyBzbyB0aGF0IHdlIGNhbiBiaW5kIGl0IHRvIHRoZSBzcXVhcmUgaW5zdGVhZFxuICAgIC8vIG9mIHRvIHRoZSBlbnRpcmUgY29udGFpbmVyICh3aGljaCBpcyB0aGUgZGVmYXVsdCkuXG4gICAgaWYgKCFkYXRhLnBvcHVwUmVmICYmIHRoaXMuaGFzUG9wdXBEYXRhKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG4gIGdldEVsZW1lbnRzVG9UcmlnZ2VyUG9wdXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3NxdWFyZTtcbiAgfVxuXG4gIGFkZEhpZ2hsaWdodEFyZWEoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodEFyZWFcIik7XG4gIH1cbn1cblxuY2xhc3MgQ2lyY2xlQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gICNjaXJjbGUgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZTogdHJ1ZSwgaWdub3JlQm9yZGVyOiB0cnVlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJjaXJjbGVBbm5vdGF0aW9uXCIpO1xuXG4gICAgLy8gQ3JlYXRlIGFuIGludmlzaWJsZSBjaXJjbGUgd2l0aCB0aGUgc2FtZSBlbGxpcHNlIHRoYXQgYWN0cyBhcyB0aGVcbiAgICAvLyB0cmlnZ2VyIGZvciB0aGUgcG9wdXAuIE9ubHkgdGhlIGNpcmNsZSBpdHNlbGYgc2hvdWxkIHRyaWdnZXIgdGhlXG4gICAgLy8gcG9wdXAsIG5vdCB0aGUgZW50aXJlIGNvbnRhaW5lci5cbiAgICBjb25zdCB7IGRhdGEsIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXM7XG4gICAgY29uc3Qgc3ZnID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZShcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgLyogc2tpcERpbWVuc2lvbnMgPSAqLyB0cnVlXG4gICAgKTtcblxuICAgIC8vIFRoZSBicm93c2VyIGRyYXdzIGhhbGYgb2YgdGhlIGJvcmRlcnMgaW5zaWRlIHRoZSBjaXJjbGUgYW5kIGhhbGYgb2ZcbiAgICAvLyB0aGUgYm9yZGVycyBvdXRzaWRlIHRoZSBjaXJjbGUgYnkgZGVmYXVsdC4gVGhpcyBiZWhhdmlvciBjYW5ub3QgYmVcbiAgICAvLyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHksIHNvIGNvcnJlY3QgZm9yIHRoYXQgaGVyZS5cbiAgICBjb25zdCBib3JkZXJXaWR0aCA9IGRhdGEuYm9yZGVyU3R5bGUud2lkdGg7XG4gICAgY29uc3QgY2lyY2xlID0gKHRoaXMuI2NpcmNsZSA9XG4gICAgICB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzplbGxpcHNlXCIpKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwiY3hcIiwgd2lkdGggLyAyKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwiY3lcIiwgaGVpZ2h0IC8gMik7XG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInJ4XCIsIHdpZHRoIC8gMiAtIGJvcmRlcldpZHRoIC8gMik7XG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInJ5XCIsIGhlaWdodCAvIDIgLSBib3JkZXJXaWR0aCAvIDIpO1xuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSAnc3Ryb2tlLXdpZHRoJyBpcyBhbHdheXMgbm9uLXplcm8sIHNpbmNlIG90aGVyd2lzZSBpdFxuICAgIC8vIHdvbid0IGJlIHBvc3NpYmxlIHRvIG9wZW4vY2xvc2UgdGhlIHBvcHVwIChub3RlIGUuZy4gaXNzdWUgMTExMjIpLlxuICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgYm9yZGVyV2lkdGggfHwgMSk7XG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcInRyYW5zcGFyZW50XCIpO1xuICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwidHJhbnNwYXJlbnRcIik7XG5cbiAgICBzdmcuYXBwZW5kKGNpcmNsZSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHN2Zyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHBvcHVwIG91cnNlbHZlcyBzbyB0aGF0IHdlIGNhbiBiaW5kIGl0IHRvIHRoZSBjaXJjbGUgaW5zdGVhZFxuICAgIC8vIG9mIHRvIHRoZSBlbnRpcmUgY29udGFpbmVyICh3aGljaCBpcyB0aGUgZGVmYXVsdCkuXG4gICAgaWYgKCFkYXRhLnBvcHVwUmVmICYmIHRoaXMuaGFzUG9wdXBEYXRhKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG4gIGdldEVsZW1lbnRzVG9UcmlnZ2VyUG9wdXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2NpcmNsZTtcbiAgfVxuXG4gIGFkZEhpZ2hsaWdodEFyZWEoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodEFyZWFcIik7XG4gIH1cbn1cblxuY2xhc3MgUG9seWxpbmVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgI3BvbHlsaW5lID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGU6IHRydWUsIGlnbm9yZUJvcmRlcjogdHJ1ZSB9KTtcblxuICAgIHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lID0gXCJwb2x5bGluZUFubm90YXRpb25cIjtcbiAgICB0aGlzLnN2Z0VsZW1lbnROYW1lID0gXCJzdmc6cG9seWxpbmVcIjtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lKTtcblxuICAgIC8vIENyZWF0ZSBhbiBpbnZpc2libGUgcG9seWxpbmUgd2l0aCB0aGUgc2FtZSBwb2ludHMgdGhhdCBhY3RzIGFzIHRoZVxuICAgIC8vIHRyaWdnZXIgZm9yIHRoZSBwb3B1cC4gT25seSB0aGUgcG9seWxpbmUgaXRzZWxmIHNob3VsZCB0cmlnZ2VyIHRoZVxuICAgIC8vIHBvcHVwLCBub3QgdGhlIGVudGlyZSBjb250YWluZXIuXG4gICAgY29uc3Qge1xuICAgICAgZGF0YTogeyByZWN0LCB2ZXJ0aWNlcywgYm9yZGVyU3R5bGUsIHBvcHVwUmVmIH0sXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICB9ID0gdGhpcztcbiAgICBpZiAoIXZlcnRpY2VzKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gICAgfVxuICAgIGNvbnN0IHN2ZyA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGUoXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIC8qIHNraXBEaW1lbnNpb25zID0gKi8gdHJ1ZVxuICAgICk7XG5cbiAgICAvLyBDb252ZXJ0IHRoZSB2ZXJ0aWNlcyBhcnJheSB0byBhIHNpbmdsZSBwb2ludHMgc3RyaW5nIHRoYXQgdGhlIFNWR1xuICAgIC8vIHBvbHlsaW5lIGVsZW1lbnQgZXhwZWN0cyAoXCJ4MSx5MSB4Mix5MiAuLi5cIikuIFBERiBjb29yZGluYXRlcyBhcmVcbiAgICAvLyBjYWxjdWxhdGVkIGZyb20gYSBib3R0b20gbGVmdCBvcmlnaW4sIHNvIHRyYW5zZm9ybSB0aGUgcG9seWxpbmVcbiAgICAvLyBjb29yZGluYXRlcyB0byBhIHRvcCBsZWZ0IG9yaWdpbiBmb3IgdGhlIFNWRyBlbGVtZW50LlxuICAgIGxldCBwb2ludHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB2ZXJ0aWNlcy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICBjb25zdCB4ID0gdmVydGljZXNbaV0gLSByZWN0WzBdO1xuICAgICAgY29uc3QgeSA9IHJlY3RbM10gLSB2ZXJ0aWNlc1tpICsgMV07XG4gICAgICBwb2ludHMucHVzaChgJHt4fSwke3l9YCk7XG4gICAgfVxuICAgIHBvaW50cyA9IHBvaW50cy5qb2luKFwiIFwiKTtcblxuICAgIGNvbnN0IHBvbHlsaW5lID0gKHRoaXMuI3BvbHlsaW5lID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXG4gICAgICB0aGlzLnN2Z0VsZW1lbnROYW1lXG4gICAgKSk7XG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwicG9pbnRzXCIsIHBvaW50cyk7XG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlICdzdHJva2Utd2lkdGgnIGlzIGFsd2F5cyBub24temVybywgc2luY2Ugb3RoZXJ3aXNlIGl0XG4gICAgLy8gd29uJ3QgYmUgcG9zc2libGUgdG8gb3Blbi9jbG9zZSB0aGUgcG9wdXAgKG5vdGUgZS5nLiBpc3N1ZSAxMTEyMikuXG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGJvcmRlclN0eWxlLndpZHRoIHx8IDEpO1xuICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcInRyYW5zcGFyZW50XCIpO1xuICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKTtcblxuICAgIHN2Zy5hcHBlbmQocG9seWxpbmUpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChzdmcpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBwb3B1cCBvdXJzZWx2ZXMgc28gdGhhdCB3ZSBjYW4gYmluZCBpdCB0byB0aGUgcG9seWxpbmVcbiAgICAvLyBpbnN0ZWFkIG9mIHRvIHRoZSBlbnRpcmUgY29udGFpbmVyICh3aGljaCBpcyB0aGUgZGVmYXVsdCkuXG4gICAgaWYgKCFwb3B1cFJlZiAmJiB0aGlzLmhhc1BvcHVwRGF0YSkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICBnZXRFbGVtZW50c1RvVHJpZ2dlclBvcHVwKCkge1xuICAgIHJldHVybiB0aGlzLiNwb2x5bGluZTtcbiAgfVxuXG4gIGFkZEhpZ2hsaWdodEFyZWEoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodEFyZWFcIik7XG4gIH1cbn1cblxuY2xhc3MgUG9seWdvbkFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgUG9seWxpbmVBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICAvLyBQb2x5Z29ucyBhcmUgc3BlY2lmaWMgZm9ybXMgb2YgcG9seWxpbmVzLCBzbyByZXVzZSB0aGVpciBsb2dpYy5cbiAgICBzdXBlcihwYXJhbWV0ZXJzKTtcblxuICAgIHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lID0gXCJwb2x5Z29uQW5ub3RhdGlvblwiO1xuICAgIHRoaXMuc3ZnRWxlbWVudE5hbWUgPSBcInN2Zzpwb2x5Z29uXCI7XG4gIH1cbn1cblxuY2xhc3MgQ2FyZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHsgaXNSZW5kZXJhYmxlOiB0cnVlLCBpZ25vcmVCb3JkZXI6IHRydWUgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImNhcmV0QW5ub3RhdGlvblwiKTtcblxuICAgIGlmICghdGhpcy5kYXRhLnBvcHVwUmVmICYmIHRoaXMuaGFzUG9wdXBEYXRhKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgSW5rQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gICNwb2x5bGluZXNHcm91cEVsZW1lbnQgPSBudWxsO1xuXG4gICNwb2x5bGluZXMgPSBbXTtcblxuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGU6IHRydWUsIGlnbm9yZUJvcmRlcjogdHJ1ZSB9KTtcblxuICAgIHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lID0gXCJpbmtBbm5vdGF0aW9uXCI7XG5cbiAgICAvLyBVc2UgdGhlIHBvbHlsaW5lIFNWRyBlbGVtZW50IHNpbmNlIGl0IGFsbG93cyB1cyB0byB1c2UgY29vcmRpbmF0ZXNcbiAgICAvLyBkaXJlY3RseSBhbmQgdG8gZHJhdyBib3RoIHN0cmFpZ2h0IGxpbmVzIGFuZCBjdXJ2ZXMuXG4gICAgdGhpcy5zdmdFbGVtZW50TmFtZSA9IFwic3ZnOnBvbHlsaW5lXCI7XG5cbiAgICB0aGlzLmFubm90YXRpb25FZGl0b3JUeXBlID1cbiAgICAgIHRoaXMuZGF0YS5pdCA9PT0gXCJJbmtIaWdobGlnaHRcIlxuICAgICAgICA/IEFubm90YXRpb25FZGl0b3JUeXBlLkhJR0hMSUdIVFxuICAgICAgICA6IEFubm90YXRpb25FZGl0b3JUeXBlLklOSztcbiAgfVxuXG4gICNnZXRUcmFuc2Zvcm0ocm90YXRpb24sIHJlY3QpIHtcbiAgICAvLyBQREYgY29vcmRpbmF0ZXMgYXJlIGNhbGN1bGF0ZWQgZnJvbSBhIGJvdHRvbSBsZWZ0IG9yaWdpbiwgc29cbiAgICAvLyB0cmFuc2Zvcm0gdGhlIHBvbHlsaW5lIGNvb3JkaW5hdGVzIHRvIGEgdG9wIGxlZnQgb3JpZ2luIGZvciB0aGVcbiAgICAvLyBTVkcgZWxlbWVudC5cbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICBjYXNlIDkwOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRyYW5zZm9ybTogYHJvdGF0ZSg5MCkgdHJhbnNsYXRlKCR7LXJlY3RbMF19LCR7cmVjdFsxXX0pIHNjYWxlKDEsLTEpYCxcbiAgICAgICAgICB3aWR0aDogcmVjdFszXSAtIHJlY3RbMV0sXG4gICAgICAgICAgaGVpZ2h0OiByZWN0WzJdIC0gcmVjdFswXSxcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgMTgwOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRyYW5zZm9ybTogYHJvdGF0ZSgxODApIHRyYW5zbGF0ZSgkey1yZWN0WzJdfSwke3JlY3RbMV19KSBzY2FsZSgxLC0xKWAsXG4gICAgICAgICAgd2lkdGg6IHJlY3RbMl0gLSByZWN0WzBdLFxuICAgICAgICAgIGhlaWdodDogcmVjdFszXSAtIHJlY3RbMV0sXG4gICAgICAgIH07XG4gICAgICBjYXNlIDI3MDpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IGByb3RhdGUoMjcwKSB0cmFuc2xhdGUoJHstcmVjdFsyXX0sJHtyZWN0WzNdfSkgc2NhbGUoMSwtMSlgLFxuICAgICAgICAgIHdpZHRoOiByZWN0WzNdIC0gcmVjdFsxXSxcbiAgICAgICAgICBoZWlnaHQ6IHJlY3RbMl0gLSByZWN0WzBdLFxuICAgICAgICB9O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHstcmVjdFswXX0sJHtyZWN0WzNdfSkgc2NhbGUoMSwtMSlgLFxuICAgICAgICAgIHdpZHRoOiByZWN0WzJdIC0gcmVjdFswXSxcbiAgICAgICAgICBoZWlnaHQ6IHJlY3RbM10gLSByZWN0WzFdLFxuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lKTtcblxuICAgIC8vIENyZWF0ZSBhbiBpbnZpc2libGUgcG9seWxpbmUgd2l0aCB0aGUgc2FtZSBwb2ludHMgdGhhdCBhY3RzIGFzIHRoZVxuICAgIC8vIHRyaWdnZXIgZm9yIHRoZSBwb3B1cC5cbiAgICBjb25zdCB7XG4gICAgICBkYXRhOiB7IHJlY3QsIHJvdGF0aW9uLCBpbmtMaXN0cywgYm9yZGVyU3R5bGUsIHBvcHVwUmVmIH0sXG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3QgeyB0cmFuc2Zvcm0sIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuI2dldFRyYW5zZm9ybShyb3RhdGlvbiwgcmVjdCk7XG5cbiAgICBjb25zdCBzdmcgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICAvKiBza2lwRGltZW5zaW9ucyA9ICovIHRydWVcbiAgICApO1xuICAgIGNvbnN0IGcgPSAodGhpcy4jcG9seWxpbmVzR3JvdXBFbGVtZW50ID1cbiAgICAgIHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmdcIikpO1xuICAgIHN2Zy5hcHBlbmQoZyk7XG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlICdzdHJva2Utd2lkdGgnIGlzIGFsd2F5cyBub24temVybywgc2luY2Ugb3RoZXJ3aXNlIGl0XG4gICAgLy8gd29uJ3QgYmUgcG9zc2libGUgdG8gb3Blbi9jbG9zZSB0aGUgcG9wdXAgKG5vdGUgZS5nLiBpc3N1ZSAxMTEyMikuXG4gICAgZy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgYm9yZGVyU3R5bGUud2lkdGggfHwgMSk7XG4gICAgZy5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWNhcFwiLCBcInJvdW5kXCIpO1xuICAgIGcuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVqb2luXCIsIFwicm91bmRcIik7XG4gICAgZy5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbWl0ZXJsaW1pdFwiLCAxMCk7XG4gICAgZy5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICBnLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICBnLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gaW5rTGlzdHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgY29uc3QgcG9seWxpbmUgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCh0aGlzLnN2Z0VsZW1lbnROYW1lKTtcbiAgICAgIHRoaXMuI3BvbHlsaW5lcy5wdXNoKHBvbHlsaW5lKTtcbiAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInBvaW50c1wiLCBpbmtMaXN0c1tpXS5qb2luKFwiLFwiKSk7XG4gICAgICBnLmFwcGVuZChwb2x5bGluZSk7XG4gICAgfVxuXG4gICAgaWYgKCFwb3B1cFJlZiAmJiB0aGlzLmhhc1BvcHVwRGF0YSkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoc3ZnKTtcbiAgICB0aGlzLl9lZGl0T25Eb3VibGVDbGljaygpO1xuXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbiAgdXBkYXRlRWRpdGVkKHBhcmFtcykge1xuICAgIHN1cGVyLnVwZGF0ZUVkaXRlZChwYXJhbXMpO1xuICAgIGNvbnN0IHsgdGhpY2tuZXNzLCBwb2ludHMsIHJlY3QgfSA9IHBhcmFtcztcbiAgICBjb25zdCBnID0gdGhpcy4jcG9seWxpbmVzR3JvdXBFbGVtZW50O1xuICAgIGlmICh0aGlja25lc3MgPj0gMCkge1xuICAgICAgZy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgdGhpY2tuZXNzIHx8IDEpO1xuICAgIH1cbiAgICBpZiAocG9pbnRzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0aGlzLiNwb2x5bGluZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICB0aGlzLiNwb2x5bGluZXNbaV0uc2V0QXR0cmlidXRlKFwicG9pbnRzXCIsIHBvaW50c1tpXS5qb2luKFwiLFwiKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChyZWN0KSB7XG4gICAgICBjb25zdCB7IHRyYW5zZm9ybSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy4jZ2V0VHJhbnNmb3JtKFxuICAgICAgICB0aGlzLmRhdGEucm90YXRpb24sXG4gICAgICAgIHJlY3RcbiAgICAgICk7XG4gICAgICBjb25zdCByb290ID0gZy5wYXJlbnRFbGVtZW50O1xuICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIGAwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YCk7XG4gICAgICBnLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0pO1xuICAgIH1cbiAgfVxuXG4gIGdldEVsZW1lbnRzVG9UcmlnZ2VyUG9wdXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3BvbHlsaW5lcztcbiAgfVxuXG4gIGFkZEhpZ2hsaWdodEFyZWEoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodEFyZWFcIik7XG4gIH1cbn1cblxuY2xhc3MgSGlnaGxpZ2h0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGU6IHRydWUsXG4gICAgICBpZ25vcmVCb3JkZXI6IHRydWUsXG4gICAgICBjcmVhdGVRdWFkcmlsYXRlcmFsczogdHJ1ZSxcbiAgICB9KTtcbiAgICB0aGlzLmFubm90YXRpb25FZGl0b3JUeXBlID0gQW5ub3RhdGlvbkVkaXRvclR5cGUuSElHSExJR0hUO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5kYXRhLnBvcHVwUmVmICYmIHRoaXMuaGFzUG9wdXBEYXRhKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cCgpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRBbm5vdGF0aW9uXCIpO1xuICAgIHRoaXMuX2VkaXRPbkRvdWJsZUNsaWNrKCk7XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgVW5kZXJsaW5lQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGU6IHRydWUsXG4gICAgICBpZ25vcmVCb3JkZXI6IHRydWUsXG4gICAgICBjcmVhdGVRdWFkcmlsYXRlcmFsczogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5wb3B1cFJlZiAmJiB0aGlzLmhhc1BvcHVwRGF0YSkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidW5kZXJsaW5lQW5ub3RhdGlvblwiKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgU3F1aWdnbHlBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHtcbiAgICAgIGlzUmVuZGVyYWJsZTogdHJ1ZSxcbiAgICAgIGlnbm9yZUJvcmRlcjogdHJ1ZSxcbiAgICAgIGNyZWF0ZVF1YWRyaWxhdGVyYWxzOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5kYXRhLnBvcHVwUmVmICYmIHRoaXMuaGFzUG9wdXBEYXRhKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cCgpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJzcXVpZ2dseUFubm90YXRpb25cIik7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG59XG5cbmNsYXNzIFN0cmlrZU91dEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlOiB0cnVlLFxuICAgICAgaWdub3JlQm9yZGVyOiB0cnVlLFxuICAgICAgY3JlYXRlUXVhZHJpbGF0ZXJhbHM6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEucG9wdXBSZWYgJiYgdGhpcy5oYXNQb3B1cERhdGEpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcInN0cmlrZW91dEFubm90YXRpb25cIik7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG59XG5cbmNsYXNzIFN0YW1wQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZTogdHJ1ZSwgaWdub3JlQm9yZGVyOiB0cnVlIH0pO1xuICAgIHRoaXMuYW5ub3RhdGlvbkVkaXRvclR5cGUgPSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5TVEFNUDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwic3RhbXBBbm5vdGF0aW9uXCIpO1xuICAgIHRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJpbWdcIik7XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5wb3B1cFJlZiAmJiB0aGlzLmhhc1BvcHVwRGF0YSkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAoKTtcbiAgICB9XG4gICAgdGhpcy5fZWRpdE9uRG91YmxlQ2xpY2soKTtcblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBGaWxlQXR0YWNobWVudEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICAjdHJpZ2dlciA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHsgaXNSZW5kZXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgY29uc3QgeyBmaWxlIH0gPSB0aGlzLmRhdGE7XG4gICAgdGhpcy5maWxlbmFtZSA9IGZpbGUuZmlsZW5hbWU7XG4gICAgdGhpcy5jb250ZW50ID0gZmlsZS5jb250ZW50O1xuXG4gICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJmaWxlYXR0YWNobWVudGFubm90YXRpb25cIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgLi4uZmlsZSxcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZmlsZUF0dGFjaG1lbnRBbm5vdGF0aW9uXCIpO1xuXG4gICAgY29uc3QgeyBjb250YWluZXIsIGRhdGEgfSA9IHRoaXM7XG4gICAgbGV0IHRyaWdnZXI7XG4gICAgaWYgKGRhdGEuaGFzQXBwZWFyYW5jZSB8fCBkYXRhLmZpbGxBbHBoYSA9PT0gMCkge1xuICAgICAgdHJpZ2dlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZm9ydHVuYXRlbHkgaXQgc2VlbXMgdGhhdCBpdCdzIG5vdCBjbGVhcmx5IHNwZWNpZmllZCBleGFjdGx5IHdoYXRcbiAgICAgIC8vIG5hbWVzIGFyZSBhY3R1YWxseSB2YWxpZCwgc2luY2UgVGFibGUgMTg0IGNvbnRhaW5zOlxuICAgICAgLy8gICBDb25mb3JtaW5nIHJlYWRlcnMgc2hhbGwgcHJvdmlkZSBwcmVkZWZpbmVkIGljb24gYXBwZWFyYW5jZXMgZm9yIGF0XG4gICAgICAvLyAgIGxlYXN0IHRoZSBmb2xsb3dpbmcgc3RhbmRhcmQgbmFtZXM6IEdyYXBoUHVzaFBpbiwgUGFwZXJjbGlwVGFnLlxuICAgICAgLy8gICBBZGRpdGlvbmFsIG5hbWVzIG1heSBiZSBzdXBwb3J0ZWQgYXMgd2VsbC4gRGVmYXVsdCB2YWx1ZTogUHVzaFBpbi5cbiAgICAgIHRyaWdnZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgdHJpZ2dlci5zcmMgPSBgJHt0aGlzLmltYWdlUmVzb3VyY2VzUGF0aH1hbm5vdGF0aW9uLSR7XG4gICAgICAgIC9wYXBlcmNsaXAvaS50ZXN0KGRhdGEubmFtZSkgPyBcInBhcGVyY2xpcFwiIDogXCJwdXNocGluXCJcbiAgICAgIH0uc3ZnYDtcblxuICAgICAgaWYgKGRhdGEuZmlsbEFscGhhICYmIGRhdGEuZmlsbEFscGhhIDwgMSkge1xuICAgICAgICB0cmlnZ2VyLnN0eWxlID0gYGZpbHRlcjogb3BhY2l0eSgke01hdGgucm91bmQoXG4gICAgICAgICAgZGF0YS5maWxsQWxwaGEgKiAxMDBcbiAgICAgICAgKX0lKTtgO1xuXG4gICAgICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpIHtcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGFzRmlsbEFscGhhXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIHRoaXMuI2Rvd25sb2FkLmJpbmQodGhpcykpO1xuICAgIHRoaXMuI3RyaWdnZXIgPSB0cmlnZ2VyO1xuXG4gICAgY29uc3QgeyBpc01hYyB9ID0gRmVhdHVyZVRlc3QucGxhdGZvcm07XG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2dCA9PiB7XG4gICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFbnRlclwiICYmIChpc01hYyA/IGV2dC5tZXRhS2V5IDogZXZ0LmN0cmxLZXkpKSB7XG4gICAgICAgIHRoaXMuI2Rvd25sb2FkKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIWRhdGEucG9wdXBSZWYgJiYgdGhpcy5oYXNQb3B1cERhdGEpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyaWdnZXIuY2xhc3NMaXN0LmFkZChcInBvcHVwVHJpZ2dlckFyZWFcIik7XG4gICAgfVxuXG4gICAgY29udGFpbmVyLmFwcGVuZCh0cmlnZ2VyKTtcbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG5cbiAgZ2V0RWxlbWVudHNUb1RyaWdnZXJQb3B1cCgpIHtcbiAgICByZXR1cm4gdGhpcy4jdHJpZ2dlcjtcbiAgfVxuXG4gIGFkZEhpZ2hsaWdodEFyZWEoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodEFyZWFcIik7XG4gIH1cblxuICAvKipcbiAgICogRG93bmxvYWQgdGhlIGZpbGUgYXR0YWNobWVudCBhc3NvY2lhdGVkIHdpdGggdGhpcyBhbm5vdGF0aW9uLlxuICAgKi9cbiAgI2Rvd25sb2FkKCkge1xuICAgIHRoaXMuZG93bmxvYWRNYW5hZ2VyPy5vcGVuT3JEb3dubG9hZERhdGEodGhpcy5jb250ZW50LCB0aGlzLmZpbGVuYW1lKTtcbiAgfVxufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFubm90YXRpb25MYXllclBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7UGFnZVZpZXdwb3J0fSB2aWV3cG9ydFxuICogQHByb3BlcnR5IHtIVE1MRGl2RWxlbWVudH0gZGl2XG4gKiBAcHJvcGVydHkge0FycmF5fSBhbm5vdGF0aW9uc1xuICogQHByb3BlcnR5IHtQREZQYWdlUHJveHl9IHBhZ2VcbiAqIEBwcm9wZXJ0eSB7SVBERkxpbmtTZXJ2aWNlfSBsaW5rU2VydmljZVxuICogQHByb3BlcnR5IHtJRG93bmxvYWRNYW5hZ2VyfSBbZG93bmxvYWRNYW5hZ2VyXVxuICogQHByb3BlcnR5IHtBbm5vdGF0aW9uU3RvcmFnZX0gW2Fubm90YXRpb25TdG9yYWdlXVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtpbWFnZVJlc291cmNlc1BhdGhdIC0gUGF0aCBmb3IgaW1hZ2UgcmVzb3VyY2VzLCBtYWlubHlcbiAqICAgZm9yIGFubm90YXRpb24gaWNvbnMuIEluY2x1ZGUgdHJhaWxpbmcgc2xhc2guXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHJlbmRlckZvcm1zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtlbmFibGVTY3JpcHRpbmddIC0gRW5hYmxlIGVtYmVkZGVkIHNjcmlwdCBleGVjdXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtoYXNKU0FjdGlvbnNdIC0gU29tZSBmaWVsZHMgaGF2ZSBKUyBhY3Rpb25zLlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCBBcnJheTxPYmplY3Q+PiB8IG51bGx9IFtmaWVsZE9iamVjdHNdXG4gKiBAcHJvcGVydHkge01hcDxzdHJpbmcsIEhUTUxDYW52YXNFbGVtZW50Pn0gW2Fubm90YXRpb25DYW52YXNNYXBdXG4gKiBAcHJvcGVydHkge1RleHRBY2Nlc3NpYmlsaXR5TWFuYWdlcn0gW2FjY2Vzc2liaWxpdHlNYW5hZ2VyXVxuICogQHByb3BlcnR5IHtBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyfSBbYW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcl1cbiAqIEBwcm9wZXJ0eSB7U3RydWN0VHJlZUxheWVyQnVpbGRlcn0gW3N0cnVjdFRyZWVMYXllcl1cbiAqL1xuXG4vKipcbiAqIE1hbmFnZSB0aGUgbGF5ZXIgY29udGFpbmluZyBhbGwgdGhlIGFubm90YXRpb25zLlxuICovXG5jbGFzcyBBbm5vdGF0aW9uTGF5ZXIge1xuICAjYWNjZXNzaWJpbGl0eU1hbmFnZXIgPSBudWxsO1xuXG4gICNhbm5vdGF0aW9uQ2FudmFzTWFwID0gbnVsbDtcblxuICAjZWRpdGFibGVBbm5vdGF0aW9ucyA9IG5ldyBNYXAoKTtcblxuICAjc3RydWN0VHJlZUxheWVyID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgZGl2LFxuICAgIGFjY2Vzc2liaWxpdHlNYW5hZ2VyLFxuICAgIGFubm90YXRpb25DYW52YXNNYXAsXG4gICAgYW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcixcbiAgICBwYWdlLFxuICAgIHZpZXdwb3J0LFxuICAgIHN0cnVjdFRyZWVMYXllcixcbiAgfSkge1xuICAgIHRoaXMuZGl2ID0gZGl2O1xuICAgIHRoaXMuI2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gYWNjZXNzaWJpbGl0eU1hbmFnZXI7XG4gICAgdGhpcy4jYW5ub3RhdGlvbkNhbnZhc01hcCA9IGFubm90YXRpb25DYW52YXNNYXA7XG4gICAgdGhpcy4jc3RydWN0VHJlZUxheWVyID0gc3RydWN0VHJlZUxheWVyIHx8IG51bGw7XG4gICAgdGhpcy5wYWdlID0gcGFnZTtcbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgdGhpcy56SW5kZXggPSAwO1xuICAgIHRoaXMuX2Fubm90YXRpb25FZGl0b3JVSU1hbmFnZXIgPSBhbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyO1xuXG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkge1xuICAgICAgLy8gRm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzaG93UG9wdXBzXCIsIHtcbiAgICAgICAgdmFsdWU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNob3cgb2YgdGhpcy5wb3B1cFNob3cpIHtcbiAgICAgICAgICAgIGF3YWl0IHNob3coKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIHRoaXMucG9wdXBTaG93ID0gW107XG4gICAgfVxuICB9XG5cbiAgaGFzRWRpdGFibGVBbm5vdGF0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy4jZWRpdGFibGVBbm5vdGF0aW9ucy5zaXplID4gMDtcbiAgfVxuXG4gIGFzeW5jICNhcHBlbmRFbGVtZW50KGVsZW1lbnQsIGlkKSB7XG4gICAgY29uc3QgY29udGVudEVsZW1lbnQgPSBlbGVtZW50LmZpcnN0Q2hpbGQgfHwgZWxlbWVudDtcbiAgICBjb25zdCBhbm5vdGF0aW9uSWQgPSAoY29udGVudEVsZW1lbnQuaWQgPSBgJHtBbm5vdGF0aW9uUHJlZml4fSR7aWR9YCk7XG4gICAgY29uc3QgYXJpYUF0dHJpYnV0ZXMgPVxuICAgICAgYXdhaXQgdGhpcy4jc3RydWN0VHJlZUxheWVyPy5nZXRBcmlhQXR0cmlidXRlcyhhbm5vdGF0aW9uSWQpO1xuICAgIGlmIChhcmlhQXR0cmlidXRlcykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgYXJpYUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgY29udGVudEVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGl2LmFwcGVuZChlbGVtZW50KTtcbiAgICB0aGlzLiNhY2Nlc3NpYmlsaXR5TWFuYWdlcj8ubW92ZUVsZW1lbnRJbkRPTShcbiAgICAgIHRoaXMuZGl2LFxuICAgICAgZWxlbWVudCxcbiAgICAgIGNvbnRlbnRFbGVtZW50LFxuICAgICAgLyogaXNSZW1vdmFibGUgPSAqLyBmYWxzZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGEgbmV3IGFubm90YXRpb24gbGF5ZXIgd2l0aCBhbGwgYW5ub3RhdGlvbiBlbGVtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uTGF5ZXJQYXJhbWV0ZXJzfSBwYXJhbXNcbiAgICogQG1lbWJlcm9mIEFubm90YXRpb25MYXllclxuICAgKi9cbiAgYXN5bmMgcmVuZGVyKHBhcmFtcykge1xuICAgIGNvbnN0IHsgYW5ub3RhdGlvbnMgfSA9IHBhcmFtcztcbiAgICBjb25zdCBsYXllciA9IHRoaXMuZGl2O1xuICAgIHNldExheWVyRGltZW5zaW9ucyhsYXllciwgdGhpcy52aWV3cG9ydCk7XG5cbiAgICBjb25zdCBwb3B1cFRvRWxlbWVudHMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgZWxlbWVudFBhcmFtcyA9IHtcbiAgICAgIGRhdGE6IG51bGwsXG4gICAgICBsYXllcixcbiAgICAgIGxpbmtTZXJ2aWNlOiBwYXJhbXMubGlua1NlcnZpY2UsXG4gICAgICBkb3dubG9hZE1hbmFnZXI6IHBhcmFtcy5kb3dubG9hZE1hbmFnZXIsXG4gICAgICBpbWFnZVJlc291cmNlc1BhdGg6IHBhcmFtcy5pbWFnZVJlc291cmNlc1BhdGggfHwgXCJcIixcbiAgICAgIHJlbmRlckZvcm1zOiBwYXJhbXMucmVuZGVyRm9ybXMgIT09IGZhbHNlLFxuICAgICAgc3ZnRmFjdG9yeTogbmV3IERPTVNWR0ZhY3RvcnkoKSxcbiAgICAgIGFubm90YXRpb25TdG9yYWdlOiBwYXJhbXMuYW5ub3RhdGlvblN0b3JhZ2UgfHwgbmV3IEFubm90YXRpb25TdG9yYWdlKCksXG4gICAgICBlbmFibGVTY3JpcHRpbmc6IHBhcmFtcy5lbmFibGVTY3JpcHRpbmcgPT09IHRydWUsXG4gICAgICBoYXNKU0FjdGlvbnM6IHBhcmFtcy5oYXNKU0FjdGlvbnMsXG4gICAgICBmaWVsZE9iamVjdHM6IHBhcmFtcy5maWVsZE9iamVjdHMsXG4gICAgICBwYXJlbnQ6IHRoaXMsXG4gICAgICBlbGVtZW50czogbnVsbCxcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBkYXRhIG9mIGFubm90YXRpb25zKSB7XG4gICAgICBpZiAoZGF0YS5ub0hUTUwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBpc1BvcHVwQW5ub3RhdGlvbiA9IGRhdGEuYW5ub3RhdGlvblR5cGUgPT09IEFubm90YXRpb25UeXBlLlBPUFVQO1xuICAgICAgaWYgKCFpc1BvcHVwQW5ub3RhdGlvbikge1xuICAgICAgICBpZiAoZGF0YS5yZWN0WzJdID09PSBkYXRhLnJlY3RbMF0gfHwgZGF0YS5yZWN0WzNdID09PSBkYXRhLnJlY3RbMV0pIHtcbiAgICAgICAgICBjb250aW51ZTsgLy8gSWdub3JlIGVtcHR5IGFubm90YXRpb25zLlxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IHBvcHVwVG9FbGVtZW50cy5nZXQoZGF0YS5pZCk7XG4gICAgICAgIGlmICghZWxlbWVudHMpIHtcbiAgICAgICAgICAvLyBJZ25vcmUgcG9wdXAgYW5ub3RhdGlvbnMgd2l0aG91dCBhIGNvcnJlc3BvbmRpbmcgYW5ub3RhdGlvbi5cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50UGFyYW1zLmVsZW1lbnRzID0gZWxlbWVudHM7XG4gICAgICB9XG4gICAgICBlbGVtZW50UGFyYW1zLmRhdGEgPSBkYXRhO1xuICAgICAgY29uc3QgZWxlbWVudCA9IEFubm90YXRpb25FbGVtZW50RmFjdG9yeS5jcmVhdGUoZWxlbWVudFBhcmFtcyk7XG5cbiAgICAgIGlmICghZWxlbWVudC5pc1JlbmRlcmFibGUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNQb3B1cEFubm90YXRpb24gJiYgZGF0YS5wb3B1cFJlZikge1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IHBvcHVwVG9FbGVtZW50cy5nZXQoZGF0YS5wb3B1cFJlZik7XG4gICAgICAgIGlmICghZWxlbWVudHMpIHtcbiAgICAgICAgICBwb3B1cFRvRWxlbWVudHMuc2V0KGRhdGEucG9wdXBSZWYsIFtlbGVtZW50XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZW5kZXJlZCA9IGVsZW1lbnQucmVuZGVyKCk7XG4gICAgICBpZiAoZGF0YS5oaWRkZW4pIHtcbiAgICAgICAgcmVuZGVyZWQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLiNhcHBlbmRFbGVtZW50KHJlbmRlcmVkLCBkYXRhLmlkKTtcblxuICAgICAgaWYgKGVsZW1lbnQuX2lzRWRpdGFibGUpIHtcbiAgICAgICAgdGhpcy4jZWRpdGFibGVBbm5vdGF0aW9ucy5zZXQoZWxlbWVudC5kYXRhLmlkLCBlbGVtZW50KTtcbiAgICAgICAgdGhpcy5fYW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcj8ucmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jc2V0QW5ub3RhdGlvbkNhbnZhc01hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBsaW5rIGFubm90YXRpb25zIHRvIHRoZSBhbm5vdGF0aW9uIGxheWVyLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IGFubm90YXRpb25zXG4gICAqIEBwYXJhbSB7SVBERkxpbmtTZXJ2aWNlfSBsaW5rU2VydmljZVxuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvbkxheWVyXG4gICAqL1xuICBhc3luYyBhZGRMaW5rQW5ub3RhdGlvbnMoYW5ub3RhdGlvbnMsIGxpbmtTZXJ2aWNlKSB7XG4gICAgY29uc3QgZWxlbWVudFBhcmFtcyA9IHtcbiAgICAgIGRhdGE6IG51bGwsXG4gICAgICBsYXllcjogdGhpcy5kaXYsXG4gICAgICBsaW5rU2VydmljZSxcbiAgICAgIHN2Z0ZhY3Rvcnk6IG5ldyBET01TVkdGYWN0b3J5KCksXG4gICAgICBwYXJlbnQ6IHRoaXMsXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgYW5ub3RhdGlvbnMpIHtcbiAgICAgIGRhdGEuYm9yZGVyU3R5bGUgfHw9IEFubm90YXRpb25MYXllci5fZGVmYXVsdEJvcmRlclN0eWxlO1xuXG4gICAgICBlbGVtZW50UGFyYW1zLmRhdGEgPSBkYXRhO1xuICAgICAgY29uc3QgZWxlbWVudCA9IEFubm90YXRpb25FbGVtZW50RmFjdG9yeS5jcmVhdGUoZWxlbWVudFBhcmFtcyk7XG5cbiAgICAgIGlmICghZWxlbWVudC5pc1JlbmRlcmFibGUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCByZW5kZXJlZCA9IGVsZW1lbnQucmVuZGVyKCk7XG4gICAgICBhd2FpdCB0aGlzLiNhcHBlbmRFbGVtZW50KHJlbmRlcmVkLCBkYXRhLmlkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBhbm5vdGF0aW9uIGVsZW1lbnRzIG9uIGV4aXN0aW5nIGFubm90YXRpb24gbGF5ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkxheWVyUGFyYW1ldGVyc30gdmlld3BvcnRcbiAgICogQG1lbWJlcm9mIEFubm90YXRpb25MYXllclxuICAgKi9cbiAgdXBkYXRlKHsgdmlld3BvcnQgfSkge1xuICAgIGNvbnN0IGxheWVyID0gdGhpcy5kaXY7XG4gICAgdGhpcy52aWV3cG9ydCA9IHZpZXdwb3J0O1xuICAgIHNldExheWVyRGltZW5zaW9ucyhsYXllciwgeyByb3RhdGlvbjogdmlld3BvcnQucm90YXRpb24gfSk7XG5cbiAgICB0aGlzLiNzZXRBbm5vdGF0aW9uQ2FudmFzTWFwKCk7XG4gICAgbGF5ZXIuaGlkZGVuID0gZmFsc2U7XG4gIH1cblxuICAjc2V0QW5ub3RhdGlvbkNhbnZhc01hcCgpIHtcbiAgICBpZiAoIXRoaXMuI2Fubm90YXRpb25DYW52YXNNYXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGF5ZXIgPSB0aGlzLmRpdjtcbiAgICBmb3IgKGNvbnN0IFtpZCwgY2FudmFzXSBvZiB0aGlzLiNhbm5vdGF0aW9uQ2FudmFzTWFwKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gbGF5ZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtYW5ub3RhdGlvbi1pZD1cIiR7aWR9XCJdYCk7XG4gICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNhbnZhcy5jbGFzc05hbWUgPSBcImFubm90YXRpb25Db250ZW50XCI7XG4gICAgICBjb25zdCB7IGZpcnN0Q2hpbGQgfSA9IGVsZW1lbnQ7XG4gICAgICBpZiAoIWZpcnN0Q2hpbGQpIHtcbiAgICAgICAgZWxlbWVudC5hcHBlbmQoY2FudmFzKTtcbiAgICAgIH0gZWxzZSBpZiAoZmlyc3RDaGlsZC5ub2RlTmFtZSA9PT0gXCJDQU5WQVNcIikge1xuICAgICAgICBmaXJzdENoaWxkLnJlcGxhY2VXaXRoKGNhbnZhcyk7XG4gICAgICB9IGVsc2UgaWYgKCFmaXJzdENoaWxkLmNsYXNzTGlzdC5jb250YWlucyhcImFubm90YXRpb25Db250ZW50XCIpKSB7XG4gICAgICAgIGZpcnN0Q2hpbGQuYmVmb3JlKGNhbnZhcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdENoaWxkLmFmdGVyKGNhbnZhcyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVkaXRhYmxlQW5ub3RhdGlvbiA9IHRoaXMuI2VkaXRhYmxlQW5ub3RhdGlvbnMuZ2V0KGlkKTtcbiAgICAgIGlmICghZWRpdGFibGVBbm5vdGF0aW9uKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGVkaXRhYmxlQW5ub3RhdGlvbi5faGFzTm9DYW52YXMpIHtcbiAgICAgICAgLy8gVGhlIGNhbnZhcyB3YXNuJ3QgYXZhaWxhYmxlIHdoZW4gdGhlIGFubm90YXRpb24gd2FzIGNyZWF0ZWQuXG4gICAgICAgIHRoaXMuX2Fubm90YXRpb25FZGl0b3JVSU1hbmFnZXI/LnNldE1pc3NpbmdDYW52YXMoXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgZWxlbWVudC5pZCxcbiAgICAgICAgICBjYW52YXNcbiAgICAgICAgKTtcbiAgICAgICAgZWRpdGFibGVBbm5vdGF0aW9uLl9oYXNOb0NhbnZhcyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWRpdGFibGVBbm5vdGF0aW9uLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4jYW5ub3RhdGlvbkNhbnZhc01hcC5jbGVhcigpO1xuICB9XG5cbiAgZ2V0RWRpdGFibGVBbm5vdGF0aW9ucygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLiNlZGl0YWJsZUFubm90YXRpb25zLnZhbHVlcygpKTtcbiAgfVxuXG4gIGdldEVkaXRhYmxlQW5ub3RhdGlvbihpZCkge1xuICAgIHJldHVybiB0aGlzLiNlZGl0YWJsZUFubm90YXRpb25zLmdldChpZCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBnZXQgX2RlZmF1bHRCb3JkZXJTdHlsZSgpIHtcbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiX2RlZmF1bHRCb3JkZXJTdHlsZVwiLFxuICAgICAgT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIHdpZHRoOiAxLFxuICAgICAgICByYXdXaWR0aDogMSxcbiAgICAgICAgc3R5bGU6IEFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUuU09MSUQsXG4gICAgICAgIGRhc2hBcnJheTogWzNdLFxuICAgICAgICBob3Jpem9udGFsQ29ybmVyUmFkaXVzOiAwLFxuICAgICAgICB2ZXJ0aWNhbENvcm5lclJhZGl1czogMCxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBBbm5vdGF0aW9uTGF5ZXIsXG4gIEZyZWVUZXh0QW5ub3RhdGlvbkVsZW1lbnQsXG4gIEhpZ2hsaWdodEFubm90YXRpb25FbGVtZW50LFxuICBJbmtBbm5vdGF0aW9uRWxlbWVudCxcbiAgU3RhbXBBbm5vdGF0aW9uRWxlbWVudCxcbn07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vYW5ub3RhdGlvbl9lZGl0b3JfbGF5ZXIuanNcIikuQW5ub3RhdGlvbkVkaXRvckxheWVyfSBBbm5vdGF0aW9uRWRpdG9yTGF5ZXIgKi9cblxuaW1wb3J0IHtcbiAgQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUsXG4gIEFubm90YXRpb25FZGl0b3JUeXBlLFxuICBhc3NlcnQsXG4gIExJTkVfRkFDVE9SLFxuICBzaGFkb3csXG4gIFV0aWwsXG59IGZyb20gXCIuLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHtcbiAgQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcixcbiAgYmluZEV2ZW50cyxcbiAgS2V5Ym9hcmRNYW5hZ2VyLFxufSBmcm9tIFwiLi90b29scy5qc1wiO1xuaW1wb3J0IHsgQW5ub3RhdGlvbkVkaXRvciB9IGZyb20gXCIuL2VkaXRvci5qc1wiO1xuaW1wb3J0IHsgRnJlZVRleHRBbm5vdGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9hbm5vdGF0aW9uX2xheWVyLmpzXCI7XG5cbmNvbnN0IEVPTF9QQVRURVJOID0gL1xcclxcbj98XFxuL2c7XG5cbi8qKlxuICogQmFzaWMgdGV4dCBlZGl0b3IgaW4gb3JkZXIgdG8gY3JlYXRlIGEgRnJlZVRleCBhbm5vdGF0aW9uLlxuICovXG5jbGFzcyBGcmVlVGV4dEVkaXRvciBleHRlbmRzIEFubm90YXRpb25FZGl0b3Ige1xuICAjY29sb3I7XG5cbiAgI2NvbnRlbnQgPSBcIlwiO1xuXG4gICNlZGl0b3JEaXZJZCA9IGAke3RoaXMuaWR9LWVkaXRvcmA7XG5cbiAgI2VkaXRNb2RlQUMgPSBudWxsO1xuXG4gICNmb250U2l6ZTtcblxuICBzdGF0aWMgX2ZyZWVUZXh0RGVmYXVsdENvbnRlbnQgPSBcIlwiO1xuXG4gIHN0YXRpYyBfaW50ZXJuYWxQYWRkaW5nID0gMDtcblxuICBzdGF0aWMgX2RlZmF1bHRDb2xvciA9IG51bGw7XG5cbiAgc3RhdGljIF9kZWZhdWx0Rm9udFNpemUgPSAxMDtcblxuICBzdGF0aWMgZ2V0IF9rZXlib2FyZE1hbmFnZXIoKSB7XG4gICAgY29uc3QgcHJvdG8gPSBGcmVlVGV4dEVkaXRvci5wcm90b3R5cGU7XG5cbiAgICBjb25zdCBhcnJvd0NoZWNrZXIgPSBzZWxmID0+IHNlbGYuaXNFbXB0eSgpO1xuXG4gICAgY29uc3Qgc21hbGwgPSBBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyLlRSQU5TTEFURV9TTUFMTDtcbiAgICBjb25zdCBiaWcgPSBBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyLlRSQU5TTEFURV9CSUc7XG5cbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwiX2tleWJvYXJkTWFuYWdlclwiLFxuICAgICAgbmV3IEtleWJvYXJkTWFuYWdlcihbXG4gICAgICAgIFtcbiAgICAgICAgICAvLyBDb21taXQgdGhlIHRleHQgaW4gY2FzZSB0aGUgdXNlciB1c2UgY3RybCtzIHRvIHNhdmUgdGhlIGRvY3VtZW50LlxuICAgICAgICAgIC8vIFRoZSBldmVudCBtdXN0IGJ1YmJsZSBpbiBvcmRlciB0byBiZSBjYXVnaHQgYnkgdGhlIHZpZXdlci5cbiAgICAgICAgICAvLyBTZWUgYnVnIDE4MzE1NzQuXG4gICAgICAgICAgW1wiY3RybCtzXCIsIFwibWFjK21ldGErc1wiLCBcImN0cmwrcFwiLCBcIm1hYyttZXRhK3BcIl0sXG4gICAgICAgICAgcHJvdG8uY29tbWl0T3JSZW1vdmUsXG4gICAgICAgICAgeyBidWJibGVzOiB0cnVlIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJjdHJsK0VudGVyXCIsIFwibWFjK21ldGErRW50ZXJcIiwgXCJFc2NhcGVcIiwgXCJtYWMrRXNjYXBlXCJdLFxuICAgICAgICAgIHByb3RvLmNvbW1pdE9yUmVtb3ZlLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgW1wiQXJyb3dMZWZ0XCIsIFwibWFjK0Fycm93TGVmdFwiXSxcbiAgICAgICAgICBwcm90by5fdHJhbnNsYXRlRW1wdHksXG4gICAgICAgICAgeyBhcmdzOiBbLXNtYWxsLCAwXSwgY2hlY2tlcjogYXJyb3dDaGVja2VyIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJjdHJsK0Fycm93TGVmdFwiLCBcIm1hYytzaGlmdCtBcnJvd0xlZnRcIl0sXG4gICAgICAgICAgcHJvdG8uX3RyYW5zbGF0ZUVtcHR5LFxuICAgICAgICAgIHsgYXJnczogWy1iaWcsIDBdLCBjaGVja2VyOiBhcnJvd0NoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcIkFycm93UmlnaHRcIiwgXCJtYWMrQXJyb3dSaWdodFwiXSxcbiAgICAgICAgICBwcm90by5fdHJhbnNsYXRlRW1wdHksXG4gICAgICAgICAgeyBhcmdzOiBbc21hbGwsIDBdLCBjaGVja2VyOiBhcnJvd0NoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcImN0cmwrQXJyb3dSaWdodFwiLCBcIm1hYytzaGlmdCtBcnJvd1JpZ2h0XCJdLFxuICAgICAgICAgIHByb3RvLl90cmFuc2xhdGVFbXB0eSxcbiAgICAgICAgICB7IGFyZ3M6IFtiaWcsIDBdLCBjaGVja2VyOiBhcnJvd0NoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcIkFycm93VXBcIiwgXCJtYWMrQXJyb3dVcFwiXSxcbiAgICAgICAgICBwcm90by5fdHJhbnNsYXRlRW1wdHksXG4gICAgICAgICAgeyBhcmdzOiBbMCwgLXNtYWxsXSwgY2hlY2tlcjogYXJyb3dDaGVja2VyIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJjdHJsK0Fycm93VXBcIiwgXCJtYWMrc2hpZnQrQXJyb3dVcFwiXSxcbiAgICAgICAgICBwcm90by5fdHJhbnNsYXRlRW1wdHksXG4gICAgICAgICAgeyBhcmdzOiBbMCwgLWJpZ10sIGNoZWNrZXI6IGFycm93Q2hlY2tlciB9LFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgW1wiQXJyb3dEb3duXCIsIFwibWFjK0Fycm93RG93blwiXSxcbiAgICAgICAgICBwcm90by5fdHJhbnNsYXRlRW1wdHksXG4gICAgICAgICAgeyBhcmdzOiBbMCwgc21hbGxdLCBjaGVja2VyOiBhcnJvd0NoZWNrZXIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcImN0cmwrQXJyb3dEb3duXCIsIFwibWFjK3NoaWZ0K0Fycm93RG93blwiXSxcbiAgICAgICAgICBwcm90by5fdHJhbnNsYXRlRW1wdHksXG4gICAgICAgICAgeyBhcmdzOiBbMCwgYmlnXSwgY2hlY2tlcjogYXJyb3dDaGVja2VyIH0sXG4gICAgICAgIF0sXG4gICAgICBdKVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgX3R5cGUgPSBcImZyZWV0ZXh0XCI7XG5cbiAgc3RhdGljIF9lZGl0b3JUeXBlID0gQW5ub3RhdGlvbkVkaXRvclR5cGUuRlJFRVRFWFQ7XG5cbiAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgc3VwZXIoeyAuLi5wYXJhbXMsIG5hbWU6IFwiZnJlZVRleHRFZGl0b3JcIiB9KTtcbiAgICB0aGlzLiNjb2xvciA9XG4gICAgICBwYXJhbXMuY29sb3IgfHxcbiAgICAgIEZyZWVUZXh0RWRpdG9yLl9kZWZhdWx0Q29sb3IgfHxcbiAgICAgIEFubm90YXRpb25FZGl0b3IuX2RlZmF1bHRMaW5lQ29sb3I7XG4gICAgdGhpcy4jZm9udFNpemUgPSBwYXJhbXMuZm9udFNpemUgfHwgRnJlZVRleHRFZGl0b3IuX2RlZmF1bHRGb250U2l6ZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdGF0aWMgaW5pdGlhbGl6ZShsMTBuLCB1aU1hbmFnZXIpIHtcbiAgICBBbm5vdGF0aW9uRWRpdG9yLmluaXRpYWxpemUobDEwbiwgdWlNYW5hZ2VyKTtcbiAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcblxuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIlRFU1RJTkdcIikpIHtcbiAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBwYXJzZUZsb2F0KFxuICAgICAgICBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1mcmVldGV4dC1saW5lLWhlaWdodFwiKVxuICAgICAgKTtcbiAgICAgIGFzc2VydChcbiAgICAgICAgbGluZUhlaWdodCA9PT0gTElORV9GQUNUT1IsXG4gICAgICAgIFwiVXBkYXRlIHRoZSBDU1MgdmFyaWFibGUgdG8gYWdyZWUgd2l0aCB0aGUgY29uc3RhbnQuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5faW50ZXJuYWxQYWRkaW5nID0gcGFyc2VGbG9hdChcbiAgICAgIHN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCItLWZyZWV0ZXh0LXBhZGRpbmdcIilcbiAgICApO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyB1cGRhdGVEZWZhdWx0UGFyYW1zKHR5cGUsIHZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkZSRUVURVhUX1NJWkU6XG4gICAgICAgIEZyZWVUZXh0RWRpdG9yLl9kZWZhdWx0Rm9udFNpemUgPSB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkZSRUVURVhUX0NPTE9SOlxuICAgICAgICBGcmVlVGV4dEVkaXRvci5fZGVmYXVsdENvbG9yID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICB1cGRhdGVQYXJhbXModHlwZSwgdmFsdWUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRlJFRVRFWFRfU0laRTpcbiAgICAgICAgdGhpcy4jdXBkYXRlRm9udFNpemUodmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRlJFRVRFWFRfQ09MT1I6XG4gICAgICAgIHRoaXMuI3VwZGF0ZUNvbG9yKHZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdFByb3BlcnRpZXNUb1VwZGF0ZSgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgW1xuICAgICAgICBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5GUkVFVEVYVF9TSVpFLFxuICAgICAgICBGcmVlVGV4dEVkaXRvci5fZGVmYXVsdEZvbnRTaXplLFxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRlJFRVRFWFRfQ09MT1IsXG4gICAgICAgIEZyZWVUZXh0RWRpdG9yLl9kZWZhdWx0Q29sb3IgfHwgQW5ub3RhdGlvbkVkaXRvci5fZGVmYXVsdExpbmVDb2xvcixcbiAgICAgIF0sXG4gICAgXTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXQgcHJvcGVydGllc1RvVXBkYXRlKCkge1xuICAgIHJldHVybiBbXG4gICAgICBbQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRlJFRVRFWFRfU0laRSwgdGhpcy4jZm9udFNpemVdLFxuICAgICAgW0Fubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkZSRUVURVhUX0NPTE9SLCB0aGlzLiNjb2xvcl0sXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGZvbnQgc2l6ZSBhbmQgbWFrZSB0aGlzIGFjdGlvbiBhcyB1bmRvYWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGZvbnRTaXplXG4gICAqL1xuICAjdXBkYXRlRm9udFNpemUoZm9udFNpemUpIHtcbiAgICBjb25zdCBzZXRGb250c2l6ZSA9IHNpemUgPT4ge1xuICAgICAgdGhpcy5lZGl0b3JEaXYuc3R5bGUuZm9udFNpemUgPSBgY2FsYygke3NpemV9cHggKiB2YXIoLS10b3RhbC1zY2FsZS1mYWN0b3IpKWA7XG4gICAgICB0aGlzLnRyYW5zbGF0ZSgwLCAtKHNpemUgLSB0aGlzLiNmb250U2l6ZSkgKiB0aGlzLnBhcmVudFNjYWxlKTtcbiAgICAgIHRoaXMuI2ZvbnRTaXplID0gc2l6ZTtcbiAgICAgIHRoaXMuI3NldEVkaXRvckRpbWVuc2lvbnMoKTtcbiAgICB9O1xuICAgIGNvbnN0IHNhdmVkRm9udHNpemUgPSB0aGlzLiNmb250U2l6ZTtcbiAgICB0aGlzLmFkZENvbW1hbmRzKHtcbiAgICAgIGNtZDogc2V0Rm9udHNpemUuYmluZCh0aGlzLCBmb250U2l6ZSksXG4gICAgICB1bmRvOiBzZXRGb250c2l6ZS5iaW5kKHRoaXMsIHNhdmVkRm9udHNpemUpLFxuICAgICAgcG9zdDogdGhpcy5fdWlNYW5hZ2VyLnVwZGF0ZVVJLmJpbmQodGhpcy5fdWlNYW5hZ2VyLCB0aGlzKSxcbiAgICAgIG11c3RFeGVjOiB0cnVlLFxuICAgICAgdHlwZTogQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRlJFRVRFWFRfU0laRSxcbiAgICAgIG92ZXJ3cml0ZUlmU2FtZVR5cGU6IHRydWUsXG4gICAgICBrZWVwVW5kbzogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGNvbG9yIGFuZCBtYWtlIHRoaXMgYWN0aW9uIHVuZG9hYmxlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAgICovXG4gICN1cGRhdGVDb2xvcihjb2xvcikge1xuICAgIGNvbnN0IHNldENvbG9yID0gY29sID0+IHtcbiAgICAgIHRoaXMuI2NvbG9yID0gdGhpcy5lZGl0b3JEaXYuc3R5bGUuY29sb3IgPSBjb2w7XG4gICAgfTtcbiAgICBjb25zdCBzYXZlZENvbG9yID0gdGhpcy4jY29sb3I7XG4gICAgdGhpcy5hZGRDb21tYW5kcyh7XG4gICAgICBjbWQ6IHNldENvbG9yLmJpbmQodGhpcywgY29sb3IpLFxuICAgICAgdW5kbzogc2V0Q29sb3IuYmluZCh0aGlzLCBzYXZlZENvbG9yKSxcbiAgICAgIHBvc3Q6IHRoaXMuX3VpTWFuYWdlci51cGRhdGVVSS5iaW5kKHRoaXMuX3VpTWFuYWdlciwgdGhpcyksXG4gICAgICBtdXN0RXhlYzogdHJ1ZSxcbiAgICAgIHR5cGU6IEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkZSRUVURVhUX0NPTE9SLFxuICAgICAgb3ZlcndyaXRlSWZTYW1lVHlwZTogdHJ1ZSxcbiAgICAgIGtlZXBVbmRvOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byB0cmFuc2xhdGUgdGhlIGVkaXRvciB3aXRoIHRoZSBrZXlib2FyZCB3aGVuIGl0J3MgZW1wdHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IGluIHBhZ2UgdW5pdHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IGluIHBhZ2UgdW5pdHMuXG4gICAqL1xuICBfdHJhbnNsYXRlRW1wdHkoeCwgeSkge1xuICAgIHRoaXMuX3VpTWFuYWdlci50cmFuc2xhdGVTZWxlY3RlZEVkaXRvcnMoeCwgeSwgLyogbm9Db21taXQgPSAqLyB0cnVlKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXRJbml0aWFsVHJhbnNsYXRpb24oKSB7XG4gICAgLy8gVGhlIHN0YXJ0IG9mIHRoZSBiYXNlIGxpbmUgaXMgd2hlcmUgdGhlIHVzZXIgY2xpY2tlZC5cbiAgICBjb25zdCBzY2FsZSA9IHRoaXMucGFyZW50U2NhbGU7XG4gICAgcmV0dXJuIFtcbiAgICAgIC1GcmVlVGV4dEVkaXRvci5faW50ZXJuYWxQYWRkaW5nICogc2NhbGUsXG4gICAgICAtKEZyZWVUZXh0RWRpdG9yLl9pbnRlcm5hbFBhZGRpbmcgKyB0aGlzLiNmb250U2l6ZSkgKiBzY2FsZSxcbiAgICBdO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlYnVpbGQoKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdXBlci5yZWJ1aWxkKCk7XG4gICAgaWYgKHRoaXMuZGl2ID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzQXR0YWNoZWRUb0RPTSkge1xuICAgICAgLy8gQXQgc29tZSBwb2ludCB0aGlzIGVkaXRvciB3YXMgcmVtb3ZlZCBhbmQgd2UncmUgcmVidWlsdGluZyBpdCxcbiAgICAgIC8vIGhlbmNlIHdlIG11c3QgYWRkIGl0IHRvIGl0cyBwYXJlbnQuXG4gICAgICB0aGlzLnBhcmVudC5hZGQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGVuYWJsZUVkaXRNb2RlKCkge1xuICAgIGlmICh0aGlzLmlzSW5FZGl0TW9kZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wYXJlbnQuc2V0RWRpdGluZ1N0YXRlKGZhbHNlKTtcbiAgICB0aGlzLnBhcmVudC51cGRhdGVUb29sYmFyKEFubm90YXRpb25FZGl0b3JUeXBlLkZSRUVURVhUKTtcbiAgICBzdXBlci5lbmFibGVFZGl0TW9kZSgpO1xuICAgIHRoaXMub3ZlcmxheURpdi5jbGFzc0xpc3QucmVtb3ZlKFwiZW5hYmxlZFwiKTtcbiAgICB0aGlzLmVkaXRvckRpdi5jb250ZW50RWRpdGFibGUgPSB0cnVlO1xuICAgIHRoaXMuX2lzRHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5kaXYucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpO1xuXG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICAhdGhpcy4jZWRpdE1vZGVBQyxcbiAgICAgICAgXCJObyBgdGhpcy4jZWRpdE1vZGVBQ2AgQWJvcnRDb250cm9sbGVyIHNob3VsZCBleGlzdC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy4jZWRpdE1vZGVBQyA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCBzaWduYWwgPSB0aGlzLl91aU1hbmFnZXIuY29tYmluZWRTaWduYWwodGhpcy4jZWRpdE1vZGVBQyk7XG5cbiAgICB0aGlzLmVkaXRvckRpdi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJrZXlkb3duXCIsXG4gICAgICB0aGlzLmVkaXRvckRpdktleWRvd24uYmluZCh0aGlzKSxcbiAgICAgIHsgc2lnbmFsIH1cbiAgICApO1xuICAgIHRoaXMuZWRpdG9yRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLmVkaXRvckRpdkZvY3VzLmJpbmQodGhpcyksIHtcbiAgICAgIHNpZ25hbCxcbiAgICB9KTtcbiAgICB0aGlzLmVkaXRvckRpdi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmVkaXRvckRpdkJsdXIuYmluZCh0aGlzKSwge1xuICAgICAgc2lnbmFsLFxuICAgIH0pO1xuICAgIHRoaXMuZWRpdG9yRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmVkaXRvckRpdklucHV0LmJpbmQodGhpcyksIHtcbiAgICAgIHNpZ25hbCxcbiAgICB9KTtcbiAgICB0aGlzLmVkaXRvckRpdi5hZGRFdmVudExpc3RlbmVyKFwicGFzdGVcIiwgdGhpcy5lZGl0b3JEaXZQYXN0ZS5iaW5kKHRoaXMpLCB7XG4gICAgICBzaWduYWwsXG4gICAgfSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZGlzYWJsZUVkaXRNb2RlKCkge1xuICAgIGlmICghdGhpcy5pc0luRWRpdE1vZGUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGFyZW50LnNldEVkaXRpbmdTdGF0ZSh0cnVlKTtcbiAgICBzdXBlci5kaXNhYmxlRWRpdE1vZGUoKTtcbiAgICB0aGlzLm92ZXJsYXlEaXYuY2xhc3NMaXN0LmFkZChcImVuYWJsZWRcIik7XG4gICAgdGhpcy5lZGl0b3JEaXYuY29udGVudEVkaXRhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5kaXYuc2V0QXR0cmlidXRlKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsIHRoaXMuI2VkaXRvckRpdklkKTtcbiAgICB0aGlzLl9pc0RyYWdnYWJsZSA9IHRydWU7XG5cbiAgICB0aGlzLiNlZGl0TW9kZUFDPy5hYm9ydCgpO1xuICAgIHRoaXMuI2VkaXRNb2RlQUMgPSBudWxsO1xuXG4gICAgLy8gT24gQ2hyb21lLCB0aGUgZm9jdXMgaXMgZ2l2ZW4gdG8gPGJvZHk+IHdoZW4gY29udGVudEVkaXRhYmxlIGlzIHNldCB0b1xuICAgIC8vIGZhbHNlLCBoZW5jZSB3ZSBmb2N1cyB0aGUgZGl2LlxuICAgIHRoaXMuZGl2LmZvY3VzKHtcbiAgICAgIHByZXZlbnRTY3JvbGw6IHRydWUgLyogU2VlIGlzc3VlICMxNTc0NCAqLyxcbiAgICB9KTtcblxuICAgIC8vIEluIGNhc2UgdGhlIGJsdXIgY2FsbGJhY2sgaGFzbid0IGJlZW4gY2FsbGVkLlxuICAgIHRoaXMuaXNFZGl0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5wYXJlbnQuZGl2LmNsYXNzTGlzdC5hZGQoXCJmcmVldGV4dEVkaXRpbmdcIik7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZm9jdXNpbihldmVudCkge1xuICAgIGlmICghdGhpcy5fZm9jdXNFdmVudHNBbGxvd2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN1cGVyLmZvY3VzaW4oZXZlbnQpO1xuICAgIGlmIChldmVudC50YXJnZXQgIT09IHRoaXMuZWRpdG9yRGl2KSB7XG4gICAgICB0aGlzLmVkaXRvckRpdi5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvbmNlQWRkZWQoZm9jdXMpIHtcbiAgICBpZiAodGhpcy53aWR0aCkge1xuICAgICAgLy8gVGhlIGVkaXRvciB3YXMgY3JlYXRlZCBpbiB1c2luZyBjdHJsK2MuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZW5hYmxlRWRpdE1vZGUoKTtcbiAgICBpZiAoZm9jdXMpIHtcbiAgICAgIHRoaXMuZWRpdG9yRGl2LmZvY3VzKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9pbml0aWFsT3B0aW9ucz8uaXNDZW50ZXJlZCkge1xuICAgICAgdGhpcy5jZW50ZXIoKTtcbiAgICB9XG4gICAgdGhpcy5faW5pdGlhbE9wdGlvbnMgPSBudWxsO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuICF0aGlzLmVkaXRvckRpdiB8fCB0aGlzLmVkaXRvckRpdi5pbm5lclRleHQudHJpbSgpID09PSBcIlwiO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLmlzRWRpdGluZyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgdGhpcy5wYXJlbnQuc2V0RWRpdGluZ1N0YXRlKHRydWUpO1xuICAgICAgdGhpcy5wYXJlbnQuZGl2LmNsYXNzTGlzdC5hZGQoXCJmcmVldGV4dEVkaXRpbmdcIik7XG4gICAgfVxuICAgIHN1cGVyLnJlbW92ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgdGhlIHRleHQgZnJvbSB0aGlzIGVkaXRvci5cbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gICNleHRyYWN0VGV4dCgpIHtcbiAgICAvLyBXZSBkb24ndCB1c2UgaW5uZXJUZXh0IGJlY2F1c2UgdGhlcmUgYXJlIHNvbWUgYnVncyB3aXRoIGxpbmUgYnJlYWtzLlxuICAgIGNvbnN0IGJ1ZmZlciA9IFtdO1xuICAgIHRoaXMuZWRpdG9yRGl2Lm5vcm1hbGl6ZSgpO1xuICAgIGxldCBwcmV2Q2hpbGQgPSBudWxsO1xuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5lZGl0b3JEaXYuY2hpbGROb2Rlcykge1xuICAgICAgaWYgKHByZXZDaGlsZD8ubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIGNoaWxkLm5vZGVOYW1lID09PSBcIkJSXCIpIHtcbiAgICAgICAgLy8gSXQgY2FuIGhhcHBlbiBpZiB0aGUgdXNlciB1c2VzIHNoaWZ0K2VudGVyIHRvIGFkZCBhIG5ldyBsaW5lLlxuICAgICAgICAvLyBJZiB3ZSBkb24ndCBza2lwIGl0LCB3ZSdsbCBlbmQgdXAgd2l0aCBhbiBleHRyYSBsaW5lIChvbmUgZm9yIHRoZVxuICAgICAgICAvLyB0ZXh0IGFuZCBvbmUgZm9yIHRoZSBiciBlbGVtZW50KS5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBidWZmZXIucHVzaChGcmVlVGV4dEVkaXRvci4jZ2V0Tm9kZUNvbnRlbnQoY2hpbGQpKTtcbiAgICAgIHByZXZDaGlsZCA9IGNoaWxkO1xuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICAjc2V0RWRpdG9yRGltZW5zaW9ucygpIHtcbiAgICBjb25zdCBbcGFyZW50V2lkdGgsIHBhcmVudEhlaWdodF0gPSB0aGlzLnBhcmVudERpbWVuc2lvbnM7XG5cbiAgICBsZXQgcmVjdDtcbiAgICBpZiAodGhpcy5pc0F0dGFjaGVkVG9ET00pIHtcbiAgICAgIHJlY3QgPSB0aGlzLmRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhpcyBlZGl0b3IgaXNuJ3Qgb24gc2NyZWVuIGJ1dCB3ZSBuZWVkIHRvIGdldCBpdHMgZGltZW5zaW9ucywgc29cbiAgICAgIC8vIHdlIGp1c3QgaW5zZXJ0IGl0IGluIHRoZSBET00sIGdldCBpdHMgYm91bmRpbmcgYm94IGFuZCB0aGVuIHJlbW92ZSBpdC5cbiAgICAgIGNvbnN0IHsgY3VycmVudExheWVyLCBkaXYgfSA9IHRoaXM7XG4gICAgICBjb25zdCBzYXZlZERpc3BsYXkgPSBkaXYuc3R5bGUuZGlzcGxheTtcbiAgICAgIGNvbnN0IHNhdmVkVmlzaWJpbGl0eSA9IGRpdi5jbGFzc0xpc3QuY29udGFpbnMoXCJoaWRkZW5cIik7XG4gICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gXCJoaWRkZW5cIjtcbiAgICAgIGN1cnJlbnRMYXllci5kaXYuYXBwZW5kKHRoaXMuZGl2KTtcbiAgICAgIHJlY3QgPSBkaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBkaXYucmVtb3ZlKCk7XG4gICAgICBkaXYuc3R5bGUuZGlzcGxheSA9IHNhdmVkRGlzcGxheTtcbiAgICAgIGRpdi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIsIHNhdmVkVmlzaWJpbGl0eSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIGRpbWVuc2lvbnMgYXJlIHJlbGF0aXZlIHRvIHRoZSByb3RhdGlvbiBvZiB0aGUgcGFnZSwgaGVuY2Ugd2UgbmVlZCB0b1xuICAgIC8vIHRha2UgdGhhdCBpbnRvIGFjY291bnQgKHNlZSBpc3N1ZSAjMTY2MzYpLlxuICAgIGlmICh0aGlzLnJvdGF0aW9uICUgMTgwID09PSB0aGlzLnBhcmVudFJvdGF0aW9uICUgMTgwKSB7XG4gICAgICB0aGlzLndpZHRoID0gcmVjdC53aWR0aCAvIHBhcmVudFdpZHRoO1xuICAgICAgdGhpcy5oZWlnaHQgPSByZWN0LmhlaWdodCAvIHBhcmVudEhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53aWR0aCA9IHJlY3QuaGVpZ2h0IC8gcGFyZW50V2lkdGg7XG4gICAgICB0aGlzLmhlaWdodCA9IHJlY3Qud2lkdGggLyBwYXJlbnRIZWlnaHQ7XG4gICAgfVxuICAgIHRoaXMuZml4QW5kU2V0UG9zaXRpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21taXQgdGhlIGNvbnRlbnQgd2UgaGF2ZSBpbiB0aGlzIGVkaXRvci5cbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIGNvbW1pdCgpIHtcbiAgICBpZiAoIXRoaXMuaXNJbkVkaXRNb2RlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdXBlci5jb21taXQoKTtcbiAgICB0aGlzLmRpc2FibGVFZGl0TW9kZSgpO1xuICAgIGNvbnN0IHNhdmVkVGV4dCA9IHRoaXMuI2NvbnRlbnQ7XG4gICAgY29uc3QgbmV3VGV4dCA9ICh0aGlzLiNjb250ZW50ID0gdGhpcy4jZXh0cmFjdFRleHQoKS50cmltRW5kKCkpO1xuICAgIGlmIChzYXZlZFRleHQgPT09IG5ld1RleHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZXRUZXh0ID0gdGV4dCA9PiB7XG4gICAgICB0aGlzLiNjb250ZW50ID0gdGV4dDtcbiAgICAgIGlmICghdGV4dCkge1xuICAgICAgICB0aGlzLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLiNzZXRDb250ZW50KCk7XG4gICAgICB0aGlzLl91aU1hbmFnZXIucmVidWlsZCh0aGlzKTtcbiAgICAgIHRoaXMuI3NldEVkaXRvckRpbWVuc2lvbnMoKTtcbiAgICB9O1xuICAgIHRoaXMuYWRkQ29tbWFuZHMoe1xuICAgICAgY21kOiAoKSA9PiB7XG4gICAgICAgIHNldFRleHQobmV3VGV4dCk7XG4gICAgICB9LFxuICAgICAgdW5kbzogKCkgPT4ge1xuICAgICAgICBzZXRUZXh0KHNhdmVkVGV4dCk7XG4gICAgICB9LFxuICAgICAgbXVzdEV4ZWM6IGZhbHNlLFxuICAgIH0pO1xuICAgIHRoaXMuI3NldEVkaXRvckRpbWVuc2lvbnMoKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzaG91bGRHZXRLZXlib2FyZEV2ZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5pc0luRWRpdE1vZGUoKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBlbnRlckluRWRpdE1vZGUoKSB7XG4gICAgdGhpcy5lbmFibGVFZGl0TW9kZSgpO1xuICAgIHRoaXMuZWRpdG9yRGl2LmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICogb25kYmxjbGljayBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudFxuICAgKi9cbiAgZGJsY2xpY2soZXZlbnQpIHtcbiAgICB0aGlzLmVudGVySW5FZGl0TW9kZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIG9ua2V5ZG93biBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudFxuICAgKi9cbiAga2V5ZG93bihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMuZGl2ICYmIGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICB0aGlzLmVudGVySW5FZGl0TW9kZSgpO1xuICAgICAgLy8gQXZvaWQgdG8gYWRkIGFuIHVud2FudGVkIG5ldyBsaW5lLlxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICBlZGl0b3JEaXZLZXlkb3duKGV2ZW50KSB7XG4gICAgRnJlZVRleHRFZGl0b3IuX2tleWJvYXJkTWFuYWdlci5leGVjKHRoaXMsIGV2ZW50KTtcbiAgfVxuXG4gIGVkaXRvckRpdkZvY3VzKGV2ZW50KSB7XG4gICAgdGhpcy5pc0VkaXRpbmcgPSB0cnVlO1xuICB9XG5cbiAgZWRpdG9yRGl2Qmx1cihldmVudCkge1xuICAgIHRoaXMuaXNFZGl0aW5nID0gZmFsc2U7XG4gIH1cblxuICBlZGl0b3JEaXZJbnB1dChldmVudCkge1xuICAgIHRoaXMucGFyZW50LmRpdi5jbGFzc0xpc3QudG9nZ2xlKFwiZnJlZXRleHRFZGl0aW5nXCIsIHRoaXMuaXNFbXB0eSgpKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBkaXNhYmxlRWRpdGluZygpIHtcbiAgICB0aGlzLmVkaXRvckRpdi5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiY29tbWVudFwiKTtcbiAgICB0aGlzLmVkaXRvckRpdi5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLW11bHRpbGluZVwiKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBlbmFibGVFZGl0aW5nKCkge1xuICAgIHRoaXMuZWRpdG9yRGl2LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJ0ZXh0Ym94XCIpO1xuICAgIHRoaXMuZWRpdG9yRGl2LnNldEF0dHJpYnV0ZShcImFyaWEtbXVsdGlsaW5lXCIsIHRydWUpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5kaXYpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpdjtcbiAgICB9XG5cbiAgICBsZXQgYmFzZVgsIGJhc2VZO1xuICAgIGlmICh0aGlzLl9pc0NvcHkgfHwgdGhpcy5hbm5vdGF0aW9uRWxlbWVudElkKSB7XG4gICAgICBiYXNlWCA9IHRoaXMueDtcbiAgICAgIGJhc2VZID0gdGhpcy55O1xuICAgIH1cblxuICAgIHN1cGVyLnJlbmRlcigpO1xuICAgIHRoaXMuZWRpdG9yRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLmVkaXRvckRpdi5jbGFzc05hbWUgPSBcImludGVybmFsXCI7XG5cbiAgICB0aGlzLmVkaXRvckRpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCB0aGlzLiNlZGl0b3JEaXZJZCk7XG4gICAgdGhpcy5lZGl0b3JEaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1sMTBuLWlkXCIsIFwicGRmanMtZnJlZS10ZXh0MlwiKTtcbiAgICB0aGlzLmVkaXRvckRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWwxMG4tYXR0cnNcIiwgXCJkZWZhdWx0LWNvbnRlbnRcIik7XG4gICAgdGhpcy5lbmFibGVFZGl0aW5nKCk7XG5cbiAgICB0aGlzLmVkaXRvckRpdi5jb250ZW50RWRpdGFibGUgPSB0cnVlO1xuXG4gICAgY29uc3QgeyBzdHlsZSB9ID0gdGhpcy5lZGl0b3JEaXY7XG4gICAgc3R5bGUuZm9udFNpemUgPSBgY2FsYygke3RoaXMuI2ZvbnRTaXplfXB4ICogdmFyKC0tdG90YWwtc2NhbGUtZmFjdG9yKSlgO1xuICAgIHN0eWxlLmNvbG9yID0gdGhpcy4jY29sb3I7XG5cbiAgICB0aGlzLmRpdi5hcHBlbmQodGhpcy5lZGl0b3JEaXYpO1xuXG4gICAgdGhpcy5vdmVybGF5RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLm92ZXJsYXlEaXYuY2xhc3NMaXN0LmFkZChcIm92ZXJsYXlcIiwgXCJlbmFibGVkXCIpO1xuICAgIHRoaXMuZGl2LmFwcGVuZCh0aGlzLm92ZXJsYXlEaXYpO1xuXG4gICAgYmluZEV2ZW50cyh0aGlzLCB0aGlzLmRpdiwgW1wiZGJsY2xpY2tcIiwgXCJrZXlkb3duXCJdKTtcblxuICAgIGlmICh0aGlzLl9pc0NvcHkgfHwgdGhpcy5hbm5vdGF0aW9uRWxlbWVudElkKSB7XG4gICAgICAvLyBUaGlzIGVkaXRvciB3YXMgY3JlYXRlZCBpbiB1c2luZyBjb3B5IChjdHJsK2MpLlxuICAgICAgY29uc3QgW3BhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHRdID0gdGhpcy5wYXJlbnREaW1lbnNpb25zO1xuICAgICAgaWYgKHRoaXMuYW5ub3RhdGlvbkVsZW1lbnRJZCkge1xuICAgICAgICAvLyBUaGlzIHN0dWZmIGlzIGhhcmQgdG8gdGVzdDogaWYgc29tZXRoaW5nIGlzIGNoYW5nZWQgaGVyZSwgcGxlYXNlXG4gICAgICAgIC8vIHRlc3Qgd2l0aCB0aGUgZm9sbG93aW5nIFBERiBmaWxlOlxuICAgICAgICAvLyAgLSBmcmVldGV4dHMucGRmXG4gICAgICAgIC8vICAtIHJvdGF0ZWRfZnJlZXRleHRzLnBkZlxuICAgICAgICAvLyBPbmx5IHNtYWxsIHZhcmlhdGlvbnMgYmV0d2VlbiB0aGUgb3JpZ2luYWwgYW5ub3RhdGlvbiBhbmQgaXRzIGVkaXRvclxuICAgICAgICAvLyBhcmUgYWxsb3dlZC5cblxuICAgICAgICAvLyBwb3NpdGlvbiBpcyB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IGdseXBoIGluIHRoZSBhbm5vdGF0aW9uXG4gICAgICAgIC8vIGFuZCBpdCdzIHJlbGF0aXZlIHRvIGl0cyBjb250YWluZXIuXG4gICAgICAgIGNvbnN0IHsgcG9zaXRpb24gfSA9IHRoaXMuX2luaXRpYWxEYXRhO1xuICAgICAgICBsZXQgW3R4LCB0eV0gPSB0aGlzLmdldEluaXRpYWxUcmFuc2xhdGlvbigpO1xuICAgICAgICBbdHgsIHR5XSA9IHRoaXMucGFnZVRyYW5zbGF0aW9uVG9TY3JlZW4odHgsIHR5KTtcbiAgICAgICAgY29uc3QgW3BhZ2VXaWR0aCwgcGFnZUhlaWdodF0gPSB0aGlzLnBhZ2VEaW1lbnNpb25zO1xuICAgICAgICBjb25zdCBbcGFnZVgsIHBhZ2VZXSA9IHRoaXMucGFnZVRyYW5zbGF0aW9uO1xuICAgICAgICBsZXQgcG9zWCwgcG9zWTtcbiAgICAgICAgc3dpdGNoICh0aGlzLnJvdGF0aW9uKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcG9zWCA9IGJhc2VYICsgKHBvc2l0aW9uWzBdIC0gcGFnZVgpIC8gcGFnZVdpZHRoO1xuICAgICAgICAgICAgcG9zWSA9IGJhc2VZICsgdGhpcy5oZWlnaHQgLSAocG9zaXRpb25bMV0gLSBwYWdlWSkgLyBwYWdlSGVpZ2h0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA5MDpcbiAgICAgICAgICAgIHBvc1ggPSBiYXNlWCArIChwb3NpdGlvblswXSAtIHBhZ2VYKSAvIHBhZ2VXaWR0aDtcbiAgICAgICAgICAgIHBvc1kgPSBiYXNlWSAtIChwb3NpdGlvblsxXSAtIHBhZ2VZKSAvIHBhZ2VIZWlnaHQ7XG4gICAgICAgICAgICBbdHgsIHR5XSA9IFt0eSwgLXR4XTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMTgwOlxuICAgICAgICAgICAgcG9zWCA9IGJhc2VYIC0gdGhpcy53aWR0aCArIChwb3NpdGlvblswXSAtIHBhZ2VYKSAvIHBhZ2VXaWR0aDtcbiAgICAgICAgICAgIHBvc1kgPSBiYXNlWSAtIChwb3NpdGlvblsxXSAtIHBhZ2VZKSAvIHBhZ2VIZWlnaHQ7XG4gICAgICAgICAgICBbdHgsIHR5XSA9IFstdHgsIC10eV07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDI3MDpcbiAgICAgICAgICAgIHBvc1ggPVxuICAgICAgICAgICAgICBiYXNlWCArXG4gICAgICAgICAgICAgIChwb3NpdGlvblswXSAtIHBhZ2VYIC0gdGhpcy5oZWlnaHQgKiBwYWdlSGVpZ2h0KSAvIHBhZ2VXaWR0aDtcbiAgICAgICAgICAgIHBvc1kgPVxuICAgICAgICAgICAgICBiYXNlWSArXG4gICAgICAgICAgICAgIChwb3NpdGlvblsxXSAtIHBhZ2VZIC0gdGhpcy53aWR0aCAqIHBhZ2VXaWR0aCkgLyBwYWdlSGVpZ2h0O1xuICAgICAgICAgICAgW3R4LCB0eV0gPSBbLXR5LCB0eF07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldEF0KHBvc1ggKiBwYXJlbnRXaWR0aCwgcG9zWSAqIHBhcmVudEhlaWdodCwgdHgsIHR5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX21vdmVBZnRlclBhc3RlKGJhc2VYLCBiYXNlWSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuI3NldENvbnRlbnQoKTtcbiAgICAgIHRoaXMuX2lzRHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMuZWRpdG9yRGl2LmNvbnRlbnRFZGl0YWJsZSA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pc0RyYWdnYWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5lZGl0b3JEaXYuY29udGVudEVkaXRhYmxlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgICB0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoXCJhbm5vdGF0aW9uLWlkXCIsIHRoaXMuYW5ub3RhdGlvbkVsZW1lbnRJZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGl2O1xuICB9XG5cbiAgc3RhdGljICNnZXROb2RlQ29udGVudChub2RlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFID8gbm9kZS5ub2RlVmFsdWUgOiBub2RlLmlubmVyVGV4dFxuICAgICkucmVwbGFjZUFsbChFT0xfUEFUVEVSTiwgXCJcIik7XG4gIH1cblxuICBlZGl0b3JEaXZQYXN0ZShldmVudCkge1xuICAgIGNvbnN0IGNsaXBib2FyZERhdGEgPSBldmVudC5jbGlwYm9hcmREYXRhIHx8IHdpbmRvdy5jbGlwYm9hcmREYXRhO1xuICAgIGNvbnN0IHsgdHlwZXMgfSA9IGNsaXBib2FyZERhdGE7XG4gICAgaWYgKHR5cGVzLmxlbmd0aCA9PT0gMSAmJiB0eXBlc1swXSA9PT0gXCJ0ZXh0L3BsYWluXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHBhc3RlID0gRnJlZVRleHRFZGl0b3IuI2Rlc2VyaWFsaXplQ29udGVudChcbiAgICAgIGNsaXBib2FyZERhdGEuZ2V0RGF0YShcInRleHRcIikgfHwgXCJcIlxuICAgICkucmVwbGFjZUFsbChFT0xfUEFUVEVSTiwgXCJcXG5cIik7XG4gICAgaWYgKCFwYXN0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKCFzZWxlY3Rpb24ucmFuZ2VDb3VudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVkaXRvckRpdi5ub3JtYWxpemUoKTtcbiAgICBzZWxlY3Rpb24uZGVsZXRlRnJvbURvY3VtZW50KCk7XG4gICAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTtcbiAgICBpZiAoIXBhc3RlLmluY2x1ZGVzKFwiXFxuXCIpKSB7XG4gICAgICByYW5nZS5pbnNlcnROb2RlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBhc3RlKSk7XG4gICAgICB0aGlzLmVkaXRvckRpdi5ub3JtYWxpemUoKTtcbiAgICAgIHNlbGVjdGlvbi5jb2xsYXBzZVRvU3RhcnQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDb2xsZWN0IHRoZSB0ZXh0IGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGNhcmV0LlxuICAgIGNvbnN0IHsgc3RhcnRDb250YWluZXIsIHN0YXJ0T2Zmc2V0IH0gPSByYW5nZTtcbiAgICBjb25zdCBidWZmZXJCZWZvcmUgPSBbXTtcbiAgICBjb25zdCBidWZmZXJBZnRlciA9IFtdO1xuICAgIGlmIChzdGFydENvbnRhaW5lci5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHN0YXJ0Q29udGFpbmVyLnBhcmVudEVsZW1lbnQ7XG4gICAgICBidWZmZXJBZnRlci5wdXNoKFxuICAgICAgICBzdGFydENvbnRhaW5lci5ub2RlVmFsdWUuc2xpY2Uoc3RhcnRPZmZzZXQpLnJlcGxhY2VBbGwoRU9MX1BBVFRFUk4sIFwiXCIpXG4gICAgICApO1xuICAgICAgaWYgKHBhcmVudCAhPT0gdGhpcy5lZGl0b3JEaXYpIHtcbiAgICAgICAgbGV0IGJ1ZmZlciA9IGJ1ZmZlckJlZm9yZTtcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLmVkaXRvckRpdi5jaGlsZE5vZGVzKSB7XG4gICAgICAgICAgaWYgKGNoaWxkID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlckFmdGVyO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJ1ZmZlci5wdXNoKEZyZWVUZXh0RWRpdG9yLiNnZXROb2RlQ29udGVudChjaGlsZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBidWZmZXJCZWZvcmUucHVzaChcbiAgICAgICAgc3RhcnRDb250YWluZXIubm9kZVZhbHVlXG4gICAgICAgICAgLnNsaWNlKDAsIHN0YXJ0T2Zmc2V0KVxuICAgICAgICAgIC5yZXBsYWNlQWxsKEVPTF9QQVRURVJOLCBcIlwiKVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHN0YXJ0Q29udGFpbmVyID09PSB0aGlzLmVkaXRvckRpdikge1xuICAgICAgbGV0IGJ1ZmZlciA9IGJ1ZmZlckJlZm9yZTtcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5lZGl0b3JEaXYuY2hpbGROb2Rlcykge1xuICAgICAgICBpZiAoaSsrID09PSBzdGFydE9mZnNldCkge1xuICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlckFmdGVyO1xuICAgICAgICB9XG4gICAgICAgIGJ1ZmZlci5wdXNoKEZyZWVUZXh0RWRpdG9yLiNnZXROb2RlQ29udGVudChjaGlsZCkpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLiNjb250ZW50ID0gYCR7YnVmZmVyQmVmb3JlLmpvaW4oXCJcXG5cIil9JHtwYXN0ZX0ke2J1ZmZlckFmdGVyLmpvaW4oXCJcXG5cIil9YDtcbiAgICB0aGlzLiNzZXRDb250ZW50KCk7XG5cbiAgICAvLyBTZXQgdGhlIGNhcmV0IGF0IHRoZSByaWdodCBwb3NpdGlvbi5cbiAgICBjb25zdCBuZXdSYW5nZSA9IG5ldyBSYW5nZSgpO1xuICAgIGxldCBiZWZvcmVMZW5ndGggPSBNYXRoLnN1bVByZWNpc2UoYnVmZmVyQmVmb3JlLm1hcChsaW5lID0+IGxpbmUubGVuZ3RoKSk7XG4gICAgZm9yIChjb25zdCB7IGZpcnN0Q2hpbGQgfSBvZiB0aGlzLmVkaXRvckRpdi5jaGlsZE5vZGVzKSB7XG4gICAgICAvLyBFYWNoIGNoaWxkIGlzIGVpdGhlciBhIGRpdiB3aXRoIGEgdGV4dCBub2RlIG9yIGEgYnIgZWxlbWVudC5cbiAgICAgIGlmIChmaXJzdENoaWxkLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICBjb25zdCBsZW5ndGggPSBmaXJzdENoaWxkLm5vZGVWYWx1ZS5sZW5ndGg7XG4gICAgICAgIGlmIChiZWZvcmVMZW5ndGggPD0gbGVuZ3RoKSB7XG4gICAgICAgICAgbmV3UmFuZ2Uuc2V0U3RhcnQoZmlyc3RDaGlsZCwgYmVmb3JlTGVuZ3RoKTtcbiAgICAgICAgICBuZXdSYW5nZS5zZXRFbmQoZmlyc3RDaGlsZCwgYmVmb3JlTGVuZ3RoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBiZWZvcmVMZW5ndGggLT0gbGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgc2VsZWN0aW9uLmFkZFJhbmdlKG5ld1JhbmdlKTtcbiAgfVxuXG4gICNzZXRDb250ZW50KCkge1xuICAgIHRoaXMuZWRpdG9yRGl2LnJlcGxhY2VDaGlsZHJlbigpO1xuICAgIGlmICghdGhpcy4jY29udGVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGhpcy4jY29udGVudC5zcGxpdChcIlxcblwiKSkge1xuICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGRpdi5hcHBlbmQoXG4gICAgICAgIGxpbmUgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaW5lKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKVxuICAgICAgKTtcbiAgICAgIHRoaXMuZWRpdG9yRGl2LmFwcGVuZChkaXYpO1xuICAgIH1cbiAgfVxuXG4gICNzZXJpYWxpemVDb250ZW50KCkge1xuICAgIHJldHVybiB0aGlzLiNjb250ZW50LnJlcGxhY2VBbGwoXCJcXHhhMFwiLCBcIiBcIik7XG4gIH1cblxuICBzdGF0aWMgI2Rlc2VyaWFsaXplQ29udGVudChjb250ZW50KSB7XG4gICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZUFsbChcIiBcIiwgXCJcXHhhMFwiKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXQgY29udGVudERpdigpIHtcbiAgICByZXR1cm4gdGhpcy5lZGl0b3JEaXY7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3RhdGljIGFzeW5jIGRlc2VyaWFsaXplKGRhdGEsIHBhcmVudCwgdWlNYW5hZ2VyKSB7XG4gICAgbGV0IGluaXRpYWxEYXRhID0gbnVsbDtcbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEZyZWVUZXh0QW5ub3RhdGlvbkVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGRlZmF1bHRBcHBlYXJhbmNlRGF0YTogeyBmb250U2l6ZSwgZm9udENvbG9yIH0sXG4gICAgICAgICAgcmVjdCxcbiAgICAgICAgICByb3RhdGlvbixcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwb3B1cFJlZixcbiAgICAgICAgfSxcbiAgICAgICAgdGV4dENvbnRlbnQsXG4gICAgICAgIHRleHRQb3NpdGlvbixcbiAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgcGFnZTogeyBwYWdlTnVtYmVyIH0sXG4gICAgICAgIH0sXG4gICAgICB9ID0gZGF0YTtcbiAgICAgIC8vIHRleHRDb250ZW50IGlzIHN1cHBvc2VkIHRvIGJlIGFuIGFycmF5IG9mIHN0cmluZ3MgY29udGFpbmluZyBlYWNoIGxpbmVcbiAgICAgIC8vIG9mIHRleHQuIEhvd2V2ZXIsIGl0IGNhbiBiZSBudWxsIG9yIGVtcHR5LlxuICAgICAgaWYgKCF0ZXh0Q29udGVudCB8fCB0ZXh0Q29udGVudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gRW1wdHkgYW5ub3RhdGlvbi5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpbml0aWFsRGF0YSA9IGRhdGEgPSB7XG4gICAgICAgIGFubm90YXRpb25UeXBlOiBBbm5vdGF0aW9uRWRpdG9yVHlwZS5GUkVFVEVYVCxcbiAgICAgICAgY29sb3I6IEFycmF5LmZyb20oZm9udENvbG9yKSxcbiAgICAgICAgZm9udFNpemUsXG4gICAgICAgIHZhbHVlOiB0ZXh0Q29udGVudC5qb2luKFwiXFxuXCIpLFxuICAgICAgICBwb3NpdGlvbjogdGV4dFBvc2l0aW9uLFxuICAgICAgICBwYWdlSW5kZXg6IHBhZ2VOdW1iZXIgLSAxLFxuICAgICAgICByZWN0OiByZWN0LnNsaWNlKDApLFxuICAgICAgICByb3RhdGlvbixcbiAgICAgICAgaWQsXG4gICAgICAgIGRlbGV0ZWQ6IGZhbHNlLFxuICAgICAgICBwb3B1cFJlZixcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGVkaXRvciA9IGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKGRhdGEsIHBhcmVudCwgdWlNYW5hZ2VyKTtcbiAgICBlZGl0b3IuI2ZvbnRTaXplID0gZGF0YS5mb250U2l6ZTtcbiAgICBlZGl0b3IuI2NvbG9yID0gVXRpbC5tYWtlSGV4Q29sb3IoLi4uZGF0YS5jb2xvcik7XG4gICAgZWRpdG9yLiNjb250ZW50ID0gRnJlZVRleHRFZGl0b3IuI2Rlc2VyaWFsaXplQ29udGVudChkYXRhLnZhbHVlKTtcbiAgICBlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZCA9IGRhdGEuaWQgfHwgbnVsbDtcbiAgICBlZGl0b3IuX2luaXRpYWxEYXRhID0gaW5pdGlhbERhdGE7XG5cbiAgICByZXR1cm4gZWRpdG9yO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHNlcmlhbGl6ZShpc0ZvckNvcHlpbmcgPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGVsZXRlZCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplRGVsZXRlZCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHBhZGRpbmcgPSBGcmVlVGV4dEVkaXRvci5faW50ZXJuYWxQYWRkaW5nICogdGhpcy5wYXJlbnRTY2FsZTtcbiAgICBjb25zdCByZWN0ID0gdGhpcy5nZXRSZWN0KHBhZGRpbmcsIHBhZGRpbmcpO1xuICAgIGNvbnN0IGNvbG9yID0gQW5ub3RhdGlvbkVkaXRvci5fY29sb3JNYW5hZ2VyLmNvbnZlcnQoXG4gICAgICB0aGlzLmlzQXR0YWNoZWRUb0RPTVxuICAgICAgICA/IGdldENvbXB1dGVkU3R5bGUodGhpcy5lZGl0b3JEaXYpLmNvbG9yXG4gICAgICAgIDogdGhpcy4jY29sb3JcbiAgICApO1xuXG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IHtcbiAgICAgIGFubm90YXRpb25UeXBlOiBBbm5vdGF0aW9uRWRpdG9yVHlwZS5GUkVFVEVYVCxcbiAgICAgIGNvbG9yLFxuICAgICAgZm9udFNpemU6IHRoaXMuI2ZvbnRTaXplLFxuICAgICAgdmFsdWU6IHRoaXMuI3NlcmlhbGl6ZUNvbnRlbnQoKSxcbiAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsXG4gICAgICByZWN0LFxuICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXG4gICAgICBzdHJ1Y3RUcmVlUGFyZW50SWQ6IHRoaXMuX3N0cnVjdFRyZWVQYXJlbnRJZCxcbiAgICB9O1xuXG4gICAgaWYgKGlzRm9yQ29weWluZykge1xuICAgICAgLy8gRG9uJ3QgYWRkIHRoZSBpZCB3aGVuIGNvcHlpbmcgYmVjYXVzZSB0aGUgcGFzdGVkIGVkaXRvciBtdXN0bid0IGJlXG4gICAgICAvLyBsaW5rZWQgdG8gYW4gZXhpc3RpbmcgYW5ub3RhdGlvbi5cbiAgICAgIHNlcmlhbGl6ZWQuaXNDb3B5ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBzZXJpYWxpemVkO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFubm90YXRpb25FbGVtZW50SWQgJiYgIXRoaXMuI2hhc0VsZW1lbnRDaGFuZ2VkKHNlcmlhbGl6ZWQpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzZXJpYWxpemVkLmlkID0gdGhpcy5hbm5vdGF0aW9uRWxlbWVudElkO1xuXG4gICAgcmV0dXJuIHNlcmlhbGl6ZWQ7XG4gIH1cblxuICAjaGFzRWxlbWVudENoYW5nZWQoc2VyaWFsaXplZCkge1xuICAgIGNvbnN0IHsgdmFsdWUsIGZvbnRTaXplLCBjb2xvciwgcGFnZUluZGV4IH0gPSB0aGlzLl9pbml0aWFsRGF0YTtcblxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl9oYXNCZWVuTW92ZWQgfHxcbiAgICAgIHNlcmlhbGl6ZWQudmFsdWUgIT09IHZhbHVlIHx8XG4gICAgICBzZXJpYWxpemVkLmZvbnRTaXplICE9PSBmb250U2l6ZSB8fFxuICAgICAgc2VyaWFsaXplZC5jb2xvci5zb21lKChjLCBpKSA9PiBjICE9PSBjb2xvcltpXSkgfHxcbiAgICAgIHNlcmlhbGl6ZWQucGFnZUluZGV4ICE9PSBwYWdlSW5kZXhcbiAgICApO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlbmRlckFubm90YXRpb25FbGVtZW50KGFubm90YXRpb24pIHtcbiAgICBjb25zdCBjb250ZW50ID0gc3VwZXIucmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQoYW5ub3RhdGlvbik7XG4gICAgaWYgKHRoaXMuZGVsZXRlZCkge1xuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuICAgIGNvbnN0IHsgc3R5bGUgfSA9IGNvbnRlbnQ7XG4gICAgc3R5bGUuZm9udFNpemUgPSBgY2FsYygke3RoaXMuI2ZvbnRTaXplfXB4ICogdmFyKC0tdG90YWwtc2NhbGUtZmFjdG9yKSlgO1xuICAgIHN0eWxlLmNvbG9yID0gdGhpcy4jY29sb3I7XG5cbiAgICBjb250ZW50LnJlcGxhY2VDaGlsZHJlbigpO1xuICAgIGZvciAoY29uc3QgbGluZSBvZiB0aGlzLiNjb250ZW50LnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZGl2LmFwcGVuZChcbiAgICAgICAgbGluZSA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxpbmUpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpXG4gICAgICApO1xuICAgICAgY29udGVudC5hcHBlbmQoZGl2KTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWRkaW5nID0gRnJlZVRleHRFZGl0b3IuX2ludGVybmFsUGFkZGluZyAqIHRoaXMucGFyZW50U2NhbGU7XG4gICAgYW5ub3RhdGlvbi51cGRhdGVFZGl0ZWQoe1xuICAgICAgcmVjdDogdGhpcy5nZXRSZWN0KHBhZGRpbmcsIHBhZGRpbmcpLFxuICAgICAgcG9wdXBDb250ZW50OiB0aGlzLiNjb250ZW50LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICByZXNldEFubm90YXRpb25FbGVtZW50KGFubm90YXRpb24pIHtcbiAgICBzdXBlci5yZXNldEFubm90YXRpb25FbGVtZW50KGFubm90YXRpb24pO1xuICAgIGFubm90YXRpb24ucmVzZXRFZGl0ZWQoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBGcmVlVGV4dEVkaXRvciB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIzIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyB1bnJlYWNoYWJsZSB9IGZyb20gXCIuLi8uLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG5jbGFzcyBPdXRsaW5lIHtcbiAgc3RhdGljIFBSRUNJU0lPTiA9IDFlLTQ7XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBTVkcgcGF0aCBvZiB0aGUgb3V0bGluZS5cbiAgICovXG4gIHRvU1ZHUGF0aCgpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgdG9TVkdQYXRoYCBtdXN0IGJlIGltcGxlbWVudGVkLlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7T2JqZWN0fG51bGx9IFRoZSBib3VuZGluZyBib3ggb2YgdGhlIG91dGxpbmUuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2V0dGVyLXJldHVyblxuICBnZXQgYm94KCkge1xuICAgIHVucmVhY2hhYmxlKFwiQWJzdHJhY3QgZ2V0dGVyIGBib3hgIG11c3QgYmUgaW1wbGVtZW50ZWQuXCIpO1xuICB9XG5cbiAgc2VyaWFsaXplKF9iYm94LCBfcm90YXRpb24pIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgc2VyaWFsaXplYCBtdXN0IGJlIGltcGxlbWVudGVkLlwiKTtcbiAgfVxuXG4gIHN0YXRpYyBfcmVzY2FsZShzcmMsIHR4LCB0eSwgc3gsIHN5LCBkZXN0KSB7XG4gICAgZGVzdCB8fD0gbmV3IEZsb2F0MzJBcnJheShzcmMubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzcmMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgZGVzdFtpXSA9IHR4ICsgc3JjW2ldICogc3g7XG4gICAgICBkZXN0W2kgKyAxXSA9IHR5ICsgc3JjW2kgKyAxXSAqIHN5O1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuXG4gIHN0YXRpYyBfcmVzY2FsZUFuZFN3YXAoc3JjLCB0eCwgdHksIHN4LCBzeSwgZGVzdCkge1xuICAgIGRlc3QgfHw9IG5ldyBGbG9hdDMyQXJyYXkoc3JjLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc3JjLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcbiAgICAgIGRlc3RbaV0gPSB0eCArIHNyY1tpICsgMV0gKiBzeDtcbiAgICAgIGRlc3RbaSArIDFdID0gdHkgKyBzcmNbaV0gKiBzeTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG4gIH1cblxuICBzdGF0aWMgX3RyYW5zbGF0ZShzcmMsIHR4LCB0eSwgZGVzdCkge1xuICAgIGRlc3QgfHw9IG5ldyBGbG9hdDMyQXJyYXkoc3JjLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc3JjLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcbiAgICAgIGRlc3RbaV0gPSB0eCArIHNyY1tpXTtcbiAgICAgIGRlc3RbaSArIDFdID0gdHkgKyBzcmNbaSArIDFdO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuXG4gIHN0YXRpYyBzdmdSb3VuZCh4KSB7XG4gICAgLy8gMC4xMjM0IHdpbGwgYmUgMTIzNCBhbmQgdGhpcyB3YXkgd2UgZWNvbm9taXplIDIgYnl0ZXMgcGVyIG51bWJlci5cbiAgICAvLyBPZiBjb3Vyc2UsIGl0IG1ha2VzIHNlbnNlIG9ubHkgd2hlbiB0aGUgdmlld0JveCBpcyBbMCAwIDEwMDAwIDEwMDAwXS5cbiAgICAvLyBBbmQgaXQgaGVscHMgdG8gYXZvaWQgYnVncyBsaWtlOlxuICAgIC8vICBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTI5MzQwXG4gICAgcmV0dXJuIE1hdGgucm91bmQoeCAqIDEwMDAwKTtcbiAgfVxuXG4gIHN0YXRpYyBfbm9ybWFsaXplUG9pbnQoeCwgeSwgcGFyZW50V2lkdGgsIHBhcmVudEhlaWdodCwgcm90YXRpb24pIHtcbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICBjYXNlIDkwOlxuICAgICAgICByZXR1cm4gWzEgLSB5IC8gcGFyZW50V2lkdGgsIHggLyBwYXJlbnRIZWlnaHRdO1xuICAgICAgY2FzZSAxODA6XG4gICAgICAgIHJldHVybiBbMSAtIHggLyBwYXJlbnRXaWR0aCwgMSAtIHkgLyBwYXJlbnRIZWlnaHRdO1xuICAgICAgY2FzZSAyNzA6XG4gICAgICAgIHJldHVybiBbeSAvIHBhcmVudFdpZHRoLCAxIC0geCAvIHBhcmVudEhlaWdodF07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gW3ggLyBwYXJlbnRXaWR0aCwgeSAvIHBhcmVudEhlaWdodF07XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9ub3JtYWxpemVQYWdlUG9pbnQoeCwgeSwgcm90YXRpb24pIHtcbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICBjYXNlIDkwOlxuICAgICAgICByZXR1cm4gWzEgLSB5LCB4XTtcbiAgICAgIGNhc2UgMTgwOlxuICAgICAgICByZXR1cm4gWzEgLSB4LCAxIC0geV07XG4gICAgICBjYXNlIDI3MDpcbiAgICAgICAgcmV0dXJuIFt5LCAxIC0geF07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gW3gsIHldO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVCZXppZXJQb2ludHMoeDEsIHkxLCB4MiwgeTIsIHgzLCB5Mykge1xuICAgIHJldHVybiBbXG4gICAgICAoeDEgKyA1ICogeDIpIC8gNixcbiAgICAgICh5MSArIDUgKiB5MikgLyA2LFxuICAgICAgKDUgKiB4MiArIHgzKSAvIDYsXG4gICAgICAoNSAqIHkyICsgeTMpIC8gNixcbiAgICAgICh4MiArIHgzKSAvIDIsXG4gICAgICAoeTIgKyB5MykgLyAyLFxuICAgIF07XG4gIH1cbn1cblxuZXhwb3J0IHsgT3V0bGluZSB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDI0IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBPdXRsaW5lIH0gZnJvbSBcIi4vb3V0bGluZS5qc1wiO1xuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi8uLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG5jbGFzcyBGcmVlRHJhd091dGxpbmVyIHtcbiAgI2JveDtcblxuICAjYm90dG9tID0gW107XG5cbiAgI2lubmVyTWFyZ2luO1xuXG4gICNpc0xUUjtcblxuICAjdG9wID0gW107XG5cbiAgLy8gVGhlIGZpcnN0IDYgZWxlbWVudHMgYXJlIHRoZSBsYXN0IDMgcG9pbnRzIG9mIHRoZSB0b3AgcGFydCBvZiB0aGUgb3V0bGluZS5cbiAgLy8gVGhlIG5leHQgNiBlbGVtZW50cyBhcmUgdGhlIGxhc3QgMyBwb2ludHMgb2YgdGhlIGxpbmUuXG4gIC8vIFRoZSBuZXh0IDYgZWxlbWVudHMgYXJlIHRoZSBsYXN0IDMgcG9pbnRzIG9mIHRoZSBib3R0b20gcGFydCBvZiB0aGVcbiAgLy8gb3V0bGluZS5cbiAgLy8gV2UgdHJhY2sgdGhlIGxhc3QgMyBwb2ludHMgaW4gb3JkZXIgdG8gYmUgYWJsZSB0bzpcbiAgLy8gIC0gY29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRoZSBsaW5lLFxuICAvLyAgLSBjb21wdXRlIHRoZSBjb250cm9sIHBvaW50cyBvZiB0aGUgcXVhZHJhdGljIELDqXppZXIgY3VydmUuXG4gICNsYXN0ID0gbmV3IEZsb2F0MzJBcnJheSgxOCk7XG5cbiAgI2xhc3RYO1xuXG4gICNsYXN0WTtcblxuICAjbWluO1xuXG4gICNtaW5fZGlzdDtcblxuICAjc2NhbGVGYWN0b3I7XG5cbiAgI3RoaWNrbmVzcztcblxuICAjcG9pbnRzID0gW107XG5cbiAgc3RhdGljICNNSU5fRElTVCA9IDg7XG5cbiAgc3RhdGljICNNSU5fRElGRiA9IDI7XG5cbiAgc3RhdGljICNNSU4gPSBGcmVlRHJhd091dGxpbmVyLiNNSU5fRElTVCArIEZyZWVEcmF3T3V0bGluZXIuI01JTl9ESUZGO1xuXG4gIGNvbnN0cnVjdG9yKHsgeCwgeSB9LCBib3gsIHNjYWxlRmFjdG9yLCB0aGlja25lc3MsIGlzTFRSLCBpbm5lck1hcmdpbiA9IDApIHtcbiAgICB0aGlzLiNib3ggPSBib3g7XG4gICAgdGhpcy4jdGhpY2tuZXNzID0gdGhpY2tuZXNzICogc2NhbGVGYWN0b3I7XG4gICAgdGhpcy4jaXNMVFIgPSBpc0xUUjtcbiAgICB0aGlzLiNsYXN0LnNldChbTmFOLCBOYU4sIE5hTiwgTmFOLCB4LCB5XSwgNik7XG4gICAgdGhpcy4jaW5uZXJNYXJnaW4gPSBpbm5lck1hcmdpbjtcbiAgICB0aGlzLiNtaW5fZGlzdCA9IEZyZWVEcmF3T3V0bGluZXIuI01JTl9ESVNUICogc2NhbGVGYWN0b3I7XG4gICAgdGhpcy4jbWluID0gRnJlZURyYXdPdXRsaW5lci4jTUlOICogc2NhbGVGYWN0b3I7XG4gICAgdGhpcy4jc2NhbGVGYWN0b3IgPSBzY2FsZUZhY3RvcjtcbiAgICB0aGlzLiNwb2ludHMucHVzaCh4LCB5KTtcbiAgfVxuXG4gIGlzRW1wdHkoKSB7XG4gICAgLy8gV2hlbiB3ZSBhZGQgYSBzZWNvbmQgcG9pbnQgdGhlbiB0aGlzLiNsYXN0LnNsaWNlKDYpIHdpbGwgYmUgc29tZXRoaW5nXG4gICAgLy8gbGlrZSBbTmFOLCBOYU4sIGZpcnN0WCwgZmlyc3RZLCBzZWNvbmRYLCBzZWNvbmRZLC4uLl0gc28gaGF2aW5nIGEgTmFOXG4gICAgLy8gYXQgaW5kZXggOCBtZWFucyB0aGF0IHdlJ3ZlIG9ubHkgb25lIHBvaW50LlxuICAgIHJldHVybiBpc05hTih0aGlzLiNsYXN0WzhdKTtcbiAgfVxuXG4gICNnZXRMYXN0Q29vcmRzKCkge1xuICAgIGNvbnN0IGxhc3RUb3AgPSB0aGlzLiNsYXN0LnN1YmFycmF5KDQsIDYpO1xuICAgIGNvbnN0IGxhc3RCb3R0b20gPSB0aGlzLiNsYXN0LnN1YmFycmF5KDE2LCAxOCk7XG4gICAgY29uc3QgW3gsIHksIHdpZHRoLCBoZWlnaHRdID0gdGhpcy4jYm94O1xuXG4gICAgcmV0dXJuIFtcbiAgICAgICh0aGlzLiNsYXN0WCArIChsYXN0VG9wWzBdIC0gbGFzdEJvdHRvbVswXSkgLyAyIC0geCkgLyB3aWR0aCxcbiAgICAgICh0aGlzLiNsYXN0WSArIChsYXN0VG9wWzFdIC0gbGFzdEJvdHRvbVsxXSkgLyAyIC0geSkgLyBoZWlnaHQsXG4gICAgICAodGhpcy4jbGFzdFggKyAobGFzdEJvdHRvbVswXSAtIGxhc3RUb3BbMF0pIC8gMiAtIHgpIC8gd2lkdGgsXG4gICAgICAodGhpcy4jbGFzdFkgKyAobGFzdEJvdHRvbVsxXSAtIGxhc3RUb3BbMV0pIC8gMiAtIHkpIC8gaGVpZ2h0LFxuICAgIF07XG4gIH1cblxuICBhZGQoeyB4LCB5IH0pIHtcbiAgICB0aGlzLiNsYXN0WCA9IHg7XG4gICAgdGhpcy4jbGFzdFkgPSB5O1xuICAgIGNvbnN0IFtsYXllclgsIGxheWVyWSwgbGF5ZXJXaWR0aCwgbGF5ZXJIZWlnaHRdID0gdGhpcy4jYm94O1xuICAgIGxldCBbeDEsIHkxLCB4MiwgeTJdID0gdGhpcy4jbGFzdC5zdWJhcnJheSg4LCAxMik7XG4gICAgY29uc3QgZGlmZlggPSB4IC0geDI7XG4gICAgY29uc3QgZGlmZlkgPSB5IC0geTI7XG4gICAgY29uc3QgZCA9IE1hdGguaHlwb3QoZGlmZlgsIGRpZmZZKTtcbiAgICBpZiAoZCA8IHRoaXMuI21pbikge1xuICAgICAgLy8gVGhlIGlkZWEgaXMgdG8gYXZvaWQgZ2FyYmFnZSBwb2ludHMgYXJvdW5kIHRoZSBsYXN0IHBvaW50LlxuICAgICAgLy8gV2hlbiB0aGUgcG9pbnRzIGFyZSB0b28gY2xvc2UsIGl0IGp1c3QgbGVhZHMgdG8gYmFkIG5vcm1hbCB2ZWN0b3JzIGFuZFxuICAgICAgLy8gY29udHJvbCBwb2ludHMuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGRpZmZEID0gZCAtIHRoaXMuI21pbl9kaXN0O1xuICAgIGNvbnN0IEsgPSBkaWZmRCAvIGQ7XG4gICAgY29uc3Qgc2hpZnRYID0gSyAqIGRpZmZYO1xuICAgIGNvbnN0IHNoaWZ0WSA9IEsgKiBkaWZmWTtcblxuICAgIC8vIFdlIHVwZGF0ZSB0aGUgbGFzdCAzIHBvaW50cyBvZiB0aGUgbGluZS5cbiAgICBsZXQgeDAgPSB4MTtcbiAgICBsZXQgeTAgPSB5MTtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gICAgeDIgKz0gc2hpZnRYO1xuICAgIHkyICs9IHNoaWZ0WTtcblxuICAgIC8vIFdlIGtlZXAgdHJhY2sgb2YgdGhlIHBvaW50cyBpbiBvcmRlciB0byBiZSBhYmxlIHRvIGNvbXB1dGUgdGhlIGZvY3VzXG4gICAgLy8gb3V0bGluZS5cbiAgICB0aGlzLiNwb2ludHM/LnB1c2goeCwgeSk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIG5vcm1hbCB1bml0IHZlY3Rvci5cbiAgICAvLyB8KHNoaWZ0WCwgc2hpZnRZKXwgPSB8S3wgKiB8KGRpZmZYLCBkaWZmWSl8ID0gfEt8ICogZCA9IGRpZmZELlxuICAgIGNvbnN0IG5YID0gLXNoaWZ0WSAvIGRpZmZEO1xuICAgIGNvbnN0IG5ZID0gc2hpZnRYIC8gZGlmZkQ7XG4gICAgY29uc3QgdGhYID0gblggKiB0aGlzLiN0aGlja25lc3M7XG4gICAgY29uc3QgdGhZID0gblkgKiB0aGlzLiN0aGlja25lc3M7XG4gICAgdGhpcy4jbGFzdC5zZXQodGhpcy4jbGFzdC5zdWJhcnJheSgyLCA4KSwgMCk7XG4gICAgdGhpcy4jbGFzdC5zZXQoW3gyICsgdGhYLCB5MiArIHRoWV0sIDQpO1xuICAgIHRoaXMuI2xhc3Quc2V0KHRoaXMuI2xhc3Quc3ViYXJyYXkoMTQsIDE4KSwgMTIpO1xuICAgIHRoaXMuI2xhc3Quc2V0KFt4MiAtIHRoWCwgeTIgLSB0aFldLCAxNik7XG5cbiAgICBpZiAoaXNOYU4odGhpcy4jbGFzdFs2XSkpIHtcbiAgICAgIGlmICh0aGlzLiN0b3AubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuI2xhc3Quc2V0KFt4MSArIHRoWCwgeTEgKyB0aFldLCAyKTtcbiAgICAgICAgdGhpcy4jdG9wLnB1c2goXG4gICAgICAgICAgTmFOLFxuICAgICAgICAgIE5hTixcbiAgICAgICAgICBOYU4sXG4gICAgICAgICAgTmFOLFxuICAgICAgICAgICh4MSArIHRoWCAtIGxheWVyWCkgLyBsYXllcldpZHRoLFxuICAgICAgICAgICh5MSArIHRoWSAtIGxheWVyWSkgLyBsYXllckhlaWdodFxuICAgICAgICApO1xuICAgICAgICB0aGlzLiNsYXN0LnNldChbeDEgLSB0aFgsIHkxIC0gdGhZXSwgMTQpO1xuICAgICAgICB0aGlzLiNib3R0b20ucHVzaChcbiAgICAgICAgICBOYU4sXG4gICAgICAgICAgTmFOLFxuICAgICAgICAgIE5hTixcbiAgICAgICAgICBOYU4sXG4gICAgICAgICAgKHgxIC0gdGhYIC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAgICAgKHkxIC0gdGhZIC0gbGF5ZXJZKSAvIGxheWVySGVpZ2h0XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLiNsYXN0LnNldChbeDAsIHkwLCB4MSwgeTEsIHgyLCB5Ml0sIDYpO1xuICAgICAgcmV0dXJuICF0aGlzLmlzRW1wdHkoKTtcbiAgICB9XG5cbiAgICB0aGlzLiNsYXN0LnNldChbeDAsIHkwLCB4MSwgeTEsIHgyLCB5Ml0sIDYpO1xuXG4gICAgY29uc3QgYW5nbGUgPSBNYXRoLmFicyhcbiAgICAgIE1hdGguYXRhbjIoeTAgLSB5MSwgeDAgLSB4MSkgLSBNYXRoLmF0YW4yKHNoaWZ0WSwgc2hpZnRYKVxuICAgICk7XG4gICAgaWYgKGFuZ2xlIDwgTWF0aC5QSSAvIDIpIHtcbiAgICAgIC8vIEluIG9yZGVyIHRvIGF2b2lkIHNvbWUgcG9zc2libGUgYXJ0aWZhY3RzLCB3ZSdyZSBnb2luZyB0byB1c2UgdGhlIGFcbiAgICAgIC8vIHN0cmFpZ2h0IGxpbmUgaW5zdGVhZCBvZiBhIHF1YWRyYXRpYyBCw6l6aWVyIGN1cnZlLlxuICAgICAgW3gxLCB5MSwgeDIsIHkyXSA9IHRoaXMuI2xhc3Quc3ViYXJyYXkoMiwgNik7XG4gICAgICB0aGlzLiN0b3AucHVzaChcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICAoKHgxICsgeDIpIC8gMiAtIGxheWVyWCkgLyBsYXllcldpZHRoLFxuICAgICAgICAoKHkxICsgeTIpIC8gMiAtIGxheWVyWSkgLyBsYXllckhlaWdodFxuICAgICAgKTtcbiAgICAgIFt4MSwgeTEsIHgwLCB5MF0gPSB0aGlzLiNsYXN0LnN1YmFycmF5KDE0LCAxOCk7XG4gICAgICB0aGlzLiNib3R0b20ucHVzaChcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICAoKHgwICsgeDEpIC8gMiAtIGxheWVyWCkgLyBsYXllcldpZHRoLFxuICAgICAgICAoKHkwICsgeTEpIC8gMiAtIGxheWVyWSkgLyBsYXllckhlaWdodFxuICAgICAgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIENvbnRyb2wgcG9pbnRzIGFuZCB0aGUgZmluYWwgcG9pbnQgZm9yIHRoZSBxdWFkcmF0aWMgQsOpemllciBjdXJ2ZS5cbiAgICBbeDAsIHkwLCB4MSwgeTEsIHgyLCB5Ml0gPSB0aGlzLiNsYXN0LnN1YmFycmF5KDAsIDYpO1xuICAgIHRoaXMuI3RvcC5wdXNoKFxuICAgICAgKCh4MCArIDUgKiB4MSkgLyA2IC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAoKHkwICsgNSAqIHkxKSAvIDYgLSBsYXllclkpIC8gbGF5ZXJIZWlnaHQsXG4gICAgICAoKDUgKiB4MSArIHgyKSAvIDYgLSBsYXllclgpIC8gbGF5ZXJXaWR0aCxcbiAgICAgICgoNSAqIHkxICsgeTIpIC8gNiAtIGxheWVyWSkgLyBsYXllckhlaWdodCxcbiAgICAgICgoeDEgKyB4MikgLyAyIC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAoKHkxICsgeTIpIC8gMiAtIGxheWVyWSkgLyBsYXllckhlaWdodFxuICAgICk7XG4gICAgW3gyLCB5MiwgeDEsIHkxLCB4MCwgeTBdID0gdGhpcy4jbGFzdC5zdWJhcnJheSgxMiwgMTgpO1xuICAgIHRoaXMuI2JvdHRvbS5wdXNoKFxuICAgICAgKCh4MCArIDUgKiB4MSkgLyA2IC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAoKHkwICsgNSAqIHkxKSAvIDYgLSBsYXllclkpIC8gbGF5ZXJIZWlnaHQsXG4gICAgICAoKDUgKiB4MSArIHgyKSAvIDYgLSBsYXllclgpIC8gbGF5ZXJXaWR0aCxcbiAgICAgICgoNSAqIHkxICsgeTIpIC8gNiAtIGxheWVyWSkgLyBsYXllckhlaWdodCxcbiAgICAgICgoeDEgKyB4MikgLyAyIC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAoKHkxICsgeTIpIC8gMiAtIGxheWVyWSkgLyBsYXllckhlaWdodFxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICB0b1NWR1BhdGgoKSB7XG4gICAgaWYgKHRoaXMuaXNFbXB0eSgpKSB7XG4gICAgICAvLyBXZSd2ZSBvbmx5IG9uZSBwb2ludC5cbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICBjb25zdCB0b3AgPSB0aGlzLiN0b3A7XG4gICAgY29uc3QgYm90dG9tID0gdGhpcy4jYm90dG9tO1xuXG4gICAgaWYgKGlzTmFOKHRoaXMuI2xhc3RbNl0pICYmICF0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgLy8gV2UndmUgb25seSB0d28gcG9pbnRzLlxuICAgICAgcmV0dXJuIHRoaXMuI3RvU1ZHUGF0aFR3b1BvaW50cygpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlciA9IFtdO1xuICAgIGJ1ZmZlci5wdXNoKGBNJHt0b3BbNF19ICR7dG9wWzVdfWApO1xuICAgIGZvciAobGV0IGkgPSA2OyBpIDwgdG9wLmxlbmd0aDsgaSArPSA2KSB7XG4gICAgICBpZiAoaXNOYU4odG9wW2ldKSkge1xuICAgICAgICBidWZmZXIucHVzaChgTCR7dG9wW2kgKyA0XX0gJHt0b3BbaSArIDVdfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmZmVyLnB1c2goXG4gICAgICAgICAgYEMke3RvcFtpXX0gJHt0b3BbaSArIDFdfSAke3RvcFtpICsgMl19ICR7dG9wW2kgKyAzXX0gJHt0b3BbaSArIDRdfSAke1xuICAgICAgICAgICAgdG9wW2kgKyA1XVxuICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jdG9TVkdQYXRoRW5kKGJ1ZmZlcik7XG5cbiAgICBmb3IgKGxldCBpID0gYm90dG9tLmxlbmd0aCAtIDY7IGkgPj0gNjsgaSAtPSA2KSB7XG4gICAgICBpZiAoaXNOYU4oYm90dG9tW2ldKSkge1xuICAgICAgICBidWZmZXIucHVzaChgTCR7Ym90dG9tW2kgKyA0XX0gJHtib3R0b21baSArIDVdfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmZmVyLnB1c2goXG4gICAgICAgICAgYEMke2JvdHRvbVtpXX0gJHtib3R0b21baSArIDFdfSAke2JvdHRvbVtpICsgMl19ICR7Ym90dG9tW2kgKyAzXX0gJHtcbiAgICAgICAgICAgIGJvdHRvbVtpICsgNF1cbiAgICAgICAgICB9ICR7Ym90dG9tW2kgKyA1XX1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jdG9TVkdQYXRoU3RhcnQoYnVmZmVyKTtcblxuICAgIHJldHVybiBidWZmZXIuam9pbihcIiBcIik7XG4gIH1cblxuICAjdG9TVkdQYXRoVHdvUG9pbnRzKCkge1xuICAgIGNvbnN0IFt4LCB5LCB3aWR0aCwgaGVpZ2h0XSA9IHRoaXMuI2JveDtcbiAgICBjb25zdCBbbGFzdFRvcFgsIGxhc3RUb3BZLCBsYXN0Qm90dG9tWCwgbGFzdEJvdHRvbVldID1cbiAgICAgIHRoaXMuI2dldExhc3RDb29yZHMoKTtcblxuICAgIHJldHVybiBgTSR7KHRoaXMuI2xhc3RbMl0gLSB4KSAvIHdpZHRofSAke1xuICAgICAgKHRoaXMuI2xhc3RbM10gLSB5KSAvIGhlaWdodFxuICAgIH0gTCR7KHRoaXMuI2xhc3RbNF0gLSB4KSAvIHdpZHRofSAkeyh0aGlzLiNsYXN0WzVdIC0geSkgLyBoZWlnaHR9IEwke2xhc3RUb3BYfSAke2xhc3RUb3BZfSBMJHtsYXN0Qm90dG9tWH0gJHtsYXN0Qm90dG9tWX0gTCR7XG4gICAgICAodGhpcy4jbGFzdFsxNl0gLSB4KSAvIHdpZHRoXG4gICAgfSAkeyh0aGlzLiNsYXN0WzE3XSAtIHkpIC8gaGVpZ2h0fSBMJHsodGhpcy4jbGFzdFsxNF0gLSB4KSAvIHdpZHRofSAke1xuICAgICAgKHRoaXMuI2xhc3RbMTVdIC0geSkgLyBoZWlnaHRcbiAgICB9IFpgO1xuICB9XG5cbiAgI3RvU1ZHUGF0aFN0YXJ0KGJ1ZmZlcikge1xuICAgIGNvbnN0IGJvdHRvbSA9IHRoaXMuI2JvdHRvbTtcbiAgICBidWZmZXIucHVzaChgTCR7Ym90dG9tWzRdfSAke2JvdHRvbVs1XX0gWmApO1xuICB9XG5cbiAgI3RvU1ZHUGF0aEVuZChidWZmZXIpIHtcbiAgICBjb25zdCBbeCwgeSwgd2lkdGgsIGhlaWdodF0gPSB0aGlzLiNib3g7XG4gICAgY29uc3QgbGFzdFRvcCA9IHRoaXMuI2xhc3Quc3ViYXJyYXkoNCwgNik7XG4gICAgY29uc3QgbGFzdEJvdHRvbSA9IHRoaXMuI2xhc3Quc3ViYXJyYXkoMTYsIDE4KTtcbiAgICBjb25zdCBbbGFzdFRvcFgsIGxhc3RUb3BZLCBsYXN0Qm90dG9tWCwgbGFzdEJvdHRvbVldID1cbiAgICAgIHRoaXMuI2dldExhc3RDb29yZHMoKTtcblxuICAgIGJ1ZmZlci5wdXNoKFxuICAgICAgYEwkeyhsYXN0VG9wWzBdIC0geCkgLyB3aWR0aH0gJHsobGFzdFRvcFsxXSAtIHkpIC8gaGVpZ2h0fSBMJHtsYXN0VG9wWH0gJHtsYXN0VG9wWX0gTCR7bGFzdEJvdHRvbVh9ICR7bGFzdEJvdHRvbVl9IEwke1xuICAgICAgICAobGFzdEJvdHRvbVswXSAtIHgpIC8gd2lkdGhcbiAgICAgIH0gJHsobGFzdEJvdHRvbVsxXSAtIHkpIC8gaGVpZ2h0fWBcbiAgICApO1xuICB9XG5cbiAgbmV3RnJlZURyYXdPdXRsaW5lKG91dGxpbmUsIHBvaW50cywgYm94LCBzY2FsZUZhY3RvciwgaW5uZXJNYXJnaW4sIGlzTFRSKSB7XG4gICAgcmV0dXJuIG5ldyBGcmVlRHJhd091dGxpbmUoXG4gICAgICBvdXRsaW5lLFxuICAgICAgcG9pbnRzLFxuICAgICAgYm94LFxuICAgICAgc2NhbGVGYWN0b3IsXG4gICAgICBpbm5lck1hcmdpbixcbiAgICAgIGlzTFRSXG4gICAgKTtcbiAgfVxuXG4gIGdldE91dGxpbmVzKCkge1xuICAgIGNvbnN0IHRvcCA9IHRoaXMuI3RvcDtcbiAgICBjb25zdCBib3R0b20gPSB0aGlzLiNib3R0b207XG4gICAgY29uc3QgbGFzdCA9IHRoaXMuI2xhc3Q7XG4gICAgY29uc3QgW2xheWVyWCwgbGF5ZXJZLCBsYXllcldpZHRoLCBsYXllckhlaWdodF0gPSB0aGlzLiNib3g7XG5cbiAgICBjb25zdCBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KCh0aGlzLiNwb2ludHM/Lmxlbmd0aCA/PyAwKSArIDIpO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHBvaW50cy5sZW5ndGggLSAyOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgcG9pbnRzW2ldID0gKHRoaXMuI3BvaW50c1tpXSAtIGxheWVyWCkgLyBsYXllcldpZHRoO1xuICAgICAgcG9pbnRzW2kgKyAxXSA9ICh0aGlzLiNwb2ludHNbaSArIDFdIC0gbGF5ZXJZKSAvIGxheWVySGVpZ2h0O1xuICAgIH1cbiAgICBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDJdID0gKHRoaXMuI2xhc3RYIC0gbGF5ZXJYKSAvIGxheWVyV2lkdGg7XG4gICAgcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSA9ICh0aGlzLiNsYXN0WSAtIGxheWVyWSkgLyBsYXllckhlaWdodDtcblxuICAgIGlmIChpc05hTihsYXN0WzZdKSAmJiAhdGhpcy5pc0VtcHR5KCkpIHtcbiAgICAgIC8vIFdlJ3ZlIG9ubHkgdHdvIHBvaW50cy5cbiAgICAgIHJldHVybiB0aGlzLiNnZXRPdXRsaW5lVHdvUG9pbnRzKHBvaW50cyk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0bGluZSA9IG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICB0aGlzLiN0b3AubGVuZ3RoICsgMjQgKyB0aGlzLiNib3R0b20ubGVuZ3RoXG4gICAgKTtcbiAgICBsZXQgTiA9IHRvcC5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpICs9IDIpIHtcbiAgICAgIGlmIChpc05hTih0b3BbaV0pKSB7XG4gICAgICAgIG91dGxpbmVbaV0gPSBvdXRsaW5lW2kgKyAxXSA9IE5hTjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBvdXRsaW5lW2ldID0gdG9wW2ldO1xuICAgICAgb3V0bGluZVtpICsgMV0gPSB0b3BbaSArIDFdO1xuICAgIH1cblxuICAgIE4gPSB0aGlzLiNnZXRPdXRsaW5lRW5kKG91dGxpbmUsIE4pO1xuXG4gICAgZm9yIChsZXQgaSA9IGJvdHRvbS5sZW5ndGggLSA2OyBpID49IDY7IGkgLT0gNikge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA2OyBqICs9IDIpIHtcbiAgICAgICAgaWYgKGlzTmFOKGJvdHRvbVtpICsgal0pKSB7XG4gICAgICAgICAgb3V0bGluZVtOXSA9IG91dGxpbmVbTiArIDFdID0gTmFOO1xuICAgICAgICAgIE4gKz0gMjtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBvdXRsaW5lW05dID0gYm90dG9tW2kgKyBqXTtcbiAgICAgICAgb3V0bGluZVtOICsgMV0gPSBib3R0b21baSArIGogKyAxXTtcbiAgICAgICAgTiArPSAyO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuI2dldE91dGxpbmVTdGFydChvdXRsaW5lLCBOKTtcblxuICAgIHJldHVybiB0aGlzLm5ld0ZyZWVEcmF3T3V0bGluZShcbiAgICAgIG91dGxpbmUsXG4gICAgICBwb2ludHMsXG4gICAgICB0aGlzLiNib3gsXG4gICAgICB0aGlzLiNzY2FsZUZhY3RvcixcbiAgICAgIHRoaXMuI2lubmVyTWFyZ2luLFxuICAgICAgdGhpcy4jaXNMVFJcbiAgICApO1xuICB9XG5cbiAgI2dldE91dGxpbmVUd29Qb2ludHMocG9pbnRzKSB7XG4gICAgY29uc3QgbGFzdCA9IHRoaXMuI2xhc3Q7XG4gICAgY29uc3QgW2xheWVyWCwgbGF5ZXJZLCBsYXllcldpZHRoLCBsYXllckhlaWdodF0gPSB0aGlzLiNib3g7XG4gICAgY29uc3QgW2xhc3RUb3BYLCBsYXN0VG9wWSwgbGFzdEJvdHRvbVgsIGxhc3RCb3R0b21ZXSA9XG4gICAgICB0aGlzLiNnZXRMYXN0Q29vcmRzKCk7XG4gICAgY29uc3Qgb3V0bGluZSA9IG5ldyBGbG9hdDMyQXJyYXkoMzYpO1xuICAgIG91dGxpbmUuc2V0KFxuICAgICAgW1xuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIChsYXN0WzJdIC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAgIChsYXN0WzNdIC0gbGF5ZXJZKSAvIGxheWVySGVpZ2h0LFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIChsYXN0WzRdIC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAgIChsYXN0WzVdIC0gbGF5ZXJZKSAvIGxheWVySGVpZ2h0LFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIGxhc3RUb3BYLFxuICAgICAgICBsYXN0VG9wWSxcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICBsYXN0Qm90dG9tWCxcbiAgICAgICAgbGFzdEJvdHRvbVksXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgKGxhc3RbMTZdIC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAgIChsYXN0WzE3XSAtIGxheWVyWSkgLyBsYXllckhlaWdodCxcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICAobGFzdFsxNF0gLSBsYXllclgpIC8gbGF5ZXJXaWR0aCxcbiAgICAgICAgKGxhc3RbMTVdIC0gbGF5ZXJZKSAvIGxheWVySGVpZ2h0LFxuICAgICAgXSxcbiAgICAgIDBcbiAgICApO1xuICAgIHJldHVybiB0aGlzLm5ld0ZyZWVEcmF3T3V0bGluZShcbiAgICAgIG91dGxpbmUsXG4gICAgICBwb2ludHMsXG4gICAgICB0aGlzLiNib3gsXG4gICAgICB0aGlzLiNzY2FsZUZhY3RvcixcbiAgICAgIHRoaXMuI2lubmVyTWFyZ2luLFxuICAgICAgdGhpcy4jaXNMVFJcbiAgICApO1xuICB9XG5cbiAgI2dldE91dGxpbmVTdGFydChvdXRsaW5lLCBwb3MpIHtcbiAgICBjb25zdCBib3R0b20gPSB0aGlzLiNib3R0b207XG4gICAgb3V0bGluZS5zZXQoW05hTiwgTmFOLCBOYU4sIE5hTiwgYm90dG9tWzRdLCBib3R0b21bNV1dLCBwb3MpO1xuICAgIHJldHVybiAocG9zICs9IDYpO1xuICB9XG5cbiAgI2dldE91dGxpbmVFbmQob3V0bGluZSwgcG9zKSB7XG4gICAgY29uc3QgbGFzdFRvcCA9IHRoaXMuI2xhc3Quc3ViYXJyYXkoNCwgNik7XG4gICAgY29uc3QgbGFzdEJvdHRvbSA9IHRoaXMuI2xhc3Quc3ViYXJyYXkoMTYsIDE4KTtcbiAgICBjb25zdCBbbGF5ZXJYLCBsYXllclksIGxheWVyV2lkdGgsIGxheWVySGVpZ2h0XSA9IHRoaXMuI2JveDtcbiAgICBjb25zdCBbbGFzdFRvcFgsIGxhc3RUb3BZLCBsYXN0Qm90dG9tWCwgbGFzdEJvdHRvbVldID1cbiAgICAgIHRoaXMuI2dldExhc3RDb29yZHMoKTtcbiAgICBvdXRsaW5lLnNldChcbiAgICAgIFtcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICAobGFzdFRvcFswXSAtIGxheWVyWCkgLyBsYXllcldpZHRoLFxuICAgICAgICAobGFzdFRvcFsxXSAtIGxheWVyWSkgLyBsYXllckhlaWdodCxcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICBsYXN0VG9wWCxcbiAgICAgICAgbGFzdFRvcFksXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgbGFzdEJvdHRvbVgsXG4gICAgICAgIGxhc3RCb3R0b21ZLFxuICAgICAgICBOYU4sXG4gICAgICAgIE5hTixcbiAgICAgICAgTmFOLFxuICAgICAgICBOYU4sXG4gICAgICAgIChsYXN0Qm90dG9tWzBdIC0gbGF5ZXJYKSAvIGxheWVyV2lkdGgsXG4gICAgICAgIChsYXN0Qm90dG9tWzFdIC0gbGF5ZXJZKSAvIGxheWVySGVpZ2h0LFxuICAgICAgXSxcbiAgICAgIHBvc1xuICAgICk7XG4gICAgcmV0dXJuIChwb3MgKz0gMjQpO1xuICB9XG59XG5cbmNsYXNzIEZyZWVEcmF3T3V0bGluZSBleHRlbmRzIE91dGxpbmUge1xuICAjYm94O1xuXG4gICNiYm94ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcblxuICAjaW5uZXJNYXJnaW47XG5cbiAgI2lzTFRSO1xuXG4gICNwb2ludHM7XG5cbiAgI3NjYWxlRmFjdG9yO1xuXG4gICNvdXRsaW5lO1xuXG4gIGNvbnN0cnVjdG9yKG91dGxpbmUsIHBvaW50cywgYm94LCBzY2FsZUZhY3RvciwgaW5uZXJNYXJnaW4sIGlzTFRSKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLiNvdXRsaW5lID0gb3V0bGluZTtcbiAgICB0aGlzLiNwb2ludHMgPSBwb2ludHM7XG4gICAgdGhpcy4jYm94ID0gYm94O1xuICAgIHRoaXMuI3NjYWxlRmFjdG9yID0gc2NhbGVGYWN0b3I7XG4gICAgdGhpcy4jaW5uZXJNYXJnaW4gPSBpbm5lck1hcmdpbjtcbiAgICB0aGlzLiNpc0xUUiA9IGlzTFRSO1xuICAgIHRoaXMubGFzdFBvaW50ID0gW05hTiwgTmFOXTtcbiAgICB0aGlzLiNjb21wdXRlTWluTWF4KGlzTFRSKTtcblxuICAgIGNvbnN0IFt4LCB5LCB3aWR0aCwgaGVpZ2h0XSA9IHRoaXMuI2Jib3g7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gb3V0bGluZS5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICBvdXRsaW5lW2ldID0gKG91dGxpbmVbaV0gLSB4KSAvIHdpZHRoO1xuICAgICAgb3V0bGluZVtpICsgMV0gPSAob3V0bGluZVtpICsgMV0gLSB5KSAvIGhlaWdodDtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gcG9pbnRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcbiAgICAgIHBvaW50c1tpXSA9IChwb2ludHNbaV0gLSB4KSAvIHdpZHRoO1xuICAgICAgcG9pbnRzW2kgKyAxXSA9IChwb2ludHNbaSArIDFdIC0geSkgLyBoZWlnaHQ7XG4gICAgfVxuICB9XG5cbiAgdG9TVkdQYXRoKCkge1xuICAgIGNvbnN0IGJ1ZmZlciA9IFtgTSR7dGhpcy4jb3V0bGluZVs0XX0gJHt0aGlzLiNvdXRsaW5lWzVdfWBdO1xuICAgIGZvciAobGV0IGkgPSA2LCBpaSA9IHRoaXMuI291dGxpbmUubGVuZ3RoOyBpIDwgaWk7IGkgKz0gNikge1xuICAgICAgaWYgKGlzTmFOKHRoaXMuI291dGxpbmVbaV0pKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKGBMJHt0aGlzLiNvdXRsaW5lW2kgKyA0XX0gJHt0aGlzLiNvdXRsaW5lW2kgKyA1XX1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBidWZmZXIucHVzaChcbiAgICAgICAgYEMke3RoaXMuI291dGxpbmVbaV19ICR7dGhpcy4jb3V0bGluZVtpICsgMV19ICR7dGhpcy4jb3V0bGluZVtpICsgMl19ICR7XG4gICAgICAgICAgdGhpcy4jb3V0bGluZVtpICsgM11cbiAgICAgICAgfSAke3RoaXMuI291dGxpbmVbaSArIDRdfSAke3RoaXMuI291dGxpbmVbaSArIDVdfWBcbiAgICAgICk7XG4gICAgfVxuICAgIGJ1ZmZlci5wdXNoKFwiWlwiKTtcbiAgICByZXR1cm4gYnVmZmVyLmpvaW4oXCIgXCIpO1xuICB9XG5cbiAgc2VyaWFsaXplKFtibFgsIGJsWSwgdHJYLCB0clldLCByb3RhdGlvbikge1xuICAgIGNvbnN0IHdpZHRoID0gdHJYIC0gYmxYO1xuICAgIGNvbnN0IGhlaWdodCA9IHRyWSAtIGJsWTtcbiAgICBsZXQgb3V0bGluZTtcbiAgICBsZXQgcG9pbnRzO1xuICAgIHN3aXRjaCAocm90YXRpb24pIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgb3V0bGluZSA9IE91dGxpbmUuX3Jlc2NhbGUodGhpcy4jb3V0bGluZSwgYmxYLCB0clksIHdpZHRoLCAtaGVpZ2h0KTtcbiAgICAgICAgcG9pbnRzID0gT3V0bGluZS5fcmVzY2FsZSh0aGlzLiNwb2ludHMsIGJsWCwgdHJZLCB3aWR0aCwgLWhlaWdodCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA5MDpcbiAgICAgICAgb3V0bGluZSA9IE91dGxpbmUuX3Jlc2NhbGVBbmRTd2FwKFxuICAgICAgICAgIHRoaXMuI291dGxpbmUsXG4gICAgICAgICAgYmxYLFxuICAgICAgICAgIGJsWSxcbiAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICBoZWlnaHRcbiAgICAgICAgKTtcbiAgICAgICAgcG9pbnRzID0gT3V0bGluZS5fcmVzY2FsZUFuZFN3YXAodGhpcy4jcG9pbnRzLCBibFgsIGJsWSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxODA6XG4gICAgICAgIG91dGxpbmUgPSBPdXRsaW5lLl9yZXNjYWxlKHRoaXMuI291dGxpbmUsIHRyWCwgYmxZLCAtd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHBvaW50cyA9IE91dGxpbmUuX3Jlc2NhbGUodGhpcy4jcG9pbnRzLCB0clgsIGJsWSwgLXdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICBvdXRsaW5lID0gT3V0bGluZS5fcmVzY2FsZUFuZFN3YXAoXG4gICAgICAgICAgdGhpcy4jb3V0bGluZSxcbiAgICAgICAgICB0clgsXG4gICAgICAgICAgdHJZLFxuICAgICAgICAgIC13aWR0aCxcbiAgICAgICAgICAtaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIHBvaW50cyA9IE91dGxpbmUuX3Jlc2NhbGVBbmRTd2FwKFxuICAgICAgICAgIHRoaXMuI3BvaW50cyxcbiAgICAgICAgICB0clgsXG4gICAgICAgICAgdHJZLFxuICAgICAgICAgIC13aWR0aCxcbiAgICAgICAgICAtaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4geyBvdXRsaW5lOiBBcnJheS5mcm9tKG91dGxpbmUpLCBwb2ludHM6IFtBcnJheS5mcm9tKHBvaW50cyldIH07XG4gIH1cblxuICAjY29tcHV0ZU1pbk1heChpc0xUUikge1xuICAgIGNvbnN0IG91dGxpbmUgPSB0aGlzLiNvdXRsaW5lO1xuICAgIGxldCBsYXN0WCA9IG91dGxpbmVbNF07XG4gICAgbGV0IGxhc3RZID0gb3V0bGluZVs1XTtcbiAgICBjb25zdCBtaW5NYXggPSBbbGFzdFgsIGxhc3RZLCBsYXN0WCwgbGFzdFldO1xuICAgIGxldCBsYXN0UG9pbnRYID0gbGFzdFg7XG4gICAgbGV0IGxhc3RQb2ludFkgPSBsYXN0WTtcbiAgICBjb25zdCBsdHJDYWxsYmFjayA9IGlzTFRSID8gTWF0aC5tYXggOiBNYXRoLm1pbjtcblxuICAgIGZvciAobGV0IGkgPSA2LCBpaSA9IG91dGxpbmUubGVuZ3RoOyBpIDwgaWk7IGkgKz0gNikge1xuICAgICAgY29uc3QgeCA9IG91dGxpbmVbaSArIDRdLFxuICAgICAgICB5ID0gb3V0bGluZVtpICsgNV07XG5cbiAgICAgIGlmIChpc05hTihvdXRsaW5lW2ldKSkge1xuICAgICAgICBVdGlsLnBvaW50Qm91bmRpbmdCb3goeCwgeSwgbWluTWF4KTtcblxuICAgICAgICBpZiAobGFzdFBvaW50WSA8IHkpIHtcbiAgICAgICAgICBsYXN0UG9pbnRYID0geDtcbiAgICAgICAgICBsYXN0UG9pbnRZID0geTtcbiAgICAgICAgfSBlbHNlIGlmIChsYXN0UG9pbnRZID09PSB5KSB7XG4gICAgICAgICAgbGFzdFBvaW50WCA9IGx0ckNhbGxiYWNrKGxhc3RQb2ludFgsIHgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBiYm94ID0gW0luZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHldO1xuICAgICAgICBVdGlsLmJlemllckJvdW5kaW5nQm94KGxhc3RYLCBsYXN0WSwgLi4ub3V0bGluZS5zbGljZShpLCBpICsgNiksIGJib3gpO1xuXG4gICAgICAgIFV0aWwucmVjdEJvdW5kaW5nQm94KC4uLmJib3gsIG1pbk1heCk7XG5cbiAgICAgICAgaWYgKGxhc3RQb2ludFkgPCBiYm94WzNdKSB7XG4gICAgICAgICAgbGFzdFBvaW50WCA9IGJib3hbMl07XG4gICAgICAgICAgbGFzdFBvaW50WSA9IGJib3hbM107XG4gICAgICAgIH0gZWxzZSBpZiAobGFzdFBvaW50WSA9PT0gYmJveFszXSkge1xuICAgICAgICAgIGxhc3RQb2ludFggPSBsdHJDYWxsYmFjayhsYXN0UG9pbnRYLCBiYm94WzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGFzdFggPSB4O1xuICAgICAgbGFzdFkgPSB5O1xuICAgIH1cblxuICAgIGNvbnN0IGJib3ggPSB0aGlzLiNiYm94O1xuICAgIGJib3hbMF0gPSBtaW5NYXhbMF0gLSB0aGlzLiNpbm5lck1hcmdpbjtcbiAgICBiYm94WzFdID0gbWluTWF4WzFdIC0gdGhpcy4jaW5uZXJNYXJnaW47XG4gICAgYmJveFsyXSA9IG1pbk1heFsyXSAtIG1pbk1heFswXSArIDIgKiB0aGlzLiNpbm5lck1hcmdpbjtcbiAgICBiYm94WzNdID0gbWluTWF4WzNdIC0gbWluTWF4WzFdICsgMiAqIHRoaXMuI2lubmVyTWFyZ2luO1xuICAgIHRoaXMubGFzdFBvaW50ID0gW2xhc3RQb2ludFgsIGxhc3RQb2ludFldO1xuICB9XG5cbiAgZ2V0IGJveCgpIHtcbiAgICByZXR1cm4gdGhpcy4jYmJveDtcbiAgfVxuXG4gIG5ld091dGxpbmVyKHBvaW50LCBib3gsIHNjYWxlRmFjdG9yLCB0aGlja25lc3MsIGlzTFRSLCBpbm5lck1hcmdpbiA9IDApIHtcbiAgICByZXR1cm4gbmV3IEZyZWVEcmF3T3V0bGluZXIoXG4gICAgICBwb2ludCxcbiAgICAgIGJveCxcbiAgICAgIHNjYWxlRmFjdG9yLFxuICAgICAgdGhpY2tuZXNzLFxuICAgICAgaXNMVFIsXG4gICAgICBpbm5lck1hcmdpblxuICAgICk7XG4gIH1cblxuICBnZXROZXdPdXRsaW5lKHRoaWNrbmVzcywgaW5uZXJNYXJnaW4pIHtcbiAgICAvLyBCdWlsZCB0aGUgb3V0bGluZSBvZiB0aGUgaGlnaGxpZ2h0IHRvIHVzZSBhcyB0aGUgZm9jdXMgb3V0bGluZS5cbiAgICBjb25zdCBbeCwgeSwgd2lkdGgsIGhlaWdodF0gPSB0aGlzLiNiYm94O1xuICAgIGNvbnN0IFtsYXllclgsIGxheWVyWSwgbGF5ZXJXaWR0aCwgbGF5ZXJIZWlnaHRdID0gdGhpcy4jYm94O1xuICAgIGNvbnN0IHN4ID0gd2lkdGggKiBsYXllcldpZHRoO1xuICAgIGNvbnN0IHN5ID0gaGVpZ2h0ICogbGF5ZXJIZWlnaHQ7XG4gICAgY29uc3QgdHggPSB4ICogbGF5ZXJXaWR0aCArIGxheWVyWDtcbiAgICBjb25zdCB0eSA9IHkgKiBsYXllckhlaWdodCArIGxheWVyWTtcbiAgICBjb25zdCBvdXRsaW5lciA9IHRoaXMubmV3T3V0bGluZXIoXG4gICAgICB7XG4gICAgICAgIHg6IHRoaXMuI3BvaW50c1swXSAqIHN4ICsgdHgsXG4gICAgICAgIHk6IHRoaXMuI3BvaW50c1sxXSAqIHN5ICsgdHksXG4gICAgICB9LFxuICAgICAgdGhpcy4jYm94LFxuICAgICAgdGhpcy4jc2NhbGVGYWN0b3IsXG4gICAgICB0aGlja25lc3MsXG4gICAgICB0aGlzLiNpc0xUUixcbiAgICAgIGlubmVyTWFyZ2luID8/IHRoaXMuI2lubmVyTWFyZ2luXG4gICAgKTtcbiAgICBmb3IgKGxldCBpID0gMjsgaSA8IHRoaXMuI3BvaW50cy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgb3V0bGluZXIuYWRkKHtcbiAgICAgICAgeDogdGhpcy4jcG9pbnRzW2ldICogc3ggKyB0eCxcbiAgICAgICAgeTogdGhpcy4jcG9pbnRzW2kgKyAxXSAqIHN5ICsgdHksXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG91dGxpbmVyLmdldE91dGxpbmVzKCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgRnJlZURyYXdPdXRsaW5lLCBGcmVlRHJhd091dGxpbmVyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjMgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEZyZWVEcmF3T3V0bGluZSwgRnJlZURyYXdPdXRsaW5lciB9IGZyb20gXCIuL2ZyZWVkcmF3LmpzXCI7XG5pbXBvcnQgeyBPdXRsaW5lIH0gZnJvbSBcIi4vb3V0bGluZS5qc1wiO1xuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi8uLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG5jbGFzcyBIaWdobGlnaHRPdXRsaW5lciB7XG4gICNib3g7XG5cbiAgI2xhc3RQb2ludDtcblxuICAjdmVydGljYWxFZGdlcyA9IFtdO1xuXG4gICNpbnRlcnZhbHMgPSBbXTtcblxuICAvKipcbiAgICogQ29uc3RydWN0IGFuIG91dGxpbmVyLlxuICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IGJveGVzIC0gQW4gYXJyYXkgb2YgYXhpcy1hbGlnbmVkIHJlY3RhbmdsZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBib3JkZXJXaWR0aCAtIFRoZSB3aWR0aCBvZiB0aGUgYm9yZGVyIG9mIHRoZSBib3hlcywgaXRcbiAgICogICBhbGxvd3MgdG8gbWFrZSB0aGUgYm94ZXMgYmlnZ2VyIChvciBzbWFsbGVyKS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGlubmVyTWFyZ2luIC0gVGhlIG1hcmdpbiBiZXR3ZWVuIHRoZSBib3hlcyBhbmQgdGhlXG4gICAqICAgb3V0bGluZXMuIEl0J3MgaW1wb3J0YW50IHRvIG5vdCBoYXZlIGEgbnVsbCBpbm5lck1hcmdpbiB3aGVuIHdlIHdhbnQgdG9cbiAgICogICBkcmF3IHRoZSBvdXRsaW5lIGVsc2UgdGhlIHN0cm9rZWQgb3V0bGluZSBjb3VsZCBiZSBjbGlwcGVkIGJlY2F1c2Ugb2YgaXRzXG4gICAqICAgd2lkdGguXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNMVFIgLSB0cnVlIGlmIHdlJ3JlIGluIExUUiBtb2RlLiBJdCdzIHVzZWQgdG8gZGV0ZXJtaW5lXG4gICAqICAgdGhlIGxhc3QgcG9pbnQgb2YgdGhlIGJveGVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm94ZXMsIGJvcmRlcldpZHRoID0gMCwgaW5uZXJNYXJnaW4gPSAwLCBpc0xUUiA9IHRydWUpIHtcbiAgICBjb25zdCBtaW5NYXggPSBbSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eV07XG5cbiAgICAvLyBXZSByb3VuZCB0aGUgY29vcmRpbmF0ZXMgdG8gc2xpZ2h0bHkgcmVkdWNlIHRoZSBudW1iZXIgb2YgZWRnZXMgaW4gdGhlXG4gICAgLy8gZmluYWwgb3V0bGluZXMuXG4gICAgY29uc3QgTlVNQkVSX09GX0RJR0lUUyA9IDQ7XG4gICAgY29uc3QgRVBTSUxPTiA9IDEwICoqIC1OVU1CRVJfT0ZfRElHSVRTO1xuXG4gICAgLy8gVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBib3hlcyBhcmUgaW4gdGhlIHBhZ2UgY29vcmRpbmF0ZSBzeXN0ZW0uXG4gICAgZm9yIChjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSBvZiBib3hlcykge1xuICAgICAgY29uc3QgeDEgPSBNYXRoLmZsb29yKCh4IC0gYm9yZGVyV2lkdGgpIC8gRVBTSUxPTikgKiBFUFNJTE9OO1xuICAgICAgY29uc3QgeDIgPSBNYXRoLmNlaWwoKHggKyB3aWR0aCArIGJvcmRlcldpZHRoKSAvIEVQU0lMT04pICogRVBTSUxPTjtcbiAgICAgIGNvbnN0IHkxID0gTWF0aC5mbG9vcigoeSAtIGJvcmRlcldpZHRoKSAvIEVQU0lMT04pICogRVBTSUxPTjtcbiAgICAgIGNvbnN0IHkyID0gTWF0aC5jZWlsKCh5ICsgaGVpZ2h0ICsgYm9yZGVyV2lkdGgpIC8gRVBTSUxPTikgKiBFUFNJTE9OO1xuICAgICAgY29uc3QgbGVmdCA9IFt4MSwgeTEsIHkyLCB0cnVlXTtcbiAgICAgIGNvbnN0IHJpZ2h0ID0gW3gyLCB5MSwgeTIsIGZhbHNlXTtcbiAgICAgIHRoaXMuI3ZlcnRpY2FsRWRnZXMucHVzaChsZWZ0LCByaWdodCk7XG5cbiAgICAgIFV0aWwucmVjdEJvdW5kaW5nQm94KHgxLCB5MSwgeDIsIHkyLCBtaW5NYXgpO1xuICAgIH1cblxuICAgIGNvbnN0IGJib3hXaWR0aCA9IG1pbk1heFsyXSAtIG1pbk1heFswXSArIDIgKiBpbm5lck1hcmdpbjtcbiAgICBjb25zdCBiYm94SGVpZ2h0ID0gbWluTWF4WzNdIC0gbWluTWF4WzFdICsgMiAqIGlubmVyTWFyZ2luO1xuICAgIGNvbnN0IHNoaWZ0ZWRNaW5YID0gbWluTWF4WzBdIC0gaW5uZXJNYXJnaW47XG4gICAgY29uc3Qgc2hpZnRlZE1pblkgPSBtaW5NYXhbMV0gLSBpbm5lck1hcmdpbjtcbiAgICBjb25zdCBsYXN0RWRnZSA9IHRoaXMuI3ZlcnRpY2FsRWRnZXMuYXQoaXNMVFIgPyAtMSA6IC0yKTtcbiAgICBjb25zdCBsYXN0UG9pbnQgPSBbbGFzdEVkZ2VbMF0sIGxhc3RFZGdlWzJdXTtcblxuICAgIC8vIENvbnZlcnQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBlZGdlcyBpbnRvIGJveCBjb29yZGluYXRlcy5cbiAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgdGhpcy4jdmVydGljYWxFZGdlcykge1xuICAgICAgY29uc3QgW3gsIHkxLCB5Ml0gPSBlZGdlO1xuICAgICAgZWRnZVswXSA9ICh4IC0gc2hpZnRlZE1pblgpIC8gYmJveFdpZHRoO1xuICAgICAgZWRnZVsxXSA9ICh5MSAtIHNoaWZ0ZWRNaW5ZKSAvIGJib3hIZWlnaHQ7XG4gICAgICBlZGdlWzJdID0gKHkyIC0gc2hpZnRlZE1pblkpIC8gYmJveEhlaWdodDtcbiAgICB9XG5cbiAgICB0aGlzLiNib3ggPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgIHNoaWZ0ZWRNaW5YLFxuICAgICAgc2hpZnRlZE1pblksXG4gICAgICBiYm94V2lkdGgsXG4gICAgICBiYm94SGVpZ2h0LFxuICAgIF0pO1xuICAgIHRoaXMuI2xhc3RQb2ludCA9IGxhc3RQb2ludDtcbiAgfVxuXG4gIGdldE91dGxpbmVzKCkge1xuICAgIC8vIFdlIGJlZ2luIHRvIHNvcnQgbGV4aWNvZ3JhcGhpY2FsbHkgdGhlIHZlcnRpY2FsIGVkZ2VzIGJ5IHRoZWlyIGFic2Npc3NhLFxuICAgIC8vIGFuZCB0aGVuIGJ5IHRoZWlyIG9yZGluYXRlLlxuICAgIHRoaXMuI3ZlcnRpY2FsRWRnZXMuc29ydChcbiAgICAgIChhLCBiKSA9PiBhWzBdIC0gYlswXSB8fCBhWzFdIC0gYlsxXSB8fCBhWzJdIC0gYlsyXVxuICAgICk7XG5cbiAgICAvLyBXZSdyZSBub3cgdXNpbmcgYSBzd2VlcCBsaW5lIGFsZ29yaXRobSB0byBmaW5kIHRoZSBvdXRsaW5lcy5cbiAgICAvLyBXZSBzdGFydCB3aXRoIHRoZSBsZWZ0bW9zdCB2ZXJ0aWNhbCBlZGdlLCBhbmQgd2UncmUgZ29pbmcgdG8gaXRlcmF0ZVxuICAgIC8vIG92ZXIgYWxsIHRoZSB2ZXJ0aWNhbCBlZGdlcyBmcm9tIGxlZnQgdG8gcmlnaHQuXG4gICAgLy8gRWFjaCB0aW1lIHdlIGVuY291bnRlciBhIGxlZnQgZWRnZSwgd2UncmUgZ29pbmcgdG8gaW5zZXJ0IHRoZSBpbnRlcnZhbFxuICAgIC8vIFt5MSwgeTJdIGluIHRoZSBzZXQgb2YgaW50ZXJ2YWxzLlxuICAgIC8vIFRoaXMgc2V0IG9mIGludGVydmFscyBpcyB1c2VkIHRvIGJyZWFrIHRoZSB2ZXJ0aWNhbCBlZGdlcyBpbnRvIGNodW5rczpcbiAgICAvLyB3ZSBvbmx5IHRha2UgdGhlIHBhcnQgb2YgdGhlIHZlcnRpY2FsIGVkZ2UgdGhhdCBpc24ndCBpbiB0aGUgdW5pb24gb2ZcbiAgICAvLyB0aGUgaW50ZXJ2YWxzLlxuICAgIGNvbnN0IG91dGxpbmVWZXJ0aWNhbEVkZ2VzID0gW107XG4gICAgZm9yIChjb25zdCBlZGdlIG9mIHRoaXMuI3ZlcnRpY2FsRWRnZXMpIHtcbiAgICAgIGlmIChlZGdlWzNdKSB7XG4gICAgICAgIC8vIExlZnQgZWRnZS5cbiAgICAgICAgb3V0bGluZVZlcnRpY2FsRWRnZXMucHVzaCguLi50aGlzLiNicmVha0VkZ2UoZWRnZSkpO1xuICAgICAgICB0aGlzLiNpbnNlcnQoZWRnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSaWdodCBlZGdlLlxuICAgICAgICB0aGlzLiNyZW1vdmUoZWRnZSk7XG4gICAgICAgIG91dGxpbmVWZXJ0aWNhbEVkZ2VzLnB1c2goLi4udGhpcy4jYnJlYWtFZGdlKGVkZ2UpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuI2dldE91dGxpbmVzKG91dGxpbmVWZXJ0aWNhbEVkZ2VzKTtcbiAgfVxuXG4gICNnZXRPdXRsaW5lcyhvdXRsaW5lVmVydGljYWxFZGdlcykge1xuICAgIGNvbnN0IGVkZ2VzID0gW107XG4gICAgY29uc3QgYWxsRWRnZXMgPSBuZXcgU2V0KCk7XG5cbiAgICBmb3IgKGNvbnN0IGVkZ2Ugb2Ygb3V0bGluZVZlcnRpY2FsRWRnZXMpIHtcbiAgICAgIGNvbnN0IFt4LCB5MSwgeTJdID0gZWRnZTtcbiAgICAgIGVkZ2VzLnB1c2goW3gsIHkxLCBlZGdlXSwgW3gsIHkyLCBlZGdlXSk7XG4gICAgfVxuXG4gICAgLy8gV2Ugc29ydCBsZXhpY29ncmFwaGljYWxseSB0aGUgdmVydGljZXMgb2YgZWFjaCBlZGdlIGJ5IHRoZWlyIG9yZGluYXRlIGFuZFxuICAgIC8vIGJ5IHRoZWlyIGFic2Npc3NhLlxuICAgIC8vIEV2ZXJ5IHBhaXIgKHZfMmksIHZfezJpICsgMX0pIG9mIHZlcnRpY2VzIGRlZmluZXMgYSBob3Jpem9udGFsIGVkZ2UuXG4gICAgLy8gU28gZm9yIGV2ZXJ5IHZlcnRpY2FsIGVkZ2UsIHdlJ3JlIGdvaW5nIHRvIGFkZCB0aGUgdHdvIHZlcnRpY2FsIGVkZ2VzXG4gICAgLy8gd2hpY2ggYXJlIGNvbm5lY3RlZCB0byBpdCB0aHJvdWdoIGEgaG9yaXpvbnRhbCBlZGdlLlxuICAgIGVkZ2VzLnNvcnQoKGEsIGIpID0+IGFbMV0gLSBiWzFdIHx8IGFbMF0gLSBiWzBdKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBlZGdlcy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICBjb25zdCBlZGdlMSA9IGVkZ2VzW2ldWzJdO1xuICAgICAgY29uc3QgZWRnZTIgPSBlZGdlc1tpICsgMV1bMl07XG4gICAgICBlZGdlMS5wdXNoKGVkZ2UyKTtcbiAgICAgIGVkZ2UyLnB1c2goZWRnZTEpO1xuICAgICAgYWxsRWRnZXMuYWRkKGVkZ2UxKTtcbiAgICAgIGFsbEVkZ2VzLmFkZChlZGdlMik7XG4gICAgfVxuICAgIGNvbnN0IG91dGxpbmVzID0gW107XG4gICAgbGV0IG91dGxpbmU7XG5cbiAgICB3aGlsZSAoYWxsRWRnZXMuc2l6ZSA+IDApIHtcbiAgICAgIGNvbnN0IGVkZ2UgPSBhbGxFZGdlcy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICBsZXQgW3gsIHkxLCB5MiwgZWRnZTEsIGVkZ2UyXSA9IGVkZ2U7XG4gICAgICBhbGxFZGdlcy5kZWxldGUoZWRnZSk7XG4gICAgICBsZXQgbGFzdFBvaW50WCA9IHg7XG4gICAgICBsZXQgbGFzdFBvaW50WSA9IHkxO1xuXG4gICAgICBvdXRsaW5lID0gW3gsIHkyXTtcbiAgICAgIG91dGxpbmVzLnB1c2gob3V0bGluZSk7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBpZiAoYWxsRWRnZXMuaGFzKGVkZ2UxKSkge1xuICAgICAgICAgIGUgPSBlZGdlMTtcbiAgICAgICAgfSBlbHNlIGlmIChhbGxFZGdlcy5oYXMoZWRnZTIpKSB7XG4gICAgICAgICAgZSA9IGVkZ2UyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgYWxsRWRnZXMuZGVsZXRlKGUpO1xuICAgICAgICBbeCwgeTEsIHkyLCBlZGdlMSwgZWRnZTJdID0gZTtcblxuICAgICAgICBpZiAobGFzdFBvaW50WCAhPT0geCkge1xuICAgICAgICAgIG91dGxpbmUucHVzaChsYXN0UG9pbnRYLCBsYXN0UG9pbnRZLCB4LCBsYXN0UG9pbnRZID09PSB5MSA/IHkxIDogeTIpO1xuICAgICAgICAgIGxhc3RQb2ludFggPSB4O1xuICAgICAgICB9XG4gICAgICAgIGxhc3RQb2ludFkgPSBsYXN0UG9pbnRZID09PSB5MSA/IHkyIDogeTE7XG4gICAgICB9XG4gICAgICBvdXRsaW5lLnB1c2gobGFzdFBvaW50WCwgbGFzdFBvaW50WSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSGlnaGxpZ2h0T3V0bGluZShvdXRsaW5lcywgdGhpcy4jYm94LCB0aGlzLiNsYXN0UG9pbnQpO1xuICB9XG5cbiAgI2JpbmFyeVNlYXJjaCh5KSB7XG4gICAgY29uc3QgYXJyYXkgPSB0aGlzLiNpbnRlcnZhbHM7XG4gICAgbGV0IHN0YXJ0ID0gMDtcbiAgICBsZXQgZW5kID0gYXJyYXkubGVuZ3RoIC0gMTtcblxuICAgIHdoaWxlIChzdGFydCA8PSBlbmQpIHtcbiAgICAgIGNvbnN0IG1pZGRsZSA9IChzdGFydCArIGVuZCkgPj4gMTtcbiAgICAgIGNvbnN0IHkxID0gYXJyYXlbbWlkZGxlXVswXTtcbiAgICAgIGlmICh5MSA9PT0geSkge1xuICAgICAgICByZXR1cm4gbWlkZGxlO1xuICAgICAgfVxuICAgICAgaWYgKHkxIDwgeSkge1xuICAgICAgICBzdGFydCA9IG1pZGRsZSArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmQgPSBtaWRkbGUgLSAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZW5kICsgMTtcbiAgfVxuXG4gICNpbnNlcnQoWywgeTEsIHkyXSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy4jYmluYXJ5U2VhcmNoKHkxKTtcbiAgICB0aGlzLiNpbnRlcnZhbHMuc3BsaWNlKGluZGV4LCAwLCBbeTEsIHkyXSk7XG4gIH1cblxuICAjcmVtb3ZlKFssIHkxLCB5Ml0pIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuI2JpbmFyeVNlYXJjaCh5MSk7XG4gICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgdGhpcy4jaW50ZXJ2YWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzLiNpbnRlcnZhbHNbaV07XG4gICAgICBpZiAoc3RhcnQgIT09IHkxKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0ID09PSB5MSAmJiBlbmQgPT09IHkyKSB7XG4gICAgICAgIHRoaXMuI2ludGVydmFscy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IGluZGV4IC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IHRoaXMuI2ludGVydmFsc1tpXTtcbiAgICAgIGlmIChzdGFydCAhPT0geTEpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnQgPT09IHkxICYmIGVuZCA9PT0geTIpIHtcbiAgICAgICAgdGhpcy4jaW50ZXJ2YWxzLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICNicmVha0VkZ2UoZWRnZSkge1xuICAgIGNvbnN0IFt4LCB5MSwgeTJdID0gZWRnZTtcbiAgICBjb25zdCByZXN1bHRzID0gW1t4LCB5MSwgeTJdXTtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuI2JpbmFyeVNlYXJjaCh5Mik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleDsgaSsrKSB7XG4gICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzLiNpbnRlcnZhbHNbaV07XG4gICAgICBmb3IgKGxldCBqID0gMCwgamogPSByZXN1bHRzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgY29uc3QgWywgeTMsIHk0XSA9IHJlc3VsdHNbal07XG4gICAgICAgIGlmIChlbmQgPD0geTMgfHwgeTQgPD0gc3RhcnQpIHtcbiAgICAgICAgICAvLyBUaGVyZSBpcyBubyBpbnRlcnNlY3Rpb24gYmV0d2VlbiB0aGUgaW50ZXJ2YWwgYW5kIHRoZSBlZGdlLCBoZW5jZVxuICAgICAgICAgIC8vIHdlIGtlZXAgaXQgYXMgaXMuXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHkzID49IHN0YXJ0KSB7XG4gICAgICAgICAgaWYgKHk0ID4gZW5kKSB7XG4gICAgICAgICAgICByZXN1bHRzW2pdWzFdID0gZW5kO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoamogPT09IDEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlIGVkZ2UgaXMgaW5jbHVkZWQgaW4gdGhlIGludGVydmFsLCBoZW5jZSB3ZSByZW1vdmUgaXQuXG4gICAgICAgICAgICByZXN1bHRzLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgIGpqLS07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHNbal1bMl0gPSBzdGFydDtcbiAgICAgICAgaWYgKHk0ID4gZW5kKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKFt4LCBlbmQsIHk0XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cbn1cblxuY2xhc3MgSGlnaGxpZ2h0T3V0bGluZSBleHRlbmRzIE91dGxpbmUge1xuICAjYm94O1xuXG4gICNvdXRsaW5lcztcblxuICBjb25zdHJ1Y3RvcihvdXRsaW5lcywgYm94LCBsYXN0UG9pbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuI291dGxpbmVzID0gb3V0bGluZXM7XG4gICAgdGhpcy4jYm94ID0gYm94O1xuICAgIHRoaXMubGFzdFBvaW50ID0gbGFzdFBvaW50O1xuICB9XG5cbiAgdG9TVkdQYXRoKCkge1xuICAgIGNvbnN0IGJ1ZmZlciA9IFtdO1xuICAgIGZvciAoY29uc3QgcG9seWdvbiBvZiB0aGlzLiNvdXRsaW5lcykge1xuICAgICAgbGV0IFtwcmV2WCwgcHJldlldID0gcG9seWdvbjtcbiAgICAgIGJ1ZmZlci5wdXNoKGBNJHtwcmV2WH0gJHtwcmV2WX1gKTtcbiAgICAgIGZvciAobGV0IGkgPSAyOyBpIDwgcG9seWdvbi5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICBjb25zdCB4ID0gcG9seWdvbltpXTtcbiAgICAgICAgY29uc3QgeSA9IHBvbHlnb25baSArIDFdO1xuICAgICAgICBpZiAoeCA9PT0gcHJldlgpIHtcbiAgICAgICAgICBidWZmZXIucHVzaChgViR7eX1gKTtcbiAgICAgICAgICBwcmV2WSA9IHk7XG4gICAgICAgIH0gZWxzZSBpZiAoeSA9PT0gcHJldlkpIHtcbiAgICAgICAgICBidWZmZXIucHVzaChgSCR7eH1gKTtcbiAgICAgICAgICBwcmV2WCA9IHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJ1ZmZlci5wdXNoKFwiWlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1ZmZlci5qb2luKFwiIFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXJpYWxpemUgdGhlIG91dGxpbmVzIGludG8gdGhlIFBERiBwYWdlIGNvb3JkaW5hdGUgc3lzdGVtLlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IF9iYm94IC0gdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgYW5ub3RhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IF9yb3RhdGlvbiAtIHRoZSByb3RhdGlvbiBvZiB0aGUgYW5ub3RhdGlvbi5cbiAgICogQHJldHVybnMge0FycmF5PEFycmF5PG51bWJlcj4+fVxuICAgKi9cbiAgc2VyaWFsaXplKFtibFgsIGJsWSwgdHJYLCB0clldLCBfcm90YXRpb24pIHtcbiAgICBjb25zdCBvdXRsaW5lcyA9IFtdO1xuICAgIGNvbnN0IHdpZHRoID0gdHJYIC0gYmxYO1xuICAgIGNvbnN0IGhlaWdodCA9IHRyWSAtIGJsWTtcbiAgICBmb3IgKGNvbnN0IG91dGxpbmUgb2YgdGhpcy4jb3V0bGluZXMpIHtcbiAgICAgIGNvbnN0IHBvaW50cyA9IG5ldyBBcnJheShvdXRsaW5lLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dGxpbmUubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgcG9pbnRzW2ldID0gYmxYICsgb3V0bGluZVtpXSAqIHdpZHRoO1xuICAgICAgICBwb2ludHNbaSArIDFdID0gdHJZIC0gb3V0bGluZVtpICsgMV0gKiBoZWlnaHQ7XG4gICAgICB9XG4gICAgICBvdXRsaW5lcy5wdXNoKHBvaW50cyk7XG4gICAgfVxuICAgIHJldHVybiBvdXRsaW5lcztcbiAgfVxuXG4gIGdldCBib3goKSB7XG4gICAgcmV0dXJuIHRoaXMuI2JveDtcbiAgfVxuXG4gIGdldCBjbGFzc05hbWVzRm9yT3V0bGluaW5nKCkge1xuICAgIHJldHVybiBbXCJoaWdobGlnaHRPdXRsaW5lXCJdO1xuICB9XG59XG5cbmNsYXNzIEZyZWVIaWdobGlnaHRPdXRsaW5lciBleHRlbmRzIEZyZWVEcmF3T3V0bGluZXIge1xuICBuZXdGcmVlRHJhd091dGxpbmUob3V0bGluZSwgcG9pbnRzLCBib3gsIHNjYWxlRmFjdG9yLCBpbm5lck1hcmdpbiwgaXNMVFIpIHtcbiAgICByZXR1cm4gbmV3IEZyZWVIaWdobGlnaHRPdXRsaW5lKFxuICAgICAgb3V0bGluZSxcbiAgICAgIHBvaW50cyxcbiAgICAgIGJveCxcbiAgICAgIHNjYWxlRmFjdG9yLFxuICAgICAgaW5uZXJNYXJnaW4sXG4gICAgICBpc0xUUlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgRnJlZUhpZ2hsaWdodE91dGxpbmUgZXh0ZW5kcyBGcmVlRHJhd091dGxpbmUge1xuICBuZXdPdXRsaW5lcihwb2ludCwgYm94LCBzY2FsZUZhY3RvciwgdGhpY2tuZXNzLCBpc0xUUiwgaW5uZXJNYXJnaW4gPSAwKSB7XG4gICAgcmV0dXJuIG5ldyBGcmVlSGlnaGxpZ2h0T3V0bGluZXIoXG4gICAgICBwb2ludCxcbiAgICAgIGJveCxcbiAgICAgIHNjYWxlRmFjdG9yLFxuICAgICAgdGhpY2tuZXNzLFxuICAgICAgaXNMVFIsXG4gICAgICBpbm5lck1hcmdpblxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHsgRnJlZUhpZ2hsaWdodE91dGxpbmVyLCBIaWdobGlnaHRPdXRsaW5lciB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIzIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZSwgc2hhZG93IH0gZnJvbSBcIi4uLy4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQgeyBLZXlib2FyZE1hbmFnZXIgfSBmcm9tIFwiLi90b29scy5qc1wiO1xuaW1wb3J0IHsgbm9Db250ZXh0TWVudSB9IGZyb20gXCIuLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5cbmNsYXNzIENvbG9yUGlja2VyIHtcbiAgI2J1dHRvbiA9IG51bGw7XG5cbiAgI2J1dHRvblN3YXRjaCA9IG51bGw7XG5cbiAgI2RlZmF1bHRDb2xvcjtcblxuICAjZHJvcGRvd24gPSBudWxsO1xuXG4gICNkcm9wZG93bldhc0Zyb21LZXlib2FyZCA9IGZhbHNlO1xuXG4gICNpc01haW5Db2xvclBpY2tlciA9IGZhbHNlO1xuXG4gICNlZGl0b3IgPSBudWxsO1xuXG4gICNldmVudEJ1cztcblxuICAjb3BlbkRyb3Bkb3duQUMgPSBudWxsO1xuXG4gICN1aU1hbmFnZXIgPSBudWxsO1xuXG4gICN0eXBlO1xuXG4gIHN0YXRpYyAjbDEwbkNvbG9yID0gbnVsbDtcblxuICBzdGF0aWMgZ2V0IF9rZXlib2FyZE1hbmFnZXIoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyhcbiAgICAgIHRoaXMsXG4gICAgICBcIl9rZXlib2FyZE1hbmFnZXJcIixcbiAgICAgIG5ldyBLZXlib2FyZE1hbmFnZXIoW1xuICAgICAgICBbXG4gICAgICAgICAgW1wiRXNjYXBlXCIsIFwibWFjK0VzY2FwZVwiXSxcbiAgICAgICAgICBDb2xvclBpY2tlci5wcm90b3R5cGUuX2hpZGVEcm9wZG93bkZyb21LZXlib2FyZCxcbiAgICAgICAgXSxcbiAgICAgICAgW1tcIiBcIiwgXCJtYWMrIFwiXSwgQ29sb3JQaWNrZXIucHJvdG90eXBlLl9jb2xvclNlbGVjdEZyb21LZXlib2FyZF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXCJBcnJvd0Rvd25cIiwgXCJBcnJvd1JpZ2h0XCIsIFwibWFjK0Fycm93RG93blwiLCBcIm1hYytBcnJvd1JpZ2h0XCJdLFxuICAgICAgICAgIENvbG9yUGlja2VyLnByb3RvdHlwZS5fbW92ZVRvTmV4dCxcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcIkFycm93VXBcIiwgXCJBcnJvd0xlZnRcIiwgXCJtYWMrQXJyb3dVcFwiLCBcIm1hYytBcnJvd0xlZnRcIl0sXG4gICAgICAgICAgQ29sb3JQaWNrZXIucHJvdG90eXBlLl9tb3ZlVG9QcmV2aW91cyxcbiAgICAgICAgXSxcbiAgICAgICAgW1tcIkhvbWVcIiwgXCJtYWMrSG9tZVwiXSwgQ29sb3JQaWNrZXIucHJvdG90eXBlLl9tb3ZlVG9CZWdpbm5pbmddLFxuICAgICAgICBbW1wiRW5kXCIsIFwibWFjK0VuZFwiXSwgQ29sb3JQaWNrZXIucHJvdG90eXBlLl9tb3ZlVG9FbmRdLFxuICAgICAgXSlcbiAgICApO1xuICB9XG5cbiAgY29uc3RydWN0b3IoeyBlZGl0b3IgPSBudWxsLCB1aU1hbmFnZXIgPSBudWxsIH0pIHtcbiAgICBpZiAoZWRpdG9yKSB7XG4gICAgICB0aGlzLiNpc01haW5Db2xvclBpY2tlciA9IGZhbHNlO1xuICAgICAgdGhpcy4jdHlwZSA9IEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkhJR0hMSUdIVF9DT0xPUjtcbiAgICAgIHRoaXMuI2VkaXRvciA9IGVkaXRvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jaXNNYWluQ29sb3JQaWNrZXIgPSB0cnVlO1xuICAgICAgdGhpcy4jdHlwZSA9IEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkhJR0hMSUdIVF9ERUZBVUxUX0NPTE9SO1xuICAgIH1cbiAgICB0aGlzLiN1aU1hbmFnZXIgPSBlZGl0b3I/Ll91aU1hbmFnZXIgfHwgdWlNYW5hZ2VyO1xuICAgIHRoaXMuI2V2ZW50QnVzID0gdGhpcy4jdWlNYW5hZ2VyLl9ldmVudEJ1cztcbiAgICB0aGlzLiNkZWZhdWx0Q29sb3IgPVxuICAgICAgZWRpdG9yPy5jb2xvciB8fFxuICAgICAgdGhpcy4jdWlNYW5hZ2VyPy5oaWdobGlnaHRDb2xvcnMudmFsdWVzKCkubmV4dCgpLnZhbHVlIHx8XG4gICAgICBcIiNGRkZGOThcIjtcblxuICAgIENvbG9yUGlja2VyLiNsMTBuQ29sb3IgfHw9IE9iamVjdC5mcmVlemUoe1xuICAgICAgYmx1ZTogXCJwZGZqcy1lZGl0b3ItY29sb3JwaWNrZXItYmx1ZVwiLFxuICAgICAgZ3JlZW46IFwicGRmanMtZWRpdG9yLWNvbG9ycGlja2VyLWdyZWVuXCIsXG4gICAgICBwaW5rOiBcInBkZmpzLWVkaXRvci1jb2xvcnBpY2tlci1waW5rXCIsXG4gICAgICByZWQ6IFwicGRmanMtZWRpdG9yLWNvbG9ycGlja2VyLXJlZFwiLFxuICAgICAgeWVsbG93OiBcInBkZmpzLWVkaXRvci1jb2xvcnBpY2tlci15ZWxsb3dcIixcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckJ1dHRvbigpIHtcbiAgICBjb25zdCBidXR0b24gPSAodGhpcy4jYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSk7XG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9IFwiY29sb3JQaWNrZXJcIjtcbiAgICBidXR0b24udGFiSW5kZXggPSBcIjBcIjtcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1sMTBuLWlkXCIsIFwicGRmanMtZWRpdG9yLWNvbG9ycGlja2VyLWJ1dHRvblwiKTtcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1oYXNwb3B1cFwiLCB0cnVlKTtcbiAgICBjb25zdCBzaWduYWwgPSB0aGlzLiN1aU1hbmFnZXIuX3NpZ25hbDtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuI29wZW5Ecm9wZG93bi5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4ja2V5RG93bi5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcbiAgICBjb25zdCBzd2F0Y2ggPSAodGhpcy4jYnV0dG9uU3dhdGNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIikpO1xuICAgIHN3YXRjaC5jbGFzc05hbWUgPSBcInN3YXRjaFwiO1xuICAgIHN3YXRjaC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCB0cnVlKTtcbiAgICBzd2F0Y2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy4jZGVmYXVsdENvbG9yO1xuICAgIGJ1dHRvbi5hcHBlbmQoc3dhdGNoKTtcbiAgICByZXR1cm4gYnV0dG9uO1xuICB9XG5cbiAgcmVuZGVyTWFpbkRyb3Bkb3duKCkge1xuICAgIGNvbnN0IGRyb3Bkb3duID0gKHRoaXMuI2Ryb3Bkb3duID0gdGhpcy4jZ2V0RHJvcGRvd25Sb290KCkpO1xuICAgIGRyb3Bkb3duLnNldEF0dHJpYnV0ZShcImFyaWEtb3JpZW50YXRpb25cIiwgXCJob3Jpem9udGFsXCIpO1xuICAgIGRyb3Bkb3duLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxsZWRieVwiLCBcImhpZ2hsaWdodENvbG9yUGlja2VyTGFiZWxcIik7XG5cbiAgICByZXR1cm4gZHJvcGRvd247XG4gIH1cblxuICAjZ2V0RHJvcGRvd25Sb290KCkge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29uc3Qgc2lnbmFsID0gdGhpcy4jdWlNYW5hZ2VyLl9zaWduYWw7XG4gICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBub0NvbnRleHRNZW51LCB7IHNpZ25hbCB9KTtcbiAgICBkaXYuY2xhc3NOYW1lID0gXCJkcm9wZG93blwiO1xuICAgIGRpdi5yb2xlID0gXCJsaXN0Ym94XCI7XG4gICAgZGl2LnNldEF0dHJpYnV0ZShcImFyaWEtbXVsdGlzZWxlY3RhYmxlXCIsIGZhbHNlKTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKFwiYXJpYS1vcmllbnRhdGlvblwiLCBcInZlcnRpY2FsXCIpO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWwxMG4taWRcIiwgXCJwZGZqcy1lZGl0b3ItY29sb3JwaWNrZXItZHJvcGRvd25cIik7XG4gICAgZm9yIChjb25zdCBbbmFtZSwgY29sb3JdIG9mIHRoaXMuI3VpTWFuYWdlci5oaWdobGlnaHRDb2xvcnMpIHtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBidXR0b24udGFiSW5kZXggPSBcIjBcIjtcbiAgICAgIGJ1dHRvbi5yb2xlID0gXCJvcHRpb25cIjtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIsIGNvbG9yKTtcbiAgICAgIGJ1dHRvbi50aXRsZSA9IG5hbWU7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1sMTBuLWlkXCIsIENvbG9yUGlja2VyLiNsMTBuQ29sb3JbbmFtZV0pO1xuICAgICAgY29uc3Qgc3dhdGNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBidXR0b24uYXBwZW5kKHN3YXRjaCk7XG4gICAgICBzd2F0Y2guY2xhc3NOYW1lID0gXCJzd2F0Y2hcIjtcbiAgICAgIHN3YXRjaC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsIGNvbG9yID09PSB0aGlzLiNkZWZhdWx0Q29sb3IpO1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLiNjb2xvclNlbGVjdC5iaW5kKHRoaXMsIGNvbG9yKSwge1xuICAgICAgICBzaWduYWwsXG4gICAgICB9KTtcbiAgICAgIGRpdi5hcHBlbmQoYnV0dG9uKTtcbiAgICB9XG5cbiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4ja2V5RG93bi5iaW5kKHRoaXMpLCB7IHNpZ25hbCB9KTtcblxuICAgIHJldHVybiBkaXY7XG4gIH1cblxuICAjY29sb3JTZWxlY3QoY29sb3IsIGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy4jZXZlbnRCdXMuZGlzcGF0Y2goXCJzd2l0Y2hhbm5vdGF0aW9uZWRpdG9ycGFyYW1zXCIsIHtcbiAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgIHR5cGU6IHRoaXMuI3R5cGUsXG4gICAgICB2YWx1ZTogY29sb3IsXG4gICAgfSk7XG4gIH1cblxuICBfY29sb3JTZWxlY3RGcm9tS2V5Ym9hcmQoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLiNidXR0b24pIHtcbiAgICAgIHRoaXMuI29wZW5Ecm9wZG93bihldmVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbG9yID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIik7XG4gICAgaWYgKCFjb2xvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNjb2xvclNlbGVjdChjb2xvciwgZXZlbnQpO1xuICB9XG5cbiAgX21vdmVUb05leHQoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuI2lzRHJvcGRvd25WaXNpYmxlKSB7XG4gICAgICB0aGlzLiNvcGVuRHJvcGRvd24oZXZlbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLiNidXR0b24pIHtcbiAgICAgIHRoaXMuI2Ryb3Bkb3duLmZpcnN0Q2hpbGQ/LmZvY3VzKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV2ZW50LnRhcmdldC5uZXh0U2libGluZz8uZm9jdXMoKTtcbiAgfVxuXG4gIF9tb3ZlVG9QcmV2aW91cyhldmVudCkge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldCA9PT0gdGhpcy4jZHJvcGRvd24/LmZpcnN0Q2hpbGQgfHxcbiAgICAgIGV2ZW50LnRhcmdldCA9PT0gdGhpcy4jYnV0dG9uXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy4jaXNEcm9wZG93blZpc2libGUpIHtcbiAgICAgICAgdGhpcy5faGlkZURyb3Bkb3duRnJvbUtleWJvYXJkKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy4jaXNEcm9wZG93blZpc2libGUpIHtcbiAgICAgIHRoaXMuI29wZW5Ecm9wZG93bihldmVudCk7XG4gICAgfVxuICAgIGV2ZW50LnRhcmdldC5wcmV2aW91c1NpYmxpbmc/LmZvY3VzKCk7XG4gIH1cblxuICBfbW92ZVRvQmVnaW5uaW5nKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLiNpc0Ryb3Bkb3duVmlzaWJsZSkge1xuICAgICAgdGhpcy4jb3BlbkRyb3Bkb3duKGV2ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jZHJvcGRvd24uZmlyc3RDaGlsZD8uZm9jdXMoKTtcbiAgfVxuXG4gIF9tb3ZlVG9FbmQoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuI2lzRHJvcGRvd25WaXNpYmxlKSB7XG4gICAgICB0aGlzLiNvcGVuRHJvcGRvd24oZXZlbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNkcm9wZG93bi5sYXN0Q2hpbGQ/LmZvY3VzKCk7XG4gIH1cblxuICAja2V5RG93bihldmVudCkge1xuICAgIENvbG9yUGlja2VyLl9rZXlib2FyZE1hbmFnZXIuZXhlYyh0aGlzLCBldmVudCk7XG4gIH1cblxuICAjb3BlbkRyb3Bkb3duKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuI2lzRHJvcGRvd25WaXNpYmxlKSB7XG4gICAgICB0aGlzLmhpZGVEcm9wZG93bigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNkcm9wZG93bldhc0Zyb21LZXlib2FyZCA9IGV2ZW50LmRldGFpbCA9PT0gMDtcblxuICAgIGlmICghdGhpcy4jb3BlbkRyb3Bkb3duQUMpIHtcbiAgICAgIHRoaXMuI29wZW5Ecm9wZG93bkFDID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuI3BvaW50ZXJEb3duLmJpbmQodGhpcyksIHtcbiAgICAgICAgc2lnbmFsOiB0aGlzLiN1aU1hbmFnZXIuY29tYmluZWRTaWduYWwodGhpcy4jb3BlbkRyb3Bkb3duQUMpLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLiNkcm9wZG93bikge1xuICAgICAgdGhpcy4jZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgcm9vdCA9ICh0aGlzLiNkcm9wZG93biA9IHRoaXMuI2dldERyb3Bkb3duUm9vdCgpKTtcbiAgICB0aGlzLiNidXR0b24uYXBwZW5kKHJvb3QpO1xuICB9XG5cbiAgI3BvaW50ZXJEb3duKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuI2Ryb3Bkb3duPy5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gIH1cblxuICBoaWRlRHJvcGRvd24oKSB7XG4gICAgdGhpcy4jZHJvcGRvd24/LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgdGhpcy4jb3BlbkRyb3Bkb3duQUM/LmFib3J0KCk7XG4gICAgdGhpcy4jb3BlbkRyb3Bkb3duQUMgPSBudWxsO1xuICB9XG5cbiAgZ2V0ICNpc0Ryb3Bkb3duVmlzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jZHJvcGRvd24gJiYgIXRoaXMuI2Ryb3Bkb3duLmNsYXNzTGlzdC5jb250YWlucyhcImhpZGRlblwiKTtcbiAgfVxuXG4gIF9oaWRlRHJvcGRvd25Gcm9tS2V5Ym9hcmQoKSB7XG4gICAgaWYgKHRoaXMuI2lzTWFpbkNvbG9yUGlja2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy4jaXNEcm9wZG93blZpc2libGUpIHtcbiAgICAgIC8vIFRoZSB1c2VyIHByZXNzZWQgRXNjYXBlIHdpdGggbm8gZHJvcGRvd24gdmlzaWJsZSwgc28gd2UgbXVzdFxuICAgICAgLy8gdW5zZWxlY3QgaXQuXG4gICAgICB0aGlzLiNlZGl0b3I/LnVuc2VsZWN0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gICAgdGhpcy4jYnV0dG9uLmZvY3VzKHtcbiAgICAgIHByZXZlbnRTY3JvbGw6IHRydWUsXG4gICAgICBmb2N1c1Zpc2libGU6IHRoaXMuI2Ryb3Bkb3duV2FzRnJvbUtleWJvYXJkLFxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQ29sb3IoY29sb3IpIHtcbiAgICBpZiAodGhpcy4jYnV0dG9uU3dhdGNoKSB7XG4gICAgICB0aGlzLiNidXR0b25Td2F0Y2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XG4gICAgfVxuICAgIGlmICghdGhpcy4jZHJvcGRvd24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpID0gdGhpcy4jdWlNYW5hZ2VyLmhpZ2hsaWdodENvbG9ycy52YWx1ZXMoKTtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuI2Ryb3Bkb3duLmNoaWxkcmVuKSB7XG4gICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsIGkubmV4dCgpLnZhbHVlID09PSBjb2xvcik7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiNidXR0b24/LnJlbW92ZSgpO1xuICAgIHRoaXMuI2J1dHRvbiA9IG51bGw7XG4gICAgdGhpcy4jYnV0dG9uU3dhdGNoID0gbnVsbDtcbiAgICB0aGlzLiNkcm9wZG93bj8ucmVtb3ZlKCk7XG4gICAgdGhpcy4jZHJvcGRvd24gPSBudWxsO1xuICB9XG59XG5cbmV4cG9ydCB7IENvbG9yUGlja2VyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLFxuICBBbm5vdGF0aW9uRWRpdG9yVHlwZSxcbiAgc2hhZG93LFxuICBVdGlsLFxufSBmcm9tIFwiLi4vLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7IGJpbmRFdmVudHMsIEtleWJvYXJkTWFuYWdlciB9IGZyb20gXCIuL3Rvb2xzLmpzXCI7XG5pbXBvcnQge1xuICBGcmVlSGlnaGxpZ2h0T3V0bGluZXIsXG4gIEhpZ2hsaWdodE91dGxpbmVyLFxufSBmcm9tIFwiLi9kcmF3ZXJzL2hpZ2hsaWdodC5qc1wiO1xuaW1wb3J0IHtcbiAgSGlnaGxpZ2h0QW5ub3RhdGlvbkVsZW1lbnQsXG4gIElua0Fubm90YXRpb25FbGVtZW50LFxufSBmcm9tIFwiLi4vYW5ub3RhdGlvbl9sYXllci5qc1wiO1xuaW1wb3J0IHsgbm9Db250ZXh0TWVudSwgc3RvcEV2ZW50IH0gZnJvbSBcIi4uL2Rpc3BsYXlfdXRpbHMuanNcIjtcbmltcG9ydCB7IEFubm90YXRpb25FZGl0b3IgfSBmcm9tIFwiLi9lZGl0b3IuanNcIjtcbmltcG9ydCB7IENvbG9yUGlja2VyIH0gZnJvbSBcIi4vY29sb3JfcGlja2VyLmpzXCI7XG5cbi8qKlxuICogQmFzaWMgZHJhdyBlZGl0b3IgaW4gb3JkZXIgdG8gZ2VuZXJhdGUgYW4gSGlnaGxpZ2h0IGFubm90YXRpb24uXG4gKi9cbmNsYXNzIEhpZ2hsaWdodEVkaXRvciBleHRlbmRzIEFubm90YXRpb25FZGl0b3Ige1xuICAjYW5jaG9yTm9kZSA9IG51bGw7XG5cbiAgI2FuY2hvck9mZnNldCA9IDA7XG5cbiAgI2JveGVzO1xuXG4gICNjbGlwUGF0aElkID0gbnVsbDtcblxuICAjY29sb3JQaWNrZXIgPSBudWxsO1xuXG4gICNmb2N1c091dGxpbmVzID0gbnVsbDtcblxuICAjZm9jdXNOb2RlID0gbnVsbDtcblxuICAjZm9jdXNPZmZzZXQgPSAwO1xuXG4gICNoaWdobGlnaHREaXYgPSBudWxsO1xuXG4gICNoaWdobGlnaHRPdXRsaW5lcyA9IG51bGw7XG5cbiAgI2lkID0gbnVsbDtcblxuICAjaXNGcmVlSGlnaGxpZ2h0ID0gZmFsc2U7XG5cbiAgI2xhc3RQb2ludCA9IG51bGw7XG5cbiAgI29wYWNpdHk7XG5cbiAgI291dGxpbmVJZCA9IG51bGw7XG5cbiAgI3RleHQgPSBcIlwiO1xuXG4gICN0aGlja25lc3M7XG5cbiAgI21ldGhvZE9mQ3JlYXRpb24gPSBcIlwiO1xuXG4gIHN0YXRpYyBfZGVmYXVsdENvbG9yID0gbnVsbDtcblxuICBzdGF0aWMgX2RlZmF1bHRPcGFjaXR5ID0gMTtcblxuICBzdGF0aWMgX2RlZmF1bHRUaGlja25lc3MgPSAxMjtcblxuICBzdGF0aWMgX3R5cGUgPSBcImhpZ2hsaWdodFwiO1xuXG4gIHN0YXRpYyBfZWRpdG9yVHlwZSA9IEFubm90YXRpb25FZGl0b3JUeXBlLkhJR0hMSUdIVDtcblxuICBzdGF0aWMgX2ZyZWVIaWdobGlnaHRJZCA9IC0xO1xuXG4gIHN0YXRpYyBfZnJlZUhpZ2hsaWdodCA9IG51bGw7XG5cbiAgc3RhdGljIF9mcmVlSGlnaGxpZ2h0Q2xpcElkID0gXCJcIjtcblxuICBzdGF0aWMgZ2V0IF9rZXlib2FyZE1hbmFnZXIoKSB7XG4gICAgY29uc3QgcHJvdG8gPSBIaWdobGlnaHRFZGl0b3IucHJvdG90eXBlO1xuICAgIHJldHVybiBzaGFkb3coXG4gICAgICB0aGlzLFxuICAgICAgXCJfa2V5Ym9hcmRNYW5hZ2VyXCIsXG4gICAgICBuZXcgS2V5Ym9hcmRNYW5hZ2VyKFtcbiAgICAgICAgW1tcIkFycm93TGVmdFwiLCBcIm1hYytBcnJvd0xlZnRcIl0sIHByb3RvLl9tb3ZlQ2FyZXQsIHsgYXJnczogWzBdIH1dLFxuICAgICAgICBbW1wiQXJyb3dSaWdodFwiLCBcIm1hYytBcnJvd1JpZ2h0XCJdLCBwcm90by5fbW92ZUNhcmV0LCB7IGFyZ3M6IFsxXSB9XSxcbiAgICAgICAgW1tcIkFycm93VXBcIiwgXCJtYWMrQXJyb3dVcFwiXSwgcHJvdG8uX21vdmVDYXJldCwgeyBhcmdzOiBbMl0gfV0sXG4gICAgICAgIFtbXCJBcnJvd0Rvd25cIiwgXCJtYWMrQXJyb3dEb3duXCJdLCBwcm90by5fbW92ZUNhcmV0LCB7IGFyZ3M6IFszXSB9XSxcbiAgICAgIF0pXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgIHN1cGVyKHsgLi4ucGFyYW1zLCBuYW1lOiBcImhpZ2hsaWdodEVkaXRvclwiIH0pO1xuICAgIHRoaXMuY29sb3IgPSBwYXJhbXMuY29sb3IgfHwgSGlnaGxpZ2h0RWRpdG9yLl9kZWZhdWx0Q29sb3I7XG4gICAgdGhpcy4jdGhpY2tuZXNzID0gcGFyYW1zLnRoaWNrbmVzcyB8fCBIaWdobGlnaHRFZGl0b3IuX2RlZmF1bHRUaGlja25lc3M7XG4gICAgdGhpcy4jb3BhY2l0eSA9IHBhcmFtcy5vcGFjaXR5IHx8IEhpZ2hsaWdodEVkaXRvci5fZGVmYXVsdE9wYWNpdHk7XG4gICAgdGhpcy4jYm94ZXMgPSBwYXJhbXMuYm94ZXMgfHwgbnVsbDtcbiAgICB0aGlzLiNtZXRob2RPZkNyZWF0aW9uID0gcGFyYW1zLm1ldGhvZE9mQ3JlYXRpb24gfHwgXCJcIjtcbiAgICB0aGlzLiN0ZXh0ID0gcGFyYW1zLnRleHQgfHwgXCJcIjtcbiAgICB0aGlzLl9pc0RyYWdnYWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuZGVmYXVsdEwxMG5JZCA9IFwicGRmanMtZWRpdG9yLWhpZ2hsaWdodC1lZGl0b3JcIjtcblxuICAgIGlmIChwYXJhbXMuaGlnaGxpZ2h0SWQgPiAtMSkge1xuICAgICAgdGhpcy4jaXNGcmVlSGlnaGxpZ2h0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuI2NyZWF0ZUZyZWVPdXRsaW5lcyhwYXJhbXMpO1xuICAgICAgdGhpcy4jYWRkVG9EcmF3TGF5ZXIoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuI2JveGVzKSB7XG4gICAgICB0aGlzLiNhbmNob3JOb2RlID0gcGFyYW1zLmFuY2hvck5vZGU7XG4gICAgICB0aGlzLiNhbmNob3JPZmZzZXQgPSBwYXJhbXMuYW5jaG9yT2Zmc2V0O1xuICAgICAgdGhpcy4jZm9jdXNOb2RlID0gcGFyYW1zLmZvY3VzTm9kZTtcbiAgICAgIHRoaXMuI2ZvY3VzT2Zmc2V0ID0gcGFyYW1zLmZvY3VzT2Zmc2V0O1xuICAgICAgdGhpcy4jY3JlYXRlT3V0bGluZXMoKTtcbiAgICAgIHRoaXMuI2FkZFRvRHJhd0xheWVyKCk7XG4gICAgICB0aGlzLnJvdGF0ZSh0aGlzLnJvdGF0aW9uKTtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IHRlbGVtZXRyeUluaXRpYWxEYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhY3Rpb246IFwiYWRkZWRcIixcbiAgICAgIHR5cGU6IHRoaXMuI2lzRnJlZUhpZ2hsaWdodCA/IFwiZnJlZV9oaWdobGlnaHRcIiA6IFwiaGlnaGxpZ2h0XCIsXG4gICAgICBjb2xvcjogdGhpcy5fdWlNYW5hZ2VyLmhpZ2hsaWdodENvbG9yTmFtZXMuZ2V0KHRoaXMuY29sb3IpLFxuICAgICAgdGhpY2tuZXNzOiB0aGlzLiN0aGlja25lc3MsXG4gICAgICBtZXRob2RPZkNyZWF0aW9uOiB0aGlzLiNtZXRob2RPZkNyZWF0aW9uLFxuICAgIH07XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IHRlbGVtZXRyeUZpbmFsRGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJoaWdobGlnaHRcIixcbiAgICAgIGNvbG9yOiB0aGlzLl91aU1hbmFnZXIuaGlnaGxpZ2h0Q29sb3JOYW1lcy5nZXQodGhpcy5jb2xvciksXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBjb21wdXRlVGVsZW1ldHJ5RmluYWxEYXRhKGRhdGEpIHtcbiAgICAvLyBXZSB3YW50IHRvIGtub3cgaG93IG1hbnkgY29sb3JzIGhhdmUgYmVlbiB1c2VkLlxuICAgIHJldHVybiB7IG51bWJlck9mQ29sb3JzOiBkYXRhLmdldChcImNvbG9yXCIpLnNpemUgfTtcbiAgfVxuXG4gICNjcmVhdGVPdXRsaW5lcygpIHtcbiAgICBjb25zdCBvdXRsaW5lciA9IG5ldyBIaWdobGlnaHRPdXRsaW5lcihcbiAgICAgIHRoaXMuI2JveGVzLFxuICAgICAgLyogYm9yZGVyV2lkdGggPSAqLyAwLjAwMVxuICAgICk7XG4gICAgdGhpcy4jaGlnaGxpZ2h0T3V0bGluZXMgPSBvdXRsaW5lci5nZXRPdXRsaW5lcygpO1xuICAgIFt0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHRdID0gdGhpcy4jaGlnaGxpZ2h0T3V0bGluZXMuYm94O1xuXG4gICAgY29uc3Qgb3V0bGluZXJGb3JPdXRsaW5lID0gbmV3IEhpZ2hsaWdodE91dGxpbmVyKFxuICAgICAgdGhpcy4jYm94ZXMsXG4gICAgICAvKiBib3JkZXJXaWR0aCA9ICovIDAuMDAyNSxcbiAgICAgIC8qIGlubmVyTWFyZ2luID0gKi8gMC4wMDEsXG4gICAgICB0aGlzLl91aU1hbmFnZXIuZGlyZWN0aW9uID09PSBcImx0clwiXG4gICAgKTtcbiAgICB0aGlzLiNmb2N1c091dGxpbmVzID0gb3V0bGluZXJGb3JPdXRsaW5lLmdldE91dGxpbmVzKCk7XG5cbiAgICAvLyBUaGUgbGFzdCBwb2ludCBpcyBpbiB0aGUgcGFnZXMgY29vcmRpbmF0ZSBzeXN0ZW0uXG4gICAgY29uc3QgeyBsYXN0UG9pbnQgfSA9IHRoaXMuI2ZvY3VzT3V0bGluZXM7XG4gICAgdGhpcy4jbGFzdFBvaW50ID0gW1xuICAgICAgKGxhc3RQb2ludFswXSAtIHRoaXMueCkgLyB0aGlzLndpZHRoLFxuICAgICAgKGxhc3RQb2ludFsxXSAtIHRoaXMueSkgLyB0aGlzLmhlaWdodCxcbiAgICBdO1xuICB9XG5cbiAgI2NyZWF0ZUZyZWVPdXRsaW5lcyh7IGhpZ2hsaWdodE91dGxpbmVzLCBoaWdobGlnaHRJZCwgY2xpcFBhdGhJZCB9KSB7XG4gICAgdGhpcy4jaGlnaGxpZ2h0T3V0bGluZXMgPSBoaWdobGlnaHRPdXRsaW5lcztcbiAgICBjb25zdCBleHRyYVRoaWNrbmVzcyA9IDEuNTtcbiAgICB0aGlzLiNmb2N1c091dGxpbmVzID0gaGlnaGxpZ2h0T3V0bGluZXMuZ2V0TmV3T3V0bGluZShcbiAgICAgIC8qIFNsaWdodGx5IGJpZ2dlciB0aGFuIHRoZSBoaWdobGlnaHQgaW4gb3JkZXIgdG8gaGF2ZSBhIGxpdHRsZVxuICAgICAgICAgc3BhY2UgYmV0d2VlbiB0aGUgaGlnaGxpZ2h0IGFuZCB0aGUgb3V0bGluZS4gKi9cbiAgICAgIHRoaXMuI3RoaWNrbmVzcyAvIDIgKyBleHRyYVRoaWNrbmVzcyxcbiAgICAgIC8qIGlubmVyTWFyZ2luID0gKi8gMC4wMDI1XG4gICAgKTtcblxuICAgIGlmIChoaWdobGlnaHRJZCA+PSAwKSB7XG4gICAgICB0aGlzLiNpZCA9IGhpZ2hsaWdodElkO1xuICAgICAgdGhpcy4jY2xpcFBhdGhJZCA9IGNsaXBQYXRoSWQ7XG4gICAgICAvLyBXZSBuZWVkIHRvIHJlZHJhdyB0aGUgaGlnaGxpZ2h0IGJlY2F1c2Ugd2UgY2hhbmdlIHRoZSBjb29yZGluYXRlcyB0byBiZVxuICAgICAgLy8gaW4gdGhlIGJveCBjb29yZGluYXRlIHN5c3RlbS5cbiAgICAgIHRoaXMucGFyZW50LmRyYXdMYXllci5maW5hbGl6ZURyYXcoaGlnaGxpZ2h0SWQsIHtcbiAgICAgICAgYmJveDogaGlnaGxpZ2h0T3V0bGluZXMuYm94LFxuICAgICAgICBwYXRoOiB7XG4gICAgICAgICAgZDogaGlnaGxpZ2h0T3V0bGluZXMudG9TVkdQYXRoKCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIHRoaXMuI291dGxpbmVJZCA9IHRoaXMucGFyZW50LmRyYXdMYXllci5kcmF3T3V0bGluZShcbiAgICAgICAge1xuICAgICAgICAgIHJvb3RDbGFzczoge1xuICAgICAgICAgICAgaGlnaGxpZ2h0T3V0bGluZTogdHJ1ZSxcbiAgICAgICAgICAgIGZyZWU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBiYm94OiB0aGlzLiNmb2N1c091dGxpbmVzLmJveCxcbiAgICAgICAgICBwYXRoOiB7XG4gICAgICAgICAgICBkOiB0aGlzLiNmb2N1c091dGxpbmVzLnRvU1ZHUGF0aCgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qIG11c3RSZW1vdmVTZWxmSW50ZXJzZWN0aW9ucyA9ICovIHRydWVcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgY29uc3QgYW5nbGUgPSB0aGlzLnBhcmVudC52aWV3cG9ydC5yb3RhdGlvbjtcbiAgICAgIHRoaXMucGFyZW50LmRyYXdMYXllci51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuI2lkLCB7XG4gICAgICAgIGJib3g6IEhpZ2hsaWdodEVkaXRvci4jcm90YXRlQmJveChcbiAgICAgICAgICB0aGlzLiNoaWdobGlnaHRPdXRsaW5lcy5ib3gsXG4gICAgICAgICAgKGFuZ2xlIC0gdGhpcy5yb3RhdGlvbiArIDM2MCkgJSAzNjBcbiAgICAgICAgKSxcbiAgICAgICAgcGF0aDoge1xuICAgICAgICAgIGQ6IGhpZ2hsaWdodE91dGxpbmVzLnRvU1ZHUGF0aCgpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICB0aGlzLnBhcmVudC5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyh0aGlzLiNvdXRsaW5lSWQsIHtcbiAgICAgICAgYmJveDogSGlnaGxpZ2h0RWRpdG9yLiNyb3RhdGVCYm94KHRoaXMuI2ZvY3VzT3V0bGluZXMuYm94LCBhbmdsZSksXG4gICAgICAgIHBhdGg6IHtcbiAgICAgICAgICBkOiB0aGlzLiNmb2N1c091dGxpbmVzLnRvU1ZHUGF0aCgpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IFt4LCB5LCB3aWR0aCwgaGVpZ2h0XSA9IGhpZ2hsaWdodE91dGxpbmVzLmJveDtcbiAgICBzd2l0Y2ggKHRoaXMucm90YXRpb24pIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDkwOiB7XG4gICAgICAgIGNvbnN0IFtwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdID0gdGhpcy5wYXJlbnREaW1lbnNpb25zO1xuICAgICAgICB0aGlzLnggPSB5O1xuICAgICAgICB0aGlzLnkgPSAxIC0geDtcbiAgICAgICAgdGhpcy53aWR0aCA9ICh3aWR0aCAqIHBhZ2VIZWlnaHQpIC8gcGFnZVdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IChoZWlnaHQgKiBwYWdlV2lkdGgpIC8gcGFnZUhlaWdodDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIDE4MDpcbiAgICAgICAgdGhpcy54ID0gMSAtIHg7XG4gICAgICAgIHRoaXMueSA9IDEgLSB5O1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjcwOiB7XG4gICAgICAgIGNvbnN0IFtwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdID0gdGhpcy5wYXJlbnREaW1lbnNpb25zO1xuICAgICAgICB0aGlzLnggPSAxIC0geTtcbiAgICAgICAgdGhpcy55ID0geDtcbiAgICAgICAgdGhpcy53aWR0aCA9ICh3aWR0aCAqIHBhZ2VIZWlnaHQpIC8gcGFnZVdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IChoZWlnaHQgKiBwYWdlV2lkdGgpIC8gcGFnZUhlaWdodDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgeyBsYXN0UG9pbnQgfSA9IHRoaXMuI2ZvY3VzT3V0bGluZXM7XG4gICAgdGhpcy4jbGFzdFBvaW50ID0gWyhsYXN0UG9pbnRbMF0gLSB4KSAvIHdpZHRoLCAobGFzdFBvaW50WzFdIC0geSkgLyBoZWlnaHRdO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBpbml0aWFsaXplKGwxMG4sIHVpTWFuYWdlcikge1xuICAgIEFubm90YXRpb25FZGl0b3IuaW5pdGlhbGl6ZShsMTBuLCB1aU1hbmFnZXIpO1xuICAgIEhpZ2hsaWdodEVkaXRvci5fZGVmYXVsdENvbG9yIHx8PVxuICAgICAgdWlNYW5hZ2VyLmhpZ2hsaWdodENvbG9ycz8udmFsdWVzKCkubmV4dCgpLnZhbHVlIHx8IFwiI2ZmZjA2NlwiO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyB1cGRhdGVEZWZhdWx0UGFyYW1zKHR5cGUsIHZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkhJR0hMSUdIVF9ERUZBVUxUX0NPTE9SOlxuICAgICAgICBIaWdobGlnaHRFZGl0b3IuX2RlZmF1bHRDb2xvciA9IHZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSElHSExJR0hUX1RISUNLTkVTUzpcbiAgICAgICAgSGlnaGxpZ2h0RWRpdG9yLl9kZWZhdWx0VGhpY2tuZXNzID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICB0cmFuc2xhdGVJblBhZ2UoeCwgeSkge31cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IHRvb2xiYXJQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4jbGFzdFBvaW50O1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHVwZGF0ZVBhcmFtcyh0eXBlLCB2YWx1ZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5ISUdITElHSFRfQ09MT1I6XG4gICAgICAgIHRoaXMuI3VwZGF0ZUNvbG9yKHZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkhJR0hMSUdIVF9USElDS05FU1M6XG4gICAgICAgIHRoaXMuI3VwZGF0ZVRoaWNrbmVzcyh2YWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdFByb3BlcnRpZXNUb1VwZGF0ZSgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgW1xuICAgICAgICBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5ISUdITElHSFRfREVGQVVMVF9DT0xPUixcbiAgICAgICAgSGlnaGxpZ2h0RWRpdG9yLl9kZWZhdWx0Q29sb3IsXG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5ISUdITElHSFRfVEhJQ0tORVNTLFxuICAgICAgICBIaWdobGlnaHRFZGl0b3IuX2RlZmF1bHRUaGlja25lc3MsXG4gICAgICBdLFxuICAgIF07XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IHByb3BlcnRpZXNUb1VwZGF0ZSgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgW1xuICAgICAgICBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5ISUdITElHSFRfQ09MT1IsXG4gICAgICAgIHRoaXMuY29sb3IgfHwgSGlnaGxpZ2h0RWRpdG9yLl9kZWZhdWx0Q29sb3IsXG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5ISUdITElHSFRfVEhJQ0tORVNTLFxuICAgICAgICB0aGlzLiN0aGlja25lc3MgfHwgSGlnaGxpZ2h0RWRpdG9yLl9kZWZhdWx0VGhpY2tuZXNzLFxuICAgICAgXSxcbiAgICAgIFtBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5ISUdITElHSFRfRlJFRSwgdGhpcy4jaXNGcmVlSGlnaGxpZ2h0XSxcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgY29sb3IgYW5kIG1ha2UgdGhpcyBhY3Rpb24gdW5kb2FibGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxuICAgKi9cbiAgI3VwZGF0ZUNvbG9yKGNvbG9yKSB7XG4gICAgY29uc3Qgc2V0Q29sb3JBbmRPcGFjaXR5ID0gKGNvbCwgb3BhKSA9PiB7XG4gICAgICB0aGlzLmNvbG9yID0gY29sO1xuICAgICAgdGhpcy4jb3BhY2l0eSA9IG9wYTtcbiAgICAgIHRoaXMucGFyZW50Py5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyh0aGlzLiNpZCwge1xuICAgICAgICByb290OiB7XG4gICAgICAgICAgZmlsbDogY29sLFxuICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IG9wYSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy4jY29sb3JQaWNrZXI/LnVwZGF0ZUNvbG9yKGNvbCk7XG4gICAgfTtcbiAgICBjb25zdCBzYXZlZENvbG9yID0gdGhpcy5jb2xvcjtcbiAgICBjb25zdCBzYXZlZE9wYWNpdHkgPSB0aGlzLiNvcGFjaXR5O1xuICAgIHRoaXMuYWRkQ29tbWFuZHMoe1xuICAgICAgY21kOiBzZXRDb2xvckFuZE9wYWNpdHkuYmluZChcbiAgICAgICAgdGhpcyxcbiAgICAgICAgY29sb3IsXG4gICAgICAgIEhpZ2hsaWdodEVkaXRvci5fZGVmYXVsdE9wYWNpdHlcbiAgICAgICksXG4gICAgICB1bmRvOiBzZXRDb2xvckFuZE9wYWNpdHkuYmluZCh0aGlzLCBzYXZlZENvbG9yLCBzYXZlZE9wYWNpdHkpLFxuICAgICAgcG9zdDogdGhpcy5fdWlNYW5hZ2VyLnVwZGF0ZVVJLmJpbmQodGhpcy5fdWlNYW5hZ2VyLCB0aGlzKSxcbiAgICAgIG11c3RFeGVjOiB0cnVlLFxuICAgICAgdHlwZTogQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSElHSExJR0hUX0NPTE9SLFxuICAgICAgb3ZlcndyaXRlSWZTYW1lVHlwZTogdHJ1ZSxcbiAgICAgIGtlZXBVbmRvOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5fcmVwb3J0VGVsZW1ldHJ5KFxuICAgICAge1xuICAgICAgICBhY3Rpb246IFwiY29sb3JfY2hhbmdlZFwiLFxuICAgICAgICBjb2xvcjogdGhpcy5fdWlNYW5hZ2VyLmhpZ2hsaWdodENvbG9yTmFtZXMuZ2V0KGNvbG9yKSxcbiAgICAgIH0sXG4gICAgICAvKiBtdXN0V2FpdCA9ICovIHRydWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgdGhpY2tuZXNzIGFuZCBtYWtlIHRoaXMgYWN0aW9uIHVuZG9hYmxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGhpY2tuZXNzXG4gICAqL1xuICAjdXBkYXRlVGhpY2tuZXNzKHRoaWNrbmVzcykge1xuICAgIGNvbnN0IHNhdmVkVGhpY2tuZXNzID0gdGhpcy4jdGhpY2tuZXNzO1xuICAgIGNvbnN0IHNldFRoaWNrbmVzcyA9IHRoID0+IHtcbiAgICAgIHRoaXMuI3RoaWNrbmVzcyA9IHRoO1xuICAgICAgdGhpcy4jY2hhbmdlVGhpY2tuZXNzKHRoKTtcbiAgICB9O1xuICAgIHRoaXMuYWRkQ29tbWFuZHMoe1xuICAgICAgY21kOiBzZXRUaGlja25lc3MuYmluZCh0aGlzLCB0aGlja25lc3MpLFxuICAgICAgdW5kbzogc2V0VGhpY2tuZXNzLmJpbmQodGhpcywgc2F2ZWRUaGlja25lc3MpLFxuICAgICAgcG9zdDogdGhpcy5fdWlNYW5hZ2VyLnVwZGF0ZVVJLmJpbmQodGhpcy5fdWlNYW5hZ2VyLCB0aGlzKSxcbiAgICAgIG11c3RFeGVjOiB0cnVlLFxuICAgICAgdHlwZTogQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX1RISUNLTkVTUyxcbiAgICAgIG92ZXJ3cml0ZUlmU2FtZVR5cGU6IHRydWUsXG4gICAgICBrZWVwVW5kbzogdHJ1ZSxcbiAgICB9KTtcbiAgICB0aGlzLl9yZXBvcnRUZWxlbWV0cnkoXG4gICAgICB7IGFjdGlvbjogXCJ0aGlja25lc3NfY2hhbmdlZFwiLCB0aGlja25lc3MgfSxcbiAgICAgIC8qIG11c3RXYWl0ID0gKi8gdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgYXN5bmMgYWRkRWRpdFRvb2xiYXIoKSB7XG4gICAgY29uc3QgdG9vbGJhciA9IGF3YWl0IHN1cGVyLmFkZEVkaXRUb29sYmFyKCk7XG4gICAgaWYgKCF0b29sYmFyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3VpTWFuYWdlci5oaWdobGlnaHRDb2xvcnMpIHtcbiAgICAgIHRoaXMuI2NvbG9yUGlja2VyID0gbmV3IENvbG9yUGlja2VyKHsgZWRpdG9yOiB0aGlzIH0pO1xuICAgICAgdG9vbGJhci5hZGRDb2xvclBpY2tlcih0aGlzLiNjb2xvclBpY2tlcik7XG4gICAgfVxuICAgIHJldHVybiB0b29sYmFyO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGRpc2FibGVFZGl0aW5nKCkge1xuICAgIHN1cGVyLmRpc2FibGVFZGl0aW5nKCk7XG4gICAgdGhpcy5kaXYuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGVkXCIsIHRydWUpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGVuYWJsZUVkaXRpbmcoKSB7XG4gICAgc3VwZXIuZW5hYmxlRWRpdGluZygpO1xuICAgIHRoaXMuZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZml4QW5kU2V0UG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHN1cGVyLmZpeEFuZFNldFBvc2l0aW9uKHRoaXMuI2dldFJvdGF0aW9uKCkpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGdldEJhc2VUcmFuc2xhdGlvbigpIHtcbiAgICAvLyBUaGUgZWRpdG9yIGl0c2VsZiBkb2Vzbid0IGhhdmUgYW55IENTUyBib3JkZXIgKHdlJ3JlIGRyYXdpbmcgb25lXG4gICAgLy8gb3Vyc2VsdmVzIGluIHVzaW5nIFNWRykuXG4gICAgcmV0dXJuIFswLCAwXTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXRSZWN0KHR4LCB0eSkge1xuICAgIHJldHVybiBzdXBlci5nZXRSZWN0KHR4LCB0eSwgdGhpcy4jZ2V0Um90YXRpb24oKSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25jZUFkZGVkKGZvY3VzKSB7XG4gICAgaWYgKCF0aGlzLmFubm90YXRpb25FbGVtZW50SWQpIHtcbiAgICAgIHRoaXMucGFyZW50LmFkZFVuZG9hYmxlRWRpdG9yKHRoaXMpO1xuICAgIH1cbiAgICBpZiAoZm9jdXMpIHtcbiAgICAgIHRoaXMuZGl2LmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLiNjbGVhbkRyYXdMYXllcigpO1xuICAgIHRoaXMuX3JlcG9ydFRlbGVtZXRyeSh7XG4gICAgICBhY3Rpb246IFwiZGVsZXRlZFwiLFxuICAgIH0pO1xuICAgIHN1cGVyLnJlbW92ZSgpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlYnVpbGQoKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdXBlci5yZWJ1aWxkKCk7XG4gICAgaWYgKHRoaXMuZGl2ID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy4jYWRkVG9EcmF3TGF5ZXIoKTtcblxuICAgIGlmICghdGhpcy5pc0F0dGFjaGVkVG9ET00pIHtcbiAgICAgIC8vIEF0IHNvbWUgcG9pbnQgdGhpcyBlZGl0b3Igd2FzIHJlbW92ZWQgYW5kIHdlJ3JlIHJlYnVpbGRpbmcgaXQsXG4gICAgICAvLyBoZW5jZSB3ZSBtdXN0IGFkZCBpdCB0byBpdHMgcGFyZW50LlxuICAgICAgdGhpcy5wYXJlbnQuYWRkKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIHNldFBhcmVudChwYXJlbnQpIHtcbiAgICBsZXQgbXVzdEJlU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5wYXJlbnQgJiYgIXBhcmVudCkge1xuICAgICAgdGhpcy4jY2xlYW5EcmF3TGF5ZXIoKTtcbiAgICB9IGVsc2UgaWYgKHBhcmVudCkge1xuICAgICAgdGhpcy4jYWRkVG9EcmF3TGF5ZXIocGFyZW50KTtcbiAgICAgIC8vIElmIG11c3RCZVNlbGVjdGVkIGlzIHRydWUgaXQgbWVhbnMgdGhhdCB0aGlzIGVkaXRvciB3YXMgc2VsZWN0ZWRcbiAgICAgIC8vIHdoZW4gaXRzIHBhcmVudCBoYXMgYmVlbiBkZXN0cm95ZWQsIGhlbmNlIHdlIG11c3Qgc2VsZWN0IGl0IGFnYWluLlxuICAgICAgbXVzdEJlU2VsZWN0ZWQgPVxuICAgICAgICAhdGhpcy5wYXJlbnQgJiYgdGhpcy5kaXY/LmNsYXNzTGlzdC5jb250YWlucyhcInNlbGVjdGVkRWRpdG9yXCIpO1xuICAgIH1cbiAgICBzdXBlci5zZXRQYXJlbnQocGFyZW50KTtcbiAgICB0aGlzLnNob3codGhpcy5faXNWaXNpYmxlKTtcbiAgICBpZiAobXVzdEJlU2VsZWN0ZWQpIHtcbiAgICAgIC8vIFdlIHNlbGVjdCBpdCBhZnRlciB0aGUgcGFyZW50IGhhcyBiZWVuIHNldC5cbiAgICAgIHRoaXMuc2VsZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgI2NoYW5nZVRoaWNrbmVzcyh0aGlja25lc3MpIHtcbiAgICBpZiAoIXRoaXMuI2lzRnJlZUhpZ2hsaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNjcmVhdGVGcmVlT3V0bGluZXMoe1xuICAgICAgaGlnaGxpZ2h0T3V0bGluZXM6IHRoaXMuI2hpZ2hsaWdodE91dGxpbmVzLmdldE5ld091dGxpbmUodGhpY2tuZXNzIC8gMiksXG4gICAgfSk7XG4gICAgdGhpcy5maXhBbmRTZXRQb3NpdGlvbigpO1xuICAgIGNvbnN0IFtwYXJlbnRXaWR0aCwgcGFyZW50SGVpZ2h0XSA9IHRoaXMucGFyZW50RGltZW5zaW9ucztcbiAgICB0aGlzLnNldERpbXModGhpcy53aWR0aCAqIHBhcmVudFdpZHRoLCB0aGlzLmhlaWdodCAqIHBhcmVudEhlaWdodCk7XG4gIH1cblxuICAjY2xlYW5EcmF3TGF5ZXIoKSB7XG4gICAgaWYgKHRoaXMuI2lkID09PSBudWxsIHx8ICF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnBhcmVudC5kcmF3TGF5ZXIucmVtb3ZlKHRoaXMuI2lkKTtcbiAgICB0aGlzLiNpZCA9IG51bGw7XG4gICAgdGhpcy5wYXJlbnQuZHJhd0xheWVyLnJlbW92ZSh0aGlzLiNvdXRsaW5lSWQpO1xuICAgIHRoaXMuI291dGxpbmVJZCA9IG51bGw7XG4gIH1cblxuICAjYWRkVG9EcmF3TGF5ZXIocGFyZW50ID0gdGhpcy5wYXJlbnQpIHtcbiAgICBpZiAodGhpcy4jaWQgIT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgKHsgaWQ6IHRoaXMuI2lkLCBjbGlwUGF0aElkOiB0aGlzLiNjbGlwUGF0aElkIH0gPSBwYXJlbnQuZHJhd0xheWVyLmRyYXcoXG4gICAgICB7XG4gICAgICAgIGJib3g6IHRoaXMuI2hpZ2hsaWdodE91dGxpbmVzLmJveCxcbiAgICAgICAgcm9vdDoge1xuICAgICAgICAgIHZpZXdCb3g6IFwiMCAwIDEgMVwiLFxuICAgICAgICAgIGZpbGw6IHRoaXMuY29sb3IsXG4gICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogdGhpcy4jb3BhY2l0eSxcbiAgICAgICAgfSxcbiAgICAgICAgcm9vdENsYXNzOiB7XG4gICAgICAgICAgaGlnaGxpZ2h0OiB0cnVlLFxuICAgICAgICAgIGZyZWU6IHRoaXMuI2lzRnJlZUhpZ2hsaWdodCxcbiAgICAgICAgfSxcbiAgICAgICAgcGF0aDoge1xuICAgICAgICAgIGQ6IHRoaXMuI2hpZ2hsaWdodE91dGxpbmVzLnRvU1ZHUGF0aCgpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIC8qIGlzUGF0aFVwZGF0YWJsZSA9ICovIGZhbHNlLFxuICAgICAgLyogaGFzQ2xpcCA9ICovIHRydWVcbiAgICApKTtcbiAgICB0aGlzLiNvdXRsaW5lSWQgPSBwYXJlbnQuZHJhd0xheWVyLmRyYXdPdXRsaW5lKFxuICAgICAge1xuICAgICAgICByb290Q2xhc3M6IHtcbiAgICAgICAgICBoaWdobGlnaHRPdXRsaW5lOiB0cnVlLFxuICAgICAgICAgIGZyZWU6IHRoaXMuI2lzRnJlZUhpZ2hsaWdodCxcbiAgICAgICAgfSxcbiAgICAgICAgYmJveDogdGhpcy4jZm9jdXNPdXRsaW5lcy5ib3gsXG4gICAgICAgIHBhdGg6IHtcbiAgICAgICAgICBkOiB0aGlzLiNmb2N1c091dGxpbmVzLnRvU1ZHUGF0aCgpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIC8qIG11c3RSZW1vdmVTZWxmSW50ZXJzZWN0aW9ucyA9ICovIHRoaXMuI2lzRnJlZUhpZ2hsaWdodFxuICAgICk7XG5cbiAgICBpZiAodGhpcy4jaGlnaGxpZ2h0RGl2KSB7XG4gICAgICB0aGlzLiNoaWdobGlnaHREaXYuc3R5bGUuY2xpcFBhdGggPSB0aGlzLiNjbGlwUGF0aElkO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyAjcm90YXRlQmJveChbeCwgeSwgd2lkdGgsIGhlaWdodF0sIGFuZ2xlKSB7XG4gICAgc3dpdGNoIChhbmdsZSkge1xuICAgICAgY2FzZSA5MDpcbiAgICAgICAgcmV0dXJuIFsxIC0geSAtIGhlaWdodCwgeCwgaGVpZ2h0LCB3aWR0aF07XG4gICAgICBjYXNlIDE4MDpcbiAgICAgICAgcmV0dXJuIFsxIC0geCAtIHdpZHRoLCAxIC0geSAtIGhlaWdodCwgd2lkdGgsIGhlaWdodF07XG4gICAgICBjYXNlIDI3MDpcbiAgICAgICAgcmV0dXJuIFt5LCAxIC0geCAtIHdpZHRoLCBoZWlnaHQsIHdpZHRoXTtcbiAgICB9XG4gICAgcmV0dXJuIFt4LCB5LCB3aWR0aCwgaGVpZ2h0XTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICByb3RhdGUoYW5nbGUpIHtcbiAgICAvLyBXZSBuZWVkIHRvIHJvdGF0ZSB0aGUgc3ZncyBiZWNhdXNlIG9mIHRoZSBjb29yZGluYXRlcyBzeXN0ZW0uXG4gICAgY29uc3QgeyBkcmF3TGF5ZXIgfSA9IHRoaXMucGFyZW50O1xuICAgIGxldCBib3g7XG4gICAgaWYgKHRoaXMuI2lzRnJlZUhpZ2hsaWdodCkge1xuICAgICAgYW5nbGUgPSAoYW5nbGUgLSB0aGlzLnJvdGF0aW9uICsgMzYwKSAlIDM2MDtcbiAgICAgIGJveCA9IEhpZ2hsaWdodEVkaXRvci4jcm90YXRlQmJveCh0aGlzLiNoaWdobGlnaHRPdXRsaW5lcy5ib3gsIGFuZ2xlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQW4gaGlnaGxpZ2h0IGFubm90YXRpb24gaXMgYWx3YXlzIGRyYXduIGhvcml6b250YWxseS5cbiAgICAgIGJveCA9IEhpZ2hsaWdodEVkaXRvci4jcm90YXRlQmJveChcbiAgICAgICAgW3RoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodF0sXG4gICAgICAgIGFuZ2xlXG4gICAgICApO1xuICAgIH1cbiAgICBkcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyh0aGlzLiNpZCwge1xuICAgICAgYmJveDogYm94LFxuICAgICAgcm9vdDoge1xuICAgICAgICBcImRhdGEtbWFpbi1yb3RhdGlvblwiOiBhbmdsZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgZHJhd0xheWVyLnVwZGF0ZVByb3BlcnRpZXModGhpcy4jb3V0bGluZUlkLCB7XG4gICAgICBiYm94OiBIaWdobGlnaHRFZGl0b3IuI3JvdGF0ZUJib3godGhpcy4jZm9jdXNPdXRsaW5lcy5ib3gsIGFuZ2xlKSxcbiAgICAgIHJvb3Q6IHtcbiAgICAgICAgXCJkYXRhLW1haW4tcm90YXRpb25cIjogYW5nbGUsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5kaXYpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpdjtcbiAgICB9XG5cbiAgICBjb25zdCBkaXYgPSBzdXBlci5yZW5kZXIoKTtcbiAgICBpZiAodGhpcy4jdGV4dCkge1xuICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy4jdGV4dCk7XG4gICAgICBkaXYuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcIm1hcmtcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLiNpc0ZyZWVIaWdobGlnaHQpIHtcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiZnJlZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXYuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4ja2V5ZG93bi5iaW5kKHRoaXMpLCB7XG4gICAgICAgIHNpZ25hbDogdGhpcy5fdWlNYW5hZ2VyLl9zaWduYWwsXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaGlnaGxpZ2h0RGl2ID0gKHRoaXMuI2hpZ2hsaWdodERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgIGRpdi5hcHBlbmQoaGlnaGxpZ2h0RGl2KTtcbiAgICBoaWdobGlnaHREaXYuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgIGhpZ2hsaWdodERpdi5jbGFzc05hbWUgPSBcImludGVybmFsXCI7XG4gICAgaGlnaGxpZ2h0RGl2LnN0eWxlLmNsaXBQYXRoID0gdGhpcy4jY2xpcFBhdGhJZDtcbiAgICBjb25zdCBbcGFyZW50V2lkdGgsIHBhcmVudEhlaWdodF0gPSB0aGlzLnBhcmVudERpbWVuc2lvbnM7XG4gICAgdGhpcy5zZXREaW1zKHRoaXMud2lkdGggKiBwYXJlbnRXaWR0aCwgdGhpcy5oZWlnaHQgKiBwYXJlbnRIZWlnaHQpO1xuXG4gICAgYmluZEV2ZW50cyh0aGlzLCB0aGlzLiNoaWdobGlnaHREaXYsIFtcInBvaW50ZXJvdmVyXCIsIFwicG9pbnRlcmxlYXZlXCJdKTtcbiAgICB0aGlzLmVuYWJsZUVkaXRpbmcoKTtcblxuICAgIHJldHVybiBkaXY7XG4gIH1cblxuICBwb2ludGVyb3ZlcigpIHtcbiAgICBpZiAoIXRoaXMuaXNTZWxlY3RlZCkge1xuICAgICAgdGhpcy5wYXJlbnQ/LmRyYXdMYXllci51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuI291dGxpbmVJZCwge1xuICAgICAgICByb290Q2xhc3M6IHtcbiAgICAgICAgICBob3ZlcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcG9pbnRlcmxlYXZlKCkge1xuICAgIGlmICghdGhpcy5pc1NlbGVjdGVkKSB7XG4gICAgICB0aGlzLnBhcmVudD8uZHJhd0xheWVyLnVwZGF0ZVByb3BlcnRpZXModGhpcy4jb3V0bGluZUlkLCB7XG4gICAgICAgIHJvb3RDbGFzczoge1xuICAgICAgICAgIGhvdmVyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgI2tleWRvd24oZXZlbnQpIHtcbiAgICBIaWdobGlnaHRFZGl0b3IuX2tleWJvYXJkTWFuYWdlci5leGVjKHRoaXMsIGV2ZW50KTtcbiAgfVxuXG4gIF9tb3ZlQ2FyZXQoZGlyZWN0aW9uKSB7XG4gICAgdGhpcy5wYXJlbnQudW5zZWxlY3QodGhpcyk7XG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgMCAvKiBsZWZ0ICovOlxuICAgICAgY2FzZSAyIC8qIHVwICovOlxuICAgICAgICB0aGlzLiNzZXRDYXJldCgvKiBzdGFydCA9ICovIHRydWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMSAvKiByaWdodCAqLzpcbiAgICAgIGNhc2UgMyAvKiBkb3duICovOlxuICAgICAgICB0aGlzLiNzZXRDYXJldCgvKiBzdGFydCA9ICovIGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgI3NldENhcmV0KHN0YXJ0KSB7XG4gICAgaWYgKCF0aGlzLiNhbmNob3JOb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoc3RhcnQpIHtcbiAgICAgIHNlbGVjdGlvbi5zZXRQb3NpdGlvbih0aGlzLiNhbmNob3JOb2RlLCB0aGlzLiNhbmNob3JPZmZzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3Rpb24uc2V0UG9zaXRpb24odGhpcy4jZm9jdXNOb2RlLCB0aGlzLiNmb2N1c09mZnNldCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHNlbGVjdCgpIHtcbiAgICBzdXBlci5zZWxlY3QoKTtcbiAgICBpZiAoIXRoaXMuI291dGxpbmVJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnBhcmVudD8uZHJhd0xheWVyLnVwZGF0ZVByb3BlcnRpZXModGhpcy4jb3V0bGluZUlkLCB7XG4gICAgICByb290Q2xhc3M6IHtcbiAgICAgICAgaG92ZXJlZDogZmFsc2UsXG4gICAgICAgIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICB1bnNlbGVjdCgpIHtcbiAgICBzdXBlci51bnNlbGVjdCgpO1xuICAgIGlmICghdGhpcy4jb3V0bGluZUlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucGFyZW50Py5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyh0aGlzLiNvdXRsaW5lSWQsIHtcbiAgICAgIHJvb3RDbGFzczoge1xuICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGlmICghdGhpcy4jaXNGcmVlSGlnaGxpZ2h0KSB7XG4gICAgICB0aGlzLiNzZXRDYXJldCgvKiBzdGFydCA9ICovIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IF9tdXN0Rml4UG9zaXRpb24oKSB7XG4gICAgcmV0dXJuICF0aGlzLiNpc0ZyZWVIaWdobGlnaHQ7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc2hvdyh2aXNpYmxlID0gdGhpcy5faXNWaXNpYmxlKSB7XG4gICAgc3VwZXIuc2hvdyh2aXNpYmxlKTtcbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIHRoaXMucGFyZW50LmRyYXdMYXllci51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuI2lkLCB7XG4gICAgICAgIHJvb3RDbGFzczoge1xuICAgICAgICAgIGhpZGRlbjogIXZpc2libGUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIHRoaXMucGFyZW50LmRyYXdMYXllci51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuI291dGxpbmVJZCwge1xuICAgICAgICByb290Q2xhc3M6IHtcbiAgICAgICAgICBoaWRkZW46ICF2aXNpYmxlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgI2dldFJvdGF0aW9uKCkge1xuICAgIC8vIEhpZ2hsaWdodCBhbm5vdGF0aW9ucyBhcmUgYWx3YXlzIGRyYXduIGhvcml6b250YWxseSBidXQgaWZcbiAgICAvLyBhIGZyZWUgaGlnaGxpZ2h0IGFubm90YXRpb24gY2FuIGJlIHJvdGF0ZWQuXG4gICAgcmV0dXJuIHRoaXMuI2lzRnJlZUhpZ2hsaWdodCA/IHRoaXMucm90YXRpb24gOiAwO1xuICB9XG5cbiAgI3NlcmlhbGl6ZUJveGVzKCkge1xuICAgIGlmICh0aGlzLiNpc0ZyZWVIaWdobGlnaHQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBbcGFnZVdpZHRoLCBwYWdlSGVpZ2h0XSA9IHRoaXMucGFnZURpbWVuc2lvbnM7XG4gICAgY29uc3QgW3BhZ2VYLCBwYWdlWV0gPSB0aGlzLnBhZ2VUcmFuc2xhdGlvbjtcbiAgICBjb25zdCBib3hlcyA9IHRoaXMuI2JveGVzO1xuICAgIGNvbnN0IHF1YWRQb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KGJveGVzLmxlbmd0aCAqIDgpO1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9IG9mIGJveGVzKSB7XG4gICAgICBjb25zdCBzeCA9IHggKiBwYWdlV2lkdGggKyBwYWdlWDtcbiAgICAgIGNvbnN0IHN5ID0gKDEgLSB5KSAqIHBhZ2VIZWlnaHQgKyBwYWdlWTtcbiAgICAgIC8vIFNlcmlhbGl6ZXMgdGhlIHJlY3RhbmdsZSBpbiB0aGUgQWRvYmUgQWNyb2JhdCBmb3JtYXQuXG4gICAgICAvLyBUaGUgcmVjdGFuZ2xlJ3MgY29vcmRpbmF0ZXMgKGIgPSBib3R0b20sIHQgPSB0b3AsIEwgPSBsZWZ0LCBSID0gcmlnaHQpXG4gICAgICAvLyBhcmUgb3JkZXJlZCBhcyBmb2xsb3dzOiB0TCwgdFIsIGJMLCBiUiAoYkwgb3JpZ2luKS5cbiAgICAgIHF1YWRQb2ludHNbaV0gPSBxdWFkUG9pbnRzW2kgKyA0XSA9IHN4O1xuICAgICAgcXVhZFBvaW50c1tpICsgMV0gPSBxdWFkUG9pbnRzW2kgKyAzXSA9IHN5O1xuICAgICAgcXVhZFBvaW50c1tpICsgMl0gPSBxdWFkUG9pbnRzW2kgKyA2XSA9IHN4ICsgd2lkdGggKiBwYWdlV2lkdGg7XG4gICAgICBxdWFkUG9pbnRzW2kgKyA1XSA9IHF1YWRQb2ludHNbaSArIDddID0gc3kgLSBoZWlnaHQgKiBwYWdlSGVpZ2h0O1xuICAgICAgaSArPSA4O1xuICAgIH1cbiAgICByZXR1cm4gcXVhZFBvaW50cztcbiAgfVxuXG4gICNzZXJpYWxpemVPdXRsaW5lcyhyZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMuI2hpZ2hsaWdodE91dGxpbmVzLnNlcmlhbGl6ZShyZWN0LCB0aGlzLiNnZXRSb3RhdGlvbigpKTtcbiAgfVxuXG4gIHN0YXRpYyBzdGFydEhpZ2hsaWdodGluZyhwYXJlbnQsIGlzTFRSLCB7IHRhcmdldDogdGV4dExheWVyLCB4LCB5IH0pIHtcbiAgICBjb25zdCB7XG4gICAgICB4OiBsYXllclgsXG4gICAgICB5OiBsYXllclksXG4gICAgICB3aWR0aDogcGFyZW50V2lkdGgsXG4gICAgICBoZWlnaHQ6IHBhcmVudEhlaWdodCxcbiAgICB9ID0gdGV4dExheWVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgY29uc3QgYWMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3Qgc2lnbmFsID0gcGFyZW50LmNvbWJpbmVkU2lnbmFsKGFjKTtcblxuICAgIGNvbnN0IHBvaW50ZXJVcENhbGxiYWNrID0gZSA9PiB7XG4gICAgICBhYy5hYm9ydCgpO1xuICAgICAgdGhpcy4jZW5kSGlnaGxpZ2h0KHBhcmVudCwgZSk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgcG9pbnRlclVwQ2FsbGJhY2ssIHsgc2lnbmFsIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHBvaW50ZXJVcENhbGxiYWNrLCB7IHNpZ25hbCB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwicG9pbnRlcmRvd25cIixcbiAgICAgIHN0b3BFdmVudCAvKiBBdm9pZCB0byBoYXZlIHVuZGVzaXJlZCBjbGlja3MgZHVyaW5nIHRoZSBkcmF3aW5nLiAqLyxcbiAgICAgIHtcbiAgICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgICAgcGFzc2l2ZTogZmFsc2UsXG4gICAgICAgIHNpZ25hbCxcbiAgICAgIH1cbiAgICApO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgbm9Db250ZXh0TWVudSwgeyBzaWduYWwgfSk7XG5cbiAgICB0ZXh0TGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwicG9pbnRlcm1vdmVcIixcbiAgICAgIHRoaXMuI2hpZ2hsaWdodE1vdmUuYmluZCh0aGlzLCBwYXJlbnQpLFxuICAgICAgeyBzaWduYWwgfVxuICAgICk7XG4gICAgdGhpcy5fZnJlZUhpZ2hsaWdodCA9IG5ldyBGcmVlSGlnaGxpZ2h0T3V0bGluZXIoXG4gICAgICB7IHgsIHkgfSxcbiAgICAgIFtsYXllclgsIGxheWVyWSwgcGFyZW50V2lkdGgsIHBhcmVudEhlaWdodF0sXG4gICAgICBwYXJlbnQuc2NhbGUsXG4gICAgICB0aGlzLl9kZWZhdWx0VGhpY2tuZXNzIC8gMixcbiAgICAgIGlzTFRSLFxuICAgICAgLyogaW5uZXJNYXJnaW4gPSAqLyAwLjAwMVxuICAgICk7XG4gICAgKHsgaWQ6IHRoaXMuX2ZyZWVIaWdobGlnaHRJZCwgY2xpcFBhdGhJZDogdGhpcy5fZnJlZUhpZ2hsaWdodENsaXBJZCB9ID1cbiAgICAgIHBhcmVudC5kcmF3TGF5ZXIuZHJhdyhcbiAgICAgICAge1xuICAgICAgICAgIGJib3g6IFswLCAwLCAxLCAxXSxcbiAgICAgICAgICByb290OiB7XG4gICAgICAgICAgICB2aWV3Qm94OiBcIjAgMCAxIDFcIixcbiAgICAgICAgICAgIGZpbGw6IHRoaXMuX2RlZmF1bHRDb2xvcixcbiAgICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IHRoaXMuX2RlZmF1bHRPcGFjaXR5LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcm9vdENsYXNzOiB7XG4gICAgICAgICAgICBoaWdobGlnaHQ6IHRydWUsXG4gICAgICAgICAgICBmcmVlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF0aDoge1xuICAgICAgICAgICAgZDogdGhpcy5fZnJlZUhpZ2hsaWdodC50b1NWR1BhdGgoKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKiBpc1BhdGhVcGRhdGFibGUgPSAqLyB0cnVlLFxuICAgICAgICAvKiBoYXNDbGlwID0gKi8gdHJ1ZVxuICAgICAgKSk7XG4gIH1cblxuICBzdGF0aWMgI2hpZ2hsaWdodE1vdmUocGFyZW50LCBldmVudCkge1xuICAgIGlmICh0aGlzLl9mcmVlSGlnaGxpZ2h0LmFkZChldmVudCkpIHtcbiAgICAgIC8vIFJlZHJhdyBvbmx5IGlmIHRoZSBwb2ludCBoYXMgYmVlbiBhZGRlZC5cbiAgICAgIHBhcmVudC5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyh0aGlzLl9mcmVlSGlnaGxpZ2h0SWQsIHtcbiAgICAgICAgcGF0aDoge1xuICAgICAgICAgIGQ6IHRoaXMuX2ZyZWVIaWdobGlnaHQudG9TVkdQYXRoKCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgI2VuZEhpZ2hsaWdodChwYXJlbnQsIGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLl9mcmVlSGlnaGxpZ2h0LmlzRW1wdHkoKSkge1xuICAgICAgcGFyZW50LmNyZWF0ZUFuZEFkZE5ld0VkaXRvcihldmVudCwgZmFsc2UsIHtcbiAgICAgICAgaGlnaGxpZ2h0SWQ6IHRoaXMuX2ZyZWVIaWdobGlnaHRJZCxcbiAgICAgICAgaGlnaGxpZ2h0T3V0bGluZXM6IHRoaXMuX2ZyZWVIaWdobGlnaHQuZ2V0T3V0bGluZXMoKSxcbiAgICAgICAgY2xpcFBhdGhJZDogdGhpcy5fZnJlZUhpZ2hsaWdodENsaXBJZCxcbiAgICAgICAgbWV0aG9kT2ZDcmVhdGlvbjogXCJtYWluX3Rvb2xiYXJcIixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJlbnQuZHJhd0xheWVyLnJlbW92ZSh0aGlzLl9mcmVlSGlnaGxpZ2h0SWQpO1xuICAgIH1cbiAgICB0aGlzLl9mcmVlSGlnaGxpZ2h0SWQgPSAtMTtcbiAgICB0aGlzLl9mcmVlSGlnaGxpZ2h0ID0gbnVsbDtcbiAgICB0aGlzLl9mcmVlSGlnaGxpZ2h0Q2xpcElkID0gXCJcIjtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoZGF0YSwgcGFyZW50LCB1aU1hbmFnZXIpIHtcbiAgICBsZXQgaW5pdGlhbERhdGEgPSBudWxsO1xuICAgIGlmIChkYXRhIGluc3RhbmNlb2YgSGlnaGxpZ2h0QW5ub3RhdGlvbkVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YTogeyBxdWFkUG9pbnRzLCByZWN0LCByb3RhdGlvbiwgaWQsIGNvbG9yLCBvcGFjaXR5LCBwb3B1cFJlZiB9LFxuICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICBwYWdlOiB7IHBhZ2VOdW1iZXIgfSxcbiAgICAgICAgfSxcbiAgICAgIH0gPSBkYXRhO1xuICAgICAgaW5pdGlhbERhdGEgPSBkYXRhID0ge1xuICAgICAgICBhbm5vdGF0aW9uVHlwZTogQW5ub3RhdGlvbkVkaXRvclR5cGUuSElHSExJR0hULFxuICAgICAgICBjb2xvcjogQXJyYXkuZnJvbShjb2xvciksXG4gICAgICAgIG9wYWNpdHksXG4gICAgICAgIHF1YWRQb2ludHMsXG4gICAgICAgIGJveGVzOiBudWxsLFxuICAgICAgICBwYWdlSW5kZXg6IHBhZ2VOdW1iZXIgLSAxLFxuICAgICAgICByZWN0OiByZWN0LnNsaWNlKDApLFxuICAgICAgICByb3RhdGlvbixcbiAgICAgICAgaWQsXG4gICAgICAgIGRlbGV0ZWQ6IGZhbHNlLFxuICAgICAgICBwb3B1cFJlZixcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgSW5rQW5ub3RhdGlvbkVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlua0xpc3RzLFxuICAgICAgICAgIHJlY3QsXG4gICAgICAgICAgcm90YXRpb24sXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgY29sb3IsXG4gICAgICAgICAgYm9yZGVyU3R5bGU6IHsgcmF3V2lkdGg6IHRoaWNrbmVzcyB9LFxuICAgICAgICAgIHBvcHVwUmVmLFxuICAgICAgICB9LFxuICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICBwYWdlOiB7IHBhZ2VOdW1iZXIgfSxcbiAgICAgICAgfSxcbiAgICAgIH0gPSBkYXRhO1xuICAgICAgaW5pdGlhbERhdGEgPSBkYXRhID0ge1xuICAgICAgICBhbm5vdGF0aW9uVHlwZTogQW5ub3RhdGlvbkVkaXRvclR5cGUuSElHSExJR0hULFxuICAgICAgICBjb2xvcjogQXJyYXkuZnJvbShjb2xvciksXG4gICAgICAgIHRoaWNrbmVzcyxcbiAgICAgICAgaW5rTGlzdHMsXG4gICAgICAgIGJveGVzOiBudWxsLFxuICAgICAgICBwYWdlSW5kZXg6IHBhZ2VOdW1iZXIgLSAxLFxuICAgICAgICByZWN0OiByZWN0LnNsaWNlKDApLFxuICAgICAgICByb3RhdGlvbixcbiAgICAgICAgaWQsXG4gICAgICAgIGRlbGV0ZWQ6IGZhbHNlLFxuICAgICAgICBwb3B1cFJlZixcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb2xvciwgcXVhZFBvaW50cywgaW5rTGlzdHMsIG9wYWNpdHkgfSA9IGRhdGE7XG4gICAgY29uc3QgZWRpdG9yID0gYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoZGF0YSwgcGFyZW50LCB1aU1hbmFnZXIpO1xuXG4gICAgZWRpdG9yLmNvbG9yID0gVXRpbC5tYWtlSGV4Q29sb3IoLi4uY29sb3IpO1xuICAgIGVkaXRvci4jb3BhY2l0eSA9IG9wYWNpdHkgfHwgMTtcbiAgICBpZiAoaW5rTGlzdHMpIHtcbiAgICAgIGVkaXRvci4jdGhpY2tuZXNzID0gZGF0YS50aGlja25lc3M7XG4gICAgfVxuICAgIGVkaXRvci5hbm5vdGF0aW9uRWxlbWVudElkID0gZGF0YS5pZCB8fCBudWxsO1xuICAgIGVkaXRvci5faW5pdGlhbERhdGEgPSBpbml0aWFsRGF0YTtcblxuICAgIGNvbnN0IFtwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdID0gZWRpdG9yLnBhZ2VEaW1lbnNpb25zO1xuICAgIGNvbnN0IFtwYWdlWCwgcGFnZVldID0gZWRpdG9yLnBhZ2VUcmFuc2xhdGlvbjtcblxuICAgIGlmIChxdWFkUG9pbnRzKSB7XG4gICAgICBjb25zdCBib3hlcyA9IChlZGl0b3IuI2JveGVzID0gW10pO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWFkUG9pbnRzLmxlbmd0aDsgaSArPSA4KSB7XG4gICAgICAgIGJveGVzLnB1c2goe1xuICAgICAgICAgIHg6IChxdWFkUG9pbnRzW2ldIC0gcGFnZVgpIC8gcGFnZVdpZHRoLFxuICAgICAgICAgIHk6IDEgLSAocXVhZFBvaW50c1tpICsgMV0gLSBwYWdlWSkgLyBwYWdlSGVpZ2h0LFxuICAgICAgICAgIHdpZHRoOiAocXVhZFBvaW50c1tpICsgMl0gLSBxdWFkUG9pbnRzW2ldKSAvIHBhZ2VXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IChxdWFkUG9pbnRzW2kgKyAxXSAtIHF1YWRQb2ludHNbaSArIDVdKSAvIHBhZ2VIZWlnaHQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWRpdG9yLiNjcmVhdGVPdXRsaW5lcygpO1xuICAgICAgZWRpdG9yLiNhZGRUb0RyYXdMYXllcigpO1xuICAgICAgZWRpdG9yLnJvdGF0ZShlZGl0b3Iucm90YXRpb24pO1xuICAgIH0gZWxzZSBpZiAoaW5rTGlzdHMpIHtcbiAgICAgIGVkaXRvci4jaXNGcmVlSGlnaGxpZ2h0ID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHBvaW50cyA9IGlua0xpc3RzWzBdO1xuICAgICAgY29uc3QgcG9pbnQgPSB7XG4gICAgICAgIHg6IHBvaW50c1swXSAtIHBhZ2VYLFxuICAgICAgICB5OiBwYWdlSGVpZ2h0IC0gKHBvaW50c1sxXSAtIHBhZ2VZKSxcbiAgICAgIH07XG4gICAgICBjb25zdCBvdXRsaW5lciA9IG5ldyBGcmVlSGlnaGxpZ2h0T3V0bGluZXIoXG4gICAgICAgIHBvaW50LFxuICAgICAgICBbMCwgMCwgcGFnZVdpZHRoLCBwYWdlSGVpZ2h0XSxcbiAgICAgICAgMSxcbiAgICAgICAgZWRpdG9yLiN0aGlja25lc3MgLyAyLFxuICAgICAgICB0cnVlLFxuICAgICAgICAwLjAwMVxuICAgICAgKTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHBvaW50cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICAgIHBvaW50LnggPSBwb2ludHNbaV0gLSBwYWdlWDtcbiAgICAgICAgcG9pbnQueSA9IHBhZ2VIZWlnaHQgLSAocG9pbnRzW2kgKyAxXSAtIHBhZ2VZKTtcbiAgICAgICAgb3V0bGluZXIuYWRkKHBvaW50KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgaWQsIGNsaXBQYXRoSWQgfSA9IHBhcmVudC5kcmF3TGF5ZXIuZHJhdyhcbiAgICAgICAge1xuICAgICAgICAgIGJib3g6IFswLCAwLCAxLCAxXSxcbiAgICAgICAgICByb290OiB7XG4gICAgICAgICAgICB2aWV3Qm94OiBcIjAgMCAxIDFcIixcbiAgICAgICAgICAgIGZpbGw6IGVkaXRvci5jb2xvcixcbiAgICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IGVkaXRvci5fZGVmYXVsdE9wYWNpdHksXG4gICAgICAgICAgfSxcbiAgICAgICAgICByb290Q2xhc3M6IHtcbiAgICAgICAgICAgIGhpZ2hsaWdodDogdHJ1ZSxcbiAgICAgICAgICAgIGZyZWU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXRoOiB7XG4gICAgICAgICAgICBkOiBvdXRsaW5lci50b1NWR1BhdGgoKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKiBpc1BhdGhVcGRhdGFibGUgPSAqLyB0cnVlLFxuICAgICAgICAvKiBoYXNDbGlwID0gKi8gdHJ1ZVxuICAgICAgKTtcbiAgICAgIGVkaXRvci4jY3JlYXRlRnJlZU91dGxpbmVzKHtcbiAgICAgICAgaGlnaGxpZ2h0T3V0bGluZXM6IG91dGxpbmVyLmdldE91dGxpbmVzKCksXG4gICAgICAgIGhpZ2hsaWdodElkOiBpZCxcbiAgICAgICAgY2xpcFBhdGhJZCxcbiAgICAgIH0pO1xuICAgICAgZWRpdG9yLiNhZGRUb0RyYXdMYXllcigpO1xuICAgICAgZWRpdG9yLnJvdGF0ZShlZGl0b3IucGFyZW50Um90YXRpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBlZGl0b3I7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc2VyaWFsaXplKGlzRm9yQ29weWluZyA9IGZhbHNlKSB7XG4gICAgLy8gSXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvcHkvcGFzdGUgYSBoaWdobGlnaHQgYW5ub3RhdGlvbi5cbiAgICBpZiAodGhpcy5pc0VtcHR5KCkgfHwgaXNGb3JDb3B5aW5nKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kZWxldGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXJpYWxpemVEZWxldGVkKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVjdCA9IHRoaXMuZ2V0UmVjdCgwLCAwKTtcbiAgICBjb25zdCBjb2xvciA9IEFubm90YXRpb25FZGl0b3IuX2NvbG9yTWFuYWdlci5jb252ZXJ0KHRoaXMuY29sb3IpO1xuXG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IHtcbiAgICAgIGFubm90YXRpb25UeXBlOiBBbm5vdGF0aW9uRWRpdG9yVHlwZS5ISUdITElHSFQsXG4gICAgICBjb2xvcixcbiAgICAgIG9wYWNpdHk6IHRoaXMuI29wYWNpdHksXG4gICAgICB0aGlja25lc3M6IHRoaXMuI3RoaWNrbmVzcyxcbiAgICAgIHF1YWRQb2ludHM6IHRoaXMuI3NlcmlhbGl6ZUJveGVzKCksXG4gICAgICBvdXRsaW5lczogdGhpcy4jc2VyaWFsaXplT3V0bGluZXMocmVjdCksXG4gICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4LFxuICAgICAgcmVjdCxcbiAgICAgIHJvdGF0aW9uOiB0aGlzLiNnZXRSb3RhdGlvbigpLFxuICAgICAgc3RydWN0VHJlZVBhcmVudElkOiB0aGlzLl9zdHJ1Y3RUcmVlUGFyZW50SWQsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFubm90YXRpb25FbGVtZW50SWQgJiYgIXRoaXMuI2hhc0VsZW1lbnRDaGFuZ2VkKHNlcmlhbGl6ZWQpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzZXJpYWxpemVkLmlkID0gdGhpcy5hbm5vdGF0aW9uRWxlbWVudElkO1xuICAgIHJldHVybiBzZXJpYWxpemVkO1xuICB9XG5cbiAgI2hhc0VsZW1lbnRDaGFuZ2VkKHNlcmlhbGl6ZWQpIHtcbiAgICBjb25zdCB7IGNvbG9yIH0gPSB0aGlzLl9pbml0aWFsRGF0YTtcbiAgICByZXR1cm4gc2VyaWFsaXplZC5jb2xvci5zb21lKChjLCBpKSA9PiBjICE9PSBjb2xvcltpXSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQoYW5ub3RhdGlvbikge1xuICAgIGFubm90YXRpb24udXBkYXRlRWRpdGVkKHtcbiAgICAgIHJlY3Q6IHRoaXMuZ2V0UmVjdCgwLCAwKSxcbiAgICB9KTtcblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc3RhdGljIGNhbkNyZWF0ZU5ld0VtcHR5RWRpdG9yKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgeyBIaWdobGlnaHRFZGl0b3IgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUsIHVucmVhY2hhYmxlIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQgeyBub0NvbnRleHRNZW51LCBzdG9wRXZlbnQgfSBmcm9tIFwiLi4vZGlzcGxheV91dGlscy5qc1wiO1xuaW1wb3J0IHsgQW5ub3RhdGlvbkVkaXRvciB9IGZyb20gXCIuL2VkaXRvci5qc1wiO1xuXG5jbGFzcyBEcmF3aW5nT3B0aW9ucyB7XG4gICNzdmdQcm9wZXJ0aWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICB1cGRhdGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXNbbmFtZV0gPSB2YWx1ZTtcbiAgICB0aGlzLnVwZGF0ZVNWR1Byb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgfVxuXG4gIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcykge1xuICAgIGlmICghcHJvcGVydGllcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykpIHtcbiAgICAgIGlmICghbmFtZS5zdGFydHNXaXRoKFwiX1wiKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGVTVkdQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMuI3N2Z1Byb3BlcnRpZXNbbmFtZV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHRvU1ZHUHJvcGVydGllcygpIHtcbiAgICBjb25zdCByb290ID0gdGhpcy4jc3ZnUHJvcGVydGllcztcbiAgICB0aGlzLiNzdmdQcm9wZXJ0aWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXR1cm4geyByb290IH07XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLiNzdmdQcm9wZXJ0aWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuXG4gIHVwZGF0ZUFsbChvcHRpb25zID0gdGhpcykge1xuICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyhvcHRpb25zKTtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHVucmVhY2hhYmxlKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICB9XG59XG5cbi8qKlxuICogQmFzaWMgZHJhdyBlZGl0b3IuXG4gKi9cbmNsYXNzIERyYXdpbmdFZGl0b3IgZXh0ZW5kcyBBbm5vdGF0aW9uRWRpdG9yIHtcbiAgI2RyYXdPdXRsaW5lcyA9IG51bGw7XG5cbiAgI211c3RCZUNvbW1pdHRlZDtcblxuICBfZHJhd0lkID0gbnVsbDtcblxuICBzdGF0aWMgX2N1cnJlbnREcmF3SWQgPSAtMTtcblxuICBzdGF0aWMgX2N1cnJlbnRQYXJlbnQgPSBudWxsO1xuXG4gIHN0YXRpYyAjY3VycmVudERyYXcgPSBudWxsO1xuXG4gIHN0YXRpYyAjY3VycmVudERyYXdpbmdBQyA9IG51bGw7XG5cbiAgc3RhdGljICNjdXJyZW50RHJhd2luZ09wdGlvbnMgPSBudWxsO1xuXG4gIHN0YXRpYyAjY3VycmVudFBvaW50ZXJJZCA9IE5hTjtcblxuICBzdGF0aWMgI2N1cnJlbnRQb2ludGVyVHlwZSA9IG51bGw7XG5cbiAgc3RhdGljICNjdXJyZW50UG9pbnRlcklkcyA9IG51bGw7XG5cbiAgc3RhdGljICNjdXJyZW50TW92ZVRpbWVzdGFtcCA9IE5hTjtcblxuICBzdGF0aWMgX0lOTkVSX01BUkdJTiA9IDM7XG5cbiAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgc3VwZXIocGFyYW1zKTtcbiAgICB0aGlzLiNtdXN0QmVDb21taXR0ZWQgPSBwYXJhbXMubXVzdEJlQ29tbWl0dGVkIHx8IGZhbHNlO1xuXG4gICAgdGhpcy5fYWRkT3V0bGluZXMocGFyYW1zKTtcbiAgfVxuXG4gIF9hZGRPdXRsaW5lcyhwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zLmRyYXdPdXRsaW5lcykge1xuICAgICAgdGhpcy4jY3JlYXRlRHJhd091dGxpbmVzKHBhcmFtcyk7XG4gICAgICB0aGlzLiNhZGRUb0RyYXdMYXllcigpO1xuICAgIH1cbiAgfVxuXG4gICNjcmVhdGVEcmF3T3V0bGluZXMoeyBkcmF3T3V0bGluZXMsIGRyYXdJZCwgZHJhd2luZ09wdGlvbnMgfSkge1xuICAgIHRoaXMuI2RyYXdPdXRsaW5lcyA9IGRyYXdPdXRsaW5lcztcbiAgICB0aGlzLl9kcmF3aW5nT3B0aW9ucyB8fD0gZHJhd2luZ09wdGlvbnM7XG5cbiAgICBpZiAoZHJhd0lkID49IDApIHtcbiAgICAgIHRoaXMuX2RyYXdJZCA9IGRyYXdJZDtcbiAgICAgIC8vIFdlIG5lZWQgdG8gcmVkcmF3IHRoZSBkcmF3aW5nIGJlY2F1c2Ugd2UgY2hhbmdlZCB0aGUgY29vcmRpbmF0ZXMgdG8gYmVcbiAgICAgIC8vIGluIHRoZSBib3ggY29vcmRpbmF0ZSBzeXN0ZW0uXG4gICAgICB0aGlzLnBhcmVudC5kcmF3TGF5ZXIuZmluYWxpemVEcmF3KFxuICAgICAgICBkcmF3SWQsXG4gICAgICAgIGRyYXdPdXRsaW5lcy5kZWZhdWx0UHJvcGVydGllc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2UgY3JlYXRlIGEgbmV3IGRyYXdpbmcuXG4gICAgICB0aGlzLl9kcmF3SWQgPSB0aGlzLiNjcmVhdGVEcmF3aW5nKGRyYXdPdXRsaW5lcywgdGhpcy5wYXJlbnQpO1xuICAgIH1cblxuICAgIHRoaXMuI3VwZGF0ZUJib3goZHJhd091dGxpbmVzLmJveCk7XG4gIH1cblxuICAjY3JlYXRlRHJhd2luZyhkcmF3T3V0bGluZXMsIHBhcmVudCkge1xuICAgIGNvbnN0IHsgaWQgfSA9IHBhcmVudC5kcmF3TGF5ZXIuZHJhdyhcbiAgICAgIERyYXdpbmdFZGl0b3IuX21lcmdlU1ZHUHJvcGVydGllcyhcbiAgICAgICAgdGhpcy5fZHJhd2luZ09wdGlvbnMudG9TVkdQcm9wZXJ0aWVzKCksXG4gICAgICAgIGRyYXdPdXRsaW5lcy5kZWZhdWx0U1ZHUHJvcGVydGllc1xuICAgICAgKSxcbiAgICAgIC8qIGlzUGF0aFVwZGF0YWJsZSA9ICovIGZhbHNlLFxuICAgICAgLyogaGFzQ2xpcCA9ICovIGZhbHNlXG4gICAgKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICBzdGF0aWMgX21lcmdlU1ZHUHJvcGVydGllcyhwMSwgcDIpIHtcbiAgICBjb25zdCBwMUtleXMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKHAxKSk7XG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwMikpIHtcbiAgICAgIGlmIChwMUtleXMuaGFzKGtleSkpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihwMVtrZXldLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwMVtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtEcmF3aW5nT3B0aW9uc30gdGhlIGRlZmF1bHQgb3B0aW9ucyB0byB1c2UgZm9yIGEgbmV3IGVkaXRvci5cbiAgICovXG4gIHN0YXRpYyBnZXREZWZhdWx0RHJhd2luZ09wdGlvbnMoX29wdGlvbnMpIHtcbiAgICB1bnJlYWNoYWJsZShcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtNYXA8QW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUsIHN0cmluZz59IGEgbWFwIGJldHdlZW4gdGhlXG4gICAqICAgcGFyYW1ldGVyIHR5cGVzIGFuZCB0aGUgbmFtZSBvZiB0aGUgb3B0aW9ucy5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBnZXR0ZXItcmV0dXJuXG4gIHN0YXRpYyBnZXQgdHlwZXNNYXAoKSB7XG4gICAgdW5yZWFjaGFibGUoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlzRHJhd2VyKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgc2V2ZXJhbCBkcmF3aW5ncyBjYW4gYmUgYWRkZWQgdG8gdGhlXG4gICAqIGFubm90YXRpb24uXG4gICAqL1xuICBzdGF0aWMgZ2V0IHN1cHBvcnRNdWx0aXBsZURyYXdpbmdzKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdGF0aWMgdXBkYXRlRGVmYXVsdFBhcmFtcyh0eXBlLCB2YWx1ZSkge1xuICAgIGNvbnN0IHByb3BlcnR5TmFtZSA9IHRoaXMudHlwZXNNYXAuZ2V0KHR5cGUpO1xuICAgIGlmIChwcm9wZXJ0eU5hbWUpIHtcbiAgICAgIHRoaXMuX2RlZmF1bHREcmF3aW5nT3B0aW9ucy51cGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRQYXJlbnQpIHtcbiAgICAgIERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3LnVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpO1xuICAgICAgdGhpcy5fY3VycmVudFBhcmVudC5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyhcbiAgICAgICAgdGhpcy5fY3VycmVudERyYXdJZCxcbiAgICAgICAgdGhpcy5fZGVmYXVsdERyYXdpbmdPcHRpb25zLnRvU1ZHUHJvcGVydGllcygpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICB1cGRhdGVQYXJhbXModHlwZSwgdmFsdWUpIHtcbiAgICBjb25zdCBwcm9wZXJ0eU5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLnR5cGVzTWFwLmdldCh0eXBlKTtcbiAgICBpZiAocHJvcGVydHlOYW1lKSB7XG4gICAgICB0aGlzLl91cGRhdGVQcm9wZXJ0eSh0eXBlLCBwcm9wZXJ0eU5hbWUsIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0UHJvcGVydGllc1RvVXBkYXRlKCkge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBbXTtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZGVmYXVsdERyYXdpbmdPcHRpb25zO1xuICAgIGZvciAoY29uc3QgW3R5cGUsIG5hbWVdIG9mIHRoaXMudHlwZXNNYXApIHtcbiAgICAgIHByb3BlcnRpZXMucHVzaChbdHlwZSwgb3B0aW9uc1tuYW1lXV0pO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcGVydGllcztcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXQgcHJvcGVydGllc1RvVXBkYXRlKCkge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBbXTtcbiAgICBjb25zdCB7IF9kcmF3aW5nT3B0aW9ucyB9ID0gdGhpcztcbiAgICBmb3IgKGNvbnN0IFt0eXBlLCBuYW1lXSBvZiB0aGlzLmNvbnN0cnVjdG9yLnR5cGVzTWFwKSB7XG4gICAgICBwcm9wZXJ0aWVzLnB1c2goW3R5cGUsIF9kcmF3aW5nT3B0aW9uc1tuYW1lXV0pO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcGVydGllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSBwcm9wZXJ0eSBhbmQgbWFrZSB0aGlzIGFjdGlvbiB1bmRvYWJsZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXG4gICAqL1xuICBfdXBkYXRlUHJvcGVydHkodHlwZSwgbmFtZSwgdmFsdWUpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZHJhd2luZ09wdGlvbnM7XG4gICAgY29uc3Qgc2F2ZWRWYWx1ZSA9IG9wdGlvbnNbbmFtZV07XG4gICAgY29uc3Qgc2V0dGVyID0gdmFsID0+IHtcbiAgICAgIG9wdGlvbnMudXBkYXRlUHJvcGVydHkobmFtZSwgdmFsKTtcbiAgICAgIGNvbnN0IGJib3ggPSB0aGlzLiNkcmF3T3V0bGluZXMudXBkYXRlUHJvcGVydHkobmFtZSwgdmFsKTtcbiAgICAgIGlmIChiYm94KSB7XG4gICAgICAgIHRoaXMuI3VwZGF0ZUJib3goYmJveCk7XG4gICAgICB9XG4gICAgICB0aGlzLnBhcmVudD8uZHJhd0xheWVyLnVwZGF0ZVByb3BlcnRpZXMoXG4gICAgICAgIHRoaXMuX2RyYXdJZCxcbiAgICAgICAgb3B0aW9ucy50b1NWR1Byb3BlcnRpZXMoKVxuICAgICAgKTtcbiAgICB9O1xuICAgIHRoaXMuYWRkQ29tbWFuZHMoe1xuICAgICAgY21kOiBzZXR0ZXIuYmluZCh0aGlzLCB2YWx1ZSksXG4gICAgICB1bmRvOiBzZXR0ZXIuYmluZCh0aGlzLCBzYXZlZFZhbHVlKSxcbiAgICAgIHBvc3Q6IHRoaXMuX3VpTWFuYWdlci51cGRhdGVVSS5iaW5kKHRoaXMuX3VpTWFuYWdlciwgdGhpcyksXG4gICAgICBtdXN0RXhlYzogdHJ1ZSxcbiAgICAgIHR5cGUsXG4gICAgICBvdmVyd3JpdGVJZlNhbWVUeXBlOiB0cnVlLFxuICAgICAga2VlcFVuZG86IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgX29uUmVzaXppbmcoKSB7XG4gICAgdGhpcy5wYXJlbnQ/LmRyYXdMYXllci51cGRhdGVQcm9wZXJ0aWVzKFxuICAgICAgdGhpcy5fZHJhd0lkLFxuICAgICAgRHJhd2luZ0VkaXRvci5fbWVyZ2VTVkdQcm9wZXJ0aWVzKFxuICAgICAgICB0aGlzLiNkcmF3T3V0bGluZXMuZ2V0UGF0aFJlc2l6aW5nU1ZHUHJvcGVydGllcyhcbiAgICAgICAgICB0aGlzLiNjb252ZXJ0VG9EcmF3U3BhY2UoKVxuICAgICAgICApLFxuICAgICAgICB7XG4gICAgICAgICAgYmJveDogdGhpcy4jcm90YXRlQm94KCksXG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIF9vblJlc2l6ZWQoKSB7XG4gICAgdGhpcy5wYXJlbnQ/LmRyYXdMYXllci51cGRhdGVQcm9wZXJ0aWVzKFxuICAgICAgdGhpcy5fZHJhd0lkLFxuICAgICAgRHJhd2luZ0VkaXRvci5fbWVyZ2VTVkdQcm9wZXJ0aWVzKFxuICAgICAgICB0aGlzLiNkcmF3T3V0bGluZXMuZ2V0UGF0aFJlc2l6ZWRTVkdQcm9wZXJ0aWVzKFxuICAgICAgICAgIHRoaXMuI2NvbnZlcnRUb0RyYXdTcGFjZSgpXG4gICAgICAgICksXG4gICAgICAgIHtcbiAgICAgICAgICBiYm94OiB0aGlzLiNyb3RhdGVCb3goKSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgX29uVHJhbnNsYXRpbmcoX3gsIF95KSB7XG4gICAgdGhpcy5wYXJlbnQ/LmRyYXdMYXllci51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuX2RyYXdJZCwge1xuICAgICAgYmJveDogdGhpcy4jcm90YXRlQm94KCksXG4gICAgfSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgX29uVHJhbnNsYXRlZCgpIHtcbiAgICB0aGlzLnBhcmVudD8uZHJhd0xheWVyLnVwZGF0ZVByb3BlcnRpZXMoXG4gICAgICB0aGlzLl9kcmF3SWQsXG4gICAgICBEcmF3aW5nRWRpdG9yLl9tZXJnZVNWR1Byb3BlcnRpZXMoXG4gICAgICAgIHRoaXMuI2RyYXdPdXRsaW5lcy5nZXRQYXRoVHJhbnNsYXRlZFNWR1Byb3BlcnRpZXMoXG4gICAgICAgICAgdGhpcy4jY29udmVydFRvRHJhd1NwYWNlKCksXG4gICAgICAgICAgdGhpcy5wYXJlbnREaW1lbnNpb25zXG4gICAgICAgICksXG4gICAgICAgIHtcbiAgICAgICAgICBiYm94OiB0aGlzLiNyb3RhdGVCb3goKSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBfb25TdGFydERyYWdnaW5nKCkge1xuICAgIHRoaXMucGFyZW50Py5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyh0aGlzLl9kcmF3SWQsIHtcbiAgICAgIHJvb3RDbGFzczoge1xuICAgICAgICBtb3Zpbmc6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgX29uU3RvcERyYWdnaW5nKCkge1xuICAgIHRoaXMucGFyZW50Py5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyh0aGlzLl9kcmF3SWQsIHtcbiAgICAgIHJvb3RDbGFzczoge1xuICAgICAgICBtb3Zpbmc6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBjb21taXQoKSB7XG4gICAgc3VwZXIuY29tbWl0KCk7XG5cbiAgICB0aGlzLmRpc2FibGVFZGl0TW9kZSgpO1xuICAgIHRoaXMuZGlzYWJsZUVkaXRpbmcoKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBkaXNhYmxlRWRpdGluZygpIHtcbiAgICBzdXBlci5kaXNhYmxlRWRpdGluZygpO1xuICAgIHRoaXMuZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBlbmFibGVFZGl0aW5nKCkge1xuICAgIHN1cGVyLmVuYWJsZUVkaXRpbmcoKTtcbiAgICB0aGlzLmRpdi5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGdldEJhc2VUcmFuc2xhdGlvbigpIHtcbiAgICAvLyBUaGUgZWRpdG9yIGl0c2VsZiBkb2Vzbid0IGhhdmUgYW55IENTUyBib3JkZXIgKHdlJ3JlIGRyYXdpbmcgb25lXG4gICAgLy8gb3Vyc2VsdmVzIGluIHVzaW5nIFNWRykuXG4gICAgcmV0dXJuIFswLCAwXTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXQgaXNSZXNpemFibGUoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25jZUFkZGVkKGZvY3VzKSB7XG4gICAgaWYgKCF0aGlzLmFubm90YXRpb25FbGVtZW50SWQpIHtcbiAgICAgIHRoaXMucGFyZW50LmFkZFVuZG9hYmxlRWRpdG9yKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLl9pc0RyYWdnYWJsZSA9IHRydWU7XG4gICAgaWYgKHRoaXMuI211c3RCZUNvbW1pdHRlZCkge1xuICAgICAgdGhpcy4jbXVzdEJlQ29tbWl0dGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmNvbW1pdCgpO1xuICAgICAgdGhpcy5wYXJlbnQuc2V0U2VsZWN0ZWQodGhpcyk7XG4gICAgICBpZiAoZm9jdXMgJiYgdGhpcy5pc09uU2NyZWVuKSB7XG4gICAgICAgIHRoaXMuZGl2LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLiNjbGVhbkRyYXdMYXllcigpO1xuICAgIHN1cGVyLnJlbW92ZSgpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlYnVpbGQoKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdXBlci5yZWJ1aWxkKCk7XG4gICAgaWYgKHRoaXMuZGl2ID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy4jYWRkVG9EcmF3TGF5ZXIoKTtcbiAgICB0aGlzLiN1cGRhdGVCYm94KHRoaXMuI2RyYXdPdXRsaW5lcy5ib3gpO1xuXG4gICAgaWYgKCF0aGlzLmlzQXR0YWNoZWRUb0RPTSkge1xuICAgICAgLy8gQXQgc29tZSBwb2ludCB0aGlzIGVkaXRvciB3YXMgcmVtb3ZlZCBhbmQgd2UncmUgcmVidWlsZGluZyBpdCxcbiAgICAgIC8vIGhlbmNlIHdlIG11c3QgYWRkIGl0IHRvIGl0cyBwYXJlbnQuXG4gICAgICB0aGlzLnBhcmVudC5hZGQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgc2V0UGFyZW50KHBhcmVudCkge1xuICAgIGxldCBtdXN0QmVTZWxlY3RlZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnBhcmVudCAmJiAhcGFyZW50KSB7XG4gICAgICB0aGlzLl91aU1hbmFnZXIucmVtb3ZlU2hvdWxkUmVzY2FsZSh0aGlzKTtcbiAgICAgIHRoaXMuI2NsZWFuRHJhd0xheWVyKCk7XG4gICAgfSBlbHNlIGlmIChwYXJlbnQpIHtcbiAgICAgIHRoaXMuX3VpTWFuYWdlci5hZGRTaG91bGRSZXNjYWxlKHRoaXMpO1xuICAgICAgdGhpcy4jYWRkVG9EcmF3TGF5ZXIocGFyZW50KTtcbiAgICAgIC8vIElmIG11c3RCZVNlbGVjdGVkIGlzIHRydWUgaXQgbWVhbnMgdGhhdCB0aGlzIGVkaXRvciB3YXMgc2VsZWN0ZWRcbiAgICAgIC8vIHdoZW4gaXRzIHBhcmVudCBoYXMgYmVlbiBkZXN0cm95ZWQsIGhlbmNlIHdlIG11c3Qgc2VsZWN0IGl0IGFnYWluLlxuICAgICAgbXVzdEJlU2VsZWN0ZWQgPVxuICAgICAgICAhdGhpcy5wYXJlbnQgJiYgdGhpcy5kaXY/LmNsYXNzTGlzdC5jb250YWlucyhcInNlbGVjdGVkRWRpdG9yXCIpO1xuICAgIH1cbiAgICBzdXBlci5zZXRQYXJlbnQocGFyZW50KTtcbiAgICBpZiAobXVzdEJlU2VsZWN0ZWQpIHtcbiAgICAgIC8vIFdlIHNlbGVjdCBpdCBhZnRlciB0aGUgcGFyZW50IGhhcyBiZWVuIHNldC5cbiAgICAgIHRoaXMuc2VsZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgI2NsZWFuRHJhd0xheWVyKCkge1xuICAgIGlmICh0aGlzLl9kcmF3SWQgPT09IG51bGwgfHwgIXRoaXMucGFyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucGFyZW50LmRyYXdMYXllci5yZW1vdmUodGhpcy5fZHJhd0lkKTtcbiAgICB0aGlzLl9kcmF3SWQgPSBudWxsO1xuXG4gICAgLy8gQWxsIHRoZSBTVkcgcHJvcGVydGllcyBtdXN0IGJlIHJlc2V0IGluIG9yZGVyIHRvIG1ha2UgaXQgcG9zc2libGUgdG9cbiAgICAvLyB1bmRvLlxuICAgIHRoaXMuX2RyYXdpbmdPcHRpb25zLnJlc2V0KCk7XG4gIH1cblxuICAjYWRkVG9EcmF3TGF5ZXIocGFyZW50ID0gdGhpcy5wYXJlbnQpIHtcbiAgICBpZiAodGhpcy5fZHJhd0lkICE9PSBudWxsICYmIHRoaXMucGFyZW50ID09PSBwYXJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2RyYXdJZCAhPT0gbnVsbCkge1xuICAgICAgLy8gVGhlIHBhcmVudCBoYXMgY2hhbmdlZCwgd2UgbmVlZCB0byBtb3ZlIHRoZSBkcmF3aW5nIHRvIHRoZSBuZXcgcGFyZW50LlxuICAgICAgdGhpcy5wYXJlbnQuZHJhd0xheWVyLnVwZGF0ZVBhcmVudCh0aGlzLl9kcmF3SWQsIHBhcmVudC5kcmF3TGF5ZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9kcmF3aW5nT3B0aW9ucy51cGRhdGVBbGwoKTtcbiAgICB0aGlzLl9kcmF3SWQgPSB0aGlzLiNjcmVhdGVEcmF3aW5nKHRoaXMuI2RyYXdPdXRsaW5lcywgcGFyZW50KTtcbiAgfVxuXG4gICNjb252ZXJ0VG9QYXJlbnRTcGFjZShbeCwgeSwgd2lkdGgsIGhlaWdodF0pIHtcbiAgICBjb25zdCB7XG4gICAgICBwYXJlbnREaW1lbnNpb25zOiBbcFcsIHBIXSxcbiAgICAgIHJvdGF0aW9uLFxuICAgIH0gPSB0aGlzO1xuICAgIHN3aXRjaCAocm90YXRpb24pIHtcbiAgICAgIGNhc2UgOTA6XG4gICAgICAgIHJldHVybiBbeSwgMSAtIHgsIHdpZHRoICogKHBIIC8gcFcpLCBoZWlnaHQgKiAocFcgLyBwSCldO1xuICAgICAgY2FzZSAxODA6XG4gICAgICAgIHJldHVybiBbMSAtIHgsIDEgLSB5LCB3aWR0aCwgaGVpZ2h0XTtcbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICByZXR1cm4gWzEgLSB5LCB4LCB3aWR0aCAqIChwSCAvIHBXKSwgaGVpZ2h0ICogKHBXIC8gcEgpXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbeCwgeSwgd2lkdGgsIGhlaWdodF07XG4gICAgfVxuICB9XG5cbiAgI2NvbnZlcnRUb0RyYXdTcGFjZSgpIHtcbiAgICBjb25zdCB7XG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgcGFyZW50RGltZW5zaW9uczogW3BXLCBwSF0sXG4gICAgICByb3RhdGlvbixcbiAgICB9ID0gdGhpcztcbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICBjYXNlIDkwOlxuICAgICAgICByZXR1cm4gWzEgLSB5LCB4LCB3aWR0aCAqIChwVyAvIHBIKSwgaGVpZ2h0ICogKHBIIC8gcFcpXTtcbiAgICAgIGNhc2UgMTgwOlxuICAgICAgICByZXR1cm4gWzEgLSB4LCAxIC0geSwgd2lkdGgsIGhlaWdodF07XG4gICAgICBjYXNlIDI3MDpcbiAgICAgICAgcmV0dXJuIFt5LCAxIC0geCwgd2lkdGggKiAocFcgLyBwSCksIGhlaWdodCAqIChwSCAvIHBXKV07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gW3gsIHksIHdpZHRoLCBoZWlnaHRdO1xuICAgIH1cbiAgfVxuXG4gICN1cGRhdGVCYm94KGJib3gpIHtcbiAgICBbdGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XSA9XG4gICAgICB0aGlzLiNjb252ZXJ0VG9QYXJlbnRTcGFjZShiYm94KTtcbiAgICBpZiAodGhpcy5kaXYpIHtcbiAgICAgIHRoaXMuZml4QW5kU2V0UG9zaXRpb24oKTtcbiAgICAgIGNvbnN0IFtwYXJlbnRXaWR0aCwgcGFyZW50SGVpZ2h0XSA9IHRoaXMucGFyZW50RGltZW5zaW9ucztcbiAgICAgIHRoaXMuc2V0RGltcyh0aGlzLndpZHRoICogcGFyZW50V2lkdGgsIHRoaXMuaGVpZ2h0ICogcGFyZW50SGVpZ2h0KTtcbiAgICB9XG4gICAgdGhpcy5fb25SZXNpemVkKCk7XG4gIH1cblxuICAjcm90YXRlQm94KCkge1xuICAgIC8vIFdlJ3ZlIHRvIGRlYWwgd2l0aCB0d28gcm90YXRpb25zOiB0aGUgcm90YXRpb24gb2YgdGhlIGFubm90YXRpb24gYW5kIHRoZVxuICAgIC8vIHJvdGF0aW9uIG9mIHRoZSBwYXJlbnQgcGFnZS5cbiAgICAvLyBXaGVuIHRoZSBwYWdlIGlzIHJvdGF0ZWQsIGFsbCB0aGUgbGF5ZXJzIGFyZSBqdXN0IHJvdGF0ZWQgdGhhbmtzIHRvIENTU1xuICAgIC8vIGJ1dCB0aGVyZSBpcyBhIG5vdGFibGUgZXhjZXB0aW9uOiB0aGUgY2FudmFzIHdyYXBwZXIuXG4gICAgLy8gVGhlIGNhbnZhcyB3cmFwcGVyIGlzIG5vdCByb3RhdGVkIGJ1dCB0aGUgZGltZW5zaW9ucyBhcmUgKG9yIG5vdCkgc3dhcHBlZFxuICAgIC8vIGFuZCB0aGUgcGFnZSBpcyByZWRyYXduIHdpdGggdGhlIHJvdGF0aW9uIGFwcGxpZWQgdG8gdGhlIGNhbnZhcy5cbiAgICAvLyBUaGUgZHJhd24gbGF5ZXIgaXMgdW5kZXIgdGhlIGNhbnZhcyB3cmFwcGVyIGFuZCBpcyBub3Qgcm90YXRlZCBzbyB3ZSBoYXZlXG4gICAgLy8gdG8gXCJtYW51YWxseVwiIHJvdGF0ZSB0aGUgY29vcmRpbmF0ZXMuXG4gICAgLy9cbiAgICAvLyBUaGUgY29vcmRpbmF0ZXMgKHRoaXMueCwgdGhpcy55KSBjb3JyZXNwb25kIHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2ZcbiAgICAvLyB0aGUgZWRpdG9yIGFmdGVyIGl0IGhhcyBiZWVuIHJvdGF0ZWQgaW4gdGhlIHBhZ2UgY29vcmRpbmF0ZSBzeXN0ZW0uXG5cbiAgICBjb25zdCB7XG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgcm90YXRpb24sXG4gICAgICBwYXJlbnRSb3RhdGlvbixcbiAgICAgIHBhcmVudERpbWVuc2lvbnM6IFtwVywgcEhdLFxuICAgIH0gPSB0aGlzO1xuICAgIHN3aXRjaCAoKHJvdGF0aW9uICogNCArIHBhcmVudFJvdGF0aW9uKSAvIDkwKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIC8vIDAgLT4gOTBcbiAgICAgICAgcmV0dXJuIFsxIC0geSAtIGhlaWdodCwgeCwgaGVpZ2h0LCB3aWR0aF07XG4gICAgICBjYXNlIDI6XG4gICAgICAgIC8vIDAgLT4gMTgwXG4gICAgICAgIHJldHVybiBbMSAtIHggLSB3aWR0aCwgMSAtIHkgLSBoZWlnaHQsIHdpZHRoLCBoZWlnaHRdO1xuICAgICAgY2FzZSAzOlxuICAgICAgICAvLyAwIC0+IDI3MFxuICAgICAgICByZXR1cm4gW3ksIDEgLSB4IC0gd2lkdGgsIGhlaWdodCwgd2lkdGhdO1xuICAgICAgY2FzZSA0OlxuICAgICAgICAvLyA5MCAtPiAwXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgeCxcbiAgICAgICAgICB5IC0gd2lkdGggKiAocFcgLyBwSCksXG4gICAgICAgICAgaGVpZ2h0ICogKHBIIC8gcFcpLFxuICAgICAgICAgIHdpZHRoICogKHBXIC8gcEgpLFxuICAgICAgICBdO1xuICAgICAgY2FzZSA1OlxuICAgICAgICAvLyA5MCAtPiA5MFxuICAgICAgICByZXR1cm4gWzEgLSB5LCB4LCB3aWR0aCAqIChwVyAvIHBIKSwgaGVpZ2h0ICogKHBIIC8gcFcpXTtcbiAgICAgIGNhc2UgNjpcbiAgICAgICAgLy8gOTAgLT4gMTgwXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgMSAtIHggLSBoZWlnaHQgKiAocEggLyBwVyksXG4gICAgICAgICAgMSAtIHksXG4gICAgICAgICAgaGVpZ2h0ICogKHBIIC8gcFcpLFxuICAgICAgICAgIHdpZHRoICogKHBXIC8gcEgpLFxuICAgICAgICBdO1xuICAgICAgY2FzZSA3OlxuICAgICAgICAvLyA5MCAtPiAyNzBcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB5IC0gd2lkdGggKiAocFcgLyBwSCksXG4gICAgICAgICAgMSAtIHggLSBoZWlnaHQgKiAocEggLyBwVyksXG4gICAgICAgICAgd2lkdGggKiAocFcgLyBwSCksXG4gICAgICAgICAgaGVpZ2h0ICogKHBIIC8gcFcpLFxuICAgICAgICBdO1xuICAgICAgY2FzZSA4OlxuICAgICAgICAvLyAxODAgLT4gMFxuICAgICAgICByZXR1cm4gW3ggLSB3aWR0aCwgeSAtIGhlaWdodCwgd2lkdGgsIGhlaWdodF07XG4gICAgICBjYXNlIDk6XG4gICAgICAgIC8vIDE4MCAtPiA5MFxuICAgICAgICByZXR1cm4gWzEgLSB5LCB4IC0gd2lkdGgsIGhlaWdodCwgd2lkdGhdO1xuICAgICAgY2FzZSAxMDpcbiAgICAgICAgLy8gMTgwIC0+IDE4MFxuICAgICAgICByZXR1cm4gWzEgLSB4LCAxIC0geSwgd2lkdGgsIGhlaWdodF07XG4gICAgICBjYXNlIDExOlxuICAgICAgICAvLyAxODAgLT4gMjcwXG4gICAgICAgIHJldHVybiBbeSAtIGhlaWdodCwgMSAtIHgsIGhlaWdodCwgd2lkdGhdO1xuICAgICAgY2FzZSAxMjpcbiAgICAgICAgLy8gMjcwIC0+IDBcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB4IC0gaGVpZ2h0ICogKHBIIC8gcFcpLFxuICAgICAgICAgIHksXG4gICAgICAgICAgaGVpZ2h0ICogKHBIIC8gcFcpLFxuICAgICAgICAgIHdpZHRoICogKHBXIC8gcEgpLFxuICAgICAgICBdO1xuICAgICAgY2FzZSAxMzpcbiAgICAgICAgLy8gMjcwIC0+IDkwXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgMSAtIHkgLSB3aWR0aCAqIChwVyAvIHBIKSxcbiAgICAgICAgICB4IC0gaGVpZ2h0ICogKHBIIC8gcFcpLFxuICAgICAgICAgIHdpZHRoICogKHBXIC8gcEgpLFxuICAgICAgICAgIGhlaWdodCAqIChwSCAvIHBXKSxcbiAgICAgICAgXTtcbiAgICAgIGNhc2UgMTQ6XG4gICAgICAgIC8vIDI3MCAtPiAxODBcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAxIC0geCxcbiAgICAgICAgICAxIC0geSAtIHdpZHRoICogKHBXIC8gcEgpLFxuICAgICAgICAgIGhlaWdodCAqIChwSCAvIHBXKSxcbiAgICAgICAgICB3aWR0aCAqIChwVyAvIHBIKSxcbiAgICAgICAgXTtcbiAgICAgIGNhc2UgMTU6XG4gICAgICAgIC8vIDI3MCAtPiAyNzBcbiAgICAgICAgcmV0dXJuIFt5LCAxIC0geCwgd2lkdGggKiAocFcgLyBwSCksIGhlaWdodCAqIChwSCAvIHBXKV07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyAwIC0+IDBcbiAgICAgICAgcmV0dXJuIFt4LCB5LCB3aWR0aCwgaGVpZ2h0XTtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcm90YXRlKCkge1xuICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wYXJlbnQuZHJhd0xheWVyLnVwZGF0ZVByb3BlcnRpZXMoXG4gICAgICB0aGlzLl9kcmF3SWQsXG4gICAgICBEcmF3aW5nRWRpdG9yLl9tZXJnZVNWR1Byb3BlcnRpZXMoXG4gICAgICAgIHtcbiAgICAgICAgICBiYm94OiB0aGlzLiNyb3RhdGVCb3goKSxcbiAgICAgICAgfSxcbiAgICAgICAgdGhpcy4jZHJhd091dGxpbmVzLnVwZGF0ZVJvdGF0aW9uKFxuICAgICAgICAgICh0aGlzLnBhcmVudFJvdGF0aW9uIC0gdGhpcy5yb3RhdGlvbiArIDM2MCkgJSAzNjBcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBvblNjYWxlQ2hhbmdpbmcoKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiN1cGRhdGVCYm94KFxuICAgICAgdGhpcy4jZHJhd091dGxpbmVzLnVwZGF0ZVBhcmVudERpbWVuc2lvbnMoXG4gICAgICAgIHRoaXMucGFyZW50RGltZW5zaW9ucyxcbiAgICAgICAgdGhpcy5wYXJlbnQuc2NhbGVcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIG9uU2NhbGVDaGFuZ2luZ1doZW5EcmF3aW5nKCkge31cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLmRpdikge1xuICAgICAgcmV0dXJuIHRoaXMuZGl2O1xuICAgIH1cblxuICAgIGxldCBiYXNlWCwgYmFzZVk7XG4gICAgaWYgKHRoaXMuX2lzQ29weSkge1xuICAgICAgYmFzZVggPSB0aGlzLng7XG4gICAgICBiYXNlWSA9IHRoaXMueTtcbiAgICB9XG5cbiAgICBjb25zdCBkaXYgPSBzdXBlci5yZW5kZXIoKTtcbiAgICBkaXYuY2xhc3NMaXN0LmFkZChcImRyYXdcIik7XG5cbiAgICBjb25zdCBkcmF3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkaXYuYXBwZW5kKGRyYXdEaXYpO1xuICAgIGRyYXdEaXYuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgIGRyYXdEaXYuY2xhc3NOYW1lID0gXCJpbnRlcm5hbFwiO1xuICAgIGNvbnN0IFtwYXJlbnRXaWR0aCwgcGFyZW50SGVpZ2h0XSA9IHRoaXMucGFyZW50RGltZW5zaW9ucztcbiAgICB0aGlzLnNldERpbXModGhpcy53aWR0aCAqIHBhcmVudFdpZHRoLCB0aGlzLmhlaWdodCAqIHBhcmVudEhlaWdodCk7XG4gICAgdGhpcy5fdWlNYW5hZ2VyLmFkZFNob3VsZFJlc2NhbGUodGhpcyk7XG4gICAgdGhpcy5kaXNhYmxlRWRpdGluZygpO1xuXG4gICAgaWYgKHRoaXMuX2lzQ29weSkge1xuICAgICAgdGhpcy5fbW92ZUFmdGVyUGFzdGUoYmFzZVgsIGJhc2VZKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGl2O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBkcmF3ZXIgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgZXZlbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgZXZlbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYXJlbnRXaWR0aCAtIFRoZSBwYXJlbnQgd2lkdGguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYXJlbnRIZWlnaHQgLSBUaGUgcGFyZW50IGhlaWdodC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIC0gVGhlIHBhcmVudCByb3RhdGlvbi5cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVEcmF3ZXJJbnN0YW5jZShfeCwgX3ksIF9wYXJlbnRXaWR0aCwgX3BhcmVudEhlaWdodCwgX3JvdGF0aW9uKSB7XG4gICAgdW5yZWFjaGFibGUoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cblxuICBzdGF0aWMgc3RhcnREcmF3aW5nKHBhcmVudCwgdWlNYW5hZ2VyLCBfaXNMVFIsIGV2ZW50KSB7XG4gICAgLy8gVGhlIF9jdXJyZW50UG9pbnRlclR5cGUgaXMgc2V0IHdoZW4gdGhlIHVzZXIgc3RhcnRzIGFuIGVtcHR5IGRyYXdpbmdcbiAgICAvLyBzZXNzaW9uLiBJZiwgaW4gdGhlIHNhbWUgZHJhd2luZyBzZXNzaW9uLCB0aGUgdXNlciBzdGFydHMgdXNpbmcgYVxuICAgIC8vIGRpZmZlcmVudCB0eXBlIG9mIHBvaW50ZXIgKGUuZy4gYSBwZW4gYW5kIHRoZW4gYSBmaW5nZXIpLCB3ZSBqdXN0IHJldHVybi5cbiAgICAvL1xuICAgIC8vIFRoZSBfY3VycmVudFBvaW50ZXJJZCAgYW5kIF9jdXJyZW50UG9pbnRlcklkcyBhcmUgdXNlZCB0byBrZWVwIHRyYWNrIG9mXG4gICAgLy8gdGhlIHBvaW50ZXJzIHdpdGggYSBzYW1lIHR5cGUgKGUuZy4gdHdvIGZpbmdlcnMpLiBJZiB0aGUgdXNlciBzdGFydHMgdG9cbiAgICAvLyBkcmF3IHdpdGggYSBmaW5nZXIgYW5kIHRoZW4gdXNlcyBhIHNlY29uZCBmaW5nZXIsIHdlIGp1c3Qgc3RvcCB0aGVcbiAgICAvLyBjdXJyZW50IGRyYXdpbmcgYW5kIGxldCB0aGUgdXNlciB6b29tIHRoZSBkb2N1bWVudC5cblxuICAgIGNvbnN0IHsgdGFyZ2V0LCBvZmZzZXRYOiB4LCBvZmZzZXRZOiB5LCBwb2ludGVySWQsIHBvaW50ZXJUeXBlIH0gPSBldmVudDtcbiAgICBpZiAoXG4gICAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50UG9pbnRlclR5cGUgJiZcbiAgICAgIERyYXdpbmdFZGl0b3IuI2N1cnJlbnRQb2ludGVyVHlwZSAhPT0gcG9pbnRlclR5cGVcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICB2aWV3cG9ydDogeyByb3RhdGlvbiB9LFxuICAgIH0gPSBwYXJlbnQ7XG4gICAgY29uc3QgeyB3aWR0aDogcGFyZW50V2lkdGgsIGhlaWdodDogcGFyZW50SGVpZ2h0IH0gPVxuICAgICAgdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgY29uc3QgYWMgPSAoRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXdpbmdBQyA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSk7XG4gICAgY29uc3Qgc2lnbmFsID0gcGFyZW50LmNvbWJpbmVkU2lnbmFsKGFjKTtcblxuICAgIERyYXdpbmdFZGl0b3IuI2N1cnJlbnRQb2ludGVySWQgfHw9IHBvaW50ZXJJZDtcbiAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50UG9pbnRlclR5cGUgPz89IHBvaW50ZXJUeXBlO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcInBvaW50ZXJ1cFwiLFxuICAgICAgZSA9PiB7XG4gICAgICAgIGlmIChEcmF3aW5nRWRpdG9yLiNjdXJyZW50UG9pbnRlcklkID09PSBlLnBvaW50ZXJJZCkge1xuICAgICAgICAgIHRoaXMuX2VuZERyYXcoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgRHJhd2luZ0VkaXRvci4jY3VycmVudFBvaW50ZXJJZHM/LmRlbGV0ZShlLnBvaW50ZXJJZCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IHNpZ25hbCB9XG4gICAgKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwicG9pbnRlcmNhbmNlbFwiLFxuICAgICAgZSA9PiB7XG4gICAgICAgIGlmIChEcmF3aW5nRWRpdG9yLiNjdXJyZW50UG9pbnRlcklkID09PSBlLnBvaW50ZXJJZCkge1xuICAgICAgICAgIHRoaXMuX2N1cnJlbnRQYXJlbnQuZW5kRHJhd2luZ1Nlc3Npb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50UG9pbnRlcklkcz8uZGVsZXRlKGUucG9pbnRlcklkKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgc2lnbmFsIH1cbiAgICApO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJwb2ludGVyZG93blwiLFxuICAgICAgZSA9PiB7XG4gICAgICAgIGlmIChEcmF3aW5nRWRpdG9yLiNjdXJyZW50UG9pbnRlclR5cGUgIT09IGUucG9pbnRlclR5cGUpIHtcbiAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgd2Ugc3RhcnRlZCB3aXRoIGEgcGVuIGFuZCB0aGUgdXNlclxuICAgICAgICAgIC8vIGlzIG5vdyB1c2luZyBhIGZpbmdlci5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGb3IgZXhhbXBsZSwgdGhlIHVzZXIgaXMgdXNpbmcgYSBzZWNvbmQgZmluZ2VyLlxuICAgICAgICAoRHJhd2luZ0VkaXRvci4jY3VycmVudFBvaW50ZXJJZHMgfHw9IG5ldyBTZXQoKSkuYWRkKGUucG9pbnRlcklkKTtcblxuICAgICAgICAvLyBUaGUgZmlyc3QgZmluZ2VyIGNyZWF0ZWQgYSBmaXJzdCBwb2ludCBhbmQgYSBzZWNvbmQgZmluZ2VyIGp1c3RcbiAgICAgICAgLy8gc3RhcnRlZCwgc28gd2Ugc3RvcCB0aGUgZHJhd2luZyBhbmQgcmVtb3ZlIHRoaXMgb25seSBwb2ludC5cbiAgICAgICAgaWYgKERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3LmlzQ2FuY2VsbGFibGUoKSkge1xuICAgICAgICAgIERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3LnJlbW92ZUxhc3RFbGVtZW50KCk7XG4gICAgICAgICAgaWYgKERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFBhcmVudC5lbmREcmF3aW5nU2Vzc2lvbigvKiBpc0Fib3J0ZWQgPSAqLyB0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZW5kRHJhdyhudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgICBzaWduYWwsXG4gICAgICB9XG4gICAgKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIG5vQ29udGV4dE1lbnUsIHsgc2lnbmFsIH0pO1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5fZHJhd01vdmUuYmluZCh0aGlzKSwge1xuICAgICAgc2lnbmFsLFxuICAgIH0pO1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJ0b3VjaG1vdmVcIixcbiAgICAgIGUgPT4ge1xuICAgICAgICBpZiAoZS50aW1lU3RhbXAgPT09IERyYXdpbmdFZGl0b3IuI2N1cnJlbnRNb3ZlVGltZXN0YW1wKSB7XG4gICAgICAgICAgLy8gVGhpcyBtb3ZlIGV2ZW50IGlzIHVzZWQgdG8gZHJhdyBzbyB3ZSBkb24ndCB3YW50IHRvIHNjcm9sbC5cbiAgICAgICAgICBzdG9wRXZlbnQoZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IHNpZ25hbCB9XG4gICAgKTtcbiAgICBwYXJlbnQudG9nZ2xlRHJhd2luZygpO1xuICAgIHVpTWFuYWdlci5fZWRpdG9yVW5kb0Jhcj8uaGlkZSgpO1xuXG4gICAgaWYgKERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3KSB7XG4gICAgICBwYXJlbnQuZHJhd0xheWVyLnVwZGF0ZVByb3BlcnRpZXMoXG4gICAgICAgIHRoaXMuX2N1cnJlbnREcmF3SWQsXG4gICAgICAgIERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3LnN0YXJ0TmV3KFxuICAgICAgICAgIHgsXG4gICAgICAgICAgeSxcbiAgICAgICAgICBwYXJlbnRXaWR0aCxcbiAgICAgICAgICBwYXJlbnRIZWlnaHQsXG4gICAgICAgICAgcm90YXRpb25cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB1aU1hbmFnZXIudXBkYXRlVUlGb3JEZWZhdWx0UHJvcGVydGllcyh0aGlzKTtcblxuICAgIERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3ID0gdGhpcy5jcmVhdGVEcmF3ZXJJbnN0YW5jZShcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgcGFyZW50V2lkdGgsXG4gICAgICBwYXJlbnRIZWlnaHQsXG4gICAgICByb3RhdGlvblxuICAgICk7XG4gICAgRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXdpbmdPcHRpb25zID0gdGhpcy5nZXREZWZhdWx0RHJhd2luZ09wdGlvbnMoKTtcbiAgICB0aGlzLl9jdXJyZW50UGFyZW50ID0gcGFyZW50O1xuXG4gICAgKHsgaWQ6IHRoaXMuX2N1cnJlbnREcmF3SWQgfSA9IHBhcmVudC5kcmF3TGF5ZXIuZHJhdyhcbiAgICAgIHRoaXMuX21lcmdlU1ZHUHJvcGVydGllcyhcbiAgICAgICAgRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXdpbmdPcHRpb25zLnRvU1ZHUHJvcGVydGllcygpLFxuICAgICAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50RHJhdy5kZWZhdWx0U1ZHUHJvcGVydGllc1xuICAgICAgKSxcbiAgICAgIC8qIGlzUGF0aFVwZGF0YWJsZSA9ICovIHRydWUsXG4gICAgICAvKiBoYXNDbGlwID0gKi8gZmFsc2VcbiAgICApKTtcbiAgfVxuXG4gIHN0YXRpYyBfZHJhd01vdmUoZXZlbnQpIHtcbiAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50TW92ZVRpbWVzdGFtcCA9IC0xO1xuICAgIGlmICghRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBvZmZzZXRYLCBvZmZzZXRZLCBwb2ludGVySWQgfSA9IGV2ZW50O1xuXG4gICAgaWYgKERyYXdpbmdFZGl0b3IuI2N1cnJlbnRQb2ludGVySWQgIT09IHBvaW50ZXJJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoRHJhd2luZ0VkaXRvci4jY3VycmVudFBvaW50ZXJJZHM/LnNpemUgPj0gMSkge1xuICAgICAgLy8gVGhlIHVzZXIgaXMgdXNpbmcgbXVsdGlwbGUgZmluZ2VycyBhbmQgdGhlIGZpcnN0IG9uZSBpcyBtb3ZpbmcuXG4gICAgICB0aGlzLl9lbmREcmF3KGV2ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudFBhcmVudC5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyhcbiAgICAgIHRoaXMuX2N1cnJlbnREcmF3SWQsXG4gICAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50RHJhdy5hZGQob2Zmc2V0WCwgb2Zmc2V0WSlcbiAgICApO1xuICAgIC8vIFdlIHRyYWNrIHRoZSB0aW1lc3RhbXAgdG8ga25vdyBpZiB0aGUgdG91Y2htb3ZlIGV2ZW50IGlzIHVzZWQgdG8gZHJhdy5cbiAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50TW92ZVRpbWVzdGFtcCA9IGV2ZW50LnRpbWVTdGFtcDtcbiAgICBzdG9wRXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgc3RhdGljIF9jbGVhbnVwKGFsbCkge1xuICAgIGlmIChhbGwpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnREcmF3SWQgPSAtMTtcbiAgICAgIHRoaXMuX2N1cnJlbnRQYXJlbnQgPSBudWxsO1xuICAgICAgRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXcgPSBudWxsO1xuICAgICAgRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXdpbmdPcHRpb25zID0gbnVsbDtcbiAgICAgIERyYXdpbmdFZGl0b3IuI2N1cnJlbnRQb2ludGVyVHlwZSA9IG51bGw7XG4gICAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50TW92ZVRpbWVzdGFtcCA9IE5hTjtcbiAgICB9XG5cbiAgICBpZiAoRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXdpbmdBQykge1xuICAgICAgRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXdpbmdBQy5hYm9ydCgpO1xuICAgICAgRHJhd2luZ0VkaXRvci4jY3VycmVudERyYXdpbmdBQyA9IG51bGw7XG4gICAgICBEcmF3aW5nRWRpdG9yLiNjdXJyZW50UG9pbnRlcklkID0gTmFOO1xuICAgICAgRHJhd2luZ0VkaXRvci4jY3VycmVudFBvaW50ZXJJZHMgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfZW5kRHJhdyhldmVudCkge1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuX2N1cnJlbnRQYXJlbnQ7XG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwYXJlbnQudG9nZ2xlRHJhd2luZyh0cnVlKTtcbiAgICB0aGlzLl9jbGVhbnVwKGZhbHNlKTtcblxuICAgIGlmIChldmVudD8udGFyZ2V0ID09PSBwYXJlbnQuZGl2KSB7XG4gICAgICBwYXJlbnQuZHJhd0xheWVyLnVwZGF0ZVByb3BlcnRpZXMoXG4gICAgICAgIHRoaXMuX2N1cnJlbnREcmF3SWQsXG4gICAgICAgIERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3LmVuZChldmVudC5vZmZzZXRYLCBldmVudC5vZmZzZXRZKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3VwcG9ydE11bHRpcGxlRHJhd2luZ3MpIHtcbiAgICAgIGNvbnN0IGRyYXcgPSBEcmF3aW5nRWRpdG9yLiNjdXJyZW50RHJhdztcbiAgICAgIGNvbnN0IGRyYXdJZCA9IHRoaXMuX2N1cnJlbnREcmF3SWQ7XG4gICAgICBjb25zdCBsYXN0RWxlbWVudCA9IGRyYXcuZ2V0TGFzdEVsZW1lbnQoKTtcbiAgICAgIHBhcmVudC5hZGRDb21tYW5kcyh7XG4gICAgICAgIGNtZDogKCkgPT4ge1xuICAgICAgICAgIHBhcmVudC5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyhcbiAgICAgICAgICAgIGRyYXdJZCxcbiAgICAgICAgICAgIGRyYXcuc2V0TGFzdEVsZW1lbnQobGFzdEVsZW1lbnQpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5kbzogKCkgPT4ge1xuICAgICAgICAgIHBhcmVudC5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyhkcmF3SWQsIGRyYXcucmVtb3ZlTGFzdEVsZW1lbnQoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG11c3RFeGVjOiBmYWxzZSxcbiAgICAgICAgdHlwZTogQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRFJBV19TVEVQLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmVuZERyYXdpbmcoLyogaXNBYm9ydGVkID0gKi8gZmFsc2UpO1xuICB9XG5cbiAgc3RhdGljIGVuZERyYXdpbmcoaXNBYm9ydGVkKSB7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5fY3VycmVudFBhcmVudDtcbiAgICBpZiAoIXBhcmVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHBhcmVudC50b2dnbGVEcmF3aW5nKHRydWUpO1xuICAgIHBhcmVudC5jbGVhblVuZG9TdGFjayhBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5EUkFXX1NURVApO1xuXG4gICAgaWYgKCFEcmF3aW5nRWRpdG9yLiNjdXJyZW50RHJhdy5pc0VtcHR5KCkpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGFnZURpbWVuc2lvbnM6IFtwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdLFxuICAgICAgICBzY2FsZSxcbiAgICAgIH0gPSBwYXJlbnQ7XG5cbiAgICAgIGNvbnN0IGVkaXRvciA9IHBhcmVudC5jcmVhdGVBbmRBZGROZXdFZGl0b3IoXG4gICAgICAgIHsgb2Zmc2V0WDogMCwgb2Zmc2V0WTogMCB9LFxuICAgICAgICBmYWxzZSxcbiAgICAgICAge1xuICAgICAgICAgIGRyYXdJZDogdGhpcy5fY3VycmVudERyYXdJZCxcbiAgICAgICAgICBkcmF3T3V0bGluZXM6IERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3LmdldE91dGxpbmVzKFxuICAgICAgICAgICAgcGFnZVdpZHRoICogc2NhbGUsXG4gICAgICAgICAgICBwYWdlSGVpZ2h0ICogc2NhbGUsXG4gICAgICAgICAgICBzY2FsZSxcbiAgICAgICAgICAgIHRoaXMuX0lOTkVSX01BUkdJTlxuICAgICAgICAgICksXG4gICAgICAgICAgZHJhd2luZ09wdGlvbnM6IERyYXdpbmdFZGl0b3IuI2N1cnJlbnREcmF3aW5nT3B0aW9ucyxcbiAgICAgICAgICBtdXN0QmVDb21taXR0ZWQ6ICFpc0Fib3J0ZWQsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB0aGlzLl9jbGVhbnVwKHRydWUpO1xuICAgICAgcmV0dXJuIGVkaXRvcjtcbiAgICB9XG5cbiAgICBwYXJlbnQuZHJhd0xheWVyLnJlbW92ZSh0aGlzLl9jdXJyZW50RHJhd0lkKTtcbiAgICB0aGlzLl9jbGVhbnVwKHRydWUpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZHJhd2luZyBvcHRpb25zLlxuICAgKiBAcGFyYW0ge09iamVjdH0gX2RhdGFcbiAgICovXG4gIGNyZWF0ZURyYXdpbmdPcHRpb25zKF9kYXRhKSB7fVxuXG4gIC8qKlxuICAgKiBEZXNlcmlhbGl6ZSB0aGUgZHJhd2luZyBvdXRsaW5lcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VYIC0gVGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgcGFnZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VZIC0gVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgcGFnZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VXaWR0aCAtIFRoZSB3aWR0aCBvZiB0aGUgcGFnZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VIZWlnaHQgLSBUaGUgaGVpZ2h0IG9mIHRoZSBwYWdlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5uZXJXaWR0aCAtIFRoZSBpbm5lciB3aWR0aC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBUaGUgZGF0YSB0byBkZXNlcmlhbGl6ZS5cbiAgICogQHJldHVybnMge09iamVjdH0gVGhlIGRlc2VyaWFsaXplZCBvdXRsaW5lcy5cbiAgICovXG4gIHN0YXRpYyBkZXNlcmlhbGl6ZURyYXcoXG4gICAgX3BhZ2VYLFxuICAgIF9wYWdlWSxcbiAgICBfcGFnZVdpZHRoLFxuICAgIF9wYWdlSGVpZ2h0LFxuICAgIF9pbm5lcldpZHRoLFxuICAgIF9kYXRhXG4gICkge1xuICAgIHVucmVhY2hhYmxlKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhLCBwYXJlbnQsIHVpTWFuYWdlcikge1xuICAgIGNvbnN0IHtcbiAgICAgIHJhd0RpbXM6IHsgcGFnZVdpZHRoLCBwYWdlSGVpZ2h0LCBwYWdlWCwgcGFnZVkgfSxcbiAgICB9ID0gcGFyZW50LnZpZXdwb3J0O1xuICAgIGNvbnN0IGRyYXdPdXRsaW5lcyA9IHRoaXMuZGVzZXJpYWxpemVEcmF3KFxuICAgICAgcGFnZVgsXG4gICAgICBwYWdlWSxcbiAgICAgIHBhZ2VXaWR0aCxcbiAgICAgIHBhZ2VIZWlnaHQsXG4gICAgICB0aGlzLl9JTk5FUl9NQVJHSU4sXG4gICAgICBkYXRhXG4gICAgKTtcbiAgICBjb25zdCBlZGl0b3IgPSBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShkYXRhLCBwYXJlbnQsIHVpTWFuYWdlcik7XG4gICAgZWRpdG9yLmNyZWF0ZURyYXdpbmdPcHRpb25zKGRhdGEpO1xuICAgIGVkaXRvci4jY3JlYXRlRHJhd091dGxpbmVzKHsgZHJhd091dGxpbmVzIH0pO1xuICAgIGVkaXRvci4jYWRkVG9EcmF3TGF5ZXIoKTtcbiAgICBlZGl0b3Iub25TY2FsZUNoYW5naW5nKCk7XG4gICAgZWRpdG9yLnJvdGF0ZSgpO1xuXG4gICAgcmV0dXJuIGVkaXRvcjtcbiAgfVxuXG4gIHNlcmlhbGl6ZURyYXcoaXNGb3JDb3B5aW5nKSB7XG4gICAgY29uc3QgW3BhZ2VYLCBwYWdlWV0gPSB0aGlzLnBhZ2VUcmFuc2xhdGlvbjtcbiAgICBjb25zdCBbcGFnZVdpZHRoLCBwYWdlSGVpZ2h0XSA9IHRoaXMucGFnZURpbWVuc2lvbnM7XG4gICAgcmV0dXJuIHRoaXMuI2RyYXdPdXRsaW5lcy5zZXJpYWxpemUoXG4gICAgICBbcGFnZVgsIHBhZ2VZLCBwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdLFxuICAgICAgaXNGb3JDb3B5aW5nXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICByZW5kZXJBbm5vdGF0aW9uRWxlbWVudChhbm5vdGF0aW9uKSB7XG4gICAgYW5ub3RhdGlvbi51cGRhdGVFZGl0ZWQoe1xuICAgICAgcmVjdDogdGhpcy5nZXRSZWN0KDAsIDApLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBzdGF0aWMgY2FuQ3JlYXRlTmV3RW1wdHlFZGl0b3IoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCB7IERyYXdpbmdFZGl0b3IsIERyYXdpbmdPcHRpb25zIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjQgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE1hdGhDbGFtcCwgVXRpbCB9IGZyb20gXCIuLi8uLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgT3V0bGluZSB9IGZyb20gXCIuL291dGxpbmUuanNcIjtcblxuY2xhc3MgSW5rRHJhd091dGxpbmVyIHtcbiAgLy8gVGhlIGxhc3QgMyBwb2ludHMgb2YgdGhlIGxpbmUuXG4gICNsYXN0ID0gbmV3IEZsb2F0NjRBcnJheSg2KTtcblxuICAjbGluZTtcblxuICAjbGluZXM7XG5cbiAgI3JvdGF0aW9uO1xuXG4gICN0aGlja25lc3M7XG5cbiAgI3BvaW50cztcblxuICAjbGFzdFNWR1BhdGggPSBcIlwiO1xuXG4gICNsYXN0SW5kZXggPSAwO1xuXG4gICNvdXRsaW5lcyA9IG5ldyBJbmtEcmF3T3V0bGluZSgpO1xuXG4gICNwYXJlbnRXaWR0aDtcblxuICAjcGFyZW50SGVpZ2h0O1xuXG4gIGNvbnN0cnVjdG9yKHgsIHksIHBhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHQsIHJvdGF0aW9uLCB0aGlja25lc3MpIHtcbiAgICB0aGlzLiNwYXJlbnRXaWR0aCA9IHBhcmVudFdpZHRoO1xuICAgIHRoaXMuI3BhcmVudEhlaWdodCA9IHBhcmVudEhlaWdodDtcbiAgICB0aGlzLiNyb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgIHRoaXMuI3RoaWNrbmVzcyA9IHRoaWNrbmVzcztcblxuICAgIFt4LCB5XSA9IHRoaXMuI25vcm1hbGl6ZVBvaW50KHgsIHkpO1xuXG4gICAgY29uc3QgbGluZSA9ICh0aGlzLiNsaW5lID0gW05hTiwgTmFOLCBOYU4sIE5hTiwgeCwgeV0pO1xuICAgIHRoaXMuI3BvaW50cyA9IFt4LCB5XTtcbiAgICB0aGlzLiNsaW5lcyA9IFt7IGxpbmUsIHBvaW50czogdGhpcy4jcG9pbnRzIH1dO1xuICAgIHRoaXMuI2xhc3Quc2V0KGxpbmUsIDApO1xuICB9XG5cbiAgdXBkYXRlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAobmFtZSA9PT0gXCJzdHJva2Utd2lkdGhcIikge1xuICAgICAgdGhpcy4jdGhpY2tuZXNzID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgI25vcm1hbGl6ZVBvaW50KHgsIHkpIHtcbiAgICByZXR1cm4gT3V0bGluZS5fbm9ybWFsaXplUG9pbnQoXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHRoaXMuI3BhcmVudFdpZHRoLFxuICAgICAgdGhpcy4jcGFyZW50SGVpZ2h0LFxuICAgICAgdGhpcy4jcm90YXRpb25cbiAgICApO1xuICB9XG5cbiAgaXNFbXB0eSgpIHtcbiAgICByZXR1cm4gIXRoaXMuI2xpbmVzIHx8IHRoaXMuI2xpbmVzLmxlbmd0aCA9PT0gMDtcbiAgfVxuXG4gIGlzQ2FuY2VsbGFibGUoKSB7XG4gICAgLy8gVGhlIHVzZXIgYSBzZWNvbmQgZmluZ2VyIGFmdGVyIGRyYXdpbmcgNSBwb2ludHM6IGl0J3Mgc21hbGwgZW5vdWdoXG4gICAgLy8gdG8gbm90IGJlIGEgcmVhbCBkcmF3aW5nLlxuICAgIHJldHVybiB0aGlzLiNwb2ludHMubGVuZ3RoIDw9IDEwO1xuICB9XG5cbiAgYWRkKHgsIHkpIHtcbiAgICAvLyBUaGUgcG9pbnQgaXMgaW4gY2FudmFzIGNvb3JkaW5hdGVzIHdoaWNoIG1lYW5zIHRoYXQgdGhlcmUgaXMgbm8gcm90YXRpb24uXG4gICAgLy8gSXQncyB0aGUgc2FtZSBhcyBwYXJlbnQgY29vcmRpbmF0ZXMuXG4gICAgW3gsIHldID0gdGhpcy4jbm9ybWFsaXplUG9pbnQoeCwgeSk7XG4gICAgY29uc3QgW3gxLCB5MSwgeDIsIHkyXSA9IHRoaXMuI2xhc3Quc3ViYXJyYXkoMiwgNik7XG4gICAgY29uc3QgZGlmZlggPSB4IC0geDI7XG4gICAgY29uc3QgZGlmZlkgPSB5IC0geTI7XG4gICAgY29uc3QgZCA9IE1hdGguaHlwb3QodGhpcy4jcGFyZW50V2lkdGggKiBkaWZmWCwgdGhpcy4jcGFyZW50SGVpZ2h0ICogZGlmZlkpO1xuICAgIGlmIChkIDw9IDIpIHtcbiAgICAgIC8vIFRoZSBpZGVhIGlzIHRvIGF2b2lkIGdhcmJhZ2UgcG9pbnRzIGFyb3VuZCB0aGUgbGFzdCBwb2ludC5cbiAgICAgIC8vIFdoZW4gdGhlIHBvaW50cyBhcmUgdG9vIGNsb3NlLCBpdCBqdXN0IGxlYWRzIHRvIGJhZCBub3JtYWwgdmVjdG9ycyBhbmRcbiAgICAgIC8vIGNvbnRyb2wgcG9pbnRzLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy4jcG9pbnRzLnB1c2goeCwgeSk7XG5cbiAgICBpZiAoaXNOYU4oeDEpKSB7XG4gICAgICAvLyBXZSd2ZSBvbmx5IG9uZSBwb2ludC5cbiAgICAgIHRoaXMuI2xhc3Quc2V0KFt4MiwgeTIsIHgsIHldLCAyKTtcbiAgICAgIHRoaXMuI2xpbmUucHVzaChOYU4sIE5hTiwgTmFOLCBOYU4sIHgsIHkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDoge1xuICAgICAgICAgIGQ6IHRoaXMudG9TVkdQYXRoKCksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChpc05hTih0aGlzLiNsYXN0WzBdKSkge1xuICAgICAgLy8gV2UndmUgb25seSB0d28gcG9pbnRzLlxuICAgICAgdGhpcy4jbGluZS5zcGxpY2UoNiwgNik7XG4gICAgfVxuXG4gICAgdGhpcy4jbGFzdC5zZXQoW3gxLCB5MSwgeDIsIHkyLCB4LCB5XSwgMCk7XG4gICAgdGhpcy4jbGluZS5wdXNoKC4uLk91dGxpbmUuY3JlYXRlQmV6aWVyUG9pbnRzKHgxLCB5MSwgeDIsIHkyLCB4LCB5KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDoge1xuICAgICAgICBkOiB0aGlzLnRvU1ZHUGF0aCgpLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgZW5kKHgsIHkpIHtcbiAgICBjb25zdCBjaGFuZ2UgPSB0aGlzLmFkZCh4LCB5KTtcbiAgICBpZiAoY2hhbmdlKSB7XG4gICAgICByZXR1cm4gY2hhbmdlO1xuICAgIH1cbiAgICBpZiAodGhpcy4jcG9pbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgLy8gV2UndmUgb25seSBvbmUgcG9pbnQuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRoOiB7XG4gICAgICAgICAgZDogdGhpcy50b1NWR1BhdGgoKSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc3RhcnROZXcoeCwgeSwgcGFyZW50V2lkdGgsIHBhcmVudEhlaWdodCwgcm90YXRpb24pIHtcbiAgICB0aGlzLiNwYXJlbnRXaWR0aCA9IHBhcmVudFdpZHRoO1xuICAgIHRoaXMuI3BhcmVudEhlaWdodCA9IHBhcmVudEhlaWdodDtcbiAgICB0aGlzLiNyb3RhdGlvbiA9IHJvdGF0aW9uO1xuXG4gICAgW3gsIHldID0gdGhpcy4jbm9ybWFsaXplUG9pbnQoeCwgeSk7XG5cbiAgICBjb25zdCBsaW5lID0gKHRoaXMuI2xpbmUgPSBbTmFOLCBOYU4sIE5hTiwgTmFOLCB4LCB5XSk7XG4gICAgdGhpcy4jcG9pbnRzID0gW3gsIHldO1xuICAgIGNvbnN0IGxhc3QgPSB0aGlzLiNsaW5lcy5hdCgtMSk7XG4gICAgaWYgKGxhc3QpIHtcbiAgICAgIGxhc3QubGluZSA9IG5ldyBGbG9hdDMyQXJyYXkobGFzdC5saW5lKTtcbiAgICAgIGxhc3QucG9pbnRzID0gbmV3IEZsb2F0MzJBcnJheShsYXN0LnBvaW50cyk7XG4gICAgfVxuICAgIHRoaXMuI2xpbmVzLnB1c2goeyBsaW5lLCBwb2ludHM6IHRoaXMuI3BvaW50cyB9KTtcbiAgICB0aGlzLiNsYXN0LnNldChsaW5lLCAwKTtcbiAgICB0aGlzLiNsYXN0SW5kZXggPSAwO1xuICAgIHRoaXMudG9TVkdQYXRoKCk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGdldExhc3RFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLiNsaW5lcy5hdCgtMSk7XG4gIH1cblxuICBzZXRMYXN0RWxlbWVudChlbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLiNsaW5lcykge1xuICAgICAgcmV0dXJuIHRoaXMuI291dGxpbmVzLnNldExhc3RFbGVtZW50KGVsZW1lbnQpO1xuICAgIH1cbiAgICB0aGlzLiNsaW5lcy5wdXNoKGVsZW1lbnQpO1xuICAgIHRoaXMuI2xpbmUgPSBlbGVtZW50LmxpbmU7XG4gICAgdGhpcy4jcG9pbnRzID0gZWxlbWVudC5wb2ludHM7XG4gICAgdGhpcy4jbGFzdEluZGV4ID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDoge1xuICAgICAgICBkOiB0aGlzLnRvU1ZHUGF0aCgpLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcmVtb3ZlTGFzdEVsZW1lbnQoKSB7XG4gICAgaWYgKCF0aGlzLiNsaW5lcykge1xuICAgICAgcmV0dXJuIHRoaXMuI291dGxpbmVzLnJlbW92ZUxhc3RFbGVtZW50KCk7XG4gICAgfVxuICAgIHRoaXMuI2xpbmVzLnBvcCgpO1xuICAgIHRoaXMuI2xhc3RTVkdQYXRoID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0aGlzLiNsaW5lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBjb25zdCB7IGxpbmUsIHBvaW50cyB9ID0gdGhpcy4jbGluZXNbaV07XG4gICAgICB0aGlzLiNsaW5lID0gbGluZTtcbiAgICAgIHRoaXMuI3BvaW50cyA9IHBvaW50cztcbiAgICAgIHRoaXMuI2xhc3RJbmRleCA9IDA7XG4gICAgICB0aGlzLnRvU1ZHUGF0aCgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiB7XG4gICAgICAgIGQ6IHRoaXMuI2xhc3RTVkdQYXRoLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgdG9TVkdQYXRoKCkge1xuICAgIGNvbnN0IGZpcnN0WCA9IE91dGxpbmUuc3ZnUm91bmQodGhpcy4jbGluZVs0XSk7XG4gICAgY29uc3QgZmlyc3RZID0gT3V0bGluZS5zdmdSb3VuZCh0aGlzLiNsaW5lWzVdKTtcbiAgICBpZiAodGhpcy4jcG9pbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhpcy4jbGFzdFNWR1BhdGggPSBgJHt0aGlzLiNsYXN0U1ZHUGF0aH0gTSAke2ZpcnN0WH0gJHtmaXJzdFl9IFpgO1xuICAgICAgcmV0dXJuIHRoaXMuI2xhc3RTVkdQYXRoO1xuICAgIH1cblxuICAgIGlmICh0aGlzLiNwb2ludHMubGVuZ3RoIDw9IDYpIHtcbiAgICAgIC8vIFdlJ3ZlIDIgb3IgMyBwb2ludHMuXG4gICAgICBjb25zdCBpID0gdGhpcy4jbGFzdFNWR1BhdGgubGFzdEluZGV4T2YoXCJNXCIpO1xuICAgICAgdGhpcy4jbGFzdFNWR1BhdGggPSBgJHt0aGlzLiNsYXN0U1ZHUGF0aC5zbGljZSgwLCBpKX0gTSAke2ZpcnN0WH0gJHtmaXJzdFl9YDtcbiAgICAgIHRoaXMuI2xhc3RJbmRleCA9IDY7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI3BvaW50cy5sZW5ndGggPT09IDQpIHtcbiAgICAgIGNvbnN0IHNlY29uZFggPSBPdXRsaW5lLnN2Z1JvdW5kKHRoaXMuI2xpbmVbMTBdKTtcbiAgICAgIGNvbnN0IHNlY29uZFkgPSBPdXRsaW5lLnN2Z1JvdW5kKHRoaXMuI2xpbmVbMTFdKTtcbiAgICAgIHRoaXMuI2xhc3RTVkdQYXRoID0gYCR7dGhpcy4jbGFzdFNWR1BhdGh9IEwgJHtzZWNvbmRYfSAke3NlY29uZFl9YDtcbiAgICAgIHRoaXMuI2xhc3RJbmRleCA9IDEyO1xuICAgICAgcmV0dXJuIHRoaXMuI2xhc3RTVkdQYXRoO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlciA9IFtdO1xuICAgIGlmICh0aGlzLiNsYXN0SW5kZXggPT09IDApIHtcbiAgICAgIGJ1ZmZlci5wdXNoKGBNICR7Zmlyc3RYfSAke2ZpcnN0WX1gKTtcbiAgICAgIHRoaXMuI2xhc3RJbmRleCA9IDY7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuI2xhc3RJbmRleCwgaWkgPSB0aGlzLiNsaW5lLmxlbmd0aDsgaSA8IGlpOyBpICs9IDYpIHtcbiAgICAgIGNvbnN0IFtjMXgsIGMxeSwgYzJ4LCBjMnksIHgsIHldID0gdGhpcy4jbGluZVxuICAgICAgICAuc2xpY2UoaSwgaSArIDYpXG4gICAgICAgIC5tYXAoT3V0bGluZS5zdmdSb3VuZCk7XG4gICAgICBidWZmZXIucHVzaChgQyR7YzF4fSAke2MxeX0gJHtjMnh9ICR7YzJ5fSAke3h9ICR7eX1gKTtcbiAgICB9XG4gICAgdGhpcy4jbGFzdFNWR1BhdGggKz0gYnVmZmVyLmpvaW4oXCIgXCIpO1xuICAgIHRoaXMuI2xhc3RJbmRleCA9IHRoaXMuI2xpbmUubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHRoaXMuI2xhc3RTVkdQYXRoO1xuICB9XG5cbiAgZ2V0T3V0bGluZXMocGFyZW50V2lkdGgsIHBhcmVudEhlaWdodCwgc2NhbGUsIGlubmVyTWFyZ2luKSB7XG4gICAgY29uc3QgbGFzdCA9IHRoaXMuI2xpbmVzLmF0KC0xKTtcbiAgICBsYXN0LmxpbmUgPSBuZXcgRmxvYXQzMkFycmF5KGxhc3QubGluZSk7XG4gICAgbGFzdC5wb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KGxhc3QucG9pbnRzKTtcblxuICAgIHRoaXMuI291dGxpbmVzLmJ1aWxkKFxuICAgICAgdGhpcy4jbGluZXMsXG4gICAgICBwYXJlbnRXaWR0aCxcbiAgICAgIHBhcmVudEhlaWdodCxcbiAgICAgIHNjYWxlLFxuICAgICAgdGhpcy4jcm90YXRpb24sXG4gICAgICB0aGlzLiN0aGlja25lc3MsXG4gICAgICBpbm5lck1hcmdpblxuICAgICk7XG5cbiAgICAvLyBXZSByZXNldCBldmVyeXRoaW5nOiB0aGUgZHJhd2luZyBpcyBkb25lLlxuICAgIHRoaXMuI2xhc3QgPSBudWxsO1xuICAgIHRoaXMuI2xpbmUgPSBudWxsO1xuICAgIHRoaXMuI2xpbmVzID0gbnVsbDtcbiAgICB0aGlzLiNsYXN0U1ZHUGF0aCA9IG51bGw7XG5cbiAgICByZXR1cm4gdGhpcy4jb3V0bGluZXM7XG4gIH1cblxuICBnZXQgZGVmYXVsdFNWR1Byb3BlcnRpZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvb3Q6IHtcbiAgICAgICAgdmlld0JveDogXCIwIDAgMTAwMDAgMTAwMDBcIixcbiAgICAgIH0sXG4gICAgICByb290Q2xhc3M6IHtcbiAgICAgICAgZHJhdzogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBiYm94OiBbMCwgMCwgMSwgMV0sXG4gICAgfTtcbiAgfVxufVxuXG5jbGFzcyBJbmtEcmF3T3V0bGluZSBleHRlbmRzIE91dGxpbmUge1xuICAjYmJveDtcblxuICAjY3VycmVudFJvdGF0aW9uID0gMDtcblxuICAjaW5uZXJNYXJnaW47XG5cbiAgI2xpbmVzO1xuXG4gICNwYXJlbnRXaWR0aDtcblxuICAjcGFyZW50SGVpZ2h0O1xuXG4gICNwYXJlbnRTY2FsZTtcblxuICAjcm90YXRpb247XG5cbiAgI3RoaWNrbmVzcztcblxuICBidWlsZChcbiAgICBsaW5lcyxcbiAgICBwYXJlbnRXaWR0aCxcbiAgICBwYXJlbnRIZWlnaHQsXG4gICAgcGFyZW50U2NhbGUsXG4gICAgcm90YXRpb24sXG4gICAgdGhpY2tuZXNzLFxuICAgIGlubmVyTWFyZ2luXG4gICkge1xuICAgIHRoaXMuI3BhcmVudFdpZHRoID0gcGFyZW50V2lkdGg7XG4gICAgdGhpcy4jcGFyZW50SGVpZ2h0ID0gcGFyZW50SGVpZ2h0O1xuICAgIHRoaXMuI3BhcmVudFNjYWxlID0gcGFyZW50U2NhbGU7XG4gICAgdGhpcy4jcm90YXRpb24gPSByb3RhdGlvbjtcbiAgICB0aGlzLiN0aGlja25lc3MgPSB0aGlja25lc3M7XG4gICAgdGhpcy4jaW5uZXJNYXJnaW4gPSBpbm5lck1hcmdpbiA/PyAwO1xuICAgIHRoaXMuI2xpbmVzID0gbGluZXM7XG5cbiAgICB0aGlzLiNjb21wdXRlQmJveCgpO1xuICB9XG5cbiAgZ2V0IHRoaWNrbmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy4jdGhpY2tuZXNzO1xuICB9XG5cbiAgc2V0TGFzdEVsZW1lbnQoZWxlbWVudCkge1xuICAgIHRoaXMuI2xpbmVzLnB1c2goZWxlbWVudCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IHtcbiAgICAgICAgZDogdGhpcy50b1NWR1BhdGgoKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHJlbW92ZUxhc3RFbGVtZW50KCkge1xuICAgIHRoaXMuI2xpbmVzLnBvcCgpO1xuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiB7XG4gICAgICAgIGQ6IHRoaXMudG9TVkdQYXRoKCksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICB0b1NWR1BhdGgoKSB7XG4gICAgY29uc3QgYnVmZmVyID0gW107XG4gICAgZm9yIChjb25zdCB7IGxpbmUgfSBvZiB0aGlzLiNsaW5lcykge1xuICAgICAgYnVmZmVyLnB1c2goYE0ke091dGxpbmUuc3ZnUm91bmQobGluZVs0XSl9ICR7T3V0bGluZS5zdmdSb3VuZChsaW5lWzVdKX1gKTtcbiAgICAgIGlmIChsaW5lLmxlbmd0aCA9PT0gNikge1xuICAgICAgICBidWZmZXIucHVzaChcIlpcIik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGxpbmUubGVuZ3RoID09PSAxMiAmJiBpc05hTihsaW5lWzZdKSkge1xuICAgICAgICBidWZmZXIucHVzaChcbiAgICAgICAgICBgTCR7T3V0bGluZS5zdmdSb3VuZChsaW5lWzEwXSl9ICR7T3V0bGluZS5zdmdSb3VuZChsaW5lWzExXSl9YFxuICAgICAgICApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSA2LCBpaSA9IGxpbmUubGVuZ3RoOyBpIDwgaWk7IGkgKz0gNikge1xuICAgICAgICBjb25zdCBbYzF4LCBjMXksIGMyeCwgYzJ5LCB4LCB5XSA9IGxpbmVcbiAgICAgICAgICAuc3ViYXJyYXkoaSwgaSArIDYpXG4gICAgICAgICAgLm1hcChPdXRsaW5lLnN2Z1JvdW5kKTtcbiAgICAgICAgYnVmZmVyLnB1c2goYEMke2MxeH0gJHtjMXl9ICR7YzJ4fSAke2MyeX0gJHt4fSAke3l9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBidWZmZXIuam9pbihcIlwiKTtcbiAgfVxuXG4gIHNlcmlhbGl6ZShbcGFnZVgsIHBhZ2VZLCBwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdLCBpc0ZvckNvcHlpbmcpIHtcbiAgICBjb25zdCBzZXJpYWxpemVkTGluZXMgPSBbXTtcbiAgICBjb25zdCBzZXJpYWxpemVkUG9pbnRzID0gW107XG4gICAgY29uc3QgW3gsIHksIHdpZHRoLCBoZWlnaHRdID0gdGhpcy4jZ2V0QkJveFdpdGhOb01hcmdpbigpO1xuICAgIGxldCB0eCwgdHksIHN4LCBzeSwgeDEsIHkxLCB4MiwgeTIsIHJlc2NhbGVGbjtcblxuICAgIHN3aXRjaCAodGhpcy4jcm90YXRpb24pIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmVzY2FsZUZuID0gT3V0bGluZS5fcmVzY2FsZTtcbiAgICAgICAgdHggPSBwYWdlWDtcbiAgICAgICAgdHkgPSBwYWdlWSArIHBhZ2VIZWlnaHQ7XG4gICAgICAgIHN4ID0gcGFnZVdpZHRoO1xuICAgICAgICBzeSA9IC1wYWdlSGVpZ2h0O1xuICAgICAgICB4MSA9IHBhZ2VYICsgeCAqIHBhZ2VXaWR0aDtcbiAgICAgICAgeTEgPSBwYWdlWSArICgxIC0geSAtIGhlaWdodCkgKiBwYWdlSGVpZ2h0O1xuICAgICAgICB4MiA9IHBhZ2VYICsgKHggKyB3aWR0aCkgKiBwYWdlV2lkdGg7XG4gICAgICAgIHkyID0gcGFnZVkgKyAoMSAtIHkpICogcGFnZUhlaWdodDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDkwOlxuICAgICAgICByZXNjYWxlRm4gPSBPdXRsaW5lLl9yZXNjYWxlQW5kU3dhcDtcbiAgICAgICAgdHggPSBwYWdlWDtcbiAgICAgICAgdHkgPSBwYWdlWTtcbiAgICAgICAgc3ggPSBwYWdlV2lkdGg7XG4gICAgICAgIHN5ID0gcGFnZUhlaWdodDtcbiAgICAgICAgeDEgPSBwYWdlWCArIHkgKiBwYWdlV2lkdGg7XG4gICAgICAgIHkxID0gcGFnZVkgKyB4ICogcGFnZUhlaWdodDtcbiAgICAgICAgeDIgPSBwYWdlWCArICh5ICsgaGVpZ2h0KSAqIHBhZ2VXaWR0aDtcbiAgICAgICAgeTIgPSBwYWdlWSArICh4ICsgd2lkdGgpICogcGFnZUhlaWdodDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE4MDpcbiAgICAgICAgcmVzY2FsZUZuID0gT3V0bGluZS5fcmVzY2FsZTtcbiAgICAgICAgdHggPSBwYWdlWCArIHBhZ2VXaWR0aDtcbiAgICAgICAgdHkgPSBwYWdlWTtcbiAgICAgICAgc3ggPSAtcGFnZVdpZHRoO1xuICAgICAgICBzeSA9IHBhZ2VIZWlnaHQ7XG4gICAgICAgIHgxID0gcGFnZVggKyAoMSAtIHggLSB3aWR0aCkgKiBwYWdlV2lkdGg7XG4gICAgICAgIHkxID0gcGFnZVkgKyB5ICogcGFnZUhlaWdodDtcbiAgICAgICAgeDIgPSBwYWdlWCArICgxIC0geCkgKiBwYWdlV2lkdGg7XG4gICAgICAgIHkyID0gcGFnZVkgKyAoeSArIGhlaWdodCkgKiBwYWdlSGVpZ2h0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICByZXNjYWxlRm4gPSBPdXRsaW5lLl9yZXNjYWxlQW5kU3dhcDtcbiAgICAgICAgdHggPSBwYWdlWCArIHBhZ2VXaWR0aDtcbiAgICAgICAgdHkgPSBwYWdlWSArIHBhZ2VIZWlnaHQ7XG4gICAgICAgIHN4ID0gLXBhZ2VXaWR0aDtcbiAgICAgICAgc3kgPSAtcGFnZUhlaWdodDtcbiAgICAgICAgeDEgPSBwYWdlWCArICgxIC0geSAtIGhlaWdodCkgKiBwYWdlV2lkdGg7XG4gICAgICAgIHkxID0gcGFnZVkgKyAoMSAtIHggLSB3aWR0aCkgKiBwYWdlSGVpZ2h0O1xuICAgICAgICB4MiA9IHBhZ2VYICsgKDEgLSB5KSAqIHBhZ2VXaWR0aDtcbiAgICAgICAgeTIgPSBwYWdlWSArICgxIC0geCkgKiBwYWdlSGVpZ2h0O1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHsgbGluZSwgcG9pbnRzIH0gb2YgdGhpcy4jbGluZXMpIHtcbiAgICAgIHNlcmlhbGl6ZWRMaW5lcy5wdXNoKFxuICAgICAgICByZXNjYWxlRm4oXG4gICAgICAgICAgbGluZSxcbiAgICAgICAgICB0eCxcbiAgICAgICAgICB0eSxcbiAgICAgICAgICBzeCxcbiAgICAgICAgICBzeSxcbiAgICAgICAgICBpc0ZvckNvcHlpbmcgPyBuZXcgQXJyYXkobGluZS5sZW5ndGgpIDogbnVsbFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgc2VyaWFsaXplZFBvaW50cy5wdXNoKFxuICAgICAgICByZXNjYWxlRm4oXG4gICAgICAgICAgcG9pbnRzLFxuICAgICAgICAgIHR4LFxuICAgICAgICAgIHR5LFxuICAgICAgICAgIHN4LFxuICAgICAgICAgIHN5LFxuICAgICAgICAgIGlzRm9yQ29weWluZyA/IG5ldyBBcnJheShwb2ludHMubGVuZ3RoKSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGluZXM6IHNlcmlhbGl6ZWRMaW5lcyxcbiAgICAgIHBvaW50czogc2VyaWFsaXplZFBvaW50cyxcbiAgICAgIHJlY3Q6IFt4MSwgeTEsIHgyLCB5Ml0sXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBkZXNlcmlhbGl6ZShcbiAgICBwYWdlWCxcbiAgICBwYWdlWSxcbiAgICBwYWdlV2lkdGgsXG4gICAgcGFnZUhlaWdodCxcbiAgICBpbm5lck1hcmdpbixcbiAgICB7IHBhdGhzOiB7IGxpbmVzLCBwb2ludHMgfSwgcm90YXRpb24sIHRoaWNrbmVzcyB9XG4gICkge1xuICAgIGNvbnN0IG5ld0xpbmVzID0gW107XG4gICAgbGV0IHR4LCB0eSwgc3gsIHN5LCByZXNjYWxlRm47XG4gICAgc3dpdGNoIChyb3RhdGlvbikge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXNjYWxlRm4gPSBPdXRsaW5lLl9yZXNjYWxlO1xuICAgICAgICB0eCA9IC1wYWdlWCAvIHBhZ2VXaWR0aDtcbiAgICAgICAgdHkgPSBwYWdlWSAvIHBhZ2VIZWlnaHQgKyAxO1xuICAgICAgICBzeCA9IDEgLyBwYWdlV2lkdGg7XG4gICAgICAgIHN5ID0gLTEgLyBwYWdlSGVpZ2h0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgOTA6XG4gICAgICAgIHJlc2NhbGVGbiA9IE91dGxpbmUuX3Jlc2NhbGVBbmRTd2FwO1xuICAgICAgICB0eCA9IC1wYWdlWSAvIHBhZ2VIZWlnaHQ7XG4gICAgICAgIHR5ID0gLXBhZ2VYIC8gcGFnZVdpZHRoO1xuICAgICAgICBzeCA9IDEgLyBwYWdlSGVpZ2h0O1xuICAgICAgICBzeSA9IDEgLyBwYWdlV2lkdGg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxODA6XG4gICAgICAgIHJlc2NhbGVGbiA9IE91dGxpbmUuX3Jlc2NhbGU7XG4gICAgICAgIHR4ID0gcGFnZVggLyBwYWdlV2lkdGggKyAxO1xuICAgICAgICB0eSA9IC1wYWdlWSAvIHBhZ2VIZWlnaHQ7XG4gICAgICAgIHN4ID0gLTEgLyBwYWdlV2lkdGg7XG4gICAgICAgIHN5ID0gMSAvIHBhZ2VIZWlnaHQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyNzA6XG4gICAgICAgIHJlc2NhbGVGbiA9IE91dGxpbmUuX3Jlc2NhbGVBbmRTd2FwO1xuICAgICAgICB0eCA9IHBhZ2VZIC8gcGFnZUhlaWdodCArIDE7XG4gICAgICAgIHR5ID0gcGFnZVggLyBwYWdlV2lkdGggKyAxO1xuICAgICAgICBzeCA9IC0xIC8gcGFnZUhlaWdodDtcbiAgICAgICAgc3kgPSAtMSAvIHBhZ2VXaWR0aDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKCFsaW5lcykge1xuICAgICAgbGluZXMgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgcG9pbnQgb2YgcG9pbnRzKSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IHBvaW50Lmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA9PT0gMikge1xuICAgICAgICAgIGxpbmVzLnB1c2goXG4gICAgICAgICAgICBuZXcgRmxvYXQzMkFycmF5KFtOYU4sIE5hTiwgTmFOLCBOYU4sIHBvaW50WzBdLCBwb2ludFsxXV0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuID09PSA0KSB7XG4gICAgICAgICAgbGluZXMucHVzaChcbiAgICAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgIE5hTixcbiAgICAgICAgICAgICAgTmFOLFxuICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgIHBvaW50WzBdLFxuICAgICAgICAgICAgICBwb2ludFsxXSxcbiAgICAgICAgICAgICAgTmFOLFxuICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgIE5hTixcbiAgICAgICAgICAgICAgTmFOLFxuICAgICAgICAgICAgICBwb2ludFsyXSxcbiAgICAgICAgICAgICAgcG9pbnRbM10sXG4gICAgICAgICAgICBdKVxuICAgICAgICAgICk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGluZSA9IG5ldyBGbG9hdDMyQXJyYXkoMyAqIChsZW4gLSAyKSk7XG4gICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgIGxldCBbeDEsIHkxLCB4MiwgeTJdID0gcG9pbnQuc3ViYXJyYXkoMCwgNCk7XG4gICAgICAgIGxpbmUuc2V0KFtOYU4sIE5hTiwgTmFOLCBOYU4sIHgxLCB5MV0sIDApO1xuICAgICAgICBmb3IgKGxldCBpID0gNDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgICAgICAgY29uc3QgeCA9IHBvaW50W2ldO1xuICAgICAgICAgIGNvbnN0IHkgPSBwb2ludFtpICsgMV07XG4gICAgICAgICAgbGluZS5zZXQoXG4gICAgICAgICAgICBPdXRsaW5lLmNyZWF0ZUJlemllclBvaW50cyh4MSwgeTEsIHgyLCB5MiwgeCwgeSksXG4gICAgICAgICAgICAoaSAtIDIpICogM1xuICAgICAgICAgICk7XG4gICAgICAgICAgW3gxLCB5MSwgeDIsIHkyXSA9IFt4MiwgeTIsIHgsIHldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbGluZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgbmV3TGluZXMucHVzaCh7XG4gICAgICAgIGxpbmU6IHJlc2NhbGVGbihcbiAgICAgICAgICBsaW5lc1tpXS5tYXAoeCA9PiB4ID8/IE5hTiksXG4gICAgICAgICAgdHgsXG4gICAgICAgICAgdHksXG4gICAgICAgICAgc3gsXG4gICAgICAgICAgc3lcbiAgICAgICAgKSxcbiAgICAgICAgcG9pbnRzOiByZXNjYWxlRm4oXG4gICAgICAgICAgcG9pbnRzW2ldLm1hcCh4ID0+IHggPz8gTmFOKSxcbiAgICAgICAgICB0eCxcbiAgICAgICAgICB0eSxcbiAgICAgICAgICBzeCxcbiAgICAgICAgICBzeVxuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0bGluZXMgPSBuZXcgdGhpcy5wcm90b3R5cGUuY29uc3RydWN0b3IoKTtcbiAgICBvdXRsaW5lcy5idWlsZChcbiAgICAgIG5ld0xpbmVzLFxuICAgICAgcGFnZVdpZHRoLFxuICAgICAgcGFnZUhlaWdodCxcbiAgICAgIDEsXG4gICAgICByb3RhdGlvbixcbiAgICAgIHRoaWNrbmVzcyxcbiAgICAgIGlubmVyTWFyZ2luXG4gICAgKTtcblxuICAgIHJldHVybiBvdXRsaW5lcztcbiAgfVxuXG4gICNnZXRNYXJnaW5Db21wb25lbnRzKHRoaWNrbmVzcyA9IHRoaXMuI3RoaWNrbmVzcykge1xuICAgIGNvbnN0IG1hcmdpbiA9IHRoaXMuI2lubmVyTWFyZ2luICsgKHRoaWNrbmVzcyAvIDIpICogdGhpcy4jcGFyZW50U2NhbGU7XG4gICAgcmV0dXJuIHRoaXMuI3JvdGF0aW9uICUgMTgwID09PSAwXG4gICAgICA/IFttYXJnaW4gLyB0aGlzLiNwYXJlbnRXaWR0aCwgbWFyZ2luIC8gdGhpcy4jcGFyZW50SGVpZ2h0XVxuICAgICAgOiBbbWFyZ2luIC8gdGhpcy4jcGFyZW50SGVpZ2h0LCBtYXJnaW4gLyB0aGlzLiNwYXJlbnRXaWR0aF07XG4gIH1cblxuICAjZ2V0QkJveFdpdGhOb01hcmdpbigpIHtcbiAgICBjb25zdCBbeCwgeSwgd2lkdGgsIGhlaWdodF0gPSB0aGlzLiNiYm94O1xuICAgIGNvbnN0IFttYXJnaW5YLCBtYXJnaW5ZXSA9IHRoaXMuI2dldE1hcmdpbkNvbXBvbmVudHMoMCk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgeCArIG1hcmdpblgsXG4gICAgICB5ICsgbWFyZ2luWSxcbiAgICAgIHdpZHRoIC0gMiAqIG1hcmdpblgsXG4gICAgICBoZWlnaHQgLSAyICogbWFyZ2luWSxcbiAgICBdO1xuICB9XG5cbiAgI2NvbXB1dGVCYm94KCkge1xuICAgIGNvbnN0IGJib3ggPSAodGhpcy4jYmJveCA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgSW5maW5pdHksXG4gICAgICBJbmZpbml0eSxcbiAgICAgIC1JbmZpbml0eSxcbiAgICAgIC1JbmZpbml0eSxcbiAgICBdKSk7XG5cbiAgICBmb3IgKGNvbnN0IHsgbGluZSB9IG9mIHRoaXMuI2xpbmVzKSB7XG4gICAgICBpZiAobGluZS5sZW5ndGggPD0gMTIpIHtcbiAgICAgICAgLy8gV2UndmUgb25seSBvbmUgb3IgdHdvIHBvaW50cyA9PiBubyBiZXppZXIgY3VydmUuXG4gICAgICAgIGZvciAobGV0IGkgPSA0LCBpaSA9IGxpbmUubGVuZ3RoOyBpIDwgaWk7IGkgKz0gNikge1xuICAgICAgICAgIFV0aWwucG9pbnRCb3VuZGluZ0JveChsaW5lW2ldLCBsaW5lW2kgKyAxXSwgYmJveCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBsZXQgbGFzdFggPSBsaW5lWzRdLFxuICAgICAgICBsYXN0WSA9IGxpbmVbNV07XG4gICAgICBmb3IgKGxldCBpID0gNiwgaWkgPSBsaW5lLmxlbmd0aDsgaSA8IGlpOyBpICs9IDYpIHtcbiAgICAgICAgY29uc3QgW2MxeCwgYzF5LCBjMngsIGMyeSwgeCwgeV0gPSBsaW5lLnN1YmFycmF5KGksIGkgKyA2KTtcbiAgICAgICAgVXRpbC5iZXppZXJCb3VuZGluZ0JveChsYXN0WCwgbGFzdFksIGMxeCwgYzF5LCBjMngsIGMyeSwgeCwgeSwgYmJveCk7XG4gICAgICAgIGxhc3RYID0geDtcbiAgICAgICAgbGFzdFkgPSB5O1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IFttYXJnaW5YLCBtYXJnaW5ZXSA9IHRoaXMuI2dldE1hcmdpbkNvbXBvbmVudHMoKTtcbiAgICBiYm94WzBdID0gTWF0aENsYW1wKGJib3hbMF0gLSBtYXJnaW5YLCAwLCAxKTtcbiAgICBiYm94WzFdID0gTWF0aENsYW1wKGJib3hbMV0gLSBtYXJnaW5ZLCAwLCAxKTtcbiAgICBiYm94WzJdID0gTWF0aENsYW1wKGJib3hbMl0gKyBtYXJnaW5YLCAwLCAxKTtcbiAgICBiYm94WzNdID0gTWF0aENsYW1wKGJib3hbM10gKyBtYXJnaW5ZLCAwLCAxKTtcblxuICAgIGJib3hbMl0gLT0gYmJveFswXTtcbiAgICBiYm94WzNdIC09IGJib3hbMV07XG4gIH1cblxuICBnZXQgYm94KCkge1xuICAgIHJldHVybiB0aGlzLiNiYm94O1xuICB9XG5cbiAgdXBkYXRlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAobmFtZSA9PT0gXCJzdHJva2Utd2lkdGhcIikge1xuICAgICAgcmV0dXJuIHRoaXMuI3VwZGF0ZVRoaWNrbmVzcyh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgI3VwZGF0ZVRoaWNrbmVzcyh0aGlja25lc3MpIHtcbiAgICBjb25zdCBbb2xkTWFyZ2luWCwgb2xkTWFyZ2luWV0gPSB0aGlzLiNnZXRNYXJnaW5Db21wb25lbnRzKCk7XG4gICAgdGhpcy4jdGhpY2tuZXNzID0gdGhpY2tuZXNzO1xuICAgIGNvbnN0IFtuZXdNYXJnaW5YLCBuZXdNYXJnaW5ZXSA9IHRoaXMuI2dldE1hcmdpbkNvbXBvbmVudHMoKTtcbiAgICBjb25zdCBbZGlmZk1hcmdpblgsIGRpZmZNYXJnaW5ZXSA9IFtcbiAgICAgIG5ld01hcmdpblggLSBvbGRNYXJnaW5YLFxuICAgICAgbmV3TWFyZ2luWSAtIG9sZE1hcmdpblksXG4gICAgXTtcbiAgICBjb25zdCBiYm94ID0gdGhpcy4jYmJveDtcbiAgICBiYm94WzBdIC09IGRpZmZNYXJnaW5YO1xuICAgIGJib3hbMV0gLT0gZGlmZk1hcmdpblk7XG4gICAgYmJveFsyXSArPSAyICogZGlmZk1hcmdpblg7XG4gICAgYmJveFszXSArPSAyICogZGlmZk1hcmdpblk7XG5cbiAgICByZXR1cm4gYmJveDtcbiAgfVxuXG4gIHVwZGF0ZVBhcmVudERpbWVuc2lvbnMoW3dpZHRoLCBoZWlnaHRdLCBzY2FsZSkge1xuICAgIGNvbnN0IFtvbGRNYXJnaW5YLCBvbGRNYXJnaW5ZXSA9IHRoaXMuI2dldE1hcmdpbkNvbXBvbmVudHMoKTtcbiAgICB0aGlzLiNwYXJlbnRXaWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuI3BhcmVudEhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLiNwYXJlbnRTY2FsZSA9IHNjYWxlO1xuICAgIGNvbnN0IFtuZXdNYXJnaW5YLCBuZXdNYXJnaW5ZXSA9IHRoaXMuI2dldE1hcmdpbkNvbXBvbmVudHMoKTtcbiAgICBjb25zdCBkaWZmTWFyZ2luWCA9IG5ld01hcmdpblggLSBvbGRNYXJnaW5YO1xuICAgIGNvbnN0IGRpZmZNYXJnaW5ZID0gbmV3TWFyZ2luWSAtIG9sZE1hcmdpblk7XG5cbiAgICBjb25zdCBiYm94ID0gdGhpcy4jYmJveDtcbiAgICBiYm94WzBdIC09IGRpZmZNYXJnaW5YO1xuICAgIGJib3hbMV0gLT0gZGlmZk1hcmdpblk7XG4gICAgYmJveFsyXSArPSAyICogZGlmZk1hcmdpblg7XG4gICAgYmJveFszXSArPSAyICogZGlmZk1hcmdpblk7XG5cbiAgICByZXR1cm4gYmJveDtcbiAgfVxuXG4gIHVwZGF0ZVJvdGF0aW9uKHJvdGF0aW9uKSB7XG4gICAgdGhpcy4jY3VycmVudFJvdGF0aW9uID0gcm90YXRpb247XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IHtcbiAgICAgICAgdHJhbnNmb3JtOiB0aGlzLnJvdGF0aW9uVHJhbnNmb3JtLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgZ2V0IHZpZXdCb3goKSB7XG4gICAgcmV0dXJuIHRoaXMuI2Jib3gubWFwKE91dGxpbmUuc3ZnUm91bmQpLmpvaW4oXCIgXCIpO1xuICB9XG5cbiAgZ2V0IGRlZmF1bHRQcm9wZXJ0aWVzKCkge1xuICAgIGNvbnN0IFt4LCB5XSA9IHRoaXMuI2Jib3g7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvb3Q6IHtcbiAgICAgICAgdmlld0JveDogdGhpcy52aWV3Qm94LFxuICAgICAgfSxcbiAgICAgIHBhdGg6IHtcbiAgICAgICAgXCJ0cmFuc2Zvcm0tb3JpZ2luXCI6IGAke091dGxpbmUuc3ZnUm91bmQoeCl9ICR7T3V0bGluZS5zdmdSb3VuZCh5KX1gLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgZ2V0IHJvdGF0aW9uVHJhbnNmb3JtKCkge1xuICAgIGNvbnN0IFssICwgd2lkdGgsIGhlaWdodF0gPSB0aGlzLiNiYm94O1xuICAgIGxldCBhID0gMCxcbiAgICAgIGIgPSAwLFxuICAgICAgYyA9IDAsXG4gICAgICBkID0gMCxcbiAgICAgIGUgPSAwLFxuICAgICAgZiA9IDA7XG4gICAgc3dpdGNoICh0aGlzLiNjdXJyZW50Um90YXRpb24pIHtcbiAgICAgIGNhc2UgOTA6XG4gICAgICAgIGIgPSBoZWlnaHQgLyB3aWR0aDtcbiAgICAgICAgYyA9IC13aWR0aCAvIGhlaWdodDtcbiAgICAgICAgZSA9IHdpZHRoO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTgwOlxuICAgICAgICBhID0gLTE7XG4gICAgICAgIGQgPSAtMTtcbiAgICAgICAgZSA9IHdpZHRoO1xuICAgICAgICBmID0gaGVpZ2h0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICBiID0gLWhlaWdodCAvIHdpZHRoO1xuICAgICAgICBjID0gd2lkdGggLyBoZWlnaHQ7XG4gICAgICAgIGYgPSBoZWlnaHQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIHJldHVybiBgbWF0cml4KCR7YX0gJHtifSAke2N9ICR7ZH0gJHtPdXRsaW5lLnN2Z1JvdW5kKGUpfSAke091dGxpbmUuc3ZnUm91bmQoZil9KWA7XG4gIH1cblxuICBnZXRQYXRoUmVzaXppbmdTVkdQcm9wZXJ0aWVzKFtuZXdYLCBuZXdZLCBuZXdXaWR0aCwgbmV3SGVpZ2h0XSkge1xuICAgIGNvbnN0IFttYXJnaW5YLCBtYXJnaW5ZXSA9IHRoaXMuI2dldE1hcmdpbkNvbXBvbmVudHMoKTtcbiAgICBjb25zdCBbeCwgeSwgd2lkdGgsIGhlaWdodF0gPSB0aGlzLiNiYm94O1xuXG4gICAgaWYgKFxuICAgICAgTWF0aC5hYnMod2lkdGggLSBtYXJnaW5YKSA8PSBPdXRsaW5lLlBSRUNJU0lPTiB8fFxuICAgICAgTWF0aC5hYnMoaGVpZ2h0IC0gbWFyZ2luWSkgPD0gT3V0bGluZS5QUkVDSVNJT05cbiAgICApIHtcbiAgICAgIC8vIENlbnRlciB0aGUgcGF0aCBpbiB0aGUgbmV3IGJvdW5kaW5nIGJveC5cbiAgICAgIGNvbnN0IHR4ID0gbmV3WCArIG5ld1dpZHRoIC8gMiAtICh4ICsgd2lkdGggLyAyKTtcbiAgICAgIGNvbnN0IHR5ID0gbmV3WSArIG5ld0hlaWdodCAvIDIgLSAoeSArIGhlaWdodCAvIDIpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDoge1xuICAgICAgICAgIFwidHJhbnNmb3JtLW9yaWdpblwiOiBgJHtPdXRsaW5lLnN2Z1JvdW5kKG5ld1gpfSAke091dGxpbmUuc3ZnUm91bmQobmV3WSl9YCxcbiAgICAgICAgICB0cmFuc2Zvcm06IGAke3RoaXMucm90YXRpb25UcmFuc2Zvcm19IHRyYW5zbGF0ZSgke3R4fSAke3R5fSlgLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBXZSBjb21wdXRlIHRoZSBmb2xsb3dpbmcgdHJhbnNmb3JtOlxuICAgIC8vICAxLiBUcmFuc2xhdGUgdGhlIHBhdGggdG8gdGhlIG9yaWdpbiAoLW1hcmdpblgsIC1tYXJnaW5ZKS5cbiAgICAvLyAgMi4gU2NhbGUgdGhlIHBhdGggdG8gdGhlIG5ldyBzaXplOlxuICAgIC8vICAgKChuZXdXaWR0aCAtIDIqbWFyZ2luWCkgLyAoYmJveC53aWR0aCAtIDIqbWFyZ2luWCksXG4gICAgLy8gICAobmV3SGVpZ2h0IC0gMiptYXJnaW5ZKSAvIChiYm94LmhlaWdodCAtIDIqbWFyZ2luWSkpLlxuICAgIC8vICAzLiBUcmFuc2xhdGUgdGhlIHBhdGggYmFjayB0byBpdHMgb3JpZ2luYWwgcG9zaXRpb25cbiAgICAvLyAgIChtYXJnaW5YLCBtYXJnaW5ZKS5cbiAgICAvLyAgNC4gU2NhbGUgdGhlIGludmVyc2Ugb2YgYmJveCBzY2FsaW5nOlxuICAgIC8vICAgKGJib3gud2lkdGggLyBuZXdXaWR0aCwgYmJveC5oZWlnaHQgLyBuZXdIZWlnaHQpLlxuXG4gICAgY29uc3QgczF4ID0gKG5ld1dpZHRoIC0gMiAqIG1hcmdpblgpIC8gKHdpZHRoIC0gMiAqIG1hcmdpblgpO1xuICAgIGNvbnN0IHMxeSA9IChuZXdIZWlnaHQgLSAyICogbWFyZ2luWSkgLyAoaGVpZ2h0IC0gMiAqIG1hcmdpblkpO1xuICAgIGNvbnN0IHMyeCA9IHdpZHRoIC8gbmV3V2lkdGg7XG4gICAgY29uc3QgczJ5ID0gaGVpZ2h0IC8gbmV3SGVpZ2h0O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IHtcbiAgICAgICAgXCJ0cmFuc2Zvcm0tb3JpZ2luXCI6IGAke091dGxpbmUuc3ZnUm91bmQoeCl9ICR7T3V0bGluZS5zdmdSb3VuZCh5KX1gLFxuICAgICAgICB0cmFuc2Zvcm06XG4gICAgICAgICAgYCR7dGhpcy5yb3RhdGlvblRyYW5zZm9ybX0gc2NhbGUoJHtzMnh9ICR7czJ5fSkgYCArXG4gICAgICAgICAgYHRyYW5zbGF0ZSgke091dGxpbmUuc3ZnUm91bmQobWFyZ2luWCl9ICR7T3V0bGluZS5zdmdSb3VuZChtYXJnaW5ZKX0pIHNjYWxlKCR7czF4fSAke3MxeX0pIGAgK1xuICAgICAgICAgIGB0cmFuc2xhdGUoJHtPdXRsaW5lLnN2Z1JvdW5kKC1tYXJnaW5YKX0gJHtPdXRsaW5lLnN2Z1JvdW5kKC1tYXJnaW5ZKX0pYCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGdldFBhdGhSZXNpemVkU1ZHUHJvcGVydGllcyhbbmV3WCwgbmV3WSwgbmV3V2lkdGgsIG5ld0hlaWdodF0pIHtcbiAgICBjb25zdCBbbWFyZ2luWCwgbWFyZ2luWV0gPSB0aGlzLiNnZXRNYXJnaW5Db21wb25lbnRzKCk7XG4gICAgY29uc3QgYmJveCA9IHRoaXMuI2Jib3g7XG4gICAgY29uc3QgW3gsIHksIHdpZHRoLCBoZWlnaHRdID0gYmJveDtcblxuICAgIGJib3hbMF0gPSBuZXdYO1xuICAgIGJib3hbMV0gPSBuZXdZO1xuICAgIGJib3hbMl0gPSBuZXdXaWR0aDtcbiAgICBiYm94WzNdID0gbmV3SGVpZ2h0O1xuXG4gICAgaWYgKFxuICAgICAgTWF0aC5hYnMod2lkdGggLSBtYXJnaW5YKSA8PSBPdXRsaW5lLlBSRUNJU0lPTiB8fFxuICAgICAgTWF0aC5hYnMoaGVpZ2h0IC0gbWFyZ2luWSkgPD0gT3V0bGluZS5QUkVDSVNJT05cbiAgICApIHtcbiAgICAgIC8vIENlbnRlciB0aGUgcGF0aCBpbiB0aGUgbmV3IGJvdW5kaW5nIGJveC5cbiAgICAgIGNvbnN0IHR4ID0gbmV3WCArIG5ld1dpZHRoIC8gMiAtICh4ICsgd2lkdGggLyAyKTtcbiAgICAgIGNvbnN0IHR5ID0gbmV3WSArIG5ld0hlaWdodCAvIDIgLSAoeSArIGhlaWdodCAvIDIpO1xuICAgICAgZm9yIChjb25zdCB7IGxpbmUsIHBvaW50cyB9IG9mIHRoaXMuI2xpbmVzKSB7XG4gICAgICAgIE91dGxpbmUuX3RyYW5zbGF0ZShsaW5lLCB0eCwgdHksIGxpbmUpO1xuICAgICAgICBPdXRsaW5lLl90cmFuc2xhdGUocG9pbnRzLCB0eCwgdHksIHBvaW50cyk7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICByb290OiB7XG4gICAgICAgICAgdmlld0JveDogdGhpcy52aWV3Qm94LFxuICAgICAgICB9LFxuICAgICAgICBwYXRoOiB7XG4gICAgICAgICAgXCJ0cmFuc2Zvcm0tb3JpZ2luXCI6IGAke091dGxpbmUuc3ZnUm91bmQobmV3WCl9ICR7T3V0bGluZS5zdmdSb3VuZChuZXdZKX1gLFxuICAgICAgICAgIHRyYW5zZm9ybTogdGhpcy5yb3RhdGlvblRyYW5zZm9ybSB8fCBudWxsLFxuICAgICAgICAgIGQ6IHRoaXMudG9TVkdQYXRoKCksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIFdlIGNvbXB1dGUgdGhlIGZvbGxvd2luZyB0cmFuc2Zvcm06XG4gICAgLy8gIDEuIFRyYW5zbGF0ZSB0aGUgcGF0aCB0byB0aGUgb3JpZ2luICgtKHggKyBtYXJnaW5YKSwgLSh5ICsgbWFyZ2luWSkpLlxuICAgIC8vICAyLiBTY2FsZSB0aGUgcGF0aCB0byB0aGUgbmV3IHNpemU6XG4gICAgLy8gICAoKG5ld1dpZHRoIC0gMiptYXJnaW5YKSAvIChiYm94LndpZHRoIC0gMiptYXJnaW5YKSxcbiAgICAvLyAgIChuZXdIZWlnaHQgLSAyKm1hcmdpblkpIC8gKGJib3guaGVpZ2h0IC0gMiptYXJnaW5ZKSkuXG4gICAgLy8gIDMuIFRyYW5zbGF0ZSB0aGUgcGF0aCBiYWNrIHRvIGl0cyBuZXcgcG9zaXRpb25cbiAgICAvLyAgICAgKG5ld1ggKyBtYXJnaW5YLHkgbmV3WSArIG1hcmdpblkpLlxuXG4gICAgY29uc3QgczF4ID0gKG5ld1dpZHRoIC0gMiAqIG1hcmdpblgpIC8gKHdpZHRoIC0gMiAqIG1hcmdpblgpO1xuICAgIGNvbnN0IHMxeSA9IChuZXdIZWlnaHQgLSAyICogbWFyZ2luWSkgLyAoaGVpZ2h0IC0gMiAqIG1hcmdpblkpO1xuICAgIGNvbnN0IHR4ID0gLXMxeCAqICh4ICsgbWFyZ2luWCkgKyBuZXdYICsgbWFyZ2luWDtcbiAgICBjb25zdCB0eSA9IC1zMXkgKiAoeSArIG1hcmdpblkpICsgbmV3WSArIG1hcmdpblk7XG5cbiAgICBpZiAoczF4ICE9PSAxIHx8IHMxeSAhPT0gMSB8fCB0eCAhPT0gMCB8fCB0eSAhPT0gMCkge1xuICAgICAgZm9yIChjb25zdCB7IGxpbmUsIHBvaW50cyB9IG9mIHRoaXMuI2xpbmVzKSB7XG4gICAgICAgIE91dGxpbmUuX3Jlc2NhbGUobGluZSwgdHgsIHR5LCBzMXgsIHMxeSwgbGluZSk7XG4gICAgICAgIE91dGxpbmUuX3Jlc2NhbGUocG9pbnRzLCB0eCwgdHksIHMxeCwgczF5LCBwb2ludHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByb290OiB7XG4gICAgICAgIHZpZXdCb3g6IHRoaXMudmlld0JveCxcbiAgICAgIH0sXG4gICAgICBwYXRoOiB7XG4gICAgICAgIFwidHJhbnNmb3JtLW9yaWdpblwiOiBgJHtPdXRsaW5lLnN2Z1JvdW5kKG5ld1gpfSAke091dGxpbmUuc3ZnUm91bmQobmV3WSl9YCxcbiAgICAgICAgdHJhbnNmb3JtOiB0aGlzLnJvdGF0aW9uVHJhbnNmb3JtIHx8IG51bGwsXG4gICAgICAgIGQ6IHRoaXMudG9TVkdQYXRoKCksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBnZXRQYXRoVHJhbnNsYXRlZFNWR1Byb3BlcnRpZXMoW25ld1gsIG5ld1ldLCBwYXJlbnREaW1lbnNpb25zKSB7XG4gICAgY29uc3QgW25ld1BhcmVudFdpZHRoLCBuZXdQYXJlbnRIZWlnaHRdID0gcGFyZW50RGltZW5zaW9ucztcbiAgICBjb25zdCBiYm94ID0gdGhpcy4jYmJveDtcbiAgICBjb25zdCB0eCA9IG5ld1ggLSBiYm94WzBdO1xuICAgIGNvbnN0IHR5ID0gbmV3WSAtIGJib3hbMV07XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLiNwYXJlbnRXaWR0aCA9PT0gbmV3UGFyZW50V2lkdGggJiZcbiAgICAgIHRoaXMuI3BhcmVudEhlaWdodCA9PT0gbmV3UGFyZW50SGVpZ2h0XG4gICAgKSB7XG4gICAgICAvLyBXZSBkb24ndCBjaGFuZ2UgdGhlIHBhcmVudCBkaW1lbnNpb25zIHNvIGl0J3MgYSBzaW1wbGUgdHJhbnNsYXRpb24uXG4gICAgICBmb3IgKGNvbnN0IHsgbGluZSwgcG9pbnRzIH0gb2YgdGhpcy4jbGluZXMpIHtcbiAgICAgICAgT3V0bGluZS5fdHJhbnNsYXRlKGxpbmUsIHR4LCB0eSwgbGluZSk7XG4gICAgICAgIE91dGxpbmUuX3RyYW5zbGF0ZShwb2ludHMsIHR4LCB0eSwgcG9pbnRzKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3ggPSB0aGlzLiNwYXJlbnRXaWR0aCAvIG5ld1BhcmVudFdpZHRoO1xuICAgICAgY29uc3Qgc3kgPSB0aGlzLiNwYXJlbnRIZWlnaHQgLyBuZXdQYXJlbnRIZWlnaHQ7XG4gICAgICB0aGlzLiNwYXJlbnRXaWR0aCA9IG5ld1BhcmVudFdpZHRoO1xuICAgICAgdGhpcy4jcGFyZW50SGVpZ2h0ID0gbmV3UGFyZW50SGVpZ2h0O1xuXG4gICAgICBmb3IgKGNvbnN0IHsgbGluZSwgcG9pbnRzIH0gb2YgdGhpcy4jbGluZXMpIHtcbiAgICAgICAgT3V0bGluZS5fcmVzY2FsZShsaW5lLCB0eCwgdHksIHN4LCBzeSwgbGluZSk7XG4gICAgICAgIE91dGxpbmUuX3Jlc2NhbGUocG9pbnRzLCB0eCwgdHksIHN4LCBzeSwgcG9pbnRzKTtcbiAgICAgIH1cbiAgICAgIGJib3hbMl0gKj0gc3g7XG4gICAgICBiYm94WzNdICo9IHN5O1xuICAgIH1cbiAgICBiYm94WzBdID0gbmV3WDtcbiAgICBiYm94WzFdID0gbmV3WTtcblxuICAgIHJldHVybiB7XG4gICAgICByb290OiB7XG4gICAgICAgIHZpZXdCb3g6IHRoaXMudmlld0JveCxcbiAgICAgIH0sXG4gICAgICBwYXRoOiB7XG4gICAgICAgIGQ6IHRoaXMudG9TVkdQYXRoKCksXG4gICAgICAgIFwidHJhbnNmb3JtLW9yaWdpblwiOiBgJHtPdXRsaW5lLnN2Z1JvdW5kKG5ld1gpfSAke091dGxpbmUuc3ZnUm91bmQobmV3WSl9YCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGdldCBkZWZhdWx0U1ZHUHJvcGVydGllcygpIHtcbiAgICBjb25zdCBiYm94ID0gdGhpcy4jYmJveDtcbiAgICByZXR1cm4ge1xuICAgICAgcm9vdDoge1xuICAgICAgICB2aWV3Qm94OiB0aGlzLnZpZXdCb3gsXG4gICAgICB9LFxuICAgICAgcm9vdENsYXNzOiB7XG4gICAgICAgIGRyYXc6IHRydWUsXG4gICAgICB9LFxuICAgICAgcGF0aDoge1xuICAgICAgICBkOiB0aGlzLnRvU1ZHUGF0aCgpLFxuICAgICAgICBcInRyYW5zZm9ybS1vcmlnaW5cIjogYCR7T3V0bGluZS5zdmdSb3VuZChiYm94WzBdKX0gJHtPdXRsaW5lLnN2Z1JvdW5kKGJib3hbMV0pfWAsXG4gICAgICAgIHRyYW5zZm9ybTogdGhpcy5yb3RhdGlvblRyYW5zZm9ybSB8fCBudWxsLFxuICAgICAgfSxcbiAgICAgIGJib3gsXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgeyBJbmtEcmF3T3V0bGluZSwgSW5rRHJhd091dGxpbmVyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLFxuICBBbm5vdGF0aW9uRWRpdG9yVHlwZSxcbiAgc2hhZG93LFxuICBVdGlsLFxufSBmcm9tIFwiLi4vLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7IERyYXdpbmdFZGl0b3IsIERyYXdpbmdPcHRpb25zIH0gZnJvbSBcIi4vZHJhdy5qc1wiO1xuaW1wb3J0IHsgSW5rRHJhd091dGxpbmUsIElua0RyYXdPdXRsaW5lciB9IGZyb20gXCIuL2RyYXdlcnMvaW5rZHJhdy5qc1wiO1xuaW1wb3J0IHsgQW5ub3RhdGlvbkVkaXRvciB9IGZyb20gXCIuL2VkaXRvci5qc1wiO1xuaW1wb3J0IHsgSW5rQW5ub3RhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vYW5ub3RhdGlvbl9sYXllci5qc1wiO1xuXG5jbGFzcyBJbmtEcmF3aW5nT3B0aW9ucyBleHRlbmRzIERyYXdpbmdPcHRpb25zIHtcbiAgY29uc3RydWN0b3Iodmlld2VyUGFyYW1ldGVycykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fdmlld1BhcmFtZXRlcnMgPSB2aWV3ZXJQYXJhbWV0ZXJzO1xuXG4gICAgc3VwZXIudXBkYXRlUHJvcGVydGllcyh7XG4gICAgICBmaWxsOiBcIm5vbmVcIixcbiAgICAgIHN0cm9rZTogQW5ub3RhdGlvbkVkaXRvci5fZGVmYXVsdExpbmVDb2xvcixcbiAgICAgIFwic3Ryb2tlLW9wYWNpdHlcIjogMSxcbiAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IDEsXG4gICAgICBcInN0cm9rZS1saW5lY2FwXCI6IFwicm91bmRcIixcbiAgICAgIFwic3Ryb2tlLWxpbmVqb2luXCI6IFwicm91bmRcIixcbiAgICAgIFwic3Ryb2tlLW1pdGVybGltaXRcIjogMTAsXG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVTVkdQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChuYW1lID09PSBcInN0cm9rZS13aWR0aFwiKSB7XG4gICAgICB2YWx1ZSA/Pz0gdGhpc1tcInN0cm9rZS13aWR0aFwiXTtcbiAgICAgIHZhbHVlICo9IHRoaXMuX3ZpZXdQYXJhbWV0ZXJzLnJlYWxTY2FsZTtcbiAgICB9XG4gICAgc3VwZXIudXBkYXRlU1ZHUHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICB9XG5cbiAgY2xvbmUoKSB7XG4gICAgY29uc3QgY2xvbmUgPSBuZXcgSW5rRHJhd2luZ09wdGlvbnModGhpcy5fdmlld1BhcmFtZXRlcnMpO1xuICAgIGNsb25lLnVwZGF0ZUFsbCh0aGlzKTtcbiAgICByZXR1cm4gY2xvbmU7XG4gIH1cbn1cblxuLyoqXG4gKiBCYXNpYyBkcmF3IGVkaXRvciBpbiBvcmRlciB0byBnZW5lcmF0ZSBhbiBJbmsgYW5ub3RhdGlvbi5cbiAqL1xuY2xhc3MgSW5rRWRpdG9yIGV4dGVuZHMgRHJhd2luZ0VkaXRvciB7XG4gIHN0YXRpYyBfdHlwZSA9IFwiaW5rXCI7XG5cbiAgc3RhdGljIF9lZGl0b3JUeXBlID0gQW5ub3RhdGlvbkVkaXRvclR5cGUuSU5LO1xuXG4gIHN0YXRpYyBfZGVmYXVsdERyYXdpbmdPcHRpb25zID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICBzdXBlcih7IC4uLnBhcmFtcywgbmFtZTogXCJpbmtFZGl0b3JcIiB9KTtcbiAgICB0aGlzLl93aWxsS2VlcEFzcGVjdFJhdGlvID0gdHJ1ZTtcbiAgICB0aGlzLmRlZmF1bHRMMTBuSWQgPSBcInBkZmpzLWVkaXRvci1pbmstZWRpdG9yXCI7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3RhdGljIGluaXRpYWxpemUobDEwbiwgdWlNYW5hZ2VyKSB7XG4gICAgQW5ub3RhdGlvbkVkaXRvci5pbml0aWFsaXplKGwxMG4sIHVpTWFuYWdlcik7XG4gICAgdGhpcy5fZGVmYXVsdERyYXdpbmdPcHRpb25zID0gbmV3IElua0RyYXdpbmdPcHRpb25zKFxuICAgICAgdWlNYW5hZ2VyLnZpZXdQYXJhbWV0ZXJzXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdGF0aWMgZ2V0RGVmYXVsdERyYXdpbmdPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBjb25zdCBjbG9uZSA9IHRoaXMuX2RlZmF1bHREcmF3aW5nT3B0aW9ucy5jbG9uZSgpO1xuICAgIGNsb25lLnVwZGF0ZVByb3BlcnRpZXMob3B0aW9ucyk7XG4gICAgcmV0dXJuIGNsb25lO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBnZXQgc3VwcG9ydE11bHRpcGxlRHJhd2luZ3MoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3RhdGljIGdldCB0eXBlc01hcCgpIHtcbiAgICByZXR1cm4gc2hhZG93KFxuICAgICAgdGhpcyxcbiAgICAgIFwidHlwZXNNYXBcIixcbiAgICAgIG5ldyBNYXAoW1xuICAgICAgICBbQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX1RISUNLTkVTUywgXCJzdHJva2Utd2lkdGhcIl0sXG4gICAgICAgIFtBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5JTktfQ09MT1IsIFwic3Ryb2tlXCJdLFxuICAgICAgICBbQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX09QQUNJVFksIFwic3Ryb2tlLW9wYWNpdHlcIl0sXG4gICAgICBdKVxuICAgICk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3RhdGljIGNyZWF0ZURyYXdlckluc3RhbmNlKHgsIHksIHBhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHQsIHJvdGF0aW9uKSB7XG4gICAgcmV0dXJuIG5ldyBJbmtEcmF3T3V0bGluZXIoXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHBhcmVudFdpZHRoLFxuICAgICAgcGFyZW50SGVpZ2h0LFxuICAgICAgcm90YXRpb24sXG4gICAgICB0aGlzLl9kZWZhdWx0RHJhd2luZ09wdGlvbnNbXCJzdHJva2Utd2lkdGhcIl1cbiAgICApO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBkZXNlcmlhbGl6ZURyYXcoXG4gICAgcGFnZVgsXG4gICAgcGFnZVksXG4gICAgcGFnZVdpZHRoLFxuICAgIHBhZ2VIZWlnaHQsXG4gICAgaW5uZXJNYXJnaW4sXG4gICAgZGF0YVxuICApIHtcbiAgICByZXR1cm4gSW5rRHJhd091dGxpbmUuZGVzZXJpYWxpemUoXG4gICAgICBwYWdlWCxcbiAgICAgIHBhZ2VZLFxuICAgICAgcGFnZVdpZHRoLFxuICAgICAgcGFnZUhlaWdodCxcbiAgICAgIGlubmVyTWFyZ2luLFxuICAgICAgZGF0YVxuICAgICk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3RhdGljIGFzeW5jIGRlc2VyaWFsaXplKGRhdGEsIHBhcmVudCwgdWlNYW5hZ2VyKSB7XG4gICAgbGV0IGluaXRpYWxEYXRhID0gbnVsbDtcbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIElua0Fubm90YXRpb25FbGVtZW50KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpbmtMaXN0cyxcbiAgICAgICAgICByZWN0LFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIGNvbG9yLFxuICAgICAgICAgIG9wYWNpdHksXG4gICAgICAgICAgYm9yZGVyU3R5bGU6IHsgcmF3V2lkdGg6IHRoaWNrbmVzcyB9LFxuICAgICAgICAgIHBvcHVwUmVmLFxuICAgICAgICB9LFxuICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICBwYWdlOiB7IHBhZ2VOdW1iZXIgfSxcbiAgICAgICAgfSxcbiAgICAgIH0gPSBkYXRhO1xuICAgICAgaW5pdGlhbERhdGEgPSBkYXRhID0ge1xuICAgICAgICBhbm5vdGF0aW9uVHlwZTogQW5ub3RhdGlvbkVkaXRvclR5cGUuSU5LLFxuICAgICAgICBjb2xvcjogQXJyYXkuZnJvbShjb2xvciksXG4gICAgICAgIHRoaWNrbmVzcyxcbiAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgcGF0aHM6IHsgcG9pbnRzOiBpbmtMaXN0cyB9LFxuICAgICAgICBib3hlczogbnVsbCxcbiAgICAgICAgcGFnZUluZGV4OiBwYWdlTnVtYmVyIC0gMSxcbiAgICAgICAgcmVjdDogcmVjdC5zbGljZSgwKSxcbiAgICAgICAgcm90YXRpb24sXG4gICAgICAgIGlkLFxuICAgICAgICBkZWxldGVkOiBmYWxzZSxcbiAgICAgICAgcG9wdXBSZWYsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGVkaXRvciA9IGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKGRhdGEsIHBhcmVudCwgdWlNYW5hZ2VyKTtcbiAgICBlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZCA9IGRhdGEuaWQgfHwgbnVsbDtcbiAgICBlZGl0b3IuX2luaXRpYWxEYXRhID0gaW5pdGlhbERhdGE7XG5cbiAgICByZXR1cm4gZWRpdG9yO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uU2NhbGVDaGFuZ2luZygpIHtcbiAgICBpZiAoIXRoaXMucGFyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN1cGVyLm9uU2NhbGVDaGFuZ2luZygpO1xuICAgIGNvbnN0IHsgX2RyYXdJZCwgX2RyYXdpbmdPcHRpb25zLCBwYXJlbnQgfSA9IHRoaXM7XG4gICAgX2RyYXdpbmdPcHRpb25zLnVwZGF0ZVNWR1Byb3BlcnR5KFwic3Ryb2tlLXdpZHRoXCIpO1xuICAgIHBhcmVudC5kcmF3TGF5ZXIudXBkYXRlUHJvcGVydGllcyhcbiAgICAgIF9kcmF3SWQsXG4gICAgICBfZHJhd2luZ09wdGlvbnMudG9TVkdQcm9wZXJ0aWVzKClcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIG9uU2NhbGVDaGFuZ2luZ1doZW5EcmF3aW5nKCkge1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuX2N1cnJlbnRQYXJlbnQ7XG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3VwZXIub25TY2FsZUNoYW5naW5nV2hlbkRyYXdpbmcoKTtcbiAgICB0aGlzLl9kZWZhdWx0RHJhd2luZ09wdGlvbnMudXBkYXRlU1ZHUHJvcGVydHkoXCJzdHJva2Utd2lkdGhcIik7XG4gICAgcGFyZW50LmRyYXdMYXllci51cGRhdGVQcm9wZXJ0aWVzKFxuICAgICAgdGhpcy5fY3VycmVudERyYXdJZCxcbiAgICAgIHRoaXMuX2RlZmF1bHREcmF3aW5nT3B0aW9ucy50b1NWR1Byb3BlcnRpZXMoKVxuICAgICk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgY3JlYXRlRHJhd2luZ09wdGlvbnMoeyBjb2xvciwgdGhpY2tuZXNzLCBvcGFjaXR5IH0pIHtcbiAgICB0aGlzLl9kcmF3aW5nT3B0aW9ucyA9IElua0VkaXRvci5nZXREZWZhdWx0RHJhd2luZ09wdGlvbnMoe1xuICAgICAgc3Ryb2tlOiBVdGlsLm1ha2VIZXhDb2xvciguLi5jb2xvciksXG4gICAgICBcInN0cm9rZS13aWR0aFwiOiB0aGlja25lc3MsXG4gICAgICBcInN0cm9rZS1vcGFjaXR5XCI6IG9wYWNpdHksXG4gICAgfSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc2VyaWFsaXplKGlzRm9yQ29weWluZyA9IGZhbHNlKSB7XG4gICAgaWYgKHRoaXMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kZWxldGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXJpYWxpemVEZWxldGVkKCk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBsaW5lcywgcG9pbnRzLCByZWN0IH0gPSB0aGlzLnNlcmlhbGl6ZURyYXcoaXNGb3JDb3B5aW5nKTtcbiAgICBjb25zdCB7XG4gICAgICBfZHJhd2luZ09wdGlvbnM6IHtcbiAgICAgICAgc3Ryb2tlLFxuICAgICAgICBcInN0cm9rZS1vcGFjaXR5XCI6IG9wYWNpdHksXG4gICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IHRoaWNrbmVzcyxcbiAgICAgIH0sXG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IHtcbiAgICAgIGFubm90YXRpb25UeXBlOiBBbm5vdGF0aW9uRWRpdG9yVHlwZS5JTkssXG4gICAgICBjb2xvcjogQW5ub3RhdGlvbkVkaXRvci5fY29sb3JNYW5hZ2VyLmNvbnZlcnQoc3Ryb2tlKSxcbiAgICAgIG9wYWNpdHksXG4gICAgICB0aGlja25lc3MsXG4gICAgICBwYXRoczoge1xuICAgICAgICBsaW5lcyxcbiAgICAgICAgcG9pbnRzLFxuICAgICAgfSxcbiAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsXG4gICAgICByZWN0LFxuICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXG4gICAgICBzdHJ1Y3RUcmVlUGFyZW50SWQ6IHRoaXMuX3N0cnVjdFRyZWVQYXJlbnRJZCxcbiAgICB9O1xuXG4gICAgaWYgKGlzRm9yQ29weWluZykge1xuICAgICAgc2VyaWFsaXplZC5pc0NvcHkgPSB0cnVlO1xuICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYW5ub3RhdGlvbkVsZW1lbnRJZCAmJiAhdGhpcy4jaGFzRWxlbWVudENoYW5nZWQoc2VyaWFsaXplZCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHNlcmlhbGl6ZWQuaWQgPSB0aGlzLmFubm90YXRpb25FbGVtZW50SWQ7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZWQ7XG4gIH1cblxuICAjaGFzRWxlbWVudENoYW5nZWQoc2VyaWFsaXplZCkge1xuICAgIGNvbnN0IHsgY29sb3IsIHRoaWNrbmVzcywgb3BhY2l0eSwgcGFnZUluZGV4IH0gPSB0aGlzLl9pbml0aWFsRGF0YTtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5faGFzQmVlbk1vdmVkIHx8XG4gICAgICB0aGlzLl9oYXNCZWVuUmVzaXplZCB8fFxuICAgICAgc2VyaWFsaXplZC5jb2xvci5zb21lKChjLCBpKSA9PiBjICE9PSBjb2xvcltpXSkgfHxcbiAgICAgIHNlcmlhbGl6ZWQudGhpY2tuZXNzICE9PSB0aGlja25lc3MgfHxcbiAgICAgIHNlcmlhbGl6ZWQub3BhY2l0eSAhPT0gb3BhY2l0eSB8fFxuICAgICAgc2VyaWFsaXplZC5wYWdlSW5kZXggIT09IHBhZ2VJbmRleFxuICAgICk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQoYW5ub3RhdGlvbikge1xuICAgIGNvbnN0IHsgcG9pbnRzLCByZWN0IH0gPSB0aGlzLnNlcmlhbGl6ZURyYXcoLyogaXNGb3JDb3B5aW5nID0gKi8gZmFsc2UpO1xuICAgIGFubm90YXRpb24udXBkYXRlRWRpdGVkKHtcbiAgICAgIHJlY3QsXG4gICAgICB0aGlja25lc3M6IHRoaXMuX2RyYXdpbmdPcHRpb25zW1wic3Ryb2tlLXdpZHRoXCJdLFxuICAgICAgcG9pbnRzLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IHsgSW5rRHJhd2luZ09wdGlvbnMsIElua0VkaXRvciB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDI0IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJbmtEcmF3T3V0bGluZSB9IGZyb20gXCIuL2lua2RyYXcuanNcIjtcblxuY2xhc3MgQ29udG91ckRyYXdPdXRsaW5lIGV4dGVuZHMgSW5rRHJhd091dGxpbmUge1xuICB0b1NWR1BhdGgoKSB7XG4gICAgbGV0IHBhdGggPSBzdXBlci50b1NWR1BhdGgoKTtcbiAgICBpZiAoIXBhdGguZW5kc1dpdGgoXCJaXCIpKSB7XG4gICAgICBwYXRoICs9IFwiWlwiO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbiAgfVxufVxuXG5leHBvcnQgeyBDb250b3VyRHJhd091dGxpbmUgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZnJvbUJhc2U2NFV0aWwsIHRvQmFzZTY0VXRpbCwgd2FybiB9IGZyb20gXCIuLi8uLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgQ29udG91ckRyYXdPdXRsaW5lIH0gZnJvbSBcIi4vY29udG91ci5qc1wiO1xuaW1wb3J0IHsgSW5rRHJhd091dGxpbmUgfSBmcm9tIFwiLi9pbmtkcmF3LmpzXCI7XG5pbXBvcnQgeyBPdXRsaW5lIH0gZnJvbSBcIi4vb3V0bGluZS5qc1wiO1xuXG5jb25zdCBCQVNFX0hFQURFUl9MRU5HVEggPSA4O1xuY29uc3QgUE9JTlRTX1BST1BFUlRJRVNfTlVNQkVSID0gMztcblxuLyoqXG4gKiBCYXNpYyB0ZXh0IGVkaXRvciBpbiBvcmRlciB0byBjcmVhdGUgYSBTaWduYXR1cmUgYW5ub3RhdGlvbi5cbiAqL1xuY2xhc3MgU2lnbmF0dXJlRXh0cmFjdG9yIHtcbiAgc3RhdGljICNQQVJBTUVURVJTID0ge1xuICAgIG1heERpbTogNTEyLFxuICAgIHNpZ21hU0ZhY3RvcjogMC4wMixcbiAgICBzaWdtYVI6IDI1LFxuICAgIGtlcm5lbFNpemU6IDE2LFxuICB9O1xuXG4gIHN0YXRpYyAjbmVpZ2hib3JJbmRleFRvSWQoaTAsIGowLCBpLCBqKSB7XG4gICAgLypcbiAgICAgIFRoZSBpZGVhIGlzIHRvIG1hcCB0aGUgbmVpZ2hib3JzIG9mIGEgcGl4ZWwgaW50byBhIHVuaXF1ZSBpZC5cbiAgICAgICAgMyAyIDFcbiAgICAgICAgNCBYIDBcbiAgICAgICAgNSA2IDdcbiAgICAqL1xuXG4gICAgaSAtPSBpMDtcbiAgICBqIC09IGowO1xuXG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgIHJldHVybiBqID4gMCA/IDAgOiA0O1xuICAgIH1cblxuICAgIGlmIChpID09PSAxKSB7XG4gICAgICByZXR1cm4gaiArIDY7XG4gICAgfVxuXG4gICAgcmV0dXJuIDIgLSBqO1xuICB9XG5cbiAgc3RhdGljICNuZWlnaGJvcklkVG9JbmRleCA9IG5ldyBJbnQzMkFycmF5KFtcbiAgICAwLCAxLCAtMSwgMSwgLTEsIDAsIC0xLCAtMSwgMCwgLTEsIDEsIC0xLCAxLCAwLCAxLCAxLFxuICBdKTtcblxuICBzdGF0aWMgI2Nsb2Nrd2lzZU5vblplcm8oYnVmLCB3aWR0aCwgaTAsIGowLCBpLCBqLCBvZmZzZXQpIHtcbiAgICBjb25zdCBpZCA9IHRoaXMuI25laWdoYm9ySW5kZXhUb0lkKGkwLCBqMCwgaSwgaik7XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCA4OyBrKyspIHtcbiAgICAgIGNvbnN0IGtrID0gKC1rICsgaWQgLSBvZmZzZXQgKyAxNikgJSA4O1xuICAgICAgY29uc3Qgc2hpZnRJID0gdGhpcy4jbmVpZ2hib3JJZFRvSW5kZXhbMiAqIGtrXTtcbiAgICAgIGNvbnN0IHNoaWZ0SiA9IHRoaXMuI25laWdoYm9ySWRUb0luZGV4WzIgKiBrayArIDFdO1xuICAgICAgaWYgKGJ1ZlsoaTAgKyBzaGlmdEkpICogd2lkdGggKyAoajAgKyBzaGlmdEopXSAhPT0gMCkge1xuICAgICAgICByZXR1cm4ga2s7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHN0YXRpYyAjY291bnRlckNsb2Nrd2lzZU5vblplcm8oYnVmLCB3aWR0aCwgaTAsIGowLCBpLCBqLCBvZmZzZXQpIHtcbiAgICBjb25zdCBpZCA9IHRoaXMuI25laWdoYm9ySW5kZXhUb0lkKGkwLCBqMCwgaSwgaik7XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCA4OyBrKyspIHtcbiAgICAgIGNvbnN0IGtrID0gKGsgKyBpZCArIG9mZnNldCArIDE2KSAlIDg7XG4gICAgICBjb25zdCBzaGlmdEkgPSB0aGlzLiNuZWlnaGJvcklkVG9JbmRleFsyICoga2tdO1xuICAgICAgY29uc3Qgc2hpZnRKID0gdGhpcy4jbmVpZ2hib3JJZFRvSW5kZXhbMiAqIGtrICsgMV07XG4gICAgICBpZiAoYnVmWyhpMCArIHNoaWZ0SSkgKiB3aWR0aCArIChqMCArIHNoaWZ0SildICE9PSAwKSB7XG4gICAgICAgIHJldHVybiBraztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgc3RhdGljICNmaW5kQ29udG91cnMoYnVmLCB3aWR0aCwgaGVpZ2h0LCB0aHJlc2hvbGQpIHtcbiAgICAvLyBCYXNlZCBvbiB0aGUgU3V6dWtpJ3MgYWxnb3JpdGhtOlxuICAgIC8vICBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAyMzEyMTMxNjE3NDEvaHR0cHM6Ly93d3cubmV2aXMuY29sdW1iaWEuZWR1L352Z2VudHkvcHVibGljL3N1enVraV9ldF9hbC5wZGZcblxuICAgIGNvbnN0IE4gPSBidWYubGVuZ3RoO1xuICAgIGNvbnN0IHR5cGVzID0gbmV3IEludDMyQXJyYXkoTik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpKyspIHtcbiAgICAgIHR5cGVzW2ldID0gYnVmW2ldIDw9IHRocmVzaG9sZCA/IDEgOiAwO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGVpZ2h0IC0gMTsgaSsrKSB7XG4gICAgICB0eXBlc1tpICogd2lkdGhdID0gdHlwZXNbaSAqIHdpZHRoICsgd2lkdGggLSAxXSA9IDA7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2lkdGg7IGkrKykge1xuICAgICAgdHlwZXNbaV0gPSB0eXBlc1t3aWR0aCAqIGhlaWdodCAtIDEgLSBpXSA9IDA7XG4gICAgfVxuXG4gICAgbGV0IG5iZCA9IDE7XG4gICAgbGV0IGxuYmQ7XG4gICAgY29uc3QgY29udG91cnMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGVpZ2h0IC0gMTsgaSsrKSB7XG4gICAgICBsbmJkID0gMTtcbiAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgd2lkdGggLSAxOyBqKyspIHtcbiAgICAgICAgY29uc3QgaWogPSBpICogd2lkdGggKyBqO1xuICAgICAgICBjb25zdCBwaXggPSB0eXBlc1tpal07XG4gICAgICAgIGlmIChwaXggPT09IDApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpMiA9IGk7XG4gICAgICAgIGxldCBqMiA9IGo7XG5cbiAgICAgICAgaWYgKHBpeCA9PT0gMSAmJiB0eXBlc1tpaiAtIDFdID09PSAwKSB7XG4gICAgICAgICAgLy8gT3V0ZXIgYm9yZGVyLlxuICAgICAgICAgIG5iZCArPSAxO1xuICAgICAgICAgIGoyIC09IDE7XG4gICAgICAgIH0gZWxzZSBpZiAocGl4ID49IDEgJiYgdHlwZXNbaWogKyAxXSA9PT0gMCkge1xuICAgICAgICAgIC8vIEhvbGUgYm9yZGVyLlxuICAgICAgICAgIG5iZCArPSAxO1xuICAgICAgICAgIGoyICs9IDE7XG4gICAgICAgICAgaWYgKHBpeCA+IDEpIHtcbiAgICAgICAgICAgIGxuYmQgPSBwaXg7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChwaXggIT09IDEpIHtcbiAgICAgICAgICAgIGxuYmQgPSBNYXRoLmFicyhwaXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IFtqLCBpXTtcbiAgICAgICAgY29uc3QgaXNIb2xlID0gajIgPT09IGogKyAxO1xuICAgICAgICBjb25zdCBjb250b3VyID0ge1xuICAgICAgICAgIGlzSG9sZSxcbiAgICAgICAgICBwb2ludHMsXG4gICAgICAgICAgaWQ6IG5iZCxcbiAgICAgICAgICBwYXJlbnQ6IDAsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnRvdXJzLnB1c2goY29udG91cik7XG5cbiAgICAgICAgbGV0IGNvbnRvdXIwO1xuICAgICAgICBmb3IgKGNvbnN0IGMgb2YgY29udG91cnMpIHtcbiAgICAgICAgICBpZiAoYy5pZCA9PT0gbG5iZCkge1xuICAgICAgICAgICAgY29udG91cjAgPSBjO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250b3VyMCkge1xuICAgICAgICAgIGNvbnRvdXIucGFyZW50ID0gaXNIb2xlID8gbG5iZCA6IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoY29udG91cjAuaXNIb2xlKSB7XG4gICAgICAgICAgY29udG91ci5wYXJlbnQgPSBpc0hvbGUgPyBjb250b3VyMC5wYXJlbnQgOiBsbmJkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRvdXIucGFyZW50ID0gaXNIb2xlID8gbG5iZCA6IGNvbnRvdXIwLnBhcmVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGsgPSB0aGlzLiNjbG9ja3dpc2VOb25aZXJvKHR5cGVzLCB3aWR0aCwgaSwgaiwgaTIsIGoyLCAwKTtcbiAgICAgICAgaWYgKGsgPT09IC0xKSB7XG4gICAgICAgICAgdHlwZXNbaWpdID0gLW5iZDtcbiAgICAgICAgICBpZiAodHlwZXNbaWpdICE9PSAxKSB7XG4gICAgICAgICAgICBsbmJkID0gTWF0aC5hYnModHlwZXNbaWpdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2hpZnRJID0gdGhpcy4jbmVpZ2hib3JJZFRvSW5kZXhbMiAqIGtdO1xuICAgICAgICBsZXQgc2hpZnRKID0gdGhpcy4jbmVpZ2hib3JJZFRvSW5kZXhbMiAqIGsgKyAxXTtcbiAgICAgICAgY29uc3QgaTEgPSBpICsgc2hpZnRJO1xuICAgICAgICBjb25zdCBqMSA9IGogKyBzaGlmdEo7XG4gICAgICAgIGkyID0gaTE7XG4gICAgICAgIGoyID0gajE7XG4gICAgICAgIGxldCBpMyA9IGk7XG4gICAgICAgIGxldCBqMyA9IGo7XG5cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICBjb25zdCBrayA9IHRoaXMuI2NvdW50ZXJDbG9ja3dpc2VOb25aZXJvKFxuICAgICAgICAgICAgdHlwZXMsXG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGkzLFxuICAgICAgICAgICAgajMsXG4gICAgICAgICAgICBpMixcbiAgICAgICAgICAgIGoyLFxuICAgICAgICAgICAgMVxuICAgICAgICAgICk7XG4gICAgICAgICAgc2hpZnRJID0gdGhpcy4jbmVpZ2hib3JJZFRvSW5kZXhbMiAqIGtrXTtcbiAgICAgICAgICBzaGlmdEogPSB0aGlzLiNuZWlnaGJvcklkVG9JbmRleFsyICoga2sgKyAxXTtcbiAgICAgICAgICBjb25zdCBpNCA9IGkzICsgc2hpZnRJO1xuICAgICAgICAgIGNvbnN0IGo0ID0gajMgKyBzaGlmdEo7XG4gICAgICAgICAgcG9pbnRzLnB1c2goajQsIGk0KTtcbiAgICAgICAgICBjb25zdCBpajMgPSBpMyAqIHdpZHRoICsgajM7XG4gICAgICAgICAgaWYgKHR5cGVzW2lqMyArIDFdID09PSAwKSB7XG4gICAgICAgICAgICB0eXBlc1tpajNdID0gLW5iZDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVzW2lqM10gPT09IDEpIHtcbiAgICAgICAgICAgIHR5cGVzW2lqM10gPSBuYmQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGk0ID09PSBpICYmIGo0ID09PSBqICYmIGkzID09PSBpMSAmJiBqMyA9PT0gajEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlc1tpal0gIT09IDEpIHtcbiAgICAgICAgICAgICAgbG5iZCA9IE1hdGguYWJzKHR5cGVzW2lqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaTIgPSBpMztcbiAgICAgICAgICAgIGoyID0gajM7XG4gICAgICAgICAgICBpMyA9IGk0O1xuICAgICAgICAgICAgajMgPSBqNDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbnRvdXJzO1xuICB9XG5cbiAgc3RhdGljICNkb3VnbGFzUGV1Y2tlckhlbHBlcihwb2ludHMsIHN0YXJ0LCBlbmQsIG91dHB1dCkge1xuICAgIC8vIEJhc2VkIG9uIHRoZSBEb3VnbGFzLVBldWNrZXIgYWxnb3JpdGhtOlxuICAgIC8vICBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SYW1lciVFMiU4MCU5M0RvdWdsYXMlRTIlODAlOTNQZXVja2VyX2FsZ29yaXRobVxuICAgIGlmIChlbmQgLSBzdGFydCA8PSA0KSB7XG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQgLSAyOyBpICs9IDIpIHtcbiAgICAgICAgb3V0cHV0LnB1c2gocG9pbnRzW2ldLCBwb2ludHNbaSArIDFdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBheCA9IHBvaW50c1tzdGFydF07XG4gICAgY29uc3QgYXkgPSBwb2ludHNbc3RhcnQgKyAxXTtcbiAgICBjb25zdCBhYnggPSBwb2ludHNbZW5kIC0gNF0gLSBheDtcbiAgICBjb25zdCBhYnkgPSBwb2ludHNbZW5kIC0gM10gLSBheTtcbiAgICBjb25zdCBkaXN0ID0gTWF0aC5oeXBvdChhYngsIGFieSk7XG4gICAgY29uc3QgbmFieCA9IGFieCAvIGRpc3Q7XG4gICAgY29uc3QgbmFieSA9IGFieSAvIGRpc3Q7XG4gICAgY29uc3QgYWEgPSBuYWJ4ICogYXkgLSBuYWJ5ICogYXg7XG5cbiAgICAvLyBHdWVzc2luZyB0aGUgZXBzaWxvbiB2YWx1ZS5cbiAgICAvLyBTZWUgXCJBIG5vdmVsIGZyYW1ld29yayBmb3IgbWFraW5nIGRvbWluYW50IHBvaW50IGRldGVjdGlvbiBtZXRob2RzXG4gICAgLy8gbm9uLXBhcmFtZXRyaWNcIi5cbiAgICBjb25zdCBtID0gYWJ5IC8gYWJ4O1xuICAgIGNvbnN0IGludlMgPSAxIC8gZGlzdDtcbiAgICBjb25zdCBwaGkgPSBNYXRoLmF0YW4obSk7XG4gICAgY29uc3QgY29zUGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICBjb25zdCBzaW5QaGkgPSBNYXRoLnNpbihwaGkpO1xuICAgIGNvbnN0IHRtYXggPSBpbnZTICogKE1hdGguYWJzKGNvc1BoaSkgKyBNYXRoLmFicyhzaW5QaGkpKTtcbiAgICBjb25zdCBwb2x5ID0gaW52UyAqICgxIC0gdG1heCArIHRtYXggKiogMik7XG4gICAgY29uc3QgcGFydGlhbFBoaSA9IE1hdGgubWF4KFxuICAgICAgTWF0aC5hdGFuKE1hdGguYWJzKHNpblBoaSArIGNvc1BoaSkgKiBwb2x5KSxcbiAgICAgIE1hdGguYXRhbihNYXRoLmFicyhzaW5QaGkgLSBjb3NQaGkpICogcG9seSlcbiAgICApO1xuXG4gICAgbGV0IGRtYXggPSAwO1xuICAgIGxldCBpbmRleCA9IHN0YXJ0O1xuICAgIGZvciAobGV0IGkgPSBzdGFydCArIDI7IGkgPCBlbmQgLSAyOyBpICs9IDIpIHtcbiAgICAgIGNvbnN0IGQgPSBNYXRoLmFicyhhYSAtIG5hYnggKiBwb2ludHNbaSArIDFdICsgbmFieSAqIHBvaW50c1tpXSk7XG4gICAgICBpZiAoZCA+IGRtYXgpIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBkbWF4ID0gZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZG1heCA+IChkaXN0ICogcGFydGlhbFBoaSkgKiogMikge1xuICAgICAgdGhpcy4jZG91Z2xhc1BldWNrZXJIZWxwZXIocG9pbnRzLCBzdGFydCwgaW5kZXggKyAyLCBvdXRwdXQpO1xuICAgICAgdGhpcy4jZG91Z2xhc1BldWNrZXJIZWxwZXIocG9pbnRzLCBpbmRleCwgZW5kLCBvdXRwdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXQucHVzaChheCwgYXkpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyAjZG91Z2xhc1BldWNrZXIocG9pbnRzKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gW107XG4gICAgY29uc3QgbGVuID0gcG9pbnRzLmxlbmd0aDtcbiAgICB0aGlzLiNkb3VnbGFzUGV1Y2tlckhlbHBlcihwb2ludHMsIDAsIGxlbiwgb3V0cHV0KTtcbiAgICBvdXRwdXQucHVzaChwb2ludHNbbGVuIC0gMl0sIHBvaW50c1tsZW4gLSAxXSk7XG4gICAgcmV0dXJuIG91dHB1dC5sZW5ndGggPD0gNCA/IG51bGwgOiBvdXRwdXQ7XG4gIH1cblxuICBzdGF0aWMgI2JpbGF0ZXJhbEZpbHRlcihidWYsIHdpZHRoLCBoZWlnaHQsIHNpZ21hUywgc2lnbWFSLCBrZXJuZWxTaXplKSB7XG4gICAgLy8gVGhlIGJpbGF0ZXJhbCBmaWx0ZXIgaXMgYSBub25saW5lYXIgZmlsdGVyIHRoYXQgZG9lcyBzcGF0aWFsIGF2ZXJhZ2luZy5cbiAgICAvLyBJdHMgbWFpbiBpbnRlcmVzdCBpcyB0byBwcmVzZXJ2ZSBlZGdlcyB3aGlsZSByZW1vdmluZyBub2lzZS5cbiAgICAvLyBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmlsYXRlcmFsX2ZpbHRlciBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIC8vIHNpZ21hUyBpcyB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uIG9mIHRoZSBzcGF0aWFsIGdhdXNzaWFuLlxuICAgIC8vIHNpZ21hUiBpcyB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uIG9mIHRoZSByYW5nZSAoaW4gdGVybSBvZiBwaXhlbFxuICAgIC8vIGludGVuc2l0eSkgZ2F1c3NpYW4uXG5cbiAgICAvLyBDcmVhdGUgYSBnYXVzc2lhbiBrZXJuZWxcbiAgICBjb25zdCBrZXJuZWwgPSBuZXcgRmxvYXQzMkFycmF5KGtlcm5lbFNpemUgKiogMik7XG4gICAgY29uc3Qgc2lnbWFTMiA9IC0yICogc2lnbWFTICoqIDI7XG4gICAgY29uc3QgaGFsZlNpemUgPSBrZXJuZWxTaXplID4+IDE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtlcm5lbFNpemU7IGkrKykge1xuICAgICAgY29uc3QgeCA9IChpIC0gaGFsZlNpemUpICoqIDI7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGtlcm5lbFNpemU7IGorKykge1xuICAgICAgICBrZXJuZWxbaSAqIGtlcm5lbFNpemUgKyBqXSA9IE1hdGguZXhwKFxuICAgICAgICAgICh4ICsgKGogLSBoYWxmU2l6ZSkgKiogMikgLyBzaWdtYVMyXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSByYW5nZSB2YWx1ZXMgdG8gYmUgdXNlZCB3aXRoIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHBpeGVscy5cbiAgICAvLyBJdCdzIGEgd2F5IGZhc3RlciB3aXRoIGEgbG9va3VwIHRhYmxlIHRoYW4gY29tcHV0aW5nIHRoZSBleHBvbmVudGlhbC5cbiAgICBjb25zdCByYW5nZVZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoMjU2KTtcbiAgICBjb25zdCBzaWdtYVIyID0gLTIgKiBzaWdtYVIgKiogMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICByYW5nZVZhbHVlc1tpXSA9IE1hdGguZXhwKGkgKiogMiAvIHNpZ21hUjIpO1xuICAgIH1cblxuICAgIGNvbnN0IE4gPSBidWYubGVuZ3RoO1xuICAgIGNvbnN0IG91dCA9IG5ldyBVaW50OEFycmF5KE4pO1xuXG4gICAgLy8gV2UgY29tcHV0ZSB0aGUgaGlzdG9ncmFtIGhlcmUgaW5zdGVhZCBvZiBkb2luZyBpdCBsYXRlcjogaXQncyBzbGlnaHRseVxuICAgIC8vIGZhc3Rlci5cbiAgICBjb25zdCBoaXN0b2dyYW0gPSBuZXcgVWludDMyQXJyYXkoMjU2KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHdpZHRoOyBqKyspIHtcbiAgICAgICAgY29uc3QgaWogPSBpICogd2lkdGggKyBqO1xuICAgICAgICBjb25zdCBjZW50ZXIgPSBidWZbaWpdO1xuICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgbGV0IG5vcm0gPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2VybmVsU2l6ZTsgaysrKSB7XG4gICAgICAgICAgY29uc3QgeSA9IGkgKyBrIC0gaGFsZlNpemU7XG4gICAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBrZXJuZWxTaXplOyBsKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSBqICsgbCAtIGhhbGZTaXplO1xuICAgICAgICAgICAgaWYgKHggPCAwIHx8IHggPj0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZWlnaGJvdXIgPSBidWZbeSAqIHdpZHRoICsgeF07XG4gICAgICAgICAgICBjb25zdCB3ID1cbiAgICAgICAgICAgICAga2VybmVsW2sgKiBrZXJuZWxTaXplICsgbF0gKlxuICAgICAgICAgICAgICByYW5nZVZhbHVlc1tNYXRoLmFicyhuZWlnaGJvdXIgLSBjZW50ZXIpXTtcbiAgICAgICAgICAgIHN1bSArPSBuZWlnaGJvdXIgKiB3O1xuICAgICAgICAgICAgbm9ybSArPSB3O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBpeCA9IChvdXRbaWpdID0gTWF0aC5yb3VuZChzdW0gLyBub3JtKSk7XG4gICAgICAgIGhpc3RvZ3JhbVtwaXhdKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtvdXQsIGhpc3RvZ3JhbV07XG4gIH1cblxuICBzdGF0aWMgI2dldEhpc3RvZ3JhbShidWYpIHtcbiAgICBjb25zdCBoaXN0b2dyYW0gPSBuZXcgVWludDMyQXJyYXkoMjU2KTtcbiAgICBmb3IgKGNvbnN0IGcgb2YgYnVmKSB7XG4gICAgICBoaXN0b2dyYW1bZ10rKztcbiAgICB9XG4gICAgcmV0dXJuIGhpc3RvZ3JhbTtcbiAgfVxuXG4gIHN0YXRpYyAjdG9VaW50OChidWYpIHtcbiAgICAvLyBXZSBoYXZlIGEgUkdCQSBidWZmZXIsIGNvbnRhaW5pbmcgYSBncmF5c2NhbGUgaW1hZ2UuXG4gICAgLy8gV2Ugd2FudCB0byBjb252ZXJ0IGl0IGludG8gYSBiYXNpYyBHIGJ1ZmZlci5cbiAgICAvLyBBbHNvLCB3ZSB3YW50IHRvIG5vcm1hbGl6ZSB0aGUgdmFsdWVzIGJldHdlZW4gMCBhbmQgMjU1IGluIG9yZGVyIHRvXG4gICAgLy8gaW5jcmVhc2UgdGhlIGNvbnRyYXN0LlxuICAgIGNvbnN0IE4gPSBidWYubGVuZ3RoO1xuICAgIGNvbnN0IG91dCA9IG5ldyBVaW50OENsYW1wZWRBcnJheShOID4+IDIpO1xuICAgIGxldCBtYXggPSAtSW5maW5pdHk7XG4gICAgbGV0IG1pbiA9IEluZmluaXR5O1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IG91dC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBjb25zdCBBID0gYnVmWyhpIDw8IDIpICsgM107XG4gICAgICBpZiAoQSA9PT0gMCkge1xuICAgICAgICBtYXggPSBvdXRbaV0gPSAweGZmO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBpeCA9IChvdXRbaV0gPSBidWZbaSA8PCAyXSk7XG4gICAgICBpZiAocGl4ID4gbWF4KSB7XG4gICAgICAgIG1heCA9IHBpeDtcbiAgICAgIH1cbiAgICAgIGlmIChwaXggPCBtaW4pIHtcbiAgICAgICAgbWluID0gcGl4O1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByYXRpbyA9IDI1NSAvIChtYXggLSBtaW4pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgaSsrKSB7XG4gICAgICBvdXRbaV0gPSAob3V0W2ldIC0gbWluKSAqIHJhdGlvO1xuICAgIH1cblxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBzdGF0aWMgI2d1ZXNzVGhyZXNob2xkKGhpc3RvZ3JhbSkge1xuICAgIC8vIFdlIHdhbnQgdG8gZmluZCB0aGUgdGhyZXNob2xkIHRoYXQgd2lsbCBzZXBhcmF0ZSB0aGUgYmFja2dyb3VuZCBmcm9tIHRoZVxuICAgIC8vIGZvcmVncm91bmQuXG4gICAgLy8gV2UgY291bGQgaGF2ZSB1c2VkIE90c3UncyBtZXRob2QsIGJ1dCB1bmZvcnR1bmF0ZWx5IGl0IGRvZXNuJ3Qgd29yayB3ZWxsXG4gICAgLy8gd2hlbiB0aGUgYmFja2dyb3VuZCBoYXMgdG9vIG11Y2ggc2hhZGUgb2YgZ3JleXMuXG4gICAgLy8gU28gdGhlIGlkZWEgaXMgdG8gZmluZCBhIG1heGltdW0gaW4gdGhlIGJsYWNrIHBhcnQgb2YgdGhlIGhpc3RvZ3JhbSBhbmRcbiAgICAvLyBmaWd1cmUgb3V0IHRoZSB2YWx1ZSB3aGljaCB3aWxsIGJlIHRoZSBmaXJzdCBvbmUgb2YgdGhlIHdoaXRlIHBhcnQuXG5cbiAgICBsZXQgaTtcbiAgICBsZXQgTSA9IC1JbmZpbml0eTtcbiAgICBsZXQgTCA9IC1JbmZpbml0eTtcbiAgICBjb25zdCBtaW4gPSBoaXN0b2dyYW0uZmluZEluZGV4KHYgPT4gdiAhPT0gMCk7XG4gICAgbGV0IHBvcyA9IG1pbjtcbiAgICBsZXQgc3BvcyA9IG1pbjtcbiAgICBmb3IgKGkgPSBtaW47IGkgPCAyNTY7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGhpc3RvZ3JhbVtpXTtcbiAgICAgIGlmICh2ID4gTSkge1xuICAgICAgICBpZiAoaSAtIHBvcyA+IEwpIHtcbiAgICAgICAgICBMID0gaSAtIHBvcztcbiAgICAgICAgICBzcG9zID0gaSAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgTSA9IHY7XG4gICAgICAgIHBvcyA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoaSA9IHNwb3MgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKGhpc3RvZ3JhbVtpXSA+IGhpc3RvZ3JhbVtpICsgMV0pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGk7XG4gIH1cblxuICBzdGF0aWMgI2dldEdyYXlQaXhlbHMoYml0bWFwKSB7XG4gICAgY29uc3Qgb3JpZ2luYWxCaXRtYXAgPSBiaXRtYXA7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBiaXRtYXA7XG4gICAgY29uc3QgeyBtYXhEaW0gfSA9IHRoaXMuI1BBUkFNRVRFUlM7XG4gICAgbGV0IG5ld1dpZHRoID0gd2lkdGg7XG4gICAgbGV0IG5ld0hlaWdodCA9IGhlaWdodDtcblxuICAgIGlmICh3aWR0aCA+IG1heERpbSB8fCBoZWlnaHQgPiBtYXhEaW0pIHtcbiAgICAgIGxldCBwcmV2V2lkdGggPSB3aWR0aDtcbiAgICAgIGxldCBwcmV2SGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICBsZXQgc3RlcHMgPSBNYXRoLmxvZzIoTWF0aC5tYXgod2lkdGgsIGhlaWdodCkgLyBtYXhEaW0pO1xuICAgICAgY29uc3QgaXN0ZXBzID0gTWF0aC5mbG9vcihzdGVwcyk7XG4gICAgICBzdGVwcyA9IHN0ZXBzID09PSBpc3RlcHMgPyBpc3RlcHMgLSAxIDogaXN0ZXBzO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwczsgaSsrKSB7XG4gICAgICAgIG5ld1dpZHRoID0gcHJldldpZHRoO1xuICAgICAgICBuZXdIZWlnaHQgPSBwcmV2SGVpZ2h0O1xuICAgICAgICBpZiAobmV3V2lkdGggPiBtYXhEaW0pIHtcbiAgICAgICAgICBuZXdXaWR0aCA9IE1hdGguY2VpbChuZXdXaWR0aCAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdIZWlnaHQgPiBtYXhEaW0pIHtcbiAgICAgICAgICBuZXdIZWlnaHQgPSBNYXRoLmNlaWwobmV3SGVpZ2h0IC8gMik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKG5ld1dpZHRoLCBuZXdIZWlnaHQpO1xuICAgICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBjdHguZHJhd0ltYWdlKFxuICAgICAgICAgIGJpdG1hcCxcbiAgICAgICAgICAwLFxuICAgICAgICAgIDAsXG4gICAgICAgICAgcHJldldpZHRoLFxuICAgICAgICAgIHByZXZIZWlnaHQsXG4gICAgICAgICAgMCxcbiAgICAgICAgICAwLFxuICAgICAgICAgIG5ld1dpZHRoLFxuICAgICAgICAgIG5ld0hlaWdodFxuICAgICAgICApO1xuICAgICAgICBwcmV2V2lkdGggPSBuZXdXaWR0aDtcbiAgICAgICAgcHJldkhlaWdodCA9IG5ld0hlaWdodDtcblxuICAgICAgICAvLyBSZWxlYXNlIHRoZSByZXNvdXJjZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBiaXRtYXAuXG4gICAgICAgIGlmIChiaXRtYXAgIT09IG9yaWdpbmFsQml0bWFwKSB7XG4gICAgICAgICAgYml0bWFwLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYml0bWFwID0gb2Zmc2NyZWVuLnRyYW5zZmVyVG9JbWFnZUJpdG1hcCgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByYXRpbyA9IE1hdGgubWluKG1heERpbSAvIG5ld1dpZHRoLCBtYXhEaW0gLyBuZXdIZWlnaHQpO1xuICAgICAgbmV3V2lkdGggPSBNYXRoLnJvdW5kKG5ld1dpZHRoICogcmF0aW8pO1xuICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5yb3VuZChuZXdIZWlnaHQgKiByYXRpbyk7XG4gICAgfVxuICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMobmV3V2lkdGgsIG5ld0hlaWdodCk7XG4gICAgY29uc3QgY3R4ID0gb2Zmc2NyZWVuLmdldENvbnRleHQoXCIyZFwiLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTtcbiAgICBjdHguZmlsdGVyID0gXCJncmF5c2NhbGUoMSlcIjtcbiAgICBjdHguZHJhd0ltYWdlKFxuICAgICAgYml0bWFwLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICBiaXRtYXAud2lkdGgsXG4gICAgICBiaXRtYXAuaGVpZ2h0LFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICBuZXdXaWR0aCxcbiAgICAgIG5ld0hlaWdodFxuICAgICk7XG4gICAgY29uc3QgZ3JheUltYWdlID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBuZXdXaWR0aCwgbmV3SGVpZ2h0KS5kYXRhO1xuICAgIGNvbnN0IHVpbnQ4QnVmID0gdGhpcy4jdG9VaW50OChncmF5SW1hZ2UpO1xuXG4gICAgcmV0dXJuIFt1aW50OEJ1ZiwgbmV3V2lkdGgsIG5ld0hlaWdodF07XG4gIH1cblxuICBzdGF0aWMgZXh0cmFjdENvbnRvdXJzRnJvbVRleHQoXG4gICAgdGV4dCxcbiAgICB7IGZvbnRGYW1pbHksIGZvbnRTdHlsZSwgZm9udFdlaWdodCB9LFxuICAgIHBhZ2VXaWR0aCxcbiAgICBwYWdlSGVpZ2h0LFxuICAgIHJvdGF0aW9uLFxuICAgIGlubmVyTWFyZ2luXG4gICkge1xuICAgIGxldCBjYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKDEsIDEpO1xuICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgYWxwaGE6IGZhbHNlIH0pO1xuICAgIGNvbnN0IGZvbnRTaXplID0gMjAwO1xuICAgIGNvbnN0IGZvbnQgPVxuICAgICAgKGN0eC5mb250ID0gYCR7Zm9udFN0eWxlfSAke2ZvbnRXZWlnaHR9ICR7Zm9udFNpemV9cHggJHtmb250RmFtaWx5fWApO1xuICAgIGNvbnN0IHtcbiAgICAgIGFjdHVhbEJvdW5kaW5nQm94TGVmdCxcbiAgICAgIGFjdHVhbEJvdW5kaW5nQm94UmlnaHQsXG4gICAgICBhY3R1YWxCb3VuZGluZ0JveEFzY2VudCxcbiAgICAgIGFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCxcbiAgICAgIGZvbnRCb3VuZGluZ0JveEFzY2VudCxcbiAgICAgIGZvbnRCb3VuZGluZ0JveERlc2NlbnQsXG4gICAgICB3aWR0aCxcbiAgICB9ID0gY3R4Lm1lYXN1cmVUZXh0KHRleHQpO1xuXG4gICAgLy8gV2UgcmVzY2FsZSB0aGUgY2FudmFzIHRvIG1ha2UgXCJzdXJlXCIgdGhlIHRleHQgZml0cy5cbiAgICBjb25zdCBTQ0FMRSA9IDEuNTtcbiAgICBjb25zdCBjYW52YXNXaWR0aCA9IE1hdGguY2VpbChcbiAgICAgIE1hdGgubWF4KFxuICAgICAgICBNYXRoLmFicyhhY3R1YWxCb3VuZGluZ0JveExlZnQpICsgTWF0aC5hYnMoYWN0dWFsQm91bmRpbmdCb3hSaWdodCkgfHwgMCxcbiAgICAgICAgd2lkdGhcbiAgICAgICkgKiBTQ0FMRVxuICAgICk7XG4gICAgY29uc3QgY2FudmFzSGVpZ2h0ID0gTWF0aC5jZWlsKFxuICAgICAgTWF0aC5tYXgoXG4gICAgICAgIE1hdGguYWJzKGFjdHVhbEJvdW5kaW5nQm94QXNjZW50KSArXG4gICAgICAgICAgTWF0aC5hYnMoYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50KSB8fCBmb250U2l6ZSxcbiAgICAgICAgTWF0aC5hYnMoZm9udEJvdW5kaW5nQm94QXNjZW50KSArIE1hdGguYWJzKGZvbnRCb3VuZGluZ0JveERlc2NlbnQpIHx8XG4gICAgICAgICAgZm9udFNpemVcbiAgICAgICkgKiBTQ0FMRVxuICAgICk7XG4gICAgY2FudmFzID0gbmV3IE9mZnNjcmVlbkNhbnZhcyhjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTtcbiAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgYWxwaGE6IHRydWUsIHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTtcbiAgICBjdHguZm9udCA9IGZvbnQ7XG4gICAgY3R4LmZpbHRlciA9IFwiZ3JheXNjYWxlKDEpXCI7XG4gICAgY3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcbiAgICBjdHguZmlsbFRleHQoXG4gICAgICB0ZXh0LFxuICAgICAgKGNhbnZhc1dpZHRoICogKFNDQUxFIC0gMSkpIC8gMixcbiAgICAgIChjYW52YXNIZWlnaHQgKiAoMyAtIFNDQUxFKSkgLyAyXG4gICAgKTtcblxuICAgIGNvbnN0IHVpbnQ4QnVmID0gdGhpcy4jdG9VaW50OChcbiAgICAgIGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCkuZGF0YVxuICAgICk7XG4gICAgY29uc3QgaGlzdG9ncmFtID0gdGhpcy4jZ2V0SGlzdG9ncmFtKHVpbnQ4QnVmKTtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSB0aGlzLiNndWVzc1RocmVzaG9sZChoaXN0b2dyYW0pO1xuXG4gICAgY29uc3QgY29udG91ckxpc3QgPSB0aGlzLiNmaW5kQ29udG91cnMoXG4gICAgICB1aW50OEJ1ZixcbiAgICAgIGNhbnZhc1dpZHRoLFxuICAgICAgY2FudmFzSGVpZ2h0LFxuICAgICAgdGhyZXNob2xkXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzLnByb2Nlc3NEcmF3bkxpbmVzKHtcbiAgICAgIGxpbmVzOiB7IGN1cnZlczogY29udG91ckxpc3QsIHdpZHRoOiBjYW52YXNXaWR0aCwgaGVpZ2h0OiBjYW52YXNIZWlnaHQgfSxcbiAgICAgIHBhZ2VXaWR0aCxcbiAgICAgIHBhZ2VIZWlnaHQsXG4gICAgICByb3RhdGlvbixcbiAgICAgIGlubmVyTWFyZ2luLFxuICAgICAgbXVzdFNtb290aDogdHJ1ZSxcbiAgICAgIGFyZUNvbnRvdXJzOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIHByb2Nlc3MoYml0bWFwLCBwYWdlV2lkdGgsIHBhZ2VIZWlnaHQsIHJvdGF0aW9uLCBpbm5lck1hcmdpbikge1xuICAgIGNvbnN0IFt1aW50OEJ1Ziwgd2lkdGgsIGhlaWdodF0gPSB0aGlzLiNnZXRHcmF5UGl4ZWxzKGJpdG1hcCk7XG4gICAgY29uc3QgW2J1ZmZlciwgaGlzdG9ncmFtXSA9IHRoaXMuI2JpbGF0ZXJhbEZpbHRlcihcbiAgICAgIHVpbnQ4QnVmLFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBNYXRoLmh5cG90KHdpZHRoLCBoZWlnaHQpICogdGhpcy4jUEFSQU1FVEVSUy5zaWdtYVNGYWN0b3IsXG4gICAgICB0aGlzLiNQQVJBTUVURVJTLnNpZ21hUixcbiAgICAgIHRoaXMuI1BBUkFNRVRFUlMua2VybmVsU2l6ZVxuICAgICk7XG5cbiAgICBjb25zdCB0aHJlc2hvbGQgPSB0aGlzLiNndWVzc1RocmVzaG9sZChoaXN0b2dyYW0pO1xuICAgIGNvbnN0IGNvbnRvdXJMaXN0ID0gdGhpcy4jZmluZENvbnRvdXJzKGJ1ZmZlciwgd2lkdGgsIGhlaWdodCwgdGhyZXNob2xkKTtcblxuICAgIHJldHVybiB0aGlzLnByb2Nlc3NEcmF3bkxpbmVzKHtcbiAgICAgIGxpbmVzOiB7IGN1cnZlczogY29udG91ckxpc3QsIHdpZHRoLCBoZWlnaHQgfSxcbiAgICAgIHBhZ2VXaWR0aCxcbiAgICAgIHBhZ2VIZWlnaHQsXG4gICAgICByb3RhdGlvbixcbiAgICAgIGlubmVyTWFyZ2luLFxuICAgICAgbXVzdFNtb290aDogdHJ1ZSxcbiAgICAgIGFyZUNvbnRvdXJzOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIHByb2Nlc3NEcmF3bkxpbmVzKHtcbiAgICBsaW5lcyxcbiAgICBwYWdlV2lkdGgsXG4gICAgcGFnZUhlaWdodCxcbiAgICByb3RhdGlvbixcbiAgICBpbm5lck1hcmdpbixcbiAgICBtdXN0U21vb3RoLFxuICAgIGFyZUNvbnRvdXJzLFxuICB9KSB7XG4gICAgaWYgKHJvdGF0aW9uICUgMTgwICE9PSAwKSB7XG4gICAgICBbcGFnZVdpZHRoLCBwYWdlSGVpZ2h0XSA9IFtwYWdlSGVpZ2h0LCBwYWdlV2lkdGhdO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY3VydmVzLCB3aWR0aCwgaGVpZ2h0IH0gPSBsaW5lcztcbiAgICBjb25zdCB0aGlja25lc3MgPSBsaW5lcy50aGlja25lc3MgPz8gMDtcbiAgICBjb25zdCBsaW5lc0FuZFBvaW50cyA9IFtdO1xuICAgIGNvbnN0IHJhdGlvID0gTWF0aC5taW4ocGFnZVdpZHRoIC8gd2lkdGgsIHBhZ2VIZWlnaHQgLyBoZWlnaHQpO1xuICAgIGNvbnN0IHhTY2FsZSA9IHJhdGlvIC8gcGFnZVdpZHRoO1xuICAgIGNvbnN0IHlTY2FsZSA9IHJhdGlvIC8gcGFnZUhlaWdodDtcbiAgICBjb25zdCBuZXdDdXJ2ZXMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgeyBwb2ludHMgfSBvZiBjdXJ2ZXMpIHtcbiAgICAgIGNvbnN0IHJlZHVjZWRQb2ludHMgPSBtdXN0U21vb3RoID8gdGhpcy4jZG91Z2xhc1BldWNrZXIocG9pbnRzKSA6IHBvaW50cztcbiAgICAgIGlmICghcmVkdWNlZFBvaW50cykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIG5ld0N1cnZlcy5wdXNoKHJlZHVjZWRQb2ludHMpO1xuXG4gICAgICBjb25zdCBsZW4gPSByZWR1Y2VkUG9pbnRzLmxlbmd0aDtcbiAgICAgIGNvbnN0IG5ld1BvaW50cyA9IG5ldyBGbG9hdDMyQXJyYXkobGVuKTtcbiAgICAgIGNvbnN0IGxpbmUgPSBuZXcgRmxvYXQzMkFycmF5KDMgKiAobGVuID09PSAyID8gMiA6IGxlbiAtIDIpKTtcbiAgICAgIGxpbmVzQW5kUG9pbnRzLnB1c2goeyBsaW5lLCBwb2ludHM6IG5ld1BvaW50cyB9KTtcblxuICAgICAgaWYgKGxlbiA9PT0gMikge1xuICAgICAgICBuZXdQb2ludHNbMF0gPSByZWR1Y2VkUG9pbnRzWzBdICogeFNjYWxlO1xuICAgICAgICBuZXdQb2ludHNbMV0gPSByZWR1Y2VkUG9pbnRzWzFdICogeVNjYWxlO1xuICAgICAgICBsaW5lLnNldChbTmFOLCBOYU4sIE5hTiwgTmFOLCBuZXdQb2ludHNbMF0sIG5ld1BvaW50c1sxXV0sIDApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IFt4MSwgeTEsIHgyLCB5Ml0gPSByZWR1Y2VkUG9pbnRzO1xuICAgICAgeDEgKj0geFNjYWxlO1xuICAgICAgeTEgKj0geVNjYWxlO1xuICAgICAgeDIgKj0geFNjYWxlO1xuICAgICAgeTIgKj0geVNjYWxlO1xuICAgICAgbmV3UG9pbnRzLnNldChbeDEsIHkxLCB4MiwgeTJdLCAwKTtcblxuICAgICAgbGluZS5zZXQoW05hTiwgTmFOLCBOYU4sIE5hTiwgeDEsIHkxXSwgMCk7XG4gICAgICBmb3IgKGxldCBpID0gNDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgICAgIGNvbnN0IHggPSAobmV3UG9pbnRzW2ldID0gcmVkdWNlZFBvaW50c1tpXSAqIHhTY2FsZSk7XG4gICAgICAgIGNvbnN0IHkgPSAobmV3UG9pbnRzW2kgKyAxXSA9IHJlZHVjZWRQb2ludHNbaSArIDFdICogeVNjYWxlKTtcbiAgICAgICAgbGluZS5zZXQoT3V0bGluZS5jcmVhdGVCZXppZXJQb2ludHMoeDEsIHkxLCB4MiwgeTIsIHgsIHkpLCAoaSAtIDIpICogMyk7XG4gICAgICAgIFt4MSwgeTEsIHgyLCB5Ml0gPSBbeDIsIHkyLCB4LCB5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobGluZXNBbmRQb2ludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBvdXRsaW5lID0gYXJlQ29udG91cnNcbiAgICAgID8gbmV3IENvbnRvdXJEcmF3T3V0bGluZSgpXG4gICAgICA6IG5ldyBJbmtEcmF3T3V0bGluZSgpO1xuXG4gICAgb3V0bGluZS5idWlsZChcbiAgICAgIGxpbmVzQW5kUG9pbnRzLFxuICAgICAgcGFnZVdpZHRoLFxuICAgICAgcGFnZUhlaWdodCxcbiAgICAgIDEsXG4gICAgICByb3RhdGlvbixcbiAgICAgIGFyZUNvbnRvdXJzID8gMCA6IHRoaWNrbmVzcyxcbiAgICAgIGlubmVyTWFyZ2luXG4gICAgKTtcblxuICAgIHJldHVybiB7IG91dGxpbmUsIG5ld0N1cnZlcywgYXJlQ29udG91cnMsIHRoaWNrbmVzcywgd2lkdGgsIGhlaWdodCB9O1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNvbXByZXNzU2lnbmF0dXJlKHtcbiAgICBvdXRsaW5lcyxcbiAgICBhcmVDb250b3VycyxcbiAgICB0aGlja25lc3MsXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICB9KSB7XG4gICAgLy8gV2UgY3JlYXRlIGEgc2luZ2xlIGFycmF5IGNvbnRhaW5pbmcgYWxsIHRoZSBvdXRsaW5lcy5cbiAgICAvLyBUaGUgZm9ybWF0IGlzIHRoZSBmb2xsb3dpbmc6XG4gICAgLy8gLSA0IGJ5dGVzOiBkYXRhIGxlbmd0aC5cbiAgICAvLyAtIDQgYnl0ZXM6IHZlcnNpb24uXG4gICAgLy8gLSA0IGJ5dGVzOiB3aWR0aC5cbiAgICAvLyAtIDQgYnl0ZXM6IGhlaWdodC5cbiAgICAvLyAtIDQgYnl0ZXM6IDAgaWYgaXQncyBhIGNvbnRvdXIsIDEgaWYgaXQncyBhbiBpbmsuXG4gICAgLy8gLSA0IGJ5dGVzOiB0aGlja25lc3MuXG4gICAgLy8gLSA0IGJ5dGVzOiBudW1iZXIgb2YgZHJhd2luZ3MuXG4gICAgLy8gLSA0IGJ5dGVzOiBzaXplIG9mIHRoZSBidWZmZXIgY29udGFpbmluZyB0aGUgZGlmZiBvZiB0aGUgY29vcmRpbmF0ZXMuXG4gICAgLy8gLSA0IGJ5dGVzOiBudW1iZXIgb2YgcG9pbnRzIGluIHRoZSBmaXJzdCBkcmF3aW5nLlxuICAgIC8vIC0gNCBieXRlczogeCBjb29yZGluYXRlIG9mIHRoZSBmaXJzdCBwb2ludC5cbiAgICAvLyAtIDQgYnl0ZXM6IHkgY29vcmRpbmF0ZSBvZiB0aGUgZmlyc3QgcG9pbnQuXG4gICAgLy8gLSA0IGJ5dGVzOiBudW1iZXIgb2YgcG9pbnRzIGluIHRoZSBzZWNvbmQgZHJhd2luZy5cbiAgICAvLyAtIDQgYnl0ZXM6IHggY29vcmRpbmF0ZSBvZiB0aGUgZmlyc3QgcG9pbnQuXG4gICAgLy8gLSA0IGJ5dGVzOiB5IGNvb3JkaW5hdGUgb2YgdGhlIGZpcnN0IHBvaW50LlxuICAgIC8vIC0gLi4uXG4gICAgLy8gLSBUaGUgYnVmZmVyIGNvbnRhaW5pbmcgdGhlIGRpZmYgb2YgdGhlIGNvb3JkaW5hdGVzLlxuXG4gICAgLy8gVGhlIGNvb3JkaW5hdGVzIGFyZSBzdXBwb3NlZCB0byBiZSBwb3NpdGl2ZSBpbnRlZ2Vycy5cblxuICAgIC8vIFdlIGFsc28gY29tcHV0ZSB0aGUgbWluIGFuZCBtYXggZGlmZmVyZW5jZSBiZXR3ZWVuIHR3byBwb2ludHMuXG4gICAgLy8gVGhpcyB3aWxsIGhlbHAgdXMgdG8gZGV0ZXJtaW5lIHRoZSB0eXBlIG9mIHRoZSBidWZmZXIgKEludDgsIEludDE2IG9yXG4gICAgLy8gSW50MzIpIGluIG9yZGVyIHRvIG1pbmltaXplIHRoZSBhbW91bnQgb2YgZGF0YSB3ZSBoYXZlLlxuICAgIGxldCBtaW5EaWZmID0gSW5maW5pdHk7XG4gICAgbGV0IG1heERpZmYgPSAtSW5maW5pdHk7XG4gICAgbGV0IG91dGxpbmVzTGVuZ3RoID0gMDtcbiAgICBmb3IgKGNvbnN0IHBvaW50cyBvZiBvdXRsaW5lcykge1xuICAgICAgb3V0bGluZXNMZW5ndGggKz0gcG9pbnRzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAyLCBpaSA9IHBvaW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGR4ID0gcG9pbnRzW2ldIC0gcG9pbnRzW2kgLSAyXTtcbiAgICAgICAgbWluRGlmZiA9IE1hdGgubWluKG1pbkRpZmYsIGR4KTtcbiAgICAgICAgbWF4RGlmZiA9IE1hdGgubWF4KG1heERpZmYsIGR4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgYnVmZmVyVHlwZTtcbiAgICBpZiAobWluRGlmZiA+PSAtMTI4ICYmIG1heERpZmYgPD0gMTI3KSB7XG4gICAgICBidWZmZXJUeXBlID0gSW50OEFycmF5O1xuICAgIH0gZWxzZSBpZiAobWluRGlmZiA+PSAtMzI3NjggJiYgbWF4RGlmZiA8PSAzMjc2Nykge1xuICAgICAgYnVmZmVyVHlwZSA9IEludDE2QXJyYXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1ZmZlclR5cGUgPSBJbnQzMkFycmF5O1xuICAgIH1cblxuICAgIGNvbnN0IGxlbiA9IG91dGxpbmVzLmxlbmd0aDtcbiAgICBjb25zdCBoZWFkZXJMZW5ndGggPSBCQVNFX0hFQURFUl9MRU5HVEggKyBQT0lOVFNfUFJPUEVSVElFU19OVU1CRVIgKiBsZW47XG4gICAgY29uc3QgaGVhZGVyID0gbmV3IFVpbnQzMkFycmF5KGhlYWRlckxlbmd0aCk7XG5cbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBoZWFkZXJbb2Zmc2V0KytdID1cbiAgICAgIGhlYWRlckxlbmd0aCAqIFVpbnQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UICtcbiAgICAgIChvdXRsaW5lc0xlbmd0aCAtIDIgKiBsZW4pICogYnVmZmVyVHlwZS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICBoZWFkZXJbb2Zmc2V0KytdID0gMDsgLy8gVmVyc2lvbi5cbiAgICBoZWFkZXJbb2Zmc2V0KytdID0gd2lkdGg7XG4gICAgaGVhZGVyW29mZnNldCsrXSA9IGhlaWdodDtcbiAgICBoZWFkZXJbb2Zmc2V0KytdID0gYXJlQ29udG91cnMgPyAwIDogMTtcbiAgICBoZWFkZXJbb2Zmc2V0KytdID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcih0aGlja25lc3MgPz8gMCkpO1xuICAgIGhlYWRlcltvZmZzZXQrK10gPSBsZW47XG4gICAgaGVhZGVyW29mZnNldCsrXSA9IGJ1ZmZlclR5cGUuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgZm9yIChjb25zdCBwb2ludHMgb2Ygb3V0bGluZXMpIHtcbiAgICAgIGhlYWRlcltvZmZzZXQrK10gPSBwb2ludHMubGVuZ3RoIC0gMjtcbiAgICAgIGhlYWRlcltvZmZzZXQrK10gPSBwb2ludHNbMF07XG4gICAgICBoZWFkZXJbb2Zmc2V0KytdID0gcG9pbnRzWzFdO1xuICAgIH1cblxuICAgIGNvbnN0IGNzID0gbmV3IENvbXByZXNzaW9uU3RyZWFtKFwiZGVmbGF0ZS1yYXdcIik7XG4gICAgY29uc3Qgd3JpdGVyID0gY3Mud3JpdGFibGUuZ2V0V3JpdGVyKCk7XG4gICAgYXdhaXQgd3JpdGVyLnJlYWR5O1xuXG4gICAgd3JpdGVyLndyaXRlKGhlYWRlcik7XG4gICAgY29uc3QgQnVmZmVyQ3RvciA9IGJ1ZmZlclR5cGUucHJvdG90eXBlLmNvbnN0cnVjdG9yO1xuICAgIGZvciAoY29uc3QgcG9pbnRzIG9mIG91dGxpbmVzKSB7XG4gICAgICBjb25zdCBkaWZmcyA9IG5ldyBCdWZmZXJDdG9yKHBvaW50cy5sZW5ndGggLSAyKTtcbiAgICAgIGZvciAobGV0IGkgPSAyLCBpaSA9IHBvaW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGRpZmZzW2kgLSAyXSA9IHBvaW50c1tpXSAtIHBvaW50c1tpIC0gMl07XG4gICAgICB9XG4gICAgICB3cml0ZXIud3JpdGUoZGlmZnMpO1xuICAgIH1cblxuICAgIHdyaXRlci5jbG9zZSgpO1xuXG4gICAgY29uc3QgYnVmID0gYXdhaXQgbmV3IFJlc3BvbnNlKGNzLnJlYWRhYmxlKS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcblxuICAgIHJldHVybiB0b0Jhc2U2NFV0aWwoYnl0ZXMpO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlY29tcHJlc3NTaWduYXR1cmUoc2lnbmF0dXJlRGF0YSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBieXRlcyA9IGZyb21CYXNlNjRVdGlsKHNpZ25hdHVyZURhdGEpO1xuICAgICAgY29uc3QgeyByZWFkYWJsZSwgd3JpdGFibGUgfSA9IG5ldyBEZWNvbXByZXNzaW9uU3RyZWFtKFwiZGVmbGF0ZS1yYXdcIik7XG4gICAgICBjb25zdCB3cml0ZXIgPSB3cml0YWJsZS5nZXRXcml0ZXIoKTtcbiAgICAgIGF3YWl0IHdyaXRlci5yZWFkeTtcblxuICAgICAgLy8gV2UgY2FuJ3QgYXdhaXQgd3JpdGVyLndyaXRlKCkgYmVjYXVzZSBpdCdsbCBibG9jayB1bnRpbCB0aGUgcmVhZGVyXG4gICAgICAvLyBzdGFydHMgd2hpY2ggaGFwcGVucyBmZXcgbGluZXMgYmVsb3cuXG4gICAgICB3cml0ZXJcbiAgICAgICAgLndyaXRlKGJ5dGVzKVxuICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgd3JpdGVyLnJlYWR5O1xuICAgICAgICAgIGF3YWl0IHdyaXRlci5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4ge30pO1xuXG4gICAgICBsZXQgZGF0YSA9IG51bGw7XG4gICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZGFibGUpIHtcbiAgICAgICAgZGF0YSB8fD0gbmV3IFVpbnQ4QXJyYXkobmV3IFVpbnQzMkFycmF5KGNodW5rLmJ1ZmZlciwgMCwgNClbMF0pO1xuICAgICAgICBkYXRhLnNldChjaHVuaywgb2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ICs9IGNodW5rLmxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgdGFrZSBhIGJpdCB0b28gbXVjaCBkYXRhIGZvciB0aGUgaGVhZGVyIGJ1dCBpdCdzIGZpbmUuXG4gICAgICBjb25zdCBoZWFkZXIgPSBuZXcgVWludDMyQXJyYXkoZGF0YS5idWZmZXIsIDAsIGRhdGEubGVuZ3RoID4+IDIpO1xuICAgICAgY29uc3QgdmVyc2lvbiA9IGhlYWRlclsxXTtcbiAgICAgIGlmICh2ZXJzaW9uICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB2ZXJzaW9uOiAke3ZlcnNpb259YCk7XG4gICAgICB9XG4gICAgICBjb25zdCB3aWR0aCA9IGhlYWRlclsyXTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGhlYWRlclszXTtcbiAgICAgIGNvbnN0IGFyZUNvbnRvdXJzID0gaGVhZGVyWzRdID09PSAwO1xuICAgICAgY29uc3QgdGhpY2tuZXNzID0gaGVhZGVyWzVdO1xuICAgICAgY29uc3QgbnVtYmVyT2ZEcmF3aW5ncyA9IGhlYWRlcls2XTtcbiAgICAgIGNvbnN0IGJ1ZmZlclR5cGUgPSBoZWFkZXJbN107XG4gICAgICBjb25zdCBvdXRsaW5lcyA9IFtdO1xuICAgICAgY29uc3QgZGlmZnNPZmZzZXQgPVxuICAgICAgICAoQkFTRV9IRUFERVJfTEVOR1RIICsgUE9JTlRTX1BST1BFUlRJRVNfTlVNQkVSICogbnVtYmVyT2ZEcmF3aW5ncykgKlxuICAgICAgICBVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICAgIGxldCBkaWZmcztcblxuICAgICAgc3dpdGNoIChidWZmZXJUeXBlKSB7XG4gICAgICAgIGNhc2UgSW50OEFycmF5LkJZVEVTX1BFUl9FTEVNRU5UOlxuICAgICAgICAgIGRpZmZzID0gbmV3IEludDhBcnJheShkYXRhLmJ1ZmZlciwgZGlmZnNPZmZzZXQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEludDE2QXJyYXkuQllURVNfUEVSX0VMRU1FTlQ6XG4gICAgICAgICAgZGlmZnMgPSBuZXcgSW50MTZBcnJheShkYXRhLmJ1ZmZlciwgZGlmZnNPZmZzZXQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ6XG4gICAgICAgICAgZGlmZnMgPSBuZXcgSW50MzJBcnJheShkYXRhLmJ1ZmZlciwgZGlmZnNPZmZzZXQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBvZmZzZXQgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkRyYXdpbmdzOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGVuID0gaGVhZGVyW1BPSU5UU19QUk9QRVJUSUVTX05VTUJFUiAqIGkgKyBCQVNFX0hFQURFUl9MRU5HVEhdO1xuICAgICAgICBjb25zdCBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KGxlbiArIDIpO1xuICAgICAgICBvdXRsaW5lcy5wdXNoKHBvaW50cyk7XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBQT0lOVFNfUFJPUEVSVElFU19OVU1CRVIgLSAxOyBqKyspIHtcbiAgICAgICAgICBwb2ludHNbal0gPVxuICAgICAgICAgICAgaGVhZGVyW1BPSU5UU19QUk9QRVJUSUVTX05VTUJFUiAqIGkgKyBCQVNFX0hFQURFUl9MRU5HVEggKyBqICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIHBvaW50c1tqICsgMl0gPSBwb2ludHNbal0gKyBkaWZmc1tvZmZzZXQrK107XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXJlQ29udG91cnMsXG4gICAgICAgIHRoaWNrbmVzcyxcbiAgICAgICAgb3V0bGluZXMsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHdhcm4oYGRlY29tcHJlc3NTaWduYXR1cmU6ICR7ZX1gKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBTaWduYXR1cmVFeHRyYWN0b3IgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyNSBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQW5ub3RhdGlvbkVkaXRvclR5cGUsIHNoYWRvdyB9IGZyb20gXCIuLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgRHJhd2luZ0VkaXRvciwgRHJhd2luZ09wdGlvbnMgfSBmcm9tIFwiLi9kcmF3LmpzXCI7XG5pbXBvcnQgeyBBbm5vdGF0aW9uRWRpdG9yIH0gZnJvbSBcIi4vZWRpdG9yLmpzXCI7XG5pbXBvcnQgeyBDb250b3VyRHJhd091dGxpbmUgfSBmcm9tIFwiLi9kcmF3ZXJzL2NvbnRvdXIuanNcIjtcbmltcG9ydCB7IElua0RyYXdpbmdPcHRpb25zIH0gZnJvbSBcIi4vaW5rLmpzXCI7XG5pbXBvcnQgeyBJbmtEcmF3T3V0bGluZSB9IGZyb20gXCIuL2RyYXdlcnMvaW5rZHJhdy5qc1wiO1xuaW1wb3J0IHsgU2lnbmF0dXJlRXh0cmFjdG9yIH0gZnJvbSBcIi4vZHJhd2Vycy9zaWduYXR1cmVkcmF3LmpzXCI7XG5cbmNsYXNzIFNpZ25hdHVyZU9wdGlvbnMgZXh0ZW5kcyBEcmF3aW5nT3B0aW9ucyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBzdXBlci51cGRhdGVQcm9wZXJ0aWVzKHtcbiAgICAgIGZpbGw6IFwiQ2FudmFzVGV4dFwiLFxuICAgICAgXCJzdHJva2Utd2lkdGhcIjogMCxcbiAgICB9KTtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIGNvbnN0IGNsb25lID0gbmV3IFNpZ25hdHVyZU9wdGlvbnMoKTtcbiAgICBjbG9uZS51cGRhdGVBbGwodGhpcyk7XG4gICAgcmV0dXJuIGNsb25lO1xuICB9XG59XG5cbmNsYXNzIERyYXduU2lnbmF0dXJlT3B0aW9ucyBleHRlbmRzIElua0RyYXdpbmdPcHRpb25zIHtcbiAgY29uc3RydWN0b3Iodmlld2VyUGFyYW1ldGVycykge1xuICAgIHN1cGVyKHZpZXdlclBhcmFtZXRlcnMpO1xuXG4gICAgc3VwZXIudXBkYXRlUHJvcGVydGllcyh7XG4gICAgICBzdHJva2U6IFwiQ2FudmFzVGV4dFwiLFxuICAgICAgXCJzdHJva2Utd2lkdGhcIjogMSxcbiAgICB9KTtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIGNvbnN0IGNsb25lID0gbmV3IERyYXduU2lnbmF0dXJlT3B0aW9ucyh0aGlzLl92aWV3UGFyYW1ldGVycyk7XG4gICAgY2xvbmUudXBkYXRlQWxsKHRoaXMpO1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxufVxuXG4vKipcbiAqIEJhc2ljIGVkaXRvciBpbiBvcmRlciB0byBnZW5lcmF0ZSBhbiBTdGFtcCBhbm5vdGF0aW9uIGFubm90YXRpb24gY29udGFpbmluZ1xuICogYSBzaWduYXR1cmUgZHJhd2luZy5cbiAqL1xuY2xhc3MgU2lnbmF0dXJlRWRpdG9yIGV4dGVuZHMgRHJhd2luZ0VkaXRvciB7XG4gICNpc0V4dHJhY3RlZCA9IGZhbHNlO1xuXG4gICNkZXNjcmlwdGlvbiA9IG51bGw7XG5cbiAgI3NpZ25hdHVyZURhdGEgPSBudWxsO1xuXG4gICNzaWduYXR1cmVVVUlEID0gbnVsbDtcblxuICBzdGF0aWMgX3R5cGUgPSBcInNpZ25hdHVyZVwiO1xuXG4gIHN0YXRpYyBfZWRpdG9yVHlwZSA9IEFubm90YXRpb25FZGl0b3JUeXBlLlNJR05BVFVSRTtcblxuICBzdGF0aWMgX2RlZmF1bHREcmF3aW5nT3B0aW9ucyA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgc3VwZXIoeyAuLi5wYXJhbXMsIG11c3RCZUNvbW1pdHRlZDogdHJ1ZSwgbmFtZTogXCJzaWduYXR1cmVFZGl0b3JcIiB9KTtcbiAgICB0aGlzLl93aWxsS2VlcEFzcGVjdFJhdGlvID0gdHJ1ZTtcbiAgICB0aGlzLiNzaWduYXR1cmVEYXRhID0gcGFyYW1zLnNpZ25hdHVyZURhdGEgfHwgbnVsbDtcbiAgICB0aGlzLiNkZXNjcmlwdGlvbiA9IG51bGw7XG4gICAgdGhpcy5kZWZhdWx0TDEwbklkID0gXCJwZGZqcy1lZGl0b3Itc2lnbmF0dXJlLWVkaXRvcjFcIjtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdGF0aWMgaW5pdGlhbGl6ZShsMTBuLCB1aU1hbmFnZXIpIHtcbiAgICBBbm5vdGF0aW9uRWRpdG9yLmluaXRpYWxpemUobDEwbiwgdWlNYW5hZ2VyKTtcblxuICAgIHRoaXMuX2RlZmF1bHREcmF3aW5nT3B0aW9ucyA9IG5ldyBTaWduYXR1cmVPcHRpb25zKCk7XG4gICAgdGhpcy5fZGVmYXVsdERyYXduU2lnbmF0dXJlT3B0aW9ucyA9IG5ldyBEcmF3blNpZ25hdHVyZU9wdGlvbnMoXG4gICAgICB1aU1hbmFnZXIudmlld1BhcmFtZXRlcnNcbiAgICApO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBnZXREZWZhdWx0RHJhd2luZ09wdGlvbnMob3B0aW9ucykge1xuICAgIGNvbnN0IGNsb25lID0gdGhpcy5fZGVmYXVsdERyYXdpbmdPcHRpb25zLmNsb25lKCk7XG4gICAgY2xvbmUudXBkYXRlUHJvcGVydGllcyhvcHRpb25zKTtcbiAgICByZXR1cm4gY2xvbmU7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3RhdGljIGdldCBzdXBwb3J0TXVsdGlwbGVEcmF3aW5ncygpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGVzTWFwKCkge1xuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJ0eXBlc01hcFwiLCBuZXcgTWFwKCkpO1xuICB9XG5cbiAgc3RhdGljIGdldCBpc0RyYXdlcigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IHRlbGVtZXRyeUZpbmFsRGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJzaWduYXR1cmVcIixcbiAgICAgIGhhc0Rlc2NyaXB0aW9uOiAhIXRoaXMuI2Rlc2NyaXB0aW9uLFxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgY29tcHV0ZVRlbGVtZXRyeUZpbmFsRGF0YShkYXRhKSB7XG4gICAgY29uc3QgaGFzRGVzY3JpcHRpb25TdGF0cyA9IGRhdGEuZ2V0KFwiaGFzRGVzY3JpcHRpb25cIik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc0FsdFRleHQ6IGhhc0Rlc2NyaXB0aW9uU3RhdHMuZ2V0KHRydWUpID8/IDAsXG4gICAgICBoYXNOb0FsdFRleHQ6IGhhc0Rlc2NyaXB0aW9uU3RhdHMuZ2V0KGZhbHNlKSA/PyAwLFxuICAgIH07XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IGlzUmVzaXphYmxlKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uU2NhbGVDaGFuZ2luZygpIHtcbiAgICBpZiAodGhpcy5fZHJhd0lkID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN1cGVyLm9uU2NhbGVDaGFuZ2luZygpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5kaXYpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpdjtcbiAgICB9XG5cbiAgICBsZXQgYmFzZVgsIGJhc2VZO1xuICAgIGNvbnN0IHsgX2lzQ29weSB9ID0gdGhpcztcbiAgICBpZiAoX2lzQ29weSkge1xuICAgICAgLy8gTm8gbmVlZCB0byBhZGp1c3QgdGhlIHBvc2l0aW9uIHdoZW4gcmVuZGVyaW5nIGluIERyYXdpbmdFZGl0b3IuXG4gICAgICB0aGlzLl9pc0NvcHkgPSBmYWxzZTtcbiAgICAgIGJhc2VYID0gdGhpcy54O1xuICAgICAgYmFzZVkgPSB0aGlzLnk7XG4gICAgfVxuXG4gICAgc3VwZXIucmVuZGVyKCk7XG5cbiAgICBpZiAodGhpcy5fZHJhd0lkID09PSBudWxsKSB7XG4gICAgICBpZiAodGhpcy4jc2lnbmF0dXJlRGF0YSkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgbGluZXMsXG4gICAgICAgICAgbXVzdFNtb290aCxcbiAgICAgICAgICBhcmVDb250b3VycyxcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICB1dWlkLFxuICAgICAgICAgIGhlaWdodEluUGFnZSxcbiAgICAgICAgfSA9IHRoaXMuI3NpZ25hdHVyZURhdGE7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICByYXdEaW1zOiB7IHBhZ2VXaWR0aCwgcGFnZUhlaWdodCB9LFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICB9ID0gdGhpcy5wYXJlbnQudmlld3BvcnQ7XG4gICAgICAgIGNvbnN0IG91dGxpbmUgPSBTaWduYXR1cmVFeHRyYWN0b3IucHJvY2Vzc0RyYXduTGluZXMoe1xuICAgICAgICAgIGxpbmVzLFxuICAgICAgICAgIHBhZ2VXaWR0aCxcbiAgICAgICAgICBwYWdlSGVpZ2h0LFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIGlubmVyTWFyZ2luOiBTaWduYXR1cmVFZGl0b3IuX0lOTkVSX01BUkdJTixcbiAgICAgICAgICBtdXN0U21vb3RoLFxuICAgICAgICAgIGFyZUNvbnRvdXJzLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRTaWduYXR1cmUob3V0bGluZSwgaGVpZ2h0SW5QYWdlLCBkZXNjcmlwdGlvbiwgdXVpZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBdm9pZCBGaXJlZm94IGNyYXNoaW5nICh3aXRoIGEgbG9jYWwgYnVpbGQpIGJlY2F1c2UgdGhlIGRlc2NyaXB0aW9uXG4gICAgICAgIC8vIHBhcmFtZXRlciBpcyBtaXNzaW5nLlxuICAgICAgICB0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgXCJkYXRhLWwxMG4tYXJnc1wiLFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsgZGVzY3JpcHRpb246IFwiXCIgfSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5kaXYuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdWlNYW5hZ2VyLmdldFNpZ25hdHVyZSh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoX2lzQ29weSkge1xuICAgICAgdGhpcy5faXNDb3B5ID0gdHJ1ZTtcbiAgICAgIHRoaXMuX21vdmVBZnRlclBhc3RlKGJhc2VYLCBiYXNlWSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGl2O1xuICB9XG5cbiAgc2V0VXVpZCh1dWlkKSB7XG4gICAgdGhpcy4jc2lnbmF0dXJlVVVJRCA9IHV1aWQ7XG4gICAgdGhpcy5hZGRFZGl0VG9vbGJhcigpO1xuICB9XG5cbiAgZ2V0VXVpZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jc2lnbmF0dXJlVVVJRDtcbiAgfVxuXG4gIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4jZGVzY3JpcHRpb247XG4gIH1cblxuICBzZXQgZGVzY3JpcHRpb24oZGVzY3JpcHRpb24pIHtcbiAgICB0aGlzLiNkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHN1cGVyLmFkZEVkaXRUb29sYmFyKCkudGhlbih0b29sYmFyID0+IHtcbiAgICAgIHRvb2xiYXI/LnVwZGF0ZUVkaXRTaWduYXR1cmVCdXR0b24oZGVzY3JpcHRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0U2lnbmF0dXJlUHJldmlldygpIHtcbiAgICBjb25zdCB7IG5ld0N1cnZlcywgYXJlQ29udG91cnMsIHRoaWNrbmVzcywgd2lkdGgsIGhlaWdodCB9ID1cbiAgICAgIHRoaXMuI3NpZ25hdHVyZURhdGE7XG4gICAgY29uc3QgbWF4RGltID0gTWF0aC5tYXgod2lkdGgsIGhlaWdodCk7XG4gICAgY29uc3Qgb3V0bGluZURhdGEgPSBTaWduYXR1cmVFeHRyYWN0b3IucHJvY2Vzc0RyYXduTGluZXMoe1xuICAgICAgbGluZXM6IHtcbiAgICAgICAgY3VydmVzOiBuZXdDdXJ2ZXMubWFwKHBvaW50cyA9PiAoeyBwb2ludHMgfSkpLFxuICAgICAgICB0aGlja25lc3MsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICB9LFxuICAgICAgcGFnZVdpZHRoOiBtYXhEaW0sXG4gICAgICBwYWdlSGVpZ2h0OiBtYXhEaW0sXG4gICAgICByb3RhdGlvbjogMCxcbiAgICAgIGlubmVyTWFyZ2luOiAwLFxuICAgICAgbXVzdFNtb290aDogZmFsc2UsXG4gICAgICBhcmVDb250b3VycyxcbiAgICB9KTtcbiAgICByZXR1cm4geyBhcmVDb250b3Vycywgb3V0bGluZTogb3V0bGluZURhdGEub3V0bGluZSB9O1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGFzeW5jIGFkZEVkaXRUb29sYmFyKCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSBhd2FpdCBzdXBlci5hZGRFZGl0VG9vbGJhcigpO1xuICAgIGlmICghdG9vbGJhcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLl91aU1hbmFnZXIuc2lnbmF0dXJlTWFuYWdlciAmJiB0aGlzLiNkZXNjcmlwdGlvbiAhPT0gbnVsbCkge1xuICAgICAgYXdhaXQgdG9vbGJhci5hZGRFZGl0U2lnbmF0dXJlQnV0dG9uKFxuICAgICAgICB0aGlzLl91aU1hbmFnZXIuc2lnbmF0dXJlTWFuYWdlcixcbiAgICAgICAgdGhpcy4jc2lnbmF0dXJlVVVJRCxcbiAgICAgICAgdGhpcy4jZGVzY3JpcHRpb25cbiAgICAgICk7XG4gICAgICB0b29sYmFyLnNob3coKTtcbiAgICB9XG4gICAgcmV0dXJuIHRvb2xiYXI7XG4gIH1cblxuICBhZGRTaWduYXR1cmUoZGF0YSwgaGVpZ2h0SW5QYWdlLCBkZXNjcmlwdGlvbiwgdXVpZCkge1xuICAgIGNvbnN0IHsgeDogc2F2ZWRYLCB5OiBzYXZlZFkgfSA9IHRoaXM7XG4gICAgY29uc3QgeyBvdXRsaW5lIH0gPSAodGhpcy4jc2lnbmF0dXJlRGF0YSA9IGRhdGEpO1xuICAgIHRoaXMuI2lzRXh0cmFjdGVkID0gb3V0bGluZSBpbnN0YW5jZW9mIENvbnRvdXJEcmF3T3V0bGluZTtcbiAgICB0aGlzLiNkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuZGl2LnNldEF0dHJpYnV0ZShcImRhdGEtbDEwbi1hcmdzXCIsIEpTT04uc3RyaW5naWZ5KHsgZGVzY3JpcHRpb24gfSkpO1xuICAgIGxldCBkcmF3aW5nT3B0aW9ucztcbiAgICBpZiAodGhpcy4jaXNFeHRyYWN0ZWQpIHtcbiAgICAgIGRyYXdpbmdPcHRpb25zID0gU2lnbmF0dXJlRWRpdG9yLmdldERlZmF1bHREcmF3aW5nT3B0aW9ucygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmF3aW5nT3B0aW9ucyA9IFNpZ25hdHVyZUVkaXRvci5fZGVmYXVsdERyYXduU2lnbmF0dXJlT3B0aW9ucy5jbG9uZSgpO1xuICAgICAgZHJhd2luZ09wdGlvbnMudXBkYXRlUHJvcGVydGllcyh7IFwic3Ryb2tlLXdpZHRoXCI6IG91dGxpbmUudGhpY2tuZXNzIH0pO1xuICAgIH1cbiAgICB0aGlzLl9hZGRPdXRsaW5lcyh7XG4gICAgICBkcmF3T3V0bGluZXM6IG91dGxpbmUsXG4gICAgICBkcmF3aW5nT3B0aW9ucyxcbiAgICB9KTtcbiAgICBjb25zdCBbcGFyZW50V2lkdGgsIHBhcmVudEhlaWdodF0gPSB0aGlzLnBhcmVudERpbWVuc2lvbnM7XG4gICAgY29uc3QgWywgcGFnZUhlaWdodF0gPSB0aGlzLnBhZ2VEaW1lbnNpb25zO1xuICAgIGxldCBuZXdIZWlnaHQgPSBoZWlnaHRJblBhZ2UgLyBwYWdlSGVpZ2h0O1xuICAgIC8vIEVuc3VyZSB0aGUgc2lnbmF0dXJlIGRvZXNuJ3QgZXhjZWVkIHRoZSBwYWdlIGhlaWdodC5cbiAgICAvLyBJZiB0aGUgc2lnbmF0dXJlIGlzIHRvbyBiaWcsIHdlIHNjYWxlIGl0IGRvd24gdG8gNTAlIG9mIHRoZSBwYWdlIGhlaWdodC5cbiAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPj0gMSA/IDAuNSA6IG5ld0hlaWdodDtcblxuICAgIHRoaXMud2lkdGggKj0gbmV3SGVpZ2h0IC8gdGhpcy5oZWlnaHQ7XG4gICAgaWYgKHRoaXMud2lkdGggPj0gMSkge1xuICAgICAgbmV3SGVpZ2h0ICo9IDAuOSAvIHRoaXMud2lkdGg7XG4gICAgICB0aGlzLndpZHRoID0gMC45O1xuICAgIH1cblxuICAgIHRoaXMuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgIHRoaXMuc2V0RGltcyhwYXJlbnRXaWR0aCAqIHRoaXMud2lkdGgsIHBhcmVudEhlaWdodCAqIHRoaXMuaGVpZ2h0KTtcbiAgICB0aGlzLnggPSBzYXZlZFg7XG4gICAgdGhpcy55ID0gc2F2ZWRZO1xuICAgIHRoaXMuY2VudGVyKCk7XG5cbiAgICB0aGlzLl9vblJlc2l6ZWQoKTtcbiAgICB0aGlzLm9uU2NhbGVDaGFuZ2luZygpO1xuICAgIHRoaXMucm90YXRlKCk7XG4gICAgdGhpcy5fdWlNYW5hZ2VyLmFkZFRvQW5ub3RhdGlvblN0b3JhZ2UodGhpcyk7XG4gICAgdGhpcy5zZXRVdWlkKHV1aWQpO1xuXG4gICAgdGhpcy5fcmVwb3J0VGVsZW1ldHJ5KHtcbiAgICAgIGFjdGlvbjogXCJwZGZqcy5zaWduYXR1cmUuaW5zZXJ0ZWRcIixcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgaGFzQmVlblNhdmVkOiAhIXV1aWQsXG4gICAgICAgIGhhc0Rlc2NyaXB0aW9uOiAhIWRlc2NyaXB0aW9uLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuZGl2LmhpZGRlbiA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0RnJvbUltYWdlKGJpdG1hcCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHJhd0RpbXM6IHsgcGFnZVdpZHRoLCBwYWdlSGVpZ2h0IH0sXG4gICAgICByb3RhdGlvbixcbiAgICB9ID0gdGhpcy5wYXJlbnQudmlld3BvcnQ7XG4gICAgcmV0dXJuIFNpZ25hdHVyZUV4dHJhY3Rvci5wcm9jZXNzKFxuICAgICAgYml0bWFwLFxuICAgICAgcGFnZVdpZHRoLFxuICAgICAgcGFnZUhlaWdodCxcbiAgICAgIHJvdGF0aW9uLFxuICAgICAgU2lnbmF0dXJlRWRpdG9yLl9JTk5FUl9NQVJHSU5cbiAgICApO1xuICB9XG5cbiAgZ2V0RnJvbVRleHQodGV4dCwgZm9udEluZm8pIHtcbiAgICBjb25zdCB7XG4gICAgICByYXdEaW1zOiB7IHBhZ2VXaWR0aCwgcGFnZUhlaWdodCB9LFxuICAgICAgcm90YXRpb24sXG4gICAgfSA9IHRoaXMucGFyZW50LnZpZXdwb3J0O1xuICAgIHJldHVybiBTaWduYXR1cmVFeHRyYWN0b3IuZXh0cmFjdENvbnRvdXJzRnJvbVRleHQoXG4gICAgICB0ZXh0LFxuICAgICAgZm9udEluZm8sXG4gICAgICBwYWdlV2lkdGgsXG4gICAgICBwYWdlSGVpZ2h0LFxuICAgICAgcm90YXRpb24sXG4gICAgICBTaWduYXR1cmVFZGl0b3IuX0lOTkVSX01BUkdJTlxuICAgICk7XG4gIH1cblxuICBnZXREcmF3blNpZ25hdHVyZShjdXJ2ZXMpIHtcbiAgICBjb25zdCB7XG4gICAgICByYXdEaW1zOiB7IHBhZ2VXaWR0aCwgcGFnZUhlaWdodCB9LFxuICAgICAgcm90YXRpb24sXG4gICAgfSA9IHRoaXMucGFyZW50LnZpZXdwb3J0O1xuICAgIHJldHVybiBTaWduYXR1cmVFeHRyYWN0b3IucHJvY2Vzc0RyYXduTGluZXMoe1xuICAgICAgbGluZXM6IGN1cnZlcyxcbiAgICAgIHBhZ2VXaWR0aCxcbiAgICAgIHBhZ2VIZWlnaHQsXG4gICAgICByb3RhdGlvbixcbiAgICAgIGlubmVyTWFyZ2luOiBTaWduYXR1cmVFZGl0b3IuX0lOTkVSX01BUkdJTixcbiAgICAgIG11c3RTbW9vdGg6IGZhbHNlLFxuICAgICAgYXJlQ29udG91cnM6IGZhbHNlLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGNyZWF0ZURyYXdpbmdPcHRpb25zKHsgYXJlQ29udG91cnMsIHRoaWNrbmVzcyB9KSB7XG4gICAgaWYgKGFyZUNvbnRvdXJzKSB7XG4gICAgICB0aGlzLl9kcmF3aW5nT3B0aW9ucyA9IFNpZ25hdHVyZUVkaXRvci5nZXREZWZhdWx0RHJhd2luZ09wdGlvbnMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZHJhd2luZ09wdGlvbnMgPVxuICAgICAgICBTaWduYXR1cmVFZGl0b3IuX2RlZmF1bHREcmF3blNpZ25hdHVyZU9wdGlvbnMuY2xvbmUoKTtcbiAgICAgIHRoaXMuX2RyYXdpbmdPcHRpb25zLnVwZGF0ZVByb3BlcnRpZXMoeyBcInN0cm9rZS13aWR0aFwiOiB0aGlja25lc3MgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHNlcmlhbGl6ZShpc0ZvckNvcHlpbmcgPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgeyBsaW5lcywgcG9pbnRzLCByZWN0IH0gPSB0aGlzLnNlcmlhbGl6ZURyYXcoaXNGb3JDb3B5aW5nKTtcbiAgICBjb25zdCB7XG4gICAgICBfZHJhd2luZ09wdGlvbnM6IHsgXCJzdHJva2Utd2lkdGhcIjogdGhpY2tuZXNzIH0sXG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IHtcbiAgICAgIGFubm90YXRpb25UeXBlOiBBbm5vdGF0aW9uRWRpdG9yVHlwZS5TSUdOQVRVUkUsXG4gICAgICBpc1NpZ25hdHVyZTogdHJ1ZSxcbiAgICAgIGFyZUNvbnRvdXJzOiB0aGlzLiNpc0V4dHJhY3RlZCxcbiAgICAgIGNvbG9yOiBbMCwgMCwgMF0sXG4gICAgICB0aGlja25lc3M6IHRoaXMuI2lzRXh0cmFjdGVkID8gMCA6IHRoaWNrbmVzcyxcbiAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsXG4gICAgICByZWN0LFxuICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXG4gICAgICBzdHJ1Y3RUcmVlUGFyZW50SWQ6IHRoaXMuX3N0cnVjdFRyZWVQYXJlbnRJZCxcbiAgICB9O1xuICAgIGlmIChpc0ZvckNvcHlpbmcpIHtcbiAgICAgIHNlcmlhbGl6ZWQucGF0aHMgPSB7IGxpbmVzLCBwb2ludHMgfTtcbiAgICAgIHNlcmlhbGl6ZWQudXVpZCA9IHRoaXMuI3NpZ25hdHVyZVVVSUQ7XG4gICAgICBzZXJpYWxpemVkLmlzQ29weSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlcmlhbGl6ZWQubGluZXMgPSBsaW5lcztcbiAgICB9XG4gICAgaWYgKHRoaXMuI2Rlc2NyaXB0aW9uKSB7XG4gICAgICBzZXJpYWxpemVkLmFjY2Vzc2liaWxpdHlEYXRhID0geyB0eXBlOiBcIkZpZ3VyZVwiLCBhbHQ6IHRoaXMuI2Rlc2NyaXB0aW9uIH07XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBkZXNlcmlhbGl6ZURyYXcoXG4gICAgcGFnZVgsXG4gICAgcGFnZVksXG4gICAgcGFnZVdpZHRoLFxuICAgIHBhZ2VIZWlnaHQsXG4gICAgaW5uZXJNYXJnaW4sXG4gICAgZGF0YVxuICApIHtcbiAgICBpZiAoZGF0YS5hcmVDb250b3Vycykge1xuICAgICAgcmV0dXJuIENvbnRvdXJEcmF3T3V0bGluZS5kZXNlcmlhbGl6ZShcbiAgICAgICAgcGFnZVgsXG4gICAgICAgIHBhZ2VZLFxuICAgICAgICBwYWdlV2lkdGgsXG4gICAgICAgIHBhZ2VIZWlnaHQsXG4gICAgICAgIGlubmVyTWFyZ2luLFxuICAgICAgICBkYXRhXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBJbmtEcmF3T3V0bGluZS5kZXNlcmlhbGl6ZShcbiAgICAgIHBhZ2VYLFxuICAgICAgcGFnZVksXG4gICAgICBwYWdlV2lkdGgsXG4gICAgICBwYWdlSGVpZ2h0LFxuICAgICAgaW5uZXJNYXJnaW4sXG4gICAgICBkYXRhXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoZGF0YSwgcGFyZW50LCB1aU1hbmFnZXIpIHtcbiAgICBjb25zdCBlZGl0b3IgPSBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShkYXRhLCBwYXJlbnQsIHVpTWFuYWdlcik7XG4gICAgZWRpdG9yLiNpc0V4dHJhY3RlZCA9IGRhdGEuYXJlQ29udG91cnM7XG4gICAgZWRpdG9yLiNkZXNjcmlwdGlvbiA9IGRhdGEuYWNjZXNzaWJpbGl0eURhdGE/LmFsdCB8fCBcIlwiO1xuICAgIGVkaXRvci4jc2lnbmF0dXJlVVVJRCA9IGRhdGEudXVpZDtcbiAgICByZXR1cm4gZWRpdG9yO1xuICB9XG59XG5cbmV4cG9ydCB7IFNpZ25hdHVyZUVkaXRvciB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBbm5vdGF0aW9uRWRpdG9yVHlwZSwgQW5ub3RhdGlvblByZWZpeCB9IGZyb20gXCIuLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHtcbiAgT3V0cHV0U2NhbGUsXG4gIFBpeGVsc1BlckluY2gsXG4gIFN1cHBvcnRlZEltYWdlTWltZVR5cGVzLFxufSBmcm9tIFwiLi4vZGlzcGxheV91dGlscy5qc1wiO1xuaW1wb3J0IHsgQW5ub3RhdGlvbkVkaXRvciB9IGZyb20gXCIuL2VkaXRvci5qc1wiO1xuaW1wb3J0IHsgU3RhbXBBbm5vdGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9hbm5vdGF0aW9uX2xheWVyLmpzXCI7XG5cbi8qKlxuICogQmFzaWMgdGV4dCBlZGl0b3IgaW4gb3JkZXIgdG8gY3JlYXRlIGEgRnJlZVRleCBhbm5vdGF0aW9uLlxuICovXG5jbGFzcyBTdGFtcEVkaXRvciBleHRlbmRzIEFubm90YXRpb25FZGl0b3Ige1xuICAjYml0bWFwID0gbnVsbDtcblxuICAjYml0bWFwSWQgPSBudWxsO1xuXG4gICNiaXRtYXBQcm9taXNlID0gbnVsbDtcblxuICAjYml0bWFwVXJsID0gbnVsbDtcblxuICAjYml0bWFwRmlsZSA9IG51bGw7XG5cbiAgI2JpdG1hcEZpbGVOYW1lID0gXCJcIjtcblxuICAjY2FudmFzID0gbnVsbDtcblxuICAjbWlzc2luZ0NhbnZhcyA9IGZhbHNlO1xuXG4gICNyZXNpemVUaW1lb3V0SWQgPSBudWxsO1xuXG4gICNpc1N2ZyA9IGZhbHNlO1xuXG4gICNoYXNCZWVuQWRkZWRJblVuZG9TdGFjayA9IGZhbHNlO1xuXG4gIHN0YXRpYyBfdHlwZSA9IFwic3RhbXBcIjtcblxuICBzdGF0aWMgX2VkaXRvclR5cGUgPSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5TVEFNUDtcblxuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICBzdXBlcih7IC4uLnBhcmFtcywgbmFtZTogXCJzdGFtcEVkaXRvclwiIH0pO1xuICAgIHRoaXMuI2JpdG1hcFVybCA9IHBhcmFtcy5iaXRtYXBVcmw7XG4gICAgdGhpcy4jYml0bWFwRmlsZSA9IHBhcmFtcy5iaXRtYXBGaWxlO1xuICAgIHRoaXMuZGVmYXVsdEwxMG5JZCA9IFwicGRmanMtZWRpdG9yLXN0YW1wLWVkaXRvclwiO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBpbml0aWFsaXplKGwxMG4sIHVpTWFuYWdlcikge1xuICAgIEFubm90YXRpb25FZGl0b3IuaW5pdGlhbGl6ZShsMTBuLCB1aU1hbmFnZXIpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHN0YXRpYyBpc0hhbmRsaW5nTWltZUZvclBhc3RpbmcobWltZSkge1xuICAgIHJldHVybiBTdXBwb3J0ZWRJbWFnZU1pbWVUeXBlcy5pbmNsdWRlcyhtaW1lKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdGF0aWMgcGFzdGUoaXRlbSwgcGFyZW50KSB7XG4gICAgcGFyZW50LnBhc3RlRWRpdG9yKEFubm90YXRpb25FZGl0b3JUeXBlLlNUQU1QLCB7XG4gICAgICBiaXRtYXBGaWxlOiBpdGVtLmdldEFzRmlsZSgpLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGFsdFRleHRGaW5pc2goKSB7XG4gICAgaWYgKHRoaXMuX3VpTWFuYWdlci51c2VOZXdBbHRUZXh0Rmxvdykge1xuICAgICAgdGhpcy5kaXYuaGlkZGVuID0gZmFsc2U7XG4gICAgfVxuICAgIHN1cGVyLmFsdFRleHRGaW5pc2goKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXQgdGVsZW1ldHJ5RmluYWxEYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInN0YW1wXCIsXG4gICAgICBoYXNBbHRUZXh0OiAhIXRoaXMuYWx0VGV4dERhdGE/LmFsdFRleHQsXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBjb21wdXRlVGVsZW1ldHJ5RmluYWxEYXRhKGRhdGEpIHtcbiAgICBjb25zdCBoYXNBbHRUZXh0U3RhdHMgPSBkYXRhLmdldChcImhhc0FsdFRleHRcIik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc0FsdFRleHQ6IGhhc0FsdFRleHRTdGF0cy5nZXQodHJ1ZSkgPz8gMCxcbiAgICAgIGhhc05vQWx0VGV4dDogaGFzQWx0VGV4dFN0YXRzLmdldChmYWxzZSkgPz8gMCxcbiAgICB9O1xuICB9XG5cbiAgI2dldEJpdG1hcEZldGNoZWQoZGF0YSwgZnJvbUlkID0gZmFsc2UpIHtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI2JpdG1hcCA9IGRhdGEuYml0bWFwO1xuICAgIGlmICghZnJvbUlkKSB7XG4gICAgICB0aGlzLiNiaXRtYXBJZCA9IGRhdGEuaWQ7XG4gICAgICB0aGlzLiNpc1N2ZyA9IGRhdGEuaXNTdmc7XG4gICAgfVxuICAgIGlmIChkYXRhLmZpbGUpIHtcbiAgICAgIHRoaXMuI2JpdG1hcEZpbGVOYW1lID0gZGF0YS5maWxlLm5hbWU7XG4gICAgfVxuICAgIHRoaXMuI2NyZWF0ZUNhbnZhcygpO1xuICB9XG5cbiAgI2dldEJpdG1hcERvbmUoKSB7XG4gICAgdGhpcy4jYml0bWFwUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fdWlNYW5hZ2VyLmVuYWJsZVdhaXRpbmcoZmFsc2UpO1xuICAgIGlmICghdGhpcy4jY2FudmFzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuX3VpTWFuYWdlci51c2VOZXdBbHRUZXh0V2hlbkFkZGluZ0ltYWdlICYmXG4gICAgICB0aGlzLl91aU1hbmFnZXIudXNlTmV3QWx0VGV4dEZsb3cgJiZcbiAgICAgIHRoaXMuI2JpdG1hcFxuICAgICkge1xuICAgICAgdGhpcy5fZWRpdFRvb2xiYXIuaGlkZSgpO1xuICAgICAgdGhpcy5fdWlNYW5hZ2VyLmVkaXRBbHRUZXh0KHRoaXMsIC8qIGZpcnN0VGltZSA9ICovIHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICF0aGlzLl91aU1hbmFnZXIudXNlTmV3QWx0VGV4dFdoZW5BZGRpbmdJbWFnZSAmJlxuICAgICAgdGhpcy5fdWlNYW5hZ2VyLnVzZU5ld0FsdFRleHRGbG93ICYmXG4gICAgICB0aGlzLiNiaXRtYXBcbiAgICApIHtcbiAgICAgIHRoaXMuX3JlcG9ydFRlbGVtZXRyeSh7XG4gICAgICAgIGFjdGlvbjogXCJwZGZqcy5pbWFnZS5pbWFnZV9hZGRlZFwiLFxuICAgICAgICBkYXRhOiB7IGFsdF90ZXh0X21vZGFsOiBmYWxzZSwgYWx0X3RleHRfdHlwZTogXCJlbXB0eVwiIH0sXG4gICAgICB9KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoZSBhbHQtdGV4dCBkaWFsb2cgaXNuJ3Qgb3BlbmVkIGJ1dCB3ZSBzdGlsbCB3YW50IHRvIGd1ZXNzIHRoZSBhbHRcbiAgICAgICAgLy8gdGV4dC5cbiAgICAgICAgdGhpcy5tbEd1ZXNzQWx0VGV4dCgpO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH1cblxuICAgIHRoaXMuZGl2LmZvY3VzKCk7XG4gIH1cblxuICBhc3luYyBtbEd1ZXNzQWx0VGV4dChpbWFnZURhdGEgPSBudWxsLCB1cGRhdGVBbHRUZXh0RGF0YSA9IHRydWUpIHtcbiAgICBpZiAodGhpcy5oYXNBbHRUZXh0RGF0YSgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB7IG1sTWFuYWdlciB9ID0gdGhpcy5fdWlNYW5hZ2VyO1xuICAgIGlmICghbWxNYW5hZ2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBNTC5cIik7XG4gICAgfVxuICAgIGlmICghKGF3YWl0IG1sTWFuYWdlci5pc0VuYWJsZWRGb3IoXCJhbHRUZXh0XCIpKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTUwgaXNuJ3QgZW5hYmxlZCBmb3IgYWx0IHRleHQuXCIpO1xuICAgIH1cbiAgICBjb25zdCB7IGRhdGEsIHdpZHRoLCBoZWlnaHQgfSA9XG4gICAgICBpbWFnZURhdGEgfHxcbiAgICAgIHRoaXMuY29weUNhbnZhcyhudWxsLCBudWxsLCAvKiBjcmVhdGVJbWFnZURhdGEgPSAqLyB0cnVlKS5pbWFnZURhdGE7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtbE1hbmFnZXIuZ3Vlc3Moe1xuICAgICAgbmFtZTogXCJhbHRUZXh0XCIsXG4gICAgICByZXF1ZXN0OiB7XG4gICAgICAgIGRhdGEsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIGNoYW5uZWxzOiBkYXRhLmxlbmd0aCAvICh3aWR0aCAqIGhlaWdodCksXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJlc3BvbnNlIGZyb20gdGhlIEFJIHNlcnZpY2UuXCIpO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZyb20gdGhlIEFJIHNlcnZpY2UuXCIpO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2UuY2FuY2VsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCFyZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHZhbGlkIHJlc3BvbnNlIGZyb20gdGhlIEFJIHNlcnZpY2UuXCIpO1xuICAgIH1cbiAgICBjb25zdCBhbHRUZXh0ID0gcmVzcG9uc2Uub3V0cHV0O1xuICAgIGF3YWl0IHRoaXMuc2V0R3Vlc3NlZEFsdFRleHQoYWx0VGV4dCk7XG4gICAgaWYgKHVwZGF0ZUFsdFRleHREYXRhICYmICF0aGlzLmhhc0FsdFRleHREYXRhKCkpIHtcbiAgICAgIHRoaXMuYWx0VGV4dERhdGEgPSB7IGFsdDogYWx0VGV4dCwgZGVjb3JhdGl2ZTogZmFsc2UgfTtcbiAgICB9XG4gICAgcmV0dXJuIGFsdFRleHQ7XG4gIH1cblxuICAjZ2V0Qml0bWFwKCkge1xuICAgIGlmICh0aGlzLiNiaXRtYXBJZCkge1xuICAgICAgdGhpcy5fdWlNYW5hZ2VyLmVuYWJsZVdhaXRpbmcodHJ1ZSk7XG4gICAgICB0aGlzLl91aU1hbmFnZXIuaW1hZ2VNYW5hZ2VyXG4gICAgICAgIC5nZXRGcm9tSWQodGhpcy4jYml0bWFwSWQpXG4gICAgICAgIC50aGVuKGRhdGEgPT4gdGhpcy4jZ2V0Qml0bWFwRmV0Y2hlZChkYXRhLCAvKiBmcm9tSWQgPSAqLyB0cnVlKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy4jZ2V0Qml0bWFwRG9uZSgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jYml0bWFwVXJsKSB7XG4gICAgICBjb25zdCB1cmwgPSB0aGlzLiNiaXRtYXBVcmw7XG4gICAgICB0aGlzLiNiaXRtYXBVcmwgPSBudWxsO1xuICAgICAgdGhpcy5fdWlNYW5hZ2VyLmVuYWJsZVdhaXRpbmcodHJ1ZSk7XG4gICAgICB0aGlzLiNiaXRtYXBQcm9taXNlID0gdGhpcy5fdWlNYW5hZ2VyLmltYWdlTWFuYWdlclxuICAgICAgICAuZ2V0RnJvbVVybCh1cmwpXG4gICAgICAgIC50aGVuKGRhdGEgPT4gdGhpcy4jZ2V0Qml0bWFwRmV0Y2hlZChkYXRhKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy4jZ2V0Qml0bWFwRG9uZSgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jYml0bWFwRmlsZSkge1xuICAgICAgY29uc3QgZmlsZSA9IHRoaXMuI2JpdG1hcEZpbGU7XG4gICAgICB0aGlzLiNiaXRtYXBGaWxlID0gbnVsbDtcbiAgICAgIHRoaXMuX3VpTWFuYWdlci5lbmFibGVXYWl0aW5nKHRydWUpO1xuICAgICAgdGhpcy4jYml0bWFwUHJvbWlzZSA9IHRoaXMuX3VpTWFuYWdlci5pbWFnZU1hbmFnZXJcbiAgICAgICAgLmdldEZyb21GaWxlKGZpbGUpXG4gICAgICAgIC50aGVuKGRhdGEgPT4gdGhpcy4jZ2V0Qml0bWFwRmV0Y2hlZChkYXRhKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy4jZ2V0Qml0bWFwRG9uZSgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgICBpbnB1dC5oaWRkZW4gPSB0cnVlO1xuICAgICAgaW5wdXQuaWQgPSBcInN0YW1wRWRpdG9yRmlsZUlucHV0XCI7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChpbnB1dCk7XG4gICAgfVxuICAgIGlucHV0LnR5cGUgPSBcImZpbGVcIjtcbiAgICBpbnB1dC5hY2NlcHQgPSBTdXBwb3J0ZWRJbWFnZU1pbWVUeXBlcy5qb2luKFwiLFwiKTtcbiAgICBjb25zdCBzaWduYWwgPSB0aGlzLl91aU1hbmFnZXIuX3NpZ25hbDtcbiAgICB0aGlzLiNiaXRtYXBQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcImNoYW5nZVwiLFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKCFpbnB1dC5maWxlcyB8fCBpbnB1dC5maWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3VpTWFuYWdlci5lbmFibGVXYWl0aW5nKHRydWUpO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX3VpTWFuYWdlci5pbWFnZU1hbmFnZXIuZ2V0RnJvbUZpbGUoXG4gICAgICAgICAgICAgIGlucHV0LmZpbGVzWzBdXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5fcmVwb3J0VGVsZW1ldHJ5KHtcbiAgICAgICAgICAgICAgYWN0aW9uOiBcInBkZmpzLmltYWdlLmltYWdlX3NlbGVjdGVkXCIsXG4gICAgICAgICAgICAgIGRhdGE6IHsgYWx0X3RleHRfbW9kYWw6IHRoaXMuX3VpTWFuYWdlci51c2VOZXdBbHRUZXh0RmxvdyB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNnZXRCaXRtYXBGZXRjaGVkKGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJURVNUSU5HXCIpKSB7XG4gICAgICAgICAgICBpbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LFxuICAgICAgICB7IHNpZ25hbCB9XG4gICAgICApO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJjYW5jZWxcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LFxuICAgICAgICB7IHNpZ25hbCB9XG4gICAgICApO1xuICAgIH0pLmZpbmFsbHkoKCkgPT4gdGhpcy4jZ2V0Qml0bWFwRG9uZSgpKTtcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8ICFQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKSkge1xuICAgICAgaW5wdXQuY2xpY2soKTtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLiNiaXRtYXBJZCkge1xuICAgICAgdGhpcy4jYml0bWFwID0gbnVsbDtcbiAgICAgIHRoaXMuX3VpTWFuYWdlci5pbWFnZU1hbmFnZXIuZGVsZXRlSWQodGhpcy4jYml0bWFwSWQpO1xuICAgICAgdGhpcy4jY2FudmFzPy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuI2NhbnZhcyA9IG51bGw7XG4gICAgICBpZiAodGhpcy4jcmVzaXplVGltZW91dElkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLiNyZXNpemVUaW1lb3V0SWQpO1xuICAgICAgICB0aGlzLiNyZXNpemVUaW1lb3V0SWQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBzdXBlci5yZW1vdmUoKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICByZWJ1aWxkKCkge1xuICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgIC8vIEl0J3MgcG9zc2libGUgdG8gaGF2ZSB0byByZWJ1aWxkIGFuIGVkaXRvciB3aGljaCBpcyBub3Qgb24gYSB2aXNpYmxlXG4gICAgICAvLyBwYWdlLlxuICAgICAgaWYgKHRoaXMuI2JpdG1hcElkKSB7XG4gICAgICAgIHRoaXMuI2dldEJpdG1hcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdXBlci5yZWJ1aWxkKCk7XG4gICAgaWYgKHRoaXMuZGl2ID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI2JpdG1hcElkICYmIHRoaXMuI2NhbnZhcyA9PT0gbnVsbCkge1xuICAgICAgdGhpcy4jZ2V0Qml0bWFwKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzQXR0YWNoZWRUb0RPTSkge1xuICAgICAgLy8gQXQgc29tZSBwb2ludCB0aGlzIGVkaXRvciB3YXMgcmVtb3ZlZCBhbmQgd2UncmUgcmVidWlsdGluZyBpdCxcbiAgICAgIC8vIGhlbmNlIHdlIG11c3QgYWRkIGl0IHRvIGl0cyBwYXJlbnQuXG4gICAgICB0aGlzLnBhcmVudC5hZGQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uY2VBZGRlZChmb2N1cykge1xuICAgIHRoaXMuX2lzRHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICBpZiAoZm9jdXMpIHtcbiAgICAgIHRoaXMuZGl2LmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuICEoXG4gICAgICB0aGlzLiNiaXRtYXBQcm9taXNlIHx8XG4gICAgICB0aGlzLiNiaXRtYXAgfHxcbiAgICAgIHRoaXMuI2JpdG1hcFVybCB8fFxuICAgICAgdGhpcy4jYml0bWFwRmlsZSB8fFxuICAgICAgdGhpcy4jYml0bWFwSWQgfHxcbiAgICAgIHRoaXMuI21pc3NpbmdDYW52YXNcbiAgICApO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGdldCBpc1Jlc2l6YWJsZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMuZGl2KSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXY7XG4gICAgfVxuXG4gICAgbGV0IGJhc2VYLCBiYXNlWTtcbiAgICBpZiAodGhpcy5faXNDb3B5KSB7XG4gICAgICBiYXNlWCA9IHRoaXMueDtcbiAgICAgIGJhc2VZID0gdGhpcy55O1xuICAgIH1cblxuICAgIHN1cGVyLnJlbmRlcigpO1xuICAgIHRoaXMuZGl2LmhpZGRlbiA9IHRydWU7XG5cbiAgICB0aGlzLmFkZEFsdFRleHRCdXR0b24oKTtcblxuICAgIGlmICghdGhpcy4jbWlzc2luZ0NhbnZhcykge1xuICAgICAgaWYgKHRoaXMuI2JpdG1hcCkge1xuICAgICAgICB0aGlzLiNjcmVhdGVDYW52YXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuI2dldEJpdG1hcCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc0NvcHkpIHtcbiAgICAgIHRoaXMuX21vdmVBZnRlclBhc3RlKGJhc2VYLCBiYXNlWSk7XG4gICAgfVxuXG4gICAgdGhpcy5fdWlNYW5hZ2VyLmFkZFNob3VsZFJlc2NhbGUodGhpcyk7XG5cbiAgICByZXR1cm4gdGhpcy5kaXY7XG4gIH1cblxuICBzZXRDYW52YXMoYW5ub3RhdGlvbkVsZW1lbnRJZCwgY2FudmFzKSB7XG4gICAgY29uc3QgeyBpZDogYml0bWFwSWQsIGJpdG1hcCB9ID0gdGhpcy5fdWlNYW5hZ2VyLmltYWdlTWFuYWdlci5nZXRGcm9tQ2FudmFzKFxuICAgICAgYW5ub3RhdGlvbkVsZW1lbnRJZCxcbiAgICAgIGNhbnZhc1xuICAgICk7XG4gICAgY2FudmFzLnJlbW92ZSgpO1xuICAgIGlmIChiaXRtYXBJZCAmJiB0aGlzLl91aU1hbmFnZXIuaW1hZ2VNYW5hZ2VyLmlzVmFsaWRJZChiaXRtYXBJZCkpIHtcbiAgICAgIHRoaXMuI2JpdG1hcElkID0gYml0bWFwSWQ7XG4gICAgICBpZiAoYml0bWFwKSB7XG4gICAgICAgIHRoaXMuI2JpdG1hcCA9IGJpdG1hcDtcbiAgICAgIH1cbiAgICAgIHRoaXMuI21pc3NpbmdDYW52YXMgPSBmYWxzZTtcbiAgICAgIHRoaXMuI2NyZWF0ZUNhbnZhcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBfb25SZXNpemVkKCkge1xuICAgIC8vIFdlIHVzZWQgYSBDU1Mtem9vbSBkdXJpbmcgdGhlIHJlc2l6aW5nLCBidXQgbm93IGl0J3MgcmVzaXplZCB3ZSBjYW5cbiAgICAvLyByZXNjYWxlIGNvcnJlY3RseSB0aGUgYml0bWFwIHRvIGZpdCB0aGUgbmV3IGRpbWVuc2lvbnMuXG4gICAgdGhpcy5vblNjYWxlQ2hhbmdpbmcoKTtcbiAgfVxuXG4gIG9uU2NhbGVDaGFuZ2luZygpIHtcbiAgICBpZiAoIXRoaXMucGFyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLiNyZXNpemVUaW1lb3V0SWQgIT09IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLiNyZXNpemVUaW1lb3V0SWQpO1xuICAgIH1cbiAgICAvLyBUaGUgdXNlcidzIHpvb21pbmcgdGhlIHBhZ2UsIHRoZXJlIGlzIG5vIG5lZWQgdG8gcmVkcmF3IHRoZSBiaXRtYXAgYXRcbiAgICAvLyBlYWNoIHN0ZXAsIGhlbmNlIHdlIHdhaXQgYSBiaXQgYmVmb3JlIHJlZHJhd2luZyBpdC5cbiAgICBjb25zdCBUSU1FX1RPX1dBSVQgPSAyMDA7XG4gICAgdGhpcy4jcmVzaXplVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLiNyZXNpemVUaW1lb3V0SWQgPSBudWxsO1xuICAgICAgdGhpcy4jZHJhd0JpdG1hcCgpO1xuICAgIH0sIFRJTUVfVE9fV0FJVCk7XG4gIH1cblxuICAjY3JlYXRlQ2FudmFzKCkge1xuICAgIGNvbnN0IHsgZGl2IH0gPSB0aGlzO1xuICAgIGxldCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuI2JpdG1hcDtcbiAgICBjb25zdCBbcGFnZVdpZHRoLCBwYWdlSGVpZ2h0XSA9IHRoaXMucGFnZURpbWVuc2lvbnM7XG4gICAgY29uc3QgTUFYX1JBVElPID0gMC43NTtcbiAgICBpZiAodGhpcy53aWR0aCkge1xuICAgICAgd2lkdGggPSB0aGlzLndpZHRoICogcGFnZVdpZHRoO1xuICAgICAgaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKiBwYWdlSGVpZ2h0O1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICB3aWR0aCA+IE1BWF9SQVRJTyAqIHBhZ2VXaWR0aCB8fFxuICAgICAgaGVpZ2h0ID4gTUFYX1JBVElPICogcGFnZUhlaWdodFxuICAgICkge1xuICAgICAgLy8gSWYgdGhlIHRoZSBpbWFnZSBpcyB0b28gYmlnIGNvbXBhcmVkIHRvIHRoZSBwYWdlIGRpbWVuc2lvbnNcbiAgICAgIC8vIChtb3JlIHRoYW4gTUFYX1JBVElPKSB0aGVuIHdlIHNjYWxlIGl0IGRvd24uXG4gICAgICBjb25zdCBmYWN0b3IgPSBNYXRoLm1pbihcbiAgICAgICAgKE1BWF9SQVRJTyAqIHBhZ2VXaWR0aCkgLyB3aWR0aCxcbiAgICAgICAgKE1BWF9SQVRJTyAqIHBhZ2VIZWlnaHQpIC8gaGVpZ2h0XG4gICAgICApO1xuICAgICAgd2lkdGggKj0gZmFjdG9yO1xuICAgICAgaGVpZ2h0ICo9IGZhY3RvcjtcbiAgICB9XG4gICAgY29uc3QgW3BhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHRdID0gdGhpcy5wYXJlbnREaW1lbnNpb25zO1xuICAgIHRoaXMuc2V0RGltcyhcbiAgICAgICh3aWR0aCAqIHBhcmVudFdpZHRoKSAvIHBhZ2VXaWR0aCxcbiAgICAgIChoZWlnaHQgKiBwYXJlbnRIZWlnaHQpIC8gcGFnZUhlaWdodFxuICAgICk7XG5cbiAgICB0aGlzLl91aU1hbmFnZXIuZW5hYmxlV2FpdGluZyhmYWxzZSk7XG4gICAgY29uc3QgY2FudmFzID0gKHRoaXMuI2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpO1xuICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiaW1nXCIpO1xuICAgIHRoaXMuYWRkQ29udGFpbmVyKGNhbnZhcyk7XG5cbiAgICB0aGlzLndpZHRoID0gd2lkdGggLyBwYWdlV2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgLyBwYWdlSGVpZ2h0O1xuICAgIGlmICh0aGlzLl9pbml0aWFsT3B0aW9ucz8uaXNDZW50ZXJlZCkge1xuICAgICAgdGhpcy5jZW50ZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maXhBbmRTZXRQb3NpdGlvbigpO1xuICAgIH1cbiAgICB0aGlzLl9pbml0aWFsT3B0aW9ucyA9IG51bGw7XG5cbiAgICBpZiAoXG4gICAgICAhdGhpcy5fdWlNYW5hZ2VyLnVzZU5ld0FsdFRleHRXaGVuQWRkaW5nSW1hZ2UgfHxcbiAgICAgICF0aGlzLl91aU1hbmFnZXIudXNlTmV3QWx0VGV4dEZsb3cgfHxcbiAgICAgIHRoaXMuYW5ub3RhdGlvbkVsZW1lbnRJZFxuICAgICkge1xuICAgICAgZGl2LmhpZGRlbiA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLiNkcmF3Qml0bWFwKCk7XG4gICAgaWYgKCF0aGlzLiNoYXNCZWVuQWRkZWRJblVuZG9TdGFjaykge1xuICAgICAgdGhpcy5wYXJlbnQuYWRkVW5kb2FibGVFZGl0b3IodGhpcyk7XG4gICAgICB0aGlzLiNoYXNCZWVuQWRkZWRJblVuZG9TdGFjayA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gVGhlcmUgYXJlIG11bHRpcGxlIHdheXMgdG8gYWRkIGFuIGltYWdlIHRvIHRoZSBwYWdlLCBzbyBoZXJlIHdlIGp1c3RcbiAgICAvLyBjb3VudCB0aGUgbnVtYmVyIG9mIHRpbWVzIGFuIGltYWdlIGlzIGFkZGVkIHRvIHRoZSBwYWdlIHdoYXRldmVyIHRoZSB3YXlcbiAgICAvLyBpcy5cbiAgICB0aGlzLl9yZXBvcnRUZWxlbWV0cnkoe1xuICAgICAgYWN0aW9uOiBcImluc2VydGVkX2ltYWdlXCIsXG4gICAgfSk7XG4gICAgaWYgKHRoaXMuI2JpdG1hcEZpbGVOYW1lKSB7XG4gICAgICB0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRlc2NyaXB0aW9uXCIsIHRoaXMuI2JpdG1hcEZpbGVOYW1lKTtcbiAgICB9XG4gIH1cblxuICBjb3B5Q2FudmFzKG1heERhdGFEaW1lbnNpb24sIG1heFByZXZpZXdEaW1lbnNpb24sIGNyZWF0ZUltYWdlRGF0YSA9IGZhbHNlKSB7XG4gICAgaWYgKCFtYXhEYXRhRGltZW5zaW9uKSB7XG4gICAgICAvLyBUT0RPOiBnZXQgdGhpcyB2YWx1ZSBmcm9tIEZpcmVmb3hcbiAgICAgIC8vICAgKGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE5MDgxODQpXG4gICAgICAvLyBJdCdzIHRoZSBtYXhpbXVtIGRpbWVuc2lvbiB0aGF0IHRoZSBBSSBjYW4gaGFuZGxlLlxuICAgICAgbWF4RGF0YURpbWVuc2lvbiA9IDIyNDtcbiAgICB9XG5cbiAgICBjb25zdCB7IHdpZHRoOiBiaXRtYXBXaWR0aCwgaGVpZ2h0OiBiaXRtYXBIZWlnaHQgfSA9IHRoaXMuI2JpdG1hcDtcbiAgICBjb25zdCBvdXRwdXRTY2FsZSA9IG5ldyBPdXRwdXRTY2FsZSgpO1xuXG4gICAgbGV0IGJpdG1hcCA9IHRoaXMuI2JpdG1hcDtcbiAgICBsZXQgd2lkdGggPSBiaXRtYXBXaWR0aCxcbiAgICAgIGhlaWdodCA9IGJpdG1hcEhlaWdodDtcbiAgICBsZXQgY2FudmFzID0gbnVsbDtcblxuICAgIGlmIChtYXhQcmV2aWV3RGltZW5zaW9uKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGJpdG1hcFdpZHRoID4gbWF4UHJldmlld0RpbWVuc2lvbiB8fFxuICAgICAgICBiaXRtYXBIZWlnaHQgPiBtYXhQcmV2aWV3RGltZW5zaW9uXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgcmF0aW8gPSBNYXRoLm1pbihcbiAgICAgICAgICBtYXhQcmV2aWV3RGltZW5zaW9uIC8gYml0bWFwV2lkdGgsXG4gICAgICAgICAgbWF4UHJldmlld0RpbWVuc2lvbiAvIGJpdG1hcEhlaWdodFxuICAgICAgICApO1xuICAgICAgICB3aWR0aCA9IE1hdGguZmxvb3IoYml0bWFwV2lkdGggKiByYXRpbyk7XG4gICAgICAgIGhlaWdodCA9IE1hdGguZmxvb3IoYml0bWFwSGVpZ2h0ICogcmF0aW8pO1xuICAgICAgfVxuXG4gICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgY29uc3Qgc2NhbGVkV2lkdGggPSAoY2FudmFzLndpZHRoID0gTWF0aC5jZWlsKHdpZHRoICogb3V0cHV0U2NhbGUuc3gpKTtcbiAgICAgIGNvbnN0IHNjYWxlZEhlaWdodCA9IChjYW52YXMuaGVpZ2h0ID0gTWF0aC5jZWlsKGhlaWdodCAqIG91dHB1dFNjYWxlLnN5KSk7XG5cbiAgICAgIGlmICghdGhpcy4jaXNTdmcpIHtcbiAgICAgICAgYml0bWFwID0gdGhpcy4jc2NhbGVCaXRtYXAoc2NhbGVkV2lkdGgsIHNjYWxlZEhlaWdodCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBjdHguZmlsdGVyID0gdGhpcy5fdWlNYW5hZ2VyLmhjbUZpbHRlcjtcblxuICAgICAgLy8gQWRkIGEgY2hlY2tlcmJvYXJkIHBhdHRlcm4gYXMgYSBiYWNrZ3JvdW5kIGluIGNhc2UgdGhlIGltYWdlIGhhcyBzb21lXG4gICAgICAvLyB0cmFuc3BhcmVuY3kuXG4gICAgICBsZXQgd2hpdGUgPSBcIndoaXRlXCIsXG4gICAgICAgIGJsYWNrID0gXCIjY2ZjZmQ4XCI7XG4gICAgICBpZiAodGhpcy5fdWlNYW5hZ2VyLmhjbUZpbHRlciAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgYmxhY2sgPSBcImJsYWNrXCI7XG4gICAgICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhPy4oXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLm1hdGNoZXMpIHtcbiAgICAgICAgd2hpdGUgPSBcIiM4ZjhmOWRcIjtcbiAgICAgICAgYmxhY2sgPSBcIiM0MjQxNGRcIjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJveERpbSA9IDE1O1xuICAgICAgY29uc3QgYm94RGltV2lkdGggPSBib3hEaW0gKiBvdXRwdXRTY2FsZS5zeDtcbiAgICAgIGNvbnN0IGJveERpbUhlaWdodCA9IGJveERpbSAqIG91dHB1dFNjYWxlLnN5O1xuICAgICAgY29uc3QgcGF0dGVybiA9IG5ldyBPZmZzY3JlZW5DYW52YXMoYm94RGltV2lkdGggKiAyLCBib3hEaW1IZWlnaHQgKiAyKTtcbiAgICAgIGNvbnN0IHBhdHRlcm5DdHggPSBwYXR0ZXJuLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHBhdHRlcm5DdHguZmlsbFN0eWxlID0gd2hpdGU7XG4gICAgICBwYXR0ZXJuQ3R4LmZpbGxSZWN0KDAsIDAsIGJveERpbVdpZHRoICogMiwgYm94RGltSGVpZ2h0ICogMik7XG4gICAgICBwYXR0ZXJuQ3R4LmZpbGxTdHlsZSA9IGJsYWNrO1xuICAgICAgcGF0dGVybkN0eC5maWxsUmVjdCgwLCAwLCBib3hEaW1XaWR0aCwgYm94RGltSGVpZ2h0KTtcbiAgICAgIHBhdHRlcm5DdHguZmlsbFJlY3QoYm94RGltV2lkdGgsIGJveERpbUhlaWdodCwgYm94RGltV2lkdGgsIGJveERpbUhlaWdodCk7XG4gICAgICBjdHguZmlsbFN0eWxlID0gY3R4LmNyZWF0ZVBhdHRlcm4ocGF0dGVybiwgXCJyZXBlYXRcIik7XG4gICAgICBjdHguZmlsbFJlY3QoMCwgMCwgc2NhbGVkV2lkdGgsIHNjYWxlZEhlaWdodCk7XG4gICAgICBjdHguZHJhd0ltYWdlKFxuICAgICAgICBiaXRtYXAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIGJpdG1hcC53aWR0aCxcbiAgICAgICAgYml0bWFwLmhlaWdodCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgc2NhbGVkV2lkdGgsXG4gICAgICAgIHNjYWxlZEhlaWdodFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgaW1hZ2VEYXRhID0gbnVsbDtcbiAgICBpZiAoY3JlYXRlSW1hZ2VEYXRhKSB7XG4gICAgICBsZXQgZGF0YVdpZHRoLCBkYXRhSGVpZ2h0O1xuICAgICAgaWYgKFxuICAgICAgICBvdXRwdXRTY2FsZS5zeW1tZXRyaWMgJiZcbiAgICAgICAgYml0bWFwLndpZHRoIDwgbWF4RGF0YURpbWVuc2lvbiAmJlxuICAgICAgICBiaXRtYXAuaGVpZ2h0IDwgbWF4RGF0YURpbWVuc2lvblxuICAgICAgKSB7XG4gICAgICAgIGRhdGFXaWR0aCA9IGJpdG1hcC53aWR0aDtcbiAgICAgICAgZGF0YUhlaWdodCA9IGJpdG1hcC5oZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaXRtYXAgPSB0aGlzLiNiaXRtYXA7XG4gICAgICAgIGlmIChiaXRtYXBXaWR0aCA+IG1heERhdGFEaW1lbnNpb24gfHwgYml0bWFwSGVpZ2h0ID4gbWF4RGF0YURpbWVuc2lvbikge1xuICAgICAgICAgIGNvbnN0IHJhdGlvID0gTWF0aC5taW4oXG4gICAgICAgICAgICBtYXhEYXRhRGltZW5zaW9uIC8gYml0bWFwV2lkdGgsXG4gICAgICAgICAgICBtYXhEYXRhRGltZW5zaW9uIC8gYml0bWFwSGVpZ2h0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBkYXRhV2lkdGggPSBNYXRoLmZsb29yKGJpdG1hcFdpZHRoICogcmF0aW8pO1xuICAgICAgICAgIGRhdGFIZWlnaHQgPSBNYXRoLmZsb29yKGJpdG1hcEhlaWdodCAqIHJhdGlvKTtcblxuICAgICAgICAgIGlmICghdGhpcy4jaXNTdmcpIHtcbiAgICAgICAgICAgIGJpdG1hcCA9IHRoaXMuI3NjYWxlQml0bWFwKGRhdGFXaWR0aCwgZGF0YUhlaWdodCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMoZGF0YVdpZHRoLCBkYXRhSGVpZ2h0KTtcbiAgICAgIGNvbnN0IG9mZnNjcmVlbkN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KFwiMmRcIiwge1xuICAgICAgICB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIG9mZnNjcmVlbkN0eC5kcmF3SW1hZ2UoXG4gICAgICAgIGJpdG1hcCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgYml0bWFwLndpZHRoLFxuICAgICAgICBiaXRtYXAuaGVpZ2h0LFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICBkYXRhV2lkdGgsXG4gICAgICAgIGRhdGFIZWlnaHRcbiAgICAgICk7XG4gICAgICBpbWFnZURhdGEgPSB7XG4gICAgICAgIHdpZHRoOiBkYXRhV2lkdGgsXG4gICAgICAgIGhlaWdodDogZGF0YUhlaWdodCxcbiAgICAgICAgZGF0YTogb2Zmc2NyZWVuQ3R4LmdldEltYWdlRGF0YSgwLCAwLCBkYXRhV2lkdGgsIGRhdGFIZWlnaHQpLmRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IGNhbnZhcywgd2lkdGgsIGhlaWdodCwgaW1hZ2VEYXRhIH07XG4gIH1cblxuICAjc2NhbGVCaXRtYXAod2lkdGgsIGhlaWdodCkge1xuICAgIGNvbnN0IHsgd2lkdGg6IGJpdG1hcFdpZHRoLCBoZWlnaHQ6IGJpdG1hcEhlaWdodCB9ID0gdGhpcy4jYml0bWFwO1xuXG4gICAgbGV0IG5ld1dpZHRoID0gYml0bWFwV2lkdGg7XG4gICAgbGV0IG5ld0hlaWdodCA9IGJpdG1hcEhlaWdodDtcbiAgICBsZXQgYml0bWFwID0gdGhpcy4jYml0bWFwO1xuICAgIHdoaWxlIChuZXdXaWR0aCA+IDIgKiB3aWR0aCB8fCBuZXdIZWlnaHQgPiAyICogaGVpZ2h0KSB7XG4gICAgICBjb25zdCBwcmV2V2lkdGggPSBuZXdXaWR0aDtcbiAgICAgIGNvbnN0IHByZXZIZWlnaHQgPSBuZXdIZWlnaHQ7XG5cbiAgICAgIGlmIChuZXdXaWR0aCA+IDIgKiB3aWR0aCkge1xuICAgICAgICAvLyBTZWUgYnVnIDE4MjA1MTEgKFdpbmRvd3Mgc3BlY2lmaWMgYnVnKS5cbiAgICAgICAgLy8gVE9ETzogb25jZSB0aGUgYWJvdmUgYnVnIGlzIGZpeGVkIHdlIGNvdWxkIHJldmVydCB0bzpcbiAgICAgICAgLy8gbmV3V2lkdGggPSBNYXRoLmNlaWwobmV3V2lkdGggLyAyKTtcbiAgICAgICAgbmV3V2lkdGggPVxuICAgICAgICAgIG5ld1dpZHRoID49IDE2Mzg0XG4gICAgICAgICAgICA/IE1hdGguZmxvb3IobmV3V2lkdGggLyAyKSAtIDFcbiAgICAgICAgICAgIDogTWF0aC5jZWlsKG5ld1dpZHRoIC8gMik7XG4gICAgICB9XG4gICAgICBpZiAobmV3SGVpZ2h0ID4gMiAqIGhlaWdodCkge1xuICAgICAgICBuZXdIZWlnaHQgPVxuICAgICAgICAgIG5ld0hlaWdodCA+PSAxNjM4NFxuICAgICAgICAgICAgPyBNYXRoLmZsb29yKG5ld0hlaWdodCAvIDIpIC0gMVxuICAgICAgICAgICAgOiBNYXRoLmNlaWwobmV3SGVpZ2h0IC8gMik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMobmV3V2lkdGgsIG5ld0hlaWdodCk7XG4gICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgY3R4LmRyYXdJbWFnZShcbiAgICAgICAgYml0bWFwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICBwcmV2V2lkdGgsXG4gICAgICAgIHByZXZIZWlnaHQsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIG5ld1dpZHRoLFxuICAgICAgICBuZXdIZWlnaHRcbiAgICAgICk7XG4gICAgICBiaXRtYXAgPSBvZmZzY3JlZW4udHJhbnNmZXJUb0ltYWdlQml0bWFwKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJpdG1hcDtcbiAgfVxuXG4gICNkcmF3Qml0bWFwKCkge1xuICAgIGNvbnN0IFtwYXJlbnRXaWR0aCwgcGFyZW50SGVpZ2h0XSA9IHRoaXMucGFyZW50RGltZW5zaW9ucztcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXM7XG4gICAgY29uc3Qgb3V0cHV0U2NhbGUgPSBuZXcgT3V0cHV0U2NhbGUoKTtcbiAgICBjb25zdCBzY2FsZWRXaWR0aCA9IE1hdGguY2VpbCh3aWR0aCAqIHBhcmVudFdpZHRoICogb3V0cHV0U2NhbGUuc3gpO1xuICAgIGNvbnN0IHNjYWxlZEhlaWdodCA9IE1hdGguY2VpbChoZWlnaHQgKiBwYXJlbnRIZWlnaHQgKiBvdXRwdXRTY2FsZS5zeSk7XG4gICAgY29uc3QgY2FudmFzID0gdGhpcy4jY2FudmFzO1xuXG4gICAgaWYgKFxuICAgICAgIWNhbnZhcyB8fFxuICAgICAgKGNhbnZhcy53aWR0aCA9PT0gc2NhbGVkV2lkdGggJiYgY2FudmFzLmhlaWdodCA9PT0gc2NhbGVkSGVpZ2h0KVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNhbnZhcy53aWR0aCA9IHNjYWxlZFdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBzY2FsZWRIZWlnaHQ7XG5cbiAgICBjb25zdCBiaXRtYXAgPSB0aGlzLiNpc1N2Z1xuICAgICAgPyB0aGlzLiNiaXRtYXBcbiAgICAgIDogdGhpcy4jc2NhbGVCaXRtYXAoc2NhbGVkV2lkdGgsIHNjYWxlZEhlaWdodCk7XG5cbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGN0eC5maWx0ZXIgPSB0aGlzLl91aU1hbmFnZXIuaGNtRmlsdGVyO1xuICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICBiaXRtYXAsXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIGJpdG1hcC53aWR0aCxcbiAgICAgIGJpdG1hcC5oZWlnaHQsXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIHNjYWxlZFdpZHRoLFxuICAgICAgc2NhbGVkSGVpZ2h0XG4gICAgKTtcbiAgfVxuXG4gICNzZXJpYWxpemVCaXRtYXAodG9VcmwpIHtcbiAgICBpZiAodG9VcmwpIHtcbiAgICAgIGlmICh0aGlzLiNpc1N2Zykge1xuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLl91aU1hbmFnZXIuaW1hZ2VNYW5hZ2VyLmdldFN2Z1VybCh0aGlzLiNiaXRtYXBJZCk7XG4gICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBXZSBjb252ZXJ0IHRvIGEgZGF0YSB1cmwgYmVjYXVzZSBpdCdzIHN5bmMgYW5kIHRoZSB1cmwgY2FuIGxpdmUgaW4gdGhlXG4gICAgICAvLyBjbGlwYm9hcmQuXG4gICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgKHsgd2lkdGg6IGNhbnZhcy53aWR0aCwgaGVpZ2h0OiBjYW52YXMuaGVpZ2h0IH0gPSB0aGlzLiNiaXRtYXApO1xuICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy4jYml0bWFwLCAwLCAwKTtcblxuICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jaXNTdmcpIHtcbiAgICAgIGNvbnN0IFtwYWdlV2lkdGgsIHBhZ2VIZWlnaHRdID0gdGhpcy5wYWdlRGltZW5zaW9ucztcbiAgICAgIC8vIE11bHRpcGx5IGJ5IFBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUUyBpbiBvcmRlciB0byBpbmNyZWFzZSB0aGVcbiAgICAgIC8vIGltYWdlIHJlc29sdXRpb24gd2hlbiByYXN0ZXJpemluZyBpdC5cbiAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChcbiAgICAgICAgdGhpcy53aWR0aCAqIHBhZ2VXaWR0aCAqIFBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUU1xuICAgICAgKTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgucm91bmQoXG4gICAgICAgIHRoaXMuaGVpZ2h0ICogcGFnZUhlaWdodCAqIFBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUU1xuICAgICAgKTtcbiAgICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsIGhlaWdodCk7XG4gICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgY3R4LmRyYXdJbWFnZShcbiAgICAgICAgdGhpcy4jYml0bWFwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLiNiaXRtYXAud2lkdGgsXG4gICAgICAgIHRoaXMuI2JpdG1hcC5oZWlnaHQsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHRcbiAgICAgICk7XG4gICAgICByZXR1cm4gb2Zmc2NyZWVuLnRyYW5zZmVyVG9JbWFnZUJpdG1hcCgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHJ1Y3R1cmVkQ2xvbmUodGhpcy4jYml0bWFwKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoZGF0YSwgcGFyZW50LCB1aU1hbmFnZXIpIHtcbiAgICBsZXQgaW5pdGlhbERhdGEgPSBudWxsO1xuICAgIGxldCBtaXNzaW5nQ2FudmFzID0gZmFsc2U7XG4gICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBTdGFtcEFubm90YXRpb25FbGVtZW50KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGRhdGE6IHsgcmVjdCwgcm90YXRpb24sIGlkLCBzdHJ1Y3RQYXJlbnQsIHBvcHVwUmVmIH0sXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgcGFnZTogeyBwYWdlTnVtYmVyIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGNhbnZhcyxcbiAgICAgIH0gPSBkYXRhO1xuICAgICAgbGV0IGJpdG1hcElkLCBiaXRtYXA7XG4gICAgICBpZiAoY2FudmFzKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhLmNhbnZhcztcbiAgICAgICAgKHsgaWQ6IGJpdG1hcElkLCBiaXRtYXAgfSA9IHVpTWFuYWdlci5pbWFnZU1hbmFnZXIuZ2V0RnJvbUNhbnZhcyhcbiAgICAgICAgICBjb250YWluZXIuaWQsXG4gICAgICAgICAgY2FudmFzXG4gICAgICAgICkpO1xuICAgICAgICBjYW52YXMucmVtb3ZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtaXNzaW5nQ2FudmFzID0gdHJ1ZTtcbiAgICAgICAgZGF0YS5faGFzTm9DYW52YXMgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBXaGVuIHN3aXRjaGluZyB0byBlZGl0IG1vZGUsIHdlIHdhaXQgZm9yIHRoZSBzdHJ1Y3R1cmUgdHJlZSB0byBiZVxuICAgICAgLy8gcmVhZHkgKHNlZSBwZGZfdmlld2VyLmpzKSwgc28gaXQncyBmaW5lIHRvIHVzZSBnZXRBcmlhQXR0cmlidXRlc1N5bmMuXG4gICAgICBjb25zdCBhbHRUZXh0ID1cbiAgICAgICAgKFxuICAgICAgICAgIGF3YWl0IHBhcmVudC5fc3RydWN0VHJlZS5nZXRBcmlhQXR0cmlidXRlcyhgJHtBbm5vdGF0aW9uUHJlZml4fSR7aWR9YClcbiAgICAgICAgKT8uZ2V0KFwiYXJpYS1sYWJlbFwiKSB8fCBcIlwiO1xuXG4gICAgICBpbml0aWFsRGF0YSA9IGRhdGEgPSB7XG4gICAgICAgIGFubm90YXRpb25UeXBlOiBBbm5vdGF0aW9uRWRpdG9yVHlwZS5TVEFNUCxcbiAgICAgICAgYml0bWFwSWQsXG4gICAgICAgIGJpdG1hcCxcbiAgICAgICAgcGFnZUluZGV4OiBwYWdlTnVtYmVyIC0gMSxcbiAgICAgICAgcmVjdDogcmVjdC5zbGljZSgwKSxcbiAgICAgICAgcm90YXRpb24sXG4gICAgICAgIGlkLFxuICAgICAgICBkZWxldGVkOiBmYWxzZSxcbiAgICAgICAgYWNjZXNzaWJpbGl0eURhdGE6IHtcbiAgICAgICAgICBkZWNvcmF0aXZlOiBmYWxzZSxcbiAgICAgICAgICBhbHRUZXh0LFxuICAgICAgICB9LFxuICAgICAgICBpc1N2ZzogZmFsc2UsXG4gICAgICAgIHN0cnVjdFBhcmVudCxcbiAgICAgICAgcG9wdXBSZWYsXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBlZGl0b3IgPSBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShkYXRhLCBwYXJlbnQsIHVpTWFuYWdlcik7XG4gICAgY29uc3QgeyByZWN0LCBiaXRtYXAsIGJpdG1hcFVybCwgYml0bWFwSWQsIGlzU3ZnLCBhY2Nlc3NpYmlsaXR5RGF0YSB9ID1cbiAgICAgIGRhdGE7XG4gICAgaWYgKG1pc3NpbmdDYW52YXMpIHtcbiAgICAgIHVpTWFuYWdlci5hZGRNaXNzaW5nQ2FudmFzKGRhdGEuaWQsIGVkaXRvcik7XG4gICAgICBlZGl0b3IuI21pc3NpbmdDYW52YXMgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoYml0bWFwSWQgJiYgdWlNYW5hZ2VyLmltYWdlTWFuYWdlci5pc1ZhbGlkSWQoYml0bWFwSWQpKSB7XG4gICAgICBlZGl0b3IuI2JpdG1hcElkID0gYml0bWFwSWQ7XG4gICAgICBpZiAoYml0bWFwKSB7XG4gICAgICAgIGVkaXRvci4jYml0bWFwID0gYml0bWFwO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlZGl0b3IuI2JpdG1hcFVybCA9IGJpdG1hcFVybDtcbiAgICB9XG4gICAgZWRpdG9yLiNpc1N2ZyA9IGlzU3ZnO1xuXG4gICAgY29uc3QgW3BhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHRdID0gZWRpdG9yLnBhZ2VEaW1lbnNpb25zO1xuICAgIGVkaXRvci53aWR0aCA9IChyZWN0WzJdIC0gcmVjdFswXSkgLyBwYXJlbnRXaWR0aDtcbiAgICBlZGl0b3IuaGVpZ2h0ID0gKHJlY3RbM10gLSByZWN0WzFdKSAvIHBhcmVudEhlaWdodDtcblxuICAgIGVkaXRvci5hbm5vdGF0aW9uRWxlbWVudElkID0gZGF0YS5pZCB8fCBudWxsO1xuICAgIGlmIChhY2Nlc3NpYmlsaXR5RGF0YSkge1xuICAgICAgZWRpdG9yLmFsdFRleHREYXRhID0gYWNjZXNzaWJpbGl0eURhdGE7XG4gICAgfVxuICAgIGVkaXRvci5faW5pdGlhbERhdGEgPSBpbml0aWFsRGF0YTtcbiAgICAvLyBObyBuZWVkIHRvIGJlIGFkZCBpbiB0aGUgdW5kbyBzdGFjayBpZiB0aGUgZWRpdG9yIGlzIGNyZWF0ZWQgZnJvbSBhblxuICAgIC8vIGV4aXN0aW5nIG9uZS5cbiAgICBlZGl0b3IuI2hhc0JlZW5BZGRlZEluVW5kb1N0YWNrID0gISFpbml0aWFsRGF0YTtcblxuICAgIHJldHVybiBlZGl0b3I7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc2VyaWFsaXplKGlzRm9yQ29weWluZyA9IGZhbHNlLCBjb250ZXh0ID0gbnVsbCkge1xuICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGVsZXRlZCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplRGVsZXRlZCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSB7XG4gICAgICBhbm5vdGF0aW9uVHlwZTogQW5ub3RhdGlvbkVkaXRvclR5cGUuU1RBTVAsXG4gICAgICBiaXRtYXBJZDogdGhpcy4jYml0bWFwSWQsXG4gICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4LFxuICAgICAgcmVjdDogdGhpcy5nZXRSZWN0KDAsIDApLFxuICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXG4gICAgICBpc1N2ZzogdGhpcy4jaXNTdmcsXG4gICAgICBzdHJ1Y3RUcmVlUGFyZW50SWQ6IHRoaXMuX3N0cnVjdFRyZWVQYXJlbnRJZCxcbiAgICB9O1xuXG4gICAgaWYgKGlzRm9yQ29weWluZykge1xuICAgICAgLy8gV2UgZG9uJ3Qga25vdyB3aGF0J3MgdGhlIGZpbmFsIGRlc3RpbmF0aW9uICh0aGlzIHBkZiBvciBhbm90aGVyIG9uZSlcbiAgICAgIC8vIG9mIHRoaXMgYW5ub3RhdGlvbiBhbmQgdGhlIGNsaXBib2FyZCBkb2Vzbid0IHN1cHBvcnQgSW1hZ2VCaXRtYXBzLFxuICAgICAgLy8gaGVuY2Ugd2Ugc2VyaWFsaXplIHRoZSBiaXRtYXAgdG8gYSBkYXRhIHVybC5cbiAgICAgIHNlcmlhbGl6ZWQuYml0bWFwVXJsID0gdGhpcy4jc2VyaWFsaXplQml0bWFwKC8qIHRvVXJsID0gKi8gdHJ1ZSk7XG4gICAgICBzZXJpYWxpemVkLmFjY2Vzc2liaWxpdHlEYXRhID0gdGhpcy5zZXJpYWxpemVBbHRUZXh0KHRydWUpO1xuICAgICAgc2VyaWFsaXplZC5pc0NvcHkgPSB0cnVlO1xuICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgeyBkZWNvcmF0aXZlLCBhbHRUZXh0IH0gPSB0aGlzLnNlcmlhbGl6ZUFsdFRleHQoZmFsc2UpO1xuICAgIGlmICghZGVjb3JhdGl2ZSAmJiBhbHRUZXh0KSB7XG4gICAgICBzZXJpYWxpemVkLmFjY2Vzc2liaWxpdHlEYXRhID0geyB0eXBlOiBcIkZpZ3VyZVwiLCBhbHQ6IGFsdFRleHQgfTtcbiAgICB9XG4gICAgaWYgKHRoaXMuYW5ub3RhdGlvbkVsZW1lbnRJZCkge1xuICAgICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuI2hhc0VsZW1lbnRDaGFuZ2VkKHNlcmlhbGl6ZWQpO1xuICAgICAgaWYgKGNoYW5nZXMuaXNTYW1lKSB7XG4gICAgICAgIC8vIE5vdGhpbmcgaGFzIGJlZW4gY2hhbmdlZC5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoY2hhbmdlcy5pc1NhbWVBbHRUZXh0KSB7XG4gICAgICAgIGRlbGV0ZSBzZXJpYWxpemVkLmFjY2Vzc2liaWxpdHlEYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VyaWFsaXplZC5hY2Nlc3NpYmlsaXR5RGF0YS5zdHJ1Y3RQYXJlbnQgPVxuICAgICAgICAgIHRoaXMuX2luaXRpYWxEYXRhLnN0cnVjdFBhcmVudCA/PyAtMTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2VyaWFsaXplZC5pZCA9IHRoaXMuYW5ub3RhdGlvbkVsZW1lbnRJZDtcblxuICAgIGlmIChjb250ZXh0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gc2VyaWFsaXplZDtcbiAgICB9XG5cbiAgICBjb250ZXh0LnN0YW1wcyB8fD0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGFyZWEgPSB0aGlzLiNpc1N2Z1xuICAgICAgPyAoc2VyaWFsaXplZC5yZWN0WzJdIC0gc2VyaWFsaXplZC5yZWN0WzBdKSAqXG4gICAgICAgIChzZXJpYWxpemVkLnJlY3RbM10gLSBzZXJpYWxpemVkLnJlY3RbMV0pXG4gICAgICA6IG51bGw7XG4gICAgaWYgKCFjb250ZXh0LnN0YW1wcy5oYXModGhpcy4jYml0bWFwSWQpKSB7XG4gICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGhhdmUgbXVsdGlwbGUgY29waWVzIG9mIHRoZSBzYW1lIGJpdG1hcCBpbiB0aGVcbiAgICAgIC8vIGFubm90YXRpb25NYXAsIGhlbmNlIHdlIG9ubHkgYWRkIHRoZSBiaXRtYXAgdGhlIGZpcnN0IHRpbWUgd2UgbWVldCBpdC5cbiAgICAgIGNvbnRleHQuc3RhbXBzLnNldCh0aGlzLiNiaXRtYXBJZCwgeyBhcmVhLCBzZXJpYWxpemVkIH0pO1xuICAgICAgc2VyaWFsaXplZC5iaXRtYXAgPSB0aGlzLiNzZXJpYWxpemVCaXRtYXAoLyogdG9VcmwgPSAqLyBmYWxzZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLiNpc1N2Zykge1xuICAgICAgLy8gSWYgd2UgaGF2ZSBtdWx0aXBsZSBjb3BpZXMgb2YgdGhlIHNhbWUgc3ZnIGJ1dCB3aXRoIGRpZmZlcmVudCBzaXplcyxcbiAgICAgIC8vIHRoZW4gd2Ugd2FudCB0byBrZWVwIHRoZSBiaWdnZXN0IG9uZS5cbiAgICAgIGNvbnN0IHByZXZEYXRhID0gY29udGV4dC5zdGFtcHMuZ2V0KHRoaXMuI2JpdG1hcElkKTtcbiAgICAgIGlmIChhcmVhID4gcHJldkRhdGEuYXJlYSkge1xuICAgICAgICBwcmV2RGF0YS5hcmVhID0gYXJlYTtcbiAgICAgICAgcHJldkRhdGEuc2VyaWFsaXplZC5iaXRtYXAuY2xvc2UoKTtcbiAgICAgICAgcHJldkRhdGEuc2VyaWFsaXplZC5iaXRtYXAgPSB0aGlzLiNzZXJpYWxpemVCaXRtYXAoLyogdG9VcmwgPSAqLyBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkO1xuICB9XG5cbiAgI2hhc0VsZW1lbnRDaGFuZ2VkKHNlcmlhbGl6ZWQpIHtcbiAgICBjb25zdCB7XG4gICAgICBwYWdlSW5kZXgsXG4gICAgICBhY2Nlc3NpYmlsaXR5RGF0YTogeyBhbHRUZXh0IH0sXG4gICAgfSA9IHRoaXMuX2luaXRpYWxEYXRhO1xuXG4gICAgY29uc3QgaXNTYW1lUGFnZUluZGV4ID0gc2VyaWFsaXplZC5wYWdlSW5kZXggPT09IHBhZ2VJbmRleDtcbiAgICBjb25zdCBpc1NhbWVBbHRUZXh0ID0gKHNlcmlhbGl6ZWQuYWNjZXNzaWJpbGl0eURhdGE/LmFsdCB8fCBcIlwiKSA9PT0gYWx0VGV4dDtcblxuICAgIHJldHVybiB7XG4gICAgICBpc1NhbWU6XG4gICAgICAgICF0aGlzLl9oYXNCZWVuTW92ZWQgJiZcbiAgICAgICAgIXRoaXMuX2hhc0JlZW5SZXNpemVkICYmXG4gICAgICAgIGlzU2FtZVBhZ2VJbmRleCAmJlxuICAgICAgICBpc1NhbWVBbHRUZXh0LFxuICAgICAgaXNTYW1lQWx0VGV4dCxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHJlbmRlckFubm90YXRpb25FbGVtZW50KGFubm90YXRpb24pIHtcbiAgICBhbm5vdGF0aW9uLnVwZGF0ZUVkaXRlZCh7XG4gICAgICByZWN0OiB0aGlzLmdldFJlY3QoMCwgMCksXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgeyBTdGFtcEVkaXRvciB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3Rvb2xzLmpzXCIpLkFubm90YXRpb25FZGl0b3JVSU1hbmFnZXJ9IEFubm90YXRpb25FZGl0b3JVSU1hbmFnZXIgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vZGlzcGxheV91dGlscy5qc1wiKS5QYWdlVmlld3BvcnR9IFBhZ2VWaWV3cG9ydCAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vLi4vLi4vd2ViL3RleHRfYWNjZXNzaWJpbGl0eS5qc1wiKS5UZXh0QWNjZXNzaWJpbGl0eU1hbmFnZXJ9IFRleHRBY2Nlc3NpYmlsaXR5TWFuYWdlciAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi8uLi8uLi93ZWIvaW50ZXJmYWNlc1wiKS5JTDEwbn0gSUwxMG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4uL2Fubm90YXRpb25fbGF5ZXIuanNcIikuQW5ub3RhdGlvbkxheWVyfSBBbm5vdGF0aW9uTGF5ZXIgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vZHJhd19sYXllci5qc1wiKS5EcmF3TGF5ZXJ9IERyYXdMYXllciAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vc3JjL2Rpc3BsYXkvc3RydWN0X3RyZWVfbGF5ZXJfYnVpbGRlci5qc1wiKS5TdHJ1Y3RUcmVlTGF5ZXJCdWlsZGVyfSBTdHJ1Y3RUcmVlTGF5ZXJCdWlsZGVyICovXG5cbmltcG9ydCB7IEFubm90YXRpb25FZGl0b3JUeXBlLCBGZWF0dXJlVGVzdCB9IGZyb20gXCIuLi8uLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgQW5ub3RhdGlvbkVkaXRvciB9IGZyb20gXCIuL2VkaXRvci5qc1wiO1xuaW1wb3J0IHsgRnJlZVRleHRFZGl0b3IgfSBmcm9tIFwiLi9mcmVldGV4dC5qc1wiO1xuaW1wb3J0IHsgSGlnaGxpZ2h0RWRpdG9yIH0gZnJvbSBcIi4vaGlnaGxpZ2h0LmpzXCI7XG5pbXBvcnQgeyBJbmtFZGl0b3IgfSBmcm9tIFwiLi9pbmsuanNcIjtcbmltcG9ydCB7IHNldExheWVyRGltZW5zaW9ucyB9IGZyb20gXCIuLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBTaWduYXR1cmVFZGl0b3IgfSBmcm9tIFwiLi9zaWduYXR1cmUuanNcIjtcbmltcG9ydCB7IFN0YW1wRWRpdG9yIH0gZnJvbSBcIi4vc3RhbXAuanNcIjtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbm5vdGF0aW9uRWRpdG9yTGF5ZXJPcHRpb25zXG4gKiBAcHJvcGVydHkge09iamVjdH0gbW9kZVxuICogQHByb3BlcnR5IHtIVE1MRGl2RWxlbWVudH0gZGl2XG4gKiBAcHJvcGVydHkge1N0cnVjdFRyZWVMYXllckJ1aWxkZXJ9IHN0cnVjdFRyZWVMYXllclxuICogQHByb3BlcnR5IHtBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyfSB1aU1hbmFnZXJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZW5hYmxlZFxuICogQHByb3BlcnR5IHtUZXh0QWNjZXNzaWJpbGl0eU1hbmFnZXJ9IFthY2Nlc3NpYmlsaXR5TWFuYWdlcl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwYWdlSW5kZXhcbiAqIEBwcm9wZXJ0eSB7SUwxMG59IGwxMG5cbiAqIEBwcm9wZXJ0eSB7QW5ub3RhdGlvbkxheWVyfSBbYW5ub3RhdGlvbkxheWVyXVxuICogQHByb3BlcnR5IHtIVE1MRGl2RWxlbWVudH0gW3RleHRMYXllcl1cbiAqIEBwcm9wZXJ0eSB7RHJhd0xheWVyfSBkcmF3TGF5ZXJcbiAqIEBwcm9wZXJ0eSB7UGFnZVZpZXdwb3J0fSB2aWV3cG9ydFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVuZGVyRWRpdG9yTGF5ZXJPcHRpb25zXG4gKiBAcHJvcGVydHkge1BhZ2VWaWV3cG9ydH0gdmlld3BvcnRcbiAqL1xuXG4vKipcbiAqIE1hbmFnZSBhbGwgdGhlIGRpZmZlcmVudCBlZGl0b3JzIG9uIGEgcGFnZS5cbiAqL1xuY2xhc3MgQW5ub3RhdGlvbkVkaXRvckxheWVyIHtcbiAgI2FjY2Vzc2liaWxpdHlNYW5hZ2VyO1xuXG4gICNhbGxvd0NsaWNrID0gZmFsc2U7XG5cbiAgI2Fubm90YXRpb25MYXllciA9IG51bGw7XG5cbiAgI2NsaWNrQUMgPSBudWxsO1xuXG4gICNlZGl0b3JGb2N1c1RpbWVvdXRJZCA9IG51bGw7XG5cbiAgI2VkaXRvcnMgPSBuZXcgTWFwKCk7XG5cbiAgI2hhZFBvaW50ZXJEb3duID0gZmFsc2U7XG5cbiAgI2lzRGlzYWJsaW5nID0gZmFsc2U7XG5cbiAgI2lzRW5hYmxpbmcgPSBmYWxzZTtcblxuICAjZHJhd2luZ0FDID0gbnVsbDtcblxuICAjZm9jdXNlZEVsZW1lbnQgPSBudWxsO1xuXG4gICN0ZXh0TGF5ZXIgPSBudWxsO1xuXG4gICN0ZXh0U2VsZWN0aW9uQUMgPSBudWxsO1xuXG4gICN1aU1hbmFnZXI7XG5cbiAgc3RhdGljIF9pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gIHN0YXRpYyAjZWRpdG9yVHlwZXMgPSBuZXcgTWFwKFxuICAgIFtcbiAgICAgIEZyZWVUZXh0RWRpdG9yLFxuICAgICAgSW5rRWRpdG9yLFxuICAgICAgU3RhbXBFZGl0b3IsXG4gICAgICBIaWdobGlnaHRFZGl0b3IsXG4gICAgICBTaWduYXR1cmVFZGl0b3IsXG4gICAgXS5tYXAodHlwZSA9PiBbdHlwZS5fZWRpdG9yVHlwZSwgdHlwZV0pXG4gICk7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkVkaXRvckxheWVyT3B0aW9uc30gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIHVpTWFuYWdlcixcbiAgICBwYWdlSW5kZXgsXG4gICAgZGl2LFxuICAgIHN0cnVjdFRyZWVMYXllcixcbiAgICBhY2Nlc3NpYmlsaXR5TWFuYWdlcixcbiAgICBhbm5vdGF0aW9uTGF5ZXIsXG4gICAgZHJhd0xheWVyLFxuICAgIHRleHRMYXllcixcbiAgICB2aWV3cG9ydCxcbiAgICBsMTBuLFxuICB9KSB7XG4gICAgY29uc3QgZWRpdG9yVHlwZXMgPSBbLi4uQW5ub3RhdGlvbkVkaXRvckxheWVyLiNlZGl0b3JUeXBlcy52YWx1ZXMoKV07XG4gICAgaWYgKCFBbm5vdGF0aW9uRWRpdG9yTGF5ZXIuX2luaXRpYWxpemVkKSB7XG4gICAgICBBbm5vdGF0aW9uRWRpdG9yTGF5ZXIuX2luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgZWRpdG9yVHlwZSBvZiBlZGl0b3JUeXBlcykge1xuICAgICAgICBlZGl0b3JUeXBlLmluaXRpYWxpemUobDEwbiwgdWlNYW5hZ2VyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdWlNYW5hZ2VyLnJlZ2lzdGVyRWRpdG9yVHlwZXMoZWRpdG9yVHlwZXMpO1xuXG4gICAgdGhpcy4jdWlNYW5hZ2VyID0gdWlNYW5hZ2VyO1xuICAgIHRoaXMucGFnZUluZGV4ID0gcGFnZUluZGV4O1xuICAgIHRoaXMuZGl2ID0gZGl2O1xuICAgIHRoaXMuI2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gYWNjZXNzaWJpbGl0eU1hbmFnZXI7XG4gICAgdGhpcy4jYW5ub3RhdGlvbkxheWVyID0gYW5ub3RhdGlvbkxheWVyO1xuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICB0aGlzLiN0ZXh0TGF5ZXIgPSB0ZXh0TGF5ZXI7XG4gICAgdGhpcy5kcmF3TGF5ZXIgPSBkcmF3TGF5ZXI7XG4gICAgdGhpcy5fc3RydWN0VHJlZSA9IHN0cnVjdFRyZWVMYXllcjtcblxuICAgIHRoaXMuI3VpTWFuYWdlci5hZGRMYXllcih0aGlzKTtcbiAgfVxuXG4gIGdldCBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLiNlZGl0b3JzLnNpemUgPT09IDA7XG4gIH1cblxuICBnZXQgaXNJbnZpc2libGUoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuaXNFbXB0eSAmJiB0aGlzLiN1aU1hbmFnZXIuZ2V0TW9kZSgpID09PSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5OT05FXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHRvb2xiYXIgaWYgaXQncyByZXF1aXJlZCB0byByZWZsZWN0IHRoZSB0b29sIGN1cnJlbnRseSB1c2VkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbW9kZVxuICAgKi9cbiAgdXBkYXRlVG9vbGJhcihtb2RlKSB7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLnVwZGF0ZVRvb2xiYXIobW9kZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1vZGUgaGFzIGNoYW5nZWQ6IGl0IG11c3QgYmUgdXBkYXRlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1vZGVcbiAgICovXG4gIHVwZGF0ZU1vZGUobW9kZSA9IHRoaXMuI3VpTWFuYWdlci5nZXRNb2RlKCkpIHtcbiAgICB0aGlzLiNjbGVhbnVwKCk7XG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlIEFubm90YXRpb25FZGl0b3JUeXBlLk5PTkU6XG4gICAgICAgIHRoaXMuZGlzYWJsZVRleHRTZWxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy50b2dnbGVQb2ludGVyRXZlbnRzKGZhbHNlKTtcbiAgICAgICAgdGhpcy50b2dnbGVBbm5vdGF0aW9uTGF5ZXJQb2ludGVyRXZlbnRzKHRydWUpO1xuICAgICAgICB0aGlzLmRpc2FibGVDbGljaygpO1xuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlIEFubm90YXRpb25FZGl0b3JUeXBlLklOSzpcbiAgICAgICAgdGhpcy5kaXNhYmxlVGV4dFNlbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnRvZ2dsZVBvaW50ZXJFdmVudHModHJ1ZSk7XG4gICAgICAgIHRoaXMuZW5hYmxlQ2xpY2soKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFubm90YXRpb25FZGl0b3JUeXBlLkhJR0hMSUdIVDpcbiAgICAgICAgdGhpcy5lbmFibGVUZXh0U2VsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9pbnRlckV2ZW50cyhmYWxzZSk7XG4gICAgICAgIHRoaXMuZGlzYWJsZUNsaWNrKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhpcy5kaXNhYmxlVGV4dFNlbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnRvZ2dsZVBvaW50ZXJFdmVudHModHJ1ZSk7XG4gICAgICAgIHRoaXMuZW5hYmxlQ2xpY2soKTtcbiAgICB9XG5cbiAgICB0aGlzLnRvZ2dsZUFubm90YXRpb25MYXllclBvaW50ZXJFdmVudHMoZmFsc2UpO1xuICAgIGNvbnN0IHsgY2xhc3NMaXN0IH0gPSB0aGlzLmRpdjtcbiAgICBmb3IgKGNvbnN0IGVkaXRvclR5cGUgb2YgQW5ub3RhdGlvbkVkaXRvckxheWVyLiNlZGl0b3JUeXBlcy52YWx1ZXMoKSkge1xuICAgICAgY2xhc3NMaXN0LnRvZ2dsZShcbiAgICAgICAgYCR7ZWRpdG9yVHlwZS5fdHlwZX1FZGl0aW5nYCxcbiAgICAgICAgbW9kZSA9PT0gZWRpdG9yVHlwZS5fZWRpdG9yVHlwZVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5kaXYuaGlkZGVuID0gZmFsc2U7XG4gIH1cblxuICBoYXNUZXh0TGF5ZXIodGV4dExheWVyKSB7XG4gICAgcmV0dXJuIHRleHRMYXllciA9PT0gdGhpcy4jdGV4dExheWVyPy5kaXY7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBlZGl0aW5nIHN0YXRlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzRWRpdGluZ1xuICAgKi9cbiAgc2V0RWRpdGluZ1N0YXRlKGlzRWRpdGluZykge1xuICAgIHRoaXMuI3VpTWFuYWdlci5zZXRFZGl0aW5nU3RhdGUoaXNFZGl0aW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgc29tZSBjb21tYW5kcyBpbnRvIHRoZSBDb21tYW5kTWFuYWdlciAodW5kby9yZWRvIHN0dWZmKS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKi9cbiAgYWRkQ29tbWFuZHMocGFyYW1zKSB7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLmFkZENvbW1hbmRzKHBhcmFtcyk7XG4gIH1cblxuICBjbGVhblVuZG9TdGFjayh0eXBlKSB7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLmNsZWFuVW5kb1N0YWNrKHR5cGUpO1xuICB9XG5cbiAgdG9nZ2xlRHJhd2luZyhlbmFibGVkID0gZmFsc2UpIHtcbiAgICB0aGlzLmRpdi5jbGFzc0xpc3QudG9nZ2xlKFwiZHJhd2luZ1wiLCAhZW5hYmxlZCk7XG4gIH1cblxuICB0b2dnbGVQb2ludGVyRXZlbnRzKGVuYWJsZWQgPSBmYWxzZSkge1xuICAgIHRoaXMuZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCAhZW5hYmxlZCk7XG4gIH1cblxuICB0b2dnbGVBbm5vdGF0aW9uTGF5ZXJQb2ludGVyRXZlbnRzKGVuYWJsZWQgPSBmYWxzZSkge1xuICAgIHRoaXMuI2Fubm90YXRpb25MYXllcj8uZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCAhZW5hYmxlZCk7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIHBvaW50ZXIgZXZlbnRzIG9uIHRoZSBtYWluIGRpdiBpbiBvcmRlciB0byBlbmFibGVcbiAgICogZWRpdG9yIGNyZWF0aW9uLlxuICAgKi9cbiAgYXN5bmMgZW5hYmxlKCkge1xuICAgIHRoaXMuI2lzRW5hYmxpbmcgPSB0cnVlO1xuICAgIHRoaXMuZGl2LnRhYkluZGV4ID0gMDtcbiAgICB0aGlzLnRvZ2dsZVBvaW50ZXJFdmVudHModHJ1ZSk7XG4gICAgY29uc3QgYW5ub3RhdGlvbkVsZW1lbnRJZHMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jZWRpdG9ycy52YWx1ZXMoKSkge1xuICAgICAgZWRpdG9yLmVuYWJsZUVkaXRpbmcoKTtcbiAgICAgIGVkaXRvci5zaG93KHRydWUpO1xuICAgICAgaWYgKGVkaXRvci5hbm5vdGF0aW9uRWxlbWVudElkKSB7XG4gICAgICAgIHRoaXMuI3VpTWFuYWdlci5yZW1vdmVDaGFuZ2VkRXhpc3RpbmdBbm5vdGF0aW9uKGVkaXRvcik7XG4gICAgICAgIGFubm90YXRpb25FbGVtZW50SWRzLmFkZChlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLiNhbm5vdGF0aW9uTGF5ZXIpIHtcbiAgICAgIHRoaXMuI2lzRW5hYmxpbmcgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlZGl0YWJsZXMgPSB0aGlzLiNhbm5vdGF0aW9uTGF5ZXIuZ2V0RWRpdGFibGVBbm5vdGF0aW9ucygpO1xuICAgIGZvciAoY29uc3QgZWRpdGFibGUgb2YgZWRpdGFibGVzKSB7XG4gICAgICAvLyBUaGUgZWxlbWVudCBtdXN0IGJlIGhpZGRlbiB3aGF0ZXZlciBpdHMgc3RhdGUgaXMuXG4gICAgICBlZGl0YWJsZS5oaWRlKCk7XG4gICAgICBpZiAodGhpcy4jdWlNYW5hZ2VyLmlzRGVsZXRlZEFubm90YXRpb25FbGVtZW50KGVkaXRhYmxlLmRhdGEuaWQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGFubm90YXRpb25FbGVtZW50SWRzLmhhcyhlZGl0YWJsZS5kYXRhLmlkKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVkaXRvciA9IGF3YWl0IHRoaXMuZGVzZXJpYWxpemUoZWRpdGFibGUpO1xuICAgICAgaWYgKCFlZGl0b3IpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB0aGlzLmFkZE9yUmVidWlsZChlZGl0b3IpO1xuICAgICAgZWRpdG9yLmVuYWJsZUVkaXRpbmcoKTtcbiAgICB9XG4gICAgdGhpcy4jaXNFbmFibGluZyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGUgZWRpdG9yIGNyZWF0aW9uLlxuICAgKi9cbiAgZGlzYWJsZSgpIHtcbiAgICB0aGlzLiNpc0Rpc2FibGluZyA9IHRydWU7XG4gICAgdGhpcy5kaXYudGFiSW5kZXggPSAtMTtcbiAgICB0aGlzLnRvZ2dsZVBvaW50ZXJFdmVudHMoZmFsc2UpO1xuICAgIGNvbnN0IGNoYW5nZWRBbm5vdGF0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCByZXNldEFubm90YXRpb25zID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIHRoaXMuI2VkaXRvcnMudmFsdWVzKCkpIHtcbiAgICAgIGVkaXRvci5kaXNhYmxlRWRpdGluZygpO1xuICAgICAgaWYgKCFlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChlZGl0b3Iuc2VyaWFsaXplKCkgIT09IG51bGwpIHtcbiAgICAgICAgY2hhbmdlZEFubm90YXRpb25zLnNldChlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZCwgZWRpdG9yKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldEFubm90YXRpb25zLnNldChlZGl0b3IuYW5ub3RhdGlvbkVsZW1lbnRJZCwgZWRpdG9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ2V0RWRpdGFibGVBbm5vdGF0aW9uKGVkaXRvci5hbm5vdGF0aW9uRWxlbWVudElkKT8uc2hvdygpO1xuICAgICAgZWRpdG9yLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLiNhbm5vdGF0aW9uTGF5ZXIpIHtcbiAgICAgIC8vIFNob3cgdGhlIGFubm90YXRpb25zIHRoYXQgd2VyZSBoaWRkZW4gaW4gZW5hYmxlKCkuXG4gICAgICBjb25zdCBlZGl0YWJsZXMgPSB0aGlzLiNhbm5vdGF0aW9uTGF5ZXIuZ2V0RWRpdGFibGVBbm5vdGF0aW9ucygpO1xuICAgICAgZm9yIChjb25zdCBlZGl0YWJsZSBvZiBlZGl0YWJsZXMpIHtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gZWRpdGFibGUuZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuI3VpTWFuYWdlci5pc0RlbGV0ZWRBbm5vdGF0aW9uRWxlbWVudChpZCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZWRpdG9yID0gcmVzZXRBbm5vdGF0aW9ucy5nZXQoaWQpO1xuICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgZWRpdG9yLnJlc2V0QW5ub3RhdGlvbkVsZW1lbnQoZWRpdGFibGUpO1xuICAgICAgICAgIGVkaXRvci5zaG93KGZhbHNlKTtcbiAgICAgICAgICBlZGl0YWJsZS5zaG93KCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBlZGl0b3IgPSBjaGFuZ2VkQW5ub3RhdGlvbnMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgIHRoaXMuI3VpTWFuYWdlci5hZGRDaGFuZ2VkRXhpc3RpbmdBbm5vdGF0aW9uKGVkaXRvcik7XG4gICAgICAgICAgaWYgKGVkaXRvci5yZW5kZXJBbm5vdGF0aW9uRWxlbWVudChlZGl0YWJsZSkpIHtcbiAgICAgICAgICAgIC8vIENvbnRlbnQgaGFzIGNoYW5nZWQsIHNvIHdlIG5lZWQgdG8gaGlkZSB0aGUgZWRpdG9yLlxuICAgICAgICAgICAgZWRpdG9yLnNob3coZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlZGl0YWJsZS5zaG93KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jY2xlYW51cCgpO1xuICAgIGlmICh0aGlzLmlzRW1wdHkpIHtcbiAgICAgIHRoaXMuZGl2LmhpZGRlbiA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHsgY2xhc3NMaXN0IH0gPSB0aGlzLmRpdjtcbiAgICBmb3IgKGNvbnN0IGVkaXRvclR5cGUgb2YgQW5ub3RhdGlvbkVkaXRvckxheWVyLiNlZGl0b3JUeXBlcy52YWx1ZXMoKSkge1xuICAgICAgY2xhc3NMaXN0LnJlbW92ZShgJHtlZGl0b3JUeXBlLl90eXBlfUVkaXRpbmdgKTtcbiAgICB9XG4gICAgdGhpcy5kaXNhYmxlVGV4dFNlbGVjdGlvbigpO1xuICAgIHRoaXMudG9nZ2xlQW5ub3RhdGlvbkxheWVyUG9pbnRlckV2ZW50cyh0cnVlKTtcblxuICAgIHRoaXMuI2lzRGlzYWJsaW5nID0gZmFsc2U7XG4gIH1cblxuICBnZXRFZGl0YWJsZUFubm90YXRpb24oaWQpIHtcbiAgICByZXR1cm4gdGhpcy4jYW5ub3RhdGlvbkxheWVyPy5nZXRFZGl0YWJsZUFubm90YXRpb24oaWQpIHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IGVkaXRvci5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIHNldEFjdGl2ZUVkaXRvcihlZGl0b3IpIHtcbiAgICBjb25zdCBjdXJyZW50QWN0aXZlID0gdGhpcy4jdWlNYW5hZ2VyLmdldEFjdGl2ZSgpO1xuICAgIGlmIChjdXJyZW50QWN0aXZlID09PSBlZGl0b3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLiN1aU1hbmFnZXIuc2V0QWN0aXZlRWRpdG9yKGVkaXRvcik7XG4gIH1cblxuICBlbmFibGVUZXh0U2VsZWN0aW9uKCkge1xuICAgIHRoaXMuZGl2LnRhYkluZGV4ID0gLTE7XG4gICAgaWYgKHRoaXMuI3RleHRMYXllcj8uZGl2ICYmICF0aGlzLiN0ZXh0U2VsZWN0aW9uQUMpIHtcbiAgICAgIHRoaXMuI3RleHRTZWxlY3Rpb25BQyA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgIGNvbnN0IHNpZ25hbCA9IHRoaXMuI3VpTWFuYWdlci5jb21iaW5lZFNpZ25hbCh0aGlzLiN0ZXh0U2VsZWN0aW9uQUMpO1xuXG4gICAgICB0aGlzLiN0ZXh0TGF5ZXIuZGl2LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwicG9pbnRlcmRvd25cIixcbiAgICAgICAgdGhpcy4jdGV4dExheWVyUG9pbnRlckRvd24uYmluZCh0aGlzKSxcbiAgICAgICAgeyBzaWduYWwgfVxuICAgICAgKTtcbiAgICAgIHRoaXMuI3RleHRMYXllci5kaXYuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodGluZ1wiKTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlVGV4dFNlbGVjdGlvbigpIHtcbiAgICB0aGlzLmRpdi50YWJJbmRleCA9IDA7XG4gICAgaWYgKHRoaXMuI3RleHRMYXllcj8uZGl2ICYmIHRoaXMuI3RleHRTZWxlY3Rpb25BQykge1xuICAgICAgdGhpcy4jdGV4dFNlbGVjdGlvbkFDLmFib3J0KCk7XG4gICAgICB0aGlzLiN0ZXh0U2VsZWN0aW9uQUMgPSBudWxsO1xuXG4gICAgICB0aGlzLiN0ZXh0TGF5ZXIuZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHRpbmdcIik7XG4gICAgfVxuICB9XG5cbiAgI3RleHRMYXllclBvaW50ZXJEb3duKGV2ZW50KSB7XG4gICAgLy8gVW5zZWxlY3QgYWxsIHRoZSBlZGl0b3JzIGluIG9yZGVyIHRvIGxldCB0aGUgdXNlciBzZWxlY3Qgc29tZSB0ZXh0XG4gICAgLy8gd2l0aG91dCBiZWluZyBhbm5veWVkIGJ5IGFuIGVkaXRvciB0b29sYmFyLlxuICAgIHRoaXMuI3VpTWFuYWdlci51bnNlbGVjdEFsbCgpO1xuICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcbiAgICBpZiAoXG4gICAgICB0YXJnZXQgPT09IHRoaXMuI3RleHRMYXllci5kaXYgfHxcbiAgICAgICgodGFyZ2V0LmdldEF0dHJpYnV0ZShcInJvbGVcIikgPT09IFwiaW1nXCIgfHxcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImVuZE9mQ29udGVudFwiKSkgJiZcbiAgICAgICAgdGhpcy4jdGV4dExheWVyLmRpdi5jb250YWlucyh0YXJnZXQpKVxuICAgICkge1xuICAgICAgY29uc3QgeyBpc01hYyB9ID0gRmVhdHVyZVRlc3QucGxhdGZvcm07XG4gICAgICBpZiAoZXZlbnQuYnV0dG9uICE9PSAwIHx8IChldmVudC5jdHJsS2V5ICYmIGlzTWFjKSkge1xuICAgICAgICAvLyBEbyBub3RoaW5nIG9uIHJpZ2h0IGNsaWNrLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLiN1aU1hbmFnZXIuc2hvd0FsbEVkaXRvcnMoXG4gICAgICAgIFwiaGlnaGxpZ2h0XCIsXG4gICAgICAgIHRydWUsXG4gICAgICAgIC8qIHVwZGF0ZUJ1dHRvbiA9ICovIHRydWVcbiAgICAgICk7XG4gICAgICB0aGlzLiN0ZXh0TGF5ZXIuZGl2LmNsYXNzTGlzdC5hZGQoXCJmcmVlXCIpO1xuICAgICAgdGhpcy50b2dnbGVEcmF3aW5nKCk7XG4gICAgICBIaWdobGlnaHRFZGl0b3Iuc3RhcnRIaWdobGlnaHRpbmcoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHRoaXMuI3VpTWFuYWdlci5kaXJlY3Rpb24gPT09IFwibHRyXCIsXG4gICAgICAgIHsgdGFyZ2V0OiB0aGlzLiN0ZXh0TGF5ZXIuZGl2LCB4OiBldmVudC54LCB5OiBldmVudC55IH1cbiAgICAgICk7XG4gICAgICB0aGlzLiN0ZXh0TGF5ZXIuZGl2LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwicG9pbnRlcnVwXCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLiN0ZXh0TGF5ZXIuZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJmcmVlXCIpO1xuICAgICAgICAgIHRoaXMudG9nZ2xlRHJhd2luZyh0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyBvbmNlOiB0cnVlLCBzaWduYWw6IHRoaXMuI3VpTWFuYWdlci5fc2lnbmFsIH1cbiAgICAgICk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIGVuYWJsZUNsaWNrKCkge1xuICAgIGlmICh0aGlzLiNjbGlja0FDKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI2NsaWNrQUMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3Qgc2lnbmFsID0gdGhpcy4jdWlNYW5hZ2VyLmNvbWJpbmVkU2lnbmFsKHRoaXMuI2NsaWNrQUMpO1xuXG4gICAgdGhpcy5kaXYuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMucG9pbnRlcmRvd24uYmluZCh0aGlzKSwge1xuICAgICAgc2lnbmFsLFxuICAgIH0pO1xuICAgIGNvbnN0IHBvaW50ZXJ1cCA9IHRoaXMucG9pbnRlcnVwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kaXYuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBwb2ludGVydXAsIHsgc2lnbmFsIH0pO1xuICAgIHRoaXMuZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIHBvaW50ZXJ1cCwgeyBzaWduYWwgfSk7XG4gIH1cblxuICBkaXNhYmxlQ2xpY2soKSB7XG4gICAgdGhpcy4jY2xpY2tBQz8uYWJvcnQoKTtcbiAgICB0aGlzLiNjbGlja0FDID0gbnVsbDtcbiAgfVxuXG4gIGF0dGFjaChlZGl0b3IpIHtcbiAgICB0aGlzLiNlZGl0b3JzLnNldChlZGl0b3IuaWQsIGVkaXRvcik7XG4gICAgY29uc3QgeyBhbm5vdGF0aW9uRWxlbWVudElkIH0gPSBlZGl0b3I7XG4gICAgaWYgKFxuICAgICAgYW5ub3RhdGlvbkVsZW1lbnRJZCAmJlxuICAgICAgdGhpcy4jdWlNYW5hZ2VyLmlzRGVsZXRlZEFubm90YXRpb25FbGVtZW50KGFubm90YXRpb25FbGVtZW50SWQpXG4gICAgKSB7XG4gICAgICB0aGlzLiN1aU1hbmFnZXIucmVtb3ZlRGVsZXRlZEFubm90YXRpb25FbGVtZW50KGVkaXRvcik7XG4gICAgfVxuICB9XG5cbiAgZGV0YWNoKGVkaXRvcikge1xuICAgIHRoaXMuI2VkaXRvcnMuZGVsZXRlKGVkaXRvci5pZCk7XG4gICAgdGhpcy4jYWNjZXNzaWJpbGl0eU1hbmFnZXI/LnJlbW92ZVBvaW50ZXJJblRleHRMYXllcihlZGl0b3IuY29udGVudERpdik7XG5cbiAgICBpZiAoIXRoaXMuI2lzRGlzYWJsaW5nICYmIGVkaXRvci5hbm5vdGF0aW9uRWxlbWVudElkKSB7XG4gICAgICB0aGlzLiN1aU1hbmFnZXIuYWRkRGVsZXRlZEFubm90YXRpb25FbGVtZW50KGVkaXRvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBlZGl0b3IuXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkVkaXRvcn0gZWRpdG9yXG4gICAqL1xuICByZW1vdmUoZWRpdG9yKSB7XG4gICAgdGhpcy5kZXRhY2goZWRpdG9yKTtcbiAgICB0aGlzLiN1aU1hbmFnZXIucmVtb3ZlRWRpdG9yKGVkaXRvcik7XG4gICAgZWRpdG9yLmRpdi5yZW1vdmUoKTtcbiAgICBlZGl0b3IuaXNBdHRhY2hlZFRvRE9NID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQW4gZWRpdG9yIGNhbiBoYXZlIGEgZGlmZmVyZW50IHBhcmVudCwgZm9yIGV4YW1wbGUgYWZ0ZXIgaGF2aW5nXG4gICAqIGJlaW5nIGRyYWdnZWQgYW5kIGRyb3BlZCBmcm9tIGEgcGFnZSB0byBhbm90aGVyLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgY2hhbmdlUGFyZW50KGVkaXRvcikge1xuICAgIGlmIChlZGl0b3IucGFyZW50ID09PSB0aGlzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVkaXRvci5wYXJlbnQgJiYgZWRpdG9yLmFubm90YXRpb25FbGVtZW50SWQpIHtcbiAgICAgIHRoaXMuI3VpTWFuYWdlci5hZGREZWxldGVkQW5ub3RhdGlvbkVsZW1lbnQoZWRpdG9yLmFubm90YXRpb25FbGVtZW50SWQpO1xuICAgICAgQW5ub3RhdGlvbkVkaXRvci5kZWxldGVBbm5vdGF0aW9uRWxlbWVudChlZGl0b3IpO1xuICAgICAgZWRpdG9yLmFubm90YXRpb25FbGVtZW50SWQgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuYXR0YWNoKGVkaXRvcik7XG4gICAgZWRpdG9yLnBhcmVudD8uZGV0YWNoKGVkaXRvcik7XG4gICAgZWRpdG9yLnNldFBhcmVudCh0aGlzKTtcbiAgICBpZiAoZWRpdG9yLmRpdiAmJiBlZGl0b3IuaXNBdHRhY2hlZFRvRE9NKSB7XG4gICAgICBlZGl0b3IuZGl2LnJlbW92ZSgpO1xuICAgICAgdGhpcy5kaXYuYXBwZW5kKGVkaXRvci5kaXYpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBuZXcgZWRpdG9yIGluIHRoZSBjdXJyZW50IHZpZXcuXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkVkaXRvcn0gZWRpdG9yXG4gICAqL1xuICBhZGQoZWRpdG9yKSB7XG4gICAgaWYgKGVkaXRvci5wYXJlbnQgPT09IHRoaXMgJiYgZWRpdG9yLmlzQXR0YWNoZWRUb0RPTSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNoYW5nZVBhcmVudChlZGl0b3IpO1xuICAgIHRoaXMuI3VpTWFuYWdlci5hZGRFZGl0b3IoZWRpdG9yKTtcbiAgICB0aGlzLmF0dGFjaChlZGl0b3IpO1xuXG4gICAgaWYgKCFlZGl0b3IuaXNBdHRhY2hlZFRvRE9NKSB7XG4gICAgICBjb25zdCBkaXYgPSBlZGl0b3IucmVuZGVyKCk7XG4gICAgICB0aGlzLmRpdi5hcHBlbmQoZGl2KTtcbiAgICAgIGVkaXRvci5pc0F0dGFjaGVkVG9ET00gPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIFRoZSBlZGl0b3Igd2lsbCBiZSBjb3JyZWN0bHkgbW92ZWQgaW50byB0aGUgRE9NIChzZWUgZml4QW5kU2V0UG9zaXRpb24pLlxuICAgIGVkaXRvci5maXhBbmRTZXRQb3NpdGlvbigpO1xuICAgIGVkaXRvci5vbmNlQWRkZWQoLyogZm9jdXMgPSAqLyAhdGhpcy4jaXNFbmFibGluZyk7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLmFkZFRvQW5ub3RhdGlvblN0b3JhZ2UoZWRpdG9yKTtcbiAgICBlZGl0b3IuX3JlcG9ydFRlbGVtZXRyeShlZGl0b3IudGVsZW1ldHJ5SW5pdGlhbERhdGEpO1xuICB9XG5cbiAgbW92ZUVkaXRvckluRE9NKGVkaXRvcikge1xuICAgIGlmICghZWRpdG9yLmlzQXR0YWNoZWRUb0RPTSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgYWN0aXZlRWxlbWVudCB9ID0gZG9jdW1lbnQ7XG4gICAgaWYgKGVkaXRvci5kaXYuY29udGFpbnMoYWN0aXZlRWxlbWVudCkgJiYgIXRoaXMuI2VkaXRvckZvY3VzVGltZW91dElkKSB7XG4gICAgICAvLyBXaGVuIHRoZSBkaXYgaXMgbW92ZWQgaW4gdGhlIERPTSB0aGUgZm9jdXMgY2FuIG1vdmUgc29tZXdoZXJlIGVsc2UsXG4gICAgICAvLyBzbyB3ZSB3YW50IHRvIGJlIHN1cmUgdGhhdCB0aGUgZm9jdXMgd2lsbCBzdGF5IG9uIHRoZSBlZGl0b3IgYnV0IHdlXG4gICAgICAvLyBkb24ndCB3YW50IHRvIGNhbGwgYW55IGZvY3VzIGNhbGxiYWNrcywgaGVuY2Ugd2UgZGlzYWJsZSB0aGVtIGFuZCBvbmx5XG4gICAgICAvLyByZS1lbmFibGUgdGhlbSB3aGVuIHRoZSBlZGl0b3IgaGFzIHRoZSBmb2N1cy5cbiAgICAgIGVkaXRvci5fZm9jdXNFdmVudHNBbGxvd2VkID0gZmFsc2U7XG4gICAgICB0aGlzLiNlZGl0b3JGb2N1c1RpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLiNlZGl0b3JGb2N1c1RpbWVvdXRJZCA9IG51bGw7XG4gICAgICAgIGlmICghZWRpdG9yLmRpdi5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICAgIGVkaXRvci5kaXYuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgIFwiZm9jdXNpblwiLFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICBlZGl0b3IuX2ZvY3VzRXZlbnRzQWxsb3dlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBvbmNlOiB0cnVlLCBzaWduYWw6IHRoaXMuI3VpTWFuYWdlci5fc2lnbmFsIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIGFjdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlZGl0b3IuX2ZvY3VzRXZlbnRzQWxsb3dlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIDApO1xuICAgIH1cblxuICAgIGVkaXRvci5fc3RydWN0VHJlZVBhcmVudElkID0gdGhpcy4jYWNjZXNzaWJpbGl0eU1hbmFnZXI/Lm1vdmVFbGVtZW50SW5ET00oXG4gICAgICB0aGlzLmRpdixcbiAgICAgIGVkaXRvci5kaXYsXG4gICAgICBlZGl0b3IuY29udGVudERpdixcbiAgICAgIC8qIGlzUmVtb3ZhYmxlID0gKi8gdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG9yIHJlYnVpbGQgZGVwZW5kaW5nIGlmIGl0IGhhcyBiZWVuIHJlbW92ZWQgb3Igbm90LlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgYWRkT3JSZWJ1aWxkKGVkaXRvcikge1xuICAgIGlmIChlZGl0b3IubmVlZHNUb0JlUmVidWlsdCgpKSB7XG4gICAgICBlZGl0b3IucGFyZW50IHx8PSB0aGlzO1xuICAgICAgZWRpdG9yLnJlYnVpbGQoKTtcbiAgICAgIGVkaXRvci5zaG93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkKGVkaXRvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBlZGl0b3IgYW5kIG1ha2UgdGhpcyBhZGRpdGlvbiB1bmRvYWJsZS5cbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uRWRpdG9yfSBlZGl0b3JcbiAgICovXG4gIGFkZFVuZG9hYmxlRWRpdG9yKGVkaXRvcikge1xuICAgIGNvbnN0IGNtZCA9ICgpID0+IGVkaXRvci5fdWlNYW5hZ2VyLnJlYnVpbGQoZWRpdG9yKTtcbiAgICBjb25zdCB1bmRvID0gKCkgPT4ge1xuICAgICAgZWRpdG9yLnJlbW92ZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLmFkZENvbW1hbmRzKHsgY21kLCB1bmRvLCBtdXN0RXhlYzogZmFsc2UgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIGlkIGZvciBhbiBlZGl0b3IuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXROZXh0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3VpTWFuYWdlci5nZXRJZCgpO1xuICB9XG5cbiAgZ2V0ICNjdXJyZW50RWRpdG9yVHlwZSgpIHtcbiAgICByZXR1cm4gQW5ub3RhdGlvbkVkaXRvckxheWVyLiNlZGl0b3JUeXBlcy5nZXQodGhpcy4jdWlNYW5hZ2VyLmdldE1vZGUoKSk7XG4gIH1cblxuICBjb21iaW5lZFNpZ25hbChhYykge1xuICAgIHJldHVybiB0aGlzLiN1aU1hbmFnZXIuY29tYmluZWRTaWduYWwoYWMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBlZGl0b3JcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB7QW5ub3RhdGlvbkVkaXRvcn1cbiAgICovXG4gICNjcmVhdGVOZXdFZGl0b3IocGFyYW1zKSB7XG4gICAgY29uc3QgZWRpdG9yVHlwZSA9IHRoaXMuI2N1cnJlbnRFZGl0b3JUeXBlO1xuICAgIHJldHVybiBlZGl0b3JUeXBlID8gbmV3IGVkaXRvclR5cGUucHJvdG90eXBlLmNvbnN0cnVjdG9yKHBhcmFtcykgOiBudWxsO1xuICB9XG5cbiAgY2FuQ3JlYXRlTmV3RW1wdHlFZGl0b3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRFZGl0b3JUeXBlPy5jYW5DcmVhdGVOZXdFbXB0eUVkaXRvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhc3RlIHNvbWUgY29udGVudCBpbnRvIGEgbmV3IGVkaXRvci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1vZGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKi9cbiAgYXN5bmMgcGFzdGVFZGl0b3IobW9kZSwgcGFyYW1zKSB7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLnVwZGF0ZVRvb2xiYXIobW9kZSk7XG4gICAgYXdhaXQgdGhpcy4jdWlNYW5hZ2VyLnVwZGF0ZU1vZGUobW9kZSk7XG5cbiAgICBjb25zdCB7IG9mZnNldFgsIG9mZnNldFkgfSA9IHRoaXMuI2dldENlbnRlclBvaW50KCk7XG4gICAgY29uc3QgaWQgPSB0aGlzLmdldE5leHRJZCgpO1xuICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuI2NyZWF0ZU5ld0VkaXRvcih7XG4gICAgICBwYXJlbnQ6IHRoaXMsXG4gICAgICBpZCxcbiAgICAgIHg6IG9mZnNldFgsXG4gICAgICB5OiBvZmZzZXRZLFxuICAgICAgdWlNYW5hZ2VyOiB0aGlzLiN1aU1hbmFnZXIsXG4gICAgICBpc0NlbnRlcmVkOiB0cnVlLFxuICAgICAgLi4ucGFyYW1zLFxuICAgIH0pO1xuICAgIGlmIChlZGl0b3IpIHtcbiAgICAgIHRoaXMuYWRkKGVkaXRvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBlZGl0b3JcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICogQHJldHVybnMge0Fubm90YXRpb25FZGl0b3IgfCBudWxsfVxuICAgKi9cbiAgYXN5bmMgZGVzZXJpYWxpemUoZGF0YSkge1xuICAgIHJldHVybiAoXG4gICAgICAoYXdhaXQgQW5ub3RhdGlvbkVkaXRvckxheWVyLiNlZGl0b3JUeXBlc1xuICAgICAgICAuZ2V0KGRhdGEuYW5ub3RhdGlvblR5cGUgPz8gZGF0YS5hbm5vdGF0aW9uRWRpdG9yVHlwZSlcbiAgICAgICAgPy5kZXNlcmlhbGl6ZShkYXRhLCB0aGlzLCB0aGlzLiN1aU1hbmFnZXIpKSB8fCBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGFkZCBhIG5ldyBlZGl0b3IuXG4gICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBldmVudFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzQ2VudGVyZWRcbiAgICogQHBhcmFtIFtPYmplY3RdIGRhdGFcbiAgICogQHJldHVybnMge0Fubm90YXRpb25FZGl0b3J9XG4gICAqL1xuICBjcmVhdGVBbmRBZGROZXdFZGl0b3IoZXZlbnQsIGlzQ2VudGVyZWQsIGRhdGEgPSB7fSkge1xuICAgIGNvbnN0IGlkID0gdGhpcy5nZXROZXh0SWQoKTtcbiAgICBjb25zdCBlZGl0b3IgPSB0aGlzLiNjcmVhdGVOZXdFZGl0b3Ioe1xuICAgICAgcGFyZW50OiB0aGlzLFxuICAgICAgaWQsXG4gICAgICB4OiBldmVudC5vZmZzZXRYLFxuICAgICAgeTogZXZlbnQub2Zmc2V0WSxcbiAgICAgIHVpTWFuYWdlcjogdGhpcy4jdWlNYW5hZ2VyLFxuICAgICAgaXNDZW50ZXJlZCxcbiAgICAgIC4uLmRhdGEsXG4gICAgfSk7XG4gICAgaWYgKGVkaXRvcikge1xuICAgICAgdGhpcy5hZGQoZWRpdG9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWRpdG9yO1xuICB9XG5cbiAgI2dldENlbnRlclBvaW50KCkge1xuICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5kaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgdGxYID0gTWF0aC5tYXgoMCwgeCk7XG4gICAgY29uc3QgdGxZID0gTWF0aC5tYXgoMCwgeSk7XG4gICAgY29uc3QgYnJYID0gTWF0aC5taW4od2luZG93LmlubmVyV2lkdGgsIHggKyB3aWR0aCk7XG4gICAgY29uc3QgYnJZID0gTWF0aC5taW4od2luZG93LmlubmVySGVpZ2h0LCB5ICsgaGVpZ2h0KTtcbiAgICBjb25zdCBjZW50ZXJYID0gKHRsWCArIGJyWCkgLyAyIC0geDtcbiAgICBjb25zdCBjZW50ZXJZID0gKHRsWSArIGJyWSkgLyAyIC0geTtcbiAgICBjb25zdCBbb2Zmc2V0WCwgb2Zmc2V0WV0gPVxuICAgICAgdGhpcy52aWV3cG9ydC5yb3RhdGlvbiAlIDE4MCA9PT0gMFxuICAgICAgICA/IFtjZW50ZXJYLCBjZW50ZXJZXVxuICAgICAgICA6IFtjZW50ZXJZLCBjZW50ZXJYXTtcblxuICAgIHJldHVybiB7IG9mZnNldFgsIG9mZnNldFkgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGFkZCBhIG5ldyBlZGl0b3IuXG4gICAqL1xuICBhZGROZXdFZGl0b3IoZGF0YSA9IHt9KSB7XG4gICAgdGhpcy5jcmVhdGVBbmRBZGROZXdFZGl0b3IoXG4gICAgICB0aGlzLiNnZXRDZW50ZXJQb2ludCgpLFxuICAgICAgLyogaXNDZW50ZXJlZCA9ICovIHRydWUsXG4gICAgICBkYXRhXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGxhc3Qgc2VsZWN0ZWQgZWRpdG9yLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgc2V0U2VsZWN0ZWQoZWRpdG9yKSB7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLnNldFNlbGVjdGVkKGVkaXRvcik7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG9yIHJlbW92ZSBhbiBlZGl0b3IgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgdG9nZ2xlU2VsZWN0ZWQoZWRpdG9yKSB7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLnRvZ2dsZVNlbGVjdGVkKGVkaXRvcik7XG4gIH1cblxuICAvKipcbiAgICogVW5zZWxlY3QgYW4gZWRpdG9yLlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKi9cbiAgdW5zZWxlY3QoZWRpdG9yKSB7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLnVuc2VsZWN0KGVkaXRvcik7XG4gIH1cblxuICAvKipcbiAgICogUG9pbnRlcnVwIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gZXZlbnRcbiAgICovXG4gIHBvaW50ZXJ1cChldmVudCkge1xuICAgIGNvbnN0IHsgaXNNYWMgfSA9IEZlYXR1cmVUZXN0LnBsYXRmb3JtO1xuICAgIGlmIChldmVudC5idXR0b24gIT09IDAgfHwgKGV2ZW50LmN0cmxLZXkgJiYgaXNNYWMpKSB7XG4gICAgICAvLyBEb24ndCBjcmVhdGUgYW4gZWRpdG9yIG9uIHJpZ2h0IGNsaWNrLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC50YXJnZXQgIT09IHRoaXMuZGl2KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLiNoYWRQb2ludGVyRG93bikge1xuICAgICAgLy8gSXQgY2FuIGhhcHBlbiB3aGVuIHRoZSB1c2VyIHN0YXJ0cyBhIGRyYWcgaW5zaWRlIGEgdGV4dCBlZGl0b3JcbiAgICAgIC8vIGFuZCB0aGVuIHJlbGVhc2VzIHRoZSBtb3VzZSBidXR0b24gb3V0c2lkZSBvZiBpdC4gSW4gc3VjaCBhIGNhc2VcbiAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gY3JlYXRlIGEgbmV3IGVkaXRvciwgaGVuY2Ugd2UgY2hlY2sgdGhhdCBhIHBvaW50ZXJkb3duXG4gICAgICAvLyBvY2N1cnJlZCBvbiB0aGlzIGRpdiBwcmV2aW91c2x5LlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNoYWRQb2ludGVyRG93biA9IGZhbHNlO1xuXG4gICAgaWYgKFxuICAgICAgdGhpcy4jY3VycmVudEVkaXRvclR5cGU/LmlzRHJhd2VyICYmXG4gICAgICB0aGlzLiNjdXJyZW50RWRpdG9yVHlwZS5zdXBwb3J0TXVsdGlwbGVEcmF3aW5nc1xuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy4jYWxsb3dDbGljaykge1xuICAgICAgdGhpcy4jYWxsb3dDbGljayA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudE1vZGUgPSB0aGlzLiN1aU1hbmFnZXIuZ2V0TW9kZSgpO1xuICAgIGlmIChcbiAgICAgIGN1cnJlbnRNb2RlID09PSBBbm5vdGF0aW9uRWRpdG9yVHlwZS5TVEFNUCB8fFxuICAgICAgY3VycmVudE1vZGUgPT09IEFubm90YXRpb25FZGl0b3JUeXBlLlNJR05BVFVSRVxuICAgICkge1xuICAgICAgdGhpcy4jdWlNYW5hZ2VyLnVuc2VsZWN0QWxsKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVBbmRBZGROZXdFZGl0b3IoZXZlbnQsIC8qIGlzQ2VudGVyZWQgPSAqLyBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogUG9pbnRlcmRvd24gY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBldmVudFxuICAgKi9cbiAgcG9pbnRlcmRvd24oZXZlbnQpIHtcbiAgICBpZiAodGhpcy4jdWlNYW5hZ2VyLmdldE1vZGUoKSA9PT0gQW5ub3RhdGlvbkVkaXRvclR5cGUuSElHSExJR0hUKSB7XG4gICAgICB0aGlzLmVuYWJsZVRleHRTZWxlY3Rpb24oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuI2hhZFBvaW50ZXJEb3duKSB7XG4gICAgICAvLyBJdCdzIHBvc3NpYmxlIHRvIGhhdmUgYSBzZWNvbmQgcG9pbnRlcmRvd24gZXZlbnQgYmVmb3JlIGEgcG9pbnRlcnVwIG9uZVxuICAgICAgLy8gd2hlbiB0aGUgdXNlciBwdXRzIGEgZmluZ2VyIG9uIGEgdG91Y2hzY3JlZW4gYW5kIHRoZW4gYWRkIGEgc2Vjb25kIG9uZVxuICAgICAgLy8gdG8gc3RhcnQgYSBwaW5jaC10by16b29tIGdlc3R1cmUuXG4gICAgICAvLyBUaGF0IHNhaWQsIGluIGNhc2UgaXQncyBwb3NzaWJsZSB0byBoYXZlIHR3byBwb2ludGVyZG93biBldmVudHMgd2l0aFxuICAgICAgLy8gYSBtb3VzZSwgd2UgZG9uJ3Qgd2FudCB0byBjcmVhdGUgYSBuZXcgZWRpdG9yIGluIHN1Y2ggYSBjYXNlIGVpdGhlci5cbiAgICAgIHRoaXMuI2hhZFBvaW50ZXJEb3duID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgaXNNYWMgfSA9IEZlYXR1cmVUZXN0LnBsYXRmb3JtO1xuICAgIGlmIChldmVudC5idXR0b24gIT09IDAgfHwgKGV2ZW50LmN0cmxLZXkgJiYgaXNNYWMpKSB7XG4gICAgICAvLyBEbyBub3RoaW5nIG9uIHJpZ2h0IGNsaWNrLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC50YXJnZXQgIT09IHRoaXMuZGl2KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy4jaGFkUG9pbnRlckRvd24gPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuI2N1cnJlbnRFZGl0b3JUeXBlPy5pc0RyYXdlcikge1xuICAgICAgdGhpcy5zdGFydERyYXdpbmdTZXNzaW9uKGV2ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlZGl0b3IgPSB0aGlzLiN1aU1hbmFnZXIuZ2V0QWN0aXZlKCk7XG4gICAgdGhpcy4jYWxsb3dDbGljayA9ICFlZGl0b3IgfHwgZWRpdG9yLmlzRW1wdHkoKTtcbiAgfVxuXG4gIHN0YXJ0RHJhd2luZ1Nlc3Npb24oZXZlbnQpIHtcbiAgICB0aGlzLmRpdi5mb2N1cyh7XG4gICAgICBwcmV2ZW50U2Nyb2xsOiB0cnVlLFxuICAgIH0pO1xuICAgIGlmICh0aGlzLiNkcmF3aW5nQUMpIHtcbiAgICAgIHRoaXMuI2N1cnJlbnRFZGl0b3JUeXBlLnN0YXJ0RHJhd2luZyh0aGlzLCB0aGlzLiN1aU1hbmFnZXIsIGZhbHNlLCBldmVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy4jdWlNYW5hZ2VyLnNldEN1cnJlbnREcmF3aW5nU2Vzc2lvbih0aGlzKTtcbiAgICB0aGlzLiNkcmF3aW5nQUMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3Qgc2lnbmFsID0gdGhpcy4jdWlNYW5hZ2VyLmNvbWJpbmVkU2lnbmFsKHRoaXMuI2RyYXdpbmdBQyk7XG4gICAgdGhpcy5kaXYuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiYmx1clwiLFxuICAgICAgKHsgcmVsYXRlZFRhcmdldCB9KSA9PiB7XG4gICAgICAgIGlmIChyZWxhdGVkVGFyZ2V0ICYmICF0aGlzLmRpdi5jb250YWlucyhyZWxhdGVkVGFyZ2V0KSkge1xuICAgICAgICAgIHRoaXMuI2ZvY3VzZWRFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmNvbW1pdE9yUmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IHNpZ25hbCB9XG4gICAgKTtcbiAgICB0aGlzLiNjdXJyZW50RWRpdG9yVHlwZS5zdGFydERyYXdpbmcodGhpcywgdGhpcy4jdWlNYW5hZ2VyLCBmYWxzZSwgZXZlbnQpO1xuICB9XG5cbiAgcGF1c2Uob24pIHtcbiAgICBpZiAob24pIHtcbiAgICAgIGNvbnN0IHsgYWN0aXZlRWxlbWVudCB9ID0gZG9jdW1lbnQ7XG4gICAgICBpZiAodGhpcy5kaXYuY29udGFpbnMoYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgdGhpcy4jZm9jdXNlZEVsZW1lbnQgPSBhY3RpdmVFbGVtZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy4jZm9jdXNlZEVsZW1lbnQpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLiNmb2N1c2VkRWxlbWVudD8uZm9jdXMoKTtcbiAgICAgICAgdGhpcy4jZm9jdXNlZEVsZW1lbnQgPSBudWxsO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9XG5cbiAgZW5kRHJhd2luZ1Nlc3Npb24oaXNBYm9ydGVkID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMuI2RyYXdpbmdBQykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRoaXMuI3VpTWFuYWdlci5zZXRDdXJyZW50RHJhd2luZ1Nlc3Npb24obnVsbCk7XG4gICAgdGhpcy4jZHJhd2luZ0FDLmFib3J0KCk7XG4gICAgdGhpcy4jZHJhd2luZ0FDID0gbnVsbDtcbiAgICB0aGlzLiNmb2N1c2VkRWxlbWVudCA9IG51bGw7XG4gICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRFZGl0b3JUeXBlLmVuZERyYXdpbmcoaXNBYm9ydGVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FZGl0b3J9IGVkaXRvclxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgZmluZE5ld1BhcmVudChlZGl0b3IsIHgsIHkpIHtcbiAgICBjb25zdCBsYXllciA9IHRoaXMuI3VpTWFuYWdlci5maW5kUGFyZW50KHgsIHkpO1xuICAgIGlmIChsYXllciA9PT0gbnVsbCB8fCBsYXllciA9PT0gdGhpcykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBsYXllci5jaGFuZ2VQYXJlbnQoZWRpdG9yKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbW1pdE9yUmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLiNkcmF3aW5nQUMpIHtcbiAgICAgIHRoaXMuZW5kRHJhd2luZ1Nlc3Npb24oKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBvblNjYWxlQ2hhbmdpbmcoKSB7XG4gICAgaWYgKCF0aGlzLiNkcmF3aW5nQUMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jY3VycmVudEVkaXRvclR5cGUub25TY2FsZUNoYW5naW5nV2hlbkRyYXdpbmcodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveSB0aGUgbWFpbiBlZGl0b3IuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuY29tbWl0T3JSZW1vdmUoKTtcbiAgICBpZiAodGhpcy4jdWlNYW5hZ2VyLmdldEFjdGl2ZSgpPy5wYXJlbnQgPT09IHRoaXMpIHtcbiAgICAgIC8vIFdlIG5lZWQgdG8gY29tbWl0IHRoZSBjdXJyZW50IGVkaXRvciBiZWZvcmUgZGVzdHJveWluZyB0aGUgbGF5ZXIuXG4gICAgICB0aGlzLiN1aU1hbmFnZXIuY29tbWl0T3JSZW1vdmUoKTtcbiAgICAgIHRoaXMuI3VpTWFuYWdlci5zZXRBY3RpdmVFZGl0b3IobnVsbCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI2VkaXRvckZvY3VzVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy4jZWRpdG9yRm9jdXNUaW1lb3V0SWQpO1xuICAgICAgdGhpcy4jZWRpdG9yRm9jdXNUaW1lb3V0SWQgPSBudWxsO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZWRpdG9yIG9mIHRoaXMuI2VkaXRvcnMudmFsdWVzKCkpIHtcbiAgICAgIHRoaXMuI2FjY2Vzc2liaWxpdHlNYW5hZ2VyPy5yZW1vdmVQb2ludGVySW5UZXh0TGF5ZXIoZWRpdG9yLmNvbnRlbnREaXYpO1xuICAgICAgZWRpdG9yLnNldFBhcmVudChudWxsKTtcbiAgICAgIGVkaXRvci5pc0F0dGFjaGVkVG9ET00gPSBmYWxzZTtcbiAgICAgIGVkaXRvci5kaXYucmVtb3ZlKCk7XG4gICAgfVxuICAgIHRoaXMuZGl2ID0gbnVsbDtcbiAgICB0aGlzLiNlZGl0b3JzLmNsZWFyKCk7XG4gICAgdGhpcy4jdWlNYW5hZ2VyLnJlbW92ZUxheWVyKHRoaXMpO1xuICB9XG5cbiAgI2NsZWFudXAoKSB7XG4gICAgLy8gV2hlbiB3ZSdyZSBjbGVhbmluZyB1cCwgc29tZSBlZGl0b3JzIGFyZSByZW1vdmVkIGJ1dCB3ZSBkb24ndCB3YW50XG4gICAgLy8gdG8gYWRkIGEgbmV3IG9uZSB3aGljaCB3aWxsIGluZHVjZSBhbiBhZGRpdGlvbiBpbiB0aGlzLiNlZGl0b3JzLCBoZW5jZVxuICAgIC8vIGFuIGluZmluaXRlIGxvb3AuXG4gICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jZWRpdG9ycy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVkaXRvci5pc0VtcHR5KCkpIHtcbiAgICAgICAgZWRpdG9yLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIG1haW4gZWRpdG9yLlxuICAgKiBAcGFyYW0ge1JlbmRlckVkaXRvckxheWVyT3B0aW9uc30gcGFyYW1ldGVyc1xuICAgKi9cbiAgcmVuZGVyKHsgdmlld3BvcnQgfSkge1xuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICBzZXRMYXllckRpbWVuc2lvbnModGhpcy5kaXYsIHZpZXdwb3J0KTtcbiAgICBmb3IgKGNvbnN0IGVkaXRvciBvZiB0aGlzLiN1aU1hbmFnZXIuZ2V0RWRpdG9ycyh0aGlzLnBhZ2VJbmRleCkpIHtcbiAgICAgIHRoaXMuYWRkKGVkaXRvcik7XG4gICAgICBlZGl0b3IucmVidWlsZCgpO1xuICAgIH1cbiAgICAvLyBXZSdyZSBtYXliZSByZW5kZXJpbmcgYSBsYXllciB3aGljaCB3YXMgaW52aXNpYmxlIHdoZW4gd2Ugc3RhcnRlZCB0byBlZGl0XG4gICAgLy8gc28gd2UgbXVzdCBzZXQgdGhlIGRpZmZlcmVudCBjYWxsYmFja3MgZm9yIGl0LlxuICAgIHRoaXMudXBkYXRlTW9kZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgbWFpbiBlZGl0b3IuXG4gICAqIEBwYXJhbSB7UmVuZGVyRWRpdG9yTGF5ZXJPcHRpb25zfSBwYXJhbWV0ZXJzXG4gICAqL1xuICB1cGRhdGUoeyB2aWV3cG9ydCB9KSB7XG4gICAgLy8gRWRpdG9ycyBoYXZlIHRoZWlyIGRpbWVuc2lvbnMvcG9zaXRpb25zIGluIHBlcmNlbnQgc28gdG8gYXZvaWQgYW55XG4gICAgLy8gaXNzdWVzIChzZWUgIzE1NTgyKSwgd2UgbXVzdCBjb21taXQgdGhlIGN1cnJlbnQgb25lIGJlZm9yZSBjaGFuZ2luZ1xuICAgIC8vIHRoZSB2aWV3cG9ydC5cbiAgICB0aGlzLiN1aU1hbmFnZXIuY29tbWl0T3JSZW1vdmUoKTtcbiAgICB0aGlzLiNjbGVhbnVwKCk7XG5cbiAgICBjb25zdCBvbGRSb3RhdGlvbiA9IHRoaXMudmlld3BvcnQucm90YXRpb247XG4gICAgY29uc3Qgcm90YXRpb24gPSB2aWV3cG9ydC5yb3RhdGlvbjtcblxuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICBzZXRMYXllckRpbWVuc2lvbnModGhpcy5kaXYsIHsgcm90YXRpb24gfSk7XG4gICAgaWYgKG9sZFJvdGF0aW9uICE9PSByb3RhdGlvbikge1xuICAgICAgZm9yIChjb25zdCBlZGl0b3Igb2YgdGhpcy4jZWRpdG9ycy52YWx1ZXMoKSkge1xuICAgICAgICBlZGl0b3Iucm90YXRlKHJvdGF0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhZ2UgZGltZW5zaW9ucy5cbiAgICogQHJldHVybnMge09iamVjdH0gZGltZW5zaW9ucy5cbiAgICovXG4gIGdldCBwYWdlRGltZW5zaW9ucygpIHtcbiAgICBjb25zdCB7IHBhZ2VXaWR0aCwgcGFnZUhlaWdodCB9ID0gdGhpcy52aWV3cG9ydC5yYXdEaW1zO1xuICAgIHJldHVybiBbcGFnZVdpZHRoLCBwYWdlSGVpZ2h0XTtcbiAgfVxuXG4gIGdldCBzY2FsZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jdWlNYW5hZ2VyLnZpZXdQYXJhbWV0ZXJzLnJlYWxTY2FsZTtcbiAgfVxufVxuXG5leHBvcnQgeyBBbm5vdGF0aW9uRWRpdG9yTGF5ZXIgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMyBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRE9NU1ZHRmFjdG9yeSB9IGZyb20gXCIuL3N2Z19mYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBzaGFkb3cgfSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcblxuLyoqXG4gKiBNYW5hZ2UgdGhlIFNWR3MgZHJhd24gb24gdG9wIG9mIHRoZSBwYWdlIGNhbnZhcy5cbiAqIEl0J3MgaW1wb3J0YW50IHRvIGhhdmUgdGhlbSBkaXJlY3RseSBvbiB0b3Agb2YgdGhlIGNhbnZhcyBiZWNhdXNlIHdlIHdhbnQgdG9cbiAqIGJlIGFibGUgdG8gdXNlIG1peC1ibGVuZC1tb2RlIGZvciBzb21lIG9mIHRoZW0uXG4gKi9cbmNsYXNzIERyYXdMYXllciB7XG4gICNwYXJlbnQgPSBudWxsO1xuXG4gICNtYXBwaW5nID0gbmV3IE1hcCgpO1xuXG4gICN0b1VwZGF0ZSA9IG5ldyBNYXAoKTtcblxuICBzdGF0aWMgI2lkID0gMDtcblxuICBjb25zdHJ1Y3Rvcih7IHBhZ2VJbmRleCB9KSB7XG4gICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlSW5kZXg7XG4gIH1cblxuICBzZXRQYXJlbnQocGFyZW50KSB7XG4gICAgaWYgKCF0aGlzLiNwYXJlbnQpIHtcbiAgICAgIHRoaXMuI3BhcmVudCA9IHBhcmVudDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jcGFyZW50ICE9PSBwYXJlbnQpIHtcbiAgICAgIGlmICh0aGlzLiNtYXBwaW5nLnNpemUgPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3Qgcm9vdCBvZiB0aGlzLiNtYXBwaW5nLnZhbHVlcygpKSB7XG4gICAgICAgICAgcm9vdC5yZW1vdmUoKTtcbiAgICAgICAgICBwYXJlbnQuYXBwZW5kKHJvb3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLiNwYXJlbnQgPSBwYXJlbnQ7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBfc3ZnRmFjdG9yeSgpIHtcbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiX3N2Z0ZhY3RvcnlcIiwgbmV3IERPTVNWR0ZhY3RvcnkoKSk7XG4gIH1cblxuICBzdGF0aWMgI3NldEJveChlbGVtZW50LCBbeCwgeSwgd2lkdGgsIGhlaWdodF0pIHtcbiAgICBjb25zdCB7IHN0eWxlIH0gPSBlbGVtZW50O1xuICAgIHN0eWxlLnRvcCA9IGAkezEwMCAqIHl9JWA7XG4gICAgc3R5bGUubGVmdCA9IGAkezEwMCAqIHh9JWA7XG4gICAgc3R5bGUud2lkdGggPSBgJHsxMDAgKiB3aWR0aH0lYDtcbiAgICBzdHlsZS5oZWlnaHQgPSBgJHsxMDAgKiBoZWlnaHR9JWA7XG4gIH1cblxuICAjY3JlYXRlU1ZHKCkge1xuICAgIGNvbnN0IHN2ZyA9IERyYXdMYXllci5fc3ZnRmFjdG9yeS5jcmVhdGUoMSwgMSwgLyogc2tpcERpbWVuc2lvbnMgPSAqLyB0cnVlKTtcbiAgICB0aGlzLiNwYXJlbnQuYXBwZW5kKHN2Zyk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIHRydWUpO1xuXG4gICAgcmV0dXJuIHN2ZztcbiAgfVxuXG4gICNjcmVhdGVDbGlwUGF0aChkZWZzLCBwYXRoSWQpIHtcbiAgICBjb25zdCBjbGlwUGF0aCA9IERyYXdMYXllci5fc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwiY2xpcFBhdGhcIik7XG4gICAgZGVmcy5hcHBlbmQoY2xpcFBhdGgpO1xuICAgIGNvbnN0IGNsaXBQYXRoSWQgPSBgY2xpcF8ke3BhdGhJZH1gO1xuICAgIGNsaXBQYXRoLnNldEF0dHJpYnV0ZShcImlkXCIsIGNsaXBQYXRoSWQpO1xuICAgIGNsaXBQYXRoLnNldEF0dHJpYnV0ZShcImNsaXBQYXRoVW5pdHNcIiwgXCJvYmplY3RCb3VuZGluZ0JveFwiKTtcbiAgICBjb25zdCBjbGlwUGF0aFVzZSA9IERyYXdMYXllci5fc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwidXNlXCIpO1xuICAgIGNsaXBQYXRoLmFwcGVuZChjbGlwUGF0aFVzZSk7XG4gICAgY2xpcFBhdGhVc2Uuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBgIyR7cGF0aElkfWApO1xuICAgIGNsaXBQYXRoVXNlLmNsYXNzTGlzdC5hZGQoXCJjbGlwXCIpO1xuXG4gICAgcmV0dXJuIGNsaXBQYXRoSWQ7XG4gIH1cblxuICAjdXBkYXRlUHJvcGVydGllcyhlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZHJhdyhwcm9wZXJ0aWVzLCBpc1BhdGhVcGRhdGFibGUgPSBmYWxzZSwgaGFzQ2xpcCA9IGZhbHNlKSB7XG4gICAgY29uc3QgaWQgPSBEcmF3TGF5ZXIuI2lkKys7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuI2NyZWF0ZVNWRygpO1xuXG4gICAgY29uc3QgZGVmcyA9IERyYXdMYXllci5fc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwiZGVmc1wiKTtcbiAgICByb290LmFwcGVuZChkZWZzKTtcbiAgICBjb25zdCBwYXRoID0gRHJhd0xheWVyLl9zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIpO1xuICAgIGRlZnMuYXBwZW5kKHBhdGgpO1xuICAgIGNvbnN0IHBhdGhJZCA9IGBwYXRoX3Ake3RoaXMucGFnZUluZGV4fV8ke2lkfWA7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBwYXRoSWQpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKFwidmVjdG9yLWVmZmVjdFwiLCBcIm5vbi1zY2FsaW5nLXN0cm9rZVwiKTtcblxuICAgIGlmIChpc1BhdGhVcGRhdGFibGUpIHtcbiAgICAgIHRoaXMuI3RvVXBkYXRlLnNldChpZCwgcGF0aCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBjbGlwcGluZyBwYXRoIGZvciB0aGUgZWRpdG9yIGRpdi5cbiAgICBjb25zdCBjbGlwUGF0aElkID0gaGFzQ2xpcCA/IHRoaXMuI2NyZWF0ZUNsaXBQYXRoKGRlZnMsIHBhdGhJZCkgOiBudWxsO1xuXG4gICAgY29uc3QgdXNlID0gRHJhd0xheWVyLl9zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJ1c2VcIik7XG4gICAgcm9vdC5hcHBlbmQodXNlKTtcbiAgICB1c2Uuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBgIyR7cGF0aElkfWApO1xuICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyhyb290LCBwcm9wZXJ0aWVzKTtcblxuICAgIHRoaXMuI21hcHBpbmcuc2V0KGlkLCByb290KTtcblxuICAgIHJldHVybiB7IGlkLCBjbGlwUGF0aElkOiBgdXJsKCMke2NsaXBQYXRoSWR9KWAgfTtcbiAgfVxuXG4gIGRyYXdPdXRsaW5lKHByb3BlcnRpZXMsIG11c3RSZW1vdmVTZWxmSW50ZXJzZWN0aW9ucykge1xuICAgIC8vIFdlIGNhbm5vdCBkcmF3IHRoZSBvdXRsaW5lIGRpcmVjdGx5IGluIHRoZSBTVkcgZm9yIGhpZ2hsaWdodHMgYmVjYXVzZVxuICAgIC8vIGl0IGNvbXBvc2VzIHdpdGggaXRzIHBhcmVudCB3aXRoIG1peC1ibGVuZC1tb2RlOiBtdWx0aXBseS5cbiAgICAvLyBCdXQgdGhlIG91dGxpbmUgaGFzIGEgZGlmZmVyZW50IG1peC1ibGVuZC1tb2RlLCBzbyB3ZSBuZWVkIHRvIGRyYXcgaXQgaW5cbiAgICAvLyBpdHMgb3duIFNWRy5cbiAgICBjb25zdCBpZCA9IERyYXdMYXllci4jaWQrKztcbiAgICBjb25zdCByb290ID0gdGhpcy4jY3JlYXRlU1ZHKCk7XG4gICAgY29uc3QgZGVmcyA9IERyYXdMYXllci5fc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwiZGVmc1wiKTtcbiAgICByb290LmFwcGVuZChkZWZzKTtcbiAgICBjb25zdCBwYXRoID0gRHJhd0xheWVyLl9zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIpO1xuICAgIGRlZnMuYXBwZW5kKHBhdGgpO1xuICAgIGNvbnN0IHBhdGhJZCA9IGBwYXRoX3Ake3RoaXMucGFnZUluZGV4fV8ke2lkfWA7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBwYXRoSWQpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKFwidmVjdG9yLWVmZmVjdFwiLCBcIm5vbi1zY2FsaW5nLXN0cm9rZVwiKTtcblxuICAgIGxldCBtYXNrSWQ7XG4gICAgaWYgKG11c3RSZW1vdmVTZWxmSW50ZXJzZWN0aW9ucykge1xuICAgICAgY29uc3QgbWFzayA9IERyYXdMYXllci5fc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwibWFza1wiKTtcbiAgICAgIGRlZnMuYXBwZW5kKG1hc2spO1xuICAgICAgbWFza0lkID0gYG1hc2tfcCR7dGhpcy5wYWdlSW5kZXh9XyR7aWR9YDtcbiAgICAgIG1hc2suc2V0QXR0cmlidXRlKFwiaWRcIiwgbWFza0lkKTtcbiAgICAgIG1hc2suc2V0QXR0cmlidXRlKFwibWFza1VuaXRzXCIsIFwib2JqZWN0Qm91bmRpbmdCb3hcIik7XG4gICAgICBjb25zdCByZWN0ID0gRHJhd0xheWVyLl9zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIpO1xuICAgICAgbWFzay5hcHBlbmQocmVjdCk7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFwiMVwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiMVwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIndoaXRlXCIpO1xuICAgICAgY29uc3QgdXNlID0gRHJhd0xheWVyLl9zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJ1c2VcIik7XG4gICAgICBtYXNrLmFwcGVuZCh1c2UpO1xuICAgICAgdXNlLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgYCMke3BhdGhJZH1gKTtcbiAgICAgIHVzZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJub25lXCIpO1xuICAgICAgdXNlLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJibGFja1wiKTtcbiAgICAgIHVzZS5zZXRBdHRyaWJ1dGUoXCJmaWxsLXJ1bGVcIiwgXCJub256ZXJvXCIpO1xuICAgICAgdXNlLmNsYXNzTGlzdC5hZGQoXCJtYXNrXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZTEgPSBEcmF3TGF5ZXIuX3N2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInVzZVwiKTtcbiAgICByb290LmFwcGVuZCh1c2UxKTtcbiAgICB1c2UxLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgYCMke3BhdGhJZH1gKTtcbiAgICBpZiAobWFza0lkKSB7XG4gICAgICB1c2UxLnNldEF0dHJpYnV0ZShcIm1hc2tcIiwgYHVybCgjJHttYXNrSWR9KWApO1xuICAgIH1cbiAgICBjb25zdCB1c2UyID0gdXNlMS5jbG9uZU5vZGUoKTtcbiAgICByb290LmFwcGVuZCh1c2UyKTtcbiAgICB1c2UxLmNsYXNzTGlzdC5hZGQoXCJtYWluT3V0bGluZVwiKTtcbiAgICB1c2UyLmNsYXNzTGlzdC5hZGQoXCJzZWNvbmRhcnlPdXRsaW5lXCIpO1xuXG4gICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHJvb3QsIHByb3BlcnRpZXMpO1xuXG4gICAgdGhpcy4jbWFwcGluZy5zZXQoaWQsIHJvb3QpO1xuXG4gICAgcmV0dXJuIGlkO1xuICB9XG5cbiAgZmluYWxpemVEcmF3KGlkLCBwcm9wZXJ0aWVzKSB7XG4gICAgdGhpcy4jdG9VcGRhdGUuZGVsZXRlKGlkKTtcbiAgICB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoaWQsIHByb3BlcnRpZXMpO1xuICB9XG5cbiAgdXBkYXRlUHJvcGVydGllcyhlbGVtZW50T3JJZCwgcHJvcGVydGllcykge1xuICAgIGlmICghcHJvcGVydGllcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHJvb3QsIGJib3gsIHJvb3RDbGFzcywgcGF0aCB9ID0gcHJvcGVydGllcztcbiAgICBjb25zdCBlbGVtZW50ID1cbiAgICAgIHR5cGVvZiBlbGVtZW50T3JJZCA9PT0gXCJudW1iZXJcIlxuICAgICAgICA/IHRoaXMuI21hcHBpbmcuZ2V0KGVsZW1lbnRPcklkKVxuICAgICAgICA6IGVsZW1lbnRPcklkO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocm9vdCkge1xuICAgICAgdGhpcy4jdXBkYXRlUHJvcGVydGllcyhlbGVtZW50LCByb290KTtcbiAgICB9XG4gICAgaWYgKGJib3gpIHtcbiAgICAgIERyYXdMYXllci4jc2V0Qm94KGVsZW1lbnQsIGJib3gpO1xuICAgIH1cbiAgICBpZiAocm9vdENsYXNzKSB7XG4gICAgICBjb25zdCB7IGNsYXNzTGlzdCB9ID0gZWxlbWVudDtcbiAgICAgIGZvciAoY29uc3QgW2NsYXNzTmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJvb3RDbGFzcykpIHtcbiAgICAgICAgY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIGNvbnN0IGRlZnMgPSBlbGVtZW50LmZpcnN0Q2hpbGQ7XG4gICAgICBjb25zdCBwYXRoRWxlbWVudCA9IGRlZnMuZmlyc3RDaGlsZDtcbiAgICAgIHRoaXMuI3VwZGF0ZVByb3BlcnRpZXMocGF0aEVsZW1lbnQsIHBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVBhcmVudChpZCwgbGF5ZXIpIHtcbiAgICBpZiAobGF5ZXIgPT09IHRoaXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuI21hcHBpbmcuZ2V0KGlkKTtcbiAgICBpZiAoIXJvb3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGF5ZXIuI3BhcmVudC5hcHBlbmQocm9vdCk7XG4gICAgdGhpcy4jbWFwcGluZy5kZWxldGUoaWQpO1xuICAgIGxheWVyLiNtYXBwaW5nLnNldChpZCwgcm9vdCk7XG4gIH1cblxuICByZW1vdmUoaWQpIHtcbiAgICB0aGlzLiN0b1VwZGF0ZS5kZWxldGUoaWQpO1xuICAgIGlmICh0aGlzLiNwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jbWFwcGluZy5nZXQoaWQpLnJlbW92ZSgpO1xuICAgIHRoaXMuI21hcHBpbmcuZGVsZXRlKGlkKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy4jcGFyZW50ID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHJvb3Qgb2YgdGhpcy4jbWFwcGluZy52YWx1ZXMoKSkge1xuICAgICAgcm9vdC5yZW1vdmUoKTtcbiAgICB9XG4gICAgdGhpcy4jbWFwcGluZy5jbGVhcigpO1xuICAgIHRoaXMuI3RvVXBkYXRlLmNsZWFyKCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgRHJhd0xheWVyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vZGlzcGxheS9hcGlcIikuT25Qcm9ncmVzc1BhcmFtZXRlcnN9IE9uUHJvZ3Jlc3NQYXJhbWV0ZXJzICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2Rpc3BsYXkvYXBpXCIpLlBERkRvY3VtZW50TG9hZGluZ1Rhc2t9IFBERkRvY3VtZW50TG9hZGluZ1Rhc2sgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9kaXNwbGF5L2FwaVwiKS5QREZEb2N1bWVudFByb3h5fSBQREZEb2N1bWVudFByb3h5ICovXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vZGlzcGxheS9hcGlcIikuUERGUGFnZVByb3h5fSBQREZQYWdlUHJveHkgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9kaXNwbGF5L2FwaVwiKS5SZW5kZXJUYXNrfSBSZW5kZXJUYXNrICovXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vZGlzcGxheS9kaXNwbGF5X3V0aWxzXCIpLlBhZ2VWaWV3cG9ydH0gUGFnZVZpZXdwb3J0ICovXG5cbmltcG9ydCB7XG4gIEFib3J0RXhjZXB0aW9uLFxuICBBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZSxcbiAgQW5ub3RhdGlvbkVkaXRvclR5cGUsXG4gIEFubm90YXRpb25Nb2RlLFxuICBBbm5vdGF0aW9uVHlwZSxcbiAgY3JlYXRlVmFsaWRBYnNvbHV0ZVVybCxcbiAgRmVhdHVyZVRlc3QsXG4gIGdldFV1aWQsXG4gIEltYWdlS2luZCxcbiAgSW52YWxpZFBERkV4Y2VwdGlvbixcbiAgTWF0aENsYW1wLFxuICBub3JtYWxpemVVbmljb2RlLFxuICBPUFMsXG4gIFBhc3N3b3JkUmVzcG9uc2VzLFxuICBQZXJtaXNzaW9uRmxhZyxcbiAgUmVzcG9uc2VFeGNlcHRpb24sXG4gIHNoYWRvdyxcbiAgVXRpbCxcbiAgVmVyYm9zaXR5TGV2ZWwsXG59IGZyb20gXCIuL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQge1xuICBidWlsZCxcbiAgZ2V0RG9jdW1lbnQsXG4gIGlzVmFsaWRFeHBsaWNpdERlc3QsXG4gIFBERkRhdGFSYW5nZVRyYW5zcG9ydCxcbiAgUERGV29ya2VyLFxuICB2ZXJzaW9uLFxufSBmcm9tIFwiLi9kaXNwbGF5L2FwaS5qc1wiO1xuaW1wb3J0IHtcbiAgZmV0Y2hEYXRhLFxuICBnZXRGaWxlbmFtZUZyb21VcmwsXG4gIGdldFBkZkZpbGVuYW1lRnJvbVVybCxcbiAgZ2V0WGZhUGFnZVZpZXdwb3J0LFxuICBpc0RhdGFTY2hlbWUsXG4gIGlzUGRmRmlsZSxcbiAgbm9Db250ZXh0TWVudSxcbiAgT3V0cHV0U2NhbGUsXG4gIFBERkRhdGVTdHJpbmcsXG4gIFBpeGVsc1BlckluY2gsXG4gIFJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbixcbiAgc2V0TGF5ZXJEaW1lbnNpb25zLFxuICBzdG9wRXZlbnQsXG4gIFN1cHBvcnRlZEltYWdlTWltZVR5cGVzLFxufSBmcm9tIFwiLi9kaXNwbGF5L2Rpc3BsYXlfdXRpbHMuanNcIjtcbmltcG9ydCB7IEFubm90YXRpb25FZGl0b3JMYXllciB9IGZyb20gXCIuL2Rpc3BsYXkvZWRpdG9yL2Fubm90YXRpb25fZWRpdG9yX2xheWVyLmpzXCI7XG5pbXBvcnQgeyBBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyIH0gZnJvbSBcIi4vZGlzcGxheS9lZGl0b3IvdG9vbHMuanNcIjtcbmltcG9ydCB7IEFubm90YXRpb25MYXllciB9IGZyb20gXCIuL2Rpc3BsYXkvYW5ub3RhdGlvbl9sYXllci5qc1wiO1xuaW1wb3J0IHsgQ29sb3JQaWNrZXIgfSBmcm9tIFwiLi9kaXNwbGF5L2VkaXRvci9jb2xvcl9waWNrZXIuanNcIjtcbmltcG9ydCB7IERPTVNWR0ZhY3RvcnkgfSBmcm9tIFwiLi9kaXNwbGF5L3N2Z19mYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBEcmF3TGF5ZXIgfSBmcm9tIFwiLi9kaXNwbGF5L2RyYXdfbGF5ZXIuanNcIjtcbmltcG9ydCB7IEdsb2JhbFdvcmtlck9wdGlvbnMgfSBmcm9tIFwiLi9kaXNwbGF5L3dvcmtlcl9vcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBIaWdobGlnaHRPdXRsaW5lciB9IGZyb20gXCIuL2Rpc3BsYXkvZWRpdG9yL2RyYXdlcnMvaGlnaGxpZ2h0LmpzXCI7XG5pbXBvcnQgeyBTaWduYXR1cmVFeHRyYWN0b3IgfSBmcm9tIFwiLi9kaXNwbGF5L2VkaXRvci9kcmF3ZXJzL3NpZ25hdHVyZWRyYXcuanNcIjtcbmltcG9ydCB7IFRleHRMYXllciB9IGZyb20gXCIuL2Rpc3BsYXkvdGV4dF9sYXllci5qc1wiO1xuaW1wb3J0IHsgVG91Y2hNYW5hZ2VyIH0gZnJvbSBcIi4vZGlzcGxheS90b3VjaF9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBYZmFMYXllciB9IGZyb20gXCIuL2Rpc3BsYXkveGZhX2xheWVyLmpzXCI7XG5cbi8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAqL1xuY29uc3QgcGRmanNWZXJzaW9uID1cbiAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiID8gUERGSlNEZXYuZXZhbChcIkJVTkRMRV9WRVJTSU9OXCIpIDogdm9pZCAwO1xuLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzICovXG5jb25zdCBwZGZqc0J1aWxkID1cbiAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiID8gUERGSlNEZXYuZXZhbChcIkJVTkRMRV9CVUlMRFwiKSA6IHZvaWQgMDtcblxuaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiVEVTVElORyB8fCBHRU5FUklDXCIpKSB7XG4gIGdsb2JhbFRoaXMucGRmanNUZXN0aW5nVXRpbHMgPSB7XG4gICAgSGlnaGxpZ2h0T3V0bGluZXIsXG4gIH07XG59XG5cbmV4cG9ydCB7XG4gIEFib3J0RXhjZXB0aW9uLFxuICBBbm5vdGF0aW9uRWRpdG9yTGF5ZXIsXG4gIEFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLFxuICBBbm5vdGF0aW9uRWRpdG9yVHlwZSxcbiAgQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcixcbiAgQW5ub3RhdGlvbkxheWVyLFxuICBBbm5vdGF0aW9uTW9kZSxcbiAgQW5ub3RhdGlvblR5cGUsXG4gIGJ1aWxkLFxuICBDb2xvclBpY2tlcixcbiAgY3JlYXRlVmFsaWRBYnNvbHV0ZVVybCxcbiAgRE9NU1ZHRmFjdG9yeSxcbiAgRHJhd0xheWVyLFxuICBGZWF0dXJlVGVzdCxcbiAgZmV0Y2hEYXRhLFxuICBnZXREb2N1bWVudCxcbiAgZ2V0RmlsZW5hbWVGcm9tVXJsLFxuICBnZXRQZGZGaWxlbmFtZUZyb21VcmwsXG4gIGdldFV1aWQsXG4gIGdldFhmYVBhZ2VWaWV3cG9ydCxcbiAgR2xvYmFsV29ya2VyT3B0aW9ucyxcbiAgSW1hZ2VLaW5kLFxuICBJbnZhbGlkUERGRXhjZXB0aW9uLFxuICBpc0RhdGFTY2hlbWUsXG4gIGlzUGRmRmlsZSxcbiAgaXNWYWxpZEV4cGxpY2l0RGVzdCxcbiAgTWF0aENsYW1wLFxuICBub0NvbnRleHRNZW51LFxuICBub3JtYWxpemVVbmljb2RlLFxuICBPUFMsXG4gIE91dHB1dFNjYWxlLFxuICBQYXNzd29yZFJlc3BvbnNlcyxcbiAgUERGRGF0YVJhbmdlVHJhbnNwb3J0LFxuICBQREZEYXRlU3RyaW5nLFxuICBQREZXb3JrZXIsXG4gIFBlcm1pc3Npb25GbGFnLFxuICBQaXhlbHNQZXJJbmNoLFxuICBSZW5kZXJpbmdDYW5jZWxsZWRFeGNlcHRpb24sXG4gIFJlc3BvbnNlRXhjZXB0aW9uLFxuICBzZXRMYXllckRpbWVuc2lvbnMsXG4gIHNoYWRvdyxcbiAgU2lnbmF0dXJlRXh0cmFjdG9yLFxuICBzdG9wRXZlbnQsXG4gIFN1cHBvcnRlZEltYWdlTWltZVR5cGVzLFxuICBUZXh0TGF5ZXIsXG4gIFRvdWNoTWFuYWdlcixcbiAgVXRpbCxcbiAgVmVyYm9zaXR5TGV2ZWwsXG4gIHZlcnNpb24sXG4gIFhmYUxheWVyLFxufTtcbiIsICJpbXBvcnQge1xuICAgIEdsb2JhbFdvcmtlck9wdGlvbnMsXG4gICAgUGFzc3dvcmRSZXNwb25zZXMsXG4gICAgVGV4dExheWVyLFxuICAgIGdldERvY3VtZW50LFxufSBmcm9tIFwicGRmanMtZGlzdFwiO1xuXG5HbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyYyA9IFwiL3ZpZXdlci9qcy93b3JrZXIuanNcIjtcblxubGV0IHBkZkRvYyA9IG51bGw7XG5sZXQgb3V0bGluZUFib3J0ID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xubGV0IHBhZ2VSZW5kZXJpbmcgPSBmYWxzZTtcbmxldCByZW5kZXJQZW5kaW5nID0gZmFsc2U7XG5sZXQgcmVuZGVyUGVuZGluZ1pvb20gPSAwO1xuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIik7XG5sZXQgb3JpZW50YXRpb25EZWdyZWVzID0gMDtcbmxldCB6b29tUmF0aW8gPSAxO1xubGV0IHRleHRMYXllckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dFwiKTtcbmxldCB0YXNrID0gbnVsbDtcblxubGV0IG5ld1BhZ2VOdW1iZXIgPSAwO1xubGV0IG5ld1pvb21SYXRpbyA9IDE7XG5sZXQgdXNlUmVuZGVyO1xuXG5jb25zdCBjYWNoZSA9IFtdO1xuY29uc3QgbWF4Q2FjaGVkID0gNjtcblxubGV0IGlzVGV4dExheWVyVmlzaWJsZSA9IGZhbHNlO1xuXG5mdW5jdGlvbiBtYXliZVJlbmRlck5leHRQYWdlKCkge1xuICAgIGlmIChyZW5kZXJQZW5kaW5nKSB7XG4gICAgICAgIHBhZ2VSZW5kZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgcmVuZGVyUGVuZGluZyA9IGZhbHNlO1xuICAgICAgICByZW5kZXJQYWdlKGNoYW5uZWwuZ2V0UGFnZSgpLCByZW5kZXJQZW5kaW5nWm9vbSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVSZW5kZXJpbmdFcnJvcihlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwicmVuZGVyaW5nIGVycm9yOiBcIiArIGVycm9yKTtcblxuICAgIHBhZ2VSZW5kZXJpbmcgPSBmYWxzZTtcbiAgICBtYXliZVJlbmRlck5leHRQYWdlKCk7XG59XG5cbmZ1bmN0aW9uIGRvUHJlcmVuZGVyKHBhZ2VOdW1iZXIsIHByZXJlbmRlclRyaWdnZXIpIHtcbiAgICBpZiAodXNlUmVuZGVyKSB7XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICsgMSA8PSBwZGZEb2MubnVtUGFnZXMpIHtcbiAgICAgICAgICAgIHJlbmRlclBhZ2UocGFnZU51bWJlciArIDEsIGZhbHNlLCB0cnVlLCBwYWdlTnVtYmVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYWdlTnVtYmVyIC0gMSA+IDApIHtcbiAgICAgICAgICAgIHJlbmRlclBhZ2UocGFnZU51bWJlciAtIDEsIGZhbHNlLCB0cnVlLCBwYWdlTnVtYmVyKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFnZU51bWJlciA9PT0gcHJlcmVuZGVyVHJpZ2dlciArIDEpIHtcbiAgICAgICAgaWYgKHByZXJlbmRlclRyaWdnZXIgLSAxID4gMCkge1xuICAgICAgICAgICAgcmVuZGVyUGFnZShwcmVyZW5kZXJUcmlnZ2VyIC0gMSwgZmFsc2UsIHRydWUsIHByZXJlbmRlclRyaWdnZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXNwbGF5KG5ld0NhbnZhcywgem9vbSkge1xuICAgIGNhbnZhcy5oZWlnaHQgPSBuZXdDYW52YXMuaGVpZ2h0O1xuICAgIGNhbnZhcy53aWR0aCA9IG5ld0NhbnZhcy53aWR0aDtcbiAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gbmV3Q2FudmFzLnN0eWxlLmhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUud2lkdGggPSBuZXdDYW52YXMuc3R5bGUud2lkdGg7XG4gICAgY2FudmFzLmdldENvbnRleHQoXCIyZFwiLCB7IGFscGhhOiBmYWxzZSB9KS5kcmF3SW1hZ2UobmV3Q2FudmFzLCAwLCAwKTtcbiAgICBpZiAoIXpvb20pIHtcbiAgICAgICAgc2Nyb2xsVG8oMCwgMCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRMYXllclRyYW5zZm9ybShwYWdlV2lkdGgsIHBhZ2VIZWlnaHQsIGxheWVyRGl2KSB7XG4gICAgY29uc3QgdHJhbnNsYXRlID0ge1xuICAgICAgICBYOiBNYXRoLm1heCgwLCBwYWdlV2lkdGggLSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKSAvIDIsXG4gICAgICAgIFk6IE1hdGgubWF4KDAsIHBhZ2VIZWlnaHQgLSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkgLyAyXG4gICAgfTtcbiAgICBsYXllckRpdi5zdHlsZS50cmFuc2xhdGUgPSBgJHt0cmFuc2xhdGUuWH1weCAke3RyYW5zbGF0ZS5ZfXB4YDtcbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdFpvb21SYXRpbyhwYWdlLCBvcmllbnRhdGlvbkRlZ3JlZXMpIHtcbiAgICBjb25zdCB0b3RhbFJvdGF0aW9uID0gKG9yaWVudGF0aW9uRGVncmVlcyArIHBhZ2Uucm90YXRlKSAlIDM2MDtcbiAgICBjb25zdCB2aWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoe3NjYWxlOiAxLCByb3RhdGlvbjogdG90YWxSb3RhdGlvbn0pO1xuICAgIGNvbnN0IHdpZHRoWm9vbVJhdGlvID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAvIHZpZXdwb3J0LndpZHRoO1xuICAgIGNvbnN0IGhlaWdodFpvb21SYXRpbyA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0IC8gdmlld3BvcnQuaGVpZ2h0O1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbih3aWR0aFpvb21SYXRpbywgaGVpZ2h0Wm9vbVJhdGlvLCBjaGFubmVsLmdldE1heFpvb21SYXRpbygpKSwgY2hhbm5lbC5nZXRNaW5ab29tUmF0aW8oKSk7XG59XG5cbi8qKlxuICogRG9lcyBCRlMgdHJhdmVyc2FsIG9mIGFsbCBvZiB0aGUgbm9kZXMgaW4gdGhlIG91dGxpbmUgdHJlZSB0byBjb252ZXJ0IHRoZSB0cmVlIHNvIHRoYXQgdGhlXG4gKiBub2RlcyBhcmUgb2YgYSBzaW1wbGVyIGZvcm0uIFRoZSBzaW1wbGUgb3V0bGluZSBub2RlcyBoYXZlIHRoZSBmb2xsb3dpbmcgc3RydWN0dXJlOlxuICpcbiAqIGBgYFxuICogIHtcbiAqICAgICAgdDogU3RyaW5nLCAvLyB0aXRsZVxuICogICAgICBwOiBpbnQgKC0xIG1lYW5zIHVua25vd24pLCAvLyBwYWdlTnVtYmVyXG4gKiAgICAgIGM6IEFycmF5IG9mIHNpbXBsZSBvdXRsaW5lIG5vZGVzLCAvLyBjaGlsZHJlblxuICogIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHBkZkpzT3V0bGluZSBUaGUgcm9vdCBub2RlIG9mIHRoZSBvdXRsaW5lIHRyZWUgYXMgb2J0YWluZWQgYnlcbiAqIHBkZkRvYy5nZXRPdXRsaW5lLiBUaGlzIGlzIGFzc3VtZWQgdG8gYmUgYW4gb3JkZXJlZCB0cmVlLlxuICpcbiAqIEByZXR1cm4ge1Byb21pc2V9IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYW4ge0FycmF5fSB0aGF0IGNvbnRhaW5zXG4gKiBhbGwgdGhlIHRvcC1sZXZlbCBub2RlcyBvZiB0aGUgb3V0bGluZSBpbiBzaW1wbGlmaWVkIGZvcm1cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0U2ltcGxpZmllZE91dGxpbmUocGRmSnNPdXRsaW5lLCBhYm9ydENvbnRyb2xsZXIpIHtcbiAgICBpZiAocGRmSnNPdXRsaW5lID09PSB1bmRlZmluZWQgfHwgcGRmSnNPdXRsaW5lID09PSBudWxsIHx8IHBkZkpzT3V0bGluZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcGFnZU51bWJlclByb21pc2VzID0gW107XG4gICAgY29uc3QgdG9wTGV2ZWxFbnRyaWVzID0gW107XG5cbiAgICAvLyBFYWNoIGl0ZW0gaW4gdGhpcyBxdWV1ZSByZXByZXNlbnRzIGEgUERGLmpzIG91dGxpbmUgbm9kZSB3aXRoIGFcbiAgICAvLyByZWZlcmVuY2UgdG8gYW4gYXJyYXkgb2YgaXRzIGNoaWxkcmVuIGluIHRoZSBzaW1wbGlmaWVkIG5vZGUgZm9ybS5cbiAgICBjb25zdCBvdXRsaW5lUXVldWUgPSBbe1xuICAgICAgICBwZGZKc0NoaWxkcmVuOiBwZGZKc091dGxpbmUsXG4gICAgICAgIC8vIE5vIHBhcmVudHMgZm9yIGF0IHRvcC9yb290LCBzbyBpdCBzdGFydHMgb3V0IGFzIG51bGwgZm9yIHRoZW0uXG4gICAgICAgIHBhcmVudFNpbXBsZUNoaWxkcmVuQXJyYXk6IG51bGwsXG4gICAgfV07XG5cbiAgICB3aGlsZSAob3V0bGluZVF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLnNpZ25hbC50aHJvd0lmQWJvcnRlZCgpO1xuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRPdXRsaW5lUGF5bG9hZCA9IG91dGxpbmVRdWV1ZS5zaGlmdCgpO1xuICAgICAgICBjb25zdCBwYXJlbnRDaGlsZHJlbkFycmF5ID0gY3VycmVudE91dGxpbmVQYXlsb2FkLnBhcmVudFNpbXBsZUNoaWxkcmVuQXJyYXk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQZGZKc0NoaWxkcmVuID0gY3VycmVudE91dGxpbmVQYXlsb2FkLnBkZkpzQ2hpbGRyZW47XG4gICAgICAgIGZvciAoY29uc3QgcGRmSnNDaGlsZCBvZiBjdXJyZW50UGRmSnNDaGlsZHJlbikge1xuICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLnNpZ25hbC50aHJvd0lmQWJvcnRlZCgpO1xuXG4gICAgICAgICAgICBjb25zdCBzaW1wbGVDaGlsZCA9IHtcbiAgICAgICAgICAgICAgICB0OiBwZGZKc0NoaWxkLnRpdGxlLFxuICAgICAgICAgICAgICAgIC8vIFRoZSBwYWdlTnVtYmVyIGlzIHJlc29sdmVkIGxhdGVyLlxuICAgICAgICAgICAgICAgIHA6IC0xLFxuICAgICAgICAgICAgICAgIGM6IFtdLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHBhcmVudENoaWxkcmVuQXJyYXkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRDaGlsZHJlbkFycmF5LnB1c2goc2ltcGxlQ2hpbGQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3BMZXZlbEVudHJpZXMucHVzaChzaW1wbGVDaGlsZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwZGZKc0NoaWxkLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBvdXRsaW5lUXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHBkZkpzQ2hpbGRyZW46IHBkZkpzQ2hpbGQuaXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFNpbXBsZUNoaWxkcmVuQXJyYXk6IHNpbXBsZUNoaWxkLmMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlc29sdmUgdGhlIHBhZ2UgbnVtYmVyLiBOb3RlIHRoYXQgZGVzdCBvcHRpb25zIGNhbiBiZSBhIHN0cmluZ1xuICAgICAgICAgICAgLy8gb3IgYW4gb2JqZWN0IGFjY29yZGluZyB0byB0aGUgdGhlIFBERiBzcGVjLlxuICAgICAgICAgICAgY29uc3QgZGVzdCA9ICh0eXBlb2YgcGRmSnNDaGlsZC5kZXN0ID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgID8gYXdhaXQgcGRmRG9jLmdldERlc3RpbmF0aW9uKHBkZkpzQ2hpbGQuZGVzdCkgOiBwZGZKc0NoaWxkLmRlc3Q7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkZXN0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RSZWYgPSBkZXN0WzBdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVzdFJlZiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICBwYWdlTnVtYmVyUHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHBkZkRvYy5nZXRQYWdlSW5kZXgoZGVzdFJlZikudGhlbihmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbXBsZUNoaWxkLnAgPSBwYXJzZUludChpbmRleCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInBkZkRvYy5nZXRQYWdlSW5kZXggZXJyb3I6IFwiICsgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbXBsZUNoaWxkLnAgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2ltcGxlQ2hpbGQucCA9IE51bWJlci5pc0ludGVnZXIoZGVzdFJlZikgPyBkZXN0UmVmICsgMSA6IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IFByb21pc2UuYWxsKHBhZ2VOdW1iZXJQcm9taXNlcyk7XG5cbiAgICByZXR1cm4gdG9wTGV2ZWxFbnRyaWVzO1xufVxuXG5mdW5jdGlvbiByZW5kZXJQYWdlKHBhZ2VOdW1iZXIsIHpvb20sIHByZXJlbmRlciwgcHJlcmVuZGVyVHJpZ2dlciA9IDApIHtcbiAgICBwYWdlUmVuZGVyaW5nID0gdHJ1ZTtcbiAgICB1c2VSZW5kZXIgPSAhcHJlcmVuZGVyO1xuXG4gICAgbmV3UGFnZU51bWJlciA9IHBhZ2VOdW1iZXI7XG4gICAgbmV3Wm9vbVJhdGlvID0gY2hhbm5lbC5nZXRab29tUmF0aW8oKTtcbiAgICBvcmllbnRhdGlvbkRlZ3JlZXMgPSBjaGFubmVsLmdldERvY3VtZW50T3JpZW50YXRpb25EZWdyZWVzKCk7XG4gICAgY29uc29sZS5sb2coXCJwYWdlOiBcIiArIHBhZ2VOdW1iZXIgKyBcIiwgem9vbTogXCIgKyBuZXdab29tUmF0aW8gK1xuICAgICAgICAgICAgICAgIFwiLCBvcmllbnRhdGlvbkRlZ3JlZXM6IFwiICsgb3JpZW50YXRpb25EZWdyZWVzICsgXCIsIHByZXJlbmRlcjogXCIgKyBwcmVyZW5kZXIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gY2FjaGVbaV07XG4gICAgICAgIGlmIChjYWNoZWQucGFnZU51bWJlciA9PT0gcGFnZU51bWJlciAmJiBjYWNoZWQuem9vbVJhdGlvID09PSBuZXdab29tUmF0aW8gJiZcbiAgICAgICAgICAgICAgICBjYWNoZWQub3JpZW50YXRpb25EZWdyZWVzID09PSBvcmllbnRhdGlvbkRlZ3JlZXMpIHtcbiAgICAgICAgICAgIGlmICh1c2VSZW5kZXIpIHtcbiAgICAgICAgICAgICAgICBjYWNoZS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgY2FjaGUucHVzaChjYWNoZWQpO1xuXG4gICAgICAgICAgICAgICAgZGlzcGxheShjYWNoZWQuY2FudmFzLCB6b29tKTtcblxuICAgICAgICAgICAgICAgIHRleHRMYXllckRpdi5yZXBsYWNlV2l0aChjYWNoZWQudGV4dExheWVyRGl2KTtcbiAgICAgICAgICAgICAgICB0ZXh0TGF5ZXJEaXYgPSBjYWNoZWQudGV4dExheWVyRGl2O1xuICAgICAgICAgICAgICAgIHNldExheWVyVHJhbnNmb3JtKGNhY2hlZC5wYWdlV2lkdGgsIGNhY2hlZC5wYWdlSGVpZ2h0LCB0ZXh0TGF5ZXJEaXYpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tc2NhbGUtZmFjdG9yXCIsIG5ld1pvb21SYXRpby50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0ZXh0TGF5ZXJEaXYuaGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhZ2VSZW5kZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGRvUHJlcmVuZGVyKHBhZ2VOdW1iZXIsIHByZXJlbmRlclRyaWdnZXIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGRmRG9jLmdldFBhZ2UocGFnZU51bWJlcikudGhlbihmdW5jdGlvbihwYWdlKSB7XG4gICAgICAgIGlmIChtYXliZVJlbmRlck5leHRQYWdlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRab29tUmF0aW8gPSBnZXREZWZhdWx0Wm9vbVJhdGlvKHBhZ2UsIG9yaWVudGF0aW9uRGVncmVlcyk7XG5cbiAgICAgICAgaWYgKGNhY2hlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgem9vbVJhdGlvID0gZGVmYXVsdFpvb21SYXRpbztcbiAgICAgICAgICAgIG5ld1pvb21SYXRpbyA9IGRlZmF1bHRab29tUmF0aW87XG4gICAgICAgICAgICBjaGFubmVsLnNldFpvb21SYXRpbyhkZWZhdWx0Wm9vbVJhdGlvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvdGFsUm90YXRpb24gPSAob3JpZW50YXRpb25EZWdyZWVzICsgcGFnZS5yb3RhdGUpICUgMzYwO1xuICAgICAgICBjb25zdCB2aWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoe3NjYWxlOiBuZXdab29tUmF0aW8sIHJvdGF0aW9uOiB0b3RhbFJvdGF0aW9ufSk7XG5cbiAgICAgICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBuZXdab29tUmF0aW8gLyB6b29tUmF0aW87XG4gICAgICAgIGNvbnN0IHJhdGlvID0gZ2xvYmFsVGhpcy5kZXZpY2VQaXhlbFJhdGlvO1xuXG4gICAgICAgIGlmICh1c2VSZW5kZXIpIHtcbiAgICAgICAgICAgIGlmIChuZXdab29tUmF0aW8gIT09IHpvb21SYXRpbykge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gdmlld3BvcnQud2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB6b29tUmF0aW8gPSBuZXdab29tUmF0aW87XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoem9vbSA9PT0gMikge1xuICAgICAgICAgICAgdGV4dExheWVyRGl2LmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICBwYWdlUmVuZGVyaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIHpvb20gZm9jdXMgcmVsYXRpdmUgdG8gcGFnZSBvcmlnaW4sIHJhdGhlciB0aGFuIHNjcmVlbiBvcmlnaW5cbiAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZvY3VzWCA9IGNoYW5uZWwuZ2V0Wm9vbUZvY3VzWCgpIC8gcmF0aW8gKyBnbG9iYWxUaGlzLnNjcm9sbFg7XG4gICAgICAgICAgICBjb25zdCBnbG9iYWxGb2N1c1kgPSBjaGFubmVsLmdldFpvb21Gb2N1c1koKSAvIHJhdGlvICsgZ2xvYmFsVGhpcy5zY3JvbGxZO1xuXG4gICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbkZhY3RvciA9IHNjYWxlRmFjdG9yIC0gMTtcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbFggPSBnbG9iYWxGb2N1c1ggKiB0cmFuc2xhdGlvbkZhY3RvcjtcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbFkgPSBnbG9iYWxGb2N1c1kgKiB0cmFuc2xhdGlvbkZhY3RvcjtcbiAgICAgICAgICAgIHNjcm9sbEJ5KHNjcm9sbFgsIHNjcm9sbFkpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNvbHV0aW9uWSA9IHZpZXdwb3J0LmhlaWdodCAqIHJhdGlvO1xuICAgICAgICBjb25zdCByZXNvbHV0aW9uWCA9IHZpZXdwb3J0LndpZHRoICogcmF0aW87XG4gICAgICAgIGNvbnN0IHJlbmRlclBpeGVscyA9IHJlc29sdXRpb25ZICogcmVzb2x1dGlvblg7XG5cbiAgICAgICAgbGV0IG5ld1ZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgICAgIGNvbnN0IG1heFJlbmRlclBpeGVscyA9IGNoYW5uZWwuZ2V0TWF4UmVuZGVyUGl4ZWxzKCk7XG4gICAgICAgIGlmIChyZW5kZXJQaXhlbHMgPiBtYXhSZW5kZXJQaXhlbHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGByZXNvbHV0aW9uICR7cmVuZGVyUGl4ZWxzfSBleGNlZWRzIG1heGltdW0gYWxsb3dlZCAke21heFJlbmRlclBpeGVsc31gKTtcbiAgICAgICAgICAgIGNvbnN0IGFkanVzdGVkU2NhbGUgPSBNYXRoLnNxcnQobWF4UmVuZGVyUGl4ZWxzIC8gcmVuZGVyUGl4ZWxzKTtcbiAgICAgICAgICAgIG5ld1ZpZXdwb3J0ID0gcGFnZS5nZXRWaWV3cG9ydCh7XG4gICAgICAgICAgICAgICAgc2NhbGU6IG5ld1pvb21SYXRpbyAqIGFkanVzdGVkU2NhbGUsXG4gICAgICAgICAgICAgICAgcm90YXRpb246IHRvdGFsUm90YXRpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgbmV3Q2FudmFzLmhlaWdodCA9IG5ld1ZpZXdwb3J0LmhlaWdodCAqIHJhdGlvO1xuICAgICAgICBuZXdDYW52YXMud2lkdGggPSBuZXdWaWV3cG9ydC53aWR0aCAqIHJhdGlvO1xuICAgICAgICAvLyB1c2Ugb3JpZ2luYWwgdmlld3BvcnQgaGVpZ2h0IGZvciBDU1Mgem9vbVxuICAgICAgICBuZXdDYW52YXMuc3R5bGUuaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICBuZXdDYW52YXMuc3R5bGUud2lkdGggPSB2aWV3cG9ydC53aWR0aCArIFwicHhcIjtcbiAgICAgICAgY29uc3QgbmV3Q29udGV4dCA9IG5ld0NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiwgeyBhbHBoYTogZmFsc2UgfSk7XG4gICAgICAgIG5ld0NvbnRleHQuc2NhbGUocmF0aW8sIHJhdGlvKTtcblxuICAgICAgICB0YXNrID0gcGFnZS5yZW5kZXIoe1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dDogbmV3Q29udGV4dCxcbiAgICAgICAgICAgIHZpZXdwb3J0OiBuZXdWaWV3cG9ydFxuICAgICAgICB9KTtcblxuICAgICAgICB0YXNrLnByb21pc2UudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRhc2sgPSBudWxsO1xuXG4gICAgICAgICAgICBsZXQgcmVuZGVyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZVJlbmRlciB8fCByZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpc3BsYXkobmV3Q2FudmFzLCB6b29tKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW5kZXIoKTtcblxuICAgICAgICAgICAgY29uc3QgbmV3VGV4dExheWVyRGl2ID0gdGV4dExheWVyRGl2LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgY29uc3QgdGV4dExheWVyID0gbmV3IFRleHRMYXllcih7XG4gICAgICAgICAgICAgICAgdGV4dENvbnRlbnRTb3VyY2U6IHBhZ2Uuc3RyZWFtVGV4dENvbnRlbnQoKSxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IG5ld1RleHRMYXllckRpdixcbiAgICAgICAgICAgICAgICB2aWV3cG9ydDogdmlld3BvcnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGFzayA9IHtcbiAgICAgICAgICAgICAgICBwcm9taXNlOiB0ZXh0TGF5ZXIucmVuZGVyKCksXG4gICAgICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB0ZXh0TGF5ZXIuY2FuY2VsKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0YXNrLnByb21pc2UudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIHJlbmRlcigpO1xuXG4gICAgICAgICAgICAgICAgc2V0TGF5ZXJUcmFuc2Zvcm0odmlld3BvcnQud2lkdGgsIHZpZXdwb3J0LmhlaWdodCwgbmV3VGV4dExheWVyRGl2KTtcbiAgICAgICAgICAgICAgICBpZiAodXNlUmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRMYXllckRpdi5yZXBsYWNlV2l0aChuZXdUZXh0TGF5ZXJEaXYpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0TGF5ZXJEaXYgPSBuZXdUZXh0TGF5ZXJEaXY7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tc2NhbGUtZmFjdG9yXCIsIG5ld1pvb21SYXRpby50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dExheWVyRGl2LmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjYWNoZS5sZW5ndGggPT09IG1heENhY2hlZCkge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWNoZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZU51bWJlcjogcGFnZU51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgem9vbVJhdGlvOiBuZXdab29tUmF0aW8sXG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uRGVncmVlczogb3JpZW50YXRpb25EZWdyZWVzLFxuICAgICAgICAgICAgICAgICAgICBjYW52YXM6IG5ld0NhbnZhcyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dExheWVyRGl2OiBuZXdUZXh0TGF5ZXJEaXYsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VXaWR0aDogdmlld3BvcnQud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIZWlnaHQ6IHZpZXdwb3J0LmhlaWdodFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcGFnZVJlbmRlcmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGRvUHJlcmVuZGVyKHBhZ2VOdW1iZXIsIHByZXJlbmRlclRyaWdnZXIpO1xuICAgICAgICAgICAgfSkuY2F0Y2goaGFuZGxlUmVuZGVyaW5nRXJyb3IpO1xuICAgICAgICB9KS5jYXRjaChoYW5kbGVSZW5kZXJpbmdFcnJvcik7XG4gICAgfSk7XG59XG5cbmdsb2JhbFRoaXMub25SZW5kZXJQYWdlID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICBpZiAocGFnZVJlbmRlcmluZykge1xuICAgICAgICBpZiAobmV3UGFnZU51bWJlciA9PT0gY2hhbm5lbC5nZXRQYWdlKCkgJiYgbmV3Wm9vbVJhdGlvID09PSBjaGFubmVsLmdldFpvb21SYXRpbygpICYmXG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb25EZWdyZWVzID09PSBjaGFubmVsLmdldERvY3VtZW50T3JpZW50YXRpb25EZWdyZWVzKCkpIHtcbiAgICAgICAgICAgIHVzZVJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXJQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgcmVuZGVyUGVuZGluZ1pvb20gPSB6b29tO1xuICAgICAgICBpZiAodGFzayAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVuZGVyUGFnZShjaGFubmVsLmdldFBhZ2UoKSwgem9vbSwgZmFsc2UpO1xuICAgIH1cbn07XG5cbmdsb2JhbFRoaXMuaXNUZXh0U2VsZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdsb2JhbFRoaXMuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSAhPT0gXCJcIjtcbn07XG5cbmdsb2JhbFRoaXMuZ2V0RG9jdW1lbnRPdXRsaW5lID0gZnVuY3Rpb24gKCkge1xuICAgIHBkZkRvYy5nZXRPdXRsaW5lKCkudGhlbihmdW5jdGlvbihvdXRsaW5lKSB7XG4gICAgICAgIGdldFNpbXBsaWZpZWRPdXRsaW5lKG91dGxpbmUsIG91dGxpbmVBYm9ydCkudGhlbihmdW5jdGlvbihvdXRsaW5lRW50cmllcykge1xuICAgICAgICAgICAgaWYgKG91dGxpbmVFbnRyaWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbC5zZXREb2N1bWVudE91dGxpbmUoSlNPTi5zdHJpbmdpZnkob3V0bGluZUVudHJpZXMpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbC5zZXREb2N1bWVudE91dGxpbmUobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImdldFNpbXBsaWZpZWRPdXRsaW5lIGVycm9yOiBcIiArIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJwZGZEb2MuZ2V0T3V0bGluZSBlcnJvcjogXCIgKyBlcnJvcik7XG4gICAgfSk7XG59O1xuXG5nbG9iYWxUaGlzLmFib3J0RG9jdW1lbnRPdXRsaW5lID0gZnVuY3Rpb24gKCkge1xuICAgIG91dGxpbmVBYm9ydC5hYm9ydCgpO1xuICAgIG91dGxpbmVBYm9ydCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbn07XG5cbmdsb2JhbFRoaXMudG9nZ2xlVGV4dExheWVyVmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgdGV4dExheWVyRm9yZWdyb3VuZCA9IFwicmVkXCI7XG4gICAgbGV0IHRleHRMYXllck9wYWNpdHkgPSAxO1xuICAgIGlmIChpc1RleHRMYXllclZpc2libGUpIHtcbiAgICAgICAgdGV4dExheWVyRm9yZWdyb3VuZCA9IFwidHJhbnNwYXJlbnRcIjtcbiAgICAgICAgdGV4dExheWVyT3BhY2l0eSA9IDAuMjtcbiAgICB9XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS10ZXh0LWxheWVyLWZvcmVncm91bmRcIiwgdGV4dExheWVyRm9yZWdyb3VuZCk7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS10ZXh0LWxheWVyLW9wYWNpdHlcIiwgdGV4dExheWVyT3BhY2l0eS50b1N0cmluZygpKTtcbiAgICBpc1RleHRMYXllclZpc2libGUgPSAhaXNUZXh0TGF5ZXJWaXNpYmxlO1xufTtcblxuZ2xvYmFsVGhpcy5sb2FkRG9jdW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgcGRmUGFzc3dvcmQgPSBjaGFubmVsLmdldFBhc3N3b3JkKCk7XG4gICAgY29uc3QgbG9hZGluZ1Rhc2sgPSBnZXREb2N1bWVudCh7XG4gICAgICAgIHVybDogXCJodHRwczovL2xvY2FsaG9zdC9wbGFjZWhvbGRlci5wZGZcIixcbiAgICAgICAgY01hcFVybDogXCJodHRwczovL2xvY2FsaG9zdC9jbWFwcy9cIixcbiAgICAgICAgY01hcFBhY2tlZDogdHJ1ZSxcbiAgICAgICAgcGFzc3dvcmQ6IHBkZlBhc3N3b3JkLFxuICAgICAgICBpc0V2YWxTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgICAgICAvLyBJZiBhIGZvbnQgaXNuJ3QgZW1iZWRkZWQsIHRoZSB2aWV3ZXIgZmFsbHMgYmFjayB0byBkZWZhdWx0IHN5c3RlbSBmb250cy4gT24gQW5kcm9pZCxcbiAgICAgICAgLy8gdGhlcmUgb2Z0ZW4gaXNuJ3QgYSBnb29kIHN1YnN0aXR1dGlvbiBwcm92aWRlZCBieSB0aGUgT1MsIHNvIHdlIG5lZWQgdG8gYnVuZGxlIHN0YW5kYXJkXG4gICAgICAgIC8vIGZvbnRzIHRvIGltcHJvdmUgdGhlIHJlbmRlcmluZyBvZiBjZXJ0YWluIFBERnM6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL3BkZi5qcy9wdWxsLzE4NDY1XG4gICAgICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE4ODI2MTNcbiAgICAgICAgdXNlU3lzdGVtRm9udHM6IGZhbHNlLFxuICAgICAgICBzdGFuZGFyZEZvbnREYXRhVXJsOiBcImh0dHBzOi8vbG9jYWxob3N0L3N0YW5kYXJkX2ZvbnRzL1wiXG4gICAgfSk7XG4gICAgbG9hZGluZ1Rhc2sub25QYXNzd29yZCA9IChfLCBlcnJvcikgPT4ge1xuICAgICAgICBpZiAoZXJyb3IgPT09IFBhc3N3b3JkUmVzcG9uc2VzLk5FRURfUEFTU1dPUkQpIHtcbiAgICAgICAgICAgIGNoYW5uZWwuc2hvd1Bhc3N3b3JkUHJvbXB0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IgPT09IFBhc3N3b3JkUmVzcG9uc2VzLklOQ09SUkVDVF9QQVNTV09SRCkge1xuICAgICAgICAgICAgY2hhbm5lbC5pbnZhbGlkUGFzc3dvcmQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBsb2FkaW5nVGFzay5wcm9taXNlLnRoZW4oZnVuY3Rpb24gKG5ld0RvYykge1xuICAgICAgICBjaGFubmVsLm9uTG9hZGVkKCk7XG4gICAgICAgIHBkZkRvYyA9IG5ld0RvYztcbiAgICAgICAgY2hhbm5lbC5zZXROdW1QYWdlcyhwZGZEb2MubnVtUGFnZXMpO1xuICAgICAgICBwZGZEb2MuZ2V0TWV0YWRhdGEoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjaGFubmVsLnNldERvY3VtZW50UHJvcGVydGllcyhKU09OLnN0cmluZ2lmeShkYXRhLmluZm8pKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImdldE1ldGFkYXRhIGVycm9yOiBcIiArIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHBkZkRvYy5nZXRPdXRsaW5lKCkudGhlbihmdW5jdGlvbihvdXRsaW5lKSB7XG4gICAgICAgICAgICBjaGFubmVsLnNldEhhc0RvY3VtZW50T3V0bGluZShvdXRsaW5lICYmIG91dGxpbmUubGVuZ3RoID4gMCk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImdldE91dGxpbmUgZXJyb3I6IFwiICsgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVuZGVyUGFnZShjaGFubmVsLmdldFBhZ2UoKSwgZmFsc2UsIGZhbHNlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uLm5hbWUgKyBcIjogXCIgKyByZWFzb24ubWVzc2FnZSk7XG4gICAgfSk7XG59O1xuXG5nbG9iYWxUaGlzLm9ucmVzaXplID0gKCkgPT4ge1xuICAgIHNldExheWVyVHJhbnNmb3JtKGNhbnZhcy5jbGllbnRXaWR0aCwgY2FudmFzLmNsaWVudEhlaWdodCwgdGV4dExheWVyRGl2KTtcbn07XG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQ0EsSUFBQSxzQkFBQSxDQUFBOztBQ0FBLHNCQUFBLElBQUEsQ0FBQSxTQUFBLGVBQUE7QUFDQSxhQUFBLE9BQUEsWUFBQTtBQUNBLFVBQUEsb0JBQUEsRUFBQSxZQUFBLEdBQUEsS0FBQSxDQUFBLG9CQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFDQSxlQUFBLGVBQUEsU0FBQSxLQUFBLEVBQXlDLFlBQUEsTUFBQSxLQUFBLFdBQUEsR0FBQSxFQUFBLENBQXdDO01BQ2pGO0lBQ0E7RUFDQTs7O0FDUEEsc0JBQUEsSUFBQSxDQUFBLEtBQUEsU0FBQSxPQUFBLFVBQUEsZUFBQSxLQUFBLEtBQUEsSUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ29CQSxJQUFNQSxXQUVKLE9BQU9DLFlBQVksWUFDbkJBLFVBQVUsT0FBTyxzQkFDakIsQ0FBQ0EsUUFBUUMsU0FBU0MsTUFDbEIsRUFBRUYsUUFBUUMsU0FBU0UsWUFBWUgsUUFBUUksUUFBUUosUUFBUUksU0FBUztBQUVsRSxJQUFNQyxrQkFBa0IsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUN6QyxJQUFNQyx1QkFBdUIsQ0FBQyxNQUFPLEdBQUcsR0FBRyxNQUFPLEdBQUcsQ0FBQztBQUl0RCxJQUFNQyxjQUFjO0FBQ3BCLElBQU1DLHNCQUFzQjtBQUM1QixJQUFNQyxrQkFBa0JELHNCQUFzQkQ7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aXNOb2RlSlMiLCAicHJvY2VzcyIsICJ2ZXJzaW9ucyIsICJudyIsICJlbGVjdHJvbiIsICJ0eXBlIiwgIklERU5USVRZX01BVFJJWCIsICJGT05UX0lERU5USVRZX01BVFJJWCIsICJMSU5FX0ZBQ1RPUiIsICJMSU5FX0RFU0NFTlRfRkFDVE9SIiwgIkJBU0VMSU5FX0ZBQ1RPUiIsICJSZW5kZXJpbmdJbnRlbnRGbGFnIiwgIkFOWSIsICJESVNQTEFZIiwgIlBSSU5UIiwgIlNBVkUiLCAiQU5OT1RBVElPTlNfRk9STVMiLCAiQU5OT1RBVElPTlNfU1RPUkFHRSIsICJBTk5PVEFUSU9OU19ESVNBQkxFIiwgIklTX0VESVRJTkciLCAiT1BMSVNUIiwgIkFubm90YXRpb25Nb2RlIiwgIkRJU0FCTEUiLCAiRU5BQkxFIiwgIkVOQUJMRV9GT1JNUyIsICJFTkFCTEVfU1RPUkFHRSIsICJBbm5vdGF0aW9uRWRpdG9yUHJlZml4IiwgIkFubm90YXRpb25FZGl0b3JUeXBlIiwgIk5PTkUiLCAiRlJFRVRFWFQiLCAiSElHSExJR0hUIiwgIlNUQU1QIiwgIklOSyIsICJTSUdOQVRVUkUiLCAiQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUiLCAiUkVTSVpFIiwgIkNSRUFURSIsICJGUkVFVEVYVF9TSVpFIiwgIkZSRUVURVhUX0NPTE9SIiwgIkZSRUVURVhUX09QQUNJVFkiLCAiSU5LX0NPTE9SIiwgIklOS19USElDS05FU1MiLCAiSU5LX09QQUNJVFkiLCAiSElHSExJR0hUX0NPTE9SIiwgIkhJR0hMSUdIVF9ERUZBVUxUX0NPTE9SIiwgIkhJR0hMSUdIVF9USElDS05FU1MiLCAiSElHSExJR0hUX0ZSRUUiLCAiSElHSExJR0hUX1NIT1dfQUxMIiwgIkRSQVdfU1RFUCIsICJQZXJtaXNzaW9uRmxhZyIsICJNT0RJRllfQ09OVEVOVFMiLCAiQ09QWSIsICJNT0RJRllfQU5OT1RBVElPTlMiLCAiRklMTF9JTlRFUkFDVElWRV9GT1JNUyIsICJDT1BZX0ZPUl9BQ0NFU1NJQklMSVRZIiwgIkFTU0VNQkxFIiwgIlBSSU5UX0hJR0hfUVVBTElUWSIsICJUZXh0UmVuZGVyaW5nTW9kZSIsICJGSUxMIiwgIlNUUk9LRSIsICJGSUxMX1NUUk9LRSIsICJJTlZJU0lCTEUiLCAiRklMTF9BRERfVE9fUEFUSCIsICJTVFJPS0VfQUREX1RPX1BBVEgiLCAiRklMTF9TVFJPS0VfQUREX1RPX1BBVEgiLCAiQUREX1RPX1BBVEgiLCAiRklMTF9TVFJPS0VfTUFTSyIsICJBRERfVE9fUEFUSF9GTEFHIiwgIkltYWdlS2luZCIsICJHUkFZU0NBTEVfMUJQUCIsICJSR0JfMjRCUFAiLCAiUkdCQV8zMkJQUCIsICJBbm5vdGF0aW9uVHlwZSIsICJURVhUIiwgIkxJTksiLCAiTElORSIsICJTUVVBUkUiLCAiQ0lSQ0xFIiwgIlBPTFlHT04iLCAiUE9MWUxJTkUiLCAiVU5ERVJMSU5FIiwgIlNRVUlHR0xZIiwgIlNUUklLRU9VVCIsICJDQVJFVCIsICJQT1BVUCIsICJGSUxFQVRUQUNITUVOVCIsICJTT1VORCIsICJNT1ZJRSIsICJXSURHRVQiLCAiU0NSRUVOIiwgIlBSSU5URVJNQVJLIiwgIlRSQVBORVQiLCAiV0FURVJNQVJLIiwgIlRIUkVFRCIsICJSRURBQ1QiLCAiQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZSIsICJTT0xJRCIsICJEQVNIRUQiLCAiQkVWRUxFRCIsICJJTlNFVCIsICJVTkRFUkxJTkUiLCAiVmVyYm9zaXR5TGV2ZWwiLCAiRVJST1JTIiwgIldBUk5JTkdTIiwgIklORk9TIiwgIk9QUyIsICJkZXBlbmRlbmN5IiwgInNldExpbmVXaWR0aCIsICJzZXRMaW5lQ2FwIiwgInNldExpbmVKb2luIiwgInNldE1pdGVyTGltaXQiLCAic2V0RGFzaCIsICJzZXRSZW5kZXJpbmdJbnRlbnQiLCAic2V0RmxhdG5lc3MiLCAic2V0R1N0YXRlIiwgInNhdmUiLCAicmVzdG9yZSIsICJ0cmFuc2Zvcm0iLCAibW92ZVRvIiwgImxpbmVUbyIsICJjdXJ2ZVRvIiwgImN1cnZlVG8yIiwgImN1cnZlVG8zIiwgImNsb3NlUGF0aCIsICJyZWN0YW5nbGUiLCAic3Ryb2tlIiwgImNsb3NlU3Ryb2tlIiwgImZpbGwiLCAiZW9GaWxsIiwgImZpbGxTdHJva2UiLCAiZW9GaWxsU3Ryb2tlIiwgImNsb3NlRmlsbFN0cm9rZSIsICJjbG9zZUVPRmlsbFN0cm9rZSIsICJlbmRQYXRoIiwgImNsaXAiLCAiZW9DbGlwIiwgImJlZ2luVGV4dCIsICJlbmRUZXh0IiwgInNldENoYXJTcGFjaW5nIiwgInNldFdvcmRTcGFjaW5nIiwgInNldEhTY2FsZSIsICJzZXRMZWFkaW5nIiwgInNldEZvbnQiLCAic2V0VGV4dFJlbmRlcmluZ01vZGUiLCAic2V0VGV4dFJpc2UiLCAibW92ZVRleHQiLCAic2V0TGVhZGluZ01vdmVUZXh0IiwgInNldFRleHRNYXRyaXgiLCAibmV4dExpbmUiLCAic2hvd1RleHQiLCAic2hvd1NwYWNlZFRleHQiLCAibmV4dExpbmVTaG93VGV4dCIsICJuZXh0TGluZVNldFNwYWNpbmdTaG93VGV4dCIsICJzZXRDaGFyV2lkdGgiLCAic2V0Q2hhcldpZHRoQW5kQm91bmRzIiwgInNldFN0cm9rZUNvbG9yU3BhY2UiLCAic2V0RmlsbENvbG9yU3BhY2UiLCAic2V0U3Ryb2tlQ29sb3IiLCAic2V0U3Ryb2tlQ29sb3JOIiwgInNldEZpbGxDb2xvciIsICJzZXRGaWxsQ29sb3JOIiwgInNldFN0cm9rZUdyYXkiLCAic2V0RmlsbEdyYXkiLCAic2V0U3Ryb2tlUkdCQ29sb3IiLCAic2V0RmlsbFJHQkNvbG9yIiwgInNldFN0cm9rZUNNWUtDb2xvciIsICJzZXRGaWxsQ01ZS0NvbG9yIiwgInNoYWRpbmdGaWxsIiwgImJlZ2luSW5saW5lSW1hZ2UiLCAiYmVnaW5JbWFnZURhdGEiLCAiZW5kSW5saW5lSW1hZ2UiLCAicGFpbnRYT2JqZWN0IiwgIm1hcmtQb2ludCIsICJtYXJrUG9pbnRQcm9wcyIsICJiZWdpbk1hcmtlZENvbnRlbnQiLCAiYmVnaW5NYXJrZWRDb250ZW50UHJvcHMiLCAiZW5kTWFya2VkQ29udGVudCIsICJiZWdpbkNvbXBhdCIsICJlbmRDb21wYXQiLCAicGFpbnRGb3JtWE9iamVjdEJlZ2luIiwgInBhaW50Rm9ybVhPYmplY3RFbmQiLCAiYmVnaW5Hcm91cCIsICJlbmRHcm91cCIsICJiZWdpbkFubm90YXRpb24iLCAiZW5kQW5ub3RhdGlvbiIsICJwYWludEltYWdlTWFza1hPYmplY3QiLCAicGFpbnRJbWFnZU1hc2tYT2JqZWN0R3JvdXAiLCAicGFpbnRJbWFnZVhPYmplY3QiLCAicGFpbnRJbmxpbmVJbWFnZVhPYmplY3QiLCAicGFpbnRJbmxpbmVJbWFnZVhPYmplY3RHcm91cCIsICJwYWludEltYWdlWE9iamVjdFJlcGVhdCIsICJwYWludEltYWdlTWFza1hPYmplY3RSZXBlYXQiLCAicGFpbnRTb2xpZENvbG9ySW1hZ2VNYXNrIiwgImNvbnN0cnVjdFBhdGgiLCAic2V0U3Ryb2tlVHJhbnNwYXJlbnQiLCAic2V0RmlsbFRyYW5zcGFyZW50IiwgIkRyYXdPUFMiLCAiUGFzc3dvcmRSZXNwb25zZXMiLCAiTkVFRF9QQVNTV09SRCIsICJJTkNPUlJFQ1RfUEFTU1dPUkQiLCAidmVyYm9zaXR5IiwgInNldFZlcmJvc2l0eUxldmVsIiwgImxldmVsIiwgIk51bWJlciIsICJpc0ludGVnZXIiLCAiZ2V0VmVyYm9zaXR5TGV2ZWwiLCAiaW5mbyIsICJtc2ciLCAiY29uc29sZSIsICJsb2ciLCAid2FybiIsICJ1bnJlYWNoYWJsZSIsICJFcnJvciIsICJhc3NlcnQiLCAiY29uZCIsICJfaXNWYWxpZFByb3RvY29sIiwgInVybCIsICJwcm90b2NvbCIsICJjcmVhdGVWYWxpZEFic29sdXRlVXJsIiwgImJhc2VVcmwiLCAib3B0aW9ucyIsICJhZGREZWZhdWx0UHJvdG9jb2wiLCAic3RhcnRzV2l0aCIsICJkb3RzIiwgIm1hdGNoIiwgImxlbmd0aCIsICJ0cnlDb252ZXJ0RW5jb2RpbmciLCAic3RyaW5nVG9VVEY4U3RyaW5nIiwgImFic29sdXRlVXJsIiwgIlVSTCIsICJwYXJzZSIsICJzaGFkb3ciLCAib2JqIiwgInByb3AiLCAidmFsdWUiLCAibm9uU2VyaWFsaXphYmxlIiwgIk9iamVjdCIsICJkZWZpbmVQcm9wZXJ0eSIsICJlbnVtZXJhYmxlIiwgImNvbmZpZ3VyYWJsZSIsICJ3cml0YWJsZSIsICJCYXNlRXhjZXB0aW9uIiwgIkJhc2VFeGNlcHRpb25DbG9zdXJlIiwgIm1lc3NhZ2UiLCAibmFtZSIsICJwcm90b3R5cGUiLCAiY29uc3RydWN0b3IiLCAiUGFzc3dvcmRFeGNlcHRpb24iLCAiY29kZSIsICJVbmtub3duRXJyb3JFeGNlcHRpb24iLCAiZGV0YWlscyIsICJJbnZhbGlkUERGRXhjZXB0aW9uIiwgIlJlc3BvbnNlRXhjZXB0aW9uIiwgInN0YXR1cyIsICJtaXNzaW5nIiwgIkZvcm1hdEVycm9yIiwgIkFib3J0RXhjZXB0aW9uIiwgImJ5dGVzVG9TdHJpbmciLCAiYnl0ZXMiLCAidW5kZWZpbmVkIiwgIk1BWF9BUkdVTUVOVF9DT1VOVCIsICJTdHJpbmciLCAiZnJvbUNoYXJDb2RlIiwgImFwcGx5IiwgInN0ckJ1ZiIsICJpIiwgImNodW5rRW5kIiwgIk1hdGgiLCAibWluIiwgImNodW5rIiwgInN1YmFycmF5IiwgInB1c2giLCAiam9pbiIsICJzdHJpbmdUb0J5dGVzIiwgInN0ciIsICJVaW50OEFycmF5IiwgImNoYXJDb2RlQXQiLCAic3RyaW5nMzIiLCAib2JqZWN0RnJvbU1hcCIsICJtYXAiLCAib2JqIiwgIk9iamVjdCIsICJjcmVhdGUiLCAia2V5IiwgInZhbHVlIiwgImlzTGl0dGxlRW5kaWFuIiwgImJ1ZmZlcjgiLCAiVWludDhBcnJheSIsICJ2aWV3MzIiLCAiVWludDMyQXJyYXkiLCAiYnVmZmVyIiwgImlzRXZhbFN1cHBvcnRlZCIsICJGdW5jdGlvbiIsICJGZWF0dXJlVGVzdCIsICJzaGFkb3ciLCAiaXNPZmZzY3JlZW5DYW52YXNTdXBwb3J0ZWQiLCAiT2Zmc2NyZWVuQ2FudmFzIiwgImlzSW1hZ2VEZWNvZGVyU3VwcG9ydGVkIiwgIkltYWdlRGVjb2RlciIsICJwbGF0Zm9ybSIsICJuYXZpZ2F0b3IiLCAidXNlckFnZW50IiwgImlzQW5kcm9pZCIsICJpbmNsdWRlcyIsICJpc0xpbnV4IiwgImlzTWFjIiwgImlzV2luZG93cyIsICJpc0ZpcmVmb3giLCAiaXNDU1NSb3VuZFN1cHBvcnRlZCIsICJnbG9iYWxUaGlzIiwgIkNTUyIsICJzdXBwb3J0cyIsICJoZXhOdW1iZXJzIiwgIkFycmF5IiwgImZyb20iLCAia2V5cyIsICJuIiwgInRvU3RyaW5nIiwgInBhZFN0YXJ0IiwgIlV0aWwiLCAibWFrZUhleENvbG9yIiwgInIiLCAiZyIsICJiIiwgInRyYW5zZm9ybSIsICJtMSIsICJtMiIsICJhcHBseVRyYW5zZm9ybSIsICJwIiwgIm0iLCAieHQiLCAieXQiLCAiYXBwbHlJbnZlcnNlVHJhbnNmb3JtIiwgImQiLCAiZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3giLCAicDEiLCAicDIiLCAic2xpY2UiLCAicDMiLCAicDQiLCAiTWF0aCIsICJtaW4iLCAibWF4IiwgImludmVyc2VUcmFuc2Zvcm0iLCAic2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUiLCAidHJhbnNwb3NlIiwgImEiLCAiYyIsICJmaXJzdCIsICJzZWNvbmQiLCAic3FydCIsICJzeCIsICJzeSIsICJub3JtYWxpemVSZWN0IiwgInJlY3QiLCAiaW50ZXJzZWN0IiwgInJlY3QxIiwgInJlY3QyIiwgInhMb3ciLCAieEhpZ2giLCAieUxvdyIsICJ5SGlnaCIsICJwb2ludEJvdW5kaW5nQm94IiwgIngiLCAieSIsICJtaW5NYXgiLCAicmVjdEJvdW5kaW5nQm94IiwgIngwIiwgInkwIiwgIngxIiwgInkxIiwgIngyIiwgIngzIiwgInkyIiwgInkzIiwgInQiLCAibXQiLCAidHQiLCAidHR0IiwgImFicyIsICJkZWx0YSIsICJzcXJ0RGVsdGEiLCAiYTIiLCAiYmV6aWVyQm91bmRpbmdCb3giLCAic3RyaW5nVG9VVEY4U3RyaW5nIiwgInN0ciIsICJkZWNvZGVVUklDb21wb25lbnQiLCAiZXNjYXBlIiwgIk5vcm1hbGl6ZVJlZ2V4IiwgIk5vcm1hbGl6YXRpb25NYXAiLCAibm9ybWFsaXplVW5pY29kZSIsICJzdHIiLCAiTWFwIiwgInJlcGxhY2VBbGwiLCAiXyIsICJwMSIsICJwMiIsICJub3JtYWxpemUiLCAiZ2V0IiwgImdldFV1aWQiLCAiY3J5cHRvIiwgInJhbmRvbVVVSUQiLCAiYnVmIiwgIlVpbnQ4QXJyYXkiLCAiZ2V0UmFuZG9tVmFsdWVzIiwgImJ5dGVzVG9TdHJpbmciLCAiQW5ub3RhdGlvblByZWZpeCIsICJfaXNWYWxpZEV4cGxpY2l0RGVzdCIsICJ2YWxpZFJlZiIsICJ2YWxpZE5hbWUiLCAiZGVzdCIsICJBcnJheSIsICJpc0FycmF5IiwgImxlbmd0aCIsICJwYWdlIiwgInpvb20iLCAiYXJncyIsICJOdW1iZXIiLCAiaXNJbnRlZ2VyIiwgImFyZ3NMZW4iLCAiYWxsb3dOdWxsIiwgIm5hbWUiLCAiYXJnIiwgIk1hdGhDbGFtcCIsICJ2IiwgIm1pbiIsICJtYXgiLCAiTWF0aCIsICJ0b0Jhc2U2NFV0aWwiLCAiYXJyIiwgIlVpbnQ4QXJyYXkiLCAicHJvdG90eXBlIiwgInRvQmFzZTY0IiwgImJ0b2EiLCAiYnl0ZXNUb1N0cmluZyIsICJmcm9tQmFzZTY0VXRpbCIsICJzdHIiLCAiZnJvbUJhc2U2NCIsICJzdHJpbmdUb0J5dGVzIiwgImF0b2IiLCAiUHJvbWlzZSIsICJ0cnkiLCAiZm4iLCAiYXJncyIsICJyZXNvbHZlIiwgIk1hdGgiLCAic3VtUHJlY2lzZSIsICJudW1iZXJzIiwgInJlZHVjZSIsICJhIiwgImIiLCAiU1ZHX05TIiwgIlBpeGVsc1BlckluY2giLCAiQ1NTIiwgIlBERiIsICJQREZfVE9fQ1NTX1VOSVRTIiwgImZldGNoRGF0YSIsICJ1cmwiLCAidHlwZSIsICJpc1ZhbGlkRmV0Y2hVcmwiLCAiZG9jdW1lbnQiLCAiYmFzZVVSSSIsICJyZXNwb25zZSIsICJmZXRjaCIsICJvayIsICJFcnJvciIsICJzdGF0dXNUZXh0IiwgImFycmF5QnVmZmVyIiwgImJsb2IiLCAianNvbiIsICJ0ZXh0IiwgIlByb21pc2UiLCAicmVzb2x2ZSIsICJyZWplY3QiLCAicmVxdWVzdCIsICJYTUxIdHRwUmVxdWVzdCIsICJvcGVuIiwgInJlc3BvbnNlVHlwZSIsICJvbnJlYWR5c3RhdGVjaGFuZ2UiLCAicmVhZHlTdGF0ZSIsICJET05FIiwgInN0YXR1cyIsICJyZXNwb25zZVRleHQiLCAic2VuZCIsICJQYWdlVmlld3BvcnQiLCAiY29uc3RydWN0b3IiLCAidmlld0JveCIsICJ1c2VyVW5pdCIsICJzY2FsZSIsICJyb3RhdGlvbiIsICJvZmZzZXRYIiwgIm9mZnNldFkiLCAiZG9udEZsaXAiLCAiY2VudGVyWCIsICJjZW50ZXJZIiwgInJvdGF0ZUEiLCAicm90YXRlQiIsICJyb3RhdGVDIiwgInJvdGF0ZUQiLCAib2Zmc2V0Q2FudmFzWCIsICJvZmZzZXRDYW52YXNZIiwgIndpZHRoIiwgImhlaWdodCIsICJNYXRoIiwgImFicyIsICJ0cmFuc2Zvcm0iLCAicmF3RGltcyIsICJkaW1zIiwgInNoYWRvdyIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJwYWdlWCIsICJwYWdlWSIsICJjbG9uZSIsICJzbGljZSIsICJjb252ZXJ0VG9WaWV3cG9ydFBvaW50IiwgIngiLCAieSIsICJVdGlsIiwgImFwcGx5VHJhbnNmb3JtIiwgImNvbnZlcnRUb1ZpZXdwb3J0UmVjdGFuZ2xlIiwgInJlY3QiLCAidG9wTGVmdCIsICJib3R0b21SaWdodCIsICJjb252ZXJ0VG9QZGZQb2ludCIsICJhcHBseUludmVyc2VUcmFuc2Zvcm0iLCAiUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uIiwgIkJhc2VFeGNlcHRpb24iLCAibXNnIiwgImV4dHJhRGVsYXkiLCAiaXNEYXRhU2NoZW1lIiwgImlpIiwgImxlbmd0aCIsICJpIiwgInRyaW0iLCAic3Vic3RyaW5nIiwgInRvTG93ZXJDYXNlIiwgImlzUGRmRmlsZSIsICJmaWxlbmFtZSIsICJ0ZXN0IiwgImdldEZpbGVuYW1lRnJvbVVybCIsICJzcGxpdCIsICJsYXN0SW5kZXhPZiIsICJnZXRQZGZGaWxlbmFtZUZyb21VcmwiLCAiZGVmYXVsdEZpbGVuYW1lIiwgIndhcm4iLCAicmVVUkkiLCAicmVGaWxlbmFtZSIsICJzcGxpdFVSSSIsICJleGVjIiwgInN1Z2dlc3RlZEZpbGVuYW1lIiwgImluY2x1ZGVzIiwgImRlY29kZVVSSUNvbXBvbmVudCIsICJTdGF0VGltZXIiLCAic3RhcnRlZCIsICJPYmplY3QiLCAiY3JlYXRlIiwgInRpbWVzIiwgInRpbWUiLCAibmFtZSIsICJEYXRlIiwgIm5vdyIsICJ0aW1lRW5kIiwgInB1c2giLCAic3RhcnQiLCAiZW5kIiwgInRvU3RyaW5nIiwgIm91dEJ1ZiIsICJsb25nZXN0IiwgIm1heCIsICJwYWRFbmQiLCAiam9pbiIsICJiYXNlVXJsIiwgInJlcyIsICJVUkwiLCAicGFyc2UiLCAicHJvdG9jb2wiLCAibm9Db250ZXh0TWVudSIsICJlIiwgInByZXZlbnREZWZhdWx0IiwgInN0b3BFdmVudCIsICJzdG9wUHJvcGFnYXRpb24iLCAiUERGRGF0ZVN0cmluZyIsICJ0b0RhdGVPYmplY3QiLCAiaW5wdXQiLCAiUmVnRXhwIiwgIm1hdGNoZXMiLCAiZXhlYyIsICJ5ZWFyIiwgInBhcnNlSW50IiwgIm1vbnRoIiwgImRheSIsICJob3VyIiwgIm1pbnV0ZSIsICJzZWNvbmQiLCAidW5pdmVyc2FsVGltZVJlbGF0aW9uIiwgIm9mZnNldEhvdXIiLCAib2Zmc2V0TWludXRlIiwgIkRhdGUiLCAiVVRDIiwgImdldFhmYVBhZ2VWaWV3cG9ydCIsICJ4ZmFQYWdlIiwgInNjYWxlIiwgInJvdGF0aW9uIiwgIndpZHRoIiwgImhlaWdodCIsICJhdHRyaWJ1dGVzIiwgInN0eWxlIiwgInZpZXdCb3giLCAiUGFnZVZpZXdwb3J0IiwgInVzZXJVbml0IiwgImdldFJHQiIsICJjb2xvciIsICJzdGFydHNXaXRoIiwgImNvbG9yUkdCIiwgInNsaWNlIiwgInNwbGl0IiwgIm1hcCIsICJ4IiwgIndhcm4iLCAiZ2V0Q29sb3JWYWx1ZXMiLCAiY29sb3JzIiwgInNwYW4iLCAiZG9jdW1lbnQiLCAiY3JlYXRlRWxlbWVudCIsICJ2aXNpYmlsaXR5IiwgImJvZHkiLCAiYXBwZW5kIiwgIm5hbWUiLCAia2V5cyIsICJjb21wdXRlZENvbG9yIiwgIndpbmRvdyIsICJnZXRDb21wdXRlZFN0eWxlIiwgInNldCIsICJyZW1vdmUiLCAiZ2V0Q3VycmVudFRyYW5zZm9ybSIsICJjdHgiLCAiYSIsICJiIiwgImMiLCAiZCIsICJlIiwgImYiLCAiZ2V0VHJhbnNmb3JtIiwgImdldEN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlIiwgImludmVydFNlbGYiLCAic2V0TGF5ZXJEaW1lbnNpb25zIiwgImRpdiIsICJ2aWV3cG9ydCIsICJtdXN0RmxpcCIsICJtdXN0Um90YXRlIiwgInBhZ2VXaWR0aCIsICJwYWdlSGVpZ2h0IiwgInJhd0RpbXMiLCAidXNlUm91bmQiLCAiRmVhdHVyZVRlc3QiLCAiaXNDU1NSb3VuZFN1cHBvcnRlZCIsICJ3IiwgImgiLCAid2lkdGhTdHIiLCAiaGVpZ2h0U3RyIiwgInNldEF0dHJpYnV0ZSIsICJPdXRwdXRTY2FsZSIsICJjb25zdHJ1Y3RvciIsICJwaXhlbFJhdGlvIiwgInN4IiwgInN5IiwgInNjYWxlZCIsICJzeW1tZXRyaWMiLCAibGltaXRDYW52YXMiLCAibWF4UGl4ZWxzIiwgIm1heERpbSIsICJtYXhBcmVhU2NhbGUiLCAiSW5maW5pdHkiLCAibWF4V2lkdGhTY2FsZSIsICJtYXhIZWlnaHRTY2FsZSIsICJNYXRoIiwgInNxcnQiLCAibWF4U2NhbGUiLCAibWluIiwgImdsb2JhbFRoaXMiLCAiZGV2aWNlUGl4ZWxSYXRpbyIsICJTdXBwb3J0ZWRJbWFnZU1pbWVUeXBlcyIsICJFZGl0b3JUb29sYmFyIiwgImNvbnN0cnVjdG9yIiwgImVkaXRvciIsICJPYmplY3QiLCAiZnJlZXplIiwgImZyZWV0ZXh0IiwgImhpZ2hsaWdodCIsICJpbmsiLCAic3RhbXAiLCAic2lnbmF0dXJlIiwgInJlbmRlciIsICJlZGl0VG9vbGJhciIsICJkb2N1bWVudCIsICJjcmVhdGVFbGVtZW50IiwgImNsYXNzTGlzdCIsICJhZGQiLCAic2V0QXR0cmlidXRlIiwgInNpZ25hbCIsICJfdWlNYW5hZ2VyIiwgIl9zaWduYWwiLCAiYWRkRXZlbnRMaXN0ZW5lciIsICJub0NvbnRleHRNZW51IiwgImJ1dHRvbnMiLCAiY2xhc3NOYW1lIiwgImFwcGVuZCIsICJwb3NpdGlvbiIsICJ0b29sYmFyUG9zaXRpb24iLCAic3R5bGUiLCAieCIsICJkaXJlY3Rpb24iLCAiaW5zZXRJbmxpbmVFbmQiLCAidG9wIiwgImRpdiIsICJlIiwgInN0b3BQcm9wYWdhdGlvbiIsICJfZm9jdXNFdmVudHNBbGxvd2VkIiwgInN0b3BFdmVudCIsICJlbGVtZW50IiwgImJpbmQiLCAiY2FwdHVyZSIsICJoaWRlIiwgImhpZGVEcm9wZG93biIsICJzaG93IiwgInJlbW92ZSIsICJzaG93biIsICJlZGl0b3JUeXBlIiwgImJ1dHRvbiIsICJ0YWJJbmRleCIsICJkZWxldGUiLCAiZGl2aWRlciIsICJhZGRBbHRUZXh0IiwgImFsdFRleHQiLCAicHJlcGVuZCIsICJhZGRDb2xvclBpY2tlciIsICJjb2xvclBpY2tlciIsICJyZW5kZXJCdXR0b24iLCAiYWRkRWRpdFNpZ25hdHVyZUJ1dHRvbiIsICJzaWduYXR1cmVNYW5hZ2VyIiwgInJlbmRlckVkaXRCdXR0b24iLCAidXBkYXRlRWRpdFNpZ25hdHVyZUJ1dHRvbiIsICJkZXNjcmlwdGlvbiIsICJ0aXRsZSIsICJkZXN0cm95IiwgIkhpZ2hsaWdodFRvb2xiYXIiLCAidWlNYW5hZ2VyIiwgImJveGVzIiwgImlzTFRSIiwgImxhc3RZIiwgImxhc3RYIiwgImJveCIsICJ5IiwgImhlaWdodCIsICJ3aWR0aCIsICJwYXJlbnQiLCAic3BhbiIsICJoaWdobGlnaHRTZWxlY3Rpb24iLCAiYmluZEV2ZW50cyIsICJvYmoiLCAiZWxlbWVudCIsICJuYW1lcyIsICJuYW1lIiwgImFkZEV2ZW50TGlzdGVuZXIiLCAiYmluZCIsICJJZE1hbmFnZXIiLCAiaWQiLCAiQW5ub3RhdGlvbkVkaXRvclByZWZpeCIsICJJbWFnZU1hbmFnZXIiLCAiZ2V0VXVpZCIsICJfaXNTVkdGaXR0aW5nQ2FudmFzIiwgInN2ZyIsICJjYW52YXMiLCAiT2Zmc2NyZWVuQ2FudmFzIiwgImN0eCIsICJnZXRDb250ZXh0IiwgIndpbGxSZWFkRnJlcXVlbnRseSIsICJpbWFnZSIsICJJbWFnZSIsICJzcmMiLCAicHJvbWlzZSIsICJkZWNvZGUiLCAidGhlbiIsICJkcmF3SW1hZ2UiLCAiVWludDMyQXJyYXkiLCAiZ2V0SW1hZ2VEYXRhIiwgImRhdGEiLCAiYnVmZmVyIiwgInNoYWRvdyIsICJrZXkiLCAicmF3RGF0YSIsICJNYXAiLCAiZ2V0IiwgImJpdG1hcCIsICJyZWZDb3VudGVyIiwgImlzU3ZnIiwgInVybCIsICJmZXRjaERhdGEiLCAiRmlsZSIsICJmaWxlIiwgIkJsb2IiLCAidHlwZSIsICJtdXN0UmVtb3ZlQXNwZWN0UmF0aW9Qcm9taXNlIiwgImZpbGVSZWFkZXIiLCAiRmlsZVJlYWRlciIsICJpbWFnZUVsZW1lbnQiLCAiaW1hZ2VQcm9taXNlIiwgIlByb21pc2UiLCAicmVzb2x2ZSIsICJyZWplY3QiLCAib25sb2FkIiwgInN2Z1VybCIsICJyZXN1bHQiLCAib25lcnJvciIsICJyZWFkQXNEYXRhVVJMIiwgImNyZWF0ZUltYWdlQml0bWFwIiwgImUiLCAid2FybiIsICJzZXQiLCAiZ2V0RnJvbUZpbGUiLCAibGFzdE1vZGlmaWVkIiwgInNpemUiLCAiZ2V0RnJvbVVybCIsICJnZXRGcm9tQmxvYiIsICJibG9iUHJvbWlzZSIsICJibG9iIiwgImdldEZyb21JZCIsICJnZXRGcm9tQ2FudmFzIiwgIm9mZnNjcmVlbiIsICJ3aWR0aCIsICJoZWlnaHQiLCAidHJhbnNmZXJUb0ltYWdlQml0bWFwIiwgImdldFN2Z1VybCIsICJkZWxldGVJZCIsICJ0cmFuc2ZlckZyb21JbWFnZUJpdG1hcCIsICJjb252ZXJ0VG9CbG9iIiwgImNsb3NlIiwgImlzVmFsaWRJZCIsICJzdGFydHNXaXRoIiwgIkNvbW1hbmRNYW5hZ2VyIiwgImNvbnN0cnVjdG9yIiwgIm1heFNpemUiLCAiYWRkIiwgImNtZCIsICJ1bmRvIiwgInBvc3QiLCAibXVzdEV4ZWMiLCAiTmFOIiwgIm92ZXJ3cml0ZUlmU2FtZVR5cGUiLCAia2VlcFVuZG8iLCAic2F2ZSIsICJsZW5ndGgiLCAicHVzaCIsICJuZXh0IiwgInNwbGljZSIsICJyZWRvIiwgImhhc1NvbWV0aGluZ1RvVW5kbyIsICJoYXNTb21ldGhpbmdUb1JlZG8iLCAiY2xlYW5UeXBlIiwgImkiLCAiZGVzdHJveSIsICJLZXlib2FyZE1hbmFnZXIiLCAiY2FsbGJhY2tzIiwgImFsbEtleXMiLCAiU2V0IiwgImlzTWFjIiwgIkZlYXR1cmVUZXN0IiwgInBsYXRmb3JtIiwgImtleXMiLCAiY2FsbGJhY2siLCAib3B0aW9ucyIsICJpc01hY0tleSIsICJzbGljZSIsICJzcGxpdCIsICJhdCIsICJldmVudCIsICJhbHRLZXkiLCAiY3RybEtleSIsICJtZXRhS2V5IiwgInNoaWZ0S2V5IiwgInN0ciIsICJqb2luIiwgImV4ZWMiLCAic2VsZiIsICJoYXMiLCAiaW5mbyIsICJidWJibGVzIiwgImFyZ3MiLCAiY2hlY2tlciIsICJzdG9wRXZlbnQiLCAiQ29sb3JNYW5hZ2VyIiwgIl9jb2xvcnNNYXBwaW5nIiwgIl9jb2xvcnMiLCAiY29sb3JzIiwgImdldENvbG9yVmFsdWVzIiwgImNvbnZlcnQiLCAiY29sb3IiLCAicmdiIiwgImdldFJHQiIsICJ3aW5kb3ciLCAibWF0Y2hNZWRpYSIsICJtYXRjaGVzIiwgIlJHQiIsICJldmVyeSIsICJ4IiwgImdldEhleENvZGUiLCAiVXRpbCIsICJtYWtlSGV4Q29sb3IiLCAiQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlciIsICJBYm9ydENvbnRyb2xsZXIiLCAiX2VkaXRvclVuZG9CYXIiLCAiQW5ub3RhdGlvbkVkaXRvclR5cGUiLCAiTk9ORSIsICJpc0VkaXRpbmciLCAiaXNFbXB0eSIsICJoYXNTZWxlY3RlZEVkaXRvciIsICJoYXNTZWxlY3RlZFRleHQiLCAiVFJBTlNMQVRFX1NNQUxMIiwgIlRSQU5TTEFURV9CSUciLCAiX2tleWJvYXJkTWFuYWdlciIsICJwcm90byIsICJwcm90b3R5cGUiLCAiYXJyb3dDaGVja2VyIiwgImNvbnRhaW5zIiwgImRvY3VtZW50IiwgImFjdGl2ZUVsZW1lbnQiLCAidGFnTmFtZSIsICJoYXNTb21ldGhpbmdUb0NvbnRyb2wiLCAidGV4dElucHV0Q2hlY2tlciIsICJfc2VsZiIsICJ0YXJnZXQiLCAiZWwiLCAiSFRNTElucHV0RWxlbWVudCIsICJzbWFsbCIsICJiaWciLCAic2VsZWN0QWxsIiwgImRlbGV0ZSIsICJhZGROZXdFZGl0b3JGcm9tS2V5Ym9hcmQiLCAiSFRNTEJ1dHRvbkVsZW1lbnQiLCAiaXNFbnRlckhhbmRsZWQiLCAidW5zZWxlY3RBbGwiLCAidHJhbnNsYXRlU2VsZWN0ZWRFZGl0b3JzIiwgImNvbnRhaW5lciIsICJ2aWV3ZXIiLCAiYWx0VGV4dE1hbmFnZXIiLCAic2lnbmF0dXJlTWFuYWdlciIsICJldmVudEJ1cyIsICJwZGZEb2N1bWVudCIsICJwYWdlQ29sb3JzIiwgImhpZ2hsaWdodENvbG9ycyIsICJlbmFibGVIaWdobGlnaHRGbG9hdGluZ0J1dHRvbiIsICJlbmFibGVVcGRhdGVkQWRkSW1hZ2UiLCAiZW5hYmxlTmV3QWx0VGV4dFdoZW5BZGRpbmdJbWFnZSIsICJtbE1hbmFnZXIiLCAiZWRpdG9yVW5kb0JhciIsICJzdXBwb3J0c1BpbmNoVG9ab29tIiwgInNpZ25hbCIsICJfc2lnbmFsIiwgIl9ldmVudEJ1cyIsICJfb24iLCAib25FZGl0aW5nQWN0aW9uIiwgIm9uUGFnZUNoYW5naW5nIiwgIm9uU2NhbGVDaGFuZ2luZyIsICJvblJvdGF0aW9uQ2hhbmdpbmciLCAib25TZXRQcmVmZXJlbmNlIiwgImV2dCIsICJ1cGRhdGVQYXJhbXMiLCAidmFsdWUiLCAiYW5ub3RhdGlvblN0b3JhZ2UiLCAiZmlsdGVyRmFjdG9yeSIsICJ2aWV3UGFyYW1ldGVycyIsICJyZWFsU2NhbGUiLCAiUGl4ZWxzUGVySW5jaCIsICJQREZfVE9fQ1NTX1VOSVRTIiwgInJvdGF0aW9uIiwgImlzU2hpZnRLZXlEb3duIiwgIl9zdXBwb3J0c1BpbmNoVG9ab29tIiwgImFib3J0IiwgImxheWVyIiwgInZhbHVlcyIsICJjbGVhciIsICJoaWRlIiwgImNsZWFyVGltZW91dCIsICJjb21iaW5lZFNpZ25hbCIsICJhYyIsICJBYm9ydFNpZ25hbCIsICJhbnkiLCAidXNlTmV3QWx0VGV4dEZsb3ciLCAidXNlTmV3QWx0VGV4dFdoZW5BZGRpbmdJbWFnZSIsICJoY21GaWx0ZXIiLCAiYWRkSENNRmlsdGVyIiwgImZvcmVncm91bmQiLCAiYmFja2dyb3VuZCIsICJkaXJlY3Rpb24iLCAiZ2V0Q29tcHV0ZWRTdHlsZSIsICJtYXAiLCAicGFpciIsICJ0cmltIiwgImhpZ2hsaWdodENvbG9yTmFtZXMiLCAiQXJyYXkiLCAiZnJvbSIsICJyZXZlcnNlIiwgInNldEN1cnJlbnREcmF3aW5nU2Vzc2lvbiIsICJkaXNhYmxlVXNlclNlbGVjdCIsICJzZXRNYWluSGlnaGxpZ2h0Q29sb3JQaWNrZXIiLCAiY29sb3JQaWNrZXIiLCAiZWRpdEFsdFRleHQiLCAiZWRpdG9yIiwgImZpcnN0VGltZSIsICJnZXRTaWduYXR1cmUiLCAidWlNYW5hZ2VyIiwgInN3aXRjaFRvTW9kZSIsICJtb2RlIiwgIm9uIiwgIm9uY2UiLCAiZGlzcGF0Y2giLCAic291cmNlIiwgInNldFByZWZlcmVuY2UiLCAicGFnZU51bWJlciIsICJmb2N1c01haW5Db250YWluZXIiLCAiZm9jdXMiLCAiZmluZFBhcmVudCIsICJ5IiwgImxheWVyWCIsICJsYXllclkiLCAiZGl2IiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsICJjbGFzc0xpc3QiLCAidG9nZ2xlIiwgImFkZFNob3VsZFJlc2NhbGUiLCAicmVtb3ZlU2hvdWxkUmVzY2FsZSIsICJzY2FsZSIsICJjb21taXRPclJlbW92ZSIsICJwYWdlc1JvdGF0aW9uIiwgImFuY2hvck5vZGUiLCAibm9kZVR5cGUiLCAiTm9kZSIsICJURVhUX05PREUiLCAicGFyZW50RWxlbWVudCIsICJ0ZXh0TGF5ZXIiLCAiY3VycmVudExheWVyIiwgImhhc1RleHRMYXllciIsICJoaWdobGlnaHRTZWxlY3Rpb24iLCAibWV0aG9kT2ZDcmVhdGlvbiIsICJzZWxlY3Rpb24iLCAiZ2V0U2VsZWN0aW9uIiwgImlzQ29sbGFwc2VkIiwgImFuY2hvck9mZnNldCIsICJmb2N1c05vZGUiLCAiZm9jdXNPZmZzZXQiLCAidGV4dCIsICJ0b1N0cmluZyIsICJhbmNob3JFbGVtZW50IiwgImNsb3Nlc3QiLCAiYm94ZXMiLCAiZ2V0U2VsZWN0aW9uQm94ZXMiLCAiZW1wdHkiLCAiaXNOb25lTW9kZSIsICJjcmVhdGVBbmRBZGROZXdFZGl0b3IiLCAic2hvd0FsbEVkaXRvcnMiLCAiSElHSExJR0hUIiwgIkhpZ2hsaWdodFRvb2xiYXIiLCAic2hvdyIsICJhZGRUb0Fubm90YXRpb25TdG9yYWdlIiwgInNldFZhbHVlIiwgImFjdGl2ZUxheWVyIiwgInRvZ2dsZURyYXdpbmciLCAicG9pbnRlcnVwIiwgImJ1dHRvbiIsICJibHVyIiwgImhhc1NlbGVjdGlvbiIsICJfZm9jdXNFdmVudHNBbGxvd2VkIiwgImxhc3RFZGl0b3IiLCAibGFzdEFjdGl2ZUVsZW1lbnQiLCAia2V5ZG93biIsICJrZXl1cCIsICJjb3B5IiwgImN1dCIsICJwYXN0ZSIsICJkcmFnT3ZlciIsICJkcm9wIiwgImFkZEVkaXRMaXN0ZW5lcnMiLCAicmVtb3ZlRWRpdExpc3RlbmVycyIsICJkYXRhVHJhbnNmZXIiLCAiaXRlbXMiLCAiZWRpdG9yVHlwZSIsICJpc0hhbmRsaW5nTWltZUZvclBhc3RpbmciLCAiZHJvcEVmZmVjdCIsICJwcmV2ZW50RGVmYXVsdCIsICJpdGVtIiwgImVkaXRvcnMiLCAic2VyaWFsaXplZCIsICJzZXJpYWxpemUiLCAiY2xpcGJvYXJkRGF0YSIsICJzZXREYXRhIiwgIkpTT04iLCAic3RyaW5naWZ5IiwgImdldERhdGEiLCAicGFyc2UiLCAiZXgiLCAibWVzc2FnZSIsICJpc0FycmF5IiwgIm5ld0VkaXRvcnMiLCAiZGVzZXJpYWxpemVkRWRpdG9yIiwgImRlc2VyaWFsaXplIiwgInJlbW92ZSIsICJhZGRDb21tYW5kcyIsICJpc0VkaXRvckhhbmRsaW5nS2V5Ym9hcmQiLCAiZGV0YWlscyIsICJoYXNDaGFuZ2VkIiwgIk9iamVjdCIsICJlbnRyaWVzIiwgInNvbWUiLCAiYXNzaWduIiwgIkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlIiwgIkhJR0hMSUdIVF9GUkVFIiwgInNldEVkaXRpbmdTdGF0ZSIsICJyZWdpc3RlckVkaXRvclR5cGVzIiwgInR5cGVzIiwgImRlZmF1bHRQcm9wZXJ0aWVzVG9VcGRhdGUiLCAiZ2V0SWQiLCAiZ2V0TGF5ZXIiLCAicGFnZUluZGV4IiwgImN1cnJlbnRQYWdlSW5kZXgiLCAiYWRkTGF5ZXIiLCAiZW5hYmxlIiwgImRpc2FibGUiLCAicmVtb3ZlTGF5ZXIiLCAidXBkYXRlTW9kZSIsICJlZGl0SWQiLCAiaXNGcm9tS2V5Ym9hcmQiLCAid2l0aFJlc29sdmVycyIsICJTSUdOQVRVUkUiLCAibG9hZFNpZ25hdHVyZXMiLCAiYW5ub3RhdGlvbkVsZW1lbnRJZCIsICJzZXRTZWxlY3RlZCIsICJlbnRlckluRWRpdE1vZGUiLCAidW5zZWxlY3QiLCAiY2FuQ3JlYXRlTmV3RW1wdHlFZGl0b3IiLCAiYWRkTmV3RWRpdG9yIiwgInVwZGF0ZVRvb2xiYXIiLCAiQ1JFQVRFIiwgIkhJR0hMSUdIVF9ERUZBVUxUX0NPTE9SIiwgInVwZGF0ZUNvbG9yIiwgIkhJR0hMSUdIVF9TSE9XX0FMTCIsICJhY3Rpb24iLCAidXBkYXRlRGVmYXVsdFBhcmFtcyIsICJ2aXNpYmxlIiwgInVwZGF0ZUJ1dHRvbiIsICJzdGF0ZSIsICJlbmFibGVXYWl0aW5nIiwgIm11c3RXYWl0IiwgImRpc2FibGVDbGljayIsICJlbmFibGVDbGljayIsICJwcm9taXNlcyIsICJhbGwiLCAiZ2V0RWRpdG9ycyIsICJnZXRFZGl0b3IiLCAiYWRkRWRpdG9yIiwgInJlbW92ZUVkaXRvciIsICJzZXRUaW1lb3V0IiwgImFkZERlbGV0ZWRBbm5vdGF0aW9uRWxlbWVudCIsICJhZGRDaGFuZ2VkRXhpc3RpbmdBbm5vdGF0aW9uIiwgImRlbGV0ZWQiLCAiaXNEZWxldGVkQW5ub3RhdGlvbkVsZW1lbnQiLCAicmVtb3ZlRGVsZXRlZEFubm90YXRpb25FbGVtZW50IiwgInJlbW92ZUNoYW5nZWRFeGlzdGluZ0Fubm90YXRpb24iLCAiYWRkT3JSZWJ1aWxkIiwgInNldEFjdGl2ZUVkaXRvciIsICJwcm9wZXJ0aWVzVG9VcGRhdGUiLCAiZWQiLCAidXBkYXRlVUkiLCAidXBkYXRlVUlGb3JEZWZhdWx0UHJvcGVydGllcyIsICJ0b2dnbGVTZWxlY3RlZCIsICJzZWxlY3QiLCAiaXNTZWxlY3RlZCIsICJmaXJzdFNlbGVjdGVkRWRpdG9yIiwgInBhcmFtcyIsICJjbGVhblVuZG9TdGFjayIsICJkcmF3aW5nRWRpdG9yIiwgImVuZERyYXdpbmdTZXNzaW9uIiwgImNvbW1pdCIsICJub0NvbW1pdCIsICJ0b3RhbFgiLCAidG90YWxZIiwgIlRJTUVfVE9fV0FJVCIsICJ0cmFuc2xhdGVJblBhZ2UiLCAidHJhbnNsYXRpb25Eb25lIiwgInNldFVwRHJhZ1Nlc3Npb24iLCAic2F2ZWRYIiwgInNhdmVkWSIsICJzYXZlZFBhZ2VJbmRleCIsICJuZXdYIiwgIm5ld1kiLCAibmV3UGFnZUluZGV4IiwgImVuZERyYWdTZXNzaW9uIiwgIm11c3RCZUFkZGVkSW5VbmRvU3RhY2siLCAibW92ZSIsICJwYXJlbnQiLCAiX3NldFBhcmVudEFuZFBvc2l0aW9uIiwgImRyYWdTZWxlY3RlZEVkaXRvcnMiLCAidHgiLCAidHkiLCAiZHJhZyIsICJyZWJ1aWxkIiwgImNoYW5nZVBhcmVudCIsICJnZXRBY3RpdmUiLCAic2hvdWxkR2V0S2V5Ym9hcmRFdmVudHMiLCAiaXNBY3RpdmUiLCAiZ2V0TW9kZSIsICJpbWFnZU1hbmFnZXIiLCAiaWkiLCAicmFuZ2VDb3VudCIsICJnZXRSYW5nZUF0IiwgImNvbW1vbkFuY2VzdG9yQ29udGFpbmVyIiwgInBhcmVudFdpZHRoIiwgInBhcmVudEhlaWdodCIsICJyb3RhdG9yIiwgImdldEF0dHJpYnV0ZSIsICJ3IiwgImgiLCAicmFuZ2UiLCAiY29sbGFwc2VkIiwgImdldENsaWVudFJlY3RzIiwgInJlbmRlckFubm90YXRpb25FbGVtZW50IiwgImFubm90YXRpb24iLCAiZWRpdG9ySWQiLCAiZ2V0UmF3VmFsdWUiLCAiaGFzQmVlbk1vZGlmaWVkIiwgInNldE1pc3NpbmdDYW52YXMiLCAiYW5ub3RhdGlvbklkIiwgInNldENhbnZhcyIsICJhZGRNaXNzaW5nQ2FudmFzIiwgIkFsdFRleHQiLCAiX2wxMG4iLCAiY29uc3RydWN0b3IiLCAiZWRpdG9yIiwgIl91aU1hbmFnZXIiLCAidXNlTmV3QWx0VGV4dEZsb3ciLCAiT2JqZWN0IiwgImZyZWV6ZSIsICJhZGRlZCIsICJtaXNzaW5nIiwgInJldmlldyIsICJpbml0aWFsaXplIiwgImwxMG4iLCAicmVuZGVyIiwgImFsdFRleHQiLCAiZG9jdW1lbnQiLCAiY3JlYXRlRWxlbWVudCIsICJjbGFzc05hbWUiLCAidGFiSW5kZXgiLCAibGFiZWwiLCAiYXBwZW5kIiwgImNsYXNzTGlzdCIsICJhZGQiLCAic2V0QXR0cmlidXRlIiwgInNpZ25hbCIsICJfc2lnbmFsIiwgImFkZEV2ZW50TGlzdGVuZXIiLCAibm9Db250ZXh0TWVudSIsICJldmVudCIsICJzdG9wUHJvcGFnYXRpb24iLCAib25DbGljayIsICJwcmV2ZW50RGVmYXVsdCIsICJlZGl0QWx0VGV4dCIsICJfcmVwb3J0VGVsZW1ldHJ5IiwgImFjdGlvbiIsICJkYXRhIiwgImNhcHR1cmUiLCAidGFyZ2V0IiwgImtleSIsICJndWVzc2VkVGV4dCIsICJmaW5pc2giLCAiZm9jdXMiLCAiZm9jdXNWaXNpYmxlIiwgImlzRW1wdHkiLCAiaGFzRGF0YSIsICJzZXRHdWVzc2VkVGV4dCIsICJnZXQiLCAiZ2VuZXJhdGVkQWx0VGV4dCIsICJ0b2dnbGVBbHRUZXh0QmFkZ2UiLCAidmlzaWJpbGl0eSIsICJyZW1vdmUiLCAiYmFkZ2UiLCAiZGl2IiwgInRvZ2dsZSIsICJzZXJpYWxpemUiLCAiaXNGb3JDb3B5aW5nIiwgImRlY29yYXRpdmUiLCAidGV4dFdpdGhEaXNjbGFpbWVyIiwgImNhbmNlbCIsICJlbmFibGVkIiwgImNsZWFyVGltZW91dCIsICJkaXNhYmxlZCIsICJzaG93biIsICJkZXN0cm95IiwgImJ1dHRvbiIsICJ0b29sdGlwIiwgImlkIiwgIkRFTEFZX1RPX1NIT1dfVE9PTFRJUCIsICJvbmNlIiwgInNldFRpbWVvdXQiLCAicmVtb3ZlQXR0cmlidXRlIiwgInRleHRDb250ZW50IiwgInBhcmVudE5vZGUiLCAiZWxlbWVudCIsICJnZXRFbGVtZW50Rm9yQWx0VGV4dCIsICJUb3VjaE1hbmFnZXIiLCAiY29uc3RydWN0b3IiLCAiY29udGFpbmVyIiwgImlzUGluY2hpbmdEaXNhYmxlZCIsICJpc1BpbmNoaW5nU3RvcHBlZCIsICJvblBpbmNoU3RhcnQiLCAib25QaW5jaGluZyIsICJvblBpbmNoRW5kIiwgInNpZ25hbCIsICJBYm9ydENvbnRyb2xsZXIiLCAiQWJvcnRTaWduYWwiLCAiYW55IiwgImFkZEV2ZW50TGlzdGVuZXIiLCAiYmluZCIsICJwYXNzaXZlIiwgIk1JTl9UT1VDSF9ESVNUQU5DRV9UT19QSU5DSCIsICJPdXRwdXRTY2FsZSIsICJwaXhlbFJhdGlvIiwgImV2dCIsICJ0b3VjaGVzIiwgImxlbmd0aCIsICJwb2ludGVyRG93bkFDIiwgIm9wdHMiLCAiY2FwdHVyZSIsICJjYW5jZWxQb2ludGVyRG93biIsICJlIiwgInBvaW50ZXJUeXBlIiwgImFib3J0IiwgInN0b3BFdmVudCIsICJvcHQiLCAib25Ub3VjaEVuZCIsICJ0b3VjaDAiLCAidG91Y2gxIiwgImlkZW50aWZpZXIiLCAidG91Y2gwWCIsICJzY3JlZW5YIiwgInRvdWNoMFkiLCAic2NyZWVuWSIsICJ0b3VjaDFYIiwgInRvdWNoMVkiLCAic2NyZWVuMFgiLCAic2NyZWVuMFkiLCAic2NyZWVuMVgiLCAic2NyZWVuMVkiLCAidG91Y2hJbmZvIiwgInBUb3VjaDBYIiwgInBUb3VjaDBZIiwgInBUb3VjaDFYIiwgInBUb3VjaDFZIiwgInByZXZHYXBYIiwgInByZXZHYXBZIiwgImN1cnJHYXBYIiwgImN1cnJHYXBZIiwgImRpc3RhbmNlIiwgIk1hdGgiLCAiaHlwb3QiLCAicERpc3RhbmNlIiwgImFicyIsICJvcmlnaW4iLCAiZGVzdHJveSIsICJBbm5vdGF0aW9uRWRpdG9yIiwgIl9pc0NvcHkiLCAiX2VkaXRUb29sYmFyIiwgIl9pbml0aWFsT3B0aW9ucyIsICJPYmplY3QiLCAiY3JlYXRlIiwgIl9pbml0aWFsRGF0YSIsICJfaXNWaXNpYmxlIiwgIl91aU1hbmFnZXIiLCAiX2ZvY3VzRXZlbnRzQWxsb3dlZCIsICJfbDEwbiIsICJfbDEwblJlc2l6ZXIiLCAiX3pJbmRleCIsICJfYm9yZGVyTGluZVdpZHRoIiwgIl9jb2xvck1hbmFnZXIiLCAiQ29sb3JNYW5hZ2VyIiwgIl90ZWxlbWV0cnlUaW1lb3V0IiwgIl9yZXNpemVyS2V5Ym9hcmRNYW5hZ2VyIiwgInJlc2l6ZSIsICJwcm90b3R5cGUiLCAiX3Jlc2l6ZVdpdGhLZXlib2FyZCIsICJzbWFsbCIsICJBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyIiwgIlRSQU5TTEFURV9TTUFMTCIsICJiaWciLCAiVFJBTlNMQVRFX0JJRyIsICJzaGFkb3ciLCAiS2V5Ym9hcmRNYW5hZ2VyIiwgImFyZ3MiLCAiX3N0b3BSZXNpemluZ1dpdGhLZXlib2FyZCIsICJjb25zdHJ1Y3RvciIsICJwYXJhbWV0ZXJzIiwgInBhcmVudCIsICJpZCIsICJ3aWR0aCIsICJoZWlnaHQiLCAicGFnZUluZGV4IiwgIm5hbWUiLCAiZGl2IiwgInVpTWFuYWdlciIsICJhbm5vdGF0aW9uRWxlbWVudElkIiwgIl93aWxsS2VlcEFzcGVjdFJhdGlvIiwgImlzQ2VudGVyZWQiLCAiX3N0cnVjdFRyZWVQYXJlbnRJZCIsICJyb3RhdGlvbiIsICJyYXdEaW1zIiwgInBhZ2VXaWR0aCIsICJwYWdlSGVpZ2h0IiwgInBhZ2VYIiwgInBhZ2VZIiwgInZpZXdwb3J0IiwgInBhZ2VSb3RhdGlvbiIsICJ2aWV3UGFyYW1ldGVycyIsICJwYWdlRGltZW5zaW9ucyIsICJwYWdlVHJhbnNsYXRpb24iLCAicGFyZW50RGltZW5zaW9ucyIsICJ4IiwgInkiLCAiaXNBdHRhY2hlZFRvRE9NIiwgImRlbGV0ZWQiLCAiZWRpdG9yVHlwZSIsICJnZXRQcm90b3R5cGVPZiIsICJfdHlwZSIsICJpc0RyYXdlciIsICJfZGVmYXVsdExpbmVDb2xvciIsICJnZXRIZXhDb2RlIiwgImRlbGV0ZUFubm90YXRpb25FbGVtZW50IiwgImVkaXRvciIsICJmYWtlRWRpdG9yIiwgIkZha2VFZGl0b3IiLCAiZ2V0TmV4dElkIiwgImFkZFRvQW5ub3RhdGlvblN0b3JhZ2UiLCAiaW5pdGlhbGl6ZSIsICJsMTBuIiwgImZyZWV6ZSIsICJ0b3BMZWZ0IiwgInRvcE1pZGRsZSIsICJ0b3BSaWdodCIsICJtaWRkbGVSaWdodCIsICJib3R0b21SaWdodCIsICJib3R0b21NaWRkbGUiLCAiYm90dG9tTGVmdCIsICJtaWRkbGVMZWZ0IiwgInN0eWxlIiwgImdldENvbXB1dGVkU3R5bGUiLCAiZG9jdW1lbnQiLCAiZG9jdW1lbnRFbGVtZW50IiwgInBhcnNlRmxvYXQiLCAiZ2V0UHJvcGVydHlWYWx1ZSIsICJ1cGRhdGVEZWZhdWx0UGFyYW1zIiwgIl92YWx1ZSIsICJkZWZhdWx0UHJvcGVydGllc1RvVXBkYXRlIiwgImlzSGFuZGxpbmdNaW1lRm9yUGFzdGluZyIsICJtaW1lIiwgInBhc3RlIiwgIml0ZW0iLCAidW5yZWFjaGFibGUiLCAicHJvcGVydGllc1RvVXBkYXRlIiwgIl9pc0RyYWdnYWJsZSIsICJ2YWx1ZSIsICJjbGFzc0xpc3QiLCAidG9nZ2xlIiwgImlzRW50ZXJIYW5kbGVkIiwgImNlbnRlciIsICJwYXJlbnRSb3RhdGlvbiIsICJmaXhBbmRTZXRQb3NpdGlvbiIsICJhZGRDb21tYW5kcyIsICJwYXJhbXMiLCAiY3VycmVudExheWVyIiwgInNldEluQmFja2dyb3VuZCIsICJ6SW5kZXgiLCAic2V0SW5Gb3JlZ3JvdW5kIiwgInNldFBhcmVudCIsICJmb2N1c2luIiwgImV2ZW50IiwgInNldFNlbGVjdGVkIiwgImZvY3Vzb3V0IiwgInRhcmdldCIsICJyZWxhdGVkVGFyZ2V0IiwgImNsb3Nlc3QiLCAicHJldmVudERlZmF1bHQiLCAiaXNNdWx0aXBsZVNlbGVjdGlvbiIsICJjb21taXRPclJlbW92ZSIsICJpc0VtcHR5IiwgInJlbW92ZSIsICJjb21taXQiLCAic2V0QXQiLCAidHgiLCAidHkiLCAic2NyZWVuVG9QYWdlVHJhbnNsYXRpb24iLCAiX21vdmVBZnRlclBhc3RlIiwgImJhc2VYIiwgImJhc2VZIiwgInBhcmVudFdpZHRoIiwgInBhcmVudEhlaWdodCIsICJfb25UcmFuc2xhdGVkIiwgIl9vblRyYW5zbGF0aW5nIiwgInRyYW5zbGF0ZSIsICJ0cmFuc2xhdGVJblBhZ2UiLCAic2Nyb2xsSW50b1ZpZXciLCAiYmxvY2siLCAidHJhbnNsYXRpb25Eb25lIiwgImRyYWciLCAiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwgImZpbmROZXdQYXJlbnQiLCAiTWF0aCIsICJmbG9vciIsICJieCIsICJieSIsICJnZXRCYXNlVHJhbnNsYXRpb24iLCAibGVmdCIsICJ0b0ZpeGVkIiwgInRvcCIsICJfaGFzQmVlbk1vdmVkIiwgIl9oYXNCZWVuUmVzaXplZCIsICJfbXVzdEZpeFBvc2l0aW9uIiwgIk1hdGhDbGFtcCIsICJtb3ZlSW5ET00iLCAiYW5nbGUiLCAicGFnZVRyYW5zbGF0aW9uVG9TY3JlZW4iLCAicGFyZW50U2NhbGUiLCAicmVhbFNjYWxlIiwgInNldERpbXMiLCAiZml4RGltcyIsICJ3aWR0aFBlcmNlbnQiLCAiZW5kc1dpdGgiLCAiaGVpZ2h0UGVyY2VudCIsICJnZXRJbml0aWFsVHJhbnNsYXRpb24iLCAiY3JlYXRlRWxlbWVudCIsICJhZGQiLCAiY2xhc3NlcyIsICJzaWduYWwiLCAiX3NpZ25hbCIsICJhcHBlbmQiLCAic2V0QXR0cmlidXRlIiwgImFkZEV2ZW50TGlzdGVuZXIiLCAiYmluZCIsICJub0NvbnRleHRNZW51IiwgInRhYkluZGV4IiwgInByZXBlbmQiLCAiaXNNYWMiLCAiRmVhdHVyZVRlc3QiLCAicGxhdGZvcm0iLCAiYnV0dG9uIiwgImN0cmxLZXkiLCAic2F2ZWREcmFnZ2FibGUiLCAic2NyZWVuWCIsICJzY3JlZW5ZIiwgImFjIiwgIkFib3J0Q29udHJvbGxlciIsICJjb21iaW5lZFNpZ25hbCIsICJ0b2dnbGVQb2ludGVyRXZlbnRzIiwgIndpbmRvdyIsICJwYXNzaXZlIiwgImNhcHR1cmUiLCAic3RvcEV2ZW50IiwgInNhdmVkWCIsICJzYXZlZFkiLCAic2F2ZWRXaWR0aCIsICJzYXZlZEhlaWdodCIsICJzYXZlZFBhcmVudEN1cnNvciIsICJjdXJzb3IiLCAic2F2ZWRDdXJzb3IiLCAicG9pbnRlclVwQ2FsbGJhY2siLCAiYWJvcnQiLCAiX29uUmVzaXplZCIsICJuZXdYIiwgIm5ld1kiLCAibmV3V2lkdGgiLCAibmV3SGVpZ2h0IiwgImNtZCIsICJ1bmRvIiwgIm11c3RFeGVjIiwgIl9yb3VuZCIsICJyb3VuZCIsICJtaW5XaWR0aCIsICJNSU5fU0laRSIsICJtaW5IZWlnaHQiLCAicm90YXRpb25NYXRyaXgiLCAidHJhbnNmIiwgImludlJvdGF0aW9uTWF0cml4IiwgImludlRyYW5zZiIsICJnZXRQb2ludCIsICJnZXRPcHBvc2l0ZSIsICJpc0RpYWdvbmFsIiwgImlzSG9yaXpvbnRhbCIsICJ3IiwgImgiLCAicG9pbnQiLCAib3Bwb3NpdGVQb2ludCIsICJ0cmFuc2ZPcHBvc2l0ZVBvaW50IiwgIm9wcG9zaXRlWCIsICJvcHBvc2l0ZVkiLCAicmF0aW9YIiwgInJhdGlvWSIsICJkZWx0YVgiLCAiZGVsdGFZIiwgImZyb21LZXlib2FyZCIsICJsYXN0U2NyZWVuWCIsICJsYXN0U2NyZWVuWSIsICJvbGREaWFnIiwgImh5cG90IiwgIm1heCIsICJtaW4iLCAiYWJzIiwgIl9vblJlc2l6aW5nIiwgImFsdFRleHRGaW5pc2giLCAiZmluaXNoIiwgImFkZEVkaXRUb29sYmFyIiwgIkVkaXRvclRvb2xiYXIiLCAicmVuZGVyIiwgImFkZEFsdFRleHQiLCAicmVtb3ZlRWRpdFRvb2xiYXIiLCAiZGVzdHJveSIsICJhZGRDb250YWluZXIiLCAiY29udGFpbmVyIiwgImVkaXRUb29sYmFyRGl2IiwgImJlZm9yZSIsICJnZXRDbGllbnREaW1lbnNpb25zIiwgImFkZEFsdFRleHRCdXR0b24iLCAiQWx0VGV4dCIsICJkYXRhIiwgImFsdFRleHREYXRhIiwgImd1ZXNzZWRBbHRUZXh0IiwgImd1ZXNzZWRUZXh0IiwgInNldEd1ZXNzZWRBbHRUZXh0IiwgInRleHQiLCAic2V0R3Vlc3NlZFRleHQiLCAic2VyaWFsaXplQWx0VGV4dCIsICJpc0ZvckNvcHlpbmciLCAic2VyaWFsaXplIiwgImhhc0FsdFRleHQiLCAiaGFzQWx0VGV4dERhdGEiLCAiaGFzRGF0YSIsICJjbGFzc05hbWUiLCAiZGVmYXVsdEwxMG5JZCIsICJtYXhXaWR0aCIsICJtYXhIZWlnaHQiLCAiYmluZEV2ZW50cyIsICJpc1Jlc2l6YWJsZSIsICJfc3VwcG9ydHNQaW5jaFRvWm9vbSIsICJUb3VjaE1hbmFnZXIiLCAiaXNQaW5jaGluZ0Rpc2FibGVkIiwgImlzU2VsZWN0ZWQiLCAib25QaW5jaFN0YXJ0IiwgIm9uUGluY2hpbmciLCAib25QaW5jaEVuZCIsICJfZWRpdG9yVW5kb0JhciIsICJoaWRlIiwgIl9vcmlnaW4iLCAicHJldkRpc3RhbmNlIiwgImRpc3RhbmNlIiwgInNsb3dEb3duRmFjdG9yIiwgImZhY3RvciIsICJ0cmFuc2ZDZW50ZXJQb2ludCIsICJjZW50ZXJYIiwgImNlbnRlclkiLCAibmV3VHJhbnNmQ2VudGVyUG9pbnQiLCAicG9pbnRlcmRvd24iLCAic2hpZnRLZXkiLCAibWV0YUtleSIsICJ0b2dnbGVTZWxlY3RlZCIsICJzZXRVcERyYWdTZXNzaW9uIiwgImhhc0RyYWdnaW5nU3RhcnRlZCIsICJvcHRzIiwgImNhbmNlbERyYWciLCAiZSIsICJlbmREcmFnU2Vzc2lvbiIsICJfb25TdG9wRHJhZ2dpbmciLCAiY2xpZW50WCIsICJjbGllbnRZIiwgInBvaW50ZXJJZCIsICJwb2ludGVyVHlwZSIsICJfb25TdGFydERyYWdnaW5nIiwgImRyYWdTZWxlY3RlZEVkaXRvcnMiLCAiaXNQcmltYXJ5IiwgImNsZWFyVGltZW91dCIsICJzZXRUaW1lb3V0IiwgIm1vdmVFZGl0b3JJbkRPTSIsICJfc2V0UGFyZW50QW5kUG9zaXRpb24iLCAiY2hhbmdlUGFyZW50IiwgImdldFJlY3QiLCAic2NhbGUiLCAic2hpZnRYIiwgInNoaWZ0WSIsICJFcnJvciIsICJnZXRSZWN0SW5DdXJyZW50Q29vcmRzIiwgInJlY3QiLCAieDEiLCAieTEiLCAieDIiLCAieTIiLCAib25jZUFkZGVkIiwgImZvY3VzIiwgImVuYWJsZUVkaXRNb2RlIiwgImRpc2FibGVFZGl0TW9kZSIsICJpc0luRWRpdE1vZGUiLCAic2hvdWxkR2V0S2V5Ym9hcmRFdmVudHMiLCAibmVlZHNUb0JlUmVidWlsdCIsICJpc09uU2NyZWVuIiwgImJvdHRvbSIsICJyaWdodCIsICJpbm5lckhlaWdodCIsICJpbm5lcldpZHRoIiwgInJlYnVpbGQiLCAicm90YXRlIiwgIl9hbmdsZSIsICJzZXJpYWxpemVEZWxldGVkIiwgInBvcHVwUmVmIiwgImNvbnRleHQiLCAiZGVzZXJpYWxpemUiLCAiYWNjZXNzaWJpbGl0eURhdGEiLCAiaXNDb3B5IiwgImhhc0JlZW5Nb2RpZmllZCIsICJyZW1vdmVFZGl0b3IiLCAidGltZW91dCIsICJ2YWx1ZXMiLCAibWFrZVJlc2l6YWJsZSIsICJ0b29sYmFyUG9zaXRpb24iLCAia2V5ZG93biIsICJrZXkiLCAiY2hpbGRyZW4iLCAiQXJyYXkiLCAiZnJvbSIsICJib3VuZFJlc2l6ZXJLZXlkb3duIiwgImJvdW5kUmVzaXplckJsdXIiLCAiZ2V0QXR0cmlidXRlIiwgImZpcnN0IiwgImZpcnN0UG9zaXRpb24iLCAibmV4dEZpcnN0UG9zaXRpb24iLCAibGVuZ3RoIiwgImkiLCAiZmlyc3RDaGlsZCIsICJsYXN0Q2hpbGQiLCAiY2hpbGQiLCAiZm9jdXNWaXNpYmxlIiwgInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsICJleGVjIiwgInBhcmVudE5vZGUiLCAic2VsZWN0IiwgInRoZW4iLCAiY29udGFpbnMiLCAic2hvdyIsICJ0b2dnbGVBbHRUZXh0QmFkZ2UiLCAidW5zZWxlY3QiLCAiYWN0aXZlRWxlbWVudCIsICJwcmV2ZW50U2Nyb2xsIiwgInVwZGF0ZVBhcmFtcyIsICJ0eXBlIiwgImRpc2FibGVFZGl0aW5nIiwgImVuYWJsZUVkaXRpbmciLCAiZW50ZXJJbkVkaXRNb2RlIiwgImdldEVsZW1lbnRGb3JBbHRUZXh0IiwgImNvbnRlbnREaXYiLCAiaXNFZGl0aW5nIiwgInNldEFjdGl2ZUVkaXRvciIsICJzZXRBc3BlY3RSYXRpbyIsICJhc3BlY3RSYXRpbyIsICJjYW5DcmVhdGVOZXdFbXB0eUVkaXRvciIsICJ0ZWxlbWV0cnlJbml0aWFsRGF0YSIsICJhY3Rpb24iLCAidGVsZW1ldHJ5RmluYWxEYXRhIiwgIl9yZXBvcnRUZWxlbWV0cnkiLCAibXVzdFdhaXQiLCAiTWFwIiwgImdldCIsICJkZWxldGUiLCAic2l6ZSIsICJzZXQiLCAiX2V2ZW50QnVzIiwgImRpc3BhdGNoIiwgInNvdXJjZSIsICJkZXRhaWxzIiwgInZpc2libGUiLCAiZW5hYmxlIiwgImRpc2FibGUiLCAicmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQiLCAiYW5ub3RhdGlvbiIsICJjb250ZW50IiwgInF1ZXJ5U2VsZWN0b3IiLCAibm9kZU5hbWUiLCAiY2FudmFzIiwgInJlc2V0QW5ub3RhdGlvbkVsZW1lbnQiLCAiU0VFRCIsICJNQVNLX0hJR0giLCAiTUFTS19MT1ciLCAiTXVybXVySGFzaDNfNjQiLCAiY29uc3RydWN0b3IiLCAic2VlZCIsICJoMSIsICJoMiIsICJ1cGRhdGUiLCAiaW5wdXQiLCAiZGF0YSIsICJsZW5ndGgiLCAiVWludDhBcnJheSIsICJpIiwgImlpIiwgImNvZGUiLCAiY2hhckNvZGVBdCIsICJBcnJheUJ1ZmZlciIsICJpc1ZpZXciLCAic2xpY2UiLCAiYnl0ZUxlbmd0aCIsICJFcnJvciIsICJibG9ja0NvdW50cyIsICJ0YWlsTGVuZ3RoIiwgImRhdGFVaW50MzIiLCAiVWludDMyQXJyYXkiLCAiYnVmZmVyIiwgImsxIiwgImsyIiwgIkMxIiwgIkMyIiwgIkMxX0xPVyIsICJDMl9MT1ciLCAiaGV4ZGlnZXN0IiwgInRvU3RyaW5nIiwgInBhZFN0YXJ0IiwgIlNlcmlhbGl6YWJsZUVtcHR5IiwgIk9iamVjdCIsICJmcmVlemUiLCAibWFwIiwgImhhc2giLCAidHJhbnNmZXIiLCAidW5kZWZpbmVkIiwgIkFubm90YXRpb25TdG9yYWdlIiwgIk1hcCIsICJjb25zdHJ1Y3RvciIsICJvblNldE1vZGlmaWVkIiwgIm9uUmVzZXRNb2RpZmllZCIsICJvbkFubm90YXRpb25FZGl0b3IiLCAiZ2V0VmFsdWUiLCAia2V5IiwgImRlZmF1bHRWYWx1ZSIsICJ2YWx1ZSIsICJnZXQiLCAiYXNzaWduIiwgImdldFJhd1ZhbHVlIiwgInJlbW92ZSIsICJkZWxldGUiLCAic2l6ZSIsICJyZXNldE1vZGlmaWVkIiwgInZhbHVlcyIsICJBbm5vdGF0aW9uRWRpdG9yIiwgInNldFZhbHVlIiwgIm9iaiIsICJtb2RpZmllZCIsICJlbnRyeSIsICJ2YWwiLCAiZW50cmllcyIsICJzZXQiLCAiX3R5cGUiLCAiaGFzIiwgImdldEFsbCIsICJvYmplY3RGcm9tTWFwIiwgInNldEFsbCIsICJwcmludCIsICJQcmludEFubm90YXRpb25TdG9yYWdlIiwgInNlcmlhbGl6YWJsZSIsICJNdXJtdXJIYXNoM182NCIsICJjb250ZXh0IiwgImNyZWF0ZSIsICJoYXNCaXRtYXAiLCAic2VyaWFsaXplZCIsICJzZXJpYWxpemUiLCAidXBkYXRlIiwgIkpTT04iLCAic3RyaW5naWZ5IiwgImJpdG1hcCIsICJwdXNoIiwgImhleGRpZ2VzdCIsICJlZGl0b3JTdGF0cyIsICJzdGF0cyIsICJ0eXBlVG9FZGl0b3IiLCAidGVsZW1ldHJ5RmluYWxEYXRhIiwgInR5cGUiLCAiZ2V0UHJvdG90eXBlT2YiLCAiY291bnRlcnMiLCAiY291bnQiLCAiZWRpdG9yIiwgImNvbXB1dGVUZWxlbWV0cnlGaW5hbERhdGEiLCAicmVzZXRNb2RpZmllZElkcyIsICJtb2RpZmllZElkcyIsICJpZHMiLCAiYW5ub3RhdGlvbkVsZW1lbnRJZCIsICJTZXQiLCAiam9pbiIsICJwYXJlbnQiLCAiY2xvbmUiLCAic3RydWN0dXJlZENsb25lIiwgInVucmVhY2hhYmxlIiwgInNoYWRvdyIsICJGb250TG9hZGVyIiwgIlNldCIsICJjb25zdHJ1Y3RvciIsICJvd25lckRvY3VtZW50IiwgImdsb2JhbFRoaXMiLCAiZG9jdW1lbnQiLCAic3R5bGVFbGVtZW50IiwgIl9kb2N1bWVudCIsICJuYXRpdmVGb250RmFjZXMiLCAibG9hZGluZ1JlcXVlc3RzIiwgImxvYWRUZXN0Rm9udElkIiwgImFkZE5hdGl2ZUZvbnRGYWNlIiwgIm5hdGl2ZUZvbnRGYWNlIiwgImFkZCIsICJmb250cyIsICJyZW1vdmVOYXRpdmVGb250RmFjZSIsICJkZWxldGUiLCAiaW5zZXJ0UnVsZSIsICJydWxlIiwgImNyZWF0ZUVsZW1lbnQiLCAiZG9jdW1lbnRFbGVtZW50IiwgImdldEVsZW1lbnRzQnlUYWdOYW1lIiwgImFwcGVuZCIsICJzdHlsZVNoZWV0IiwgInNoZWV0IiwgImNzc1J1bGVzIiwgImxlbmd0aCIsICJjbGVhciIsICJyZW1vdmUiLCAibG9hZFN5c3RlbUZvbnQiLCAic3lzdGVtRm9udEluZm8iLCAiaW5mbyIsICJkaXNhYmxlRm9udEZhY2UiLCAiX2luc3BlY3RGb250IiwgImhhcyIsICJsb2FkZWROYW1lIiwgImFzc2VydCIsICJpc0ZvbnRMb2FkaW5nQVBJU3VwcG9ydGVkIiwgInNyYyIsICJzdHlsZSIsICJmb250RmFjZSIsICJGb250RmFjZSIsICJsb2FkIiwgIndhcm4iLCAiYmFzZUZvbnROYW1lIiwgInVucmVhY2hhYmxlIiwgImJpbmQiLCAiZm9udCIsICJhdHRhY2hlZCIsICJtaXNzaW5nRmlsZSIsICJjcmVhdGVOYXRpdmVGb250RmFjZSIsICJsb2FkZWQiLCAiZXgiLCAiZmFtaWx5IiwgImNyZWF0ZUZvbnRGYWNlUnVsZSIsICJpc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZCIsICJQcm9taXNlIiwgInJlc29sdmUiLCAicmVxdWVzdCIsICJfcXVldWVMb2FkaW5nQ2FsbGJhY2siLCAiX3ByZXBhcmVGb250TG9hZEV2ZW50IiwgImhhc0ZvbnRzIiwgInNoYWRvdyIsICJpc05vZGVKUyIsICJGZWF0dXJlVGVzdCIsICJwbGF0Zm9ybSIsICJpc0ZpcmVmb3giLCAiY2FsbGJhY2siLCAiY29tcGxldGVSZXF1ZXN0IiwgImRvbmUiLCAib3RoZXJSZXF1ZXN0IiwgInNoaWZ0IiwgInNldFRpbWVvdXQiLCAiY29tcGxldGUiLCAicHVzaCIsICJfbG9hZFRlc3RGb250IiwgInRlc3RGb250IiwgImF0b2IiLCAiaW50MzIiLCAiZGF0YSIsICJvZmZzZXQiLCAiY2hhckNvZGVBdCIsICJzcGxpY2VTdHJpbmciLCAicyIsICJpbnNlcnQiLCAiY2h1bmsxIiwgInN1YnN0cmluZyIsICJjaHVuazIiLCAiaSIsICJpaSIsICJjYW52YXMiLCAid2lkdGgiLCAiaGVpZ2h0IiwgImN0eCIsICJnZXRDb250ZXh0IiwgImNhbGxlZCIsICJpc0ZvbnRSZWFkeSIsICJuYW1lIiwgImZpbGxUZXh0IiwgImltYWdlRGF0YSIsICJnZXRJbWFnZURhdGEiLCAiRGF0ZSIsICJub3ciLCAiQ09NTUVOVF9PRkZTRVQiLCAiQ0ZGX0NIRUNLU1VNX09GRlNFVCIsICJYWFhYX1ZBTFVFIiwgImNoZWNrc3VtIiwgInN0cmluZzMyIiwgInVybCIsICJidG9hIiwgImRpdiIsICJ2aXNpYmlsaXR5IiwgInBvc2l0aW9uIiwgInRvcCIsICJsZWZ0IiwgInNwYW4iLCAidGV4dENvbnRlbnQiLCAiZm9udEZhbWlseSIsICJib2R5IiwgIkZvbnRGYWNlT2JqZWN0IiwgInRyYW5zbGF0ZWREYXRhIiwgImluc3BlY3RGb250IiwgImNvbXBpbGVkR2x5cGhzIiwgIk9iamVjdCIsICJjcmVhdGUiLCAiY3NzRm9udEluZm8iLCAiY3NzIiwgIndlaWdodCIsICJmb250V2VpZ2h0IiwgIml0YWxpY0FuZ2xlIiwgIm1pbWV0eXBlIiwgInRvQmFzZTY0VXRpbCIsICJnZXRQYXRoR2VuZXJhdG9yIiwgIm9ianMiLCAiY2hhcmFjdGVyIiwgInVuZGVmaW5lZCIsICJvYmpJZCIsICJjbWRzIiwgImdldCIsICJwYXRoIiwgIlBhdGgyRCIsICJmb250RXh0cmFQcm9wZXJ0aWVzIiwgIkNhbGxiYWNrS2luZCIsICJEQVRBIiwgIkVSUk9SIiwgIlN0cmVhbUtpbmQiLCAiQ0FOQ0VMIiwgIkNBTkNFTF9DT01QTEVURSIsICJDTE9TRSIsICJFTlFVRVVFIiwgIlBVTEwiLCAiUFVMTF9DT01QTEVURSIsICJTVEFSVF9DT01QTEVURSIsICJvbkZuIiwgIndyYXBSZWFzb24iLCAiZXgiLCAiQWJvcnRFeGNlcHRpb24iLCAiSW52YWxpZFBERkV4Y2VwdGlvbiIsICJQYXNzd29yZEV4Y2VwdGlvbiIsICJSZXNwb25zZUV4Y2VwdGlvbiIsICJVbmtub3duRXJyb3JFeGNlcHRpb24iLCAiRXJyb3IiLCAidW5yZWFjaGFibGUiLCAibmFtZSIsICJtZXNzYWdlIiwgImNvZGUiLCAic3RhdHVzIiwgIm1pc3NpbmciLCAiZGV0YWlscyIsICJ0b1N0cmluZyIsICJNZXNzYWdlSGFuZGxlciIsICJBYm9ydENvbnRyb2xsZXIiLCAiY29uc3RydWN0b3IiLCAic291cmNlTmFtZSIsICJ0YXJnZXROYW1lIiwgImNvbU9iaiIsICJjYWxsYmFja0lkIiwgInN0cmVhbUlkIiwgInN0cmVhbVNpbmtzIiwgIk9iamVjdCIsICJjcmVhdGUiLCAic3RyZWFtQ29udHJvbGxlcnMiLCAiY2FsbGJhY2tDYXBhYmlsaXRpZXMiLCAiYWN0aW9uSGFuZGxlciIsICJhZGRFdmVudExpc3RlbmVyIiwgImJpbmQiLCAic2lnbmFsIiwgImRhdGEiLCAic3RyZWFtIiwgImNhbGxiYWNrIiwgImNhcGFiaWxpdHkiLCAicmVzb2x2ZSIsICJyZWplY3QiLCAicmVhc29uIiwgImFjdGlvbiIsICJQcm9taXNlIiwgInRyeSIsICJ0aGVuIiwgInJlc3VsdCIsICJwb3N0TWVzc2FnZSIsICJvbiIsICJhY3Rpb25OYW1lIiwgImhhbmRsZXIiLCAiYWgiLCAic2VuZCIsICJ0cmFuc2ZlcnMiLCAic2VuZFdpdGhQcm9taXNlIiwgIndpdGhSZXNvbHZlcnMiLCAicHJvbWlzZSIsICJzZW5kV2l0aFN0cmVhbSIsICJxdWV1ZWluZ1N0cmF0ZWd5IiwgIlJlYWRhYmxlU3RyZWFtIiwgInN0YXJ0IiwgImNvbnRyb2xsZXIiLCAic3RhcnRDYXBhYmlsaXR5IiwgInN0YXJ0Q2FsbCIsICJwdWxsQ2FsbCIsICJjYW5jZWxDYWxsIiwgImlzQ2xvc2VkIiwgImRlc2lyZWRTaXplIiwgInB1bGwiLCAicHVsbENhcGFiaWxpdHkiLCAiY2FuY2VsIiwgImFzc2VydCIsICJjYW5jZWxDYXBhYmlsaXR5IiwgInNlbGYiLCAic3RyZWFtU2luayIsICJlbnF1ZXVlIiwgImNodW5rIiwgInNpemUiLCAiaXNDYW5jZWxsZWQiLCAibGFzdERlc2lyZWRTaXplIiwgInNpbmtDYXBhYmlsaXR5IiwgInJlYWR5IiwgImNsb3NlIiwgImVycm9yIiwgIm9uUHVsbCIsICJvbkNhbmNlbCIsICJzdWNjZXNzIiwgInN0cmVhbUNvbnRyb2xsZXIiLCAiZGF0YVJlYXNvbiIsICJhbGxTZXR0bGVkIiwgImRlc3Ryb3kiLCAiYWJvcnQiLCAiQmFzZUNhbnZhc0ZhY3RvcnkiLCAiY29uc3RydWN0b3IiLCAiZW5hYmxlSFdBIiwgImNyZWF0ZSIsICJ3aWR0aCIsICJoZWlnaHQiLCAiRXJyb3IiLCAiY2FudmFzIiwgIl9jcmVhdGVDYW52YXMiLCAiY29udGV4dCIsICJnZXRDb250ZXh0IiwgIndpbGxSZWFkRnJlcXVlbnRseSIsICJyZXNldCIsICJjYW52YXNBbmRDb250ZXh0IiwgImRlc3Ryb3kiLCAidW5yZWFjaGFibGUiLCAiRE9NQ2FudmFzRmFjdG9yeSIsICJvd25lckRvY3VtZW50IiwgImdsb2JhbFRoaXMiLCAiZG9jdW1lbnQiLCAiX2RvY3VtZW50IiwgImNyZWF0ZUVsZW1lbnQiLCAiQmFzZUNNYXBSZWFkZXJGYWN0b3J5IiwgImNvbnN0cnVjdG9yIiwgImJhc2VVcmwiLCAiaXNDb21wcmVzc2VkIiwgImZldGNoIiwgIm5hbWUiLCAiRXJyb3IiLCAidXJsIiwgIl9mZXRjaCIsICJ0aGVuIiwgImNNYXBEYXRhIiwgImNhdGNoIiwgInJlYXNvbiIsICJ1bnJlYWNoYWJsZSIsICJET01DTWFwUmVhZGVyRmFjdG9yeSIsICJkYXRhIiwgImZldGNoRGF0YSIsICJBcnJheUJ1ZmZlciIsICJVaW50OEFycmF5IiwgInN0cmluZ1RvQnl0ZXMiLCAiQmFzZUZpbHRlckZhY3RvcnkiLCAiYWRkRmlsdGVyIiwgIm1hcHMiLCAiYWRkSENNRmlsdGVyIiwgImZnQ29sb3IiLCAiYmdDb2xvciIsICJhZGRBbHBoYUZpbHRlciIsICJtYXAiLCAiYWRkTHVtaW5vc2l0eUZpbHRlciIsICJhZGRIaWdobGlnaHRIQ01GaWx0ZXIiLCAiZmlsdGVyTmFtZSIsICJuZXdGZ0NvbG9yIiwgIm5ld0JnQ29sb3IiLCAiZGVzdHJveSIsICJrZWVwSENNIiwgIkRPTUZpbHRlckZhY3RvcnkiLCAiY29uc3RydWN0b3IiLCAiZG9jSWQiLCAib3duZXJEb2N1bWVudCIsICJnbG9iYWxUaGlzIiwgImRvY3VtZW50IiwgIk1hcCIsICJkaXYiLCAiY3JlYXRlRWxlbWVudCIsICJzdHlsZSIsICJ2aXNpYmlsaXR5IiwgImNvbnRhaW4iLCAid2lkdGgiLCAiaGVpZ2h0IiwgInBvc2l0aW9uIiwgInRvcCIsICJsZWZ0IiwgInpJbmRleCIsICJzdmciLCAiY3JlYXRlRWxlbWVudE5TIiwgIlNWR19OUyIsICJzZXRBdHRyaWJ1dGUiLCAiYXBwZW5kIiwgImJvZHkiLCAibGVuZ3RoIiwgIm1hcFIiLCAiYnVmZmVyIiwgIkFycmF5IiwgImkiLCAidGFibGUiLCAiam9pbiIsICJtYXBHIiwgIm1hcEIiLCAiYnVmZmVyUiIsICJidWZmZXJHIiwgImJ1ZmZlckIiLCAiaWQiLCAidW5kZWZpbmVkIiwgInVybCIsICJVUkwiLCAiYmFzZVVSSSIsICJpc0RhdGFTY2hlbWUiLCAid2FybiIsICJzcGxpdCIsICJ2YWx1ZSIsICJnZXQiLCAidGFibGVSIiwgInRhYmxlRyIsICJ0YWJsZUIiLCAia2V5IiwgInNldCIsICJmaWx0ZXIiLCAiaW5mbyIsICJyZW1vdmUiLCAiZmdSR0IiLCAiVXRpbCIsICJtYWtlSGV4Q29sb3IiLCAiYmdSR0IiLCAiY29sb3IiLCAieCIsICJnZXRTdGVwcyIsICJjIiwgIm4iLCAic3RhcnQiLCAiZW5kIiwgImFyciIsICJ0YWJsZUEiLCAiYmluZCIsICJmZ0dyYXkiLCAiTWF0aCIsICJyb3VuZCIsICJiZ0dyYXkiLCAibmV3RmdSR0IiLCAibmV3QmdSR0IiLCAiZmciLCAiYmciLCAic3RlcCIsICJuZXdTdGFydCIsICJuZXdTdGVwIiwgInByZXYiLCAiayIsICJqIiwgInNpemUiLCAicGFyZW50Tm9kZSIsICJjbGVhciIsICJmZUNvbG9yTWF0cml4IiwgImZlQ29tcG9uZW50VHJhbnNmZXIiLCAiZnVuYyIsICJmZUZ1bmMiLCAiclRhYmxlIiwgImdUYWJsZSIsICJiVGFibGUiLCAiYVRhYmxlIiwgImdldFJHQiIsICJnZXRDb21wdXRlZFN0eWxlIiwgImdldFByb3BlcnR5VmFsdWUiLCAiQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IiwgImNvbnN0cnVjdG9yIiwgImJhc2VVcmwiLCAiZmV0Y2giLCAiZmlsZW5hbWUiLCAiRXJyb3IiLCAidXJsIiwgIl9mZXRjaCIsICJjYXRjaCIsICJyZWFzb24iLCAidW5yZWFjaGFibGUiLCAiRE9NU3RhbmRhcmRGb250RGF0YUZhY3RvcnkiLCAiZGF0YSIsICJmZXRjaERhdGEiLCAiVWludDhBcnJheSIsICJCYXNlV2FzbUZhY3RvcnkiLCAiY29uc3RydWN0b3IiLCAiYmFzZVVybCIsICJmZXRjaCIsICJmaWxlbmFtZSIsICJFcnJvciIsICJ1cmwiLCAiX2ZldGNoIiwgImNhdGNoIiwgInJlYXNvbiIsICJ1bnJlYWNoYWJsZSIsICJET01XYXNtRmFjdG9yeSIsICJkYXRhIiwgImZldGNoRGF0YSIsICJVaW50OEFycmF5IiwgImlzTm9kZUpTIiwgIndhcm4iLCAiZmV0Y2hEYXRhIiwgInVybCIsICJmcyIsICJwcm9jZXNzIiwgImdldEJ1aWx0aW5Nb2R1bGUiLCAiZGF0YSIsICJwcm9taXNlcyIsICJyZWFkRmlsZSIsICJVaW50OEFycmF5IiwgIk5vZGVGaWx0ZXJGYWN0b3J5IiwgIkJhc2VGaWx0ZXJGYWN0b3J5IiwgIk5vZGVDYW52YXNGYWN0b3J5IiwgIkJhc2VDYW52YXNGYWN0b3J5IiwgIl9jcmVhdGVDYW52YXMiLCAid2lkdGgiLCAiaGVpZ2h0IiwgInJlcXVpcmUiLCAiY3JlYXRlUmVxdWlyZSIsICJpbXBvcnQiLCAiY2FudmFzIiwgImNyZWF0ZUNhbnZhcyIsICJOb2RlQ01hcFJlYWRlckZhY3RvcnkiLCAiQmFzZUNNYXBSZWFkZXJGYWN0b3J5IiwgIl9mZXRjaCIsICJOb2RlU3RhbmRhcmRGb250RGF0YUZhY3RvcnkiLCAiQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IiwgIk5vZGVXYXNtRmFjdG9yeSIsICJCYXNlV2FzbUZhY3RvcnkiLCAiUGF0aFR5cGUiLCAiRklMTCIsICJTVFJPS0UiLCAiU0hBRElORyIsICJhcHBseUJvdW5kaW5nQm94IiwgImN0eCIsICJiYm94IiwgIndpZHRoIiwgImhlaWdodCIsICJyZWdpb24iLCAiUGF0aDJEIiwgInJlY3QiLCAiY2xpcCIsICJCYXNlU2hhZGluZ1BhdHRlcm4iLCAiaXNNb2RpZnlpbmdDdXJyZW50VHJhbnNmb3JtIiwgImdldFBhdHRlcm4iLCAidW5yZWFjaGFibGUiLCAiUmFkaWFsQXhpYWxTaGFkaW5nUGF0dGVybiIsICJjb25zdHJ1Y3RvciIsICJJUiIsICJfdHlwZSIsICJfYmJveCIsICJfY29sb3JTdG9wcyIsICJfcDAiLCAiX3AxIiwgIl9yMCIsICJfcjEiLCAibWF0cml4IiwgIl9jcmVhdGVHcmFkaWVudCIsICJncmFkIiwgImNyZWF0ZUxpbmVhckdyYWRpZW50IiwgImNyZWF0ZVJhZGlhbEdyYWRpZW50IiwgImNvbG9yU3RvcCIsICJhZGRDb2xvclN0b3AiLCAib3duZXIiLCAiaW52ZXJzZSIsICJwYXRoVHlwZSIsICJwYXR0ZXJuIiwgIm93bmVyQkJveCIsICJjdXJyZW50IiwgImdldENsaXBwZWRQYXRoQm91bmRpbmdCb3giLCAiZ2V0Q3VycmVudFRyYW5zZm9ybSIsICJNYXRoIiwgImNlaWwiLCAidG1wQ2FudmFzIiwgImNhY2hlZENhbnZhc2VzIiwgImdldENhbnZhcyIsICJ0bXBDdHgiLCAiY29udGV4dCIsICJjbGVhclJlY3QiLCAiY2FudmFzIiwgImJlZ2luUGF0aCIsICJ0cmFuc2xhdGUiLCAiVXRpbCIsICJ0cmFuc2Zvcm0iLCAiYmFzZVRyYW5zZm9ybSIsICJmaWxsU3R5bGUiLCAiZmlsbCIsICJjcmVhdGVQYXR0ZXJuIiwgImRvbU1hdHJpeCIsICJET01NYXRyaXgiLCAic2V0VHJhbnNmb3JtIiwgImRyYXdUcmlhbmdsZSIsICJkYXRhIiwgInAxIiwgInAyIiwgInAzIiwgImMxIiwgImMyIiwgImMzIiwgImNvb3JkcyIsICJjb2xvcnMiLCAiYnl0ZXMiLCAicm93U2l6ZSIsICJ0bXAiLCAieDEiLCAib2Zmc2V0WCIsICJzY2FsZVgiLCAieTEiLCAib2Zmc2V0WSIsICJzY2FsZVkiLCAieDIiLCAieTIiLCAieDMiLCAieTMiLCAiYzFyIiwgImMxZyIsICJjMWIiLCAiYzJyIiwgImMyZyIsICJjMmIiLCAiYzNyIiwgImMzZyIsICJjM2IiLCAibWluWSIsICJyb3VuZCIsICJtYXhZIiwgInhhIiwgImNhciIsICJjYWciLCAiY2FiIiwgInhiIiwgImNiciIsICJjYmciLCAiY2JiIiwgInkiLCAiayIsICJ4MV8iLCAibWluIiwgIngyXyIsICJtYXgiLCAiaiIsICJ4IiwgImRyYXdGaWd1cmUiLCAiZmlndXJlIiwgInBzIiwgImNzIiwgImkiLCAiaWkiLCAidHlwZSIsICJ2ZXJ0aWNlc1BlclJvdyIsICJyb3dzIiwgImZsb29yIiwgImxlbmd0aCIsICJjb2xzIiwgInEiLCAiRXJyb3IiLCAiTWVzaFNoYWRpbmdQYXR0ZXJuIiwgIl9jb29yZHMiLCAiX2NvbG9ycyIsICJfZmlndXJlcyIsICJfYm91bmRzIiwgIl9iYWNrZ3JvdW5kIiwgIl9jcmVhdGVNZXNoQ2FudmFzIiwgImNvbWJpbmVkU2NhbGUiLCAiYmFja2dyb3VuZENvbG9yIiwgIkVYUEVDVEVEX1NDQUxFIiwgIk1BWF9QQVRURVJOX1NJWkUiLCAiQk9SREVSX1NJWkUiLCAiYm91bmRzV2lkdGgiLCAiYm91bmRzSGVpZ2h0IiwgImFicyIsICJwYWRkZWRXaWR0aCIsICJwYWRkZWRIZWlnaHQiLCAiY3JlYXRlSW1hZ2VEYXRhIiwgInB1dEltYWdlRGF0YSIsICJzY2FsZSIsICJzaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSIsICJtYXRyaXhTY2FsZSIsICJ0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzIiwgIkR1bW15U2hhZGluZ1BhdHRlcm4iLCAiZ2V0U2hhZGluZ1BhdHRlcm4iLCAiUGFpbnRUeXBlIiwgIkNPTE9SRUQiLCAiVU5DT0xPUkVEIiwgIlRpbGluZ1BhdHRlcm4iLCAiY2FudmFzR3JhcGhpY3NGYWN0b3J5IiwgImNvbG9yIiwgIm9wZXJhdG9yTGlzdCIsICJ4c3RlcCIsICJ5c3RlcCIsICJwYWludFR5cGUiLCAidGlsaW5nVHlwZSIsICJjcmVhdGVQYXR0ZXJuQ2FudmFzIiwgImluZm8iLCAieDAiLCAieTAiLCAiY3VyTWF0cml4U2NhbGUiLCAiY29tYmluZWRTY2FsZVgiLCAiY29tYmluZWRTY2FsZVkiLCAiY2FudmFzV2lkdGgiLCAiY2FudmFzSGVpZ2h0IiwgInJlZHJhd0hvcml6b250YWxseSIsICJyZWRyYXdWZXJ0aWNhbGx5IiwgInhTY2FsZWRTdGVwIiwgInlTY2FsZWRTdGVwIiwgInhTY2FsZWRXaWR0aCIsICJ5U2NhbGVkSGVpZ2h0IiwgImRpbXgiLCAiZ2V0U2l6ZUFuZFNjYWxlIiwgImRpbXkiLCAic2l6ZSIsICJncmFwaGljcyIsICJjcmVhdGVDYW52YXNHcmFwaGljcyIsICJncm91cExldmVsIiwgInNldEZpbGxBbmRTdHJva2VTdHlsZVRvQ29udGV4dCIsICJzYXZlIiwgImNsaXBCYm94IiwgImV4ZWN1dGVPcGVyYXRvckxpc3QiLCAiZW5kRHJhd2luZyIsICJyZXN0b3JlIiwgImltYWdlIiwgImRpbXgyIiwgImRpbXkyIiwgInhTaXplIiwgInlTaXplIiwgInRtcENhbnZhczIiLCAidG1wQ3R4MiIsICJqaiIsICJkcmF3SW1hZ2UiLCAic3RlcCIsICJyZWFsT3V0cHV0U2l6ZSIsICJtYXhTaXplIiwgImJib3hXaWR0aCIsICJiYm94SGVpZ2h0IiwgInVwZGF0ZVJlY3RNaW5NYXgiLCAiZW5kUGF0aCIsICJzdHJva2VTdHlsZSIsICJmaWxsQ29sb3IiLCAic3Ryb2tlQ29sb3IiLCAiY3NzQ29sb3IiLCAibWFrZUhleENvbG9yIiwgIkZvcm1hdEVycm9yIiwgImNvbnZlcnRCbGFja0FuZFdoaXRlVG9SR0JBIiwgInNyYyIsICJzcmNQb3MiLCAiZGVzdCIsICJ3aWR0aCIsICJoZWlnaHQiLCAibm9uQmxhY2tDb2xvciIsICJpbnZlcnNlRGVjb2RlIiwgImJsYWNrIiwgIkZlYXR1cmVUZXN0IiwgImlzTGl0dGxlRW5kaWFuIiwgInplcm9NYXBwaW5nIiwgIm9uZU1hcHBpbmciLCAid2lkdGhJblNvdXJjZSIsICJ3aWR0aFJlbWFpbmRlciIsICJzcmNMZW5ndGgiLCAibGVuZ3RoIiwgIlVpbnQzMkFycmF5IiwgImJ1ZmZlciIsICJkZXN0UG9zIiwgImkiLCAibWF4IiwgImVsZW0iLCAiaiIsICJNSU5fRk9OVF9TSVpFIiwgIk1BWF9GT05UX1NJWkUiLCAiRVhFQ1VUSU9OX1RJTUUiLCAiRVhFQ1VUSU9OX1NURVBTIiwgIk1BWF9TSVpFX1RPX0NPTVBJTEUiLCAiRlVMTF9DSFVOS19IRUlHSFQiLCAiU0NBTEVfTUFUUklYIiwgIkRPTU1hdHJpeCIsICJtaXJyb3JDb250ZXh0T3BlcmF0aW9ucyIsICJjdHgiLCAiZGVzdEN0eCIsICJfcmVtb3ZlTWlycm9yaW5nIiwgIkVycm9yIiwgIl9fb3JpZ2luYWxTYXZlIiwgInNhdmUiLCAiX19vcmlnaW5hbFJlc3RvcmUiLCAicmVzdG9yZSIsICJfX29yaWdpbmFsUm90YXRlIiwgInJvdGF0ZSIsICJfX29yaWdpbmFsU2NhbGUiLCAic2NhbGUiLCAiX19vcmlnaW5hbFRyYW5zbGF0ZSIsICJ0cmFuc2xhdGUiLCAiX19vcmlnaW5hbFRyYW5zZm9ybSIsICJ0cmFuc2Zvcm0iLCAiX19vcmlnaW5hbFNldFRyYW5zZm9ybSIsICJzZXRUcmFuc2Zvcm0iLCAiX19vcmlnaW5hbFJlc2V0VHJhbnNmb3JtIiwgInJlc2V0VHJhbnNmb3JtIiwgIl9fb3JpZ2luYWxDbGlwIiwgImNsaXAiLCAiX19vcmlnaW5hbE1vdmVUbyIsICJtb3ZlVG8iLCAiX19vcmlnaW5hbExpbmVUbyIsICJsaW5lVG8iLCAiX19vcmlnaW5hbEJlemllckN1cnZlVG8iLCAiYmV6aWVyQ3VydmVUbyIsICJfX29yaWdpbmFsUmVjdCIsICJyZWN0IiwgIl9fb3JpZ2luYWxDbG9zZVBhdGgiLCAiY2xvc2VQYXRoIiwgIl9fb3JpZ2luYWxCZWdpblBhdGgiLCAiYmVnaW5QYXRoIiwgImN0eFNhdmUiLCAiY3R4UmVzdG9yZSIsICJjdHhUcmFuc2xhdGUiLCAieCIsICJ5IiwgImN0eFNjYWxlIiwgImN0eFRyYW5zZm9ybSIsICJhIiwgImIiLCAiYyIsICJkIiwgImUiLCAiZiIsICJjdHhTZXRUcmFuc2Zvcm0iLCAiY3R4UmVzZXRUcmFuc2Zvcm0iLCAiY3R4Um90YXRlIiwgImFuZ2xlIiwgInJ1bGUiLCAiY3AxeCIsICJjcDF5IiwgImNwMngiLCAiY3AyeSIsICJ3aWR0aCIsICJoZWlnaHQiLCAiQ2FjaGVkQ2FudmFzZXMiLCAiY29uc3RydWN0b3IiLCAiY2FudmFzRmFjdG9yeSIsICJjYWNoZSIsICJPYmplY3QiLCAiY3JlYXRlIiwgImdldENhbnZhcyIsICJpZCIsICJjYW52YXNFbnRyeSIsICJ1bmRlZmluZWQiLCAicmVzZXQiLCAiZGVsZXRlIiwgImNsZWFyIiwgImRlc3Ryb3kiLCAiZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzIiwgInNyY0ltZyIsICJzcmNYIiwgInNyY1kiLCAic3JjVyIsICJzcmNIIiwgImRlc3RYIiwgImRlc3RZIiwgImRlc3RXIiwgImRlc3RIIiwgInR4IiwgInR5IiwgImdldEN1cnJlbnRUcmFuc2Zvcm0iLCAidGxYIiwgInJUbFgiLCAiTWF0aCIsICJyb3VuZCIsICJ0bFkiLCAiclRsWSIsICJiclgiLCAicldpZHRoIiwgImFicyIsICJiclkiLCAickhlaWdodCIsICJzaWduIiwgImRyYXdJbWFnZSIsICJzY2FsZVgiLCAiaHlwb3QiLCAic2NhbGVZIiwgImNvbXBpbGVUeXBlM0dseXBoIiwgImltZ0RhdGEiLCAiUE9JTlRfVE9fUFJPQ0VTU19MSU1JVCIsICJQT0lOVF9UWVBFUyIsICJVaW50OEFycmF5IiwgIndpZHRoMSIsICJwb2ludHMiLCAiaSIsICJqIiwgImowIiwgImxpbmVTaXplIiwgImRhdGEiLCAicG9zIiwgImVsZW0iLCAibWFzayIsICJjb3VudCIsICJzdW0iLCAic3RlcHMiLCAiSW50MzJBcnJheSIsICJwYXRoIiwgIlBhdGgyRCIsICJzY2FsZVNlbGYiLCAidHJhbnNsYXRlU2VsZiIsICJwIiwgImVuZCIsICJwMCIsICJ0eXBlIiwgInN0ZXAiLCAicHAiLCAiQ2FudmFzRXh0cmFTdGF0ZSIsICJhbHBoYUlzU2hhcGUiLCAiZm9udFNpemUiLCAiZm9udFNpemVTY2FsZSIsICJ0ZXh0TWF0cml4IiwgIklERU5USVRZX01BVFJJWCIsICJ0ZXh0TWF0cml4U2NhbGUiLCAiZm9udE1hdHJpeCIsICJGT05UX0lERU5USVRZX01BVFJJWCIsICJsZWFkaW5nIiwgImxpbmVYIiwgImxpbmVZIiwgImNoYXJTcGFjaW5nIiwgIndvcmRTcGFjaW5nIiwgInRleHRIU2NhbGUiLCAidGV4dFJlbmRlcmluZ01vZGUiLCAiVGV4dFJlbmRlcmluZ01vZGUiLCAiRklMTCIsICJ0ZXh0UmlzZSIsICJmaWxsQ29sb3IiLCAic3Ryb2tlQ29sb3IiLCAicGF0dGVybkZpbGwiLCAicGF0dGVyblN0cm9rZSIsICJmaWxsQWxwaGEiLCAic3Ryb2tlQWxwaGEiLCAibGluZVdpZHRoIiwgImFjdGl2ZVNNYXNrIiwgInRyYW5zZmVyTWFwcyIsICJzdGFydE5ld1BhdGhBbmRDbGlwQm94IiwgImNsb25lIiwgImNsaXBCb3giLCAic2xpY2UiLCAidXBkYXRlUmVjdE1pbk1heCIsICJwMSIsICJVdGlsIiwgImFwcGx5VHJhbnNmb3JtIiwgInAyIiwgInAzIiwgInA0IiwgIm1pblgiLCAibWluIiwgIm1pblkiLCAibWF4WCIsICJtYXgiLCAibWF4WSIsICJnZXRQYXRoQm91bmRpbmdCb3giLCAicGF0aFR5cGUiLCAiUGF0aFR5cGUiLCAiYm94IiwgIlNUUk9LRSIsICJ1bnJlYWNoYWJsZSIsICJzaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSIsICJ4U3Ryb2tlUGFkIiwgInlTdHJva2VQYWQiLCAidXBkYXRlQ2xpcEZyb21QYXRoIiwgImludGVyc2VjdCIsICJpc0VtcHR5Q2xpcCIsICJJbmZpbml0eSIsICJnZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94IiwgInB1dEJpbmFyeUltYWdlRGF0YSIsICJJbWFnZURhdGEiLCAicHV0SW1hZ2VEYXRhIiwgInBhcnRpYWxDaHVua0hlaWdodCIsICJmdWxsQ2h1bmtzIiwgInRvdGFsQ2h1bmtzIiwgImNodW5rSW1nRGF0YSIsICJjcmVhdGVJbWFnZURhdGEiLCAic3JjUG9zIiwgImRlc3RQb3MiLCAic3JjIiwgImRlc3QiLCAidGhpc0NodW5rSGVpZ2h0IiwgImVsZW1zSW5UaGlzQ2h1bmsiLCAia2luZCIsICJJbWFnZUtpbmQiLCAiR1JBWVNDQUxFXzFCUFAiLCAic3JjTGVuZ3RoIiwgImJ5dGVMZW5ndGgiLCAiZGVzdDMyIiwgIlVpbnQzMkFycmF5IiwgImJ1ZmZlciIsICJkZXN0MzJEYXRhTGVuZ3RoIiwgImxlbmd0aCIsICJmdWxsU3JjRGlmZiIsICJ3aGl0ZSIsICJibGFjayIsICJGZWF0dXJlVGVzdCIsICJpc0xpdHRsZUVuZGlhbiIsICJzcmNEaWZmIiwgImsiLCAia0VuZCIsICJrRW5kVW5yb2xsZWQiLCAic3JjQnl0ZSIsICJSR0JBXzMyQlBQIiwgInNldCIsICJzdWJhcnJheSIsICJSR0JfMjRCUFAiLCAicHV0QmluYXJ5SW1hZ2VNYXNrIiwgImJpdG1hcCIsICJjb252ZXJ0QmxhY2tBbmRXaGl0ZVRvUkdCQSIsICJub25CbGFja0NvbG9yIiwgImNvcHlDdHhTdGF0ZSIsICJzb3VyY2VDdHgiLCAicHJvcGVydGllcyIsICJwcm9wZXJ0eSIsICJzZXRMaW5lRGFzaCIsICJnZXRMaW5lRGFzaCIsICJsaW5lRGFzaE9mZnNldCIsICJyZXNldEN0eFRvRGVmYXVsdCIsICJzdHJva2VTdHlsZSIsICJmaWxsU3R5bGUiLCAiZmlsbFJ1bGUiLCAiZ2xvYmFsQWxwaGEiLCAibGluZUNhcCIsICJsaW5lSm9pbiIsICJtaXRlckxpbWl0IiwgImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsICJmb250IiwgImlzTm9kZUpTIiwgImZpbHRlciIsICJnZXRJbWFnZVNtb290aGluZ0VuYWJsZWQiLCAiaW50ZXJwb2xhdGUiLCAiZnJvdW5kIiwgImFjdHVhbFNjYWxlIiwgIk91dHB1dFNjYWxlIiwgInBpeGVsUmF0aW8iLCAiUGl4ZWxzUGVySW5jaCIsICJQREZfVE9fQ1NTX1VOSVRTIiwgIkxJTkVfQ0FQX1NUWUxFUyIsICJMSU5FX0pPSU5fU1RZTEVTIiwgIk5PUk1BTF9DTElQIiwgIkVPX0NMSVAiLCAiQ2FudmFzR3JhcGhpY3MiLCAiY2FudmFzQ3R4IiwgImNvbW1vbk9ianMiLCAib2JqcyIsICJmaWx0ZXJGYWN0b3J5IiwgIm9wdGlvbmFsQ29udGVudENvbmZpZyIsICJtYXJrZWRDb250ZW50U3RhY2siLCAiYW5ub3RhdGlvbkNhbnZhc01hcCIsICJwYWdlQ29sb3JzIiwgImN1cnJlbnQiLCAiY2FudmFzIiwgInN0YXRlU3RhY2siLCAicGVuZGluZ0NsaXAiLCAicGVuZGluZ0VPRmlsbCIsICJyZXMiLCAieG9ianMiLCAiZ3JvdXBTdGFjayIsICJwcm9jZXNzaW5nVHlwZTMiLCAiYmFzZVRyYW5zZm9ybSIsICJiYXNlVHJhbnNmb3JtU3RhY2siLCAiZ3JvdXBMZXZlbCIsICJzbWFza1N0YWNrIiwgInNtYXNrQ291bnRlciIsICJ0ZW1wU01hc2siLCAic3VzcGVuZGVkQ3R4IiwgImNvbnRlbnRWaXNpYmxlIiwgImNhY2hlZENhbnZhc2VzIiwgImNhY2hlZFBhdHRlcm5zIiwgIk1hcCIsICJ2aWV3cG9ydFNjYWxlIiwgIm91dHB1dFNjYWxlWCIsICJvdXRwdXRTY2FsZVkiLCAiX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmciLCAiX2NhY2hlZEdldFNpbmdsZVBpeGVsV2lkdGgiLCAiX2NhY2hlZEJpdG1hcHNNYXAiLCAiZ2V0T2JqZWN0IiwgImZhbGxiYWNrIiwgInN0YXJ0c1dpdGgiLCAiZ2V0IiwgImJlZ2luRHJhd2luZyIsICJ2aWV3cG9ydCIsICJ0cmFuc3BhcmVuY3kiLCAiYmFja2dyb3VuZCIsICJzYXZlZEZpbGxTdHlsZSIsICJmaWxsUmVjdCIsICJ0cmFuc3BhcmVudENhbnZhcyIsICJjb21wb3NpdGVDdHgiLCAiY29udGV4dCIsICJleGVjdXRlT3BlcmF0b3JMaXN0IiwgIm9wZXJhdG9yTGlzdCIsICJleGVjdXRpb25TdGFydElkeCIsICJjb250aW51ZUNhbGxiYWNrIiwgInN0ZXBwZXIiLCAiYXJnc0FycmF5IiwgImZuQXJyYXkiLCAiYXJnc0FycmF5TGVuIiwgImNodW5rT3BlcmF0aW9ucyIsICJlbmRUaW1lIiwgIkRhdGUiLCAibm93IiwgImZuSWQiLCAibmV4dEJyZWFrUG9pbnQiLCAiYnJlYWtJdCIsICJPUFMiLCAiZGVwZW5kZW5jeSIsICJhcHBseSIsICJkZXBPYmpJZCIsICJvYmpzUG9vbCIsICJoYXMiLCAiaW5TTWFza01vZGUiLCAiZW5kRHJhd2luZyIsICJ2YWx1ZXMiLCAiSFRNTENhbnZhc0VsZW1lbnQiLCAiaGNtRmlsdGVySWQiLCAiYWRkSENNRmlsdGVyIiwgImZvcmVncm91bmQiLCAic2F2ZWRGaWx0ZXIiLCAiX3NjYWxlSW1hZ2UiLCAiaW1nIiwgImludmVyc2VUcmFuc2Zvcm0iLCAiZGlzcGxheVdpZHRoIiwgImRpc3BsYXlIZWlnaHQiLCAid2lkdGhTY2FsZSIsICJoZWlnaHRTY2FsZSIsICJwYWludFdpZHRoIiwgInBhaW50SGVpZ2h0IiwgInRtcENhbnZhc0lkIiwgInRtcENhbnZhcyIsICJ0bXBDdHgiLCAibmV3V2lkdGgiLCAibmV3SGVpZ2h0IiwgImZsb29yIiwgImNlaWwiLCAiY2xlYXJSZWN0IiwgIl9jcmVhdGVNYXNrQ2FudmFzIiwgImlzUGF0dGVybkZpbGwiLCAiY3VycmVudFRyYW5zZm9ybSIsICJjYWNoZUtleSIsICJzY2FsZWQiLCAibWFza0NhbnZhcyIsICJtYWluS2V5IiwgIkpTT04iLCAic3RyaW5naWZ5IiwgImNhY2hlZEltYWdlIiwgIm9mZnNldFgiLCAib2Zmc2V0WSIsICJtYXNrVG9DYW52YXMiLCAiZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3giLCAiZHJhd25XaWR0aCIsICJkcmF3bkhlaWdodCIsICJmaWxsQ2FudmFzIiwgImZpbGxDdHgiLCAiZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UiLCAiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwgImludmVyc2UiLCAiZ2V0UGF0dGVybiIsICJzZXRMaW5lV2lkdGgiLCAic2V0TGluZUNhcCIsICJzdHlsZSIsICJzZXRMaW5lSm9pbiIsICJzZXRNaXRlckxpbWl0IiwgImxpbWl0IiwgInNldERhc2giLCAiZGFzaEFycmF5IiwgImRhc2hQaGFzZSIsICJzZXRSZW5kZXJpbmdJbnRlbnQiLCAiaW50ZW50IiwgInNldEZsYXRuZXNzIiwgImZsYXRuZXNzIiwgInNldEdTdGF0ZSIsICJzdGF0ZXMiLCAia2V5IiwgInZhbHVlIiwgInNldEZvbnQiLCAiY2hlY2tTTWFza1N0YXRlIiwgImFkZEZpbHRlciIsICJiZWdpblNNYXNrTW9kZSIsICJlbmRTTWFza01vZGUiLCAiY2FjaGVJZCIsICJzY3JhdGNoQ2FudmFzIiwgImdldFRyYW5zZm9ybSIsICJjb21wb3NlIiwgImRpcnR5Qm94IiwgInNtYXNrIiwgImNvbXBvc2VTTWFzayIsICJsYXllckN0eCIsICJsYXllckJveCIsICJsYXllck9mZnNldFgiLCAibGF5ZXJPZmZzZXRZIiwgImxheWVyV2lkdGgiLCAibGF5ZXJIZWlnaHQiLCAiZ2VuZXJpY0NvbXBvc2VTTWFzayIsICJzdWJ0eXBlIiwgImJhY2tkcm9wIiwgInRyYW5zZmVyTWFwIiwgIm1hc2tDdHgiLCAibWFza09mZnNldFgiLCAibWFza09mZnNldFkiLCAibWFza1giLCAibWFza1kiLCAiYmFja2Ryb3BSR0IiLCAibWFrZUhleENvbG9yIiwgImFkZEFscGhhRmlsdGVyIiwgImFkZEx1bWlub3NpdHlGaWx0ZXIiLCAib2xkIiwgInB1c2giLCAicG9wIiwgImNvbnN0cnVjdFBhdGgiLCAib3AiLCAibWluTWF4IiwgInBhdGgyZCIsICJpaSIsICJEcmF3T1BTIiwgImN1cnZlVG8iLCAid2FybiIsICJzdHJva2UiLCAiY29uc3VtZVBhdGgiLCAiaXNNb2RpZnlpbmdDdXJyZW50VHJhbnNmb3JtIiwgIm5ld1BhdGgiLCAiYWRkUGF0aCIsICJpbnZlcnRTZWxmIiwgIm11bHRpcGx5U2VsZiIsICJyZXNjYWxlQW5kU3Ryb2tlIiwgImNsb3NlU3Ryb2tlIiwgImZpbGwiLCAibmVlZFJlc3RvcmUiLCAiZW9GaWxsIiwgImZpbGxTdHJva2UiLCAiZW9GaWxsU3Ryb2tlIiwgImNsb3NlRmlsbFN0cm9rZSIsICJjbG9zZUVPRmlsbFN0cm9rZSIsICJlbmRQYXRoIiwgImVvQ2xpcCIsICJiZWdpblRleHQiLCAiZW5kVGV4dCIsICJwYXRocyIsICJwZW5kaW5nVGV4dFBhdGhzIiwgImludlRyYW5zZiIsICJwcmVNdWx0aXBseVNlbGYiLCAic2V0Q2hhclNwYWNpbmciLCAic3BhY2luZyIsICJzZXRXb3JkU3BhY2luZyIsICJzZXRIU2NhbGUiLCAic2V0TGVhZGluZyIsICJmb250UmVmTmFtZSIsICJzaXplIiwgImZvbnRPYmoiLCAiZm9udERpcmVjdGlvbiIsICJpc1R5cGUzRm9udCIsICJuYW1lIiwgImxvYWRlZE5hbWUiLCAidHlwZWZhY2UiLCAic3lzdGVtRm9udEluZm8iLCAiY3NzIiwgImZhbGxiYWNrTmFtZSIsICJib2xkIiwgIml0YWxpYyIsICJicm93c2VyRm9udFNpemUiLCAic2V0VGV4dFJlbmRlcmluZ01vZGUiLCAibW9kZSIsICJzZXRUZXh0UmlzZSIsICJyaXNlIiwgIm1vdmVUZXh0IiwgInNldExlYWRpbmdNb3ZlVGV4dCIsICJzZXRUZXh0TWF0cml4IiwgIm5leHRMaW5lIiwgInBhaW50Q2hhciIsICJjaGFyYWN0ZXIiLCAicGF0dGVybkZpbGxUcmFuc2Zvcm0iLCAicGF0dGVyblN0cm9rZVRyYW5zZm9ybSIsICJmaWxsU3Ryb2tlTW9kZSIsICJGSUxMX1NUUk9LRV9NQVNLIiwgImlzQWRkVG9QYXRoU2V0IiwgIkFERF9UT19QQVRIX0ZMQUciLCAibWlzc2luZ0ZpbGUiLCAiZGlzYWJsZUZvbnRGYWNlIiwgImdldFBhdGhHZW5lcmF0b3IiLCAiRklMTF9TVFJPS0UiLCAiaW52UGF0dGVyblRyYW5zZm9ybSIsICJ0cmFuc2YiLCAic3giLCAic3kiLCAiZmlsbFRleHQiLCAic3Ryb2tlVGV4dCIsICJpc0ZvbnRTdWJwaXhlbEFBRW5hYmxlZCIsICJnZXRJbWFnZURhdGEiLCAiZW5hYmxlZCIsICJzaGFkb3ciLCAic2hvd1RleHQiLCAiZ2x5cGhzIiwgInNob3dUeXBlM1RleHQiLCAiZ2x5cGhzTGVuZ3RoIiwgInZlcnRpY2FsIiwgInNwYWNpbmdEaXIiLCAiZGVmYXVsdFZNZXRyaWNzIiwgIndpZHRoQWR2YW5jZVNjYWxlIiwgInNpbXBsZUZpbGxUZXh0IiwgInBhdHRlcm4iLCAiZ2V0U2luZ2xlUGl4ZWxXaWR0aCIsICJpc0ludmFsaWRQREZqc0ZvbnQiLCAiY2hhcnMiLCAiZ2x5cGgiLCAidW5pY29kZSIsICJqb2luIiwgInJlc3RvcmVOZWVkZWQiLCAiaXNTcGFjZSIsICJmb250Q2hhciIsICJhY2NlbnQiLCAic2NhbGVkWCIsICJzY2FsZWRZIiwgInZtZXRyaWMiLCAidngiLCAidnkiLCAicmVtZWFzdXJlIiwgIm1lYXN1cmVkV2lkdGgiLCAibWVhc3VyZVRleHQiLCAiY2hhcmFjdGVyU2NhbGVYIiwgImlzSW5Gb250IiwgInNjYWxlZEFjY2VudFgiLCAib2Zmc2V0IiwgInNjYWxlZEFjY2VudFkiLCAiY2hhcldpZHRoIiwgImlzVGV4dEludmlzaWJsZSIsICJJTlZJU0lCTEUiLCAic3BhY2luZ0xlbmd0aCIsICJjaGFyUHJvY09wZXJhdG9yTGlzdCIsICJvcGVyYXRvckxpc3RJZCIsICJ0cmFuc2Zvcm1lZCIsICJzZXRDaGFyV2lkdGgiLCAieFdpZHRoIiwgInlXaWR0aCIsICJzZXRDaGFyV2lkdGhBbmRCb3VuZHMiLCAibGx4IiwgImxseSIsICJ1cngiLCAidXJ5IiwgImdldENvbG9yTl9QYXR0ZXJuIiwgIklSIiwgImNhbnZhc0dyYXBoaWNzRmFjdG9yeSIsICJjcmVhdGVDYW52YXNHcmFwaGljcyIsICJUaWxpbmdQYXR0ZXJuIiwgIl9nZXRQYXR0ZXJuIiwgInNldFN0cm9rZUNvbG9yTiIsICJhcmd1bWVudHMiLCAic2V0RmlsbENvbG9yTiIsICJzZXRTdHJva2VSR0JDb2xvciIsICJyIiwgImciLCAic2V0U3Ryb2tlVHJhbnNwYXJlbnQiLCAic2V0RmlsbFJHQkNvbG9yIiwgInNldEZpbGxUcmFuc3BhcmVudCIsICJvYmpJZCIsICJtYXRyaXgiLCAiZ2V0U2hhZGluZ1BhdHRlcm4iLCAic2hhZGluZ0ZpbGwiLCAiU0hBRElORyIsICJpbnYiLCAieDAiLCAieTAiLCAieDEiLCAieTEiLCAiYmVnaW5JbmxpbmVJbWFnZSIsICJiZWdpbkltYWdlRGF0YSIsICJwYWludEZvcm1YT2JqZWN0QmVnaW4iLCAiYmJveCIsICJwYWludEZvcm1YT2JqZWN0RW5kIiwgImJlZ2luR3JvdXAiLCAiZ3JvdXAiLCAiY3VycmVudEN0eCIsICJpc29sYXRlZCIsICJpbmZvIiwgImtub2Nrb3V0IiwgImJvdW5kcyIsICJjYW52YXNCb3VuZHMiLCAiZ3JvdXBDdHgiLCAic3RhcnRUcmFuc2Zvcm1JbnZlcnNlIiwgImVuZEdyb3VwIiwgImN1cnJlbnRNdHgiLCAiYmVnaW5Bbm5vdGF0aW9uIiwgImhhc093bkNhbnZhcyIsICJjYW52YXNXaWR0aCIsICJjYW52YXNIZWlnaHQiLCAiYW5ub3RhdGlvbkNhbnZhcyIsICJzYXZlZEN0eCIsICJlbmRBbm5vdGF0aW9uIiwgInBhaW50SW1hZ2VNYXNrWE9iamVjdCIsICJjb21waWxlZCIsICJwYWludEltYWdlTWFza1hPYmplY3RSZXBlYXQiLCAic2tld1giLCAic2tld1kiLCAicG9zaXRpb25zIiwgInRyYW5zIiwgInBhaW50SW1hZ2VNYXNrWE9iamVjdEdyb3VwIiwgImltYWdlcyIsICJpbWFnZSIsICJwYWludEltYWdlWE9iamVjdCIsICJwYWludElubGluZUltYWdlWE9iamVjdCIsICJwYWludEltYWdlWE9iamVjdFJlcGVhdCIsICJtYXAiLCAidyIsICJoIiwgInBhaW50SW5saW5lSW1hZ2VYT2JqZWN0R3JvdXAiLCAiYXBwbHlUcmFuc2Zlck1hcHNUb0NhbnZhcyIsICJhcHBseVRyYW5zZmVyTWFwc1RvQml0bWFwIiwgImltZ1RvUGFpbnQiLCAiSFRNTEVsZW1lbnQiLCAiZW50cnkiLCAicGFpbnRTb2xpZENvbG9ySW1hZ2VNYXNrIiwgIm1hcmtQb2ludCIsICJ0YWciLCAibWFya1BvaW50UHJvcHMiLCAiYmVnaW5NYXJrZWRDb250ZW50IiwgInZpc2libGUiLCAiYmVnaW5NYXJrZWRDb250ZW50UHJvcHMiLCAiaXNWaXNpYmxlIiwgImlzQ29udGVudFZpc2libGUiLCAiZW5kTWFya2VkQ29udGVudCIsICJiZWdpbkNvbXBhdCIsICJlbmRDb21wYXQiLCAiaXNFbXB0eSIsICJtIiwgImFic0RldCIsICJub3JtWCIsICJub3JtWSIsICJnZXRTY2FsZUZvclN0cm9raW5nIiwgInNjYWxlZExpbmVXaWR0aCIsICJzY2FsZWRYTGluZVdpZHRoIiwgInNjYWxlZFlMaW5lV2lkdGgiLCAiYmFzZUFyZWEiLCAic2F2ZVJlc3RvcmUiLCAiZGFzaGVzIiwgInByb3RvdHlwZSIsICJHbG9iYWxXb3JrZXJPcHRpb25zIiwgIndvcmtlclBvcnQiLCAidmFsIiwgIldvcmtlciIsICJFcnJvciIsICJ3b3JrZXJTcmMiLCAiTWV0YWRhdGEiLCAiY29uc3RydWN0b3IiLCAicGFyc2VkRGF0YSIsICJyYXdEYXRhIiwgImdldFJhdyIsICJnZXQiLCAibmFtZSIsICJnZXRBbGwiLCAib2JqZWN0RnJvbU1hcCIsICJoYXMiLCAiSU5URVJOQUwiLCAiU3ltYm9sIiwgIk9wdGlvbmFsQ29udGVudEdyb3VwIiwgImNvbnN0cnVjdG9yIiwgInJlbmRlcmluZ0ludGVudCIsICJuYW1lIiwgImludGVudCIsICJ1c2FnZSIsICJyYkdyb3VwcyIsICJSZW5kZXJpbmdJbnRlbnRGbGFnIiwgIkRJU1BMQVkiLCAiUFJJTlQiLCAidmlzaWJsZSIsICJwcmludCIsICJ2aWV3IiwgInZpZXdTdGF0ZSIsICJwcmludFN0YXRlIiwgIl9zZXRWaXNpYmxlIiwgImludGVybmFsIiwgInVzZXJTZXQiLCAidW5yZWFjaGFibGUiLCAiT3B0aW9uYWxDb250ZW50Q29uZmlnIiwgIk1hcCIsICJkYXRhIiwgImNyZWF0b3IiLCAib3JkZXIiLCAiZ3JvdXAiLCAiZ3JvdXBzIiwgInNldCIsICJpZCIsICJiYXNlU3RhdGUiLCAidmFsdWVzIiwgIm9uIiwgImdldCIsICJvZmYiLCAiZ2V0SGFzaCIsICJhcnJheSIsICJsZW5ndGgiLCAib3BlcmF0b3IiLCAiaSIsICJlbGVtZW50IiwgInN0YXRlIiwgIkFycmF5IiwgImlzQXJyYXkiLCAiaGFzIiwgIndhcm4iLCAiaXNWaXNpYmxlIiwgInNpemUiLCAiaW5mbyIsICJ0eXBlIiwgImV4cHJlc3Npb24iLCAicG9saWN5IiwgImlkcyIsICJzZXRWaXNpYmlsaXR5IiwgInByZXNlcnZlUkIiLCAicmJHcm91cCIsICJvdGhlcklkIiwgInNldE9DR1N0YXRlIiwgImVsZW0iLCAiaGFzSW5pdGlhbFZpc2liaWxpdHkiLCAiZ2V0T3JkZXIiLCAic2xpY2UiLCAia2V5cyIsICJnZXRHcm91cHMiLCAib2JqZWN0RnJvbU1hcCIsICJnZXRHcm91cCIsICJoYXNoIiwgIk11cm11ckhhc2gzXzY0IiwgInVwZGF0ZSIsICJoZXhkaWdlc3QiLCAiUERGRGF0YVRyYW5zcG9ydFN0cmVhbSIsICJjb25zdHJ1Y3RvciIsICJwZGZEYXRhUmFuZ2VUcmFuc3BvcnQiLCAiZGlzYWJsZVJhbmdlIiwgImRpc2FibGVTdHJlYW0iLCAiYXNzZXJ0IiwgImxlbmd0aCIsICJpbml0aWFsRGF0YSIsICJwcm9ncmVzc2l2ZURvbmUiLCAiY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUiLCAiX3F1ZXVlZENodW5rcyIsICJfcHJvZ3Jlc3NpdmVEb25lIiwgIl9jb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSIsICJidWZmZXIiLCAiVWludDhBcnJheSIsICJieXRlTGVuZ3RoIiwgInB1c2giLCAiX3BkZkRhdGFSYW5nZVRyYW5zcG9ydCIsICJfaXNTdHJlYW1pbmdTdXBwb3J0ZWQiLCAiX2lzUmFuZ2VTdXBwb3J0ZWQiLCAiX2NvbnRlbnRMZW5ndGgiLCAiX2Z1bGxSZXF1ZXN0UmVhZGVyIiwgIl9yYW5nZVJlYWRlcnMiLCAiYWRkUmFuZ2VMaXN0ZW5lciIsICJiZWdpbiIsICJjaHVuayIsICJfb25SZWNlaXZlRGF0YSIsICJhZGRQcm9ncmVzc0xpc3RlbmVyIiwgImxvYWRlZCIsICJ0b3RhbCIsICJfb25Qcm9ncmVzcyIsICJhZGRQcm9ncmVzc2l2ZVJlYWRMaXN0ZW5lciIsICJhZGRQcm9ncmVzc2l2ZURvbmVMaXN0ZW5lciIsICJfb25Qcm9ncmVzc2l2ZURvbmUiLCAidHJhbnNwb3J0UmVhZHkiLCAidW5kZWZpbmVkIiwgIl9lbnF1ZXVlIiwgImZvdW5kIiwgInNvbWUiLCAicmFuZ2VSZWFkZXIiLCAiX2JlZ2luIiwgIl9wcm9ncmVzc2l2ZURhdGFMZW5ndGgiLCAiX2xvYWRlZCIsICJldnQiLCAib25Qcm9ncmVzcyIsICJfcmVtb3ZlUmFuZ2VSZWFkZXIiLCAicmVhZGVyIiwgImkiLCAiaW5kZXhPZiIsICJzcGxpY2UiLCAiZ2V0RnVsbFJlYWRlciIsICJxdWV1ZWRDaHVua3MiLCAiUERGRGF0YVRyYW5zcG9ydFN0cmVhbVJlYWRlciIsICJnZXRSYW5nZVJlYWRlciIsICJlbmQiLCAiUERGRGF0YVRyYW5zcG9ydFN0cmVhbVJhbmdlUmVhZGVyIiwgInJlcXVlc3REYXRhUmFuZ2UiLCAiY2FuY2VsQWxsUmVxdWVzdHMiLCAicmVhc29uIiwgImNhbmNlbCIsICJzbGljZSIsICJhYm9ydCIsICJzdHJlYW0iLCAiX3N0cmVhbSIsICJfZG9uZSIsICJfZmlsZW5hbWUiLCAiaXNQZGZGaWxlIiwgIl9yZXF1ZXN0cyIsICJfaGVhZGVyc1JlYWR5IiwgIlByb21pc2UiLCAicmVzb2x2ZSIsICJyZXF1ZXN0Q2FwYWJpbGl0eSIsICJzaGlmdCIsICJ2YWx1ZSIsICJkb25lIiwgImhlYWRlcnNSZWFkeSIsICJmaWxlbmFtZSIsICJpc1JhbmdlU3VwcG9ydGVkIiwgImlzU3RyZWFtaW5nU3VwcG9ydGVkIiwgImNvbnRlbnRMZW5ndGgiLCAicmVhZCIsICJ3aXRoUmVzb2x2ZXJzIiwgInByb21pc2UiLCAiX2VuZCIsICJfcXVldWVkQ2h1bmsiLCAicmVxdWVzdHNDYXBhYmlsaXR5IiwgImdldEZpbGVuYW1lRnJvbUNvbnRlbnREaXNwb3NpdGlvbkhlYWRlciIsICJjb250ZW50RGlzcG9zaXRpb24iLCAibmVlZHNFbmNvZGluZ0ZpeHVwIiwgInRtcCIsICJ0b1BhcmFtUmVnRXhwIiwgImV4ZWMiLCAiZmlsZW5hbWUiLCAicmZjMjYxNnVucXVvdGUiLCAidW5lc2NhcGUiLCAicmZjNTk4N2RlY29kZSIsICJyZmMyMDQ3ZGVjb2RlIiwgImZpeHVwRW5jb2RpbmciLCAicmZjMjIzMWdldHBhcmFtIiwgImF0dHJpYnV0ZVBhdHRlcm4iLCAiZmxhZ3MiLCAiUmVnRXhwIiwgInRleHRkZWNvZGUiLCAiZW5jb2RpbmciLCAidmFsdWUiLCAidGVzdCIsICJkZWNvZGVyIiwgIlRleHREZWNvZGVyIiwgImZhdGFsIiwgImJ1ZmZlciIsICJzdHJpbmdUb0J5dGVzIiwgImRlY29kZSIsICJjb250ZW50RGlzcG9zaXRpb25TdHIiLCAibWF0Y2hlcyIsICJtYXRjaCIsICJpdGVyIiwgIm4iLCAicXVvdCIsICJwYXJ0IiwgInBhcnNlSW50IiwgInBhcnRzIiwgImxlbmd0aCIsICJwdXNoIiwgImpvaW4iLCAic3RhcnRzV2l0aCIsICJzbGljZSIsICJzcGxpdCIsICJpIiwgInF1b3RpbmRleCIsICJpbmRleE9mIiwgInJlcGxhY2VBbGwiLCAiZXh0dmFsdWUiLCAiZW5jb2RpbmdlbmQiLCAibGFuZ3ZhbHVlIiwgInJlcGxhY2UiLCAiY2hhcnNldCIsICJ0ZXh0IiwgImhleCIsICJTdHJpbmciLCAiZnJvbUNoYXJDb2RlIiwgImF0b2IiLCAiY3JlYXRlSGVhZGVycyIsICJpc0h0dHAiLCAiaHR0cEhlYWRlcnMiLCAiaGVhZGVycyIsICJIZWFkZXJzIiwgImtleSIsICJ2YWwiLCAidW5kZWZpbmVkIiwgImFwcGVuZCIsICJnZXRSZXNwb25zZU9yaWdpbiIsICJ1cmwiLCAiVVJMIiwgInBhcnNlIiwgIm9yaWdpbiIsICJ2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyIsICJyZXNwb25zZUhlYWRlcnMiLCAicmFuZ2VDaHVua1NpemUiLCAiZGlzYWJsZVJhbmdlIiwgInJldHVyblZhbHVlcyIsICJhbGxvd1JhbmdlUmVxdWVzdHMiLCAic3VnZ2VzdGVkTGVuZ3RoIiwgImxlbmd0aCIsICJwYXJzZUludCIsICJnZXQiLCAiTnVtYmVyIiwgImlzSW50ZWdlciIsICJjb250ZW50RW5jb2RpbmciLCAiZXh0cmFjdEZpbGVuYW1lRnJvbUhlYWRlciIsICJjb250ZW50RGlzcG9zaXRpb24iLCAiZmlsZW5hbWUiLCAiZ2V0RmlsZW5hbWVGcm9tQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyIiwgImluY2x1ZGVzIiwgImRlY29kZVVSSUNvbXBvbmVudCIsICJpc1BkZkZpbGUiLCAiY3JlYXRlUmVzcG9uc2VFcnJvciIsICJzdGF0dXMiLCAiUmVzcG9uc2VFeGNlcHRpb24iLCAic3RhcnRzV2l0aCIsICJ2YWxpZGF0ZVJlc3BvbnNlU3RhdHVzIiwgImNyZWF0ZUZldGNoT3B0aW9ucyIsICJoZWFkZXJzIiwgIndpdGhDcmVkZW50aWFscyIsICJhYm9ydENvbnRyb2xsZXIiLCAibWV0aG9kIiwgInNpZ25hbCIsICJtb2RlIiwgImNyZWRlbnRpYWxzIiwgInJlZGlyZWN0IiwgImdldEFycmF5QnVmZmVyIiwgInZhbCIsICJVaW50OEFycmF5IiwgImJ1ZmZlciIsICJBcnJheUJ1ZmZlciIsICJ3YXJuIiwgIlBERkZldGNoU3RyZWFtIiwgIl9yZXNwb25zZU9yaWdpbiIsICJjb25zdHJ1Y3RvciIsICJzb3VyY2UiLCAiaXNIdHRwIiwgInRlc3QiLCAidXJsIiwgImNyZWF0ZUhlYWRlcnMiLCAiaHR0cEhlYWRlcnMiLCAiX2Z1bGxSZXF1ZXN0UmVhZGVyIiwgIl9yYW5nZVJlcXVlc3RSZWFkZXJzIiwgIl9wcm9ncmVzc2l2ZURhdGFMZW5ndGgiLCAiX2xvYWRlZCIsICJnZXRGdWxsUmVhZGVyIiwgImFzc2VydCIsICJQREZGZXRjaFN0cmVhbVJlYWRlciIsICJnZXRSYW5nZVJlYWRlciIsICJiZWdpbiIsICJlbmQiLCAicmVhZGVyIiwgIlBERkZldGNoU3RyZWFtUmFuZ2VSZWFkZXIiLCAicHVzaCIsICJjYW5jZWxBbGxSZXF1ZXN0cyIsICJyZWFzb24iLCAiY2FuY2VsIiwgInNsaWNlIiwgInN0cmVhbSIsICJfc3RyZWFtIiwgIl9yZWFkZXIiLCAiX2ZpbGVuYW1lIiwgIl93aXRoQ3JlZGVudGlhbHMiLCAiX2NvbnRlbnRMZW5ndGgiLCAibGVuZ3RoIiwgIl9oZWFkZXJzQ2FwYWJpbGl0eSIsICJQcm9taXNlIiwgIndpdGhSZXNvbHZlcnMiLCAiX2Rpc2FibGVSYW5nZSIsICJkaXNhYmxlUmFuZ2UiLCAiX3JhbmdlQ2h1bmtTaXplIiwgInJhbmdlQ2h1bmtTaXplIiwgIl9hYm9ydENvbnRyb2xsZXIiLCAiQWJvcnRDb250cm9sbGVyIiwgIl9pc1N0cmVhbWluZ1N1cHBvcnRlZCIsICJkaXNhYmxlU3RyZWFtIiwgIl9pc1JhbmdlU3VwcG9ydGVkIiwgIkhlYWRlcnMiLCAiZmV0Y2giLCAidGhlbiIsICJyZXNwb25zZSIsICJnZXRSZXNwb25zZU9yaWdpbiIsICJ2YWxpZGF0ZVJlc3BvbnNlU3RhdHVzIiwgInN0YXR1cyIsICJjcmVhdGVSZXNwb25zZUVycm9yIiwgImJvZHkiLCAiZ2V0UmVhZGVyIiwgInJlc29sdmUiLCAicmVzcG9uc2VIZWFkZXJzIiwgImFsbG93UmFuZ2VSZXF1ZXN0cyIsICJzdWdnZXN0ZWRMZW5ndGgiLCAidmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXMiLCAiZXh0cmFjdEZpbGVuYW1lRnJvbUhlYWRlciIsICJBYm9ydEV4Y2VwdGlvbiIsICJjYXRjaCIsICJyZWplY3QiLCAib25Qcm9ncmVzcyIsICJoZWFkZXJzUmVhZHkiLCAicHJvbWlzZSIsICJmaWxlbmFtZSIsICJjb250ZW50TGVuZ3RoIiwgImlzUmFuZ2VTdXBwb3J0ZWQiLCAiaXNTdHJlYW1pbmdTdXBwb3J0ZWQiLCAicmVhZCIsICJ2YWx1ZSIsICJkb25lIiwgImJ5dGVMZW5ndGgiLCAibG9hZGVkIiwgInRvdGFsIiwgImFib3J0IiwgIl9yZWFkQ2FwYWJpbGl0eSIsICJhcHBlbmQiLCAicmVzcG9uc2VPcmlnaW4iLCAiRXJyb3IiLCAiT0tfUkVTUE9OU0UiLCAiUEFSVElBTF9DT05URU5UX1JFU1BPTlNFIiwgImdldEFycmF5QnVmZmVyIiwgInhociIsICJkYXRhIiwgInJlc3BvbnNlIiwgInN0cmluZ1RvQnl0ZXMiLCAiYnVmZmVyIiwgIk5ldHdvcmtNYW5hZ2VyIiwgIl9yZXNwb25zZU9yaWdpbiIsICJjb25zdHJ1Y3RvciIsICJ1cmwiLCAiaHR0cEhlYWRlcnMiLCAid2l0aENyZWRlbnRpYWxzIiwgImlzSHR0cCIsICJ0ZXN0IiwgImhlYWRlcnMiLCAiY3JlYXRlSGVhZGVycyIsICJjdXJyWGhySWQiLCAicGVuZGluZ1JlcXVlc3RzIiwgIk9iamVjdCIsICJjcmVhdGUiLCAicmVxdWVzdCIsICJhcmdzIiwgIlhNTEh0dHBSZXF1ZXN0IiwgInhocklkIiwgInBlbmRpbmdSZXF1ZXN0IiwgIm9wZW4iLCAia2V5IiwgInZhbCIsICJzZXRSZXF1ZXN0SGVhZGVyIiwgImJlZ2luIiwgImVuZCIsICJleHBlY3RlZFN0YXR1cyIsICJyZXNwb25zZVR5cGUiLCAiYXNzZXJ0IiwgIm9uRXJyb3IiLCAib25lcnJvciIsICJzdGF0dXMiLCAib25yZWFkeXN0YXRlY2hhbmdlIiwgIm9uU3RhdGVDaGFuZ2UiLCAiYmluZCIsICJvbnByb2dyZXNzIiwgIm9uUHJvZ3Jlc3MiLCAib25IZWFkZXJzUmVjZWl2ZWQiLCAib25Eb25lIiwgInNlbmQiLCAiZXZ0IiwgInJlYWR5U3RhdGUiLCAieGhyU3RhdHVzIiwgIm9rX3Jlc3BvbnNlX29uX3JhbmdlX3JlcXVlc3QiLCAiY2h1bmsiLCAicmFuZ2VIZWFkZXIiLCAiZ2V0UmVzcG9uc2VIZWFkZXIiLCAibWF0Y2hlcyIsICJleGVjIiwgInBhcnNlSW50IiwgIndhcm4iLCAiZ2V0UmVxdWVzdFhociIsICJpc1BlbmRpbmdSZXF1ZXN0IiwgImFib3J0UmVxdWVzdCIsICJhYm9ydCIsICJQREZOZXR3b3JrU3RyZWFtIiwgInNvdXJjZSIsICJfc291cmNlIiwgIl9tYW5hZ2VyIiwgIl9yYW5nZUNodW5rU2l6ZSIsICJyYW5nZUNodW5rU2l6ZSIsICJfZnVsbFJlcXVlc3RSZWFkZXIiLCAiX3JhbmdlUmVxdWVzdFJlYWRlcnMiLCAiX29uUmFuZ2VSZXF1ZXN0UmVhZGVyQ2xvc2VkIiwgInJlYWRlciIsICJpIiwgImluZGV4T2YiLCAic3BsaWNlIiwgImdldEZ1bGxSZWFkZXIiLCAiUERGTmV0d29ya1N0cmVhbUZ1bGxSZXF1ZXN0UmVhZGVyIiwgImdldFJhbmdlUmVhZGVyIiwgIlBERk5ldHdvcmtTdHJlYW1SYW5nZVJlcXVlc3RSZWFkZXIiLCAib25DbG9zZWQiLCAicHVzaCIsICJjYW5jZWxBbGxSZXF1ZXN0cyIsICJyZWFzb24iLCAiY2FuY2VsIiwgInNsaWNlIiwgIm1hbmFnZXIiLCAiX3VybCIsICJfZnVsbFJlcXVlc3RJZCIsICJfb25IZWFkZXJzUmVjZWl2ZWQiLCAiX29uRG9uZSIsICJfb25FcnJvciIsICJfb25Qcm9ncmVzcyIsICJfaGVhZGVyc0NhcGFiaWxpdHkiLCAiUHJvbWlzZSIsICJ3aXRoUmVzb2x2ZXJzIiwgIl9kaXNhYmxlUmFuZ2UiLCAiZGlzYWJsZVJhbmdlIiwgIl9jb250ZW50TGVuZ3RoIiwgImxlbmd0aCIsICJfaXNTdHJlYW1pbmdTdXBwb3J0ZWQiLCAiX2lzUmFuZ2VTdXBwb3J0ZWQiLCAiX2NhY2hlZENodW5rcyIsICJfcmVxdWVzdHMiLCAiX2RvbmUiLCAiX3N0b3JlZEVycm9yIiwgInVuZGVmaW5lZCIsICJfZmlsZW5hbWUiLCAiZnVsbFJlcXVlc3RYaHJJZCIsICJmdWxsUmVxdWVzdFhociIsICJnZXRSZXNwb25zZU9yaWdpbiIsICJyZXNwb25zZVVSTCIsICJyYXdSZXNwb25zZUhlYWRlcnMiLCAiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwgInJlc3BvbnNlSGVhZGVycyIsICJIZWFkZXJzIiwgInRyaW1TdGFydCIsICJyZXBsYWNlIiwgInNwbGl0IiwgIm1hcCIsICJ4IiwgImpvaW4iLCAiYWxsb3dSYW5nZVJlcXVlc3RzIiwgInN1Z2dlc3RlZExlbmd0aCIsICJ2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyIsICJleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyIiwgInJlc29sdmUiLCAicmVxdWVzdENhcGFiaWxpdHkiLCAic2hpZnQiLCAidmFsdWUiLCAiZG9uZSIsICJjcmVhdGVSZXNwb25zZUVycm9yIiwgInJlamVjdCIsICJsb2FkZWQiLCAidG90YWwiLCAibGVuZ3RoQ29tcHV0YWJsZSIsICJmaWxlbmFtZSIsICJpc1JhbmdlU3VwcG9ydGVkIiwgImlzU3RyZWFtaW5nU3VwcG9ydGVkIiwgImNvbnRlbnRMZW5ndGgiLCAiaGVhZGVyc1JlYWR5IiwgInByb21pc2UiLCAicmVhZCIsICJfcmVxdWVzdElkIiwgIl9xdWV1ZWRDaHVuayIsICJyZXNwb25zZU9yaWdpbiIsICJFcnJvciIsICJfY2xvc2UiLCAidXJsUmVnZXgiLCAicGFyc2VVcmxPclBhdGgiLCAic291cmNlVXJsIiwgInRlc3QiLCAiVVJMIiwgInVybCIsICJwcm9jZXNzIiwgImdldEJ1aWx0aW5Nb2R1bGUiLCAicGF0aFRvRmlsZVVSTCIsICJQREZOb2RlU3RyZWFtIiwgImNvbnN0cnVjdG9yIiwgInNvdXJjZSIsICJhc3NlcnQiLCAicHJvdG9jb2wiLCAiX2Z1bGxSZXF1ZXN0UmVhZGVyIiwgIl9yYW5nZVJlcXVlc3RSZWFkZXJzIiwgIl9wcm9ncmVzc2l2ZURhdGFMZW5ndGgiLCAiX2xvYWRlZCIsICJnZXRGdWxsUmVhZGVyIiwgIlBERk5vZGVTdHJlYW1Gc0Z1bGxSZWFkZXIiLCAiZ2V0UmFuZ2VSZWFkZXIiLCAic3RhcnQiLCAiZW5kIiwgInJhbmdlUmVhZGVyIiwgIlBERk5vZGVTdHJlYW1Gc1JhbmdlUmVhZGVyIiwgInB1c2giLCAiY2FuY2VsQWxsUmVxdWVzdHMiLCAicmVhc29uIiwgImNhbmNlbCIsICJyZWFkZXIiLCAic2xpY2UiLCAic3RyZWFtIiwgIl91cmwiLCAiX2RvbmUiLCAiX3N0b3JlZEVycm9yIiwgIm9uUHJvZ3Jlc3MiLCAiX2NvbnRlbnRMZW5ndGgiLCAibGVuZ3RoIiwgIl9maWxlbmFtZSIsICJfZGlzYWJsZVJhbmdlIiwgImRpc2FibGVSYW5nZSIsICJfcmFuZ2VDaHVua1NpemUiLCAicmFuZ2VDaHVua1NpemUiLCAiX2lzU3RyZWFtaW5nU3VwcG9ydGVkIiwgImRpc2FibGVTdHJlYW0iLCAiX2lzUmFuZ2VTdXBwb3J0ZWQiLCAiX3JlYWRhYmxlU3RyZWFtIiwgIl9yZWFkQ2FwYWJpbGl0eSIsICJQcm9taXNlIiwgIndpdGhSZXNvbHZlcnMiLCAiX2hlYWRlcnNDYXBhYmlsaXR5IiwgImZzIiwgInByb21pc2VzIiwgImxzdGF0IiwgInRoZW4iLCAic3RhdCIsICJzaXplIiwgIl9zZXRSZWFkYWJsZVN0cmVhbSIsICJjcmVhdGVSZWFkU3RyZWFtIiwgInJlc29sdmUiLCAiZXJyb3IiLCAiY29kZSIsICJjcmVhdGVSZXNwb25zZUVycm9yIiwgImhyZWYiLCAicmVqZWN0IiwgImhlYWRlcnNSZWFkeSIsICJwcm9taXNlIiwgImZpbGVuYW1lIiwgImNvbnRlbnRMZW5ndGgiLCAiaXNSYW5nZVN1cHBvcnRlZCIsICJpc1N0cmVhbWluZ1N1cHBvcnRlZCIsICJyZWFkIiwgInZhbHVlIiwgInVuZGVmaW5lZCIsICJkb25lIiwgImNodW5rIiwgImxvYWRlZCIsICJ0b3RhbCIsICJidWZmZXIiLCAiVWludDhBcnJheSIsICJfZXJyb3IiLCAiZGVzdHJveSIsICJyZWFkYWJsZVN0cmVhbSIsICJvbiIsICJBYm9ydEV4Y2VwdGlvbiIsICJNQVhfVEVYVF9ESVZTX1RPX1JFTkRFUiIsICJERUZBVUxUX0ZPTlRfU0laRSIsICJUZXh0TGF5ZXIiLCAiUHJvbWlzZSIsICJ3aXRoUmVzb2x2ZXJzIiwgImdsb2JhbFRoaXMiLCAiRm9udEluc3BlY3RvciIsICJlbmFibGVkIiwgIk9iamVjdCIsICJjcmVhdGUiLCAiV2Vha01hcCIsICJNYXAiLCAiU2V0IiwgImNvbnN0cnVjdG9yIiwgInRleHRDb250ZW50U291cmNlIiwgImNvbnRhaW5lciIsICJ2aWV3cG9ydCIsICJSZWFkYWJsZVN0cmVhbSIsICJzdGFydCIsICJjb250cm9sbGVyIiwgImVucXVldWUiLCAiY2xvc2UiLCAiRXJyb3IiLCAic2NhbGUiLCAiT3V0cHV0U2NhbGUiLCAicGl4ZWxSYXRpbyIsICJyb3RhdGlvbiIsICJkaXYiLCAicHJvcGVydGllcyIsICJjdHgiLCAicGFnZVdpZHRoIiwgInBhZ2VIZWlnaHQiLCAicGFnZVgiLCAicGFnZVkiLCAicmF3RGltcyIsICJzZXRMYXllckRpbWVuc2lvbnMiLCAicHJvbWlzZSIsICJmaW5hbGx5IiwgImRlbGV0ZSIsICJjYXRjaCIsICJmb250RmFtaWx5TWFwIiwgImlzV2luZG93cyIsICJpc0ZpcmVmb3giLCAiRmVhdHVyZVRlc3QiLCAicGxhdGZvcm0iLCAic2hhZG93IiwgInJlbmRlciIsICJwdW1wIiwgInJlYWQiLCAidGhlbiIsICJ2YWx1ZSIsICJkb25lIiwgInJlc29sdmUiLCAibGFuZyIsICJhc3NpZ24iLCAic3R5bGVzIiwgIml0ZW1zIiwgInJlamVjdCIsICJnZXRSZWFkZXIiLCAiYWRkIiwgInVwZGF0ZSIsICJvbkJlZm9yZSIsICJwYXJhbXMiLCAiZ2V0IiwgImNhbmNlbCIsICJhYm9ydEV4IiwgIkFib3J0RXhjZXB0aW9uIiwgInRleHREaXZzIiwgInRleHRDb250ZW50SXRlbXNTdHIiLCAiaXRlbSIsICJsZW5ndGgiLCAid2FybiIsICJzdHIiLCAidW5kZWZpbmVkIiwgInR5cGUiLCAicGFyZW50IiwgImRvY3VtZW50IiwgImNyZWF0ZUVsZW1lbnQiLCAiY2xhc3NMaXN0IiwgImlkIiwgInNldEF0dHJpYnV0ZSIsICJhcHBlbmQiLCAicGFyZW50Tm9kZSIsICJwdXNoIiwgImdlb20iLCAidGV4dERpdiIsICJ0ZXh0RGl2UHJvcGVydGllcyIsICJhbmdsZSIsICJjYW52YXNXaWR0aCIsICJoYXNUZXh0IiwgImhhc0VPTCIsICJmb250U2l6ZSIsICJ0eCIsICJVdGlsIiwgInRyYW5zZm9ybSIsICJNYXRoIiwgImF0YW4yIiwgInN0eWxlIiwgImZvbnROYW1lIiwgInZlcnRpY2FsIiwgIlBJIiwgImZvbnRGYW1pbHkiLCAiZm9udFN1YnN0aXR1dGlvbiIsICJmb250SGVpZ2h0IiwgImh5cG90IiwgImZvbnRBc2NlbnQiLCAibGVmdCIsICJ0b3AiLCAic2luIiwgImNvcyIsICJzY2FsZUZhY3RvclN0ciIsICJkaXZTdHlsZSIsICJ0b0ZpeGVkIiwgInRleHRDb250ZW50IiwgImRpciIsICJkYXRhc2V0IiwgImZvbnRTdWJzdGl0dXRpb25Mb2FkZWROYW1lIiwgInNob3VsZFNjYWxlVGV4dCIsICJhYnNTY2FsZVgiLCAiYWJzIiwgImFic1NjYWxlWSIsICJtYXgiLCAibWluIiwgImhlaWdodCIsICJ3aWR0aCIsICJzZXQiLCAiYnIiLCAibWVhc3VyZVRleHQiLCAiY2xlYW51cCIsICJzaXplIiwgImNsZWFyIiwgImNhbnZhcyIsICJ2YWx1ZXMiLCAicmVtb3ZlIiwgImNsYXNzTmFtZSIsICJib2R5IiwgImdldENvbnRleHQiLCAiYWxwaGEiLCAid2lsbFJlYWRGcmVxdWVudGx5IiwgImZhbWlseSIsICJjYWNoZWQiLCAiZm9udCIsICJvcGFjaXR5IiwgImxpbmVIZWlnaHQiLCAicG9zaXRpb24iLCAiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwgImNhY2hlZEFzY2VudCIsICJtZXRyaWNzIiwgImFzY2VudCIsICJmb250Qm91bmRpbmdCb3hBc2NlbnQiLCAiZGVzY2VudCIsICJmb250Qm91bmRpbmdCb3hEZXNjZW50IiwgInJhdGlvIiwgIlhmYVRleHQiLCAidGV4dENvbnRlbnQiLCAieGZhIiwgIml0ZW1zIiwgIm91dHB1dCIsICJzdHlsZXMiLCAiT2JqZWN0IiwgImNyZWF0ZSIsICJ3YWxrIiwgIm5vZGUiLCAic3RyIiwgIm5hbWUiLCAidmFsdWUiLCAic2hvdWxkQnVpbGRUZXh0IiwgImF0dHJpYnV0ZXMiLCAicHVzaCIsICJjaGlsZHJlbiIsICJjaGlsZCIsICJERUZBVUxUX1JBTkdFX0NIVU5LX1NJWkUiLCAiUkVOREVSSU5HX0NBTkNFTExFRF9USU1FT1VUIiwgImdldERvY3VtZW50IiwgInNyYyIsICJVUkwiLCAidXJsIiwgIkFycmF5QnVmZmVyIiwgImlzVmlldyIsICJkYXRhIiwgInRhc2siLCAiUERGRG9jdW1lbnRMb2FkaW5nVGFzayIsICJkb2NJZCIsICJnZXRVcmxQcm9wIiwgImdldERhdGFQcm9wIiwgImh0dHBIZWFkZXJzIiwgIndpdGhDcmVkZW50aWFscyIsICJwYXNzd29yZCIsICJyYW5nZVRyYW5zcG9ydCIsICJyYW5nZSIsICJQREZEYXRhUmFuZ2VUcmFuc3BvcnQiLCAicmFuZ2VDaHVua1NpemUiLCAiTnVtYmVyIiwgImlzSW50ZWdlciIsICJ3b3JrZXIiLCAiUERGV29ya2VyIiwgInZlcmJvc2l0eSIsICJkb2NCYXNlVXJsIiwgImlzRGF0YVNjaGVtZSIsICJjTWFwVXJsIiwgImdldEZhY3RvcnlVcmxQcm9wIiwgImNNYXBQYWNrZWQiLCAiQ01hcFJlYWRlckZhY3RvcnkiLCAiaXNOb2RlSlMiLCAiTm9kZUNNYXBSZWFkZXJGYWN0b3J5IiwgIkRPTUNNYXBSZWFkZXJGYWN0b3J5IiwgImljY1VybCIsICJzdGFuZGFyZEZvbnREYXRhVXJsIiwgIlN0YW5kYXJkRm9udERhdGFGYWN0b3J5IiwgIk5vZGVTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSIsICJET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSIsICJ3YXNtVXJsIiwgIldhc21GYWN0b3J5IiwgIk5vZGVXYXNtRmFjdG9yeSIsICJET01XYXNtRmFjdG9yeSIsICJpZ25vcmVFcnJvcnMiLCAic3RvcEF0RXJyb3JzIiwgIm1heEltYWdlU2l6ZSIsICJpc0V2YWxTdXBwb3J0ZWQiLCAiaXNPZmZzY3JlZW5DYW52YXNTdXBwb3J0ZWQiLCAiaXNJbWFnZURlY29kZXJTdXBwb3J0ZWQiLCAiRmVhdHVyZVRlc3QiLCAicGxhdGZvcm0iLCAiaXNGaXJlZm94IiwgImdsb2JhbFRoaXMiLCAiY2hyb21lIiwgImNhbnZhc01heEFyZWFJbkJ5dGVzIiwgImRpc2FibGVGb250RmFjZSIsICJmb250RXh0cmFQcm9wZXJ0aWVzIiwgImVuYWJsZVhmYSIsICJvd25lckRvY3VtZW50IiwgImRvY3VtZW50IiwgImRpc2FibGVSYW5nZSIsICJkaXNhYmxlU3RyZWFtIiwgImRpc2FibGVBdXRvRmV0Y2giLCAicGRmQnVnIiwgIkNhbnZhc0ZhY3RvcnkiLCAiTm9kZUNhbnZhc0ZhY3RvcnkiLCAiRE9NQ2FudmFzRmFjdG9yeSIsICJGaWx0ZXJGYWN0b3J5IiwgIk5vZGVGaWx0ZXJGYWN0b3J5IiwgIkRPTUZpbHRlckZhY3RvcnkiLCAiZW5hYmxlSFdBIiwgInVzZVdhc20iLCAibGVuZ3RoIiwgIk5hTiIsICJ1c2VTeXN0ZW1Gb250cyIsICJ1c2VXb3JrZXJGZXRjaCIsICJpc1ZhbGlkRmV0Y2hVcmwiLCAiYmFzZVVSSSIsICJzdHlsZUVsZW1lbnQiLCAic2V0VmVyYm9zaXR5TGV2ZWwiLCAidHJhbnNwb3J0RmFjdG9yeSIsICJjYW52YXNGYWN0b3J5IiwgImZpbHRlckZhY3RvcnkiLCAiY01hcFJlYWRlckZhY3RvcnkiLCAiYmFzZVVybCIsICJpc0NvbXByZXNzZWQiLCAic3RhbmRhcmRGb250RGF0YUZhY3RvcnkiLCAid2FzbUZhY3RvcnkiLCAid29ya2VyUGFyYW1zIiwgInBvcnQiLCAiR2xvYmFsV29ya2VyT3B0aW9ucyIsICJ3b3JrZXJQb3J0IiwgImZyb21Qb3J0IiwgIl93b3JrZXIiLCAiZG9jUGFyYW1zIiwgImFwaVZlcnNpb24iLCAiZXZhbHVhdG9yT3B0aW9ucyIsICJ0cmFuc3BvcnRQYXJhbXMiLCAibG9hZGluZ1BhcmFtcyIsICJwcm9taXNlIiwgInRoZW4iLCAiZGVzdHJveWVkIiwgIkVycm9yIiwgIndvcmtlcklkUHJvbWlzZSIsICJtZXNzYWdlSGFuZGxlciIsICJzZW5kV2l0aFByb21pc2UiLCAiYnVmZmVyIiwgIm5ldHdvcmtTdHJlYW0iLCAiUERGRGF0YVRyYW5zcG9ydFN0cmVhbSIsICJOZXR3b3JrU3RyZWFtIiwgImZldGNoIiwgIlJlc3BvbnNlIiwgInByb3RvdHlwZSIsICJQREZGZXRjaFN0cmVhbSIsICJQREZOb2RlU3RyZWFtIiwgIlBERk5ldHdvcmtTdHJlYW0iLCAid29ya2VySWQiLCAiTWVzc2FnZUhhbmRsZXIiLCAidHJhbnNwb3J0IiwgIldvcmtlclRyYW5zcG9ydCIsICJfdHJhbnNwb3J0IiwgInNlbmQiLCAiY2F0Y2giLCAiX2NhcGFiaWxpdHkiLCAicmVqZWN0IiwgInZhbCIsICJocmVmIiwgInBhcnNlIiwgIndpbmRvdyIsICJsb2NhdGlvbiIsICJCdWZmZXIiLCAiVWludDhBcnJheSIsICJieXRlTGVuZ3RoIiwgInN0cmluZ1RvQnl0ZXMiLCAiaXNOYU4iLCAiZW5kc1dpdGgiLCAiaXNSZWZQcm94eSIsICJ2IiwgIm51bSIsICJnZW4iLCAiaXNOYW1lUHJveHkiLCAibmFtZSIsICJpc1ZhbGlkRXhwbGljaXREZXN0IiwgIl9pc1ZhbGlkRXhwbGljaXREZXN0IiwgImJpbmQiLCAiUHJvbWlzZSIsICJ3aXRoUmVzb2x2ZXJzIiwgIm9uUGFzc3dvcmQiLCAib25Qcm9ncmVzcyIsICJkZXN0cm95IiwgIl9wZW5kaW5nRGVzdHJveSIsICJleCIsICJnZXREYXRhIiwgImNvbnN0cnVjdG9yIiwgImluaXRpYWxEYXRhIiwgInByb2dyZXNzaXZlRG9uZSIsICJjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSIsICJfcmFuZ2VMaXN0ZW5lcnMiLCAiX3Byb2dyZXNzTGlzdGVuZXJzIiwgIl9wcm9ncmVzc2l2ZVJlYWRMaXN0ZW5lcnMiLCAiX3Byb2dyZXNzaXZlRG9uZUxpc3RlbmVycyIsICJfcmVhZHlDYXBhYmlsaXR5IiwgImFkZFJhbmdlTGlzdGVuZXIiLCAibGlzdGVuZXIiLCAicHVzaCIsICJhZGRQcm9ncmVzc0xpc3RlbmVyIiwgImFkZFByb2dyZXNzaXZlUmVhZExpc3RlbmVyIiwgImFkZFByb2dyZXNzaXZlRG9uZUxpc3RlbmVyIiwgIm9uRGF0YVJhbmdlIiwgImJlZ2luIiwgImNodW5rIiwgIm9uRGF0YVByb2dyZXNzIiwgImxvYWRlZCIsICJ0b3RhbCIsICJvbkRhdGFQcm9ncmVzc2l2ZVJlYWQiLCAib25EYXRhUHJvZ3Jlc3NpdmVEb25lIiwgInRyYW5zcG9ydFJlYWR5IiwgInJlc29sdmUiLCAicmVxdWVzdERhdGFSYW5nZSIsICJlbmQiLCAidW5yZWFjaGFibGUiLCAiYWJvcnQiLCAiUERGRG9jdW1lbnRQcm94eSIsICJwZGZJbmZvIiwgIl9wZGZJbmZvIiwgImFubm90YXRpb25TdG9yYWdlIiwgIm51bVBhZ2VzIiwgImZpbmdlcnByaW50cyIsICJpc1B1cmVYZmEiLCAic2hhZG93IiwgIl9odG1sRm9yWGZhIiwgImFsbFhmYUh0bWwiLCAiZ2V0UGFnZSIsICJwYWdlTnVtYmVyIiwgImdldFBhZ2VJbmRleCIsICJyZWYiLCAiZ2V0RGVzdGluYXRpb25zIiwgImdldERlc3RpbmF0aW9uIiwgImlkIiwgImdldFBhZ2VMYWJlbHMiLCAiZ2V0UGFnZUxheW91dCIsICJnZXRQYWdlTW9kZSIsICJnZXRWaWV3ZXJQcmVmZXJlbmNlcyIsICJnZXRPcGVuQWN0aW9uIiwgImdldEF0dGFjaG1lbnRzIiwgImdldEpTQWN0aW9ucyIsICJnZXREb2NKU0FjdGlvbnMiLCAiZ2V0T3V0bGluZSIsICJnZXRPcHRpb25hbENvbnRlbnRDb25maWciLCAiaW50ZW50IiwgInJlbmRlcmluZ0ludGVudCIsICJnZXRSZW5kZXJpbmdJbnRlbnQiLCAiZ2V0UGVybWlzc2lvbnMiLCAiZ2V0TWV0YWRhdGEiLCAiZ2V0TWFya0luZm8iLCAic2F2ZURvY3VtZW50IiwgImdldERvd25sb2FkSW5mbyIsICJkb3dubG9hZEluZm9DYXBhYmlsaXR5IiwgImNsZWFudXAiLCAia2VlcExvYWRlZEZvbnRzIiwgInN0YXJ0Q2xlYW51cCIsICJsb2FkaW5nVGFzayIsICJjYWNoZWRQYWdlTnVtYmVyIiwgImdldEZpZWxkT2JqZWN0cyIsICJoYXNKU0FjdGlvbnMiLCAiZ2V0Q2FsY3VsYXRpb25PcmRlcklkcyIsICJQREZQYWdlUHJveHkiLCAicGFnZUluZGV4IiwgInBhZ2VJbmZvIiwgIl9wYWdlSW5kZXgiLCAiX3BhZ2VJbmZvIiwgIl9zdGF0cyIsICJTdGF0VGltZXIiLCAiX3BkZkJ1ZyIsICJjb21tb25PYmpzIiwgIm9ianMiLCAiUERGT2JqZWN0cyIsICJfaW50ZW50U3RhdGVzIiwgIk1hcCIsICJyb3RhdGUiLCAidXNlclVuaXQiLCAidmlldyIsICJnZXRWaWV3cG9ydCIsICJzY2FsZSIsICJyb3RhdGlvbiIsICJvZmZzZXRYIiwgIm9mZnNldFkiLCAiZG9udEZsaXAiLCAiUGFnZVZpZXdwb3J0IiwgInZpZXdCb3giLCAiZ2V0QW5ub3RhdGlvbnMiLCAiZ2V0UGFnZUpTQWN0aW9ucyIsICJnZXRYZmEiLCAiY2hpbGRyZW4iLCAicmVuZGVyIiwgImNhbnZhc0NvbnRleHQiLCAidmlld3BvcnQiLCAiYW5ub3RhdGlvbk1vZGUiLCAiQW5ub3RhdGlvbk1vZGUiLCAiRU5BQkxFIiwgInRyYW5zZm9ybSIsICJiYWNrZ3JvdW5kIiwgIm9wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2UiLCAiYW5ub3RhdGlvbkNhbnZhc01hcCIsICJwYWdlQ29sb3JzIiwgInByaW50QW5ub3RhdGlvblN0b3JhZ2UiLCAiaXNFZGl0aW5nIiwgInRpbWUiLCAiaW50ZW50QXJncyIsICJjYWNoZUtleSIsICJpbnRlbnRTdGF0ZSIsICJnZXQiLCAiT2JqZWN0IiwgImNyZWF0ZSIsICJzZXQiLCAic3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCIsICJjbGVhclRpbWVvdXQiLCAiaW50ZW50UHJpbnQiLCAiUmVuZGVyaW5nSW50ZW50RmxhZyIsICJQUklOVCIsICJkaXNwbGF5UmVhZHlDYXBhYmlsaXR5IiwgIm9wZXJhdG9yTGlzdCIsICJmbkFycmF5IiwgImFyZ3NBcnJheSIsICJsYXN0Q2h1bmsiLCAic2VwYXJhdGVBbm5vdHMiLCAiX3B1bXBPcGVyYXRvckxpc3QiLCAiY29tcGxldGUiLCAiZXJyb3IiLCAicmVuZGVyVGFza3MiLCAiZGVsZXRlIiwgImludGVybmFsUmVuZGVyVGFzayIsICJjYXBhYmlsaXR5IiwgIl9hYm9ydE9wZXJhdG9yTGlzdCIsICJyZWFzb24iLCAidGltZUVuZCIsICJTdGF0cyIsICJlbmFibGVkIiwgImFkZCIsICJJbnRlcm5hbFJlbmRlclRhc2siLCAiY2FsbGJhY2siLCAicGFyYW1zIiwgInVzZVJlcXVlc3RBbmltYXRpb25GcmFtZSIsICJTZXQiLCAicmVuZGVyVGFzayIsICJhbGwiLCAidHJhbnNwYXJlbmN5IiwgIm9wdGlvbmFsQ29udGVudENvbmZpZyIsICJpbml0aWFsaXplR3JhcGhpY3MiLCAib3BlcmF0b3JMaXN0Q2hhbmdlZCIsICJnZXRPcGVyYXRvckxpc3QiLCAib3BMaXN0UmVhZENhcGFiaWxpdHkiLCAib3BMaXN0VGFzayIsICJzdHJlYW1UZXh0Q29udGVudCIsICJpbmNsdWRlTWFya2VkQ29udGVudCIsICJkaXNhYmxlTm9ybWFsaXphdGlvbiIsICJURVhUX0NPTlRFTlRfQ0hVTktfU0laRSIsICJzZW5kV2l0aFN0cmVhbSIsICJoaWdoV2F0ZXJNYXJrIiwgInNpemUiLCAidGV4dENvbnRlbnQiLCAiaXRlbXMiLCAiZ2V0VGV4dENvbnRlbnQiLCAieGZhIiwgIlhmYVRleHQiLCAicmVhZGFibGVTdHJlYW0iLCAicHVtcCIsICJyZWFkZXIiLCAicmVhZCIsICJ2YWx1ZSIsICJkb25lIiwgImxhbmciLCAiYXNzaWduIiwgInN0eWxlcyIsICJnZXRSZWFkZXIiLCAiZ2V0U3RydWN0VHJlZSIsICJfZGVzdHJveSIsICJ3YWl0T24iLCAidmFsdWVzIiwgImZvcmNlIiwgImNvbXBsZXRlZCIsICJjYW5jZWwiLCAiY2xlYXIiLCAicmVzZXRTdGF0cyIsICJzdWNjZXNzIiwgIl9zdGFydFJlbmRlclBhZ2UiLCAiX3JlbmRlclBhZ2VDaHVuayIsICJvcGVyYXRvckxpc3RDaHVuayIsICJpIiwgImlpIiwgImFubm90YXRpb25TdG9yYWdlU2VyaWFsaXphYmxlIiwgIm1vZGlmaWVkSWRzIiwgIm1hcCIsICJ0cmFuc2ZlciIsICJzdHJlYW1SZWFkZXIiLCAiUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uIiwgImRlbGF5IiwgImV4dHJhRGVsYXkiLCAic2V0VGltZW91dCIsICJBYm9ydEV4Y2VwdGlvbiIsICJtZXNzYWdlIiwgImN1ckNhY2hlS2V5IiwgImN1ckludGVudFN0YXRlIiwgInN0YXRzIiwgIkxvb3BiYWNrUG9ydCIsICJwb3N0TWVzc2FnZSIsICJvYmoiLCAiZXZlbnQiLCAic3RydWN0dXJlZENsb25lIiwgImNhbGwiLCAiYWRkRXZlbnRMaXN0ZW5lciIsICJvcHRpb25zIiwgInJtQWJvcnQiLCAic2lnbmFsIiwgIkFib3J0U2lnbmFsIiwgImFib3J0ZWQiLCAid2FybiIsICJvbkFib3J0IiwgInJlbW92ZUV2ZW50TGlzdGVuZXIiLCAidGVybWluYXRlIiwgIndvcmtlclNyYyIsICJfaXNTYW1lT3JpZ2luIiwgIm90aGVyVXJsIiwgImJhc2UiLCAib3JpZ2luIiwgIm90aGVyIiwgIl9jcmVhdGVDRE5XcmFwcGVyIiwgIndyYXBwZXIiLCAiY3JlYXRlT2JqZWN0VVJMIiwgIkJsb2IiLCAidHlwZSIsICJnZXRWZXJib3NpdHlMZXZlbCIsICJfcG9ydCIsICJfd2ViV29ya2VyIiwgIl9tZXNzYWdlSGFuZGxlciIsICJoYXMiLCAiV2Vha01hcCIsICJfaW5pdGlhbGl6ZUZyb21Qb3J0IiwgIl9pbml0aWFsaXplIiwgIm9uIiwgIl9zZXR1cEZha2VXb3JrZXIiLCAiV29ya2VyIiwgInRlcm1pbmF0ZUVhcmx5IiwgImFjIiwgIkFib3J0Q29udHJvbGxlciIsICJzZW5kVGVzdCIsICJ0ZXN0T2JqIiwgImluZm8iLCAiX3NldHVwRmFrZVdvcmtlckdsb2JhbCIsICJXb3JrZXJNZXNzYWdlSGFuZGxlciIsICJ3b3JrZXJIYW5kbGVyIiwgInNldHVwIiwgImNhY2hlZFBvcnQiLCAicGRmanNXb3JrZXIiLCAibG9hZGVyIiwgImZhY3RvcnkiLCAiZm9udExvYWRlciIsICJGb250TG9hZGVyIiwgIl9wYXJhbXMiLCAiZGVzdHJveUNhcGFiaWxpdHkiLCAiX25ldHdvcmtTdHJlYW0iLCAiX2Z1bGxSZWFkZXIiLCAiX2xhc3RQcm9ncmVzcyIsICJzZXR1cE1lc3NhZ2VIYW5kbGVyIiwgImNhY2hlZFByb21pc2UiLCAiQW5ub3RhdGlvblN0b3JhZ2UiLCAiaXNPcExpc3QiLCAiRElTUExBWSIsICJTZXJpYWxpemFibGVFbXB0eSIsICJBTlkiLCAiUHJpbnRBbm5vdGF0aW9uU3RvcmFnZSIsICJESVNBQkxFIiwgIkFOTk9UQVRJT05TX0RJU0FCTEUiLCAiRU5BQkxFX0ZPUk1TIiwgIkFOTk9UQVRJT05TX0ZPUk1TIiwgIkVOQUJMRV9TVE9SQUdFIiwgIkFOTk9UQVRJT05TX1NUT1JBR0UiLCAic2VyaWFsaXphYmxlIiwgIklTX0VESVRJTkciLCAiT1BMSVNUIiwgImlkcyIsICJoYXNoIiwgIm1vZGlmaWVkSWRzSGFzaCIsICJjYWNoZUtleUJ1ZiIsICJqb2luIiwgInBhZ2UiLCAiaGFzT3duUHJvcGVydHkiLCAicmVzZXRNb2RpZmllZCIsICJ0ZXJtaW5hdGVkIiwgIlRleHRMYXllciIsICJjYW5jZWxBbGxSZXF1ZXN0cyIsICJzaW5rIiwgImFzc2VydCIsICJnZXRGdWxsUmVhZGVyIiwgImV2dCIsICJvblB1bGwiLCAiY2xvc2UiLCAiZW5xdWV1ZSIsICJvbkNhbmNlbCIsICJyZWFkeSIsICJyZWFkeVJlYXNvbiIsICJoZWFkZXJzUmVhZHkiLCAiaXNTdHJlYW1pbmdTdXBwb3J0ZWQiLCAiaXNSYW5nZVN1cHBvcnRlZCIsICJjb250ZW50TGVuZ3RoIiwgInJhbmdlUmVhZGVyIiwgImdldFJhbmdlUmVhZGVyIiwgIl9udW1QYWdlcyIsICJodG1sRm9yWGZhIiwgIndyYXBSZWFzb24iLCAidXBkYXRlUGFzc3dvcmQiLCAiY29kZSIsICJlcnIiLCAiZXhwb3J0ZWREYXRhIiwgImV4cG9ydGVkRXJyb3IiLCAiaW5zcGVjdEZvbnQiLCAiRm9udEluc3BlY3RvciIsICJmb250IiwgImZvbnRBZGRlZCIsICJGb250RmFjZU9iamVjdCIsICJmaW5hbGx5IiwgImltYWdlUmVmIiwgInBhZ2VQcm94eSIsICJkYXRhTGVuIiwgImltYWdlRGF0YSIsICJiaXRtYXAiLCAiZmlsZW5hbWUiLCAicmVmU3RyIiwgIk9wdGlvbmFsQ29udGVudENvbmZpZyIsICJyZXN1bHRzIiwgIm1ldGFkYXRhIiwgIk1ldGFkYXRhIiwgImNsZWFudXBTdWNjZXNzZnVsIiwgIklOSVRJQUxfREFUQSIsICJTeW1ib2wiLCAib2JqSWQiLCAiaXRlcmF0b3IiLCAiUmVuZGVyVGFzayIsICJvbkNvbnRpbnVlIiwgIm9uRXJyb3IiLCAiZm9ybSIsICJjYW52YXMiLCAiV2Vha1NldCIsICJvcGVyYXRvckxpc3RJZHgiLCAicnVubmluZyIsICJncmFwaGljc1JlYWR5Q2FsbGJhY2siLCAiZ3JhcGhpY3NSZWFkeSIsICJfdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwgImNhbmNlbGxlZCIsICJfY2FuY2VsQm91bmQiLCAiX2NvbnRpbnVlQm91bmQiLCAiX2NvbnRpbnVlIiwgIl9zY2hlZHVsZU5leHRCb3VuZCIsICJfc2NoZWR1bGVOZXh0IiwgIl9uZXh0Qm91bmQiLCAiX25leHQiLCAiX2NhbnZhcyIsICJTdGVwcGVyTWFuYWdlciIsICJzdGVwcGVyIiwgImluaXQiLCAibmV4dEJyZWFrUG9pbnQiLCAiZ2V0TmV4dEJyZWFrUG9pbnQiLCAiZ2Z4IiwgIkNhbnZhc0dyYXBoaWNzIiwgImJlZ2luRHJhd2luZyIsICJlbmREcmF3aW5nIiwgImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwgInVwZGF0ZU9wZXJhdG9yTGlzdCIsICJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCAiZXhlY3V0ZU9wZXJhdG9yTGlzdCIsICJ2ZXJzaW9uIiwgImJ1aWxkIiwgIm1ha2VDb2xvckNvbXAiLCAibiIsICJNYXRoIiwgImZsb29yIiwgIm1heCIsICJtaW4iLCAidG9TdHJpbmciLCAicGFkU3RhcnQiLCAic2NhbGVBbmRDbGFtcCIsICJ4IiwgIkNvbG9yQ29udmVydGVycyIsICJDTVlLX0ciLCAiYyIsICJ5IiwgIm0iLCAiayIsICJHX0NNWUsiLCAiZyIsICJHX1JHQiIsICJHX3JnYiIsICJHX0hUTUwiLCAiRyIsICJSR0JfRyIsICJyIiwgImIiLCAiUkdCX3JnYiIsICJjb2xvciIsICJtYXAiLCAiUkdCX0hUTUwiLCAiam9pbiIsICJUX0hUTUwiLCAiVF9yZ2IiLCAiQ01ZS19SR0IiLCAiQ01ZS19yZ2IiLCAiQ01ZS19IVE1MIiwgImNvbXBvbmVudHMiLCAicmdiIiwgInNsaWNlIiwgIlJHQl9DTVlLIiwgIkJhc2VTVkdGYWN0b3J5IiwgImNyZWF0ZSIsICJ3aWR0aCIsICJoZWlnaHQiLCAic2tpcERpbWVuc2lvbnMiLCAiRXJyb3IiLCAic3ZnIiwgIl9jcmVhdGVTVkciLCAic2V0QXR0cmlidXRlIiwgImNyZWF0ZUVsZW1lbnQiLCAidHlwZSIsICJ1bnJlYWNoYWJsZSIsICJET01TVkdGYWN0b3J5IiwgImRvY3VtZW50IiwgImNyZWF0ZUVsZW1lbnROUyIsICJTVkdfTlMiLCAiWGZhTGF5ZXIiLCAic2V0dXBTdG9yYWdlIiwgImh0bWwiLCAiaWQiLCAiZWxlbWVudCIsICJzdG9yYWdlIiwgImludGVudCIsICJzdG9yZWREYXRhIiwgImdldFZhbHVlIiwgInZhbHVlIiwgIm5hbWUiLCAidGV4dENvbnRlbnQiLCAiYWRkRXZlbnRMaXN0ZW5lciIsICJldmVudCIsICJzZXRWYWx1ZSIsICJ0YXJnZXQiLCAiYXR0cmlidXRlcyIsICJ0eXBlIiwgInhmYU9uIiwgInNldEF0dHJpYnV0ZSIsICJ4ZmFPZmYiLCAicmVtb3ZlQXR0cmlidXRlIiwgImNoZWNrZWQiLCAiZ2V0QXR0cmlidXRlIiwgIm9wdGlvbiIsICJjaGlsZHJlbiIsICJzZWxlY3RlZCIsICJoYXNPd25Qcm9wZXJ0eSIsICJvcHRpb25zIiwgInNlbGVjdGVkSW5kZXgiLCAic2V0QXR0cmlidXRlcyIsICJsaW5rU2VydmljZSIsICJpc0hUTUxBbmNob3JFbGVtZW50IiwgIkhUTUxBbmNob3JFbGVtZW50IiwgImtleSIsICJPYmplY3QiLCAiZW50cmllcyIsICJ1bmRlZmluZWQiLCAibGVuZ3RoIiwgImpvaW4iLCAiYXNzaWduIiwgInN0eWxlIiwgImFkZExpbmtBdHRyaWJ1dGVzIiwgImhyZWYiLCAibmV3V2luZG93IiwgImRhdGFJZCIsICJyZW5kZXIiLCAicGFyYW1ldGVycyIsICJhbm5vdGF0aW9uU3RvcmFnZSIsICJyb290IiwgInhmYUh0bWwiLCAicm9vdEh0bWwiLCAiZG9jdW1lbnQiLCAiY3JlYXRlRWxlbWVudCIsICJpc05vdEZvclJpY2hUZXh0IiwgInJvb3REaXYiLCAiZGl2IiwgImFwcGVuZCIsICJ2aWV3cG9ydCIsICJ0cmFuc2Zvcm0iLCAidGV4dERpdnMiLCAibm9kZSIsICJjcmVhdGVUZXh0Tm9kZSIsICJYZmFUZXh0IiwgInNob3VsZEJ1aWxkVGV4dCIsICJwdXNoIiwgInN0YWNrIiwgInBhcmVudCIsICJpIiwgImF0IiwgInBvcCIsICJjaGlsZCIsICJjaGlsZEh0bWwiLCAieG1sbnMiLCAiY3JlYXRlRWxlbWVudE5TIiwgImVsIiwgInF1ZXJ5U2VsZWN0b3JBbGwiLCAidXBkYXRlIiwgImhpZGRlbiIsICJERUZBVUxUX1RBQl9JTkRFWCIsICJERUZBVUxUX0ZPTlRfU0laRSIsICJHZXRFbGVtZW50c0J5TmFtZVNldCIsICJXZWFrU2V0IiwgIkFubm90YXRpb25FbGVtZW50RmFjdG9yeSIsICJjcmVhdGUiLCAicGFyYW1ldGVycyIsICJzdWJ0eXBlIiwgImRhdGEiLCAiYW5ub3RhdGlvblR5cGUiLCAiQW5ub3RhdGlvblR5cGUiLCAiTElOSyIsICJMaW5rQW5ub3RhdGlvbkVsZW1lbnQiLCAiVEVYVCIsICJUZXh0QW5ub3RhdGlvbkVsZW1lbnQiLCAiV0lER0VUIiwgImZpZWxkVHlwZSIsICJUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQiLCAicmFkaW9CdXR0b24iLCAiUmFkaW9CdXR0b25XaWRnZXRBbm5vdGF0aW9uRWxlbWVudCIsICJjaGVja0JveCIsICJDaGVja2JveFdpZGdldEFubm90YXRpb25FbGVtZW50IiwgIlB1c2hCdXR0b25XaWRnZXRBbm5vdGF0aW9uRWxlbWVudCIsICJDaG9pY2VXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCIsICJTaWduYXR1cmVXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCIsICJXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCIsICJQT1BVUCIsICJQb3B1cEFubm90YXRpb25FbGVtZW50IiwgIkZSRUVURVhUIiwgIkZyZWVUZXh0QW5ub3RhdGlvbkVsZW1lbnQiLCAiTElORSIsICJMaW5lQW5ub3RhdGlvbkVsZW1lbnQiLCAiU1FVQVJFIiwgIlNxdWFyZUFubm90YXRpb25FbGVtZW50IiwgIkNJUkNMRSIsICJDaXJjbGVBbm5vdGF0aW9uRWxlbWVudCIsICJQT0xZTElORSIsICJQb2x5bGluZUFubm90YXRpb25FbGVtZW50IiwgIkNBUkVUIiwgIkNhcmV0QW5ub3RhdGlvbkVsZW1lbnQiLCAiSU5LIiwgIklua0Fubm90YXRpb25FbGVtZW50IiwgIlBPTFlHT04iLCAiUG9seWdvbkFubm90YXRpb25FbGVtZW50IiwgIkhJR0hMSUdIVCIsICJIaWdobGlnaHRBbm5vdGF0aW9uRWxlbWVudCIsICJVTkRFUkxJTkUiLCAiVW5kZXJsaW5lQW5ub3RhdGlvbkVsZW1lbnQiLCAiU1FVSUdHTFkiLCAiU3F1aWdnbHlBbm5vdGF0aW9uRWxlbWVudCIsICJTVFJJS0VPVVQiLCAiU3RyaWtlT3V0QW5ub3RhdGlvbkVsZW1lbnQiLCAiU1RBTVAiLCAiU3RhbXBBbm5vdGF0aW9uRWxlbWVudCIsICJGSUxFQVRUQUNITUVOVCIsICJGaWxlQXR0YWNobWVudEFubm90YXRpb25FbGVtZW50IiwgIkFubm90YXRpb25FbGVtZW50IiwgImNvbnN0cnVjdG9yIiwgImlzUmVuZGVyYWJsZSIsICJpZ25vcmVCb3JkZXIiLCAiY3JlYXRlUXVhZHJpbGF0ZXJhbHMiLCAibGF5ZXIiLCAibGlua1NlcnZpY2UiLCAiZG93bmxvYWRNYW5hZ2VyIiwgImltYWdlUmVzb3VyY2VzUGF0aCIsICJyZW5kZXJGb3JtcyIsICJzdmdGYWN0b3J5IiwgImFubm90YXRpb25TdG9yYWdlIiwgImVuYWJsZVNjcmlwdGluZyIsICJoYXNKU0FjdGlvbnMiLCAiX2ZpZWxkT2JqZWN0cyIsICJmaWVsZE9iamVjdHMiLCAicGFyZW50IiwgImNvbnRhaW5lciIsICJfY3JlYXRlQ29udGFpbmVyIiwgIl9jcmVhdGVRdWFkcmlsYXRlcmFscyIsICJfaGFzUG9wdXBEYXRhIiwgInRpdGxlT2JqIiwgImNvbnRlbnRzT2JqIiwgInJpY2hUZXh0IiwgInN0ciIsICJfaXNFZGl0YWJsZSIsICJpc0VkaXRhYmxlIiwgImhhc1BvcHVwRGF0YSIsICJ1cGRhdGVFZGl0ZWQiLCAicGFyYW1zIiwgInJlY3QiLCAic2xpY2UiLCAicG9wdXAiLCAicmVzZXRFZGl0ZWQiLCAic3R5bGUiLCAiY3VycmVudFJlY3QiLCAicm90YXRpb24iLCAidmlld3BvcnQiLCAicmF3RGltcyIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJwYWdlWCIsICJwYWdlWSIsICJzcGxpY2UiLCAibGVmdCIsICJ0b3AiLCAid2lkdGgiLCAiaGVpZ2h0IiwgInNldFJvdGF0aW9uIiwgInBhZ2UiLCAiZG9jdW1lbnQiLCAiY3JlYXRlRWxlbWVudCIsICJzZXRBdHRyaWJ1dGUiLCAiaWQiLCAidGFiSW5kZXgiLCAiekluZGV4IiwgImFsdGVybmF0aXZlVGV4dCIsICJ0aXRsZSIsICJub1JvdGF0ZSIsICJjbGFzc0xpc3QiLCAiYWRkIiwgImhhc093bkNhbnZhcyIsICJib3JkZXJTdHlsZSIsICJib3JkZXJXaWR0aCIsICJob3Jpem9udGFsUmFkaXVzIiwgImhvcml6b250YWxDb3JuZXJSYWRpdXMiLCAidmVydGljYWxSYWRpdXMiLCAidmVydGljYWxDb3JuZXJSYWRpdXMiLCAicmFkaXVzIiwgImJvcmRlclJhZGl1cyIsICJBbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlIiwgIlNPTElEIiwgIkRBU0hFRCIsICJCRVZFTEVEIiwgIndhcm4iLCAiSU5TRVQiLCAiYm9yZGVyQm90dG9tU3R5bGUiLCAiYm9yZGVyQ29sb3IiLCAiVXRpbCIsICJtYWtlSGV4Q29sb3IiLCAibm9ybWFsaXplUmVjdCIsICJ2aWV3IiwgImFuZ2xlIiwgIl9jb21tb25BY3Rpb25zIiwgInNldENvbG9yIiwgImpzTmFtZSIsICJzdHlsZU5hbWUiLCAiZXZlbnQiLCAiY29sb3IiLCAiZGV0YWlsIiwgImNvbG9yVHlwZSIsICJjb2xvckFycmF5IiwgInRhcmdldCIsICJDb2xvckNvbnZlcnRlcnMiLCAic2V0VmFsdWUiLCAic2hhZG93IiwgImRpc3BsYXkiLCAiaGlkZGVuIiwgInZpc2liaWxpdHkiLCAibm9WaWV3IiwgIm5vUHJpbnQiLCAicHJpbnQiLCAiZm9jdXMiLCAic2V0VGltZW91dCIsICJwcmV2ZW50U2Nyb2xsIiwgInVzZXJOYW1lIiwgInJlYWRvbmx5IiwgImRpc2FibGVkIiwgInJlcXVpcmVkIiwgIl9zZXRSZXF1aXJlZCIsICJiZ0NvbG9yIiwgImZpbGxDb2xvciIsICJmZ0NvbG9yIiwgInRleHRDb2xvciIsICJzdHJva2VDb2xvciIsICJfZGlzcGF0Y2hFdmVudEZyb21TYW5kYm94IiwgImFjdGlvbnMiLCAianNFdmVudCIsICJjb21tb25BY3Rpb25zIiwgIm5hbWUiLCAiT2JqZWN0IiwgImtleXMiLCAiYWN0aW9uIiwgIl9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyIsICJlbGVtZW50IiwgInN0b3JlZERhdGEiLCAiZ2V0UmF3VmFsdWUiLCAiYWN0aW9uTmFtZSIsICJlbnRyaWVzIiwgImV2ZW50UHJveHkiLCAicXVhZFBvaW50cyIsICJyZWN0QmxYIiwgInJlY3RCbFkiLCAicmVjdFRyWCIsICJyZWN0VHJZIiwgIm1hcCIsICJ4IiwgIk1hdGgiLCAiZnJvdW5kIiwgImxlbmd0aCIsICJ0clgiLCAidHJZIiwgImJsWCIsICJibFkiLCAic3ViYXJyYXkiLCAic3ZnQnVmZmVyIiwgInN2ZyIsICJkZWZzIiwgImFwcGVuZCIsICJjbGlwUGF0aCIsICJpIiwgImlpIiwgInkiLCAicmVjdFdpZHRoIiwgInJlY3RIZWlnaHQiLCAicHVzaCIsICJiYWNrZ3JvdW5kSW1hZ2UiLCAiam9pbiIsICJfY3JlYXRlUG9wdXAiLCAibW9kaWZpY2F0aW9uRGF0ZSIsICJwYXJlbnRSZWN0IiwgImVsZW1lbnRzIiwgImRpdiIsICJyZW5kZXIiLCAidW5yZWFjaGFibGUiLCAiX2dldEVsZW1lbnRzQnlOYW1lIiwgInNraXBJZCIsICJmaWVsZHMiLCAiZmllbGRPYmoiLCAiZXhwb3J0VmFsdWVzIiwgImV4cG9ydFZhbHVlIiwgImRvbUVsZW1lbnQiLCAicXVlcnlTZWxlY3RvciIsICJoYXMiLCAiZ2V0RWxlbWVudHNCeU5hbWUiLCAiZ2V0QXR0cmlidXRlIiwgInNob3ciLCAibWF5YmVTaG93IiwgImhpZGUiLCAiZm9yY2VIaWRlIiwgImdldEVsZW1lbnRzVG9UcmlnZ2VyUG9wdXAiLCAiYWRkSGlnaGxpZ2h0QXJlYSIsICJ0cmlnZ2VycyIsICJBcnJheSIsICJpc0FycmF5IiwgIl9lZGl0T25Eb3VibGVDbGljayIsICJhbm5vdGF0aW9uRWRpdG9yVHlwZSIsICJtb2RlIiwgImVkaXRJZCIsICJhZGRFdmVudExpc3RlbmVyIiwgImV2ZW50QnVzIiwgImRpc3BhdGNoIiwgInNvdXJjZSIsICJvcHRpb25zIiwgImlzVG9vbHRpcE9ubHkiLCAibGluayIsICJpc0JvdW5kIiwgInVybCIsICJhZGRMaW5rQXR0cmlidXRlcyIsICJuZXdXaW5kb3ciLCAiX2JpbmROYW1lZEFjdGlvbiIsICJhdHRhY2htZW50IiwgImF0dGFjaG1lbnREZXN0IiwgInNldE9DR1N0YXRlIiwgImRlc3QiLCAiX2JpbmRMaW5rIiwgIkFjdGlvbiIsICJfYmluZEpTQWN0aW9uIiwgInJlc2V0Rm9ybSIsICJfYmluZFJlc2V0Rm9ybUFjdGlvbiIsICJkZXN0aW5hdGlvbiIsICJocmVmIiwgImdldERlc3RpbmF0aW9uSGFzaCIsICJvbmNsaWNrIiwgImdvVG9EZXN0aW5hdGlvbiIsICJnZXRBbmNob3JVcmwiLCAiZXhlY3V0ZU5hbWVkQWN0aW9uIiwgImRlc2NyaXB0aW9uIiwgIm9wZW5PckRvd25sb2FkRGF0YSIsICJjb250ZW50IiwgImZpbGVuYW1lIiwgImV4ZWN1dGVTZXRPQ0dTdGF0ZSIsICJNYXAiLCAiZ2V0IiwgIm90aGVyQ2xpY2tBY3Rpb24iLCAicmVzZXRGb3JtRmllbGRzIiwgInJlZnMiLCAicmVzZXRGb3JtUmVmcyIsICJpbmNsdWRlIiwgImFsbEZpZWxkcyIsICJmaWVsZElkcyIsICJTZXQiLCAiZmllbGROYW1lIiwgInZhbHVlcyIsICJmaWVsZCIsICJzdG9yYWdlIiwgImFsbElkcyIsICJ0eXBlIiwgInZhbHVlIiwgImRlZmF1bHRWYWx1ZSIsICJkaXNwYXRjaEV2ZW50IiwgIkV2ZW50IiwgImlkcyIsICJpbWFnZSIsICJzcmMiLCAidG9Mb3dlckNhc2UiLCAiSlNPTiIsICJzdHJpbmdpZnkiLCAicG9wdXBSZWYiLCAic2hvd0VsZW1lbnRBbmRIaWRlQ2FudmFzIiwgInByZXZpb3VzU2libGluZyIsICJub2RlTmFtZSIsICJfZ2V0S2V5TW9kaWZpZXIiLCAiRmVhdHVyZVRlc3QiLCAicGxhdGZvcm0iLCAiaXNNYWMiLCAibWV0YUtleSIsICJjdHJsS2V5IiwgIl9zZXRFdmVudExpc3RlbmVyIiwgImVsZW1lbnREYXRhIiwgImJhc2VOYW1lIiwgImV2ZW50TmFtZSIsICJ2YWx1ZUdldHRlciIsICJpbmNsdWRlcyIsICJzaGlmdCIsICJzaGlmdEtleSIsICJtb2RpZmllciIsICJmb2N1c2VkIiwgInJlbGF0ZWRUYXJnZXQiLCAiX3NldEV2ZW50TGlzdGVuZXJzIiwgIm5hbWVzIiwgImdldHRlciIsICJCbHVyIiwgIkZvY3VzIiwgIl9zZXRCYWNrZ3JvdW5kQ29sb3IiLCAiYmFja2dyb3VuZENvbG9yIiwgIl9zZXRUZXh0U3R5bGUiLCAiVEVYVF9BTElHTk1FTlQiLCAiZm9udENvbG9yIiwgImRlZmF1bHRBcHBlYXJhbmNlRGF0YSIsICJmb250U2l6ZSIsICJjb21wdXRlZEZvbnRTaXplIiwgIkJPUkRFUl9TSVpFIiwgInJvdW5kVG9PbmVEZWNpbWFsIiwgInJvdW5kIiwgIm11bHRpTGluZSIsICJhYnMiLCAibnVtYmVyT2ZMaW5lcyIsICJMSU5FX0ZBQ1RPUiIsICJsaW5lSGVpZ2h0IiwgIm1pbiIsICJ0ZXh0QWxpZ25tZW50IiwgInRleHRBbGlnbiIsICJpc1JlcXVpcmVkIiwgInJlbW92ZUF0dHJpYnV0ZSIsICJoYXNBcHBlYXJhbmNlIiwgImZpZWxkVmFsdWUiLCAic2V0UHJvcGVydHlPblNpYmxpbmdzIiwgImJhc2UiLCAia2V5IiwgImtleUluU3RvcmFnZSIsICJnZXRWYWx1ZSIsICJ0ZXh0Q29udGVudCIsICJtYXhMZW4iLCAiY2hhckxpbWl0IiwgImZpZWxkRm9ybWF0dGVkVmFsdWVzIiwgImZvcm1hdHRlZFZhbHVlIiwgImNvbWIiLCAicmVwbGFjZUFsbCIsICJ1c2VyVmFsdWUiLCAibGFzdENvbW1pdHRlZFZhbHVlIiwgImNvbW1pdEtleSIsICJkb05vdFNjcm9sbCIsICJvdmVyZmxvd1kiLCAicGFzc3dvcmQiLCAib3ZlcmZsb3dYIiwgInJlYWRPbmx5IiwgIm1heExlbmd0aCIsICJkZWZhdWx0RmllbGRWYWx1ZSIsICJibHVyTGlzdGVuZXIiLCAidW5kZWZpbmVkIiwgInNjcm9sbExlZnQiLCAidG9TdHJpbmciLCAiYWN0aXZlRWxlbWVudCIsICJzZWxSYW5nZSIsICJzZXRTZWxlY3Rpb25SYW5nZSIsICJ3aWxsQ29tbWl0IiwgInNlbFN0YXJ0IiwgInNlbGVjdGlvblN0YXJ0IiwgInNlbEVuZCIsICJzZWxlY3Rpb25FbmQiLCAiX2JsdXJMaXN0ZW5lciIsICJLZXlzdHJva2UiLCAiaW5wdXRUeXBlIiwgIm1hdGNoIiwgInN1YnN0cmluZyIsICJwcmV2ZW50RGVmYXVsdCIsICJjaGFuZ2UiLCAiZmllbGRXaWR0aCIsICJjb21iV2lkdGgiLCAibGV0dGVyU3BhY2luZyIsICJ2ZXJ0aWNhbEFsaWduIiwgImNoZWNrZWQiLCAiY2hlY2tib3giLCAiY3VyQ2hlY2tlZCIsICJidXR0b25WYWx1ZSIsICJyYWRpbyIsICJwZGZCdXR0b25WYWx1ZSIsICJsaW5rRWxlbWVudCIsICJsYXN0Q2hpbGQiLCAic2VsZWN0RWxlbWVudCIsICJhZGRBbkVtcHR5RW50cnkiLCAiY29tYm8iLCAic2l6ZSIsICJtdWx0aVNlbGVjdCIsICJtdWx0aXBsZSIsICJvcHRpb24iLCAic2VsZWN0ZWQiLCAib3B0aW9uRWxlbWVudCIsICJkaXNwbGF5VmFsdWUiLCAicmVtb3ZlRW1wdHlFbnRyeSIsICJub25lT3B0aW9uRWxlbWVudCIsICJwcmVwZW5kIiwgInJlbW92ZSIsICJyZW1vdmVFdmVudExpc3RlbmVyIiwgImlzRXhwb3J0IiwgInNlbGVjdGVkSW5kZXgiLCAicHJvdG90eXBlIiwgImZpbHRlciIsICJjYWxsIiwgInNlbGVjdGVkVmFsdWVzIiwgImdldEl0ZW1zIiwgIm11bHRpcGxlU2VsZWN0aW9uIiwgImluZGV4IiwgImZpbmRJbmRleCIsICJpdGVtcyIsICJjbGVhciIsICJpbnNlcnQiLCAic2VsZWN0Q2hpbGQiLCAiY2hpbGRyZW4iLCAiYmVmb3JlIiwgIml0ZW0iLCAiaW5kaWNlcyIsICJlZGl0YWJsZSIsICJjaGFuZ2VFeCIsICJrZXlEb3duIiwgIlBvcHVwRWxlbWVudCIsICJvcGVuIiwgImVsZW1lbnRJZHMiLCAiYXJpYUhhc1BvcHVwIiwgIkFubm90YXRpb25QcmVmaXgiLCAiYmluZCIsICJQREZEYXRlU3RyaW5nIiwgInRvRGF0ZU9iamVjdCIsICJ0cmlnZ2VyIiwgImZsYXRNYXAiLCAiZSIsICJjbGFzc05hbWUiLCAiYmFzZUNvbG9yIiwgIm91dGxpbmVDb2xvciIsICJoZWFkZXIiLCAiZGlyIiwgImRhdGVPYmoiLCAidmFsdWVPZiIsICJodG1sIiwgIlhmYUxheWVyIiwgInhmYUh0bWwiLCAiaW50ZW50IiwgImNvbnRlbnRzIiwgIl9mb3JtYXRDb250ZW50cyIsICJhdHRyaWJ1dGVzIiwgInRleHQiLCAicG9wdXBMaW5lcyIsICJwb3B1cENvbnRlbnQiLCAibGluZUF0dHJpYnV0ZXMiLCAibGluZSIsICJzcGxpdCIsICJwIiwgImxpbmVzIiwgImNyZWF0ZVRleHROb2RlIiwgImFsdEtleSIsICJ1c2VQYXJlbnRSZWN0IiwgImludGVyc2VjdCIsICJub3JtYWxpemVkUmVjdCIsICJIT1JJWk9OVEFMX1NQQUNFX0FGVEVSX0FOTk9UQVRJT04iLCAicGFyZW50V2lkdGgiLCAicG9wdXBMZWZ0IiwgInBvcHVwVG9wIiwgImlzVmlzaWJsZSIsICJwYXJzZUludCIsICJ0ZXh0UG9zaXRpb24iLCAiQW5ub3RhdGlvbkVkaXRvclR5cGUiLCAibGluZVNwYW4iLCAibGluZUNvb3JkaW5hdGVzIiwgInNxdWFyZSIsICJjaXJjbGUiLCAiY29udGFpbmVyQ2xhc3NOYW1lIiwgInN2Z0VsZW1lbnROYW1lIiwgInZlcnRpY2VzIiwgInBvaW50cyIsICJwb2x5bGluZSIsICJpdCIsICJ0cmFuc2Zvcm0iLCAiaW5rTGlzdHMiLCAiZyIsICJ0aGlja25lc3MiLCAicm9vdCIsICJwYXJlbnRFbGVtZW50IiwgImZpbGUiLCAiZmlsbEFscGhhIiwgInRlc3QiLCAiZXZ0IiwgIkFubm90YXRpb25MYXllciIsICJhY2Nlc3NpYmlsaXR5TWFuYWdlciIsICJhbm5vdGF0aW9uQ2FudmFzTWFwIiwgImFubm90YXRpb25FZGl0b3JVSU1hbmFnZXIiLCAic3RydWN0VHJlZUxheWVyIiwgIl9hbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyIiwgImhhc0VkaXRhYmxlQW5ub3RhdGlvbnMiLCAiY29udGVudEVsZW1lbnQiLCAiZmlyc3RDaGlsZCIsICJhbm5vdGF0aW9uSWQiLCAiYXJpYUF0dHJpYnV0ZXMiLCAiZ2V0QXJpYUF0dHJpYnV0ZXMiLCAibW92ZUVsZW1lbnRJbkRPTSIsICJhbm5vdGF0aW9ucyIsICJzZXRMYXllckRpbWVuc2lvbnMiLCAicG9wdXBUb0VsZW1lbnRzIiwgImVsZW1lbnRQYXJhbXMiLCAiRE9NU1ZHRmFjdG9yeSIsICJBbm5vdGF0aW9uU3RvcmFnZSIsICJub0hUTUwiLCAiaXNQb3B1cEFubm90YXRpb24iLCAic2V0IiwgInJlbmRlcmVkIiwgInJlbmRlckFubm90YXRpb25FbGVtZW50IiwgImFkZExpbmtBbm5vdGF0aW9ucyIsICJfZGVmYXVsdEJvcmRlclN0eWxlIiwgInVwZGF0ZSIsICJjYW52YXMiLCAicmVwbGFjZVdpdGgiLCAiY29udGFpbnMiLCAiYWZ0ZXIiLCAiZWRpdGFibGVBbm5vdGF0aW9uIiwgIl9oYXNOb0NhbnZhcyIsICJzZXRNaXNzaW5nQ2FudmFzIiwgImdldEVkaXRhYmxlQW5ub3RhdGlvbnMiLCAiZnJvbSIsICJnZXRFZGl0YWJsZUFubm90YXRpb24iLCAiZnJlZXplIiwgInJhd1dpZHRoIiwgImRhc2hBcnJheSIsICJFT0xfUEFUVEVSTiIsICJGcmVlVGV4dEVkaXRvciIsICJBbm5vdGF0aW9uRWRpdG9yIiwgImlkIiwgIl9mcmVlVGV4dERlZmF1bHRDb250ZW50IiwgIl9pbnRlcm5hbFBhZGRpbmciLCAiX2RlZmF1bHRDb2xvciIsICJfZGVmYXVsdEZvbnRTaXplIiwgIl9rZXlib2FyZE1hbmFnZXIiLCAicHJvdG8iLCAicHJvdG90eXBlIiwgImFycm93Q2hlY2tlciIsICJzZWxmIiwgImlzRW1wdHkiLCAic21hbGwiLCAiQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlciIsICJUUkFOU0xBVEVfU01BTEwiLCAiYmlnIiwgIlRSQU5TTEFURV9CSUciLCAic2hhZG93IiwgIktleWJvYXJkTWFuYWdlciIsICJjb21taXRPclJlbW92ZSIsICJidWJibGVzIiwgIl90cmFuc2xhdGVFbXB0eSIsICJhcmdzIiwgImNoZWNrZXIiLCAiX3R5cGUiLCAiX2VkaXRvclR5cGUiLCAiQW5ub3RhdGlvbkVkaXRvclR5cGUiLCAiRlJFRVRFWFQiLCAiY29uc3RydWN0b3IiLCAicGFyYW1zIiwgIm5hbWUiLCAiY29sb3IiLCAiX2RlZmF1bHRMaW5lQ29sb3IiLCAiZm9udFNpemUiLCAiaW5pdGlhbGl6ZSIsICJsMTBuIiwgInVpTWFuYWdlciIsICJzdHlsZSIsICJnZXRDb21wdXRlZFN0eWxlIiwgImRvY3VtZW50IiwgImRvY3VtZW50RWxlbWVudCIsICJwYXJzZUZsb2F0IiwgImdldFByb3BlcnR5VmFsdWUiLCAidXBkYXRlRGVmYXVsdFBhcmFtcyIsICJ0eXBlIiwgInZhbHVlIiwgIkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlIiwgIkZSRUVURVhUX1NJWkUiLCAiRlJFRVRFWFRfQ09MT1IiLCAidXBkYXRlUGFyYW1zIiwgImRlZmF1bHRQcm9wZXJ0aWVzVG9VcGRhdGUiLCAicHJvcGVydGllc1RvVXBkYXRlIiwgInNldEZvbnRzaXplIiwgInNpemUiLCAiZWRpdG9yRGl2IiwgInRyYW5zbGF0ZSIsICJwYXJlbnRTY2FsZSIsICJzYXZlZEZvbnRzaXplIiwgImFkZENvbW1hbmRzIiwgImNtZCIsICJiaW5kIiwgInVuZG8iLCAicG9zdCIsICJfdWlNYW5hZ2VyIiwgInVwZGF0ZVVJIiwgIm11c3RFeGVjIiwgIm92ZXJ3cml0ZUlmU2FtZVR5cGUiLCAia2VlcFVuZG8iLCAic2V0Q29sb3IiLCAiY29sIiwgInNhdmVkQ29sb3IiLCAieCIsICJ5IiwgInRyYW5zbGF0ZVNlbGVjdGVkRWRpdG9ycyIsICJnZXRJbml0aWFsVHJhbnNsYXRpb24iLCAic2NhbGUiLCAicmVidWlsZCIsICJwYXJlbnQiLCAiZGl2IiwgImlzQXR0YWNoZWRUb0RPTSIsICJhZGQiLCAiZW5hYmxlRWRpdE1vZGUiLCAiaXNJbkVkaXRNb2RlIiwgInNldEVkaXRpbmdTdGF0ZSIsICJ1cGRhdGVUb29sYmFyIiwgIm92ZXJsYXlEaXYiLCAiY2xhc3NMaXN0IiwgInJlbW92ZSIsICJjb250ZW50RWRpdGFibGUiLCAiX2lzRHJhZ2dhYmxlIiwgInJlbW92ZUF0dHJpYnV0ZSIsICJBYm9ydENvbnRyb2xsZXIiLCAic2lnbmFsIiwgImNvbWJpbmVkU2lnbmFsIiwgImFkZEV2ZW50TGlzdGVuZXIiLCAiZWRpdG9yRGl2S2V5ZG93biIsICJlZGl0b3JEaXZGb2N1cyIsICJlZGl0b3JEaXZCbHVyIiwgImVkaXRvckRpdklucHV0IiwgImVkaXRvckRpdlBhc3RlIiwgImRpc2FibGVFZGl0TW9kZSIsICJzZXRBdHRyaWJ1dGUiLCAiYWJvcnQiLCAiZm9jdXMiLCAicHJldmVudFNjcm9sbCIsICJpc0VkaXRpbmciLCAiZm9jdXNpbiIsICJldmVudCIsICJfZm9jdXNFdmVudHNBbGxvd2VkIiwgInRhcmdldCIsICJvbmNlQWRkZWQiLCAid2lkdGgiLCAiX2luaXRpYWxPcHRpb25zIiwgImlzQ2VudGVyZWQiLCAiY2VudGVyIiwgImlubmVyVGV4dCIsICJ0cmltIiwgImJ1ZmZlciIsICJub3JtYWxpemUiLCAicHJldkNoaWxkIiwgImNoaWxkIiwgImNoaWxkTm9kZXMiLCAibm9kZVR5cGUiLCAiTm9kZSIsICJURVhUX05PREUiLCAibm9kZU5hbWUiLCAicHVzaCIsICJqb2luIiwgInBhcmVudFdpZHRoIiwgInBhcmVudEhlaWdodCIsICJwYXJlbnREaW1lbnNpb25zIiwgInJlY3QiLCAiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwgImN1cnJlbnRMYXllciIsICJzYXZlZERpc3BsYXkiLCAiZGlzcGxheSIsICJzYXZlZFZpc2liaWxpdHkiLCAiY29udGFpbnMiLCAiYXBwZW5kIiwgInRvZ2dsZSIsICJyb3RhdGlvbiIsICJwYXJlbnRSb3RhdGlvbiIsICJoZWlnaHQiLCAiZml4QW5kU2V0UG9zaXRpb24iLCAiY29tbWl0IiwgInNhdmVkVGV4dCIsICJuZXdUZXh0IiwgInRyaW1FbmQiLCAic2V0VGV4dCIsICJ0ZXh0IiwgInNob3VsZEdldEtleWJvYXJkRXZlbnRzIiwgImVudGVySW5FZGl0TW9kZSIsICJkYmxjbGljayIsICJrZXlkb3duIiwgImtleSIsICJwcmV2ZW50RGVmYXVsdCIsICJleGVjIiwgImRpc2FibGVFZGl0aW5nIiwgImVuYWJsZUVkaXRpbmciLCAicmVuZGVyIiwgImJhc2VYIiwgImJhc2VZIiwgIl9pc0NvcHkiLCAiYW5ub3RhdGlvbkVsZW1lbnRJZCIsICJjcmVhdGVFbGVtZW50IiwgImNsYXNzTmFtZSIsICJiaW5kRXZlbnRzIiwgInBvc2l0aW9uIiwgIl9pbml0aWFsRGF0YSIsICJ0eCIsICJ0eSIsICJwYWdlVHJhbnNsYXRpb25Ub1NjcmVlbiIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJwYWdlRGltZW5zaW9ucyIsICJwYWdlWCIsICJwYWdlWSIsICJwYWdlVHJhbnNsYXRpb24iLCAicG9zWCIsICJwb3NZIiwgInNldEF0IiwgIl9tb3ZlQWZ0ZXJQYXN0ZSIsICJub2RlIiwgIm5vZGVWYWx1ZSIsICJyZXBsYWNlQWxsIiwgImNsaXBib2FyZERhdGEiLCAid2luZG93IiwgInR5cGVzIiwgImxlbmd0aCIsICJwYXN0ZSIsICJnZXREYXRhIiwgInNlbGVjdGlvbiIsICJnZXRTZWxlY3Rpb24iLCAicmFuZ2VDb3VudCIsICJkZWxldGVGcm9tRG9jdW1lbnQiLCAicmFuZ2UiLCAiZ2V0UmFuZ2VBdCIsICJpbmNsdWRlcyIsICJpbnNlcnROb2RlIiwgImNyZWF0ZVRleHROb2RlIiwgImNvbGxhcHNlVG9TdGFydCIsICJzdGFydENvbnRhaW5lciIsICJzdGFydE9mZnNldCIsICJidWZmZXJCZWZvcmUiLCAiYnVmZmVyQWZ0ZXIiLCAicGFyZW50RWxlbWVudCIsICJzbGljZSIsICJpIiwgIm5ld1JhbmdlIiwgIlJhbmdlIiwgImJlZm9yZUxlbmd0aCIsICJNYXRoIiwgInN1bVByZWNpc2UiLCAibWFwIiwgImxpbmUiLCAiZmlyc3RDaGlsZCIsICJzZXRTdGFydCIsICJzZXRFbmQiLCAicmVtb3ZlQWxsUmFuZ2VzIiwgImFkZFJhbmdlIiwgInJlcGxhY2VDaGlsZHJlbiIsICJzcGxpdCIsICJjb250ZW50IiwgImNvbnRlbnREaXYiLCAiZGVzZXJpYWxpemUiLCAiZGF0YSIsICJpbml0aWFsRGF0YSIsICJGcmVlVGV4dEFubm90YXRpb25FbGVtZW50IiwgImRlZmF1bHRBcHBlYXJhbmNlRGF0YSIsICJmb250Q29sb3IiLCAicG9wdXBSZWYiLCAidGV4dENvbnRlbnQiLCAidGV4dFBvc2l0aW9uIiwgInBhZ2UiLCAicGFnZU51bWJlciIsICJhbm5vdGF0aW9uVHlwZSIsICJBcnJheSIsICJmcm9tIiwgInBhZ2VJbmRleCIsICJkZWxldGVkIiwgImVkaXRvciIsICJVdGlsIiwgIm1ha2VIZXhDb2xvciIsICJzZXJpYWxpemUiLCAiaXNGb3JDb3B5aW5nIiwgInNlcmlhbGl6ZURlbGV0ZWQiLCAicGFkZGluZyIsICJnZXRSZWN0IiwgIl9jb2xvck1hbmFnZXIiLCAiY29udmVydCIsICJzZXJpYWxpemVkIiwgInN0cnVjdFRyZWVQYXJlbnRJZCIsICJfc3RydWN0VHJlZVBhcmVudElkIiwgImlzQ29weSIsICJfaGFzQmVlbk1vdmVkIiwgInNvbWUiLCAiYyIsICJyZW5kZXJBbm5vdGF0aW9uRWxlbWVudCIsICJhbm5vdGF0aW9uIiwgInVwZGF0ZUVkaXRlZCIsICJwb3B1cENvbnRlbnQiLCAicmVzZXRBbm5vdGF0aW9uRWxlbWVudCIsICJyZXNldEVkaXRlZCIsICJPdXRsaW5lIiwgIlBSRUNJU0lPTiIsICJ0b1NWR1BhdGgiLCAidW5yZWFjaGFibGUiLCAiYm94IiwgInNlcmlhbGl6ZSIsICJfYmJveCIsICJfcm90YXRpb24iLCAiX3Jlc2NhbGUiLCAic3JjIiwgInR4IiwgInR5IiwgInN4IiwgInN5IiwgImRlc3QiLCAiRmxvYXQzMkFycmF5IiwgImxlbmd0aCIsICJpIiwgImlpIiwgIl9yZXNjYWxlQW5kU3dhcCIsICJfdHJhbnNsYXRlIiwgInN2Z1JvdW5kIiwgIngiLCAiTWF0aCIsICJyb3VuZCIsICJfbm9ybWFsaXplUG9pbnQiLCAieSIsICJwYXJlbnRXaWR0aCIsICJwYXJlbnRIZWlnaHQiLCAicm90YXRpb24iLCAiX25vcm1hbGl6ZVBhZ2VQb2ludCIsICJjcmVhdGVCZXppZXJQb2ludHMiLCAieDEiLCAieTEiLCAieDIiLCAieTIiLCAieDMiLCAieTMiLCAiRnJlZURyYXdPdXRsaW5lciIsICJGbG9hdDMyQXJyYXkiLCAiY29uc3RydWN0b3IiLCAieCIsICJ5IiwgImJveCIsICJzY2FsZUZhY3RvciIsICJ0aGlja25lc3MiLCAiaXNMVFIiLCAiaW5uZXJNYXJnaW4iLCAic2V0IiwgIk5hTiIsICJwdXNoIiwgImlzRW1wdHkiLCAiaXNOYU4iLCAibGFzdFRvcCIsICJzdWJhcnJheSIsICJsYXN0Qm90dG9tIiwgIndpZHRoIiwgImhlaWdodCIsICJhZGQiLCAibGF5ZXJYIiwgImxheWVyWSIsICJsYXllcldpZHRoIiwgImxheWVySGVpZ2h0IiwgIngxIiwgInkxIiwgIngyIiwgInkyIiwgImRpZmZYIiwgImRpZmZZIiwgImQiLCAiTWF0aCIsICJoeXBvdCIsICJkaWZmRCIsICJLIiwgInNoaWZ0WCIsICJzaGlmdFkiLCAieDAiLCAieTAiLCAiblgiLCAiblkiLCAidGhYIiwgInRoWSIsICJsZW5ndGgiLCAiYW5nbGUiLCAiYWJzIiwgImF0YW4yIiwgIlBJIiwgInRvU1ZHUGF0aCIsICJ0b3AiLCAiYm90dG9tIiwgImJ1ZmZlciIsICJpIiwgImpvaW4iLCAibGFzdFRvcFgiLCAibGFzdFRvcFkiLCAibGFzdEJvdHRvbVgiLCAibGFzdEJvdHRvbVkiLCAibmV3RnJlZURyYXdPdXRsaW5lIiwgIm91dGxpbmUiLCAicG9pbnRzIiwgIkZyZWVEcmF3T3V0bGluZSIsICJnZXRPdXRsaW5lcyIsICJsYXN0IiwgImlpIiwgIk4iLCAiaiIsICJwb3MiLCAiT3V0bGluZSIsICJsYXN0UG9pbnQiLCAic2VyaWFsaXplIiwgImJsWCIsICJibFkiLCAidHJYIiwgInRyWSIsICJyb3RhdGlvbiIsICJfcmVzY2FsZSIsICJfcmVzY2FsZUFuZFN3YXAiLCAiQXJyYXkiLCAiZnJvbSIsICJsYXN0WCIsICJsYXN0WSIsICJtaW5NYXgiLCAibGFzdFBvaW50WCIsICJsYXN0UG9pbnRZIiwgImx0ckNhbGxiYWNrIiwgIm1heCIsICJtaW4iLCAiVXRpbCIsICJwb2ludEJvdW5kaW5nQm94IiwgImJib3giLCAiSW5maW5pdHkiLCAiYmV6aWVyQm91bmRpbmdCb3giLCAic2xpY2UiLCAicmVjdEJvdW5kaW5nQm94IiwgIm5ld091dGxpbmVyIiwgInBvaW50IiwgImdldE5ld091dGxpbmUiLCAic3giLCAic3kiLCAidHgiLCAidHkiLCAib3V0bGluZXIiLCAiSGlnaGxpZ2h0T3V0bGluZXIiLCAiY29uc3RydWN0b3IiLCAiYm94ZXMiLCAiYm9yZGVyV2lkdGgiLCAiaW5uZXJNYXJnaW4iLCAiaXNMVFIiLCAibWluTWF4IiwgIkluZmluaXR5IiwgIk5VTUJFUl9PRl9ESUdJVFMiLCAiRVBTSUxPTiIsICJ4IiwgInkiLCAid2lkdGgiLCAiaGVpZ2h0IiwgIngxIiwgIk1hdGgiLCAiZmxvb3IiLCAieDIiLCAiY2VpbCIsICJ5MSIsICJ5MiIsICJsZWZ0IiwgInJpZ2h0IiwgInB1c2giLCAiVXRpbCIsICJyZWN0Qm91bmRpbmdCb3giLCAiYmJveFdpZHRoIiwgImJib3hIZWlnaHQiLCAic2hpZnRlZE1pblgiLCAic2hpZnRlZE1pblkiLCAibGFzdEVkZ2UiLCAiYXQiLCAibGFzdFBvaW50IiwgImVkZ2UiLCAiRmxvYXQzMkFycmF5IiwgImdldE91dGxpbmVzIiwgInNvcnQiLCAiYSIsICJiIiwgIm91dGxpbmVWZXJ0aWNhbEVkZ2VzIiwgImVkZ2VzIiwgImFsbEVkZ2VzIiwgIlNldCIsICJpIiwgImlpIiwgImxlbmd0aCIsICJlZGdlMSIsICJlZGdlMiIsICJhZGQiLCAib3V0bGluZXMiLCAib3V0bGluZSIsICJzaXplIiwgInZhbHVlcyIsICJuZXh0IiwgInZhbHVlIiwgImRlbGV0ZSIsICJsYXN0UG9pbnRYIiwgImxhc3RQb2ludFkiLCAiZSIsICJoYXMiLCAiSGlnaGxpZ2h0T3V0bGluZSIsICJhcnJheSIsICJzdGFydCIsICJlbmQiLCAibWlkZGxlIiwgImluZGV4IiwgInNwbGljZSIsICJyZXN1bHRzIiwgImoiLCAiamoiLCAieTMiLCAieTQiLCAiT3V0bGluZSIsICJib3giLCAidG9TVkdQYXRoIiwgImJ1ZmZlciIsICJwb2x5Z29uIiwgInByZXZYIiwgInByZXZZIiwgImpvaW4iLCAic2VyaWFsaXplIiwgImJsWCIsICJibFkiLCAidHJYIiwgInRyWSIsICJfcm90YXRpb24iLCAicG9pbnRzIiwgIkFycmF5IiwgImNsYXNzTmFtZXNGb3JPdXRsaW5pbmciLCAiRnJlZUhpZ2hsaWdodE91dGxpbmVyIiwgIkZyZWVEcmF3T3V0bGluZXIiLCAibmV3RnJlZURyYXdPdXRsaW5lIiwgInNjYWxlRmFjdG9yIiwgIkZyZWVIaWdobGlnaHRPdXRsaW5lIiwgIkZyZWVEcmF3T3V0bGluZSIsICJuZXdPdXRsaW5lciIsICJwb2ludCIsICJ0aGlja25lc3MiLCAiQ29sb3JQaWNrZXIiLCAiX2tleWJvYXJkTWFuYWdlciIsICJzaGFkb3ciLCAiS2V5Ym9hcmRNYW5hZ2VyIiwgInByb3RvdHlwZSIsICJfaGlkZURyb3Bkb3duRnJvbUtleWJvYXJkIiwgIl9jb2xvclNlbGVjdEZyb21LZXlib2FyZCIsICJfbW92ZVRvTmV4dCIsICJfbW92ZVRvUHJldmlvdXMiLCAiX21vdmVUb0JlZ2lubmluZyIsICJfbW92ZVRvRW5kIiwgImNvbnN0cnVjdG9yIiwgImVkaXRvciIsICJ1aU1hbmFnZXIiLCAiQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUiLCAiSElHSExJR0hUX0NPTE9SIiwgIkhJR0hMSUdIVF9ERUZBVUxUX0NPTE9SIiwgIl91aU1hbmFnZXIiLCAiX2V2ZW50QnVzIiwgImNvbG9yIiwgImhpZ2hsaWdodENvbG9ycyIsICJ2YWx1ZXMiLCAibmV4dCIsICJ2YWx1ZSIsICJPYmplY3QiLCAiZnJlZXplIiwgImJsdWUiLCAiZ3JlZW4iLCAicGluayIsICJyZWQiLCAieWVsbG93IiwgInJlbmRlckJ1dHRvbiIsICJidXR0b24iLCAiZG9jdW1lbnQiLCAiY3JlYXRlRWxlbWVudCIsICJjbGFzc05hbWUiLCAidGFiSW5kZXgiLCAic2V0QXR0cmlidXRlIiwgInNpZ25hbCIsICJfc2lnbmFsIiwgImFkZEV2ZW50TGlzdGVuZXIiLCAiYmluZCIsICJzd2F0Y2giLCAic3R5bGUiLCAiYmFja2dyb3VuZENvbG9yIiwgImFwcGVuZCIsICJyZW5kZXJNYWluRHJvcGRvd24iLCAiZHJvcGRvd24iLCAiZGl2IiwgIm5vQ29udGV4dE1lbnUiLCAicm9sZSIsICJuYW1lIiwgInRpdGxlIiwgImV2ZW50IiwgInN0b3BQcm9wYWdhdGlvbiIsICJkaXNwYXRjaCIsICJzb3VyY2UiLCAidHlwZSIsICJ0YXJnZXQiLCAiZ2V0QXR0cmlidXRlIiwgImZpcnN0Q2hpbGQiLCAiZm9jdXMiLCAibmV4dFNpYmxpbmciLCAicHJldmlvdXNTaWJsaW5nIiwgImxhc3RDaGlsZCIsICJleGVjIiwgImhpZGVEcm9wZG93biIsICJkZXRhaWwiLCAiQWJvcnRDb250cm9sbGVyIiwgIndpbmRvdyIsICJjb21iaW5lZFNpZ25hbCIsICJjbGFzc0xpc3QiLCAicmVtb3ZlIiwgInJvb3QiLCAiY29udGFpbnMiLCAiYWRkIiwgImFib3J0IiwgInVuc2VsZWN0IiwgInByZXZlbnRTY3JvbGwiLCAiZm9jdXNWaXNpYmxlIiwgInVwZGF0ZUNvbG9yIiwgImkiLCAiY2hpbGQiLCAiY2hpbGRyZW4iLCAiZGVzdHJveSIsICJIaWdobGlnaHRFZGl0b3IiLCAiQW5ub3RhdGlvbkVkaXRvciIsICJfZGVmYXVsdENvbG9yIiwgIl9kZWZhdWx0T3BhY2l0eSIsICJfZGVmYXVsdFRoaWNrbmVzcyIsICJfdHlwZSIsICJfZWRpdG9yVHlwZSIsICJBbm5vdGF0aW9uRWRpdG9yVHlwZSIsICJISUdITElHSFQiLCAiX2ZyZWVIaWdobGlnaHRJZCIsICJfZnJlZUhpZ2hsaWdodCIsICJfZnJlZUhpZ2hsaWdodENsaXBJZCIsICJfa2V5Ym9hcmRNYW5hZ2VyIiwgInByb3RvIiwgInByb3RvdHlwZSIsICJzaGFkb3ciLCAiS2V5Ym9hcmRNYW5hZ2VyIiwgIl9tb3ZlQ2FyZXQiLCAiYXJncyIsICJjb25zdHJ1Y3RvciIsICJwYXJhbXMiLCAibmFtZSIsICJjb2xvciIsICJ0aGlja25lc3MiLCAib3BhY2l0eSIsICJib3hlcyIsICJtZXRob2RPZkNyZWF0aW9uIiwgInRleHQiLCAiX2lzRHJhZ2dhYmxlIiwgImRlZmF1bHRMMTBuSWQiLCAiaGlnaGxpZ2h0SWQiLCAiYW5jaG9yTm9kZSIsICJhbmNob3JPZmZzZXQiLCAiZm9jdXNOb2RlIiwgImZvY3VzT2Zmc2V0IiwgInJvdGF0ZSIsICJyb3RhdGlvbiIsICJ0ZWxlbWV0cnlJbml0aWFsRGF0YSIsICJhY3Rpb24iLCAidHlwZSIsICJfdWlNYW5hZ2VyIiwgImhpZ2hsaWdodENvbG9yTmFtZXMiLCAiZ2V0IiwgInRlbGVtZXRyeUZpbmFsRGF0YSIsICJjb21wdXRlVGVsZW1ldHJ5RmluYWxEYXRhIiwgImRhdGEiLCAibnVtYmVyT2ZDb2xvcnMiLCAic2l6ZSIsICJvdXRsaW5lciIsICJIaWdobGlnaHRPdXRsaW5lciIsICJnZXRPdXRsaW5lcyIsICJ4IiwgInkiLCAid2lkdGgiLCAiaGVpZ2h0IiwgImJveCIsICJvdXRsaW5lckZvck91dGxpbmUiLCAiZGlyZWN0aW9uIiwgImxhc3RQb2ludCIsICJoaWdobGlnaHRPdXRsaW5lcyIsICJjbGlwUGF0aElkIiwgImV4dHJhVGhpY2tuZXNzIiwgImdldE5ld091dGxpbmUiLCAicGFyZW50IiwgImRyYXdMYXllciIsICJmaW5hbGl6ZURyYXciLCAiYmJveCIsICJwYXRoIiwgImQiLCAidG9TVkdQYXRoIiwgImRyYXdPdXRsaW5lIiwgInJvb3RDbGFzcyIsICJoaWdobGlnaHRPdXRsaW5lIiwgImZyZWUiLCAiYW5nbGUiLCAidmlld3BvcnQiLCAidXBkYXRlUHJvcGVydGllcyIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJwYXJlbnREaW1lbnNpb25zIiwgImluaXRpYWxpemUiLCAibDEwbiIsICJ1aU1hbmFnZXIiLCAiaGlnaGxpZ2h0Q29sb3JzIiwgInZhbHVlcyIsICJuZXh0IiwgInZhbHVlIiwgInVwZGF0ZURlZmF1bHRQYXJhbXMiLCAiQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUiLCAiSElHSExJR0hUX0RFRkFVTFRfQ09MT1IiLCAiSElHSExJR0hUX1RISUNLTkVTUyIsICJ0cmFuc2xhdGVJblBhZ2UiLCAidG9vbGJhclBvc2l0aW9uIiwgInVwZGF0ZVBhcmFtcyIsICJISUdITElHSFRfQ09MT1IiLCAiZGVmYXVsdFByb3BlcnRpZXNUb1VwZGF0ZSIsICJwcm9wZXJ0aWVzVG9VcGRhdGUiLCAiSElHSExJR0hUX0ZSRUUiLCAic2V0Q29sb3JBbmRPcGFjaXR5IiwgImNvbCIsICJvcGEiLCAicm9vdCIsICJmaWxsIiwgInVwZGF0ZUNvbG9yIiwgInNhdmVkQ29sb3IiLCAic2F2ZWRPcGFjaXR5IiwgImFkZENvbW1hbmRzIiwgImNtZCIsICJiaW5kIiwgInVuZG8iLCAicG9zdCIsICJ1cGRhdGVVSSIsICJtdXN0RXhlYyIsICJvdmVyd3JpdGVJZlNhbWVUeXBlIiwgImtlZXBVbmRvIiwgIl9yZXBvcnRUZWxlbWV0cnkiLCAic2F2ZWRUaGlja25lc3MiLCAic2V0VGhpY2tuZXNzIiwgInRoIiwgIklOS19USElDS05FU1MiLCAiYWRkRWRpdFRvb2xiYXIiLCAidG9vbGJhciIsICJDb2xvclBpY2tlciIsICJlZGl0b3IiLCAiYWRkQ29sb3JQaWNrZXIiLCAiZGlzYWJsZUVkaXRpbmciLCAiZGl2IiwgImNsYXNzTGlzdCIsICJ0b2dnbGUiLCAiZW5hYmxlRWRpdGluZyIsICJmaXhBbmRTZXRQb3NpdGlvbiIsICJnZXRCYXNlVHJhbnNsYXRpb24iLCAiZ2V0UmVjdCIsICJ0eCIsICJ0eSIsICJvbmNlQWRkZWQiLCAiZm9jdXMiLCAiYW5ub3RhdGlvbkVsZW1lbnRJZCIsICJhZGRVbmRvYWJsZUVkaXRvciIsICJyZW1vdmUiLCAicmVidWlsZCIsICJpc0F0dGFjaGVkVG9ET00iLCAiYWRkIiwgInNldFBhcmVudCIsICJtdXN0QmVTZWxlY3RlZCIsICJjb250YWlucyIsICJzaG93IiwgIl9pc1Zpc2libGUiLCAic2VsZWN0IiwgInBhcmVudFdpZHRoIiwgInBhcmVudEhlaWdodCIsICJzZXREaW1zIiwgImlkIiwgImRyYXciLCAidmlld0JveCIsICJoaWdobGlnaHQiLCAic3R5bGUiLCAiY2xpcFBhdGgiLCAicmVuZGVyIiwgInNldEF0dHJpYnV0ZSIsICJhZGRFdmVudExpc3RlbmVyIiwgInNpZ25hbCIsICJfc2lnbmFsIiwgImhpZ2hsaWdodERpdiIsICJkb2N1bWVudCIsICJjcmVhdGVFbGVtZW50IiwgImFwcGVuZCIsICJjbGFzc05hbWUiLCAiYmluZEV2ZW50cyIsICJwb2ludGVyb3ZlciIsICJpc1NlbGVjdGVkIiwgImhvdmVyZWQiLCAicG9pbnRlcmxlYXZlIiwgImV2ZW50IiwgImV4ZWMiLCAidW5zZWxlY3QiLCAic3RhcnQiLCAic2VsZWN0aW9uIiwgIndpbmRvdyIsICJnZXRTZWxlY3Rpb24iLCAic2V0UG9zaXRpb24iLCAic2VsZWN0ZWQiLCAiX211c3RGaXhQb3NpdGlvbiIsICJ2aXNpYmxlIiwgImhpZGRlbiIsICJwYWdlRGltZW5zaW9ucyIsICJwYWdlWCIsICJwYWdlWSIsICJwYWdlVHJhbnNsYXRpb24iLCAicXVhZFBvaW50cyIsICJGbG9hdDMyQXJyYXkiLCAibGVuZ3RoIiwgImkiLCAic3giLCAic3kiLCAicmVjdCIsICJzZXJpYWxpemUiLCAic3RhcnRIaWdobGlnaHRpbmciLCAiaXNMVFIiLCAidGFyZ2V0IiwgInRleHRMYXllciIsICJsYXllclgiLCAibGF5ZXJZIiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsICJhYyIsICJBYm9ydENvbnRyb2xsZXIiLCAiY29tYmluZWRTaWduYWwiLCAicG9pbnRlclVwQ2FsbGJhY2siLCAiZSIsICJhYm9ydCIsICJzdG9wRXZlbnQiLCAiY2FwdHVyZSIsICJwYXNzaXZlIiwgIm5vQ29udGV4dE1lbnUiLCAiRnJlZUhpZ2hsaWdodE91dGxpbmVyIiwgInNjYWxlIiwgImlzRW1wdHkiLCAiY3JlYXRlQW5kQWRkTmV3RWRpdG9yIiwgImRlc2VyaWFsaXplIiwgImluaXRpYWxEYXRhIiwgIkhpZ2hsaWdodEFubm90YXRpb25FbGVtZW50IiwgInBvcHVwUmVmIiwgInBhZ2UiLCAicGFnZU51bWJlciIsICJhbm5vdGF0aW9uVHlwZSIsICJBcnJheSIsICJmcm9tIiwgInBhZ2VJbmRleCIsICJzbGljZSIsICJkZWxldGVkIiwgIklua0Fubm90YXRpb25FbGVtZW50IiwgImlua0xpc3RzIiwgImJvcmRlclN0eWxlIiwgInJhd1dpZHRoIiwgIlV0aWwiLCAibWFrZUhleENvbG9yIiwgIl9pbml0aWFsRGF0YSIsICJwdXNoIiwgInBvaW50cyIsICJwb2ludCIsICJpaSIsICJwYXJlbnRSb3RhdGlvbiIsICJpc0ZvckNvcHlpbmciLCAic2VyaWFsaXplRGVsZXRlZCIsICJfY29sb3JNYW5hZ2VyIiwgImNvbnZlcnQiLCAic2VyaWFsaXplZCIsICJvdXRsaW5lcyIsICJzdHJ1Y3RUcmVlUGFyZW50SWQiLCAiX3N0cnVjdFRyZWVQYXJlbnRJZCIsICJzb21lIiwgImMiLCAicmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQiLCAiYW5ub3RhdGlvbiIsICJ1cGRhdGVFZGl0ZWQiLCAiY2FuQ3JlYXRlTmV3RW1wdHlFZGl0b3IiLCAiRHJhd2luZ09wdGlvbnMiLCAiT2JqZWN0IiwgImNyZWF0ZSIsICJ1cGRhdGVQcm9wZXJ0eSIsICJuYW1lIiwgInZhbHVlIiwgInVwZGF0ZVNWR1Byb3BlcnR5IiwgInVwZGF0ZVByb3BlcnRpZXMiLCAicHJvcGVydGllcyIsICJlbnRyaWVzIiwgInN0YXJ0c1dpdGgiLCAidG9TVkdQcm9wZXJ0aWVzIiwgInJvb3QiLCAicmVzZXQiLCAidXBkYXRlQWxsIiwgIm9wdGlvbnMiLCAiY2xvbmUiLCAidW5yZWFjaGFibGUiLCAiRHJhd2luZ0VkaXRvciIsICJBbm5vdGF0aW9uRWRpdG9yIiwgIl9kcmF3SWQiLCAiX2N1cnJlbnREcmF3SWQiLCAiX2N1cnJlbnRQYXJlbnQiLCAiTmFOIiwgIl9JTk5FUl9NQVJHSU4iLCAiY29uc3RydWN0b3IiLCAicGFyYW1zIiwgIm11c3RCZUNvbW1pdHRlZCIsICJfYWRkT3V0bGluZXMiLCAiZHJhd091dGxpbmVzIiwgImRyYXdJZCIsICJkcmF3aW5nT3B0aW9ucyIsICJfZHJhd2luZ09wdGlvbnMiLCAicGFyZW50IiwgImRyYXdMYXllciIsICJmaW5hbGl6ZURyYXciLCAiZGVmYXVsdFByb3BlcnRpZXMiLCAiYm94IiwgImlkIiwgImRyYXciLCAiX21lcmdlU1ZHUHJvcGVydGllcyIsICJkZWZhdWx0U1ZHUHJvcGVydGllcyIsICJwMSIsICJwMiIsICJwMUtleXMiLCAiU2V0IiwgImtleXMiLCAia2V5IiwgImhhcyIsICJhc3NpZ24iLCAiZ2V0RGVmYXVsdERyYXdpbmdPcHRpb25zIiwgIl9vcHRpb25zIiwgInR5cGVzTWFwIiwgImlzRHJhd2VyIiwgInN1cHBvcnRNdWx0aXBsZURyYXdpbmdzIiwgInVwZGF0ZURlZmF1bHRQYXJhbXMiLCAidHlwZSIsICJwcm9wZXJ0eU5hbWUiLCAiZ2V0IiwgIl9kZWZhdWx0RHJhd2luZ09wdGlvbnMiLCAidXBkYXRlUGFyYW1zIiwgIl91cGRhdGVQcm9wZXJ0eSIsICJkZWZhdWx0UHJvcGVydGllc1RvVXBkYXRlIiwgInB1c2giLCAicHJvcGVydGllc1RvVXBkYXRlIiwgInNhdmVkVmFsdWUiLCAic2V0dGVyIiwgInZhbCIsICJiYm94IiwgImFkZENvbW1hbmRzIiwgImNtZCIsICJiaW5kIiwgInVuZG8iLCAicG9zdCIsICJfdWlNYW5hZ2VyIiwgInVwZGF0ZVVJIiwgIm11c3RFeGVjIiwgIm92ZXJ3cml0ZUlmU2FtZVR5cGUiLCAia2VlcFVuZG8iLCAiX29uUmVzaXppbmciLCAiZ2V0UGF0aFJlc2l6aW5nU1ZHUHJvcGVydGllcyIsICJfb25SZXNpemVkIiwgImdldFBhdGhSZXNpemVkU1ZHUHJvcGVydGllcyIsICJfb25UcmFuc2xhdGluZyIsICJfeCIsICJfeSIsICJfb25UcmFuc2xhdGVkIiwgImdldFBhdGhUcmFuc2xhdGVkU1ZHUHJvcGVydGllcyIsICJwYXJlbnREaW1lbnNpb25zIiwgIl9vblN0YXJ0RHJhZ2dpbmciLCAicm9vdENsYXNzIiwgIm1vdmluZyIsICJfb25TdG9wRHJhZ2dpbmciLCAiY29tbWl0IiwgImRpc2FibGVFZGl0TW9kZSIsICJkaXNhYmxlRWRpdGluZyIsICJkaXYiLCAiY2xhc3NMaXN0IiwgInRvZ2dsZSIsICJlbmFibGVFZGl0aW5nIiwgImdldEJhc2VUcmFuc2xhdGlvbiIsICJpc1Jlc2l6YWJsZSIsICJvbmNlQWRkZWQiLCAiZm9jdXMiLCAiYW5ub3RhdGlvbkVsZW1lbnRJZCIsICJhZGRVbmRvYWJsZUVkaXRvciIsICJfaXNEcmFnZ2FibGUiLCAic2V0U2VsZWN0ZWQiLCAiaXNPblNjcmVlbiIsICJyZW1vdmUiLCAicmVidWlsZCIsICJpc0F0dGFjaGVkVG9ET00iLCAiYWRkIiwgInNldFBhcmVudCIsICJtdXN0QmVTZWxlY3RlZCIsICJyZW1vdmVTaG91bGRSZXNjYWxlIiwgImFkZFNob3VsZFJlc2NhbGUiLCAiY29udGFpbnMiLCAic2VsZWN0IiwgInVwZGF0ZVBhcmVudCIsICJ4IiwgInkiLCAid2lkdGgiLCAiaGVpZ2h0IiwgInBXIiwgInBIIiwgInJvdGF0aW9uIiwgImZpeEFuZFNldFBvc2l0aW9uIiwgInBhcmVudFdpZHRoIiwgInBhcmVudEhlaWdodCIsICJzZXREaW1zIiwgInBhcmVudFJvdGF0aW9uIiwgInJvdGF0ZSIsICJ1cGRhdGVSb3RhdGlvbiIsICJvblNjYWxlQ2hhbmdpbmciLCAidXBkYXRlUGFyZW50RGltZW5zaW9ucyIsICJzY2FsZSIsICJvblNjYWxlQ2hhbmdpbmdXaGVuRHJhd2luZyIsICJyZW5kZXIiLCAiYmFzZVgiLCAiYmFzZVkiLCAiX2lzQ29weSIsICJkcmF3RGl2IiwgImRvY3VtZW50IiwgImNyZWF0ZUVsZW1lbnQiLCAiYXBwZW5kIiwgInNldEF0dHJpYnV0ZSIsICJjbGFzc05hbWUiLCAiX21vdmVBZnRlclBhc3RlIiwgImNyZWF0ZURyYXdlckluc3RhbmNlIiwgIl9wYXJlbnRXaWR0aCIsICJfcGFyZW50SGVpZ2h0IiwgIl9yb3RhdGlvbiIsICJzdGFydERyYXdpbmciLCAidWlNYW5hZ2VyIiwgIl9pc0xUUiIsICJldmVudCIsICJ0YXJnZXQiLCAib2Zmc2V0WCIsICJvZmZzZXRZIiwgInBvaW50ZXJJZCIsICJwb2ludGVyVHlwZSIsICJ2aWV3cG9ydCIsICJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCAiYWMiLCAiQWJvcnRDb250cm9sbGVyIiwgInNpZ25hbCIsICJjb21iaW5lZFNpZ25hbCIsICJ3aW5kb3ciLCAiYWRkRXZlbnRMaXN0ZW5lciIsICJlIiwgIl9lbmREcmF3IiwgImRlbGV0ZSIsICJlbmREcmF3aW5nU2Vzc2lvbiIsICJpc0NhbmNlbGxhYmxlIiwgInJlbW92ZUxhc3RFbGVtZW50IiwgImlzRW1wdHkiLCAiY2FwdHVyZSIsICJwYXNzaXZlIiwgIm5vQ29udGV4dE1lbnUiLCAiX2RyYXdNb3ZlIiwgInRpbWVTdGFtcCIsICJzdG9wRXZlbnQiLCAidG9nZ2xlRHJhd2luZyIsICJfZWRpdG9yVW5kb0JhciIsICJoaWRlIiwgInN0YXJ0TmV3IiwgInVwZGF0ZVVJRm9yRGVmYXVsdFByb3BlcnRpZXMiLCAic2l6ZSIsICJfY2xlYW51cCIsICJhbGwiLCAiYWJvcnQiLCAiZW5kIiwgImxhc3RFbGVtZW50IiwgImdldExhc3RFbGVtZW50IiwgInNldExhc3RFbGVtZW50IiwgIkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlIiwgIkRSQVdfU1RFUCIsICJlbmREcmF3aW5nIiwgImlzQWJvcnRlZCIsICJjbGVhblVuZG9TdGFjayIsICJwYWdlRGltZW5zaW9ucyIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJlZGl0b3IiLCAiY3JlYXRlQW5kQWRkTmV3RWRpdG9yIiwgImdldE91dGxpbmVzIiwgImNyZWF0ZURyYXdpbmdPcHRpb25zIiwgIl9kYXRhIiwgImRlc2VyaWFsaXplRHJhdyIsICJfcGFnZVgiLCAiX3BhZ2VZIiwgIl9wYWdlV2lkdGgiLCAiX3BhZ2VIZWlnaHQiLCAiX2lubmVyV2lkdGgiLCAiZGVzZXJpYWxpemUiLCAiZGF0YSIsICJyYXdEaW1zIiwgInBhZ2VYIiwgInBhZ2VZIiwgInNlcmlhbGl6ZURyYXciLCAiaXNGb3JDb3B5aW5nIiwgInBhZ2VUcmFuc2xhdGlvbiIsICJzZXJpYWxpemUiLCAicmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQiLCAiYW5ub3RhdGlvbiIsICJ1cGRhdGVFZGl0ZWQiLCAicmVjdCIsICJnZXRSZWN0IiwgImNhbkNyZWF0ZU5ld0VtcHR5RWRpdG9yIiwgIklua0RyYXdPdXRsaW5lciIsICJGbG9hdDY0QXJyYXkiLCAiSW5rRHJhd091dGxpbmUiLCAiY29uc3RydWN0b3IiLCAieCIsICJ5IiwgInBhcmVudFdpZHRoIiwgInBhcmVudEhlaWdodCIsICJyb3RhdGlvbiIsICJ0aGlja25lc3MiLCAibGluZSIsICJOYU4iLCAicG9pbnRzIiwgInNldCIsICJ1cGRhdGVQcm9wZXJ0eSIsICJuYW1lIiwgInZhbHVlIiwgIk91dGxpbmUiLCAiX25vcm1hbGl6ZVBvaW50IiwgImlzRW1wdHkiLCAibGVuZ3RoIiwgImlzQ2FuY2VsbGFibGUiLCAiYWRkIiwgIngxIiwgInkxIiwgIngyIiwgInkyIiwgInN1YmFycmF5IiwgImRpZmZYIiwgImRpZmZZIiwgImQiLCAiTWF0aCIsICJoeXBvdCIsICJwdXNoIiwgImlzTmFOIiwgInBhdGgiLCAidG9TVkdQYXRoIiwgInNwbGljZSIsICJjcmVhdGVCZXppZXJQb2ludHMiLCAiZW5kIiwgImNoYW5nZSIsICJzdGFydE5ldyIsICJsYXN0IiwgImF0IiwgIkZsb2F0MzJBcnJheSIsICJnZXRMYXN0RWxlbWVudCIsICJzZXRMYXN0RWxlbWVudCIsICJlbGVtZW50IiwgInJlbW92ZUxhc3RFbGVtZW50IiwgInBvcCIsICJpIiwgImlpIiwgImZpcnN0WCIsICJzdmdSb3VuZCIsICJmaXJzdFkiLCAibGFzdEluZGV4T2YiLCAic2xpY2UiLCAic2Vjb25kWCIsICJzZWNvbmRZIiwgImJ1ZmZlciIsICJjMXgiLCAiYzF5IiwgImMyeCIsICJjMnkiLCAibWFwIiwgImpvaW4iLCAiZ2V0T3V0bGluZXMiLCAic2NhbGUiLCAiaW5uZXJNYXJnaW4iLCAiYnVpbGQiLCAiZGVmYXVsdFNWR1Byb3BlcnRpZXMiLCAicm9vdCIsICJ2aWV3Qm94IiwgInJvb3RDbGFzcyIsICJkcmF3IiwgImJib3giLCAibGluZXMiLCAicGFyZW50U2NhbGUiLCAic2VyaWFsaXplIiwgInBhZ2VYIiwgInBhZ2VZIiwgInBhZ2VXaWR0aCIsICJwYWdlSGVpZ2h0IiwgImlzRm9yQ29weWluZyIsICJzZXJpYWxpemVkTGluZXMiLCAic2VyaWFsaXplZFBvaW50cyIsICJ3aWR0aCIsICJoZWlnaHQiLCAidHgiLCAidHkiLCAic3giLCAic3kiLCAicmVzY2FsZUZuIiwgIl9yZXNjYWxlIiwgIl9yZXNjYWxlQW5kU3dhcCIsICJBcnJheSIsICJyZWN0IiwgImRlc2VyaWFsaXplIiwgInBhdGhzIiwgIm5ld0xpbmVzIiwgInBvaW50IiwgImxlbiIsICJvdXRsaW5lcyIsICJwcm90b3R5cGUiLCAibWFyZ2luIiwgIm1hcmdpblgiLCAibWFyZ2luWSIsICJJbmZpbml0eSIsICJVdGlsIiwgInBvaW50Qm91bmRpbmdCb3giLCAibGFzdFgiLCAibGFzdFkiLCAiYmV6aWVyQm91bmRpbmdCb3giLCAiTWF0aENsYW1wIiwgImJveCIsICJvbGRNYXJnaW5YIiwgIm9sZE1hcmdpblkiLCAibmV3TWFyZ2luWCIsICJuZXdNYXJnaW5ZIiwgImRpZmZNYXJnaW5YIiwgImRpZmZNYXJnaW5ZIiwgInVwZGF0ZVBhcmVudERpbWVuc2lvbnMiLCAidXBkYXRlUm90YXRpb24iLCAidHJhbnNmb3JtIiwgInJvdGF0aW9uVHJhbnNmb3JtIiwgImRlZmF1bHRQcm9wZXJ0aWVzIiwgImEiLCAiYiIsICJjIiwgImUiLCAiZiIsICJnZXRQYXRoUmVzaXppbmdTVkdQcm9wZXJ0aWVzIiwgIm5ld1giLCAibmV3WSIsICJuZXdXaWR0aCIsICJuZXdIZWlnaHQiLCAiYWJzIiwgIlBSRUNJU0lPTiIsICJzMXgiLCAiczF5IiwgInMyeCIsICJzMnkiLCAiZ2V0UGF0aFJlc2l6ZWRTVkdQcm9wZXJ0aWVzIiwgIl90cmFuc2xhdGUiLCAiZ2V0UGF0aFRyYW5zbGF0ZWRTVkdQcm9wZXJ0aWVzIiwgInBhcmVudERpbWVuc2lvbnMiLCAibmV3UGFyZW50V2lkdGgiLCAibmV3UGFyZW50SGVpZ2h0IiwgIklua0RyYXdpbmdPcHRpb25zIiwgIkRyYXdpbmdPcHRpb25zIiwgImNvbnN0cnVjdG9yIiwgInZpZXdlclBhcmFtZXRlcnMiLCAiX3ZpZXdQYXJhbWV0ZXJzIiwgInVwZGF0ZVByb3BlcnRpZXMiLCAiZmlsbCIsICJzdHJva2UiLCAiQW5ub3RhdGlvbkVkaXRvciIsICJfZGVmYXVsdExpbmVDb2xvciIsICJ1cGRhdGVTVkdQcm9wZXJ0eSIsICJuYW1lIiwgInZhbHVlIiwgInJlYWxTY2FsZSIsICJjbG9uZSIsICJ1cGRhdGVBbGwiLCAiSW5rRWRpdG9yIiwgIkRyYXdpbmdFZGl0b3IiLCAiX3R5cGUiLCAiX2VkaXRvclR5cGUiLCAiQW5ub3RhdGlvbkVkaXRvclR5cGUiLCAiSU5LIiwgIl9kZWZhdWx0RHJhd2luZ09wdGlvbnMiLCAicGFyYW1zIiwgIl93aWxsS2VlcEFzcGVjdFJhdGlvIiwgImRlZmF1bHRMMTBuSWQiLCAiaW5pdGlhbGl6ZSIsICJsMTBuIiwgInVpTWFuYWdlciIsICJ2aWV3UGFyYW1ldGVycyIsICJnZXREZWZhdWx0RHJhd2luZ09wdGlvbnMiLCAib3B0aW9ucyIsICJzdXBwb3J0TXVsdGlwbGVEcmF3aW5ncyIsICJ0eXBlc01hcCIsICJzaGFkb3ciLCAiTWFwIiwgIkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlIiwgIklOS19USElDS05FU1MiLCAiSU5LX0NPTE9SIiwgIklOS19PUEFDSVRZIiwgImNyZWF0ZURyYXdlckluc3RhbmNlIiwgIngiLCAieSIsICJwYXJlbnRXaWR0aCIsICJwYXJlbnRIZWlnaHQiLCAicm90YXRpb24iLCAiSW5rRHJhd091dGxpbmVyIiwgImRlc2VyaWFsaXplRHJhdyIsICJwYWdlWCIsICJwYWdlWSIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJpbm5lck1hcmdpbiIsICJkYXRhIiwgIklua0RyYXdPdXRsaW5lIiwgImRlc2VyaWFsaXplIiwgInBhcmVudCIsICJpbml0aWFsRGF0YSIsICJJbmtBbm5vdGF0aW9uRWxlbWVudCIsICJpbmtMaXN0cyIsICJyZWN0IiwgImlkIiwgImNvbG9yIiwgIm9wYWNpdHkiLCAiYm9yZGVyU3R5bGUiLCAicmF3V2lkdGgiLCAidGhpY2tuZXNzIiwgInBvcHVwUmVmIiwgInBhZ2UiLCAicGFnZU51bWJlciIsICJhbm5vdGF0aW9uVHlwZSIsICJBcnJheSIsICJmcm9tIiwgInBhdGhzIiwgInBvaW50cyIsICJib3hlcyIsICJwYWdlSW5kZXgiLCAic2xpY2UiLCAiZGVsZXRlZCIsICJlZGl0b3IiLCAiYW5ub3RhdGlvbkVsZW1lbnRJZCIsICJfaW5pdGlhbERhdGEiLCAib25TY2FsZUNoYW5naW5nIiwgIl9kcmF3SWQiLCAiX2RyYXdpbmdPcHRpb25zIiwgImRyYXdMYXllciIsICJ0b1NWR1Byb3BlcnRpZXMiLCAib25TY2FsZUNoYW5naW5nV2hlbkRyYXdpbmciLCAiX2N1cnJlbnRQYXJlbnQiLCAiX2N1cnJlbnREcmF3SWQiLCAiY3JlYXRlRHJhd2luZ09wdGlvbnMiLCAiVXRpbCIsICJtYWtlSGV4Q29sb3IiLCAic2VyaWFsaXplIiwgImlzRm9yQ29weWluZyIsICJpc0VtcHR5IiwgInNlcmlhbGl6ZURlbGV0ZWQiLCAibGluZXMiLCAic2VyaWFsaXplRHJhdyIsICJzZXJpYWxpemVkIiwgIl9jb2xvck1hbmFnZXIiLCAiY29udmVydCIsICJzdHJ1Y3RUcmVlUGFyZW50SWQiLCAiX3N0cnVjdFRyZWVQYXJlbnRJZCIsICJpc0NvcHkiLCAiX2hhc0JlZW5Nb3ZlZCIsICJfaGFzQmVlblJlc2l6ZWQiLCAic29tZSIsICJjIiwgImkiLCAicmVuZGVyQW5ub3RhdGlvbkVsZW1lbnQiLCAiYW5ub3RhdGlvbiIsICJ1cGRhdGVFZGl0ZWQiLCAiQ29udG91ckRyYXdPdXRsaW5lIiwgIklua0RyYXdPdXRsaW5lIiwgInRvU1ZHUGF0aCIsICJwYXRoIiwgImVuZHNXaXRoIiwgIkJBU0VfSEVBREVSX0xFTkdUSCIsICJQT0lOVFNfUFJPUEVSVElFU19OVU1CRVIiLCAiU2lnbmF0dXJlRXh0cmFjdG9yIiwgIm1heERpbSIsICJzaWdtYVNGYWN0b3IiLCAic2lnbWFSIiwgImtlcm5lbFNpemUiLCAiaTAiLCAiajAiLCAiaSIsICJqIiwgIkludDMyQXJyYXkiLCAiYnVmIiwgIndpZHRoIiwgIm9mZnNldCIsICJpZCIsICJrIiwgImtrIiwgInNoaWZ0SSIsICJzaGlmdEoiLCAiaGVpZ2h0IiwgInRocmVzaG9sZCIsICJOIiwgImxlbmd0aCIsICJ0eXBlcyIsICJuYmQiLCAibG5iZCIsICJjb250b3VycyIsICJpaiIsICJwaXgiLCAiaTIiLCAiajIiLCAiTWF0aCIsICJhYnMiLCAicG9pbnRzIiwgImlzSG9sZSIsICJjb250b3VyIiwgInBhcmVudCIsICJwdXNoIiwgImNvbnRvdXIwIiwgImMiLCAiaTEiLCAiajEiLCAiaTMiLCAiajMiLCAiaTQiLCAiajQiLCAiaWozIiwgInN0YXJ0IiwgImVuZCIsICJvdXRwdXQiLCAiYXgiLCAiYXkiLCAiYWJ4IiwgImFieSIsICJkaXN0IiwgImh5cG90IiwgIm5hYngiLCAibmFieSIsICJhYSIsICJtIiwgImludlMiLCAicGhpIiwgImF0YW4iLCAiY29zUGhpIiwgImNvcyIsICJzaW5QaGkiLCAic2luIiwgInRtYXgiLCAicG9seSIsICJwYXJ0aWFsUGhpIiwgIm1heCIsICJkbWF4IiwgImluZGV4IiwgImQiLCAibGVuIiwgInNpZ21hUyIsICJrZXJuZWwiLCAiRmxvYXQzMkFycmF5IiwgInNpZ21hUzIiLCAiaGFsZlNpemUiLCAieCIsICJleHAiLCAicmFuZ2VWYWx1ZXMiLCAic2lnbWFSMiIsICJvdXQiLCAiVWludDhBcnJheSIsICJoaXN0b2dyYW0iLCAiVWludDMyQXJyYXkiLCAiY2VudGVyIiwgInN1bSIsICJub3JtIiwgInkiLCAibCIsICJuZWlnaGJvdXIiLCAidyIsICJyb3VuZCIsICJnIiwgIlVpbnQ4Q2xhbXBlZEFycmF5IiwgIm1pbiIsICJJbmZpbml0eSIsICJpaSIsICJBIiwgInJhdGlvIiwgIk0iLCAiTCIsICJmaW5kSW5kZXgiLCAidiIsICJwb3MiLCAic3BvcyIsICJiaXRtYXAiLCAib3JpZ2luYWxCaXRtYXAiLCAibmV3V2lkdGgiLCAibmV3SGVpZ2h0IiwgInByZXZXaWR0aCIsICJwcmV2SGVpZ2h0IiwgInN0ZXBzIiwgImxvZzIiLCAiaXN0ZXBzIiwgImZsb29yIiwgImNlaWwiLCAib2Zmc2NyZWVuIiwgIk9mZnNjcmVlbkNhbnZhcyIsICJjdHgiLCAiZ2V0Q29udGV4dCIsICJkcmF3SW1hZ2UiLCAiY2xvc2UiLCAidHJhbnNmZXJUb0ltYWdlQml0bWFwIiwgIndpbGxSZWFkRnJlcXVlbnRseSIsICJmaWx0ZXIiLCAiZ3JheUltYWdlIiwgImdldEltYWdlRGF0YSIsICJkYXRhIiwgInVpbnQ4QnVmIiwgImV4dHJhY3RDb250b3Vyc0Zyb21UZXh0IiwgInRleHQiLCAiZm9udEZhbWlseSIsICJmb250U3R5bGUiLCAiZm9udFdlaWdodCIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJyb3RhdGlvbiIsICJpbm5lck1hcmdpbiIsICJjYW52YXMiLCAiYWxwaGEiLCAiZm9udFNpemUiLCAiZm9udCIsICJhY3R1YWxCb3VuZGluZ0JveExlZnQiLCAiYWN0dWFsQm91bmRpbmdCb3hSaWdodCIsICJhY3R1YWxCb3VuZGluZ0JveEFzY2VudCIsICJhY3R1YWxCb3VuZGluZ0JveERlc2NlbnQiLCAiZm9udEJvdW5kaW5nQm94QXNjZW50IiwgImZvbnRCb3VuZGluZ0JveERlc2NlbnQiLCAibWVhc3VyZVRleHQiLCAiU0NBTEUiLCAiY2FudmFzV2lkdGgiLCAiY2FudmFzSGVpZ2h0IiwgImZpbGxTdHlsZSIsICJmaWxsUmVjdCIsICJmaWxsVGV4dCIsICJjb250b3VyTGlzdCIsICJwcm9jZXNzRHJhd25MaW5lcyIsICJsaW5lcyIsICJjdXJ2ZXMiLCAibXVzdFNtb290aCIsICJhcmVDb250b3VycyIsICJwcm9jZXNzIiwgImJ1ZmZlciIsICJ0aGlja25lc3MiLCAibGluZXNBbmRQb2ludHMiLCAieFNjYWxlIiwgInlTY2FsZSIsICJuZXdDdXJ2ZXMiLCAicmVkdWNlZFBvaW50cyIsICJuZXdQb2ludHMiLCAibGluZSIsICJzZXQiLCAiTmFOIiwgIngxIiwgInkxIiwgIngyIiwgInkyIiwgIk91dGxpbmUiLCAiY3JlYXRlQmV6aWVyUG9pbnRzIiwgIm91dGxpbmUiLCAiQ29udG91ckRyYXdPdXRsaW5lIiwgIklua0RyYXdPdXRsaW5lIiwgImJ1aWxkIiwgImNvbXByZXNzU2lnbmF0dXJlIiwgIm91dGxpbmVzIiwgIm1pbkRpZmYiLCAibWF4RGlmZiIsICJvdXRsaW5lc0xlbmd0aCIsICJkeCIsICJidWZmZXJUeXBlIiwgIkludDhBcnJheSIsICJJbnQxNkFycmF5IiwgImhlYWRlckxlbmd0aCIsICJoZWFkZXIiLCAiQllURVNfUEVSX0VMRU1FTlQiLCAiY3MiLCAiQ29tcHJlc3Npb25TdHJlYW0iLCAid3JpdGVyIiwgIndyaXRhYmxlIiwgImdldFdyaXRlciIsICJyZWFkeSIsICJ3cml0ZSIsICJCdWZmZXJDdG9yIiwgInByb3RvdHlwZSIsICJjb25zdHJ1Y3RvciIsICJkaWZmcyIsICJSZXNwb25zZSIsICJyZWFkYWJsZSIsICJhcnJheUJ1ZmZlciIsICJieXRlcyIsICJ0b0Jhc2U2NFV0aWwiLCAiZGVjb21wcmVzc1NpZ25hdHVyZSIsICJzaWduYXR1cmVEYXRhIiwgImZyb21CYXNlNjRVdGlsIiwgIkRlY29tcHJlc3Npb25TdHJlYW0iLCAidGhlbiIsICJjYXRjaCIsICJjaHVuayIsICJ2ZXJzaW9uIiwgIkVycm9yIiwgIm51bWJlck9mRHJhd2luZ3MiLCAiZGlmZnNPZmZzZXQiLCAiZSIsICJ3YXJuIiwgIlNpZ25hdHVyZU9wdGlvbnMiLCAiRHJhd2luZ09wdGlvbnMiLCAiY29uc3RydWN0b3IiLCAidXBkYXRlUHJvcGVydGllcyIsICJmaWxsIiwgImNsb25lIiwgInVwZGF0ZUFsbCIsICJEcmF3blNpZ25hdHVyZU9wdGlvbnMiLCAiSW5rRHJhd2luZ09wdGlvbnMiLCAidmlld2VyUGFyYW1ldGVycyIsICJzdHJva2UiLCAiX3ZpZXdQYXJhbWV0ZXJzIiwgIlNpZ25hdHVyZUVkaXRvciIsICJEcmF3aW5nRWRpdG9yIiwgIl90eXBlIiwgIl9lZGl0b3JUeXBlIiwgIkFubm90YXRpb25FZGl0b3JUeXBlIiwgIlNJR05BVFVSRSIsICJfZGVmYXVsdERyYXdpbmdPcHRpb25zIiwgInBhcmFtcyIsICJtdXN0QmVDb21taXR0ZWQiLCAibmFtZSIsICJfd2lsbEtlZXBBc3BlY3RSYXRpbyIsICJzaWduYXR1cmVEYXRhIiwgImRlZmF1bHRMMTBuSWQiLCAiaW5pdGlhbGl6ZSIsICJsMTBuIiwgInVpTWFuYWdlciIsICJBbm5vdGF0aW9uRWRpdG9yIiwgIl9kZWZhdWx0RHJhd25TaWduYXR1cmVPcHRpb25zIiwgInZpZXdQYXJhbWV0ZXJzIiwgImdldERlZmF1bHREcmF3aW5nT3B0aW9ucyIsICJvcHRpb25zIiwgInN1cHBvcnRNdWx0aXBsZURyYXdpbmdzIiwgInR5cGVzTWFwIiwgInNoYWRvdyIsICJNYXAiLCAiaXNEcmF3ZXIiLCAidGVsZW1ldHJ5RmluYWxEYXRhIiwgInR5cGUiLCAiaGFzRGVzY3JpcHRpb24iLCAiY29tcHV0ZVRlbGVtZXRyeUZpbmFsRGF0YSIsICJkYXRhIiwgImhhc0Rlc2NyaXB0aW9uU3RhdHMiLCAiZ2V0IiwgImhhc0FsdFRleHQiLCAiaGFzTm9BbHRUZXh0IiwgImlzUmVzaXphYmxlIiwgIm9uU2NhbGVDaGFuZ2luZyIsICJfZHJhd0lkIiwgInJlbmRlciIsICJkaXYiLCAiYmFzZVgiLCAiYmFzZVkiLCAiX2lzQ29weSIsICJ4IiwgInkiLCAibGluZXMiLCAibXVzdFNtb290aCIsICJhcmVDb250b3VycyIsICJkZXNjcmlwdGlvbiIsICJ1dWlkIiwgImhlaWdodEluUGFnZSIsICJyYXdEaW1zIiwgInBhZ2VXaWR0aCIsICJwYWdlSGVpZ2h0IiwgInJvdGF0aW9uIiwgInBhcmVudCIsICJ2aWV3cG9ydCIsICJvdXRsaW5lIiwgIlNpZ25hdHVyZUV4dHJhY3RvciIsICJwcm9jZXNzRHJhd25MaW5lcyIsICJpbm5lck1hcmdpbiIsICJfSU5ORVJfTUFSR0lOIiwgImFkZFNpZ25hdHVyZSIsICJzZXRBdHRyaWJ1dGUiLCAiSlNPTiIsICJzdHJpbmdpZnkiLCAiaGlkZGVuIiwgIl91aU1hbmFnZXIiLCAiZ2V0U2lnbmF0dXJlIiwgIl9tb3ZlQWZ0ZXJQYXN0ZSIsICJzZXRVdWlkIiwgImFkZEVkaXRUb29sYmFyIiwgImdldFV1aWQiLCAidGhlbiIsICJ0b29sYmFyIiwgInVwZGF0ZUVkaXRTaWduYXR1cmVCdXR0b24iLCAiZ2V0U2lnbmF0dXJlUHJldmlldyIsICJuZXdDdXJ2ZXMiLCAidGhpY2tuZXNzIiwgIndpZHRoIiwgImhlaWdodCIsICJtYXhEaW0iLCAiTWF0aCIsICJtYXgiLCAib3V0bGluZURhdGEiLCAiY3VydmVzIiwgIm1hcCIsICJwb2ludHMiLCAic2lnbmF0dXJlTWFuYWdlciIsICJhZGRFZGl0U2lnbmF0dXJlQnV0dG9uIiwgInNob3ciLCAic2F2ZWRYIiwgInNhdmVkWSIsICJDb250b3VyRHJhd091dGxpbmUiLCAiZHJhd2luZ09wdGlvbnMiLCAiX2FkZE91dGxpbmVzIiwgImRyYXdPdXRsaW5lcyIsICJwYXJlbnRXaWR0aCIsICJwYXJlbnRIZWlnaHQiLCAicGFyZW50RGltZW5zaW9ucyIsICJwYWdlRGltZW5zaW9ucyIsICJuZXdIZWlnaHQiLCAic2V0RGltcyIsICJjZW50ZXIiLCAiX29uUmVzaXplZCIsICJyb3RhdGUiLCAiYWRkVG9Bbm5vdGF0aW9uU3RvcmFnZSIsICJfcmVwb3J0VGVsZW1ldHJ5IiwgImFjdGlvbiIsICJoYXNCZWVuU2F2ZWQiLCAiZ2V0RnJvbUltYWdlIiwgImJpdG1hcCIsICJwcm9jZXNzIiwgImdldEZyb21UZXh0IiwgInRleHQiLCAiZm9udEluZm8iLCAiZXh0cmFjdENvbnRvdXJzRnJvbVRleHQiLCAiZ2V0RHJhd25TaWduYXR1cmUiLCAiY3JlYXRlRHJhd2luZ09wdGlvbnMiLCAiX2RyYXdpbmdPcHRpb25zIiwgInNlcmlhbGl6ZSIsICJpc0ZvckNvcHlpbmciLCAiaXNFbXB0eSIsICJyZWN0IiwgInNlcmlhbGl6ZURyYXciLCAic2VyaWFsaXplZCIsICJhbm5vdGF0aW9uVHlwZSIsICJpc1NpZ25hdHVyZSIsICJjb2xvciIsICJwYWdlSW5kZXgiLCAic3RydWN0VHJlZVBhcmVudElkIiwgIl9zdHJ1Y3RUcmVlUGFyZW50SWQiLCAicGF0aHMiLCAiaXNDb3B5IiwgImFjY2Vzc2liaWxpdHlEYXRhIiwgImFsdCIsICJkZXNlcmlhbGl6ZURyYXciLCAicGFnZVgiLCAicGFnZVkiLCAiZGVzZXJpYWxpemUiLCAiSW5rRHJhd091dGxpbmUiLCAiZWRpdG9yIiwgIlN0YW1wRWRpdG9yIiwgIkFubm90YXRpb25FZGl0b3IiLCAiX3R5cGUiLCAiX2VkaXRvclR5cGUiLCAiQW5ub3RhdGlvbkVkaXRvclR5cGUiLCAiU1RBTVAiLCAiY29uc3RydWN0b3IiLCAicGFyYW1zIiwgIm5hbWUiLCAiYml0bWFwVXJsIiwgImJpdG1hcEZpbGUiLCAiZGVmYXVsdEwxMG5JZCIsICJpbml0aWFsaXplIiwgImwxMG4iLCAidWlNYW5hZ2VyIiwgImlzSGFuZGxpbmdNaW1lRm9yUGFzdGluZyIsICJtaW1lIiwgIlN1cHBvcnRlZEltYWdlTWltZVR5cGVzIiwgImluY2x1ZGVzIiwgInBhc3RlIiwgIml0ZW0iLCAicGFyZW50IiwgInBhc3RlRWRpdG9yIiwgImdldEFzRmlsZSIsICJhbHRUZXh0RmluaXNoIiwgIl91aU1hbmFnZXIiLCAidXNlTmV3QWx0VGV4dEZsb3ciLCAiZGl2IiwgImhpZGRlbiIsICJ0ZWxlbWV0cnlGaW5hbERhdGEiLCAidHlwZSIsICJoYXNBbHRUZXh0IiwgImFsdFRleHREYXRhIiwgImFsdFRleHQiLCAiY29tcHV0ZVRlbGVtZXRyeUZpbmFsRGF0YSIsICJkYXRhIiwgImhhc0FsdFRleHRTdGF0cyIsICJnZXQiLCAiaGFzTm9BbHRUZXh0IiwgImZyb21JZCIsICJyZW1vdmUiLCAiYml0bWFwIiwgImlkIiwgImlzU3ZnIiwgImZpbGUiLCAiZW5hYmxlV2FpdGluZyIsICJ1c2VOZXdBbHRUZXh0V2hlbkFkZGluZ0ltYWdlIiwgIl9lZGl0VG9vbGJhciIsICJoaWRlIiwgImVkaXRBbHRUZXh0IiwgIl9yZXBvcnRUZWxlbWV0cnkiLCAiYWN0aW9uIiwgImFsdF90ZXh0X21vZGFsIiwgImFsdF90ZXh0X3R5cGUiLCAibWxHdWVzc0FsdFRleHQiLCAiZm9jdXMiLCAiaW1hZ2VEYXRhIiwgInVwZGF0ZUFsdFRleHREYXRhIiwgImhhc0FsdFRleHREYXRhIiwgIm1sTWFuYWdlciIsICJFcnJvciIsICJpc0VuYWJsZWRGb3IiLCAid2lkdGgiLCAiaGVpZ2h0IiwgImNvcHlDYW52YXMiLCAicmVzcG9uc2UiLCAiZ3Vlc3MiLCAicmVxdWVzdCIsICJjaGFubmVscyIsICJsZW5ndGgiLCAiZXJyb3IiLCAiY2FuY2VsIiwgIm91dHB1dCIsICJzZXRHdWVzc2VkQWx0VGV4dCIsICJhbHQiLCAiZGVjb3JhdGl2ZSIsICJpbWFnZU1hbmFnZXIiLCAiZ2V0RnJvbUlkIiwgInRoZW4iLCAiZmluYWxseSIsICJ1cmwiLCAiZ2V0RnJvbVVybCIsICJnZXRGcm9tRmlsZSIsICJpbnB1dCIsICJkb2N1bWVudCIsICJjcmVhdGVFbGVtZW50IiwgImFjY2VwdCIsICJqb2luIiwgInNpZ25hbCIsICJfc2lnbmFsIiwgIlByb21pc2UiLCAicmVzb2x2ZSIsICJhZGRFdmVudExpc3RlbmVyIiwgImZpbGVzIiwgImNsaWNrIiwgImRlbGV0ZUlkIiwgImNsZWFyVGltZW91dCIsICJyZWJ1aWxkIiwgImlzQXR0YWNoZWRUb0RPTSIsICJhZGQiLCAib25jZUFkZGVkIiwgIl9pc0RyYWdnYWJsZSIsICJpc0VtcHR5IiwgImlzUmVzaXphYmxlIiwgInJlbmRlciIsICJiYXNlWCIsICJiYXNlWSIsICJfaXNDb3B5IiwgIngiLCAieSIsICJhZGRBbHRUZXh0QnV0dG9uIiwgIl9tb3ZlQWZ0ZXJQYXN0ZSIsICJhZGRTaG91bGRSZXNjYWxlIiwgInNldENhbnZhcyIsICJhbm5vdGF0aW9uRWxlbWVudElkIiwgImNhbnZhcyIsICJiaXRtYXBJZCIsICJnZXRGcm9tQ2FudmFzIiwgImlzVmFsaWRJZCIsICJfb25SZXNpemVkIiwgIm9uU2NhbGVDaGFuZ2luZyIsICJUSU1FX1RPX1dBSVQiLCAic2V0VGltZW91dCIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJwYWdlRGltZW5zaW9ucyIsICJNQVhfUkFUSU8iLCAiZmFjdG9yIiwgIk1hdGgiLCAibWluIiwgInBhcmVudFdpZHRoIiwgInBhcmVudEhlaWdodCIsICJwYXJlbnREaW1lbnNpb25zIiwgInNldERpbXMiLCAic2V0QXR0cmlidXRlIiwgImFkZENvbnRhaW5lciIsICJfaW5pdGlhbE9wdGlvbnMiLCAiaXNDZW50ZXJlZCIsICJjZW50ZXIiLCAiZml4QW5kU2V0UG9zaXRpb24iLCAiYWRkVW5kb2FibGVFZGl0b3IiLCAibWF4RGF0YURpbWVuc2lvbiIsICJtYXhQcmV2aWV3RGltZW5zaW9uIiwgImNyZWF0ZUltYWdlRGF0YSIsICJiaXRtYXBXaWR0aCIsICJiaXRtYXBIZWlnaHQiLCAib3V0cHV0U2NhbGUiLCAiT3V0cHV0U2NhbGUiLCAicmF0aW8iLCAiZmxvb3IiLCAic2NhbGVkV2lkdGgiLCAiY2VpbCIsICJzeCIsICJzY2FsZWRIZWlnaHQiLCAic3kiLCAiY3R4IiwgImdldENvbnRleHQiLCAiZmlsdGVyIiwgImhjbUZpbHRlciIsICJ3aGl0ZSIsICJibGFjayIsICJ3aW5kb3ciLCAibWF0Y2hNZWRpYSIsICJtYXRjaGVzIiwgImJveERpbSIsICJib3hEaW1XaWR0aCIsICJib3hEaW1IZWlnaHQiLCAicGF0dGVybiIsICJPZmZzY3JlZW5DYW52YXMiLCAicGF0dGVybkN0eCIsICJmaWxsU3R5bGUiLCAiZmlsbFJlY3QiLCAiY3JlYXRlUGF0dGVybiIsICJkcmF3SW1hZ2UiLCAiZGF0YVdpZHRoIiwgImRhdGFIZWlnaHQiLCAic3ltbWV0cmljIiwgIm9mZnNjcmVlbiIsICJvZmZzY3JlZW5DdHgiLCAid2lsbFJlYWRGcmVxdWVudGx5IiwgImdldEltYWdlRGF0YSIsICJuZXdXaWR0aCIsICJuZXdIZWlnaHQiLCAicHJldldpZHRoIiwgInByZXZIZWlnaHQiLCAidHJhbnNmZXJUb0ltYWdlQml0bWFwIiwgInRvVXJsIiwgImdldFN2Z1VybCIsICJ0b0RhdGFVUkwiLCAicm91bmQiLCAiUGl4ZWxzUGVySW5jaCIsICJQREZfVE9fQ1NTX1VOSVRTIiwgInN0cnVjdHVyZWRDbG9uZSIsICJkZXNlcmlhbGl6ZSIsICJpbml0aWFsRGF0YSIsICJtaXNzaW5nQ2FudmFzIiwgIlN0YW1wQW5ub3RhdGlvbkVsZW1lbnQiLCAicmVjdCIsICJyb3RhdGlvbiIsICJzdHJ1Y3RQYXJlbnQiLCAicG9wdXBSZWYiLCAiY29udGFpbmVyIiwgInBhZ2UiLCAicGFnZU51bWJlciIsICJfaGFzTm9DYW52YXMiLCAiX3N0cnVjdFRyZWUiLCAiZ2V0QXJpYUF0dHJpYnV0ZXMiLCAiQW5ub3RhdGlvblByZWZpeCIsICJhbm5vdGF0aW9uVHlwZSIsICJwYWdlSW5kZXgiLCAic2xpY2UiLCAiZGVsZXRlZCIsICJhY2Nlc3NpYmlsaXR5RGF0YSIsICJlZGl0b3IiLCAiYWRkTWlzc2luZ0NhbnZhcyIsICJfaW5pdGlhbERhdGEiLCAic2VyaWFsaXplIiwgImlzRm9yQ29weWluZyIsICJjb250ZXh0IiwgInNlcmlhbGl6ZURlbGV0ZWQiLCAic2VyaWFsaXplZCIsICJnZXRSZWN0IiwgInN0cnVjdFRyZWVQYXJlbnRJZCIsICJfc3RydWN0VHJlZVBhcmVudElkIiwgInNlcmlhbGl6ZUFsdFRleHQiLCAiaXNDb3B5IiwgImNoYW5nZXMiLCAiaXNTYW1lIiwgImlzU2FtZUFsdFRleHQiLCAic3RhbXBzIiwgIk1hcCIsICJhcmVhIiwgImhhcyIsICJzZXQiLCAicHJldkRhdGEiLCAiY2xvc2UiLCAiaXNTYW1lUGFnZUluZGV4IiwgIl9oYXNCZWVuTW92ZWQiLCAiX2hhc0JlZW5SZXNpemVkIiwgInJlbmRlckFubm90YXRpb25FbGVtZW50IiwgImFubm90YXRpb24iLCAidXBkYXRlRWRpdGVkIiwgIkFubm90YXRpb25FZGl0b3JMYXllciIsICJNYXAiLCAiX2luaXRpYWxpemVkIiwgIkZyZWVUZXh0RWRpdG9yIiwgIklua0VkaXRvciIsICJTdGFtcEVkaXRvciIsICJIaWdobGlnaHRFZGl0b3IiLCAiU2lnbmF0dXJlRWRpdG9yIiwgIm1hcCIsICJ0eXBlIiwgIl9lZGl0b3JUeXBlIiwgImNvbnN0cnVjdG9yIiwgInVpTWFuYWdlciIsICJwYWdlSW5kZXgiLCAiZGl2IiwgInN0cnVjdFRyZWVMYXllciIsICJhY2Nlc3NpYmlsaXR5TWFuYWdlciIsICJhbm5vdGF0aW9uTGF5ZXIiLCAiZHJhd0xheWVyIiwgInRleHRMYXllciIsICJ2aWV3cG9ydCIsICJsMTBuIiwgImVkaXRvclR5cGVzIiwgInZhbHVlcyIsICJlZGl0b3JUeXBlIiwgImluaXRpYWxpemUiLCAicmVnaXN0ZXJFZGl0b3JUeXBlcyIsICJfc3RydWN0VHJlZSIsICJhZGRMYXllciIsICJpc0VtcHR5IiwgInNpemUiLCAiaXNJbnZpc2libGUiLCAiZ2V0TW9kZSIsICJBbm5vdGF0aW9uRWRpdG9yVHlwZSIsICJOT05FIiwgInVwZGF0ZVRvb2xiYXIiLCAibW9kZSIsICJ1cGRhdGVNb2RlIiwgImRpc2FibGVUZXh0U2VsZWN0aW9uIiwgInRvZ2dsZVBvaW50ZXJFdmVudHMiLCAidG9nZ2xlQW5ub3RhdGlvbkxheWVyUG9pbnRlckV2ZW50cyIsICJkaXNhYmxlQ2xpY2siLCAiSU5LIiwgImVuYWJsZUNsaWNrIiwgIkhJR0hMSUdIVCIsICJlbmFibGVUZXh0U2VsZWN0aW9uIiwgImNsYXNzTGlzdCIsICJ0b2dnbGUiLCAiX3R5cGUiLCAiaGlkZGVuIiwgImhhc1RleHRMYXllciIsICJzZXRFZGl0aW5nU3RhdGUiLCAiaXNFZGl0aW5nIiwgImFkZENvbW1hbmRzIiwgInBhcmFtcyIsICJjbGVhblVuZG9TdGFjayIsICJ0b2dnbGVEcmF3aW5nIiwgImVuYWJsZWQiLCAiZW5hYmxlIiwgInRhYkluZGV4IiwgImFubm90YXRpb25FbGVtZW50SWRzIiwgIlNldCIsICJlZGl0b3IiLCAiZW5hYmxlRWRpdGluZyIsICJzaG93IiwgImFubm90YXRpb25FbGVtZW50SWQiLCAicmVtb3ZlQ2hhbmdlZEV4aXN0aW5nQW5ub3RhdGlvbiIsICJhZGQiLCAiZWRpdGFibGVzIiwgImdldEVkaXRhYmxlQW5ub3RhdGlvbnMiLCAiZWRpdGFibGUiLCAiaGlkZSIsICJpc0RlbGV0ZWRBbm5vdGF0aW9uRWxlbWVudCIsICJkYXRhIiwgImlkIiwgImhhcyIsICJkZXNlcmlhbGl6ZSIsICJhZGRPclJlYnVpbGQiLCAiZGlzYWJsZSIsICJjaGFuZ2VkQW5ub3RhdGlvbnMiLCAicmVzZXRBbm5vdGF0aW9ucyIsICJkaXNhYmxlRWRpdGluZyIsICJzZXJpYWxpemUiLCAic2V0IiwgImdldEVkaXRhYmxlQW5ub3RhdGlvbiIsICJyZW1vdmUiLCAiZ2V0IiwgInJlc2V0QW5ub3RhdGlvbkVsZW1lbnQiLCAiYWRkQ2hhbmdlZEV4aXN0aW5nQW5ub3RhdGlvbiIsICJyZW5kZXJBbm5vdGF0aW9uRWxlbWVudCIsICJzZXRBY3RpdmVFZGl0b3IiLCAiY3VycmVudEFjdGl2ZSIsICJnZXRBY3RpdmUiLCAiQWJvcnRDb250cm9sbGVyIiwgInNpZ25hbCIsICJjb21iaW5lZFNpZ25hbCIsICJhZGRFdmVudExpc3RlbmVyIiwgImJpbmQiLCAiYWJvcnQiLCAiZXZlbnQiLCAidW5zZWxlY3RBbGwiLCAidGFyZ2V0IiwgImdldEF0dHJpYnV0ZSIsICJjb250YWlucyIsICJpc01hYyIsICJGZWF0dXJlVGVzdCIsICJwbGF0Zm9ybSIsICJidXR0b24iLCAiY3RybEtleSIsICJzaG93QWxsRWRpdG9ycyIsICJzdGFydEhpZ2hsaWdodGluZyIsICJkaXJlY3Rpb24iLCAieCIsICJ5IiwgIm9uY2UiLCAiX3NpZ25hbCIsICJwcmV2ZW50RGVmYXVsdCIsICJwb2ludGVyZG93biIsICJwb2ludGVydXAiLCAiYXR0YWNoIiwgInJlbW92ZURlbGV0ZWRBbm5vdGF0aW9uRWxlbWVudCIsICJkZXRhY2giLCAiZGVsZXRlIiwgInJlbW92ZVBvaW50ZXJJblRleHRMYXllciIsICJjb250ZW50RGl2IiwgImFkZERlbGV0ZWRBbm5vdGF0aW9uRWxlbWVudCIsICJyZW1vdmVFZGl0b3IiLCAiaXNBdHRhY2hlZFRvRE9NIiwgImNoYW5nZVBhcmVudCIsICJwYXJlbnQiLCAiQW5ub3RhdGlvbkVkaXRvciIsICJkZWxldGVBbm5vdGF0aW9uRWxlbWVudCIsICJzZXRQYXJlbnQiLCAiYXBwZW5kIiwgImFkZEVkaXRvciIsICJyZW5kZXIiLCAiZml4QW5kU2V0UG9zaXRpb24iLCAib25jZUFkZGVkIiwgImFkZFRvQW5ub3RhdGlvblN0b3JhZ2UiLCAiX3JlcG9ydFRlbGVtZXRyeSIsICJ0ZWxlbWV0cnlJbml0aWFsRGF0YSIsICJtb3ZlRWRpdG9ySW5ET00iLCAiYWN0aXZlRWxlbWVudCIsICJkb2N1bWVudCIsICJfZm9jdXNFdmVudHNBbGxvd2VkIiwgInNldFRpbWVvdXQiLCAiZm9jdXMiLCAiX3N0cnVjdFRyZWVQYXJlbnRJZCIsICJtb3ZlRWxlbWVudEluRE9NIiwgIm5lZWRzVG9CZVJlYnVpbHQiLCAicmVidWlsZCIsICJhZGRVbmRvYWJsZUVkaXRvciIsICJjbWQiLCAiX3VpTWFuYWdlciIsICJ1bmRvIiwgIm11c3RFeGVjIiwgImdldE5leHRJZCIsICJnZXRJZCIsICJhYyIsICJwcm90b3R5cGUiLCAiY2FuQ3JlYXRlTmV3RW1wdHlFZGl0b3IiLCAicGFzdGVFZGl0b3IiLCAib2Zmc2V0WCIsICJvZmZzZXRZIiwgImlzQ2VudGVyZWQiLCAiYW5ub3RhdGlvblR5cGUiLCAiYW5ub3RhdGlvbkVkaXRvclR5cGUiLCAiY3JlYXRlQW5kQWRkTmV3RWRpdG9yIiwgIndpZHRoIiwgImhlaWdodCIsICJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCAidGxYIiwgIk1hdGgiLCAibWF4IiwgInRsWSIsICJiclgiLCAibWluIiwgIndpbmRvdyIsICJpbm5lcldpZHRoIiwgImJyWSIsICJpbm5lckhlaWdodCIsICJjZW50ZXJYIiwgImNlbnRlclkiLCAicm90YXRpb24iLCAiYWRkTmV3RWRpdG9yIiwgInNldFNlbGVjdGVkIiwgInRvZ2dsZVNlbGVjdGVkIiwgInVuc2VsZWN0IiwgImlzRHJhd2VyIiwgInN1cHBvcnRNdWx0aXBsZURyYXdpbmdzIiwgImN1cnJlbnRNb2RlIiwgIlNUQU1QIiwgIlNJR05BVFVSRSIsICJzdGFydERyYXdpbmdTZXNzaW9uIiwgInByZXZlbnRTY3JvbGwiLCAic3RhcnREcmF3aW5nIiwgInNldEN1cnJlbnREcmF3aW5nU2Vzc2lvbiIsICJyZWxhdGVkVGFyZ2V0IiwgImNvbW1pdE9yUmVtb3ZlIiwgInBhdXNlIiwgIm9uIiwgImVuZERyYXdpbmdTZXNzaW9uIiwgImlzQWJvcnRlZCIsICJlbmREcmF3aW5nIiwgImZpbmROZXdQYXJlbnQiLCAibGF5ZXIiLCAiZmluZFBhcmVudCIsICJvblNjYWxlQ2hhbmdpbmciLCAib25TY2FsZUNoYW5naW5nV2hlbkRyYXdpbmciLCAiZGVzdHJveSIsICJjbGVhclRpbWVvdXQiLCAiY2xlYXIiLCAicmVtb3ZlTGF5ZXIiLCAic2V0TGF5ZXJEaW1lbnNpb25zIiwgImdldEVkaXRvcnMiLCAidXBkYXRlIiwgIm9sZFJvdGF0aW9uIiwgInJvdGF0ZSIsICJwYWdlRGltZW5zaW9ucyIsICJwYWdlV2lkdGgiLCAicGFnZUhlaWdodCIsICJyYXdEaW1zIiwgInNjYWxlIiwgInZpZXdQYXJhbWV0ZXJzIiwgInJlYWxTY2FsZSIsICJEcmF3TGF5ZXIiLCAiTWFwIiwgImNvbnN0cnVjdG9yIiwgInBhZ2VJbmRleCIsICJzZXRQYXJlbnQiLCAicGFyZW50IiwgInNpemUiLCAicm9vdCIsICJ2YWx1ZXMiLCAicmVtb3ZlIiwgImFwcGVuZCIsICJfc3ZnRmFjdG9yeSIsICJzaGFkb3ciLCAiRE9NU1ZHRmFjdG9yeSIsICJlbGVtZW50IiwgIngiLCAieSIsICJ3aWR0aCIsICJoZWlnaHQiLCAic3R5bGUiLCAidG9wIiwgImxlZnQiLCAic3ZnIiwgImNyZWF0ZSIsICJzZXRBdHRyaWJ1dGUiLCAiZGVmcyIsICJwYXRoSWQiLCAiY2xpcFBhdGgiLCAiY3JlYXRlRWxlbWVudCIsICJjbGlwUGF0aElkIiwgImNsaXBQYXRoVXNlIiwgImNsYXNzTGlzdCIsICJhZGQiLCAicHJvcGVydGllcyIsICJrZXkiLCAidmFsdWUiLCAiT2JqZWN0IiwgImVudHJpZXMiLCAicmVtb3ZlQXR0cmlidXRlIiwgImRyYXciLCAiaXNQYXRoVXBkYXRhYmxlIiwgImhhc0NsaXAiLCAiaWQiLCAicGF0aCIsICJzZXQiLCAidXNlIiwgInVwZGF0ZVByb3BlcnRpZXMiLCAiZHJhd091dGxpbmUiLCAibXVzdFJlbW92ZVNlbGZJbnRlcnNlY3Rpb25zIiwgIm1hc2tJZCIsICJtYXNrIiwgInJlY3QiLCAidXNlMSIsICJ1c2UyIiwgImNsb25lTm9kZSIsICJmaW5hbGl6ZURyYXciLCAiZGVsZXRlIiwgImVsZW1lbnRPcklkIiwgImJib3giLCAicm9vdENsYXNzIiwgImdldCIsICJjbGFzc05hbWUiLCAidG9nZ2xlIiwgImZpcnN0Q2hpbGQiLCAicGF0aEVsZW1lbnQiLCAidXBkYXRlUGFyZW50IiwgImxheWVyIiwgImRlc3Ryb3kiLCAiY2xlYXIiLCAiZ2xvYmFsVGhpcyIsICJwZGZqc1Rlc3RpbmdVdGlscyIsICJIaWdobGlnaHRPdXRsaW5lciIsICJvcmllbnRhdGlvbkRlZ3JlZXMiXQp9Cg==
